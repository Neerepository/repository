(self.webpackChunkorion=self.webpackChunkorion||[]).push([[773],{8393:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _ckeditor_ckeditor5_build_classic_build_translations_es__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2155),_ckeditor_ckeditor5_build_classic_build_translations_es__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_ckeditor_ckeditor5_build_classic_build_translations_es__WEBPACK_IMPORTED_MODULE_0__),_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1272),_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_1__),_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5234),_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_2__);function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}const __WEBPACK_DEFAULT_EXPORT__={components:{ckeditor:_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_1___default().component},data:function(){return{cargando:!1,procesando:!1,moverParametro:{nombre:"",origen:"",destino:""},comillas:'"',constante:"",escalasEdad:[{id:"D",nombre:"Días"},{id:"M",nombre:"Meses"},{id:"Ñ",nombre:"Años"}],indiceParametro:null,parametro:{sexo:"A",orden:0,opcion_tipo_dato_id:"",tipo_parametro:"",tipo_dato_id:"",tipo_dato:{nombre:""},imprimir_valor_referencia:!1,valores_referencia_edad:[],formula:[],interpretacion:"",interpretacion_valor_referencia:null,ocultar_pdf:!1,no_cambia_estado_muestra:!1,muestra_id:""},parametroIdNombre:"",parametros:[],registro:{id:"0",nombre:"",seccion_id:"",tecnica_id:"",examen_id:"",taxonomia_id:"",imprimir_solo_parametros:!1,parametros:[]},secciones:[],sexos:[{id:"",nombre:"Seleccione..."},{id:"A",nombre:"Ambos sexos"},{id:"F",nombre:"Femenino"},{id:"M",nombre:"Masculino"}],taxonomias:[],tecnicas:[],tiposDatos:[],tiposListasTrabajos:[{id:"C",nombre:"Cuadrícula"},{id:"I",nombre:"Cuadrícula por Ítem"}],tiposParametros:[{id:"",nombre:"Seleccione..."},{id:"A",nombre:"Adjunto (Pro)"},{id:"F",nombre:"Fórmula"},{id:"G",nombre:"Gráfico"},{id:"I",nombre:"Imagen (Pro)"},{id:"L",nombre:"Línea de Separación"},{id:"S",nombre:"Lista"},{id:"M",nombre:"Microbiología"},{id:"N",nombre:"Numérico"},{id:"X",nombre:"Texto"},{id:"E",nombre:"Texto Extendido"},{id:"T",nombre:"Título"}],valorReferencia:{escala_edad:"D",valor_minimo_critico:"",valor_maximo_critico:""},valoresReferencia:[],editor:_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_2___default(),editorConfig:{language:"es",toolbar:["heading","|","bold","|","bulletedList","numberedList","|","insertTable","|","undo","redo"],table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}},muestras:[]}},props:["id","examen","permisos","plantillas"],mounted:function(){var e=this;$("#formularioParametro").on("shown.bs.modal",(function(){return $("#tipo_parametro").focus()})),$("#formularioParametro").on("hidden.bs.modal",(function(){return e.limpiarFormularioParametro()})),$("#formularioValoresReferencia").on("shown.bs.modal",(function(){return $("#escala_edad_valor_referencia").focus()})),$("#formularioValoresReferencia").on("hidden.bs.modal",(function(){return e.limpiarFormularioValoresReferencia()})),this.registro.id=this.id,this.registro.examen_id=this.examen.id,this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},abrirFormularioParametro:function(){$("#formularioParametro").modal({backdrop:"static"})},abrirFormularioValoresReferencia:function(e){this.indiceParametro=this.parametros.indexOf(e),this.valoresReferencia=e.valores_referencia_edad.slice(0),$("#formularioValoresReferencia").modal({backdrop:"static"})},agregarFormula:function(e){this.parametro.formula.push(e)},agregarValorReferencia:function(){var e=this.validarValorReferencia(this.valorReferencia);0===e.length?(this.valoresReferencia.push(this.valorReferencia),$("#edad_hasta_valor_referencia").focus(),this.$refs.alertaValoresReferencia.ocultarAlertas(),this.valorReferencia={escala_edad:this.valorReferencia.escala_edad,edad_desde:this.valorReferencia.edad_hasta+1,valor_minimo_critico:"",valor_maximo_critico:""}):this.$refs.alertaValoresReferencia.mostrarAlerta("danger","¡Error!",e)},alternarCamposFormulario:function(){"disabled"===$("fieldset").attr("disabled")?$("fieldset").removeAttr("disabled"):$("fieldset").attr("disabled","disabled")},bajarParametro:function(e){e.orden<this.parametros.length&&(this.parametros.find((function(t){return t.orden===e.orden+1})).orden--,e.orden++)},abrirModalMoverParametro:function(e){this.moverParametro.nombre=e.nombre,this.moverParametro.origen=e.orden,this.moverParametro.destino="",$("#modalMoverParametro").modal({backdrop:"static"}),setTimeout((function(){return $("#destino").focus()}),500)},guardarMoverParametro:function(){var e=this,t=[];this.parametrosOrdenados.forEach((function(a){if(e.moverParametro.destino===a.orden){var r=e.parametrosOrdenados.find((function(t){return t.orden===e.moverParametro.origen}));e.moverParametro.destino>e.moverParametro.origen?(t.push(a),t.push(r)):(t.push(r),t.push(a))}else e.moverParametro.origen!==a.orden&&t.push(a)})),t.forEach((function(e,t){return e.orden=t+1})),$("#modalMoverParametro").modal("toggle")},buscarEscalaEdad:function(e){return this.escalasEdad.find((function(t){return t.id===e})).nombre},buscarTipoParametro:function(e){return"S"===e.tipo_parametro?e.tipo_dato.nombre:this.tiposParametros.find((function(t){return t.id===e.tipo_parametro})).nombre},cargarMuestras:function(){var e=this;_.isEmpty(this.muestras)&&axios.get("/api/examenes/".concat(this.examen.id,"/muestras")).then((function(t){var a=t.data.data;e.muestras=a.map((function(e){return e.muestra}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar muestras de examen",a)}))},cargarDatos:function(){var e=this;this.cargando=!0,this.cargarMuestras(),axios.all([axios.get("/api/secciones"),axios.get("/api/tecnicas"),axios.get("/api/tipos-datos"),axios.get("/api/taxonomias",{params:{nivel:2}})]).then((function(t){var a=_slicedToArray(t,4),r=a[0],o=a[1],i=a[2],s=a[3];e.secciones=r.data.data,e.tecnicas=o.data.data,e.tiposDatos=i.data.data,e.taxonomias=s.data.data,"0"!==e.registro.id?axios.get("/api/plantillas/".concat(e.registro.id,"/edit")).then((function(t){var a=t.data.data;e.registro.id=a.id,e.registro.nombre=a.nombre,e.registro.imprimir_solo_parametros=a.imprimir_solo_parametros,e.registro.tecnica_id=a.tecnica_id?a.tecnica_id:"",e.registro.seccion_id=a.seccion_id?a.seccion_id:"",e.registro.taxonomia_id=a.taxonomia_id?a.taxonomia_id:"",e.registro.parametros=[],e.parametros=a.parametros,e.alternarCamposFormulario(),$("#nombre").focus()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar plantilla",a)})).then((function(){return e.cargando=!1})):(e.cargando=!1,e.alternarCamposFormulario(),$("#nombre").focus())})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar catálogos!",a),e.cargando=!1}))},cerrarFormularioParametro:function(){$("#formularioParametro").modal("toggle"),this.limpiarFormularioParametro()},cerrarFormularioValoresReferencia:function(){$("#formularioValoresReferencia").modal("toggle"),this.limpiarFormularioValoresReferencia()},editarParametro:function(e){this.indiceParametro=this.parametros.indexOf(e),this.parametro=$.extend({},e),this.parametro.tipo_dato={nombre:""},this.parametro.interpretacion=null===this.parametro.interpretacion?"":this.parametro.interpretacion,this.abrirFormularioParametro()},eliminarParametro:function(e){if(confirm("¿Está seguro?")){var t=this.parametros.indexOf(e);this.parametros.splice(t,1),this.parametrosOrdenados.forEach((function(e,t){e.orden=t+1}))}},eliminarTodoFormula:function(){this.parametro.formula=[]},eliminarUltimoItemFormula:function(){this.parametro.formula.pop()},eliminarValorReferencia:function(e){if(confirm("¿Está seguro?")){var t=this.valoresReferencia.indexOf(e);this.valoresReferencia.splice(t,1),this.valorReferencia={escala_edad:"D",valor_minimo_critico:"",valor_maximo_critico:""},$("#escala_edad_valor_referencia").focus()}},filtrarParametrosDuplicados:function(e){var t=this;return _.uniqBy(e,"nombre").filter((function(e){return e.id!==t.parametro.id}))},limpiarFormularioParametro:function(){this.indiceParametro=null,this.parametro={muestra_id:"",sexo:"A",orden:0,opcion_tipo_dato_id:"",tipo_parametro:"",tipo_dato_id:"",tipo_dato:{nombre:""},imprimir_valor_referencia:!1,valores_referencia_edad:[],formula:[],interpretacion_valor_referencia:null,ocultar_pdf:!1,no_cambia_estado_muestra:!1}},limpiarFormularioValoresReferencia:function(){this.indiceParametro=null,this.valorReferencia={escala_edad:"D",valor_minimo_critico:"",valor_maximo_critico:""},this.valoresReferencia=[]},guardar:function(){var e=this;this.procesando=!0,this.alternarCamposFormulario(),this.registro.parametros=this.parametros,"0"===this.registro.id?axios.post("/api/plantillas",this.registro).then((function(t){var a=t.data.data;e.mostrarExito("Plantilla creada"),window.location.href="/examenes/".concat(e.registro.examen_id,"/plantillas/").concat(a.id,"/edit")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar plantilla",a)})).then((function(){e.procesando=!1,e.alternarCamposFormulario()})):axios.patch("/api/plantillas/".concat(this.registro.id),this.registro).then((function(t){var a=t.data.data;e.parametros=a.parametros,e.muestras.length>1&&e.parametros.forEach((function(t){["L","T"].includes(t.tipo_parametro)||t.muestra_id||e.mostrarAdvertencia("Parámetro ".concat(t.nombre," no tiene muestra"))})),e.mostrarExito("Plantilla actualizada")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar plantilla",a)})).then((function(){e.procesando=!1,e.alternarCamposFormulario()}))},guardarParametro:function(){if(!this.validarFormula())return!1;switch(this.parametro.tipo_parametro){case"X":case"N":this.parametro.tipo_dato_id="",this.parametro.opcion_tipo_dato_id="",this.parametro.formula=null;break;case"F":this.parametro.tipo_dato_id="",this.parametro.opcion_tipo_dato_id="";break;case"A":case"I":case"G":case"T":case"M":case"E":this.parametro.tipo_dato_id="",this.parametro.unidad_medida=null,this.parametro.sexo="",this.parametro.opcion_tipo_dato_id="",this.parametro.imprimir_valor_referencia=!1,this.parametro.interpretacion=null,this.parametro.interpretacion_valor_referencia=null,this.parametro.formula=null;break;case"L":this.parametro.tipo_dato_id="",this.parametro.nombre=null,this.parametro.abreviatura=null,this.parametro.unidad_medida=null,this.parametro.sexo="",this.parametro.opcion_tipo_dato_id="",this.parametro.imprimir_valor_referencia=!1,this.parametro.interpretacion=null,this.parametro.interpretacion_valor_referencia=null,this.parametro.formula=null}null==this.indiceParametro?(this.parametro.orden=this.parametros.length+1,this.parametros.push(this.parametro)):Vue.set(this.parametros,this.indiceParametro,this.parametro),this.cerrarFormularioParametro()},guardarValoresReferencia:function(){Vue.set(this.parametros[this.indiceParametro],"valores_referencia_edad",this.valoresReferencia),this.cerrarFormularioValoresReferencia()},redireccionar:function(){window.location.href="/examenes/"+this.examen.id+"/plantillas"},subirParametro:function(e){e.orden>1&&(this.parametros.find((function(t){return t.orden==e.orden-1})).orden++,e.orden--)},validarFormula:function validarFormula(){if("F"!==this.parametro.tipo_parametro)return!0;if(null===this.parametro.formula||0===this.parametro.formula.length)return this.$refs.alertaParametro.mostrarAlerta("danger","¡Error!","El campo fórmula es requerido"),!1;var formula=this.parametro.formula.map((function(e){return e.startsWith('"')&&e.endsWith('"')?0:e}));try{return eval(formula.join(" ")),!0}catch(e){return this.$refs.alertaParametro.mostrarAlerta("danger","¡Error!","El campo fórmula no es una expresión válida"),!1}},validarValorReferencia:function(e){var t=[],a=0;return e.edad_hasta<e.edad_desde&&t.push("'Hasta' debe ser mayor o igual a 'Desde'"),e.valor_maximo<e.valor_minimo&&t.push("'Valor Máximo' debe ser mayor o igual a 'Valor Mínimo'"),""!==e.valor_minimo_critico&&""===e.valor_maximo_critico&&t.push("Se debe ingresar 'Valor Máximo Crítico'"),""===e.valor_minimo_critico&&""!==e.valor_maximo_critico&&t.push("Se debe ingresar 'Valor Mínimo Crítico'"),""!==e.valor_minimo_critico&&""!==e.valor_maximo_critico&&e.valor_maximo_critico<e.valor_minimo_critico&&t.push("'Valor Máximo Crítico' debe ser mayor o igual a 'Valor Mínimo Critico'"),this.valoresReferencia.filter((function(t){return t.escala_edad===e.escala_edad})).forEach((function(t){e.edad_hasta>=t.edad_desde&&e.edad_desde<=t.edad_hasta&&a++})),a>0&&t.push("Existe conflicto con otros rangos de edad"),t}},computed:{opcionesTipoDato:function(){var e=this;if(this.parametro.tipo_dato_id){var t=this.tiposDatos.find((function(t){return t.id===e.parametro.tipo_dato_id}));return this.parametro.tipo_dato.nombre=t.nombre,void 0===t.opciones.find((function(t){return t.id===e.parametro.opcion_tipo_dato_id}))&&(this.parametro.opcion_tipo_dato_id=""),t.opciones}return[]},parametrosNumericos:function(){return this.parametrosOrdenados.filter((function(e){return["N","F"].includes(e.tipo_parametro)}))},parametrosOrdenados:function(){return _.orderBy(this.parametros,"orden")},parametroSeleccionado:function(){return this.parametros[this.indiceParametro]},parametroSeleccionadoSexo:function(){var e=this;if(this.parametroSeleccionado){var t=this.sexos.find((function(t){return t.id===e.parametroSeleccionado.sexo}));return t?t.nombre:"No definido"}},valoresReferenciaOrdenados:function(){return _.orderBy(this.valoresReferencia,["escala_edad","edad_desde"])}},watch:{"valorReferencia.escala_edad":function(){this.valorReferencia.edad_desde="",this.valorReferencia.edad_hasta="",this.valorReferencia.valor_minimo="",this.valorReferencia.valor_maximo="",this.valorReferencia.valor_minimo_critico="",this.valorReferencia.valor_maximo_critico=""}}}},3696:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6486),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_ckeditor_ckeditor5_build_classic_build_translations_es__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2155),_ckeditor_ckeditor5_build_classic_build_translations_es__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_ckeditor_ckeditor5_build_classic_build_translations_es__WEBPACK_IMPORTED_MODULE_1__),_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1272),_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_2__),_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5234),_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_3__),_graficoHistorial__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6293),_comunes_DetalleOrdenEstado__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6235),_support_constantes__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4590),_modals_VerMuestrasModal__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9835),_modals_UltimoResultadoMicrobiologiaModal__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6914),_support_util__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(7974);function _createForOfIteratorHelper(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){_defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var examenesIdsFiltrados=[];const __WEBPACK_DEFAULT_EXPORT__={components:{ckeditor:_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_2___default().component,DetalleOrdenEstado:_comunes_DetalleOrdenEstado__WEBPACK_IMPORTED_MODULE_5__.Z,GraficoHistorial:_graficoHistorial__WEBPACK_IMPORTED_MODULE_4__.Z,UltimoResultadoMicrobiologiaModal:_modals_UltimoResultadoMicrobiologiaModal__WEBPACK_IMPORTED_MODULE_8__.Z,VerMuestrasModal:_modals_VerMuestrasModal__WEBPACK_IMPORTED_MODULE_7__.Z},data:function(){return{alertasResistencia:["Betalactamasa","Betalactamasa tipo AMPc","BLEE","Carbapenemasa","Carbapenemasa tipo KPC","Carbapenemasa tipo Metallobetalactamasa","Mecanismo de resistencia por impermeabilidad","Mecanismo de resistencia por bombas de eflujo","Mecanismo de resistencia por bombas de eflujo + impermeabilidad","MLSb constitutiva","MLSb inducible","MRSA","Resistencia a vancomicina","Resistencia a linezolid","VRE","VRSA"],antibioticos:[],antibiogramas:[],cargando:!1,cargandoHistorial:!1,enviandoASistemaExterno:!1,cargandoUltimosResultados:!1,comentario:"",comentarios:[],comentarioSeleccionado:"",datosGraficoHistorial:{},detallesOrden:[],editor:_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_3___default(),comentarioAbierto:!1,editorConfig:{language:"es",toolbar:["bold","italic","|","bulletedList","numberedList","|","insertTable","|","undo","redo"],table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}},eliminandoReportes:!1,examenes:[],examenSeleccionado:{},formularioMuestra:{editar:!1,muestraId:"",resultado:"NEGATIVO",comentario:"",comentarioSeleccionado:"",microorganismos:[],antibioticos:[],antibiogramaId:"",alertasResistencia:""},guardandoReporte:!1,historial:[],indiceMuestraSeleccionada:null,manejadorGuardadoComentario:function(){},microorganismos:[],mostrarUltimoResultadoMicrobiologiaModal:!1,muestras:[],parametroSeleccionado:{},simbolos:["","<",">"],tiposMicroorganismos:[],validandoReportes:!1}},props:["orden","datos","filtros"],mounted:function(){var e=this;this.cargarComentarios(),$("#modalComentario").on("shown.bs.modal",(function(){$("#comentario").focus()})),$("#modalComentario").on("show.bs.modal",(function(){e.comentarioAbierto=!0})),$("#modalComentario").on("hide.bs.modal",(function(){e.comentarioAbierto=!1}))},methods:{abrirComentario:function(e,t){var a=this;this.comentario=t.comentario,this.parametroSeleccionado=t,this.examenSeleccionado=e,this.comentarioSeleccionado="",this.manejadorGuardadoComentario=function(){return a.guardarComentario()},$("#modalComentario").modal({backdrop:"static"})},abrirComentarioExamen:function(e){var t=this;this.comentario=e.comentario||"",this.comentarioSeleccionado="",this.manejadorGuardadoComentario=function(){return t.marcarExamenComoNoProcesado(e)},$("#modalComentario").modal({backdrop:"static"})},abrirGrafico:function(e){window.open("/reportes/".concat(e,"/grafico"),"","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=350,height=350,left=50,top=50")},abrirHistorial:function(e,t){var a=this;$("#modalHistorial").modal({backdrop:"static"}),this.cargandoHistorial=!0,this.historial=[],this.datosGraficoHistorial={},this.parametroSeleccionado=t;var r=this.orden.es_humano?"humano":this.orden.es_animal?"animal":"objeto",o=encodeURIComponent(e.nombre),i=encodeURIComponent(t.nombre);axios.get("/api/parametros/".concat(this.orden.paciente.id,"?nombre_examen=").concat(o,"&nombre_parametro=").concat(i,"&orden_parametro=").concat(t.orden,"&tipo=").concat(r)).then((function(e){var r=lodash__WEBPACK_IMPORTED_MODULE_0___default().orderBy(e.data.data.map((function(e){return{numero:e.numero_orden,fecha:a.fechaALocal(e.fecha_orden,"YYYY-MM-DD HH:mm"),nombreParametro:e.detalles_ordenes[0].reportes[0].detalles_reportes[0].nombre_parametro,unidadMedida:e.detalles_ordenes[0].reportes[0].detalles_reportes[0].unidad_medida,resultado:e.detalles_ordenes[0].reportes[0].detalles_reportes[0].resultado,comentario:e.detalles_ordenes[0].reportes[0].detalles_reportes[0].comentario}})),["fecha"],["asc"]);a.historial=lodash__WEBPACK_IMPORTED_MODULE_0___default().orderBy(r,["fecha"],["desc"]),a.datosGraficoHistorial={labels:r.map((function(e){return e.fecha})),datasets:[{label:t.nombre,backgroundColor:"#d9edf7",data:r.map((function(e){return e.resultado}))}]},a.cargandoHistorial=!1}))},abrirMicrobiologia:function(e,t){var a=this;this.parametroSeleccionado=t,this.examenSeleccionado=e,e.muestras.length>0&&(this.formularioMuestra.muestraId=e.muestras[0].muestra_id),Promise.all([axios.get("/api/catalogos",{params:{catalogo:_support_constantes__WEBPACK_IMPORTED_MODULE_6__.oH.MUESTRAS}}),axios.get("/api/catalogos",{params:{catalogo:_support_constantes__WEBPACK_IMPORTED_MODULE_6__.oH.TIPOS_MICROORGANISMOS}}),axios.get("/api/catalogos",{params:{catalogo:_support_constantes__WEBPACK_IMPORTED_MODULE_6__.oH.MICROORGANISMOS}}),axios.get("/api/catalogos",{params:{catalogo:_support_constantes__WEBPACK_IMPORTED_MODULE_6__.oH.ANTIBIOTICOS}}),axios.get("/api/catalogos",{params:{catalogo:_support_constantes__WEBPACK_IMPORTED_MODULE_6__.oH.ANTIBIOGRAMAS}})]).then((function(e){var t=_slicedToArray(e,5),r=t[0],o=t[1],i=t[2],s=t[3],n=t[4];a.muestras=r.data.data,a.microorganismos=i.data.data,a.tiposMicroorganismos=o.data.data,a.antibioticos=s.data.data,a.antibiogramas=n.data.data})),$("#modalMicrobiologia").modal({backdrop:"static",keyboard:!1})},abrirModalVerMuestras:function(e){var t=(0,_support_util__WEBPACK_IMPORTED_MODULE_9__.MD)({"detalle-orden":e});$("#modalVerMuestras").modal("show",t)},abrirRepeticiones:function(e,t){this.parametroSeleccionado=t,$("#modalRepeticiones").modal({backdrop:"static"})},abrirUltimoResultadoMicrobiologia:function(e){this.mostrarUltimoResultadoMicrobiologiaModal=!0,this.parametroSeleccionado=e},actualizarDetalles:function(e){var t=this;if(e)return this.cargando=!0,this.obtenerDetallesOrden().catch((function(e){var a=t.procesarErrorResponse(e);t.$emit("error",a)})).then((function(){return t.cargando=!1}));this.detallesOrden=[]},actualizarMicroorganismos:function(e,t){if(t){e.id=t;var a=lodash__WEBPACK_IMPORTED_MODULE_0___default().map(this.formularioMuestra.microorganismos,"id");this.formularioMuestra.antibioticos.forEach((function(e){var r=lodash__WEBPACK_IMPORTED_MODULE_0___default().map(e.microorganismos,"id"),o=lodash__WEBPACK_IMPORTED_MODULE_0___default().difference(r,a);0===o.length&&e.microorganismos.push({id:t,sensibilidad:"",resultado:"",ocultarPdf:!1}),o.forEach((function(a){var r=e.microorganismos.find((function(e){return e.id===a}));r?r.id=t:e.microorganismos.push({id:t,sensibilidad:"",resultado:"",ocultarPdf:!1})}))}))}},agregarAntibiograma:function(e){var t=this;e&&(this.antibiogramas.find((function(t){return t.id===e})).antibioticos.forEach((function(e){t.formularioMuestra.antibioticos.find((function(t){return t.id===e.id}))||t.agregarAntibiotico(e.id)})),this.formularioMuestra.antibiogramaId="")},agregarAntibiotico:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={id:e,microorganismos:[]};this.formularioMuestra.microorganismos.forEach((function(e){e.id&&t.microorganismos.push({id:parseInt(e.id),sensibilidad:"",resultado:"",ocultarPdf:!1})})),this.formularioMuestra.antibioticos.push(t)},agregarMicroorganismo:function(){this.formularioMuestra.microorganismos.push({id:"",tipoMicroorganismoId:"",colonias:"",alertaResistencia:!1,alertasResistencia:[],editar:!1,tecnica:"CIM"})},agregarMuestra:function(){this.parametroSeleccionado.resultado.push(this.construirResultadoMuestra()),this.cerrarMicrobiologia()},agregarAlerta:function(e,t){this.formularioMuestra.alertasResistencia="",e.alertasResistencia=lodash__WEBPACK_IMPORTED_MODULE_0___default().uniq([].concat(_toConsumableArray(e.alertasResistencia),[t]))},alterarMuestra:function(){this.formularioMuestra.editar?this.modificarMuestra():this.agregarMuestra()},alternarImpresionMicroorganismoAntibiotico:function(e){e.ocultarPdf=!e.ocultarPdf,this.formularioMuestra.antibioticos=lodash__WEBPACK_IMPORTED_MODULE_0___default().cloneDeep(this.formularioMuestra.antibioticos)},asignarValoresPorDefecto:function(e){e.detallesReportes.forEach((function(e){"S"===e.tipo_parametro&&e.opcion_tipo_dato_id&&!lodash__WEBPACK_IMPORTED_MODULE_0___default().isEmpty(e.tipo_dato.opciones)&&(e.resultado=e.tipo_dato.opciones.find((function(t){return t.id===e.opcion_tipo_dato_id})).nombre)}))},buscarDatosEnReporte:function(e,t){var a=e.detalles_reportes.find((function(e){var a=e.parametro_id===t.id;a||(a=(e.nombre_parametro?e.nombre_parametro.trim():null)===(t.nombre?t.nombre.trim():null)&&e.orden===t.orden);return a}));if(!a)return{id:null,resultado:"",comentario:"M"===t.tipo_parametro?[]:"",simbolo:""};var r,o={id:a.id,resultado:a.resultado?a.resultado:"",comentario:a.comentario?a.comentario:""};"N"===a.tipo_parametro&&(o.simbolo=null!==(r=a.valor_adicional)&&void 0!==r?r:"");return["E","A","I","G"].includes(a.tipo_parametro)&&(o.resultado=a.valor_adicional),"M"===a.tipo_parametro&&(o.resultado=a.extras),o},buscarUltimosResultados:function(){var e=this;if(this.orden){var t=this.examenesFiltrados.filter((function(e){return e.plantillaId})).map((function(e){return e.plantillaId}));this.cargandoUltimosResultados=!0,axios.get("/api/reportes/".concat(this.orden.id,"/ultimos-resultados"),{params:{plantillas_ids:t}}).then((function(t){var a=lodash__WEBPACK_IMPORTED_MODULE_0___default().groupBy(t.data.data,"plantilla_id");e.examenesFiltrados.forEach((function(e){var t=a[e.plantillaId];t&&e.detallesReportes.forEach((function(e){var a=t.find((function(t){return e.id===t.parametro_id}));a&&(e.tipo_parametro===_support_constantes__WEBPACK_IMPORTED_MODULE_6__.Bs.MICROBIOLOGIA&&(a.resultado=a.extras,e.ultimoResultadoId=a.id),e.ultimoResultado=a.resultado)}))}))})).then((function(t){e.cargandoUltimosResultados=!1}))}},calcularFormula:function calcularFormula(examen,detalleReporte){var _this9=this,notificar=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],errores=[],formula=detalleReporte.formula.map((function(e){if(e.startsWith('"')&&e.endsWith('"')){var t=_slicedToArray((e=e.substring(1,e.length-1)).split(" -|- "),2),a=t[0],r=t[1],o=_this9.examenes.find((function(e){return e.nombre===a}));if(e=null,o){var i=o.detallesReportes.find((function(e){return e.nombre===r}));i?(e=null,null===i.resultado||""===i.resultado||isNaN(i.resultado)?errores.push('El paramétro "'.concat(r,'" no tiene resultado')):e=i.resultado):errores.push('El paramétro "'.concat(r,'" no está en el examen'))}else errores.push('El examen "'.concat(a,'" no está en la orden'))}return e}));if(errores.length>0)return notificar&&this.$emit("error",lodash__WEBPACK_IMPORTED_MODULE_0___default().uniq(errores)),void(detalleReporte.resultado="");try{formula=formula.join(" ").replace("^","**");var valor=eval(formula).toFixed(2),_valor$split=valor.split("."),_valor$split2=_slicedToArray(_valor$split,2),entero=_valor$split2[0],decimal=_valor$split2[1];"00"===decimal&&(valor=entero),detalleReporte.resultado=valor}catch(e){notificar&&this.$emit("error",["La fórmula contiene errores"])}},calcularFormulaConRetraso:lodash__WEBPACK_IMPORTED_MODULE_0___default().debounce((function(){var e=this;this.examenesConParametrosFormula.forEach((function(t){t.detallesReportes.forEach((function(a){!e.examenesConResultadosModificados.length&&a.resultado||e.calcularFormula(t,a,!1)}))}))}),300),cambiarPlantilla:function(e,t){var a=!0,r=this.detallesOrden.find((function(t){return t.id===e.id}));if(1===r.reportes.length&&lodash__WEBPACK_IMPORTED_MODULE_0___default().first(r.reportes).plantilla_id!==parseInt(t.target.value)&&(a=confirm("La plantilla actual contiene resultados reportados. En caso de reportar resultados en una plantilla diferente perderá la información.\n\n¿Está seguro que desea cambiar de plantilla?")),!a){var o=e.plantillaId;e.plantillaId="",e.plantillaId=o}a&&(e.plantillaId=t.target.value,e.detallesReportes=this.construirDetallesReportes(r,e.plantillaId),this.buscarUltimosResultados())},cambiarSimbolo:function(e){var t=this.simbolos.findIndex((function(t){return t===e.simbolo}));e.simbolo=this.simbolos[(t+1)%this.simbolos.length]},cambioParametroArchivo:function(e,t){e.resultado=t.target.files.length?t.target.files[0]:e.resultado},cargarComentarios:function(){var e=this;lodash__WEBPACK_IMPORTED_MODULE_0___default().isEmpty(this.comentarios)&&this.$can("ver-comentarios")&&axios.get("/api/comentarios").then((function(t){var a=t.data.data;return e.comentarios=a})).catch((function(){e.$emit("error","Error al cargar comentarios")}))},cerrarComentario:function(){$("#modalComentario").modal("toggle")},cerrarHistorial:function(){$("#modalHistorial").modal("toggle")},cerrarRepeticiones:function(){$("#modalRepeticiones").modal("toggle")},cerrarMicrobiologia:function(){this.formularioMuestra={editar:!1,muestraId:"",resultado:"NEGATIVO",comentario:"",comentarioSeleccionado:"",microorganismos:[],antibioticos:[],antibiogramaId:""},$("#modalMicrobiologia").modal("toggle")},construirDetallesReportes:function(e,t){var a=this;if(!this.orden)return[];t=parseInt(t);var r=lodash__WEBPACK_IMPORTED_MODULE_0___default().find(e.reportes,{plantilla_id:t}),o=lodash__WEBPACK_IMPORTED_MODULE_0___default().keyBy(e.examen.plantillas,(function(e){return e.id})),i=lodash__WEBPACK_IMPORTED_MODULE_0___default().groupBy(e.repeticiones,(function(e){return e.parametro_id}));return t?o[t]?lodash__WEBPACK_IMPORTED_MODULE_0___default().chain(o[t].parametros).filter((function(e){return["A","",null,a.orden.paciente.sexo].includes(e.sexo)})).map((function(e){var t={id:null,resultado:"M"===e.tipo_parametro?[]:"",comentario:"",simbolo:""};if(["N","F"].includes(e.tipo_parametro)){var o=_slicedToArray(a.obtenerValoresReferenciaParametroNumerico(e),4),s=o[0],n=o[1],c=o[2],l=o[3];e.valor_minimo=s,e.valor_maximo=n,e.valor_minimo_critico=c,e.valor_maximo_critico=l}return r&&(t=a.buscarDatosEnReporte(r,e)),_objectSpread(_objectSpread({},e),{},{repeticiones:i[e.id]?i[e.id]:[],resultado:t.resultado,resultadoAnterior:lodash__WEBPACK_IMPORTED_MODULE_0___default().cloneDeep(t.resultado),detalleReporteId:t.id,comentario:t.comentario,comentarioAnterior:t.comentario,simbolo:t.simbolo,simboloAnterior:t.simbolo})})).value():(this.$emit("error","Plantilla de ".concat(e.examen.nombre," no existe o está desactivada")),[]):[]},construirDetallesReportesFueraPlantilla:function(e,t){var a=lodash__WEBPACK_IMPORTED_MODULE_0___default().find(e.reportes,{plantilla_id:t}),r=lodash__WEBPACK_IMPORTED_MODULE_0___default().find(e.examen.plantillas,{id:t});if(!a||!r)return[];var o=lodash__WEBPACK_IMPORTED_MODULE_0___default().map(r.parametros,"id");return a.detalles_reportes.filter((function(e){return!o.includes(e.parametro_id)})).map((function(e){return{id:e.parametro_id,nombre:e.nombre_parametro,tipo_parametro:e.tipo_parametro,resultado:e.resultado,orden:e.orden,unidad_medida:e.unidad_medida,valor_minimo:e.valor_minimo,valor_maximo:e.valor_maximo,valor_normal_texto:e.valor_normal_texto,valor_minimo_critico:e.valor_minimo_critico,valor_maximo_critico:e.valor_maximo_critico,interpretacion:e.interpretacion,valor_adicional:e.valor_adicional,comentario:e.comentario,detalleReporteId:e.id}}))},construirResultadoMuestra:function(){var e=this;return{id:this.formularioMuestra.muestraId,nombre:this.muestras.find((function(t){return t.id===e.formularioMuestra.muestraId})).nombre,resultado:this.formularioMuestra.resultado,comentario:this.formularioMuestra.comentario,microorganismos:this.formularioMuestra.microorganismos.map((function(t){return{id:t.id,nombre:e.microorganismos.find((function(e){return e.id===t.id})).nombre,tecnica:t.tecnica,colonia:{id:1,nombre:t.colonias},alerta_resistencia:t.alertaResistencia||!1,alertas_resistencia:t.alertaResistencia?t.alertasResistencia:[],antibioticos:e.formularioMuestra.antibioticos.filter((function(e){return e.microorganismos.filter((function(e){return e.sensibilidad&&e.id===t.id})).length>0})).map((function(a){var r=a.microorganismos.find((function(e){return e.id===t.id}));return{id:a.id,nombre:e.antibioticos.find((function(e){return e.id===a.id})).nombre,sensibilidad:r.sensibilidad,resultado:r.resultado,ocultar_pdf:!!r.ocultarPdf}}))}}))}},construirTituloMuestras:function(e){var t,a=[],r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;a.push(o.muestra.nombre),a.push("<br>")}}catch(e){r.e(e)}finally{r.f()}return a.join("")},construirValoresReferencia:function(e){var t="";return["N","F"].includes(e.tipo_parametro)&&e.valor_minimo&&(t+="[".concat(e.valor_minimo," - ").concat(e.valor_maximo,"]")),["X","S"].includes(e.tipo_parametro)&&(t+="".concat(e.valor_normal_texto?e.valor_normal_texto:"")),t+=e.unidad_medida?e.unidad_medida:""},convertirEdadAEscala:function(e){switch(e){case"D":return this.orden.paciente.edad_en_dias;case"M":return this.orden.paciente.edad_en_meses;case"Ñ":return this.orden.paciente.edad_en_anios}},desvalidarExamen:function(e){var t=this;this.validandoReportes=!0,axios.delete("/api/reportes2/"+e.id+"/validacion").then((function(){return t.obtenerDetallesOrden()})).then((function(){return t.$emit("examenes-validados","Resultados desvalidados exitosamente")})).catch((function(e){return t.$emit("error-guardar-resultado",e.response)})).then((function(){return t.validandoReportes=!1}))},editarMuestra:function(e,t,a){this.indiceMuestraSeleccionada=a;var r=t.resultado[a];this.formularioMuestra={editar:!0,muestraId:r.id,resultado:r.resultado,comentario:r.comentario,comentarioSeleccionado:"",microorganismos:r.microorganismos.map((function(e){return{id:e.id,tecnica:e.tecnica,tipoMicroorganismoId:"",colonias:e.colonia.nombre,alertaResistencia:e.alerta_resistencia||!1,alertasResistencia:e.alertas_resistencia||[],editar:!1}})),antibioticos:lodash__WEBPACK_IMPORTED_MODULE_0___default().chain(r.microorganismos).flatMap((function(e){return e.antibioticos})).map((function(e){return{id:e.id,microorganismos:[]}})).uniqBy("id").map((function(e){return e.microorganismos=r.microorganismos.map((function(t){var a=t.antibioticos.find((function(t){return t.id===e.id}));return a?{id:t.id,resultado:a.resultado,sensibilidad:a.sensibilidad,ocultarPdf:a.ocultar_pdf}:{id:t.id,resultado:"",sensibilidad:"",ocultarPdf:!1}})),e})).value(),antibiogramaId:""},this.abrirMicrobiologia(e,t)},editarColonia:function(e,t){e.editar=!0,this.$nextTick((function(){window.setTimeout((function(){return $("#microorganismo-".concat(t)).focus()}),0)}))},editorCargado:function(e){setTimeout((function(){return e.focus()}),500)},eliminarAlerta:function(e,t){e.alertasResistencia.splice(t,1)},eliminarAntibiotico:function(e){var t=this.formularioMuestra.antibioticos.findIndex((function(t){return t.id===e.id}));-1!==t&&this.formularioMuestra.antibioticos.splice(t,1)},eliminarArchivo:function(e){var t=this;confirm("¿Está seguro que desea eliminar el archivo?")&&(this.guardandoReporte=!0,axios.delete("/api/detalles-reportes/".concat(e.detalleReporteId,"/archivo")).then((function(){return t.obtenerDetallesOrden()})).then((function(){return t.$emit("resultado-guardado")})).then((function(){return t.guardandoReporte=!1})))},eliminarGrafico:function(e){var t=this;confirm("¿Está seguro que desea eliminar el gráfico?")&&(this.guardandoReporte=!0,axios.delete("/api/detalles-reportes/".concat(e.detalleReporteId,"/grafico")).then((function(){return t.obtenerDetallesOrden()})).then((function(){return t.$emit("resultado-guardado")})).then((function(){return t.guardandoReporte=!1})))},eliminarMicroorganismo:function(e){var t=this.formularioMuestra.microorganismos.findIndex((function(t){return t.id===e.id}));-1!==t&&(this.formularioMuestra.microorganismos.splice(t,1),this.formularioMuestra.antibioticos.forEach((function(t){var a=t.microorganismos.findIndex((function(t){return t.id===e.id}));t.microorganismos.splice(a,1)})))},eliminarMuestra:function(e,t){e.resultado.splice(t,1)},eliminarReportes:function(e){var t=this;this.eliminandoReportes=!0,axios.delete("/api/ordenes/"+this.orden.id+"/detalles",{data:{detallesOrden:lodash__WEBPACK_IMPORTED_MODULE_0___default().map(e,"id")}}).then((function(){return t.obtenerDetallesOrden()})).then((function(){return t.$emit("resultado-guardado")})).catch((function(e){return t.$emit("error-guardar-resultado",e.response)})).finally((function(){return t.eliminandoReportes=!1}))},eliminarReportesExamen:function(e){confirm("¿Está seguro que desea eliminar los resultados de ".concat(e.nombre,"?"))&&this.eliminarReportes([e])},eliminarTodosReportes:function(){confirm("¿Está seguro que desea eliminar todos los resultados?")&&this.eliminarReportes(this.examenesConResultados)},enviarASistemaExterno:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.enviandoASistemaExterno=!0;var a={idsOrdenes:[this.orden.id],idsDetallesOrden:null};a.idsDetallesOrden=t?this.examenesFiltrados.filter((function(a){return a.id===t.id&&e.estadosDetallesOrdenParaEnvio.includes(a.estado)})).map((function(e){return e.id})):this.examenesFiltrados.filter((function(t){return e.estadosDetallesOrdenParaEnvio.includes(t.estado)})).map((function(e){return e.id})),axios.post("/api/sistemas-externos/".concat(this.orden.sistema_externo_id,"/enviar"),a).then((function(t){var a=t.data.data;a.examenesProcesados>0&&(e.cargando=!0,e.obtenerDetallesOrden().then((function(){return e.cargando=!1}))),e.$emit("resultado-enviado",a)})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al enviar resultados a ".concat(e.orden.sistema_externo.nombre)),e.$emit("error",a)})).then((function(){return e.enviandoASistemaExterno=!1}))},enviarTodoASistemaExterno:function(){this.enviarASistemaExterno()},esExamenOculto:function(e){var t=this,a=[],r=!0;if("P"===this.filtros.estado&&(a=["G","R","L"]),this.filtros.estado&&"P"!==this.filtros.estado&&(a=[this.filtros.estado]),lodash__WEBPACK_IMPORTED_MODULE_0___default().isEmpty(a)||(r=r&&a.includes(e.estado)),r=this.filtros.seccionId?r&&e.seccionId===this.filtros.seccionId:r&&(lodash__WEBPACK_IMPORTED_MODULE_0___default().map(this.datos.secciones,"id").includes(e.seccionId)||!e.seccionId),this.filtros.examenId&&(r=r&&e.examenId===this.filtros.examenId),this.filtros.grupoId){var o=this.datos.grupos.find((function(e){return e.id===t.filtros.grupoId}));r=r&&lodash__WEBPACK_IMPORTED_MODULE_0___default().map(o.detalles_grupos,"examen_id").includes(e.examenId)}return r},existenCambiosPendientes:function(e){return"M"===e.tipo_parametro?JSON.stringify(e.resultado)!==JSON.stringify(e.resultadoAnterior):e.resultado!==e.resultadoAnterior||e.comentario!==e.comentarioAnterior||e.simbolo!==e.simboloAnterior&&""!==e.resultado},existenCambiosPendientesExamen:function(e){return!!this.examenesConResultadosModificados.find((function(t){return t.examenId===e.examenId}))},deltaCheckFueraRango:function(e){return!!(e.delta_check&&e.ultimoResultado&&e.resultado)&&Math.abs((e.ultimoResultado-e.resultado)/e.resultado*100)>e.delta_check},filtrarPlantillas:function(e){var t=this;return e.filter((function(e){return!e.taxonomia_id||e.taxonomia_id===(t.orden.paciente.raza?t.orden.paciente.raza.padre.id:null)}))},filtrarReportes:function(e){for(var t=_toConsumableArray(e=e.filter((function(e){var t=null!==e.resultado&&""!==e.resultado||"G"===e.tipo_parametro||"T"===e.tipo_parametro||"L"===e.tipo_parametro;return["A","I","G"].includes(e.tipo_parametro)&&(e.resultado=null),t}))),a=0;a<e.length;a++)if("T"===e[a].tipo_parametro){for(var r,o,i,s=0,n=[],c=a+1;c<e.length&&(e[c].ocultar_pdf||((null!==e[c].resultado&&""!==e[c].resultado||"G"===e[c].tipo_parametro)&&s++,"L"===e[c].tipo_parametro&&n.push(e[c]),"T"!==e[c].tipo_parametro));c++);if(0===s)n.forEach((function(e){return t.splice(t.indexOf(e),1)})),"T"===(null===(r=e[a+1])||void 0===r?void 0:r.tipo_parametro)&&e[a].orden+1===(null===(o=e[a+1])||void 0===o?void 0:o.orden)||t.splice(t.indexOf(e[a]),1),"T"===(null===(i=e[a-1])||void 0===i?void 0:i.tipo_parametro)&&-1!==t.indexOf(e[a-1])&&t.splice(t.indexOf(e[a-1]),1)}for(var l=[],d=0;d<t.length&&"L"===t[d].tipo_parametro;d++)l.push(t[d]);l.forEach((function(e){return t.splice(t.indexOf(e),1)})),l=[];for(var u=t.length-1;u>=0&&"L"===t[u].tipo_parametro;u--)l.push(t[u]);return l.forEach((function(e){return t.splice(t.indexOf(e),1)})),t},guardarComentario:function(){this.parametroSeleccionado.comentario=this.comentario,$("#modalComentario").modal("toggle")},guardarReportes:function(){var e=this,t=[];this.examenesConResultadosModificados.filter((function(e){return""!==e.plantillaId&&null!==e.plantillaId})).forEach((function(a){var r=lodash__WEBPACK_IMPORTED_MODULE_0___default().keyBy(a.plantillas,(function(e){return e.id})),o=a.detallesReportes.filter((function(e){return"A"===e.tipo_parametro&&e.resultado!==e.resultadoAnterior})),i=a.detallesReportes.filter((function(e){return"I"===e.tipo_parametro&&e.resultado!==e.resultadoAnterior})),s=e.filtrarReportes(a.detallesReportes.map((function(e){var t={muestra_id:a.muestras.find((function(t){return t.muestra_id===e.muestra_id}))&&e.muestra_id?e.muestra_id:null,parametro_id:e.id,tipo_parametro:e.tipo_parametro,nombre_parametro:e.nombre,resultado:e.resultado,resultadoAnterior:e.resultadoAnterior,orden:e.orden,imprimir_valor_referencia:e.imprimir_valor_referencia,ocultar_pdf:e.ocultar_pdf,unidad_medida:e.unidad_medida,interpretacion:e.interpretacion,interpretacion_valor_referencia:e.interpretacion_valor_referencia,valor_minimo:e.valor_minimo,valor_maximo:e.valor_maximo,valor_minimo_critico:e.valor_minimo_critico,valor_maximo_critico:e.valor_maximo_critico,valor_normal_texto:e.valor_normal_texto,comentario:e.comentario?e.comentario:null,comentarioAnterior:e.comentarioAnterior};return"N"===e.tipo_parametro&&(t.valor_adicional=e.simbolo?e.simbolo:null),t}))),n={estadoOrden:e.orden.estado,plantillaId:a.plantillaId,nombreExamen:a.nombre,ordenExamen:a.orden,acreditadoExamen:a.acreditado,nombreSeccion:r[a.plantillaId].seccion.nombre,ordenSeccion:r[a.plantillaId].seccion.orden,firmaId:r[a.plantillaId].seccion.firma_id,nombreTecnica:r[a.plantillaId].tecnica?r[a.plantillaId].tecnica.nombre:null,imprimirSoloParametros:r[a.plantillaId].imprimir_solo_parametros,extras:a.extras,detalles:s};e.definirUrlQr(n,a);var c=new FormData;c.append("_method","PATCH"),c.append("datos",JSON.stringify(n)),o.forEach((function(e){return c.append("adjunto-".concat(e.id),e.resultado)})),i.forEach((function(e){return c.append("imagen-".concat(e.id),e.resultado)})),t.push(axios.post("/api/reportes2/".concat(a.id),c))})),this.guardandoReporte=!0,Promise.all(t).then((function(){return e.obtenerDetallesOrden()})).then((function(){return e.$emit("resultado-guardado")})).catch((function(t){return e.$emit("error-guardar-resultado",t.response)})).then((function(){return e.guardandoReporte=!1}))},definirUrlQr:function(e,t){if(lodash__WEBPACK_IMPORTED_MODULE_0___default().get(this.orden.sucursal,"extras.examenesQr")){var a=this.orden.sucursal.extras.examenesQr.find((function(e){return e.examen_id===t.examenId}));a&&e.extras&&(e.extras.urlQr=a.url)}},obtenerAntibioticos:function(e){return this.antibioticosFiltrados(e)},obtenerColorFondo:function(e){if(["N","F"].includes(e.tipo_parametro)&&e.resultado){if(null!==e.valor_minimo_critico&&null!==e.valor_maximo_critico&&(parseFloat(e.resultado)<parseFloat(e.valor_minimo_critico)||parseFloat(e.resultado)>parseFloat(e.valor_maximo_critico)))return"#FF5454";if(null!==e.valor_minimo&&null!==e.valor_maximo&&(parseFloat(e.resultado)<parseFloat(e.valor_minimo)||parseFloat(e.resultado)>parseFloat(e.valor_maximo)))return"#F2DEDE"}return"#FFFFFF"},obtenerDetallesOrden:function(){var e=this;return axios.get("/api/ordenes/".concat(this.orden.id,"/detalles")).then((function(t){var a=t.data.data;return e.detallesOrden=a}))},obtenerEscalaEdad:function(){var e=this.orden.paciente.edad_en_dias;return e<30?"D":e<365?"M":"Ñ"},obtenerMicroorganismos:function(e){return e.tipoMicroorganismoId?this.microorganismosFiltrados(e).filter((function(t){return t.tipo_microorganismo_id===e.tipoMicroorganismoId})):this.microorganismosFiltrados(e)},obtenerPlantillaId:function(e){if(1===e.reportes.length)return lodash__WEBPACK_IMPORTED_MODULE_0___default().first(e.reportes).plantilla_id;var t=this.filtrarPlantillas(e.examen.plantillas);return 1===t.length?lodash__WEBPACK_IMPORTED_MODULE_0___default().first(t).id:""},obtenerUltimoResultadoMuestra:function(e,t){var a,r;return null===(a=e.ultimoResultado)||void 0===a||null===(r=a.find((function(e){return e.id===t.id})))||void 0===r?void 0:r.resultado},obtenerValoresReferenciaParametroNumerico:function(e){if(["N","F"].includes(e.tipo_parametro)){if(e.valores_referencia_edad.length>0){var t=this.obtenerEscalaEdad(),a=this.convertirEdadAEscala(t),r=e.valores_referencia_edad.filter((function(e){return e.escala_edad===t})).find((function(e){if(e.edad_desde<=a&&a<=e.edad_hasta)return!0}));if(r)return[r.valor_minimo,r.valor_maximo,r.valor_minimo_critico,r.valor_maximo_critico]}return[e.valor_minimo,e.valor_maximo,e.valor_minimo_critico,e.valor_maximo_critico]}return[null,null,null,null]},ocultarColonia:function(e){e.editar=!1},marcarExamenComoNoProcesado:function(e){var t=this;e.comentario=this.comentario,this.guardandoReporte=!0,this.cerrarComentario(),axios.patch("/api/detalles-ordenes/".concat(e.id,"/no-procesado"),{plantillaId:e.plantillaId,comentario:e.comentario}).then((function(){return t.obtenerDetallesOrden()})).then((function(){return t.$emit("resultado-guardado")})).catch((function(e){return t.$emit("error-guardar-resultado",e.response)})).then((function(){return t.guardandoReporte=!1}))},modificarMuestra:function(){var e=lodash__WEBPACK_IMPORTED_MODULE_0___default().cloneDeep(this.parametroSeleccionado.resultado);e[this.indiceMuestraSeleccionada]=this.construirResultadoMuestra(),this.parametroSeleccionado.resultado=e,this.cerrarMicrobiologia()},puedeEditar:function(e){return"L"===e.estado||"V"===e.estado?!!this.datos.permisos.editarReportesValidadosPorOtros||!(!this.datos.permisos.editarReportesValidadosPropios||e.usuarioValida!==this.datos.idUsuario):this.datos.permisos.editar},puedeEliminar:function(e){return"L"===e.estado||"V"===e.estado?!!this.datos.permisos.eliminarReportesValidadosPorOtros||!(!this.datos.permisos.eliminarReportesValidadosPropios||e.usuarioValida!==this.datos.idUsuario):this.datos.permisos.eliminar},registrarRepeticion:function(e,t){var a=this;confirm("¿Está seguro que desea registrar una repetición?")&&(this.guardandoReporte=!0,axios.post("/api/repeticiones",{orden_id:this.orden.id,detalle_orden_id:e.id,parametro_id:t.id,detalle_reporte_id:t.detalleReporteId,plantilla_id:t.plantilla_id}).then((function(){return a.obtenerDetallesOrden()})).then((function(){return a.$emit("resultado-guardado")})).catch((function(e){return a.$emit("error-guardar-resultado",e.response)})).then((function(){return a.guardandoReporte=!1})))},registrarRepeticionesExamen:function(e){var t=this;confirm("¿Está seguro que desea registrar repeticiones para todo el examen?")&&(this.guardandoReporte=!0,axios.post("/api/repeticiones/reportes/".concat(e.reportes[0].id)).then((function(){return t.obtenerDetallesOrden()})).then((function(){return t.$emit("resultado-guardado")})).catch((function(e){return t.$emit("error-guardar-resultado",e.response)})).then((function(){return t.guardandoReporte=!1})))},seleccionarComentario:function(e){e&&(this.comentario=this.comentario?this.comentario+" "+e:e,this.comentarioSeleccionado="")},seleccionarComentarioMuestra:function(e){e&&(this.formularioMuestra.comentario=this.formularioMuestra.comentario?this.formularioMuestra.comentario+" "+e:e,this.formularioMuestra.comentarioSeleccionado="")},seleccionarParaTextoExtendido:function(e,t){t&&e.tipo_parametro===_support_constantes__WEBPACK_IMPORTED_MODULE_6__.Bs.TEXTO_EXTENDIDO&&(e.resultado+=t.replace(/(?:\r\n|\r|\n)/g,"<br>"),this.comentarioSeleccionado="")},tieneParametrosParaRepeticiones:function(e){return lodash__WEBPACK_IMPORTED_MODULE_0___default().some(e.detallesReportes,(function(e){return["N","S","X"].includes(e.tipo_parametro)}))},tieneValoresPorDefecto:function(e){var t=lodash__WEBPACK_IMPORTED_MODULE_0___default().keyBy(e.plantillas,(function(e){return e.id}))[e.plantillaId];return!!t&&lodash__WEBPACK_IMPORTED_MODULE_0___default().some(t.parametros,(function(e){return"S"===e.tipo_parametro&&e.opcion_tipo_dato_id&&!lodash__WEBPACK_IMPORTED_MODULE_0___default().isEmpty(e.tipo_dato.opciones)}))},validarExamen:function(e){var t=this;this.validandoReportes=!0,axios.patch("/api/reportes2/"+e.id+"/validacion").then((function(){return t.obtenerDetallesOrden()})).then((function(){return t.$emit("examenes-validados","Resultados validados")})).catch((function(e){return t.$emit("error-guardar-resultado",e.response)})).then((function(){return t.validandoReportes=!1}))},validarPreliminarmenteExamen:function(e){var t=this;this.validandoReportes=!0,axios.patch("/api/reportes2/"+e.id+"/validacion-preliminar").then((function(){return t.obtenerDetallesOrden()})).then((function(){return t.$emit("examenes-validados","Resultados validados preliminarmente")})).catch((function(e){return t.$emit("error-guardar-resultado",e.response)})).then((function(){return t.validandoReportes=!1}))},validarReportes:function(){var e=this;this.validandoReportes=!0,axios.patch("/api/reportes2/"+this.orden.id+"/validar-todos",{detallesOrdenes:lodash__WEBPACK_IMPORTED_MODULE_0___default().map(this.examenesReportados,"id")}).then((function(){return e.obtenerDetallesOrden()})).then((function(){return e.$emit("examenes-validados","Resultados validados")})).catch((function(t){return e.$emit("error-guardar-resultado",t.response)})).then((function(){return e.validandoReportes=!1}))}},computed:{antibioticosFiltrados:function(){var e=this;return function(t){var a=lodash__WEBPACK_IMPORTED_MODULE_0___default().map(e.formularioMuestra.antibioticos,"id").filter((function(e){return e!==t.id}));return e.antibioticos.filter((function(e){return!a.includes(e.id)}))}},examenesFiltrados:function(){if(examenesIdsFiltrados.length)return this.examenes.filter((function(e){return examenesIdsFiltrados.includes(e.id)}));var e=this.examenes.filter(this.esExamenOculto);return examenesIdsFiltrados=lodash__WEBPACK_IMPORTED_MODULE_0___default().map(e,"id"),e},detallesReportesModificados:function(){return lodash__WEBPACK_IMPORTED_MODULE_0___default().flatMap(this.examenesFiltrados,"detallesReportes").filter(this.existenCambiosPendientes)},examenesConParametrosFormula:function(){return this.examenesFiltrados.map((function(e){var t=e.detallesReportes.filter((function(e){return"F"===e.tipo_parametro}));return _objectSpread(_objectSpread({},e),{},{detallesReportes:t})})).filter((function(e){return e.detallesReportes.length>0}))},examenesConResultados:function(){var e=this;return this.examenesFiltrados.filter((function(t){return"G"!==t.estado&&e.puedeEliminar(t)}))},examenesConResultadosModificados:function(){var e=this;return this.examenesFiltrados.filter((function(t){return t.detallesReportes.filter(e.existenCambiosPendientes).length}))},examenesReportados:function(){return this.examenesFiltrados.filter((function(e){return["R","L"].includes(e.estado)}))},existenExamenesParaEnviarASistemaExterno:function(){var e=this;return this.examenesFiltrados.filter((function(t){return e.estadosDetallesOrdenParaEnvio.includes(t.estado)})).length>0},existenDetallesReportesModificados:function(){return this.detallesReportesModificados.length>0},nombrePaciente:function(){return lodash__WEBPACK_IMPORTED_MODULE_0___default().isEmpty(this.orden)?"":this.orden.es_humano?lodash__WEBPACK_IMPORTED_MODULE_0___default().toUpper(this.orden.paciente.apellidos)+", "+lodash__WEBPACK_IMPORTED_MODULE_0___default().startCase(lodash__WEBPACK_IMPORTED_MODULE_0___default().toLower(this.orden.paciente.nombres)):this.orden.es_animal?lodash__WEBPACK_IMPORTED_MODULE_0___default().startCase(lodash__WEBPACK_IMPORTED_MODULE_0___default().toLower(this.orden.paciente.nombre))+(this.orden.paciente.raza?" ("+this.orden.paciente.raza.padre.nombre+" - "+this.orden.paciente.raza.nombre+")":""):this.orden.es_objeto?lodash__WEBPACK_IMPORTED_MODULE_0___default().startCase(lodash__WEBPACK_IMPORTED_MODULE_0___default().toLower(this.orden.paciente.descripcion)):void 0},idOrden:function(){return this.orden&&this.orden.id},keyOrden:function(){return this.orden&&this.orden.key},estadosDetallesOrdenParaEnvio:function(){return this.orden.sistema_externo.extras.enviar_preliminares?["X","L","V"]:["X","V"]},microorganismoAntibiotico:function(){return function(e,t){return t.microorganismos.find((function(t){return t.id===e.id}))}},microorganismosFiltrados:function(){var e=this;return function(t){var a=lodash__WEBPACK_IMPORTED_MODULE_0___default().map(e.formularioMuestra.microorganismos,"id").filter((function(e){return e!==t.id}));return e.microorganismos.filter((function(e){return!a.includes(e.id)}))}},procesando:function(){return this.cargando||this.guardandoReporte||this.validandoReportes||this.eliminandoReportes||this.enviandoASistemaExterno}},watch:{idOrden:function(e){examenesIdsFiltrados=[],this.actualizarDetalles(e)},keyOrden:function(){this.orden?this.actualizarDetalles(this.orden.id):this.detallesOrden=[]},detallesOrden:function(e){var t=this;this.examenes=lodash__WEBPACK_IMPORTED_MODULE_0___default().chain(e).map((function(e){var a=t.obtenerPlantillaId(e);return{id:e.id,nombre:e.examen.nombre,plantillaId:a,plantillas:e.examen.plantillas,estado:e.estado,examenId:e.examen.id,seccionId:e.examen.plantillas.length>0?lodash__WEBPACK_IMPORTED_MODULE_0___default().first(e.examen.plantillas).seccion.id:null,ordenSeccion:e.examen.plantillas.length>0?lodash__WEBPACK_IMPORTED_MODULE_0___default().first(e.examen.plantillas).seccion.orden:999,orden:e.examen.ordenamiento,acreditado:e.examen.acreditado,reportes:e.reportes,muestraPendiente:e.detalle_orden_muestras.reduce((function(e,t){var a=t.estado;return e&&a===_support_constantes__WEBPACK_IMPORTED_MODULE_6__.zm.PENDIENTE}),!0),usuarioReporta:e.usuario_reporta,usuarioValida:e.usuario_valida,fechaImprime:t.fechaALocal(e.fecha_imprime),descargado_sistema_externo:e.descargado_sistema_externo,createdAt:e.created_at,fechaEnvia:e.fecha_envia,enviado_sistema_externo:e.enviado_sistema_externo,muestras:e.detalle_orden_muestras.map((function(e){return _objectSpread({nombre:e.muestra.nombre},e)})),tituloMuestras:t.construirTituloMuestras(e.detalle_orden_muestras),comentario:e.comentario,extras:e.examen.extras,detallesReportes:t.construirDetallesReportes(e,a),detallesReportesFueraPlantilla:t.construirDetallesReportesFueraPlantilla(e,a)}})).sortBy(["ordenSeccion","orden"]).value(),this.buscarUltimosResultados(),this.$emit("detalles-orden-modificado",e)},examenesConParametrosFormula:function(){this.calcularFormulaConRetraso()},procesando:function(){var e=this.procesando?"inicio-procesamiento":"fin-procesamiento";this.$emit(e)}},filters:{resultadoMicrobiologia:function(e){switch(e){case"POSITIVO":return"Positivo";case"NEGATIVO":return"Negativo";case"MICROBIOTA_MIXTA":return"Microbiota mixta";default:return""}}}}},5897:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _graficoHistorial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6293),_ckeditor_ckeditor5_build_classic_build_translations_es__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2155),_ckeditor_ckeditor5_build_classic_build_translations_es__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_ckeditor_ckeditor5_build_classic_build_translations_es__WEBPACK_IMPORTED_MODULE_1__),_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1272),_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_2__),_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5234),_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_3__),_modals_VerAuditoriasModal__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5683),_PdfCertificadoModal__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1497),_modals_ImprimirModal__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7410),_comunes_DetalleOrdenEstado__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6235),_support_constantes__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(4590),_comunes_DatosOrden__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6570),_support_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7974),_modals_EntregarResultadosModal__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2446),_modals_ResultadosModal__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5480),_modals_BuscarDocumentosModal__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2893);function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach((function(t){_defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const __WEBPACK_DEFAULT_EXPORT__={components:{graficoHistorial:_graficoHistorial__WEBPACK_IMPORTED_MODULE_0__.Z,ckeditor:_ckeditor_ckeditor5_vue2__WEBPACK_IMPORTED_MODULE_2___default().component,VerAuditoriasModal:_modals_VerAuditoriasModal__WEBPACK_IMPORTED_MODULE_4__.Z,PdfCertificadoModal:_PdfCertificadoModal__WEBPACK_IMPORTED_MODULE_5__.Z,ImprimirModal:_modals_ImprimirModal__WEBPACK_IMPORTED_MODULE_6__.Z,DetalleOrdenEstado:_comunes_DetalleOrdenEstado__WEBPACK_IMPORTED_MODULE_7__.Z,DatosOrden:_comunes_DatosOrden__WEBPACK_IMPORTED_MODULE_9__.Z,EntregarResultadosModal:_modals_EntregarResultadosModal__WEBPACK_IMPORTED_MODULE_11__.Z,ResultadosModal:_modals_ResultadosModal__WEBPACK_IMPORTED_MODULE_12__.Z,BuscarDocumentosModal:_modals_BuscarDocumentosModal__WEBPACK_IMPORTED_MODULE_13__.Z},data:function(){return{cargandoDetallesOrden:!1,cargandoHistorial:!1,cargandoOrdenes:!1,comentario:"",datosGraficoHistorial:{},detalleOrdenSeleccionado:null,detallesOrdenSeleccionada:[],edicionActivada:!1,editor:_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_3___default(),editorConfig:{language:"es",toolbar:["bold","italic","|","bulletedList","numberedList","|","insertTable","|","undo","redo"],table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}},estado:"",estados:[{id:"G",nombre:"Generado"},{id:"R",nombre:"Reportado"},{id:"L",nombre:"Preliminar"},{id:"V",nombre:"Validado"}],empresaId:"",examenSeleccionado:null,fechaDesde:moment().format("YYYY-MM-DD"),fechaHasta:moment().format("YYYY-MM-DD"),guardandoReporte:!1,historial:[],numeroOrden:"",ordenes:[],ordenSeleccionada:null,paciente:{},pacienteBusqueda:"",parametroSeleccionado:{},plantillaId:"",reportes:[],sala:{},tipoAtencion:{},planSalud:{},medico:{},seccionId:"",subempresa:{empresa:{}},sucursalId:this.datos.sucursalActivaId,tipoAtencionId:"",validandoReporte:!1,urlPrevio:"",comentarios:[],comentarioSelecionado:""}},props:["datos","permisos","idUsuario"],mounted:function(){var e=this;$("#modalComentario").on("shown.bs.modal",(function(){e.comentarioSelecionado="",e.cargarComentarios(),$("#comentario").focus()})),this.numeroOrden=0!==this.datos.numeroOrden?this.datos.numeroOrden:"",this.datos.urlPrevio&&this.datos.urlPrevio.includes("/ordenes")&&(this.urlPrevio=this.datos.urlPrevio),this.numeroOrden&&(this.fechaDesde="",this.buscarOrdenes())},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},abrirComentario:function(e){var t=this.obtenerIndiceParametro(e.nombre_parametro,e.orden);this.comentario=this.reportes[t].comentario,this.comentario=null===this.comentario?"":this.comentario,this.parametroSeleccionado=e,$("#modalComentario").modal({backdrop:"static"})},abrirGrafico:function(e){window.open("/reportes/".concat(e,"/grafico"),"","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=350,height=350,left=50,top=50")},abrirHistorial:function(e){var t=this;$("#modalHistorial").modal({backdrop:"static"}),this.cargandoHistorial=!0,this.historial=[],this.datosGraficoHistorial={},this.parametroSeleccionado=e;var a=this.ordenSeleccionada.es_humano?"humano":this.ordenSeleccionada.es_animal?"animal":"objeto",r=encodeURIComponent(this.examenSeleccionado.nombre),o=encodeURIComponent(e.nombre_parametro);axios.get("/api/parametros/".concat(this.ordenSeleccionada.paciente.id,"?nombre_examen=").concat(r,"&nombre_parametro=").concat(o,"&orden_parametro=").concat(e.orden,"&tipo=").concat(a)).then((function(a){var r=_.orderBy(a.data.data.map((function(e){return{numero:e.numero_orden,fecha:moment(e.fecha_orden).format("YYYY-MM-DD"),nombreParametro:e.detalles_ordenes[0].reportes[0].detalles_reportes[0].nombre_parametro,unidadMedida:e.detalles_ordenes[0].reportes[0].detalles_reportes[0].unidad_medida,resultado:e.detalles_ordenes[0].reportes[0].detalles_reportes[0].resultado}})),["fecha"],["asc"]);t.historial=_.orderBy(r,["fecha"],["desc"]),t.datosGraficoHistorial={labels:r.map((function(e){return e.fecha})),datasets:[{label:e.nombre_parametro,backgroundColor:"#d9edf7",data:r.map((function(e){return e.resultado}))}]},t.cargandoHistorial=!1}))},abrirEnviarCorreo:function(){if(this.ordenSeleccionada.paciente.correo)if(0===this.ordenSeleccionada.saldo||this.ordenSeleccionada.subempresa.empresa.mostrar_ordenes_impagas){var e={"forma-entrega":"CORREO",orden:this.ordenSeleccionada,destinatario:this.ordenSeleccionada?this.ordenSeleccionada.paciente.correo:""},t=(0,_support_util__WEBPACK_IMPORTED_MODULE_10__.MD)(e);$("#entregarResultadosModal").modal({backdrop:"static",keyboard:!1},t)}else this.$refs.alerta.mostrarAlerta("danger","La orden tiene saldo pendiente");else this.$refs.alerta.mostrarAlerta("danger","El paciente no tiene correo registrado")},correoElectronicoEnviado:function(e){e&&this.$refs.alerta.mostrarAlerta("success","Correo electrónico enviado")},regresar:function(){this.urlPrevio&&this.urlPrevio.includes("/ordenes")?window.location.href=this.urlPrevio:window.history.back()},actualizarDetalle:function(e){var t=this.detallesOrdenSeleccionada.findIndex((function(t){return t.id===e.id}));Vue.set(this.detallesOrdenSeleccionada,t,e),this.edicionActivada=!1,this.seleccionarDetalleOrden(this.detallesOrdenSeleccionada[t]),this.construirReportes()},actualizarDetalles:function(e){this.detallesOrdenSeleccionada=e.map((function(e){return _objectSpread(_objectSpread({},e),{},{muestraPendiente:e.detalle_orden_muestras.reduce((function(e,t){var a=t.estado;return e&&a===_support_constantes__WEBPACK_IMPORTED_MODULE_8__.zm.PENDIENTE}),!0)})})),this.edicionActivada=!1},actualizarOrden:function(e){var t=this.ordenes.findIndex((function(t){return t.id===e.id}));this.ordenes[t]=e,this.ordenSeleccionada=this.ordenes[t]},actualizarOrdenYDetalle:function(){var e=this;return Promise.all([axios.get("/api/ordenes/".concat(this.ordenSeleccionada.id),{params:{incluir:["paciente","subempresa.empresa","sala","planSalud:id,nombre","tipoAtencion","sucursal:id,extras"]}}),axios.get("/api/ordenes/".concat(this.ordenSeleccionada.id,"/detalles/").concat(this.detalleOrdenSeleccionado.id))]).then((function(t){var a=_slicedToArray(t,2),r=a[0],o=a[1];e.actualizarOrden(r.data.data),e.actualizarDetalle(o.data.data)}))},actualizarOrdenYDetalles:function(){var e=this;return Promise.all([axios.get("/api/ordenes/".concat(this.ordenSeleccionada.id),{params:{incluir:["paciente","subempresa.empresa","sala","planSalud:id,nombre","tipoAtencion"]}}),axios.get("/api/ordenes/".concat(this.ordenSeleccionada.id,"/detalles"))]).then((function(t){var a=_slicedToArray(t,2),r=a[0],o=a[1];e.actualizarOrden(r.data.data),e.actualizarDetalles(o.data.data)}))},buscarOrdenes:function(){var e=this;if(this.ordenes=[],this.paciente={},this.ordenSeleccionada=null,this.detalleOrdenSeleccionado=null,this.examenSeleccionado=null,this.plantillaId="",this.reportes=[],this.subempresa={empresa:{}},this.sala={},this.tipoAtencion={},this.planSalud={},""!==this.numeroOrden||""!==this.fechaDesde)if(""!==this.numeroOrden||""!==this.fechaHasta){var t={numeroOrden:this.numeroOrden,pacienteBusqueda:this.pacienteBusqueda,fechaDesde:this.numeroOrden?"":this.fechaDesde,fechaHasta:this.numeroOrden?"":this.fechaHasta,sucursalId:this.sucursalId,seccionId:this.seccionId,detallesEstado:this.estado,empresaId:this.empresaId,tipoAtencionId:this.tipoAtencionId,soloSeccionesPermitidas:1,incluir:"paciente.raza.padre,subempresa.empresa,sala,tipoAtencion,planSalud:id|nombre,medico,sistemaExterno,sucursal:id|extras"};this.cargandoOrdenes=!0,axios.get("/api/ordenes/buscar",{params:t}).then((function(t){e.ordenes=t.data.data,1===e.ordenes.length&&e.seleccionarOrden(e.ordenes[0])})).catch((function(e){alert("Lo sentimos, hubo un error al cargar las órdenes.")})).then((function(){e.cargandoOrdenes=!1}))}else alert("La fecha de fin en los filtros no puede estar vacía");else alert("La fecha de inicio en los filtros no puede estar vacía")},borrarFiltros:function(){this.numeroOrden="",this.pacienteBusqueda="",this.estado="",this.sucursalId="",this.seccionId="",this.empresaId="",this.tipoAtencionId=""},buscarReporte:function(e,t){var a=this,r=this.detalleOrdenSeleccionado.reportes.find((function(e){return e.plantilla_id===a.plantillaId}));return r?r.detalles_reportes.find((function(a){return a.nombre_parametro===e&&a.orden===t})):null},calcularFormula:function calcularFormula(parametro){var _this7=this,errores=[],formula=parametro.formula.map((function(e){if(e.startsWith('"')&&e.endsWith('"')){var t=_slicedToArray((e=e.substring(1,e.length-1)).split(" -|- "),2),a=t[0],r=t[1],o=_this7.detallesOrdenSeleccionada.find((function(e){return e.examen.nombre===a}));if(e=null,o)if(_this7.examenSeleccionado.nombre===a){var i=_this7.reportes.find((function(e){return e.nombre_parametro===r})).resultado;null===i||""===i||isNaN(i)?errores.push('El paramétro "'.concat(r,'" no tiene valor o no es numérico')):e=i}else{var s=o.reportes.find((function(e){return e.nombre_examen===a}));if(s){var n=s.detalles_reportes.find((function(e){return e.nombre_parametro===r}));n?e=null===n.resultado||""===n.resultado||isNaN(n.resultado)?null:n.resultado:errores.push('El paramétro "'.concat(r,'" no ha sido reportado'))}else errores.push('El examen "'.concat(a,'" no ha sido reportado'))}else errores.push('El examen "'.concat(a,'" no existe en la orden'))}return e}));if(errores.length>0)this.$refs.alerta.mostrarAlerta("danger","¡Error!",errores);else try{formula=formula.join(" ").replace("^","**");var valor=eval(formula).toFixed(2),_valor$split=valor.split("."),_valor$split2=_slicedToArray(_valor$split,2),entero=_valor$split2[0],decimal=_valor$split2[1];"00"===decimal&&(valor=entero),this.reportes[this.obtenerIndiceParametro(parametro.nombre_parametro,parametro.orden)].resultado=valor}catch(e){this.$refs.alerta.mostrarAlerta("danger","¡Error!",["La fórmula contiene errores"])}},cerrarComentario:function(){$("#modalComentario").modal("toggle")},cerrarHistorial:function(){$("#modalHistorial").modal("toggle")},construirReportes:function(){var e=this,t=this;if(t.reportes=[],!_.isEmpty(this.examenSeleccionado)&&""!==t.plantillaId){if(this.edicionActivada){var a=this.examenSeleccionado.plantillas.find((function(t){return t.id===e.plantillaId})).parametros.filter((function(e){return null===e.sexo||"A"===e.sexo||e.sexo===t.paciente.sexo}));_.sortBy(a,"orden").forEach((function(e){var a=t.buscarReporte(e.nombre,e.orden),r=null,o=null,i=null,s=null,n="";if("N"===e.tipo_parametro||"F"===e.tipo_parametro){var c=t.obtenerValoresReferenciaTipoParametroNumerico(e);r=c[0],o=c[1],i=c[2],s=c[3]}"S"===e.tipo_parametro&&e.opcion_tipo_dato_id&&!_.isEmpty(e.tipo_dato.opciones)&&(n=e.tipo_dato.opciones.find((function(t){return t.id===e.opcion_tipo_dato_id})).nombre),a&&"E"===e.tipo_parametro&&(a.resultado=a.valor_adicional);var l=t.detalleOrdenSeleccionado.detalle_orden_muestras.find((function(t){return t.muestra_id===e.muestra_id}));t.reportes.push({muestra_id:l&&e.muestra_id?e.muestra_id:null,parametro_id:e.id,nombre_examen:t.detalleOrdenSeleccionado.examen.nombre,nombre_parametro:e.nombre,tipo_parametro:e.tipo_parametro,resultado:a?a.resultado:n,orden:e.orden,imprimir_valor_referencia:e.imprimir_valor_referencia,unidad_medida:e.unidad_medida,valor_minimo:r,valor_maximo:o,valor_normal_texto:e.valor_normal_texto,valor_minimo_critico:i,valor_maximo_critico:s,interpretacion:e.interpretacion,interpretacion_valor_referencia:e.interpretacion_valor_referencia,formula:e.formula,comentario:a?a.comentario:null})}))}if(!this.edicionActivada){var r=t.detalleOrdenSeleccionado.reportes.find((function(e){return e.plantilla_id===t.plantillaId})),o=r?r.detalles_reportes:[];_.sortBy(o,"orden").forEach((function(e){var a=t.detalleOrdenSeleccionado.detalle_orden_muestras.find((function(t){return t.muestra_id===e.muestra_id}));t.reportes.push({id:e.id,muestra_id:a&&e.muestra_id?e.muestra_id:null,nombre_parametro:e.nombre_parametro,tipo_parametro:e.tipo_parametro,resultado:"E"===e.tipo_parametro?e.valor_adicional:e.resultado,orden:e.orden,unidad_medida:e.unidad_medida,valor_minimo:e.valor_minimo,valor_maximo:e.valor_maximo,valor_normal_texto:e.valor_normal_texto,valor_minimo_critico:e.valor_minimo_critico,valor_maximo_critico:e.valor_maximo_critico,interpretacion:e.interpretacion,interpretacion_valor_referencia:e.interpretacion_valor_referencia,formula:e.formula,comentario:e.comentario})}))}}},convertirEdadAEscala:function(e){switch(e){case"D":return this.paciente.edad_en_dias;case"M":return this.paciente.edad_en_meses;case"Ñ":return this.paciente.edad_en_anios}},editarReporte:function(){this.existenReportes()&&(this.edicionActivada=!this.edicionActivada),this.construirReportes()},eliminarReportes:function(){var e=this;confirm("¿Está seguro que desea eliminar?")&&(this.guardandoReporte=!0,axios.delete("/api/reportes/"+this.detalleOrdenSeleccionado.id,{params:{plantillaId:this.plantillaId}}).then((function(t){return e.actualizarOrdenYDetalle()})).then((function(t){e.$refs.alerta.mostrarAlerta("success","Resultados eliminados")})).catch((function(t){e.mostrarErrores(t.response)})).then((function(){e.guardandoReporte=!1})))},existenCambiosEnReporte:function(){var e=this,t=!1;return this.reportes.filter((function(t){return t.plantilla_id===e.plantillaId})).forEach((function(a){var r=e.buscarReporte(a.nombre_parametro,a.orden);(r=r||{resultado:null,comentario:null}).resultado===a.resultado&&r.comentario===a.comentario||(t=!0)})),t},existenReportes:function(){var e=this;return!_.isEmpty(this.detalleOrdenSeleccionado)&&!_.isEmpty(this.detalleOrdenSeleccionado.reportes.filter((function(t){return t.plantilla_id===e.plantillaId})))},existenReportesEnOtrasPlantillas:function(){var e=this;return!_.isEmpty(this.detalleOrdenSeleccionado)&&!_.isEmpty(this.detalleOrdenSeleccionado.reportes.filter((function(t){return t.plantilla_id!==e.plantillaId})))},filtrarPlantillas:function(e){var t=this;return e.filter((function(e){return!e.taxonomia_id||e.taxonomia_id===(t.ordenSeleccionada.paciente.raza?t.ordenSeleccionada.paciente.raza.padre.id:null)}))},filtrarReportes:function(e){for(var t=(e=e.filter((function(e){return null!==e.resultado&&""!==e.resultado||"G"===e.tipo_parametro||"T"===e.tipo_parametro||"L"===e.tipo_parametro||"A"===e.tipo_parametro||"I"===e.tipo_parametro||"M"===e.tipo_parametro}))).slice(),a=0;a<e.length;a++)if("T"===e[a].tipo_parametro){for(var r=0,o=[],i=a+1;i<e.length&&((null!==e[i].resultado&&""!==e[i].resultado||"G"===e[i].tipo_parametro)&&r++,"L"===e[i].tipo_parametro&&o.push(e[i]),"T"!==e[i].tipo_parametro);i++);0===r&&(o.forEach((function(e){return t.splice(t.indexOf(e),1)})),t.splice(t.indexOf(e[a]),1))}for(var s=[],n=0;n<t.length&&"L"===t[n].tipo_parametro;n++)s.push(t[n]);s.forEach((function(e){return t.splice(t.indexOf(e),1)})),s=[];for(var c=t.length-1;c>=0&&"L"===t[c].tipo_parametro;c--)s.push(t[c]);return s.forEach((function(e){return t.splice(t.indexOf(e),1)})),t},guardarComentario:function(){var e=this.obtenerIndiceParametro(this.parametroSeleccionado.nombre_parametro,this.parametroSeleccionado.orden);this.reportes[e].comentario=this.comentario,$("#modalComentario").modal("toggle")},guardarReportes:function(){var e=this,t=!0;if(this.existenReportesEnOtrasPlantillas()&&(t=confirm("Los resultados reportados en otras plantillas se eliminarán.\n\n¿Desea continuar?")),t){var a=this.examenSeleccionado.plantillas.find((function(t){return t.id===e.plantillaId}));this.guardandoReporte=!0;var r={plantillaId:this.plantillaId,nombreExamen:this.detalleOrdenSeleccionado.examen.nombre,ordenExamen:this.detalleOrdenSeleccionado.examen.ordenamiento,acreditadoExamen:this.detalleOrdenSeleccionado.examen.acreditado,nombreSeccion:a.seccion.nombre,ordenSeccion:a.seccion.orden,firmaId:a.seccion.firma_id,nombreTecnica:a.tecnica?a.tecnica.nombre:null,imprimirSoloParametros:a.imprimir_solo_parametros,extras:this.detalleOrdenSeleccionado.examen.extras,detalles:this.filtrarReportes(this.reportes)};this.definirUrlQr(r,this.detalleOrdenSeleccionado.examen),axios.patch("/api/reportes/"+this.detalleOrdenSeleccionado.id,r).then((function(t){return e.actualizarOrdenYDetalle()})).then((function(t){e.$refs.alerta.mostrarAlerta("success","Resultados guardados")})).catch((function(t){e.mostrarErrores(t.response)})).then((function(){e.guardandoReporte=!1}))}},definirUrlQr:function(e,t){if(_.get(this.ordenSeleccionada.sucursal,"extras.examenesQr")){var a=this.ordenSeleccionada.sucursal.extras.examenesQr.find((function(e){return e.examen_id===t.id}));a&&(e.extras.urlQr=a.url)}},mayusculas:function(e){return _.toUpper(e)},mostrarErrores:function(e){e?401===e.status?this.redireccionar():this.$refs.alerta.mostrarAlerta("danger",e.data.errors):this.$refs.alerta.mostrarAlerta("danger","Error no determinado")},nombrePacienteOrden:function(e){var t="";return e.es_humano&&(t=_.toUpper(e.paciente.apellidos)+", "+_.startCase(_.toLower(e.paciente.nombres))),e.es_animal&&(t=_.startCase(_.toLower(e.paciente.nombre))+(e.paciente.raza?"("+e.paciente.raza.padre.nombre+" - "+e.paciente.raza.nombre+")":"")),e.es_objeto&&(t=_.startCase(_.toLower(e.paciente.descripcion))),t},obtenerColorValoresReferenciaTipoParametroNumerico:function(e){if(-1!==["N","F"].indexOf(e.tipo_parametro)&&e.resultado){if(null!==e.valor_minimo_critico&&null!==e.valor_maximo_critico&&(parseFloat(e.resultado)<parseFloat(e.valor_minimo_critico)||parseFloat(e.resultado)>parseFloat(e.valor_maximo_critico)))return"#FF5454";if(null!==e.valor_minimo&&null!==e.valor_maximo&&(parseFloat(e.resultado)<parseFloat(e.valor_minimo)||parseFloat(e.resultado)>parseFloat(e.valor_maximo)))return"#f2dede"}return"#fff"},obtenerEscalaEdad:function(){var e=this.paciente.edad_en_dias;return e<30?"D":e<365?"M":"Ñ"},obtenerIndiceParametro:function(e,t){return this.reportes.indexOf(this.reportes.find((function(a){return a.nombre_parametro===e&&a.orden===t})))},obtenerOpciones:function(e){var t=this.parametros.find((function(t){return t.id==e})).tipo_dato;return t?t.opciones:[]},obtenerValoresReferenciaTipoParametroNumerico:function(e){if("N"===e.tipo_parametro||"F"===e.tipo_parametro){if(e.valores_referencia_edad.length>0){var t=this.obtenerEscalaEdad(),a=this.convertirEdadAEscala(t),r=e.valores_referencia_edad.filter((function(e){return e.escala_edad==t})).find((function(e){if(e.edad_desde<=a&&a<=e.edad_hasta)return!0}));if(r)return[r.valor_minimo,r.valor_maximo,r.valor_minimo_critico,r.valor_maximo_critico]}return[e.valor_minimo,e.valor_maximo,e.valor_minimo_critico,e.valor_maximo_critico]}return["",""]},obtenerValoresReferencia:function(e){return-1!==["N","F"].indexOf(e.tipo_parametro)&&e.valor_minimo?e.valor_minimo+" - "+e.valor_maximo+(e.unidad_medida?" "+e.unidad_medida:""):"X"===e.tipo_parametro||"S"===e.tipo_parametro?(e.valor_normal_texto?e.valor_normal_texto:"")+(e.unidad_medida?" "+e.unidad_medida:""):""},primerasLetrasMayusculas:function(e){return _.startCase(e)},redireccionar:function(){window.location.href="/ordenes"},seleccionarDetalleOrden:function(e){if(this.edicionActivada&&this.existenCambiosEnReporte())alert("Por favor guarde los cambios");else{this.plantillaId="",this.reportes=[],this.detalleOrdenSeleccionado=e,this.examenSeleccionado=e.examen;var t=this.filtrarPlantillas(this.examenSeleccionado.plantillas);1===t.length&&(this.plantillaId=t[0].id),1===this.detalleOrdenSeleccionado.reportes.length&&(this.plantillaId=this.detalleOrdenSeleccionado.reportes[0].plantilla_id),this.edicionActivada=!1,""!==this.plantillaId&&!this.existenReportes()&&this.esPlantillaActiva&&(this.edicionActivada=!0),this.construirReportes()}},seleccionarOrden:function(e){var t=this;this.cargandoDetallesOrden=!0,this.ordenSeleccionada=e,this.detallesOrdenSeleccionada=[],this.paciente=e.paciente,this.subempresa=e.subempresa,this.sala=e.sala,this.tipoAtencion=e.tipo_atencion,this.planSalud=e.plan_salud,this.medico=e.medico,this.detalleOrdenSeleccionado=null,this.examenSeleccionado=null;var a={seccionId:this.seccionId,seccionesIds:this.seccionId?null:_.map(this.datos.secciones,"id"),estado:this.estado};axios.get("/api/ordenes/".concat(e.id,"/detalles"),{params:a}).then((function(e){var a=e.data;t.detallesOrdenSeleccionada=a.data.map((function(e){return _objectSpread(_objectSpread({},e),{},{muestraPendiente:e.detalle_orden_muestras.reduce((function(e,t){var a=t.estado;return e&&a===_support_constantes__WEBPACK_IMPORTED_MODULE_8__.zm.PENDIENTE}),!0)})}))})).catch((function(e){alert("Lo sentimos, hubo un error al cargar los detalles de la orden.")})).then((function(e){t.cargandoDetallesOrden=!1}))},validarReportes:function(){var e=this;this.validandoReporte=!0,axios.patch("/api/reportes/"+this.detalleOrdenSeleccionado.id+"/validar",{plantillaId:this.plantillaId}).then((function(t){return e.actualizarOrdenYDetalle()})).then((function(t){e.$refs.alerta.mostrarAlerta("success","Examen validado")})).catch((function(t){e.mostrarErrores(t.response)})).then((function(t){e.validandoReporte=!1}))},validarTodosReportes:function(){var e=this;this.validandoReporte=!0,this.detalleOrdenSeleccionado=null,this.examenSeleccionado=null,axios.patch("/api/reportes/"+this.ordenSeleccionada.id+"/validar-todos").then((function(t){return e.actualizarOrdenYDetalles()})).then((function(t){e.$refs.alerta.mostrarAlerta("success","Exámenes validados")})).catch((function(t){e.mostrarErrores(t.response)})).then((function(){e.validandoReporte=!1}))},cambiarEstadoBoton:function(e,t){e.classList.contains("disabled")?(e.classList.remove("disabled"),t.classList.add("fa-save"),t.classList.remove("fa-spinner","fa-spin")):(e.classList.add("disabled"),t.classList.remove("fa-save"),t.classList.add("fa-spinner","fa-spin"))},guardarObservacionesRecibo:function(e){var t=null,a=null;"i"===e.target.localName&&(a=e.target.parentNode,t=e.target),"button"===e.target.localName&&(a=e.target,t=e.target.childNodes[0]),this.cambiarEstadoBoton(a,t);var r={observaciones:this.ordenSeleccionada.observaciones_orden};this.guardarObservaciones("recibo",r,a,t)},guardarObservacionesLaboratorista:function(e){var t=null,a=null;"i"===e.target.localName&&(a=e.target.parentNode,t=e.target),"button"===e.target.localName&&(a=e.target,t=e.target.childNodes[0]),this.cambiarEstadoBoton(a,t);var r={observaciones:this.ordenSeleccionada.observaciones_hoja_trabajo};this.guardarObservaciones("laboratorista",r,a,t)},guardarObservaciones:function(e,t,a,r){var o=this;axios.patch("/api/ordenes/".concat(this.ordenSeleccionada.id,"/observaciones/").concat(e),t).then((function(){})).catch((function(e){var t=o.procesarErrorResponse(e);o.$refs.alerta.mostrarAlerta("danger","¡Error al actualizar observación!",t)})).then((function(){return o.cambiarEstadoBoton(a,r)}))},correoElectronicoCertificadoEnviado:function(e){this.$refs.alerta.mostrarAlerta("success","Correo electrónico con certificado enviado")},abrirModalImprimir:function(){var e={registro:this.ordenSeleccionada,tipoDocumento:"resultados",tamanoPapel:this.datos.tamanoPapelReporte,existenExamenesValidados:this.existenExamenesValidados()};$("#modalImprimir").modal({backdrop:"static",keyboard:!1},e)},documentoImpreso:function(e){if(e)this.mostrarExito(e.mensajes);else{this.mostrarExito(["Impresión enviada"])}},existenExamenesValidados:function(){return!(!this.ordenSeleccionada||!this.detallesOrdenSeleccionada)&&this.detallesOrdenSeleccionada.reduce((function(e,t){var a=t.estado;return["L","V"].includes(a)?e+=1:e}),0)>0},cargarComentarios:function(){var e=this;_.isEmpty(this.comentarios)&&axios.get("/api/comentarios").then((function(t){var a=t.data.data;return e.comentarios=a})).catch((function(t){e.mostrarErrores(t.response)})).then((function(){return e.cargando=!1}))},seleccionarComentario:function(e){e&&(this.comentario=this.comentario?this.comentario+" "+e:e,this.comentarioSelecionado="")},abrirModalResultados:function(){var e=(0,_support_util__WEBPACK_IMPORTED_MODULE_10__.MD)({orden:this.ordenSeleccionada});$("#modalResultados").modal({backdrop:"static"},e)},abrirModalBuscarDocumentos:function(){var e={orden:this.ordenSeleccionada};$("#buscarDocumentosModal").modal({backdrop:"static"},e)}},computed:{exameneReportados:function(){return this.ordenSeleccionada&&this.detallesOrdenSeleccionada?this.detallesOrdenSeleccionada.filter((function(e){return"R"===e.estado})):[]},esPlantillaActiva:function(){var e=this;return"A"===this.examenSeleccionado.plantillas.find((function(t){return t.id===e.plantillaId})).estado},existenExamenesParaImprimir:function(){return!(!this.ordenSeleccionada||!this.detallesOrdenSeleccionada)&&this.detallesOrdenSeleccionada.reduce((function(e,t){var a=t.estado;return["L","V","R"].includes(a)?e+=1:e}),0)>0},existenExamenesParaCorreo:function(){return!(!this.ordenSeleccionada||!this.detallesOrdenSeleccionada)&&this.detallesOrdenSeleccionada.reduce((function(e,t){var a=t.estado;return["L","V"].includes(a)?e+=1:e}),0)>0},parametros:function(){var e=this;return this.plantillaId?this.examenSeleccionado.plantillas.find((function(t){return t.id==e.plantillaId})).parametros:[]},puedeEditarReportes:function(){return"L"===this.detalleOrdenSeleccionado.estado||"V"===this.detalleOrdenSeleccionado.estado?!!this.datos.permisos.editarReportesValidadosPorOtros||!(!this.datos.permisos.editarReportesValidadosPropios||this.detalleOrdenSeleccionado.usuario_valida!==this.datos.idUsuario):this.datos.permisos.editar},puedeEliminarReportes:function(){return"L"===this.detalleOrdenSeleccionado.estado||"V"===this.detalleOrdenSeleccionado.estado?!!this.datos.permisos.eliminarReportesValidadosPorOtros||!(!this.datos.permisos.eliminarReportesValidadosPropios||this.detalleOrdenSeleccionado.usuario_valida!==this.datos.idUsuario):this.datos.permisos.eliminar},nombreMedico:function(){return _.isEmpty(this.medico)?"-":this.medico.nombre_completo},embarazada:function(){return this.ordenSeleccionada.embarazada?1===this.ordenSeleccionada.semanas_gestacion?this.ordenSeleccionada.semanas_gestacion+" semana":this.ordenSeleccionada.semanas_gestacion>1?this.ordenSeleccionada.semanas_gestacion+" semanas":"Si":"No"}},watch:{plantillaId:function(){this.edicionActivada=!1,""!==this.plantillaId&&!this.existenReportes()&&this.esPlantillaActiva&&(this.edicionActivada=!0),this.construirReportes()}}}},7745:(e,t,a)=>{"use strict";var r=a(4590),o=a(538),i=a(4061),s=a.n(i),n=a(7340),c=a.n(n);a(7333),window.Vue=o.default,s().start({apiKey:"aeb18e9beaa08f11a352da9903240ef9",plugins:[new(c())]}),o.default.prototype.$cliente=window.cliente,o.default.prototype.$usuario=window.usuario,o.default.prototype.$configs=window.configs,o.default.prototype.$can=function(e){return window.seguridad.permisos.includes(e)},o.default.prototype.$canAny=function(e){return e.some((function(e){return window.seguridad.permisos.includes(e)}))},o.default.component("vSelect",a(9938).default);var l=a(582);o.default.mixin(a(8911).Z),o.default.component("VueCropper",a(7652).Z),o.default.component("Alerta",a(1953).Z),o.default.component("CargandoModal",a(1922).Z),o.default.component("Cargando",a(9470).Z),o.default.component("Boton",a(5142).Z),o.default.component("ClientesPlantillasFormulario",a(4992).Z),o.default.component("ClientesPlantillasHomologaciones",a(737).Z),o.default.component("ClientesDuplicacionPlantilla",a(2195).Z),o.default.component("ClientesSubempresasFormulario",a(8118).Z),o.default.component("ClientesGruposFormulario",a(9211).Z),o.default.component("ClientesOrdenesFormulario",a(6226).Z),o.default.component("ClientesReportesFormulario",a(5158).Z),o.default.component("ClientesReportesFormulario2",a(205).Z),o.default.component("ClientesPacienteHumano",a(2174).Z),o.default.component("ClientesPacienteAnimal",a(3488).Z),o.default.component("ClientesSujetoObjeto",a(4308).Z),o.default.component("ClientesAnularOrdenFormulario",a(15).Z),o.default.component("ClientesEntregasFormulario",a(4089).Z),o.default.component("ClientesListaTrabajoFormulario",a(9122).Z),o.default.component("ClientesEstadisticosFormulario",a(6475).Z),o.default.component("ClientesCierresFormulario",a(3553).Z),o.default.component("ConsultaResultadosPacientes",a(9906).Z),o.default.component("ConsultaResultadosEmpresas",a(4159).Z),o.default.component("ConsultaResultadosMedicos",a(1695).Z),o.default.component("ClientesTaxonomiasFormulario",a(4809).Z),o.default.component("ClientesHumanoFormulario",a(4358).Z),o.default.component("ClientesAnimalFormulario",a(6295).Z),o.default.component("ClientesObjetosFormulario",a(194).Z),o.default.component("ClientesDetalleOrdenesFormulario",a(9667).Z),o.default.component("Secciones",a(3993).Z),o.default.component("ClientesTiemposRespuestasFormulario",a(1397).Z),o.default.component("ClientesTarifas",a(5410).Z),o.default.component("ClientesFacturasFormulario",a(1412).Z),o.default.component("ClientesFacturasIndex",a(6328).Z),o.default.component("ClientesGestionarPagosModal",a(9254).Z),o.default.component("ClientesCotizacionesIndex",a(2851).Z),o.default.component("ClientesCotizacionesFormulario",a(8102).Z),o.default.component("ClientesConfiguracionesFormulario",a(1134).Z),o.default.component("ClientesUsuariosFormulario",a(8376).Z),o.default.component("ClientesTarifasInforme",a(7006).Z),o.default.component("ClientesFlujosCajasIndex",a(4408).Z),o.default.component("ClientesFlujosCajasFormulario",a(1571).Z),o.default.component("ClientesMembretesIndex",a(6337).Z),o.default.component("ClientesMembretesFormulario",a(4693).Z),o.default.component("ClientesFirmasIndex",a(8037).Z),o.default.component("ClientesFirmasFormulario",a(3815).Z),o.default.component("ClientesFlujosCajasInforme",a(2696).Z),o.default.component("ClientesLaboratoriosIndex",a(9777).Z),o.default.component("ClientesLaboratoriosFormulario",a(8912).Z),o.default.component("ClientesAsociarExamenesFormulario",a(2028).Z),o.default.component("ClientesRemisionesIndex",a(4980).Z),o.default.component("ClientesRemisionesFormulario",a(3392).Z),o.default.component("ClientesRemisionesShow",a(5123).Z),o.default.component("ClientesJmFacturaOrdenModal",a(2200).Z),o.default.component("ClientesPedidosIndex",a(6006).Z),o.default.component("ClientesPedidosFormulario",a(3618).Z),o.default.component("ClientesPedidosShow",a(1906).Z),o.default.component("ClientesGeneradorOrdenesModal",a(9668).Z),o.default.component("ClientesEtiquetasModal",a(1337).Z),o.default.component("ClientesMatrizMspFormulario",a(688).Z),o.default.component("ClientesResultadosFormulario",a(2190).Z),o.default.component("ClientesCuentaPagos",a(5630).Z),o.default.component("ClientesCuentaSuscripcion",a(8754).Z),o.default.component("ClientesDetalleOrdenMuestrasIndex",a(9157).Z),o.default.component("ClientesBuscarDiagnosticoModal",a(6216).Z),o.default.component("ClientesEpiFormulario",a(5538).Z),o.default.component("ClientesOrdenesIndex",a(3128).Z),o.default.component("ClientesComentariosIndex",a(9959).Z),o.default.component("ClientesComentariosFormulario",a(1120).Z),o.default.component("OrdenEstado",a(8071).Z),o.default.component("PortalResultados",a(7063).Z),o.default.component("ClientesIessOrdenesFormulario",a(4536).Z),o.default.component("ClientesIessPedidosFormulario",a(4429).Z),o.default.component("SistemaExternoFacturasModal",a(2246).Z),o.default.component("EnviarResultados",a(8320).Z),o.default.component("TokanPortalModal",a(8301).Z),o.default.component("ClientesPedidosInforme",a(5470).Z),o.default.component("ClientesTareasIndex",a(8353).Z),o.default.component("ClientesAntibioticosIndex",a(9602).Z),o.default.component("ClientesAntibioticosFormulario",a(5415).Z),o.default.component("ClientesMicroorganismosIndex",a(5713).Z),o.default.component("ClientesMicroorganismosFormulario",a(8602).Z),o.default.component("ClientesAntibiogramasIndex",a(5329).Z),o.default.component("ClientesAntibiogramasFormulario",a(4049).Z),o.default.component("ExamenQrModal",a(9184).Z),o.default.component("ClientesInformeEstadisticoProcedencia",a(2063).Z),o.default.component("ClientesInformeRemisiones",a(5956).Z),o.default.component("ClientesEmpresasFormulario",a(1317).Z),o.default.component("ClientesBienvenidaIndex",a(5418).Z),o.default.component("Navbar",a(5390).Z),o.default.component("ClientesExamenesIndex",a(4156).Z),o.default.component("ClientesExamenesFormulario",a(4707).Z),o.default.component("ClientesDestinosTareasIndex",a(2978).Z),o.default.component("ClientesDestinosTareasFormulario",a(1113).Z),o.default.component("ClientesSectoresIndex",a(2976).Z),o.default.component("ClientesSectoresFormulario",a(2739).Z),o.default.component("ClientesDestinosIndex",a(6413).Z),o.default.component("ClientesDestinosFormulario",a(2823).Z),o.default.component("ClientesMensajerosIndex",a(433).Z),o.default.component("ClientesMensajerosFormulario",a(9147).Z),o.default.component("ClientesRutasIndex",a(4978).Z),o.default.component("ClientesRutasFormulario",a(8946).Z),o.default.component("ClientesRegistrarAbonosFormulario",a(649).Z),o.default.component("ClientesInformeEstadoCuenta",a(1653).Z),o.default.component("ClientesCumplimientoRutasFormulario",a(4709).Z),o.default.component("ClientesInformeEstadoTareaRuta",a(299).Z),o.default.component("ClientesRutasShow",a(7349).Z),o.default.component("ConsultaResultadosEmpresasSolicitudesVisitas",a(1088).Z),o.default.component("ClientesEnviosMuestrasIndex",a(8375).Z),o.default.component("ClientesEnviosMuestrasFormulario",a(592).Z),o.default.component("ClientesRecepcionesMuestrasIndex",a(5081).Z),o.default.component("ClientesRecepcionesMuestrasFormulario",a(6298).Z),o.default.component("ClientesFlebotomistasIndex",a(9237).Z),o.default.component("ClientesFlebotomistasFormulario",a(1853).Z),o.default.component("ClientesEspecialidadesIndex",a(3837).Z),o.default.component("ClientesEspecialidadesFormulario",a(757).Z),o.default.component("ClientesInformeCatalogos",a(5838).Z),o.default.component("paginate",l),o.default.directive("date",a(7776).Z),o.default.filter("distribucion",(function(e){switch(e){case"LC":return"Logo - Contenido";case"CL":return"Contenido - Logo";case"IM":return"Sólo imagen"}})),o.default.filter("estadoMuestra",(function(e){switch(e){case"RECIBIDA":return"Recibida";case"PENDIENTE":return"Pendiente";case"PROCESADA":return"Procesada";case"NO_PROCESADA":return"No procesada"}})),o.default.filter("tipoEntregaCorreo",(function(e){switch(e){case"COMPLETA":return"Completo";case"PARCIAL":return"Parcial";case"CERTIFICADO":return"Certificado"}})),o.default.filter("estadoEntrega",(function(e){switch(e){case"VIGENTE":return"Vigente";case"NO_VIGENTE":return"No vigente"}})),o.default.filter("estadoRemision",(function(e){switch(e){case"G":return"Generada";case"E":return"Enviada";case"P":return"En Proceso";case"R":return"Error";case"N":return"Anulada"}})),o.default.filter("estadoDetalleRemision",(function(e){switch(e){case"G":return"Generado";case"E":return"Enviado";case"R":return"Error";case"N":return"Anulado"}})),o.default.filter("estadoOrden",(function(e){switch(e){case"G":return"Generado";case"P":return"En Proceso";case"R":return"Reportado";case"L":return"Preliminar";case"V":return"Validado";case"N":return"Anulado"}})),o.default.filter("estadoDetalleOrden",(function(e){switch(e){case"G":return"Generado";case"R":return"Reportado";case"L":return"Preliminar";case"X":return"No procesado";case"V":return"Validado"}})),o.default.filter("estadoPedido",(function(e){switch(e){case"G":return"Generado";case"D":return"Descargado";case"N":return"Anulado"}})),o.default.filter("estadoAbono",(function(e){switch(e){case"V":return"Vigente";case"N":return"Anulado"}})),o.default.filter("formaPago",(function(e){switch(e){case"EF":return"Efectivo";case"CH":return"Cheque";case"DE":return"Depósito";case"TI":return"Transferencia interbancaria";case"TD":return"Tarjeta de débito";case"TC":return"Tarjeta de crédito";case"RE":return"Retención";case"NC":return"Nota de crédito";case"CR":return"Cruce"}})),o.default.filter("estadoRuta",(function(e){switch(e){case"GENERADA":return"Generada";case"EN_PROCESO":return"En proceso";case"PROCESADA":return"Procesada";case"ANULADA":return"Anulada"}})),o.default.filter("tipoDocumento",(function(e){switch(e){case"CARNET_GRUPO_SANGUINEO":return"Carnet de grupo sanguíneo";case"CERTIFICADO_ASISTENCIA":return"Certificado de asistencia";case"CERTIFICADO_EPIDEMIOLOGICO":return"Certificado epidemiológico";case"CONSENTIMIENTO_INFORMADO":return"Consentimiento informado";case"GESTION_MUESTRA":return"Gestión de muestra";case"PRUEBA_POSTPRANDIAL":return"Instructivo para prueba postprandial";case"CURVA_GLUCOSA":return"Instructivo para toma de curva de glucosa";case"FLUJO_VAGINAL":return"Examen de flujo vaginal";case"CITOLOGIA_VAGINAL":return"Citología Vaginal";case"VIRUS_PAPILOMA_HUMANO":return"Detección de virus del papiloma humano";case"ANTIGENO_CHLAMYDIA_TRACHOMATIS":return"Chlamydia Trachimatis antígeno"}})),o.default.filter("estadoDestinoRutaTarea",(function(e){switch(e){case"PENDIENTE":return"Pendiente";case"CUMPLIDO":return"Cumplido";case"NO_CUMPLIDO":return"No cumplido"}})),o.default.filter("tipoFactura",(function(e){switch(e){case"FACTURA":return"Factura";case"PROFORMA":return"Proforma"}})),o.default.filter("estadoSolicitudVisita",(function(e){switch(e){case"PENDIENTE":return"Pendiente";case"PLANIFICADA":return"Planificada"}})),o.default.filter("tipoIdentificacion",(function(e,t){switch(e){case"CED":return t===r.bG.ECUADOR?"Cédula":"DNI";case"PAS":return"Pasaporte";case"OTRO":return"Otro"}})),o.default.filter("estadoRecibo",(function(e){switch(e){case"GENERADO":return"Generado";case"PROCESADO":return"Procesado"}})),o.default.filter("estadoEnvioMuestra",(function(e){switch(e){case"GENERADO":return"Generado";case"ENVIADO":return"Enviado";case"ANULADO":return"Anulado";case"RECIBIDO":return"Recibido"}})),o.default.filter("estadoDetalleEnvioMuestra",(function(e){switch(e){case"GENERADO":return"Generado";case"ENVIADO":return"Enviado";case"ANULADO":return"Anulado";case"RECIBIDO":return"Recibido";case"RECHAZADO":return"Rechazado"}})),o.default.filter("fecha",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?(window.usuario.zonaHoraria||(window.usuario.zonaHoraria=moment.tz.guess()),moment.utc(e).tz(window.usuario.zonaHoraria).format(t)):a})),o.default.filter("numero",(function(e){return new Intl.NumberFormat("en-US",{minimumFractionDigits:"2"}).format(e)})),o.default.filter("moneda",(function(e){return window.cliente.moneda+new Intl.NumberFormat("en-US",{minimumFractionDigits:"2"}).format(e)})),o.default.filter("numeroOrden",(function(e,t){if(!t)return e;if(5===t.tipoNumeracion||6===t.tipoNumeracion){var a=e.substring(0,6),r=e.substring(6,e.length);return'<span class="orden-fecha">'.concat(a,'</span><span class="orden-secuencia">').concat(r,"</span>")}if(1===t.tipoNumeracion||3===t.tipoNumeracion){var o=e.substring(0,8),i=e.substring(8,e.length);return'<span class="orden-fecha">'.concat(o,'</span><span class="orden-secuencia">').concat(i,"</span>")}return e})),o.default.filter("proveedorContifico",(function(e){switch(e){case"M":return"Medianet";case"D":return"Datafast";default:return"-"}}));new o.default({el:"#app",data:function(){return{movil:window.innerWidth<768}},created:function(){var e=this;addEventListener("resize",(function(){e.movil=innerWidth<768}))},mounted:function(){$(".modal").on("shown.bs.modal",(function(){$("body").removeAttr("style")})),$(".modal").on("hidden.bs.modal",(function(){$(".modal:visible").length>0&&$("body").addClass("modal-open")}))}});$(".alerta-orion").delay(1e4).fadeOut()},7333:(e,t,a)=>{"use strict";a.r(t);var r=a(4554),o=a(4155);window._=a(6486);try{window.$=window.jQuery=a(9755),a(3002)}catch(e){}a(4728),a(9027),window.axios=a(9669),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var i=document.head.querySelector('meta[name="csrf-token"]');i?window.axios.defaults.headers.common["X-CSRF-TOKEN"]=i.content:console.error("CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token"),window.moment=a(8),window.moment.locale("es"),window.removeDiacritics=a(5804).Od;var s={key:(o.env.MIX_PUSHER_APP_KEY,"ak-123456"),host:(o.env.MIX_PUSHER_APP_HOST,"websockets.orion-labs.com"),port:(o.env.MIX_PUSHER_APP_PORT,443),tls:(!1,!0)};s.key&&(window.Pusher=a(6606),window.Echo=new r.Z({broadcaster:"pusher",key:s.key,wsHost:s.host,wsPort:s.port,wssPort:s.port,disableStats:!0,enabledTransports:["ws","wss"],forceTLS:s.tls}))},4590:(e,t,a)=>{"use strict";a.d(t,{Ah:()=>y,Bs:()=>i,CW:()=>E,Gm:()=>n,Is:()=>x,P0:()=>f,Q0:()=>s,Qc:()=>u,RI:()=>c,T7:()=>m,bG:()=>o,fG:()=>g,im:()=>r,k4:()=>p,oH:()=>C,rE:()=>v,rP:()=>d,sM:()=>b,sk:()=>_,xe:()=>h,zm:()=>l});var r={ERROR:"Error",ADVERTENCIA:"Advertencia"},o={ECUADOR:"EC",PERU:"PE"},i={TEXTO:"X",TEXTO_EXTENDIDO:"E",NUMERICO:"N",SELECCION:"S",FORMULA:"F",IMAGEN:"I",ADJUNTO:"A",GRAFICO:"G",LINEA_SEPARACION:"L",TITULO:"T",MICROBIOLOGIA:"M"},s={MANUAL:"MANUAL",ACATHA:"ACATHA",CASTOR:"CASTOR",CONTIFICO:"CONTIFICO",IESS:"IESS"},n={ANULADO:"N",GENERADO:"G",REPORTADO:"R",PRELIMINAR:"L",VALIDADO:"V",EN_PROCESO:"p"},c={ANULADO:"N",GENERADO:"G",REPORTADO:"R",NO_PROCESADO:"X",PRELIMINAR:"L",VALIDADO:"V"},l={PENDIENTE:"PENDIENTE",RECIBIDA:"RECIBIDA",PROCESADA:"PROCESADA",NO_PROCESADA:"NO_PROCESADA"},d={GENERADA:"GENERADA",EN_PROCESO:"EN_PROCESO",PROCESADA:"PROCESADA",ANULADA:"ANULADA"},u={PENDIENTE:"PENDIENTE",CUMPLIDO:"CUMPLIDO",NO_CUMPLIDO:"NO_CUMPLIDO"},m={GENERADO:"GENERADO",PROCESADO:"PROCESADO"},p={PENDIENTE:"PENDIENTE",PLANIFICADA:"PLANIFICADA"},f={GENERADO:"G",ENVIADO:"E",PROCESADO:"P",ANULADO:"N",ERROR:"R"},v={GENERADO:"GENERADO",ENVIADO:"ENVIADO",ANULADO:"ANULADO",RECIBIDO:"RECIBIDO"},_={GENERADO:"GENERADO",ENVIADO:"ENVIADO",ANULADO:"ANULADO",RECIBIDO:"RECIBIDO",RECHAZADO:"RECHAZADO"},h={EFECTIVO:"EF",CHEQUE:"CH",DEPOSITO:"DE",TRANSFERENCIA_INTERBANCARIA:"TI",TARJETA_DEBITO:"TD",TARJETA_CREDITO:"TC",RETENCION:"RE",NOTA_CREDITO:"NC",CRUCE:"CR"},g={ENTREGA_RESULTADO:"ENTREGA_RESULTADO",RECOLECTA_MUESTRA:"RECOLECTA_MUESTRA"},b={HUMANO:"App\\Models\\PacienteHumano",ANIMAL:"App\\Models\\PacienteAnimal",OBJETO:"App\\Models\\SujetoObjeto"},x=["COVPCR","SARSCOV","COVCNT","COVPR","COVAG"],C={MEDICOS:"MEDICOS",SUCURSALES:"SUCURSALES",CLIENTES:"CLIENTES",MUESTRAS:"MUESTRAS",SERVICIO:"SERVICIO",TIPO_ATENCION:"TIPO_ATENCION",PLAN_SALUD:"PLAN_SALUD",USUARIOS:"USUARIOS",ANIMAL:"Animal",OBJETO:"Objeto",EXAMENES:"EXAMENES",DIAGNOSTICOS:"DIAGNOSTICOS",TIPOS_PACIENTES:"TIPOS_PACIENTES",CATEGORIAS:"CATEGORIAS",SECCIONES:"SECCIONES",LABORATORIOS:"LABORATORIOS",SISTEMAS_EXTERNOS:"SISTEMAS_EXTERNOS",MICROORGANISMOS:"MICROORGANISMOS",ANTIBIOTICOS:"ANTIBIOTICOS",TIPOS_MICROORGANISMOS:"TIPOS_MICROORGANISMOS",ANTIBIOGRAMAS:"ANTIBIOGRAMAS",ENTIDADES_FINANCIERAS:"ENTIDADES_FINANCIERAS",FLEBOTOMISTAS:"FLEBOTOMISTAS",SECTORES:"SECTORES",MENSAJEROS:"MENSAJEROS",JORNADAS:"JORNADAS",TAREAS:"TAREAS",DESTINOS:"DESTINOS",TARIFAS:"TARIFAS",ESPECIALIDADES:"ESPECIALIDADES"},y={CARNET_GRUPO_SANGUINEO:"CARNET_GRUPO_SANGUINEO",CERTIFICADO_ASISTENCIA:"CERTIFICADO_ASISTENCIA",CERTIFICADO_EPIDEMIOLOGICO:"CERTIFICADO_EPIDEMIOLOGICO",ANTIGENO_CHLAMYDIA_TRACHOMATIS:"ANTIGENO_CHLAMYDIA_TRACHOMATIS",CITOLOGIA_VAGINAL:"CITOLOGIA_VAGINAL",CONSENTIMIENTO_INFORMADO:"CONSENTIMIENTO_INFORMADO",VIRUS_PAPILOMA_HUMANO:"VIRUS_PAPILOMA_HUMANO",FLUJO_VAGINAL:"FLUJO_VAGINAL",GESTION_MUESTRA:"GESTION_MUESTRA",PRUEBA_POSTPRANDIAL:"PRUEBA_POSTPRANDIAL",CURVA_GLUCOSA:"CURVA_GLUCOSA"},E={"number:notfound":"Número no tiene WhatsApp","not delivering to a user who marked your messages as spam":"El destinatario ha marcado como spam","not a valid recipient":"El correo del destinatario no es válido","invalid recipient":"El correo del destinatario no es válido","invalid address":"El correo del destinatario no es válido","no such":"El correo del destinatario no es válido","not delivering to previously bounced address":"Correo electrónico rebotado","too old":"Se intentó enviar varias veces pero el servicio de correo del destinatario no acepta el correo","mailbox unavailable":"Correo de destinatario no existe","recipient address was suppressed due to customer policy":"Correo de destinatario no existe","recipient address was suppressed due to system policy":"Correo de destinatario no existe","the email account that you tried to reach does not exist":"Correo de destinatario no existe","user does not exist":"Correo de destinatario no existe","email account that you tried to reach does not exist":"Correo de destinatario no existe","user unknown":"Correo de destinatario no existe","no such ...":"Correo de destinatario no existe","no such user":"Correo de destinatario no existe",recipnotfound:"Correo de destinatario no existe","domain does not exist":"Dominio de correo no existe","over quota":"Buzón lleno en correo de destinatario","no mx for":"Domínio de correo electrónico inválido","unable to connect to mx servers":"Servidor de correo electrónico de destino no disponible","no mail servers for this domain could be reached at this time":"Servidor de correo electrónico de destino no disponible","temporarily suspended":"No se puede enviar el correo al destinatario","message timeout":"Se intentó enviar varias veces, pero no se logró despachar el correo","private/loopback address":"Se intentó enviar varias veces, pero el dominio del correo de destino no está disponible","domain does not resolve":"Dominio del correo de destino no está disponible"}},7974:(e,t,a)=>{"use strict";a.d(t,{G5:()=>s,MD:()=>n,SP:()=>l,dD:()=>c});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var s=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},n=function(e){for(var t=document.createElement("button"),a=0,r=Object.entries(e);a<r.length;a++){var i=o(r[a],2),s=i[0],n=i[1];t.setAttribute("data-".concat(s),n instanceof Object?JSON.stringify(n):n)}return t},c=function(e,t){if(!_.get(e,"requeridos"))return!0;if(t.valor<=0||!t.valor)return!0;switch(t.forma_pago){case r.xe.DEPOSITO:if(_.get(e,"requeridos.deCuentaBancariaId")&&!t.cuenta_bancaria_id)return"abrirModal";break;case r.xe.TRANSFERENCIA_INTERBANCARIA:if(_.get(e,"requeridos.tiCuentaBancariaId")&&!t.cuenta_bancaria_id)return"abrirModal";if(_.get(e,"requeridos.tiNumeroComprobante")&&!t.numero_forma_pago)return"abrirModal";break;case r.xe.TARJETA_DEBITO:if(_.get(e,"requeridos.tdProveedor")&&!t.numero_forma_pago)return"abrirModal";if(_.get(e,"requeridos.tdEntidadFinancieraId")&&!_.get(t.extras,"entidad_financiera_id"))return console.error("Entidad emisora de tarjeta de débito es requerida"),"abrirModal";break;case r.xe.TARJETA_CREDITO:if(_.get(e,"requeridos.tdProveedor")&&!t.numero_forma_pago)return"abrirModal";if(_.get(e,"requeridos.tcEntidadFinancieraId")&&!_.get(t.extras,"entidad_financiera_id"))return console.error("Entidad emisora de tarjeta de crédito es requerida"),"abrirModal";break;case r.xe.CHEQUE:if(_.get(e,"requeridos.chNumero")&&!t.numero_forma_pago)return"abrirModal";if(_.get(e,"requeridos.chEntidadFinancieraId")&&!_.get(t.extras,"entidad_financiera_id"))return console.error("Entidad emisora de cheque es requerida"),"abrirModal";case r.xe.EFECTIVO:case r.xe.RETENCION:case r.xe.NOTA_CREDITO:case r.xe.CRUCE:}return!0},l=function(e){switch(e.extras=null,e.forma_pago){case r.xe.CHEQUE:e.extras={entidad_financiera_id:""};break;case r.xe.TARJETA_CREDITO:var t=localStorage.getItem("facturas-tarjeta");t&&(e.numero_forma_pago=t),e.extras={entidad_financiera_id:"",numero_lote:""};break;case r.xe.TARJETA_DEBITO:var a=localStorage.getItem("facturas-tarjeta");a&&(e.numero_forma_pago=a),e.extras={entidad_financiera_id:"",numero_lote:""};case r.xe.EFECTIVO:case r.xe.NOTA_CREDITO:case r.xe.RETENCION:case r.xe.CRUCE:}return e}},430:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".fade-enter[data-v-1f22f6d0],.fade-leave-to[data-v-1f22f6d0]{opacity:0}.fade-enter-active[data-v-1f22f6d0],.fade-leave-active[data-v-1f22f6d0],.fade-move[data-v-1f22f6d0]{transition:all .5s}","",{version:3,sources:["webpack://./resources/js/components/alerta.vue"],names:[],mappings:"AAuIA,6DACA,SACA,CAEA,oGAGA,kBACA",sourcesContent:['<template>\n  <div style="position: fixed; right: 20px; z-index: 1050;" :style="{top: `${top}px`}">\n    <transition-group name="fade">\n      <div\n        v-for="mensaje in mensajes"\n        :key="mensaje.id"\n        :class="\'alert alert-\' + mensaje.tipo"\n        v-show="mensaje.visible"\n        role="alert"\n        @click="ocultarAlerta(mensaje)"\n        style="position: sticky; max-width: 700px; max-height: 300px; margin-bottom: 7px; padding:13px;">\n        <i id="icono" style="font-size: 1.85em" :class="claseTipo(mensaje)"></i>\n        <div>\n          <div\n            style="padding-top: 2px"\n            :style="estiloMensaje(mensaje)"\n            v-show="mensaje.mensaje"\n            v-html="mensaje.mensaje"></div>\n          <ul style="padding-left: 17px" v-if="mensaje.lista.length>0">\n            <li v-for="item in mensaje.lista" v-html="item"></li>\n          </ul>\n        </div>\n      </div>\n    </transition-group>\n  </div>\n</template>\n\n<script>\n  export default {\n    props: {\n      top: {type: Number, default: 60},\n      timeout: {type: Number, default: 10000},\n    },\n    data() {\n      return {\n        mensajes: [],\n      }\n    },\n    methods: {\n      mostrarAlerta(tipo, mensaje, lista = []) {\n        if (mensaje instanceof Array) {\n          if (mensaje.length === 1) {\n            mensaje = mensaje[0];\n          } else {\n            lista = mensaje;\n            mensaje = null;\n          }\n        }\n\n        if (lista.length === 1) {\n          lista = lista[0];\n        }\n\n        if (mensaje instanceof Object) {\n          lista = mensaje;\n          mensaje = null;\n        }\n        \n        const objetoMensaje = this.crearMensaje(tipo, mensaje, lista);\n        this.mensajes.unshift(objetoMensaje);\n      },\n      crearMensaje(tipo, texto, lista) {\n        const id = this.mensajes.length > 0 ? this.mensajes[0].id : 0;\n        const mensaje = {\n          id: id + 1,\n          tipo: tipo,\n          mensaje: texto,\n          visible: true,\n          lista: [],\n        };\n\n        if (lista instanceof Array) {\n          mensaje.lista = lista;\n        } else if (lista instanceof Object) {\n          mensaje.lista = Object.values(lista).map(item => item[0]);\n        } else {\n          mensaje.lista = [lista];\n        }\n\n        setTimeout(() => this.ocultarAlerta(mensaje), this.timeout);\n\n        return mensaje;\n      },\n      ocultarAlerta(mensaje) {\n        mensaje.visible = false;\n\n        const indice = this.mensajes.indexOf(mensaje);\n\n        if (indice > -1) {\n          this.mensajes.splice(indice, 1);\n        }\n      },\n      ocultarAlertas() {\n        this.mensajes.forEach(mensaje => mensaje.visible = false);\n      },\n      estiloMensaje(mensaje) {\n        if (!_.isEmpty(mensaje.lista)) {\n          return \'font-weight: 500\';\n        }\n        return \'\';\n      },\n      claseTipo(mensaje) {\n        return {\n          \'fas fa-check-circle\': mensaje.tipo === \'success\',\n          \'fas fa-info-circle\': mensaje.tipo === \'info\',\n          \'fas fa-exclamation-circle\': mensaje.tipo === \'warning\',\n          \'fas fa-times-circle\': mensaje.tipo === \'danger\',\n        };\n      }\n\n    },\n  }\n<\/script>\n\n<style scoped>\n  .fade-enter {\n    opacity: 0;\n  }\n\n  .fade-leave-to {\n    opacity: 0;\n  }\n\n  .fade-move,\n  .fade-enter-active,\n  .fade-leave-active {\n    transition: all 0.5s;\n  }\n\n</style>\n'],sourceRoot:""}]);const n=s},9983:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"h3[data-v-290f94e2]{margin-top:0}.metrica[data-v-290f94e2]{color:#424f61;font-size:xx-large;font-weight:bolder}.tarjeta-metrica>.panel[data-v-290f94e2]:hover{box-shadow:3px 3px 5px #ccc}.tarjeta-metrica h5[data-v-290f94e2]{margin:0}.tarjeta-metrica .panel-heading[data-v-290f94e2]{padding-bottom:0}.tarjeta-metrica .panel-body[data-v-290f94e2]{padding-top:0}.tarjeta[data-v-290f94e2]{background-color:#f1a417;border-radius:3px;box-shadow:0 0 3px #add8e6;box-sizing:border-box;color:#fff;margin:0 0 20px;min-height:100px;overflow:hidden;padding:20px;position:relative;vertical-align:baseline}.tarjeta-icono[data-v-290f94e2]{color:hsla(0,0%,100%,.5);font-size:150px;position:absolute;right:-20px;top:-55px}.tarjeta-usuario[data-v-290f94e2]{background-image:linear-gradient(-20deg,#2b5876,#4e4376)}.tarjeta-ayuda[data-v-290f94e2],.tarjeta-interes[data-v-290f94e2],.tarjeta-novedades[data-v-290f94e2]{background-image:linear-gradient(90deg,#3ab5b0 0,#3d99be 31%,#56317a)}.publicacion[data-v-290f94e2]{margin-bottom:20px}.articulo .panel[data-v-290f94e2],.publicacion .panel[data-v-290f94e2]{position:relative}.publicacion .panel[data-v-290f94e2]{border:0;border-left:8px solid #2e6da4;box-shadow:0 0 2px #ddd;box-sizing:border-box;display:inline-block;margin:5px;overflow:hidden;padding:0;position:relative;text-align:left;vertical-align:top;width:calc(50% - 10px)}.publicacion>.panel[data-v-290f94e2]:hover{box-shadow:3px 3px 5px #ccc;margin-left:4px;margin-right:6px}.publicacion h4[data-v-290f94e2]{margin:0}.articulo .fecha[data-v-290f94e2],.publicacion .fecha[data-v-290f94e2]{float:right;font-size:smaller;font-style:italic;padding:7px 0;text-align:right}.publicacion img[data-v-290f94e2]{height:inherit;left:0;position:absolute;top:0;width:100px}.publicacion .semana[data-v-290f94e2]{border-left:8px solid #f1a417}.publicacion .panel .panel-heading[data-v-290f94e2]{border-radius:5px 5px 0 0}.publicacion .panel .panel-heading h4[data-v-290f94e2]{font-size:small}.publicacion .panel .panel-footer[data-v-290f94e2]{border-radius:0 0 5px 5px}.publicacion .panel>*[data-v-290f94e2]{background:none;border:none;padding:5px;position:relative;z-index:10}.articulo .panel>*[data-v-290f94e2]{padding:10px;position:relative;z-index:10}.articulo .img[data-v-290f94e2]{display:none}.articulo .panel-body[data-v-290f94e2],.publicacion .panel-body[data-v-290f94e2]{background-color:hsla(0,0%,100%,.5);text-shadow:0 0 4px #fff}","",{version:3,sources:["webpack://./resources/js/components/clientes/bienvenida/Index.vue"],names:[],mappings:"AAqfA,oBACA,YACA,CAEA,0BAEA,aAAA,CADA,kBAAA,CAEA,kBACA,CAEA,+CACA,2BACA,CAEA,qCACA,QACA,CAEA,iDACA,gBACA,CAEA,8CACA,aACA,CAEA,0BAOA,wBAAA,CADA,iBAAA,CAGA,0BAAA,CALA,qBAAA,CAIA,UAAA,CAHA,eAAA,CAHA,gBAAA,CASA,eAAA,CARA,YAAA,CAOA,iBAAA,CATA,uBAWA,CAEA,gCAKA,wBAAA,CAJA,eAAA,CACA,iBAAA,CAEA,WAAA,CADA,SAGA,CAEA,kCACA,wDACA,CAUA,sGACA,qEACA,CAEA,8BACA,kBACA,CAEA,uEACA,iBACA,CAEA,qCAOA,QAAA,CACA,6BAAA,CAFA,uBAAA,CAGA,qBAAA,CAGA,oBAAA,CADA,UAAA,CAPA,eAAA,CAFA,SAAA,CAGA,iBAAA,CAJA,eAAA,CAEA,kBAAA,CAOA,sBAGA,CAEA,2CAIA,2BAAA,CAHA,eAAA,CACA,gBAGA,CAEA,iCACA,QACA,CAEA,uEAGA,WAAA,CAEA,iBAAA,CAJA,iBAAA,CAGA,aAAA,CAFA,gBAIA,CAEA,kCACA,cAAA,CAGA,MAAA,CAFA,iBAAA,CACA,KAAA,CAEA,WACA,CAEA,sCACA,6BACA,CAEA,oDACA,yBACA,CAEA,uDACA,eACA,CAEA,mDACA,yBACA,CAEA,uCAIA,eAAA,CACA,WAAA,CAFA,WAAA,CAFA,iBAAA,CACA,UAIA,CAEA,oCAGA,YAAA,CAFA,iBAAA,CACA,UAEA,CAEA,gCACA,YACA,CAEA,iFAEA,mCAAA,CADA,wBAEA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"></alerta>\n    <navbar>\n      <template #titulo>\n        {{ nombreLaboratorio }}&nbsp;\n      </template>\n    </navbar>\n\n    <table class="table table-borderless">\n      <div class="col-sm-1"></div>\n      <div class="col-sm-7">\n        <div class="tarjeta tarjeta-usuario">\n          <h3>¡Hola, {{ nombresUsuario }}!</h3>\n          <p>Nos alegra que estés de regreso</p>\n          <div class="tarjeta-icono">\n            <i class="fas fa-user-circle fa-6" aria-hidden="true"></i>\n          </div>\n        </div>\n\n        <div class="tarjeta tarjeta-novedades" v-show="ultimasEntradas.length>0 || anterioresEntradas.length>0">\n          <h3>Tablero de métricas</h3>\n          <div class="tarjeta-icono">\n            <i class="fas fa-chart-bar fa-6" aria-hidden="true"></i>\n          </div>\n          <div class="row">\n            <div class="col-sm-4">\n              <select\n                id="fecha"\n                name="fecha"\n                class="form-control input-xs"\n                @change="cambioFecha"\n                v-model="fecha">\n\n                <option v-for="fecha in fechas" :value="fecha">\n                  {{ fecha.etiqueta }}\n                </option>\n\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class="row">\n          <div class="col-sm-4 tarjeta-metrica">\n            <div class="panel">\n              <div class="panel-heading">\n                <h6>Cantidad de órdenes</h6>\n              </div>\n              <div class="panel-body text-center">\n                <cargando\n                  :cargando="procesando.cargarCantidadOrdenes"\n                  :mostrar-etiqueta="false"\n                  alto="50px"\n                />\n                <div v-if="!procesando.cargarCantidadOrdenes" class="metrica">\n                  {{ dashboard.cantidadOrdenes }}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="col-sm-3 tarjeta-metrica">\n            <div class="panel">\n              <div class="panel-heading">\n                <h6>Pacientes nuevos</h6>\n              </div>\n              <div class="panel-body text-center">\n                <cargando\n                  :cargando="procesando.cargarPacientesNuevos"\n                  :mostrar-etiqueta="false"\n                  alto="50px"\n                />\n                <div v-if="!procesando.cargarPacientesNuevos" class="metrica">\n                  {{ dashboard.pacientesNuevos }}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="col-sm-4 tarjeta-metrica">\n            <div class="panel">\n              <div class="panel-heading">\n                <h6>Pacientes recurrentes</h6>\n              </div>\n              <div class="panel-body text-center">\n                <cargando\n                  :cargando="procesando.cargarPacientesRecurrentes"\n                  :mostrar-etiqueta="false"\n                  alto="50px"\n                />\n                <div v-if="!procesando.cargarPacientesRecurrentes" class="metrica">\n                  {{ dashboard.pacientesRecurrentes }}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="tarjeta tarjeta-novedades" v-show="ultimasEntradas.length>0 || anterioresEntradas.length>0">\n          <h3>Novedades de Orión</h3>\n          <div class="tarjeta-icono">\n            <i class="fas fa-eye fa-6" aria-hidden="true"></i>\n          </div>\n        </div>\n        <div style="position: relative">\n          <div class="publicacion">\n            <cargando\n              :cargando="procesando.cargarEntradas"\n              :mostrar-etiqueta="false"\n              alto="50px"\n            />\n\n            <div v-for="entrada in ultimasEntradas" class="semana panel">\n              <div class=\'img\'></div>\n              <div class="panel-heading">\n                <h4> {{ entrada.titulo }} </h4>\n              </div>\n              <div class="panel-body">\n                {{ entrada.descripcion }}\n              </div>\n              <div class="panel-footer">\n                <a class="btn btn-default btn-sm" :href="entrada.enlace" target="_blank">\n                  Ver más\n                </a>\n                &nbsp;<span class="fecha">{{ entrada.fecha }}</span>\n              </div>\n            </div>\n            <div v-for="entrada in anterioresEntradas" class="panel">\n              <div class=\'img\'></div>\n              <div class="panel-heading">\n                <h4> {{ entrada.titulo }} </h4>\n              </div>\n              <div class="panel-body">\n                {{ entrada.descripcion }}\n              </div>\n              <div class="panel-footer">\n                <a class="btn btn-default btn-sm" :href="entrada.enlace" target="_blank">\n                  Ver más\n                </a>\n                &nbsp;<span class="fecha">{{ entrada.fecha }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="tarjeta tarjeta-ayuda">\n          <h3>¿Necesitas ayuda?</h3>\n          <div class="tarjeta-icono">\n            <i class="fas fa-question fa-6" aria-hidden="true"></i>\n          </div>\n\n          <p>Revisa nuestra lista de reproducción en YouTube para...</p>\n          <div class="">\n            \x3c!--a class="btn btn-default btn-lg" href="#" role="button">Configuración</a--\x3e\n            <a class="btn btn-default btn-sm"\n               href="https://www.youtube.com/watch?v=K54qyFXwSeI&list=PLOwFKKdWz5lhhCqAdmlnjr6mtm4H6P2oo"\n               target="_blank">Configuración</a>\n            <a class="btn btn-default btn-sm"\n               href="https://www.youtube.com/watch?v=Mi-Y3O1GXYc&list=PLOwFKKdWz5lj_RTdJq96aJRMt_skaMUgc"\n               target="_blank">Proceso de laboratorio</a>\n            <a class="btn btn-default btn-sm"\n               href="https://www.youtube.com/watch?v=PZk1qyiSH6E&list=PLOwFKKdWz5liILl9Db_4zMV0KxmCTeFqn"\n               target="_blank">Consula de resultados</a>\n            <a class="btn btn-default btn-sm"\n               href="https://youtu.be/ABUh19U7ylc"\n               target="_blank">Pedidos en línea (médicos)</a>\n          </div>\n\n        </div>\n\n      </div>\n      <div class="col-sm-1"></div>\n      <cargando\n        :cargando="procesando.cargarArticulos"\n        :mostrar-etiqueta="false"\n        alto="50px"\n      />\n      <div class="col-sm-3" v-show="articulos.length>0">\n        <div class="tarjeta tarjeta-interes">\n          <h3>Artículos de interés</h3>\n          <div class="tarjeta-icono">\n            <i class="fas fa-coffee fa-6" aria-hidden="true"></i>\n          </div>\n        </div>\n        <div class="articulo">\n\n          <div v-for="entrada in anterioresEntradas" class="panel-oscuro panel">\n            <div class=\'img\'></div>\n            <div class=" panel-heading">\n              <h4> {{ entrada.titulo }} </h4>\n            </div>\n            <div class="panel-body">\n              {{ entrada.descripcion }}\n            </div>\n            <div class="panel-footer">\n              <a class="btn btn-default btn-sm" :href="entrada.enlace" target="_blank">\n                Ver más\n              </a>\n              &nbsp;<span class="fecha">{{ entrada.fecha }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </table>\n  </div>\n</template>\n\n<script>\n  export default {\n    props: {\n      nombreLaboratorio: {type: String},\n      nombresUsuario: {type: String},\n    },\n    data() {\n      return {\n        procesando: {\n          cargarEntradas: false,\n          cargarArticulos: false,\n          cargarCantidadOrdenes: false,\n          cargarPacientesNuevos: false,\n          cargarPacientesRecurrentes: false,\n        },\n        ultimasEntradas: [],\n        anterioresEntradas: [],\n        articulos: [],\n        dashboard: {\n          cantidadOrdenes: \'-\',\n          pacientesNuevos: \'-\',\n          pacientesRecurrentes: \'-\',\n        },\n        fecha: {\n          ano: null,\n          mess: null,\n          etiqueta: \'\',\n        },\n        fechas: []\n      }\n    },\n    created() {\n      this.cargarEntradas();\n      this.cargarArticulos();\n      this.cargarFechas();\n      this.cargarDashboard();\n    },\n    mounted() {\n      Echo.channel(`${this.$cliente.subdominio}.ordenes`)\n        .listen(\'OrdenCreada\', (e) => {\n          this.cargarDashboard(false);\n        });\n    },\n    methods: {\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      cargarFechas() {\n        let fecha = moment();\n        for (let i = 0; i < 10; i++) {\n          this.fechas.push({\n            ano: fecha.year(),\n            mes: fecha.month() + 1,\n            etiqueta: fecha.format(\'yyyy MMMM\'),\n          })\n          fecha = fecha.subtract(1, \'months\');\n        }\n        this.fecha = this.fechas[0];\n      },\n      cargarEntradas() {\n        this.procesando.cargarEntradas = true;\n        axios\n          .get(\'/api/feeds/entradas\')\n          .then(({data: {data}}) => {\n            this.ultimasEntradas = data.ultimas;\n            this.anterioresEntradas = data.anteriores;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar entradas\', errores);\n          })\n          .then(() => this.procesando.cargarEntradas = false);\n      },\n      cargarArticulos() {\n        this.procesando.cargarArticulos = true;\n        axios\n          .get(\'/api/feeds/articulos\')\n          .then(({data: {data}}) => {\n            this.articulos = data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar artículos\', errores);\n          })\n          .then(() => this.procesando.cargarArticulos = false);\n      },\n      cargarDashboard(cache = true) {\n        this.cargarCantidadOrdenes(cache);\n        this.cargarPacientesNuevos(cache);\n        this.cargarPacientesRecurrentes(cache);\n      },\n      cargarCantidadOrdenes(cache = true) {\n        this.procesando.cargarCantidadOrdenes = true;\n\n        axios\n          .get(\'/api/metricas/cantidad-ordenes\', {params: {...this.fecha, cache}})\n          .then(({data: {data}}) => {\n            this.dashboard.cantidadOrdenes = data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar cantidad órdenes\', errores);\n          })\n          .then(() => this.procesando.cargarCantidadOrdenes = false);\n      },\n      cargarPacientesNuevos(cache = true) {\n        this.procesando.cargarPacientesNuevos = true;\n\n        axios\n          .get(\'/api/metricas/pacientes-nuevos\', {params: {...this.fecha, cache}})\n          .then(({data: {data}}) => {\n            this.dashboard.pacientesNuevos = data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar pacientes nuevos\', errores);\n          })\n          .then(() => this.procesando.cargarPacientesNuevos = false);\n      },\n      cargarPacientesRecurrentes(cache = true) {\n        this.procesando.cargarPacientesRecurrentes = true;\n        axios\n          .get(\'/api/metricas/pacientes-recurrentes\', {params: {...this.fecha, cache}})\n          .then(({data: {data}}) => {\n            this.dashboard.pacientesRecurrentes = data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar pacientes recurrentes\', errores);\n          })\n          .then(() => this.procesando.cargarPacientesRecurrentes = false);\n      },\n      cambioFecha() {\n        this.cargarDashboard();\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  h3 {\n    margin-top: 0;\n  }\n\n  .metrica {\n    font-size: xx-large;\n    color: #424f61;\n    font-weight: bolder\n  }\n\n  .tarjeta-metrica > .panel:hover {\n    box-shadow: 3px 3px 5px #cccccc;\n  }\n\n  .tarjeta-metrica h5 {\n    margin: 0;\n  }\n\n  .tarjeta-metrica .panel-heading {\n    padding-bottom: 0;\n  }\n\n  .tarjeta-metrica .panel-body {\n    padding-top: 0;\n  }\n\n  .tarjeta {\n    vertical-align: baseline;\n    min-height: 100px;\n    padding: 20px;\n    box-sizing: border-box;\n    margin: 0 0 20px 0;\n    border-radius: 3px;\n    background-color: #f1a417;\n    color: white;\n    box-shadow: 0 0 3px lightblue;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .tarjeta-icono {\n    font-size: 150px;\n    position: absolute;\n    top: -55px;\n    right: -20px;\n    color: rgba(255, 255, 255, .5)\n  }\n\n  .tarjeta-usuario {\n    background-image: linear-gradient(-20deg, #2b5876 0%, #4e4376 100%);\n  }\n\n  .tarjeta-novedades {\n    background-image: linear-gradient(to right, #3ab5b0 0%, #3d99be 31%, #56317a 100%);\n  }\n\n  .tarjeta-ayuda {\n    background-image: linear-gradient(to right, #3ab5b0 0%, #3d99be 31%, #56317a 100%);\n  }\n\n  .tarjeta-interes {\n    background-image: linear-gradient(to right, #3ab5b0 0%, #3d99be 31%, #56317a 100%);\n  }\n\n  .publicacion {\n    margin-bottom: 20px;\n  }\n\n  .publicacion .panel, .articulo .panel {\n    position: relative;\n  }\n\n  .publicacion .panel {\n    text-align: left;\n    padding: 0px;\n    vertical-align: top;\n    overflow: hidden;\n    position: relative;\n    box-shadow: 0px 0px 2px #dddddd;\n    border: 0;\n    border-left: 8px solid #2e6da4;\n    box-sizing: border-box;\n    width: calc(50% - 10px);\n    margin: 5px;\n    display: inline-block;\n  }\n\n  .publicacion > .panel:hover {\n    margin-left: 4px;\n    margin-right: 6px;\n\n    box-shadow: 3px 3px 5px #cccccc;\n  }\n\n  .publicacion h4 {\n    margin: 0px;\n  }\n\n  .publicacion .fecha, .articulo .fecha {\n    font-style: italic;\n    text-align: right;\n    float: right;\n    padding: 7px 0;\n    font-size: smaller;\n  }\n\n  .publicacion img {\n    height: inherit;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100px;\n  }\n\n  .publicacion .semana {\n    border-left: 8px solid #f1a417;\n  }\n\n  .publicacion .panel .panel-heading {\n    border-radius: 5px 5px 0 0;\n  }\n\n  .publicacion .panel .panel-heading h4 {\n    font-size: small;\n  }\n\n  .publicacion .panel .panel-footer {\n    border-radius: 0 0 5px 5px;\n  }\n\n  .publicacion .panel > * {\n    position: relative;\n    z-index: 10;\n    padding: 5px;\n    background: none;\n    border: none;\n  }\n\n  .articulo .panel > * {\n    position: relative;\n    z-index: 10;\n    padding: 10px;\n  }\n\n  .articulo .img {\n    display: none;\n  }\n\n  .publicacion .panel-body, .articulo .panel-body {\n    text-shadow: 0 0 4px #ffffff;\n    background-color: rgba(255, 255, 255, .5);\n  }\n</style>\n'],sourceRoot:""}]);const n=s},3921:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".hover-examen[data-v-57b5155c]{background-color:#f5f5f5;font-weight:700}","",{version:3,sources:["webpack://./resources/js/components/clientes/cotizaciones/formulario.vue"],names:[],mappings:"AA+sDA,+BAEA,wBAAA,CADA,eAEA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"/>\n    <form method="POST" class="form-horizontal" @submit.prevent="guardar">\n\n      <navbar>\n        <template #titulo>\n          {{ id === \'0\' ? \'Crear Cotización\' : \'Editar Cotización No. \' }}\n          <strong v-show="id !== \'0\'">\n            {{ registro.id }}\n          </strong>\n        </template>\n        <template #opciones>\n          <ul class="nav navbar-nav">\n            <li>\n              <button\n                :id="id === \'0\'?\'crearCotizacion\':\'actualizarCotizacion\'"\n                type="submit"\n                class="btn btn-primary"\n                :disabled="errorEnTarifas || errorEnCotizacion">\n                <i class="fas fa-save fa-fw"/>&nbsp;Guardar\n              </button>\n            </li>\n            <li>\n              <button type="button" class="btn btn-default" @click="imprimirPdfAlEditar" v-if="id !== \'0\'"\n                      :disabled="!permisos.imprimirCotizaciones">\n                <i class="fas fa-print fa-fw"></i>&nbsp;Imprimir\n              </button>\n            </li>\n            <li>\n              <a class="btn btn-default" @click="regresar">Regresar</a>\n            </li>\n          </ul>\n        </template>\n      </navbar>\n\n      <fieldset disabled>\n        <div class="form-group">\n          <div class="col-sm-3" v-if="id === \'0\'">\n            <label for="identificacion" class="control-label"\n                   :class="{obligatorio: registro.paciente_type !== \'App\\\\Models\\\\PacienteAnimal\'}">\n              Identificación paciente</label>\n            <div class="input-group">\n              <input\n                id="identificacion"\n                type="text"\n                class="form-control input-sm"\n                maxlength="25"\n                v-model="registro.paciente_identificacion"\n                @blur="autocompletarPaciente"\n                @keydown.enter.prevent="focusSiguiente(\'crearPaciente\')"\n                autocomplete="off"\n                :disabled="id !== \'0\'"\n                :required="registro.paciente_type !== \'App\\\\Models\\\\PacienteAnimal\'">\n              <div class="input-group-btn">\n                <button\n                  class="btn btn-sm btn-default hidden-md hidden-lg"\n                  type="button"\n                  @click="autocompletarPaciente"\n                  data-toggle="tooltip"\n                  title="Autocompletar"\n                  :disabled="id !== \'0\'">\n                  <i class="fas fa-user-check fa-fw"></i>\n                </button>\n                <button\n                  id="crearPaciente"\n                  class="btn btn-sm btn-default" type="button" @click="abrirModalCrearPaciente"\n                  title="Crear Paciente" :disabled="id !== \'0\'">\n                  <i class="fas fa-plus" aria-hidden="true"/>\n                </button>\n                <button class="btn btn-sm btn-default" type="button" @click="abrirModalEditarPaciente"\n                        title="Editar Paciente" :disabled="id !== \'0\' || !registro.paciente_id">\n                  <i class="fas fa-pencil-alt" aria-hidden="true"/>\n                </button>\n                <button type="button" class="btn btn-sm btn-primary"\n                        @click="abrirPacienteSinBusqueda"\n                        title="Buscar Paciente" :disabled="id !== \'0\'">\n                  <i class="fas fa-search" aria-hidden="true"/>\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div :class="id === \'0\'?\'col-sm-9\':\'col-sm-12\'">\n            <label class="control-label" for="paciente_nombre" v-show="registro.paciente_type">\n              {{ etiquetaDatosPaciente }}\n            </label>\n            <i\n              v-show="cargandoPaciente"\n              style="margin-top: 36px"\n              class="fas fa-spinner fa-spin fa-fw"\n              aria-hidden="true"\n              title="Obteniendo datos de persona"/>\n            <div id="paciente_nombre" v-show="registro.paciente_nombre">\n              <i class="fas fa-user fa-lg" v-show="esHumano"></i>\n              <i class="fas fa-paw fa-lg" v-show="esAnimal"></i>\n              <i class="fas fa-flask fa-lg" v-show="esObjeto"></i>\n              <span class="paciente">{{ registro.paciente_nombre }}</span>\n              &nbsp;\n              <span v-show="esAnimal && registro.paciente_taxonomia" class="no-salto-linea" title="Raza">\n                <i class="fas fa-sitemap fa-lg"></i>\n                {{ registro.paciente_taxonomia }}\n                &nbsp;\n              </span>\n              <span v-show="id !== \'0\'" class="no-salto-linea">\n                <i class="far fa-id-card fa-lg"></i>\n                {{ registro.paciente_identificacion }}\n                &nbsp;\n              </span>\n              <span v-show="esHumano || esAnimal" class="no-salto-linea">\n                <i class="fas fa-birthday-cake fa-lg"></i>\n                {{ registro.paciente_fecha_nacimiento }} ({{ obtenerEdad(registro.paciente_fecha_nacimiento) }})\n                &nbsp;\n              </span>\n              <span v-show="registro.paciente_sexo" class="no-salto-linea">\n                <i class="fas fa-mars fa-lg" v-show="registro.paciente_sexo === \'M\'"></i>\n                <i class="fas fa-venus fa-lg" v-show="registro.paciente_sexo === \'F\'"></i>\n                {{ registro.paciente_sexo === \'M\' ? \'Masculino\' : \'Femenino\' }}\n                &nbsp;\n              </span>\n              <span v-show="registro.paciente_numero_poliza" class="no-salto-linea" title="Número de poliza">\n                <i class="fas fa-user-shield fa-lg" title="Número de poliza"></i>\n                {{ registro.paciente_numero_poliza }}\n                &nbsp;\n              </span>\n              <span v-if="(esAnimal || esObjeto) && registro.paciente_dueno_responsable" class="no-salto-linea">\n                <i class="fas fa-user-tie fa-lg" title="Dueño"></i>\n                {{ registro.paciente_dueno_responsable }}\n                &nbsp;\n              </span>\n\n              <span v-show="registro.paciente_telefono" class="no-salto-linea">\n                <i class="fas fa-mobile-alt fa-lg"></i>\n                {{ registro.paciente_telefono }}\n                &nbsp;\n              </span>\n              <span v-show="registro.paciente_correo" class="no-salto-linea">\n                <i class="fas fa-envelope fa-lg"></i>\n                {{ registro.paciente_correo }}\n                &nbsp;\n              </span>\n              <span v-show="registro.paciente_direccion" class="no-salto-linea">\n                <i class="fas fa-map-marked-alt fa-lg"></i>\n                {{ registro.paciente_direccion }}\n                &nbsp;\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-sm-3">\n            <label for="empresa"\n                   class="control-label obligatorio">Cliente</label>\n            <select class="form-control input-sm" id="empresa" name="empresa"\n                    :disabled="!permisos.cambiarEmpresas"\n                    v-model="empresa" @change="cargarSubempresa(true)"\n                    required>\n              <option value="">Seleccione...</option>\n              <option v-for="empresa in empresas" :value="empresa">\n                {{ empresa.nombre }}\n                <div v-if="empresa.estado === \'N\'">\n                  (Inactiva)\n                </div>\n              </option>\n            </select>\n          </div>\n\n          <div class="col-sm-2">\n            <label for="subempresa_id" class="control-label obligatorio">Categoría</label>\n            <select class="form-control input-sm" id="subempresa_id" name="subempresa_id"\n                    v-model="registro.subempresa_id" @change="cargarExamenes(true, true)" required>\n              <option value="">Seleccione...</option>\n              <option v-for="subempresa in subempresas" :value="subempresa.id">\n                {{ subempresa.nombre }}\n              </option>\n            </select>\n          </div>\n\n          <div class="col-sm-3">\n            <label for="medico_nombre" class="control-label">\n              Médico\n              <i\n                v-show="cargandoMedico"\n                class="fas fa-spinner fa-spin fa-fw"\n                aria-hidden="true"\n                title="Cargando médico"/>\n              <i class="fas fa-check-circle" data-toggle="tooltip"\n                 title="Médico seleccionado"\n                 v-show="registro.medico_id"/>\n            </label>\n            <div class="input-group">\n              <input type="text" class="form-control input-sm" id="medico_nombre"\n                     maxlength="15" placeholder="Buscar médico" autocomplete="off"\n                     v-model="registro.medico_nombre"\n                     @blur="autocompletarMedico"\n                     @keydown.enter.prevent="focusSiguiente(\'crearMedico\')">\n              <div class="input-group-btn">\n                <button\n                  id="crearMedico"\n                  type="button"\n                  class="btn btn-sm btn-default"\n                  title="Crear"\n                  @click="abrirModalGestionarMedico">\n                  <i class="fas fa-plus" aria-hidden="true"></i>\n                </button>\n                <button class="btn btn-sm btn-primary" type="button" title="Búsqueda"\n                        @click="buscarMedico">\n                  <i class="fas fa-search" aria-hidden="true"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div class="col-sm-2">\n            <label for="fecha" class="control-label obligatorio">Fecha cotización</label>\n            <input\n              id="fecha"\n              class="form-control input-sm cursor-menu"\n              data-provide="datepicker"\n              data-date-format="yyyy-mm-dd"\n              data-date-today-highlight="true"\n              data-date-autoclose="true"\n              data-date-language="es"\n              placeholder="aaaa-mm-dd"\n              v-date="registro.fecha"\n              @keydown.enter.prevent=""\n              required/>\n          </div>\n\n          <div class="col-sm-2">\n            <label for="fecha" class="control-label">Fecha de turno</label>\n            <input\n              id="fecha_turno"\n              class="form-control input-sm cursor-menu"\n              data-provide="datepicker"\n              data-date-format="yyyy-mm-dd"\n              data-date-today-highlight="true"\n              data-date-autoclose="true"\n              data-date-language="es"\n              data-date-start-date="0d"\n              placeholder="aaaa-mm-dd"\n              @keydown.enter.prevent=""\n              v-date="registro.fecha_turno"/>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-sm-3">\n            <label for="plan_salud_id" class="control-label">Plan salud</label>\n            <select class="form-control input-sm" id="plan_salud_id" name="plan_salud_id"\n                    v-model="registro.plan_salud_id">\n              <option value="">Seleccione...</option>\n              <option v-for="planSalud in planesSalud" :value="planSalud.id">{{ planSalud.nombre }}\n              </option>\n            </select>\n          </div>\n          <div class="col-sm-9">\n            <label for="comentario" class="control-label">Comentario</label>\n            <textarea class="form-control input-sm resize-vertical" rows="1" id="comentario"\n                      @keydown.enter.prevent=""\n                      name="comentario" v-model="registro.comentario"/>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset disabled style="margin-top: 10px">\n        <div class="row" v-show="!errorEnTarifas">\n          <div class="col-md-10">\n            <legend class="obligatorio">Exámenes</legend>\n          </div>\n          <div class="col-md-2 hidden-xs hidden-sm">\n            <legend class="legend">Totales</legend>\n          </div>\n          <div class="col-md-4" v-if="!cargandoExamenes">\n            <div style="height: 340px; overflow: auto; margin-bottom: 12px">\n              <table class="table table-striped table-bordered table-hover table-condensed">\n                <thead>\n                <tr>\n                  <td class="text-left sticky-top" colspan="2" style="padding-left: 0">\n                    <div class="col-xs-6" style="padding-left: 0">\n                      <input\n                        type="text"\n                        id="buscarExamen"\n                        ref="buscarExamen"\n                        class="form-control input-sm"\n                        placeholder="Buscar examen"\n                        autocomplete="off"\n                        v-model="cadenaBusquedaExamenes"\n                        @keydown.down.prevent="siguienteExamen(-1)"\n                        @keydown.enter.prevent="autocompletarExamen"/>\n                    </div>\n                    <div class="col-xs-6 pull-right" style="padding-right: 0">\n                      <v-select\n                        id="perfiles"\n                        :tabindex="-1"\n                        :disabled="this.grupos.length===0"\n                        placeholder="Perfil"\n                        class="form-control input-sm"\n                        :options="grupos"\n                        v-model="grupoId"\n                        label="nombre"\n                        :clearable="false"\n                        :reduce="opcion => opcion.id"\n                        :loading="cargandoPerfiles"\n                        @input="cargarExamenesPorGrupo">\n                        <template #no-options>No existen coincidencias</template>\n                        <template #spinner="{ loading }">\n                          <div v-show="loading">\n                            <i class="fas fa-spinner fa-spin fa-fw"/>\n                          </div>\n                        </template>\n                      </v-select>\n                    </div>\n                  </td>\n                </tr>\n                </thead>\n                <tbody>\n                <template v-for="(examenTarifa, indice) in examenesFiltrados">\n                  <tr :class="{\'hover-examen\': indice === indiceExamen}" @mouseover="mouseSobreExamen">\n                    <td class="col-xs-11 col-sm-11 text-left cortar-texto">\n                      <div :title="examenTarifa.examen.nombre">\n                        {{ examenTarifa.examen.codigo }} - {{ examenTarifa.examen.nombre }}\n                      </div>\n                    </td>\n                    <td class="col-sm-1 text-center">\n                      <button\n                        :id="\'examen-\'+indice"\n                        type="button"\n                        class="btn btn-primary btn-xs"\n                        title="Agregar examen"\n                        @keydown.up.prevent="anteriorExamen(indice)"\n                        @keydown.down.prevent="siguienteExamen(indice)"\n                        @keydown.enter="$event.stopPropagation()"\n                        @click="agregarExamen(examenTarifa)">\n                        <i class="fas fa-plus"></i>\n                      </button>\n                    </td>\n                  </tr>\n                </template>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <div class="col-md-6" v-if="!cargandoExamenes">\n            <div id="examenes-seleccioandos" style="height: 340px; overflow: auto">\n              <div v-if="detallesCotizaciones.length === 0" class="text-center" style="padding-top: 30px">\n                No existen exámenes seleccionados\n              </div>\n              <table\n                v-show="detallesCotizaciones.length > 0"\n                class="table table-striped table-bordered table-hover table-condensed">\n                <thead>\n                <tr>\n                  <td class="sticky-top" style="padding-left: 0">\n                    <input\n                      type="text"\n                      class="form-control input-sm col-sm-3"\n                      placeholder="Buscar examen seleccionado"\n                      v-model="cadenaBusquedaDetalles"/>\n                  </td>\n                  <th class="col-sm-2 text-center sticky-top">Valor</th>\n                  <th class="col-sm-1 text-center sticky-top">\n                    <button class="btn btn-xs btn-default" type="button" title="Eliminar todos los exámenes"\n                            v-show="detallesCotizaciones.length > 0"\n                            @click="eliminarDetalles"><i class="fas fa-trash" aria-hidden="true"></i></button>\n                  </th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr v-if="detallesCotizaciones.length === 0">\n                  <td colspan="4" class="text-center">No existen exámenes seleccionados</td>\n                </tr>\n                <tr v-for="detalle in detallesCotizacionesFiltrados">\n                  <td class="text-left">\n                    {{ detalle.examen.codigo }} - {{ detalle.examen.nombre }}\n                    <i\n                      v-show="detalle.examen.condiciones_preanaliticas"\n                      class="fas fa-exclamation-circle fa-sm"\n                      style="padding-left: 4px"\n                      data-toggle="popover"\n                      data-html="true"\n                      data-placement="top"\n                      title="Condiciones preanalíticas"\n                      :data-content="tituloCondicionesPreanaliticas(detalle.examen)"\n                    />\n                  </td>\n                  <td class="text-right centrado-vertical">\n                    <input\n                      type="number"\n                      class="form-control input-sm currency text-right"\n                      v-model="detalle.valor"\n                      min="0"\n                      step="0.01"\n                      :disabled="!cambio_precio"\n                      @keydown.enter.prevent=""\n                      @keyup="validarValor(detalle)"\n                      @keydown.tab="valorDetalleKeyTab(detalle)">\n                  </td>\n                  <td class="text-center centrado-vertical">\n                    <div class="btn-group" role="group" aria-label="...">\n                      <button type="button" class="btn btn-default btn-xs" title="Eliminar examen"\n                              @click="eliminarDetalle(detalle)">\n                        <i class="fas fa-trash" aria-hidden="true"></i>\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n          <div class="col-md-2" v-if="!cargandoExamenes">\n\n            <div class="form-group">\n              <div class="hidden-md hidden-lg" style="padding-left: 10px; margin-top: 15px">\n                <legend class="legend">\n                  Totales\n                </legend>\n              </div>\n\n              <div class="col-md-6">\n                <label for="subtotal" class="control-label text-left">Subtotal</label>\n              </div>\n              <div class="col-md-6 text-right ">\n                <div id="subtotal" class="text-right valor">\n                  {{ valorSubtotal | moneda }}\n                </div>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <div class="col-md-6">\n                <label for="porcentaje_descuento" class="control-label text-left no-salto-linea">% Descuento</label>\n              </div>\n              <div class="col-md-6 text-right">\n                <input\n                  id="porcentaje_descuento"\n                  type="number" step="0.01" class="form-control input-sm text-right"\n                  v-model.number="porcentaje_descuento" min="0" max="100"\n                  @keydown.enter.prevent="focusSiguiente(\'valor_descuento\')"\n                  @keyup="porcentajeDescuentoKeyup"\n                  @blur="formatearPorcentajeDescuento"\n                  :disabled="!permitir_descuento || detallesCotizaciones.length === 0"\n                />\n              </div>\n            </div>\n\n            <div class="form-group">\n              <div class="col-md-6">\n                <label for="valor_descuento" class="control-label text-left">Descuento</label>\n              </div>\n              <div class="col-md-6">\n                <input\n                  id="valor_descuento"\n                  type="number" step="0.01" class="form-control input-sm currency text-right"\n                  min="0"\n                  v-model="registro.valor_descuento"\n                  @keydown.enter.prevent="focusSiguiente(\'porcentaje_recargo\')"\n                  @keyup="valorDescuentoKeyup"\n                  @blur="formatearValorDescuento"\n                  :disabled="!permitir_descuento || detallesCotizaciones.length === 0"/>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <div class="col-md-6">\n                <label for="porcentaje_recargo" class="control-label text-left no-salto-linea">% Recargo</label>\n              </div>\n              <div class="col-md-6">\n                <input\n                  id="porcentaje_recargo"\n                  type="number"\n                  step="0.01"\n                  class="form-control input-sm currency text-right"\n                  min="0"\n                  v-model="porcentajeRecargo"\n                  @keydown.enter.prevent="focusSiguiente(\'valor_recargo\')"\n                  @keyup="porcentajeRecargoKeyup"\n                  @blur="formatearPorcentajeRecargo"\n                  :disabled="!permitir_descuento || detallesCotizaciones.length === 0"/>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <div class="col-md-6">\n                <label for="valor_recargo" class="control-label text-left">Recargo</label>\n              </div>\n              <div class="col-md-6">\n                <input\n                  id="valor_recargo"\n                  type="number"\n                  step="0.01"\n                  class="form-control input-sm currency text-right"\n                  min="0"\n                  v-model="registro.valor_recargo"\n                  @keydown.enter.prevent="focusSiguiente(\'valor_domicilio\')"\n                  @keyup="valorRecargoKeyup"\n                  @blur="formatearValorRecargo"\n                  :disabled="!permitir_descuento || detallesCotizaciones.length === 0"/>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <div class="col-md-6">\n                <label for="valor_domicilio" class="control-label text-left">Domicilio</label>\n              </div>\n              <div class="col-md-6">\n                <input\n                  id="valor_domicilio"\n                  class="form-control input-sm currency text-right"\n                  type="number"\n                  step="0.01"\n                  min="0"\n                  v-model="registro.valor_domicilio"\n                  @keydown.enter.prevent=""\n                  @keyup="valorDomicilioKeyup"\n                  @blur="formatearValorDomicilio"\n                  :disabled="detallesCotizaciones.length === 0"/>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <div class="col-md-5">\n                <label for="valor_total" class="control-label text-left no-salto-linea">Valor Total</label>\n              </div>\n              <div class="col-md-7">\n                <output id="valor_total" class="text-right valor-total">{{ $cliente.moneda }} {{\n                    valorTotalCalculado\n                  }}\n                </output>\n              </div>\n            </div>\n\n          </div>\n          <div id="cargandoExamenes" class="col-md-12" v-if="cargandoExamenes">\n            <div class="panel-body text-center">\n              <h4>\n                <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>Cargando...\n              </h4>\n            </div>\n          </div>\n        </div>\n      </fieldset>\n\n      <hr v-show="examenes.length > 0 || cargandoExamenes"/>\n    </form>\n\n    <gestionar-paciente-modal\n      :id-sistema-externo="$usuario.sistemaHisId"\n      @paciente-humano-guardado="pacienteHumanoGuardado"\n      @paciente-animal-guardado="pacienteAnimalGuardado"\n      @sujeto-objeto-guardado="sujetoObjetoGuardado"/>\n\n    <buscar-paciente-modal @paciente-seleccionado="pacienteSeleccionado"/>\n\n    <gestionar-medico-modal @medico-creado="medicoCreado"/>\n\n    <buscar-medico-modal\n      @medico-seleccionado="medicoSeleccionado">\n    </buscar-medico-modal>\n\n    <cargando-modal ref="cargando"></cargando-modal>\n  </div>\n</template>\n\n<script>\n  import BuscarMedicoModal from "../modals/BuscarMedicoModal";\n  import GestionarMedicoModal from "../modals/GestionarMedicoModal";\n  import {crearBotonConData, escaparRegex} from "../../../support/util";\n  import BuscarPacienteModal from "../modals/BuscarPacienteModal";\n  import GestionarPacienteModal from "../modals/GestionarPacienteModal";\n\n  export default {\n    components: {\n      BuscarMedicoModal,\n      GestionarMedicoModal,\n      BuscarPacienteModal,\n      GestionarPacienteModal\n    },\n    props: [\'id\', \'permisos\'],\n    data() {\n      return {\n        indiceExamen: null,\n        cargandoPaciente: false,\n        cargandoMedico: false,\n        errorEnTarifas: false,\n        errorEnCotizacion: false,\n        cargandoExamenes: false,\n        cargandoPerfiles: false,\n        cadenaBusqueda: \'\',\n        cadenaBusquedaExamenes: \'\',\n        cadenaBusquedaDetalles: \'\',\n        porcentajeRecargo: 0,\n        porcentaje_descuento: 0,\n        permitir_descuento: true,\n        cambio_precio: true,\n        empresaPorDefectoId: \'\',\n        descuentoPorPorcentaje: false,\n        recargoPorPorcentaje: false,\n        grupoId: \'\',\n        empresa: \'\',\n        registro: {\n          id: this.id,\n          sucursal_id: \'\',\n          fecha: \'\',\n          fecha_turno: \'\',\n          plan_salud_id: \'\',\n          paciente_id: \'\',\n          paciente_identificacion: \'\',\n          paciente_tipo: \'\',\n          paciente_type: \'\',\n          paciente_nombre: \'\',\n          paciente_taxonomia: \'\',\n          paciente_fecha_nacimiento: \'\',\n          paciente_sexo: \'\',\n          paciente_correo: \'\',\n          paciente_direccion: \'\',\n          paciente_telefono: \'\',\n          paciente_numero_poliza: \'\',\n          paciente_dueno_responsable: \'\',\n          medico_id: \'\',\n          medico_nombre: \'\',\n          subempresa_id: \'\',\n          embarazada: false,\n          valor_descuento: 0,\n          valor_recargo: 0,\n          valor_domicilio: 0,\n          valor_total: \'\',\n          grupo_id: \'\',\n          comentario: \'\'\n        },\n        detallesCotizaciones: [],\n        sucursales: [],\n        empresas: [],\n        subempresas: [],\n        examenes: [],\n        grupos: [],\n        detallesGrupos: [],\n        planesSalud: [],\n        sexos: [\n          {id: \'A\', nombre: \'Ambos Sexos\'},\n          {id: \'F\', nombre: \'Femenino\'},\n          {id: \'M\', nombre: \'Masculino\'},\n        ],\n        count: 0,\n        pagina: 1,\n      }\n    },\n    mounted() {\n      $(\'body\').popover({\n        selector: \'[data-toggle="popover"]\',\n        container: \'body\',\n        trigger: \'hover\'\n      });\n\n      this.cargarDatos();\n    },\n    methods: {\n      limpiarCadenaBusqueda() {\n        this.cadenaBusqueda = \'\';\n      },\n      limpiarCadenaBusquedaExamenes() {\n        this.cadenaBusquedaExamenes = \'\';\n      },\n      limpiarCadenaBusquedaDetalles() {\n        this.cadenaBusquedaDetalles = \'\';\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      mostrarAdvertencia(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      mostrarInformativo(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'info\', mensaje, errores);\n      },\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      ocultarMensajes() {\n        this.$refs.alerta.ocultarAlertas();\n      },\n      alternarCamposFormulario() {\n        $(\'fieldset\').attr(\'disabled\') === \'disabled\' ? $(\'fieldset\').removeAttr(\'disabled\') : $(\'fieldset\').attr(\'disabled\', \'disabled\');\n      },\n      cargarDatos() {\n        this.errorEnCotizacion = false;\n        this.$refs.cargando.alternar();\n\n        if (this.id !== \'0\') {\n          axios\n            .get(`/api/cotizaciones/${this.id}/edit`)\n            .then(({data: {data}}) => {\n              this.editar(data);\n              this.alternarCamposFormulario();\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al cargar cotizacion!\', errores);\n            })\n            .then(() => this.$refs.cargando.alternar());\n\n        } else {\n          axios\n            .get(\'/api/cotizaciones/create\')\n            .then(({data: {data}}) => {\n              this.crear(data);\n              this.alternarCamposFormulario();\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al cargar cotizacion\', errores);\n            })\n            .then(() => this.$refs.cargando.alternar());\n        }\n      },\n      crear(response) {\n        this.errorEnTarifas = false;\n        this.porcentaje_descuento = 0;\n        this.grupos = response.grupos;\n        this.empresas = response.empresas;\n        this.planesSalud = response.planesSalud;\n        this.registro.sucursal_id = response.sucursal_id;\n        this.registro.usuario_ingresa = response.usuario_id;\n        this.registro.usuario_modifica = response.usuario_id;\n        this.registro.fecha = moment().format(\'YYYY-MM-DD\');\n        this.permitir_descuento = response.permisos.generarDescuento;\n        if (response.empresaPorDefectoId != null) {\n          this.ocultarMensajes();\n          this.empresaPorDefectoId = response.empresaPorDefectoId;\n          const empresa = this.obtenerEmpresa(this.empresaPorDefectoId);\n          if (empresa) {\n            this.empresa = empresa;\n            this.subempresas = this.empresa.subempresas;\n            this.cambio_precio = this.empresa.cambio_precio;\n            this.permitir_descuento = this.permitir_descuento && this.empresa.permitir_descuento;\n          } else {\n            this.examenes = [];\n            this.detallesCotizaciones = [];\n            this.registro.empresa_id = \'\';\n            this.registro.subempresa_id = \'\';\n            this.mostrarAdvertencia(\'El cliente por defecto tiene estado "Inactivo", no se puede seleccionar\');\n            return;\n          }\n          const subempresaMatriz = this.obtenerSubempresaMatriz();\n          if (subempresaMatriz != null) {\n            this.registro.subempresa_id = subempresaMatriz.id;\n\n            if (subempresaMatriz.porcentaje_descuento) {\n              this.porcentaje_descuento = subempresaMatriz.porcentaje_descuento;\n              this.descuentoPorPorcentaje = true;\n            }\n\n            if (!subempresaMatriz.tarifa_venta_id) {\n              this.errorEnTarifas = true;\n              this.mostrarAdvertencia(\'No se ha definido tarifa para la categoría seleccionada\');\n            } else {\n              this.examenes = response.examenesTarifa;\n              if (_.isEmpty(this.examenes)) {\n                this.errorEnTarifas = true;\n                this.mostrarAdvertencia(\'No se ha definido tarifa para los exámenes de la categoría seleccionada\');\n              }\n            }\n          }\n        }\n      },\n      editar(response) {\n        this.grupos = response.grupos;\n        this.empresas = response.empresas;\n        this.planesSalud = response.planesSalud;\n\n        response.cotizacion.fecha = this.fechaALocal(response.cotizacion.fecha, \'YYYY-MM-DD\');\n\n        if (!response.cotizacion.medico_id) {\n          response.cotizacion.medico_id = \'\';\n        }\n        response.cotizacion.medico_nombre = \'\';\n\n        if (!response.cotizacion.plan_salud_id) {\n          response.cotizacion.plan_salud_id = \'\';\n        }\n\n        this.registro = response.cotizacion;\n\n        if (this.registro.subempresa.empresa.estado === \'N\') {\n          this.errorEnCotizacion = true;\n          this.empresas.push(this.registro.subempresa.empresa);\n          this.mostrarErrores(\'¡Error!\', \'Cliente con estado "Inactivo"\');\n        }\n\n        this.cambio_precio = this.registro.subempresa.empresa.cambio_precio;\n        this.permitir_descuento = response.permisos.generarDescuento && this.registro.subempresa.empresa.permitir_descuento;\n        this.examenes = response.examenesTarifa;\n        this.empresa = this.obtenerEmpresa(this.registro.subempresa.empresa.id);\n        this.subempresas = this.empresa.subempresas;\n        this.porcentaje_descuento = 0;\n        this.registro.paciente_identificacion = this.registro.paciente.numero_identificacion;\n        this.registro.paciente_sexo = this.registro.paciente.sexo;\n        this.registro.paciente_correo = this.registro.paciente.correo;\n        this.registro.paciente_direccion = this.registro.paciente.direccion;\n        this.registro.paciente_telefono = this.registro.paciente.telefono_celular;\n\n        if (this.registro.es_humano) {\n          this.registro.paciente_tipo = this.registro.paciente.tipo_identificacion;\n          this.registro.paciente_nombre = this.registro.paciente.nombre_paciente;\n          this.registro.paciente_direccion = this.registro.paciente.direccion_completa;\n          this.registro.paciente_numero_poliza = this.registro.paciente.numero_poliza;\n          this.registro.paciente_fecha_nacimiento = this.registro.paciente.fecha_nacimiento;\n        }\n\n        if (this.registro.es_animal) {\n          const paciente = this.registro.paciente;\n          this.registro.paciente_nombre = paciente.nombre_paciente;\n          this.registro.paciente_taxonomia = `${paciente.raza.padre.nombre} - ${paciente.raza.nombre}`;\n          this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n          this.cargarDuenoResponsable(this.registro.paciente_type, paciente);\n        }\n\n        if (this.registro.es_objeto) {\n          this.registro.paciente_nombre = this.registro.paciente.descripcion;\n          this.cargarDuenoResponsable(this.registro.paciente_type, this.registro.paciente);\n        }\n\n        if (this.registro.medico) {\n          this.registro.medico_nombre = this.registro.medico.nombre_completo;\n        }\n        this.registro.usuario_modifica = response.usuario_id;\n        this.registro.comentario = response.cotizacion.comentario;\n        this.registro.valor_domicilio = response.cotizacion.valor_domicilio;\n\n        this.detallesCotizaciones = this.registro.detalles_cotizaciones.map(function (p) {\n          return {\n            id: p.id,\n            examen_id: p.examen.id,\n            examen: p.examen,\n            valor: Number(p.valor).toFixed(2),\n          }\n        });\n\n        this.calcularPorcentajeDescuento();\n        this.calcularPorcentajeRecargo();\n\n        this.detalles_cotizaciones = [];\n      },\n      cargarExamenes(mostrarCargando, cerrarCargando) {\n        this.errorEnTarifas = false;\n        this.examenes = [];\n        if (!this.registro.subempresa_id || this.registro.subempresa_id === \'\') {\n          return;\n        }\n        if (this.empresa.subempresas.length === 0) {\n          return;\n        }\n        let subempresaId = this.registro.subempresa_id;\n        let subempresa = this.empresa.subempresas.find(function (p) {\n          return p.id === subempresaId;\n        });\n\n        if (!subempresa) {\n          if (!mostrarCargando) {\n            this.cargandoExamenes = false;\n          }\n          return;\n        }\n\n        if (!subempresa.tarifa_venta_id) {\n          this.errorEnTarifas = true;\n          this.mostrarAdvertencia("¡No se ha definido tarifa para la categoría seleccionada!");\n          if (!mostrarCargando) {\n            this.cargandoExamenes = false;\n          }\n          return;\n        }\n\n        if (mostrarCargando) {\n          this.cargandoExamenes = true;\n        }\n\n        if (subempresa.porcentaje_descuento) {\n          this.porcentaje_descuento = subempresa.porcentaje_descuento;\n          this.descuentoPorPorcentaje = true;\n        } else {\n          this.porcentaje_descuento = 0;\n          this.registro.valor_descuento = 0;\n        }\n\n        axios\n          .get(`/api/examenes-tarifas?tarifaId=${subempresa.tarifa_venta_id}`)\n          .then(({data: {data}}) => {\n            this.examenes = data;\n\n            if (_.isEmpty(this.examenes)) {\n              this.errorEnTarifas = true;\n              this.mostrarAdvertencia("¡No se ha definido tarifa para los exámenes de la categoría seleccionada!");\n            } else {\n              let that = this;\n              this.detallesCotizaciones.forEach(function (detalle) {\n                let temp = that.examenes.find(function (examen) {\n                    let iguales = examen.examen_id === detalle.examen_id;\n\n                    if (iguales) {\n                      detalle.valor = Number(examen.valor).toFixed(2);\n                    }\n                    return iguales;\n                  }\n                );\n\n                if (!temp) {\n                  const indice = that.detallesCotizaciones.indexOf(detalle);\n                  that.detallesCotizaciones.splice(indice, 1);\n                }\n              });\n              this.porcentajeDescuentoKeyup(null);\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al obtener exámenes\', errores);\n          })\n          .then(() => {\n            if (cerrarCargando) {\n              this.cargandoExamenes = false;\n            }\n          });\n      },\n      cargarExamenesPorGrupo(grupoId) {\n        this.grupoId = \'\';\n\n        this.ocultarMensajes();\n        if (grupoId === \'\') {\n          return;\n        }\n\n        if (!this.registro.subempresa_id) {\n          this.mostrarAdvertencia(\'No se ha seleccionado una "Categoría"\');\n          return;\n        }\n\n        if (this.examenes.length === 0) {\n          this.mostrarAdvertencia(\'No existen "Exámenes" disponibles\');\n          return;\n        }\n\n        this.cargandoPerfiles = true;\n\n        axios\n          .get(\'/api/detalles-grupos?cadenaBusqueda=\' + grupoId)\n          .then(({data: {data}}) => {\n            this.detallesGrupos = data;\n\n            if (this.detallesGrupos.length === 0) {\n              this.mostrarAdvertencia(\'No existen exámenes definidos para este grupo\');\n              return;\n            }\n\n            let agregados = 0;\n\n            for (let examen of this.examenes) {\n              for (let detalleGrupo of this.detallesGrupos) {\n                if (examen.examen_id === detalleGrupo.examen_id) {\n                  const examenesExistentes = this.detallesCotizaciones.reduce((contador, {examen_id}) => examen_id === examen.examen_id ? contador += 1 : contador, 0);\n                  if (examenesExistentes === 0) {\n                    this.agregarExamen(examen);\n                    agregados++;\n                  }\n                }\n              }\n            }\n\n            if (agregados > 0) {\n              const grupo = this.grupos.find(grupo => grupo.id === grupoId);\n              this.mostrarExito(`Examenes de perfil <strong>${grupo.nombre}</strong> agregados`);\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al cargar los exámenes por grupo!\', errores);\n          })\n          .then(() => this.cargandoPerfiles = false);\n\n      },\n      autocompletarExamen() {\n        if (this.examenesFiltrados.length === 1) {\n          this.agregarExamen(this.examenesFiltrados[0]);\n        }\n      },\n      agregarExamen(examenTarifa) {\n        this.ocultarMensajes();\n\n        if (this.registro.fecha === \'\') {\n          this.mostrarErrores(\'¡Error!\', \'Campo "Fecha" no puede ser vacío\');\n          return;\n        }\n\n        let detalleCotizacion = {};\n\n        detalleCotizacion.examen_id = examenTarifa.examen.id;\n        detalleCotizacion.examen = examenTarifa.examen;\n        detalleCotizacion.valor = Number(examenTarifa.valor).toFixed(2);\n\n        let existeExamen = this.buscarSiExisteExamen(examenTarifa.examen.id);\n        if (!existeExamen) {\n          this.$refs.buscarExamen.focus();\n          this.$refs.buscarExamen.select();\n          this.indiceExamen = null;\n\n          this.detallesCotizaciones.push(detalleCotizacion);\n\n          setTimeout(() => {\n            const element = document.getElementById("examenes-seleccioandos");\n            element.scrollTop = element.scrollHeight;\n          }, 100);\n\n          if (this.descuentoPorPorcentaje) {\n            this.porcentajeDescuentoKeyup(null);\n          } else {\n            this.valorDescuentoKeyup(null);\n          }\n\n          if (this.recargoPorPorcentaje) {\n            this.porcentajeRecargoKeyup(null);\n          } else {\n            this.valorRecargoKeyup(null);\n          }\n        }\n      },\n      buscarSiExisteExamen(idExamen) {\n        const resultado = this.detallesCotizaciones.filter(function (detalle) {\n          if (detalle.examen_id === idExamen) return detalle.examen_id;\n        });\n        let existe = false;\n        if (resultado.length > 0) {\n          existe = true;\n        }\n        return existe;\n      },\n      eliminarDetalle(detalle) {\n        let indice = this.detallesCotizaciones.indexOf(detalle);\n        this.detallesCotizaciones.splice(indice, 1);\n\n        if (_.isEmpty(this.detallesCotizaciones)) {\n          this.porcentaje_descuento = 0;\n          this.registro.valor_descuento = 0;\n        } else {\n          if (this.descuentoPorPorcentaje) {\n            this.porcentajeDescuentoKeyup(null);\n          } else {\n            this.valorDescuentoKeyup(null);\n          }\n\n          if (this.recargoPorPorcentaje) {\n            this.porcentajeRecargoKeyup(null);\n          } else {\n            this.valorRecargoKeyup(null);\n          }\n        }\n      },\n      eliminarDetalles() {\n        this.detallesCotizaciones = [];\n        this.porcentaje_descuento = 0;\n        this.registro.valor_descuento = 0;\n\n        this.porcentajeRecargo = 0;\n        this.registro.valor_recargo = 0;\n        this.registro.valor_domicilio = 0;\n\n        if (this.recargoPorPorcentaje) {\n          this.porcentajeRecargoKeyup(null);\n        } else {\n          this.valorRecargoKeyup(null);\n        }\n      },\n      postGuardar(response) {\n        const respuesta = response.data.data;\n        if (this.permisos.imprimirCotizaciones) {\n          this.imprimirPdf(respuesta.id);\n        }\n        this.redireccionar();\n      },\n      guardar() {\n        this.alternarBotonesSubmit();\n\n        this.$refs.cargando.alternar();\n\n        let registro = _.cloneDeep(this.registro);\n\n        registro = this.completarValores(registro);\n\n        registro.detallesCotizaciones = this.detallesCotizaciones;\n\n        registro.fecha = this.fechaAUTC(registro.fecha, \'YYYY-MM-DD\');\n\n        if (this.id === \'0\') {\n          axios\n            .post(\'/api/cotizaciones\', registro)\n            .then(response => {\n              this.postGuardar(response);\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al guardar cotización!\', errores);\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n            });\n        } else {\n          axios\n            .patch(\'/api/cotizaciones/\' + this.id, registro)\n            .then((response) => {\n              this.postGuardar(response);\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al actualizar cotización\', errores);\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n            });\n        }\n      },\n      completarValores(registro) {\n        if (!registro.valor_descuento) {\n          registro.valor_descuento = 0;\n        }\n\n        if (!registro.valor_recargo) {\n          registro.valor_recargo = 0;\n        }\n\n        if (!registro.valor_domicilio) {\n          registro.valor_domicilio = 0;\n        }\n\n        return registro;\n      },\n      imprimirPdfAlEditar() {\n        this.imprimirPdf(this.id);\n      },\n      imprimirPdf(idCotizacion) {\n        window.open(\'/cotizaciones/\' + idCotizacion + \'/pdf\', \'_blank\', \'height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no\');\n      },\n      redireccionar() {\n        window.location.href = \'/cotizaciones\';\n      },\n      limpiarPaciente() {\n        this.registro.paciente_id = \'\';\n        this.registro.paciente_type = \'\';\n        this.registro.paciente_nombre = \'\';\n        this.registro.paciente_taxonomia = \'\';\n        this.registro.paciente_fecha_nacimiento = \'\';\n        this.registro.paciente_sexo = \'\';\n        this.registro.paciente_correo = \'\';\n        this.registro.paciente_direccion = \'\';\n        this.registro.paciente_telefono = \'\';\n        this.registro.paciente_numero_poliza = \'\';\n        this.registro.paciente_dueno_responsable = \'\';\n      },\n      autocompletarPaciente() {\n        this.ocultarMensajes();\n        this.limpiarPaciente();\n\n        if (!this.registro.paciente_identificacion) {\n          return;\n        }\n\n        this.registro.paciente_identificacion = this.registro.paciente_identificacion.trim();\n        this.cargandoPaciente = true;\n\n        axios\n          .get(`/api/pacientes?identificacion=${this.registro.paciente_identificacion}`)\n          .then(({data: {data}}) => {\n            if (data.length === 0) {\n              this.abrirModalCrearPaciente();\n              return;\n            }\n\n            if (data.length > 1) {\n              this.cadenaBusqueda = this.registro.paciente_identificacion;\n              this.abrirPaciente(true);\n              return;\n            }\n\n            this.pacienteSeleccionado(data[0]);\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al buscar paciente!\', errores);\n          })\n          .then(() => this.cargandoPaciente = false);\n      },\n      abrirPacienteSinBusqueda() {\n        this.abrirPaciente(false);\n      },\n      abrirPaciente(mostrarMensaje) {\n        const cadenaBusqueda = mostrarMensaje ? this.cadenaBusqueda : \'\';\n        const boton = crearBotonConData({\'cadena-busqueda\': cadenaBusqueda});\n        $(\'#buscarPaciente\').modal({}, boton);\n      },\n      pacienteSeleccionado(paciente) {\n        if (paciente) {\n          this.registro.paciente_id = \'\';\n          this.registro.paciente_nombre = \'\';\n\n          this.registro.paciente_id = paciente.id;\n          this.registro.paciente_type = paciente.tipo;\n          this.registro.paciente_nombre = paciente.nombre_paciente;\n          this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n          this.registro.paciente_sexo = paciente.sexo;\n          this.registro.paciente_correo = paciente.correo;\n          this.registro.paciente_identificacion = paciente.numero_identificacion;\n          this.registro.paciente_direccion = [paciente.direccion, paciente.direccion_numeracion].filter(Boolean).join(\' \');\n          this.registro.paciente_telefono = paciente.telefono_celular;\n          this.registro.paciente_numero_poliza = paciente.numero_poliza;\n\n          if (this.registro.paciente_sexo === \'M\') {\n            this.registro.embarazada = \'\';\n          }\n\n          this.cargarDuenoResponsableVista(paciente.tipo, paciente);\n          this.cargarRaza(paciente.tipo, paciente.id);\n        }\n      },\n      cargarRaza(tipo, pacienteId) {\n        if (tipo !== \'App\\\\Models\\\\PacienteAnimal\') {\n          return;\n        }\n\n        axios\n          .get(`/api/pacientes/animales/${pacienteId}`)\n          .then(({data: {data}}) => {\n            this.registro.paciente_taxonomia = `${data.raza.padre.nombre} - ${data.raza.nombre}`;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al buscar raza!\', errores);\n          });\n      },\n      cargarDuenoResponsableVista(tipo, paciente) {\n        if (tipo === \'App\\\\Models\\\\PacienteHumano\') {\n          return;\n        }\n\n        this.registro.paciente_dueno_responsable = [paciente.apellidos, paciente.nombres].filter(Boolean).join(\' \');\n      },\n      cargarDuenoResponsable(tipo, paciente) {\n        this.registro.paciente_dueno_responsable = \'\';\n\n        if (tipo === \'App\\\\Models\\\\PacienteAnimal\') {\n          this.registro.paciente_dueno_responsable = [paciente.apellidos_dueno, paciente.nombres_dueno].filter(Boolean).join(\' \');\n        }\n\n        if (tipo === \'App\\\\Models\\\\SujetoObjeto\') {\n          this.registro.paciente_dueno_responsable = [paciente.apellidos_responsable, paciente.nombres_responsable].filter(Boolean).join(\' \');\n        }\n      },\n      seleccionarPacienteHumano(paciente) {\n        this.paciente_type = \'humano\';\n        this.registro.paciente_id = paciente.id;\n        this.registro.paciente_type = \'App\\\\Models\\\\PacienteHumano\';\n        this.registro.paciente_nombre = paciente.nombre_paciente;\n        this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n        this.registro.paciente_sexo = paciente.sexo;\n        this.registro.paciente_correo = paciente.correo;\n        this.registro.paciente_identificacion = paciente.numero_identificacion;\n        this.registro.paciente_direccion = [paciente.direccion, paciente.direccion_numeracion].filter(Boolean).join(\' \');\n        this.registro.paciente_telefono = paciente.telefono_celular;\n        this.registro.paciente_numero_poliza = paciente.numero_poliza;\n        this.registro.paciente_dueno_responsable = \'\';\n\n        if (this.registro.paciente_sexo === \'M\') {\n          this.registro.embarazada = \'\';\n        }\n      },\n      seleccionarPacienteAnimal(paciente) {\n        this.paciente_type = \'animal\';\n        this.registro.paciente_id = paciente.id;\n        this.registro.paciente_type = \'App\\\\Models\\\\PacienteAnimal\';\n        this.registro.paciente_nombre = paciente.nombre_paciente;\n        this.registro.paciente_taxonomia = `${paciente.raza.padre.nombre} - ${paciente.raza.nombre}`;\n        this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n        this.registro.paciente_sexo = paciente.sexo;\n        this.registro.paciente_identificacion = paciente.numero_identificacion;\n        this.registro.paciente_correo = paciente.correo;\n        this.registro.paciente_direccion = paciente.direccion;\n        this.registro.paciente_telefono = paciente.telefono_celular;\n        this.registro.paciente_numero_poliza = \'\';\n\n        this.cargarDuenoResponsable(this.registro.paciente_type, paciente);\n\n        if (this.registro.paciente_sexo === \'M\') {\n          this.registro.embarazada = \'\';\n        }\n      },\n      seleccionarSujetoObjeto(sujeto) {\n        this.paciente_type = \'objeto\';\n        this.registro.paciente_id = sujeto.id;\n        this.registro.paciente_type = \'App\\\\Models\\\\SujetoObjeto\';\n        this.registro.paciente_nombre = sujeto.descripcion;\n        this.registro.paciente_fecha_nacimiento = null;\n        this.registro.paciente_sexo = null;\n        this.registro.paciente_identificacion = sujeto.numero_identificacion;\n        this.registro.embarazada = \'\';\n        this.registro.paciente_correo = sujeto.correo;\n        this.registro.paciente_direccion = sujeto.direccion;\n        this.registro.paciente_telefono = sujeto.telefono_celular;\n        this.registro.paciente_numero_poliza = \'\';\n        this.cargarDuenoResponsable(this.registro.paciente_type, sujeto);\n      },\n      abrirModalCrearPaciente() {\n        const datos = {\n          pacienteType: \'\',\n          esCrearPaciente: true,\n          numeroIdentificacion: this.registro.paciente_identificacion\n        }\n        $(\'#gestionarPacienteModal\').modal({backdrop: \'static\'}, datos);\n      },\n      abrirModalEditarPaciente() {\n        const datos = {\n          pacienteType: this.obtenerPacienteType(this.registro.paciente_type),\n          esCrearPaciente: false,\n          numeroIdentificacion: this.registro.paciente_identificacion,\n          pacienteId: this.registro.paciente_id\n        }\n        $(\'#gestionarPacienteModal\').modal({backdrop: \'static\'}, datos);\n      },\n      obtenerPacienteType(sujetoType) {\n        let pacienteType = \'\';\n        switch (sujetoType) {\n          case \'App\\\\Models\\\\PacienteHumano\':\n            pacienteType = \'humano\';\n            break;\n          case \'App\\\\Models\\\\PacienteAnimal\':\n            pacienteType = \'animal\';\n            break;\n          case \'App\\\\Models\\\\SujetoObjeto\':\n            pacienteType = \'objeto\';\n            break;\n        }\n        return pacienteType;\n      },\n      pacienteHumanoGuardado(paciente) {\n        const accion = paciente.esCreado ? \'creado\' : \'actualizado\';\n        this.mostrarExito(\'¡Éxito!\', `Paciente "${paciente.nombre_paciente}" ${accion} y seleccionado.`);\n        this.seleccionarPacienteHumano(paciente);\n      },\n      pacienteAnimalGuardado(paciente) {\n        const accion = paciente.esCreado ? \'creado\' : \'actualizado\';\n        this.mostrarExito(\'¡Éxito!\', `Paciente "${paciente.nombre_paciente}" ${accion} y seleccionado.`);\n        this.seleccionarPacienteAnimal(paciente);\n      },\n      sujetoObjetoGuardado(sujeto) {\n        const accion = sujeto.esCreado ? \'creado\' : \'actualizado\';\n        this.mostrarExito(\'¡Éxito!\', `Objeto "${sujeto.descripcion}" ${accion} y seleccionado.`);\n        this.seleccionarSujetoObjeto(sujeto);\n      },\n      autocompletarMedico() {\n        this.ocultarMensajes();\n\n        this.registro.medico_id = \'\';\n\n        if (!this.registro.medico_nombre) {\n          return;\n        }\n\n        this.registro.medico_nombre = this.registro.medico_nombre.trim();\n        this.cargandoMedico = true;\n\n        axios\n          .get(\'/api/medicos?cadenaBusqueda=\' + this.registro.medico_nombre)\n          .then(({data: {data}}) => {\n            if (data.length === 0) {\n              this.abrirModalGestionarMedico();\n              this.cadenaBusqueda = this.registro.medico_nombre;\n              this.registro.medico_nombre = \'\';\n              return;\n            }\n\n            if (data.length > 1) {\n              const params = {cadenaBusqueda: this.registro.medico_nombre};\n              $(\'#modalBuscarMedico\').modal({}, params);\n              this.registro.medico_nombre = \'\';\n              return;\n            }\n\n            this.registro.medico_id = data[0].id;\n            this.registro.medico_nombre = data[0].nombre_completo;\n            this.mostrarExito(\'Médico seleccionado\');\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al buscar médico\', errores);\n          })\n          .then(() => this.cargandoMedico = false);\n      },\n      verificarMedico() {\n        if (this.registro.medico_nombre === \'\') {\n          this.registro.medico_id = \'\';\n        }\n      },\n      abrirModalGestionarMedico() {\n        if(this.cargandoMedico){\n          return;\n        }\n        $(\'#modalGestionarMedico\').modal({backdrop: \'static\'});\n      },\n      buscarMedico() {\n        $(\'#modalBuscarMedico\').modal(\'show\');\n      },\n      medicoCreado(medico) {\n        this.registro.medico_id = medico.id;\n        this.registro.medico_nombre = medico.nombre_completo;\n        this.mostrarExito(`Médico "${medico.nombre_completo}" creado y seleccionado`);\n      },\n      medicoSeleccionado(medico) {\n        this.registro.medico_id = medico.id;\n        this.registro.medico_nombre = medico.nombre_completo;\n        this.mostrarExito(\'Médico seleccionado\');\n      },\n      cargarSubempresa(mostrarCargando) {\n        this.errorEnTarifas = false;\n\n        if (!this.empresa) {\n          this.examenes = [];\n          this.subempresas = [];\n          this.registro.subempresa_id = \'\';\n          return;\n        }\n\n        if (mostrarCargando) {\n          this.cargandoExamenes = true;\n        }\n\n\n        this.ocultarMensajes();\n\n        this.porcentaje_descuento = 0;\n        this.cambio_precio = this.empresa.cambio_precio;\n        this.permitir_descuento = this.empresa.permitir_descuento;\n        this.subempresas = this.empresa.subempresas;\n        const subempresaMatriz = this.obtenerSubempresaMatriz();\n\n        if (!subempresaMatriz) {\n          this.mostrarAdvertencia(\'¡Advertencia!\', \'No existe una categoría predeterminada para este cliente.\');\n        } else {\n          this.registro.subempresa_id = subempresaMatriz.id;\n        }\n\n        this.cargarExamenes(false, true);\n      },\n      obtenerEmpresa(empresaId) {\n        return this.empresas.find(empresa => empresaId == empresa.id);\n      },\n      obtenerSubempresaMatriz() {\n        return this.empresa.subempresas.find(function (s) {\n          return s.predeterminada;\n        });\n      },\n      calcularPorcentajeDescuento() {\n        if (this.registro.valor_descuento > 0) {\n          this.porcentaje_descuento = (100 * this.registro.valor_descuento) / (+this.registro.valor_descuento + +this.registro.valor_total - +this.registro.valor_recargo);\n          this.porcentaje_descuento = this.porcentaje_descuento.toFixed(2);\n        }\n      },\n      calcularPorcentajeRecargo() {\n        if (this.registro.valor_recargo > 0) {\n          const valorSinRecargo = +this.registro.valor_total - +this.registro.valor_recargo;\n          this.porcentajeRecargo = (100 * this.registro.valor_recargo) / valorSinRecargo;\n          this.porcentajeRecargo = this.porcentajeRecargo.toFixed(2);\n        }\n      },\n      validarValor(detalle) {\n        const indice = this.detallesCotizaciones.indexOf(detalle);\n\n        if (!this.detallesCotizaciones[indice].valor) {\n          this.detallesCotizaciones[indice].valor = \'0.00\';\n        }\n\n        if (this.detallesCotizaciones[indice].valor < 0) {\n          this.detallesCotizaciones[indice].valor = \'0.00\';\n        }\n\n        if (this.recargoPorPorcentaje) {\n          this.porcentajeRecargoKeyup(null);\n        } else {\n          this.valorRecargoKeyup(null);\n        }\n\n        this.porcentaje_descuento = \'0.00\';\n        this.registro.valor_descuento = \'0.00\';\n      },\n      valorDetalleKeyTab(detalle) {\n        let indice = this.detallesCotizaciones.indexOf(detalle);\n\n        if (this.detallesCotizaciones[indice].valor) {\n          this.detallesCotizaciones[indice].valor = Number(this.detallesCotizaciones[indice].valor).toFixed(2);\n        }\n      },\n      porcentajeDescuentoKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.porcentaje_descuento < 0) {\n          this.porcentaje_descuento = 0;\n        }\n\n        if (Number(this.porcentaje_descuento) === 0) {\n          this.porcentaje_descuento = 0;\n          this.registro.valor_descuento = 0;\n          return;\n        }\n\n        this.registro.valor_descuento = this.valorSubtotal * this.porcentaje_descuento / 100;\n        this.registro.valor_descuento = this.registro.valor_descuento.toFixed(2);\n        this.porcentaje_descuento = Number(this.porcentaje_descuento).toFixed(2);\n\n        this.descuentoPorPorcentaje = true;\n        if (this.recargoPorPorcentaje) {\n          this.porcentajeRecargoKeyup(null);\n        } else {\n          this.valorRecargoKeyup(null);\n        }\n      },\n      valorDescuentoKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.registro.valor_descuento === 0) {\n          this.porcentaje_descuento = 0;\n          this.registro.valor_descuento = 0;\n          return;\n        }\n\n        if (this.registro.valor_descuento < 0) {\n          this.registro.valor_descuento = 0;\n        }\n\n        if (Number(this.registro.valor_descuento) > Number(this.valorSubtotal)) {\n          this.registro.valor_descuento = this.valorSubtotal;\n        }\n\n        this.porcentaje_descuento = (100 * this.registro.valor_descuento) / this.valorSubtotal;\n        this.porcentaje_descuento = this.porcentaje_descuento.toFixed(2);\n        this.descuentoPorPorcentaje = false;\n\n        if (this.recargoPorPorcentaje) {\n          this.porcentajeRecargoKeyup(null);\n        } else {\n          this.valorRecargoKeyup(null);\n        }\n      },\n      formatearValorDescuento() {\n        if (this.registro.valor_descuento > 0) {\n          this.registro.valor_descuento = Number(this.registro.valor_descuento).toFixed(2);\n        }\n      },\n      formatearPorcentajeDescuento() {\n        if (this.porcentaje_descuento) {\n          this.porcentaje_descuento = Number(this.porcentaje_descuento).toFixed(2);\n        }\n      },\n      valorDomicilioKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.registro.valor_domicilio < 0) {\n          this.registro.valor_domicilio = 0;\n        }\n      },\n      formatearValorDomicilio() {\n        if (this.registro.valor_domicilio > 0) {\n          this.registro.valor_domicilio = Number(this.registro.valor_domicilio).toFixed(2);\n        }\n      },\n      valorRecargoKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.registro.valor_recargo === 0) {\n          this.porcentajeRecargo = 0;\n          this.registro.valor_recargo = 0;\n          return;\n        }\n\n        if (this.registro.valor_recargo < 0) {\n          this.registro.valor_recargo = 0;\n        }\n\n        if (Number(this.valorSubtotal) === 0) {\n          this.porcentajeRecargo = 0;\n          return;\n        }\n\n        this.porcentajeRecargo = (100 * this.registro.valor_recargo) / (this.valorSubtotal - this.registro.valor_descuento);\n        this.porcentajeRecargo = this.porcentajeRecargo.toFixed(2);\n        this.recargoPorPorcentaje = false;\n      },\n      formatearValorRecargo() {\n        if (this.registro.valor_recargo > 0) {\n          this.registro.valor_recargo = Number(this.registro.valor_recargo).toFixed(2);\n        }\n      },\n      porcentajeRecargoKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.porcentajeRecargo < 0) {\n          this.porcentajeRecargo = 0;\n        }\n        this.registro.valor_recargo = (this.valorSubtotal - this.registro.valor_descuento) * this.porcentajeRecargo / 100;\n        if (this.registro.valor_recargo > 0) {\n          this.registro.valor_recargo = Number(this.registro.valor_recargo).toFixed(2);\n        } else {\n          this.registro.valor_recargo = 0;\n        }\n        if (event) {\n          this.recargoPorPorcentaje = true;\n        }\n      },\n      formatearPorcentajeRecargo() {\n        if (this.porcentajeRecargo > 0) {\n          this.porcentajeRecargo = Number(this.porcentajeRecargo).toFixed(2);\n        }\n      },\n      regresar() {\n        window.history.back();\n      },\n      focusSiguiente(idElemento) {\n        $(`#${idElemento}`).focus();\n      },\n      tituloCondicionesPreanaliticas(examen) {\n        if (!examen.condiciones_preanaliticas) {\n          return \'\';\n        }\n\n        return examen.condiciones_preanaliticas.replace(/\\n/g, "<br />");\n      },\n      siguienteExamen(indice) {\n        this.indiceExamen = indice + 1;\n        $(\'#examen-\' + this.indiceExamen).focus();\n      },\n      anteriorExamen(indice) {\n        this.indiceExamen = indice - 1;\n        if (indice === 0) {\n          $(\'#buscarExamen\').focus();\n          return;\n        }\n        $(\'#examen-\' + this.indiceExamen).focus();\n      },\n      mouseSobreExamen() {\n        this.indiceExamen = null;\n      },\n      focusSiguiente(idElemento) {\n        $(`#${idElemento}`).focus();\n      }\n    },\n    computed: {\n      examenesFiltrados() {\n        if (this.examenes.length === 0) {\n          return this.examenes;\n        }\n\n        return this.examenes.filter((examenTarifa) => {\n          const cadenaBusqueda = escaparRegex(this.cadenaBusquedaExamenes);\n          const regex = new RegExp(removeDiacritics(cadenaBusqueda), \'i\');\n          const resultadoRegex = regex.test(examenTarifa.examen.codigo + \' \') || regex.test(examenTarifa.examen.referencia_auxiliar) || regex.test(examenTarifa.examen.referencia_auxiliar_2) || regex.test(removeDiacritics(examenTarifa.examen.nombre));\n          const resultadoGrep = $.grep(this.detallesCotizaciones, function (e) {\n            return e.examen_id === examenTarifa.examen.id;\n          });\n          return resultadoRegex && resultadoGrep.length === 0;\n        });\n      },\n      detallesCotizacionesFiltrados() {\n        if (this.detallesCotizaciones.length > 0) {\n          return this.detallesCotizaciones.filter(detalle => {\n            const cadenaBusqueda = escaparRegex(this.cadenaBusquedaDetalles);\n            const regex = new RegExp(removeDiacritics(cadenaBusqueda), \'i\');\n            return regex.test(detalle.examen.codigo) || regex.test(removeDiacritics(detalle.examen.nombre));\n          });\n        }\n        return this.detallesCotizaciones;\n      },\n      valorSubtotal() {\n        let valorSubtotal = 0;\n        if (this.detallesCotizaciones.length > 0) {\n          valorSubtotal = this.detallesCotizaciones.reduce(function (prev, detalle) {\n            return +prev + +detalle.valor;\n          }, 0);\n        }\n\n        return valorSubtotal.toFixed(2);\n      },\n      valorTotalCalculado() {\n        this.registro.valor_total = this.valorSubtotal - this.registro.valor_descuento + +this.registro.valor_recargo + +this.registro.valor_domicilio;\n        this.registro.valor_total = this.registro.valor_total.toFixed(2);\n        return this.registro.valor_total;\n      },\n      etiquetaDatosPaciente() {\n        let etiquetaDatosPaciente = \'\';\n        switch (this.registro.paciente_type) {\n          case \'App\\\\Models\\\\PacienteHumano\':\n            etiquetaDatosPaciente = \'Datos del Paciente\'\n            break;\n          case \'App\\\\Models\\\\PacienteAnimal\':\n            etiquetaDatosPaciente = \'Datos del Paciente Animal\'\n            break;\n          case \'App\\\\Models\\\\SujetoObjeto\':\n            etiquetaDatosPaciente = \'Datos del Objeto\'\n            break;\n          default:\n            etiquetaDatosPaciente = \'Datos del Paciente\'\n            break;\n        }\n        return etiquetaDatosPaciente;\n      },\n      esHumano() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\PacienteHumano\';\n      },\n      esAnimal() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\PacienteAnimal\';\n      },\n      esObjeto() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\SujetoObjeto\';\n      }\n    }\n  }\n<\/script>\n\n\n<style scoped>\n  .hover-examen {\n    font-weight: bold;\n    background-color: #f5f5f5;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},2874:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".imagen-original[data-v-5d24444a],.vista-previa[data-v-5d24444a]{background-color:#d9d9d9;border:1px solid #ccd0d2;border-radius:4px}.imagen-original[data-v-5d24444a]{align-items:center;height:300px}.vista-previa[data-v-5d24444a]{height:160px;overflow:auto;padding:5px;text-align:center}.vista-previa img[data-v-5d24444a]{max-height:140px}","",{version:3,sources:["webpack://./resources/js/components/clientes/firmas/formulario.vue"],names:[],mappings:"AA+aA,iEAGA,wBAAA,CAFA,wBAAA,CACA,iBAEA,CAEA,kCACA,kBAAA,CACA,YACA,CAEA,+BACA,YAAA,CACA,aAAA,CACA,WAAA,CACA,iBACA,CAEA,mCACA,gBACA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"></alerta>\n    <form method="POST" ref="formulario" class="form-horizontal" @submit.prevent="guardar">\n\n      <navbar>\n        <template #titulo>\n          {{ id === \'0\' ? \'Crear\' : \'Editar\' }} Firma\n        </template>\n        <template #opciones>\n          <ul class="nav navbar-nav">\n            <li>\n              <button type="submit" class="btn btn-primary"\n                      v-show="(id === \'0\' && permisos.crearFirmas) || (id !== \'0\' && permisos.editarFirmas)">\n                <i class="fas fa-save fa-fw"></i>&nbsp;Guardar\n              </button>\n            </li>\n            <li>\n              <a @click="regresar" class="btn btn-default">Regresar</a>\n            </li>\n          </ul>\n        </template>\n      </navbar>\n\n      <fieldset>\n\n        <div class="form-group">\n          <div class="col-md-3 text-right">\n            <label for="nombre" class="control-label obligatorio">Nombre</label>\n          </div>\n          <div class="col-md-4">\n            <input type="text" class="form-control input-sm" id="nombre" name="nombre"\n                   v-model="registro.nombre" maxlength="100" required/>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-md-3 text-right">\n            <label for="referencia-auxiliar" class="control-label">Referencia auxiliar</label>\n          </div>\n          <div class="col-md-4">\n            <input type="text" class="form-control input-sm" id="referencia-auxiliar" name="referencia-auxiliar"\n                   v-model="registro.referencia_auxiliar" maxlength="8" />\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-md-3 text-right">\n            <label class="control-label">Firma</label>\n          </div>\n          <div class="col-md-9">\n            <div class="row">\n              <div class="col-md-5">\n                <div class="imagen-original">\n                  <vue-cropper\n                    ref="cropper"\n                    alt="Por favor seleccione una imagen"\n                    :src="imagenOriginal"\n                    :containerStyle="{height: \'100%\', width: \'100%\'}"\n                    :cropBoxResizable="true"\n                    :autoCropArea="1"\n                    :cropend="actualizarVistaPrevia"\n                    :ready="actualizarVistaPrevia"\n                    :zoom="actualizarVistaPrevia">\n                  </vue-cropper>\n                </div>\n              </div>\n              <div class="col-md-3">\n                <div class="col-sm-12">\n                  <label class="btn btn-default">\n                    Seleccionar firma<input type="file" name="firma" accept="image/*" class="sfo"\n                                            @change="imagenSeleccionada">\n                  </label>\n                </div>\n                <div class="col-sm-12" style="margin-top: 5px">\n                  <button type="button" class="btn btn-danger"\n                          title="Eliminar imagen firma"\n                          @click="eliminarImagen">\n                    <i class="fas fa-trash"></i>\n                  </button>\n                </div>\n                <div class="col-sm-12">\n                  <label class="control-label" v-show="registro.dimensiones">\n                    Dimensiones (Px)\n                  </label>\n                  <output v-show="registro.dimensiones" style="padding-top: 0; margin-top: 0">\n                    {{ registro.dimensiones }}\n                  </output>\n                </div>\n                <div class="col-sm-12">\n                  <label class="control-label" v-show="registro.tamano">\n                    Tamaño\n                  </label>\n                  <output v-show="registro.tamano" style="padding-top: 0; margin-top: 0">\n                    {{ registro.tamano }}\n                  </output>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-md-3 text-right">\n            <label class="control-label">Vista previa</label>\n          </div>\n          <div class="col-md-8">\n            <div class="vista-previa">\n              <img :src="imagenCortada" alt="Vista previa"/>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-md-3 text-right">\n            <label for="resolucion" class="control-label">Resolución máxima</label>\n          </div>\n          <div class="col-md-8">\n            <output>\n              {{ registro.resolucion }}\n            </output>\n            {{resolucionMinima}}\n            <input\n              id="margen_izquierdo_datos_paciente"\n              type="range"\n              class="span2"\n              style="width:60%; display: inline-block;"\n              :min="resolucionMinima"\n              :max="resolucionMaxima"\n              name="margen_izquierdo_datos_paciente"\n              v-model="registro.resolucion"/>\n            {{resolucionMaxima}}\n            <div style="margin-top: 2px">\n              <button\n                type="button"\n                class="btn btn-default btn-sm"\n                @click="registro.resolucion=resolucionMinima">\n                {{ resolucionMinima }}\n              </button>\n              <button\n                type="button"\n                class="btn btn-default btn-sm"\n                @click="registro.resolucion=resolucionMedia">\n                {{ resolucionMedia }}\n              </button>\n              <button\n                type="button"\n                class="btn btn-default btn-sm"\n                @click="registro.resolucion=resolucionMaxima">\n                {{ resolucionMaxima }}\n              </button>\n            </div>\n          </div>\n        </div>\n        <div class="form-group">\n          <div class="col-md-3"></div>\n          <div class="col-sm-9 col-md-9 help-block">\n            <em>Nota:</em>\n            <ul>\n              <li>\n                Si la resolución de la imagen es inferior, se conservará la resolución de la imagen cargada\n              </li>\n              <li>A mayor resolución más lenta se hace la generación de PDFs.</li>\n            </ul>\n\n          </div>\n        </div>\n\n        <div class="form-group">\n          <div class="col-md-3 text-right">\n            <label class="control-label">Pie de firma</label>\n          </div>\n          <div class="col-md-6 col-sm-9 editor">\n            <ckeditor\n              :editor="editor"\n              v-model="registro.descripcion"\n              :config="editorConfig"/>\n          </div>\n        </div>\n\n      </fieldset>\n    </form>\n    <cargando-modal ref="cargando"></cargando-modal>\n  </div>\n</template>\n\n<script>\n  import \'@ckeditor/ckeditor5-build-classic/build/translations/es\';\n  import CKEditor from \'@ckeditor/ckeditor5-vue2\';\n  import ClassicEditor from \'@ckeditor/ckeditor5-build-classic\';\n  import \'cropperjs/dist/cropper.css\';\n\n  export default {\n    components: {\n      ckeditor: CKEditor.component,\n    },\n    data() {\n      return {\n        registro: {\n          id: 0,\n          nombre: \'\',\n          referencia_auxiliar: \'\',\n          descripcion: \'\',\n          imagen: \'\',\n          dimensiones: \'\',\n          tamano: \'\',\n          resolucion: 600\n        },\n        editor: ClassicEditor,\n        editorConfig: {\n          language: \'es\',\n          toolbar: [\n            \'bold\',\n            \'italic\',\n            \'link\',\n            \'|\',\n            \'bulletedList\',\n            \'numberedList\',\n            \'|\',\n            \'undo\',\n            \'redo\',\n          ]\n        },\n        imagen: \'\',\n        imagenOriginal: \'\',\n        imagenCortada: \'\'\n      }\n    },\n    props: [\n      \'id\', \'permisos\', \'urlStorage\'\n    ],\n    mounted() {\n      $("img").hide();\n\n      this.cargarDatos();\n\n      $(\'#nombre\').focus();\n    },\n    methods: {\n      actualizarVistaPrevia() {\n        this.registro.imagen = \'\';\n        this.imagenCortada = this.$refs.cropper.getCroppedCanvas({fillColor: \'white\'}).toDataURL(\'image/jpeg\');\n      },\n      cargarDatos() {\n        this.definirResolucionInicial();\n\n        if (this.id !== \'0\') {\n          this.$refs.cargando.alternar();\n          axios\n            .get(`/api/firmas/${this.id}/edit`)\n            .then(({data: {data}}) => {\n              this.registro = data;\n              this.definirResolucionInicial();\n              if (!this.registro.descripcion) {\n                this.registro.descripcion = \'\';\n              }\n\n              if (this.registro.imagen) {\n                this.$refs.cropper.replace(`${this.urlStorage}${this.registro.imagen}`);\n                $(\'img\').show();\n              }\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al cargar membretes!\', errores);\n            })\n            .then(() => this.$refs.cargando.alternar());\n        }\n      },\n      enviarFormulario(imagen = null) {\n        this.$refs.cargando.alternar();\n        this.alternarBotonesSubmit();\n\n        const formulario = new FormData();\n        formulario.append(\'nombre\', this.registro.nombre);\n        formulario.append(\'referencia_auxiliar\', this.registro.referencia_auxiliar);\n        formulario.append(\'descripcion\', this.registro.descripcion ? this.registro.descripcion : \'\');\n        formulario.append(\'resolucion\', this.registro.resolucion);\n        formulario.append(\'imagen\', this.registro.imagen);\n\n        if (imagen) {\n          formulario.append(\'datosImagen\', imagen);\n        }\n\n        if (this.id === \'0\') {\n          axios\n            .post(\'/api/firmas\', formulario)\n            .then(() => {\n              this.regresar();\n            })\n            .catch(error => {\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al guardar firma!\', errores);\n            });\n        } else {\n          formulario.append(\'_method\', \'PATCH\');\n          axios\n            .post(`/api/firmas/${this.id}`, formulario)\n            .then(() => {\n              this.regresar();\n            })\n            .catch(error => {\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al actualizar firma!\', errores);\n            });\n        }\n      },\n      guardar() {\n        const canvas = this.$refs.cropper.getCroppedCanvas({\n          imageSmoothingEnabled: false,\n          fillColor: \'white\'\n        });\n        if (canvas) {\n          canvas.toBlob((imagen) => {\n            this.enviarFormulario(imagen);\n          }, \'image/jpeg\');\n        } else {\n          this.enviarFormulario();\n        }\n      },\n      imagenSeleccionada(evento) {\n        this.registro.imagen = \'\';\n        this.registro.dimensiones = \'\';\n        this.registro.tamano = \'\';\n\n        $("img").show();\n        const file = evento.target.files[0];\n        this.imagen = file;\n        if (!file) {\n          alert(\'Por favor seleccione una imagen\');\n          return;\n        }\n\n        if (!file.type.includes(\'image/\')) {\n          alert(\'Por favor seleccione una imagen\');\n          return;\n        }\n        if (typeof FileReader === \'function\') {\n          const reader = new FileReader();\n          reader.onload = (evento) => {\n            this.imagenOriginal = evento.target.result;\n            this.$refs.cropper.replace(evento.target.result);\n            this.cargarAnchoYAltoImagen(evento.target.result);\n          };\n          reader.readAsDataURL(file);\n        } else {\n          alert(\'Lo sentimos, su navegador no soporta esta función\');\n        }\n      },\n      cargarAnchoYAltoImagen(imagen) {\n        const image = new Image();\n        image.src = imagen;\n\n        image.onload = (event) => {\n          if (event.path[0]) {\n            const imagen = event.path[0];\n            this.registro.dimensiones = `${imagen.width} x ${imagen.height}`\n          }\n        };\n      },\n      mostrarAdvertencia(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      mostrarAdvertenciaRaza(mensaje, errores) {\n        this.$refs.alertaAgregarRaza.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      regresar() {\n        window.location.href = \'/firmas\';\n      },\n      eliminarImagen() {\n        this.imagen = \'\';\n        this.registro.imagen = \'\';\n        this.registro.dimensiones = \'\';\n        this.registro.tamano = \'\';\n        this.imagenOriginal = \'\';\n        this.imagenCortada = \'\';\n        this.$refs.cropper.destroy();\n      },\n      definirResolucionInicial() {\n        Vue.set(this.registro, \'resolucion\', 600);\n      }\n    },\n    computed: {\n      resolucionMinima() {\n        return 200;\n      },\n      resolucionMedia() {\n        return 400;\n      },\n      resolucionMaxima() {\n        return 600;\n      }\n    }\n\n  }\n<\/script>\n\n<style scoped>\n  .imagen-original, .vista-previa {\n    border: 1px solid #ccd0d2;\n    border-radius: 4px;\n    background-color: #d9d9d9;\n  }\n\n  .imagen-original {\n    align-items: center;\n    height: 300px;\n  }\n\n  .vista-previa {\n    height: 160px;\n    overflow: auto;\n    padding: 5px;\n    text-align: center;\n  }\n\n  .vista-previa img {\n    max-height: 140px;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},3271:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".imagen-original[data-v-a05d841a],.vista-previa[data-v-a05d841a]{background-color:#d9d9d9;border:1px solid #ccd0d2;border-radius:4px}.imagen-original[data-v-a05d841a]{align-items:center;display:flex;height:300px;justify-content:center}.vista-previa[data-v-a05d841a]{height:160px;overflow:auto;padding:5px;text-align:center}.vista-previa img[data-v-a05d841a]{max-height:140px}","",{version:3,sources:["webpack://./resources/js/components/clientes/membretes/formulario.vue"],names:[],mappings:"AAglBA,iEAGA,wBAAA,CAFA,wBAAA,CACA,iBAEA,CAEA,kCAGA,kBAAA,CAFA,YAAA,CAGA,YAAA,CAFA,sBAGA,CAEA,+BACA,YAAA,CACA,aAAA,CACA,WAAA,CACA,iBACA,CAEA,mCACA,gBACA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"></alerta>\n    <form method="POST" ref="formulario" class="form-horizontal" @submit.prevent="guardar">\n\n      <navbar>\n        <template #titulo>\n          {{ id === \'0\' ? \'Crear\' : \'Editar\' }} Membrete\n        </template>\n        <template #opciones>\n          <ul class="nav navbar-nav">\n            <li>\n              <button type="submit" class="btn btn-primary"\n                      v-show="(id === \'0\' && permisos.crearMembretes) || (id !== \'0\' && permisos.editarMembretes)">\n                <i class="fas fa-save fa-fw"></i>&nbsp;Guardar\n              </button>\n            </li>\n            <li>\n              <a @click="regresar" class="btn btn-default">Regresar</a>\n            </li>\n          </ul>\n        </template>\n      </navbar>\n\n      <fieldset>\n        <div class="form-group">\n          <div class="col-md-2 text-right">\n            <label for="nombre" class="control-label obligatorio">Nombre</label>\n          </div>\n          <div class="col-md-4">\n            <input type="text" class="form-control input-sm" id="nombre" name="nombre"\n                   v-model="registro.nombre" maxlength="100" required/>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n            </div>\n            <div class="col-md-10">\n              <legend class="legend">Encabezado</legend>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n              <label for="distribucion" class="control-label obligatorio">Distribución</label>\n            </div>\n            <div class="col-md-2">\n              <select id="distribucion" name="distribucion" class="form-control input-sm"\n                      v-model="registro.distribucion" @change="cambiar">\n                <option value="LC">Logo - Contenido</option>\n                <option value="CL">Contenido - Logo</option>\n                <option value="IM">Sólo imagen</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n              <label class="control-label">Logo</label>\n            </div>\n            <div class="col-md-10">\n              <div class="row">\n                <div\n                  :class="{\'col-md-5\': this.registro.distribucion !== \'IM\', \'col-md-10\': this.registro.distribucion === \'IM\'}">\n                  <div class="imagen-original">\n                    <vue-cropper\n                      ref="cropper"\n                      alt="Por favor seleccione una imagen"\n                      :src="imagenOriginal"\n                      :containerStyle="{height: \'100%\', width: \'100%\'}"\n                      :cropBoxResizable="true"\n                      :aspectRatio="0"\n                      :autoCropArea="1"\n                      :cropend="actualizarVistaPrevia"\n                      :ready="actualizarVistaPrevia"\n                      :zoom="actualizarVistaPrevia"\n                      :key="componentKey">\n                    </vue-cropper>\n                  </div>\n                </div>\n\n                <div\n                  :class="{\'col-md-3\': this.registro.distribucion !== \'IM\', \'col-md-2\': this.registro.distribucion === \'IM\'}">\n                  <div class="col-sm-12">\n                    <label class="btn btn-default" style="width: 130px">\n                      Seleccionar<br>\n                      logo\n                      <input type="file" name="logo" accept="image/*" class="sfo" @change="imagenSeleccionada">\n                    </label>\n                  </div>\n                  <div class="col-sm-12" style="margin-top: 5px">\n                    <button type="button" class="btn btn-danger"\n                            title="Eliminar logo"\n                            @click="eliminarLogo">\n                      <i class="fas fa-trash"></i>\n                    </button>\n                  </div>\n                  <div class="col-sm-12">\n                    <label class="control-label" v-show="registro.dimensiones">\n                      Dimensiones (Px)\n                    </label>\n                    <output v-show="registro.dimensiones" style="padding-top: 0; margin-top: 0">\n                      {{ registro.dimensiones }}\n                    </output>\n                  </div>\n                  <div class="col-sm-12">\n                    <label class="control-label" v-show="registro.tamano">\n                      Tamaño\n                    </label>\n                    <output v-show="registro.tamano" style="padding-top: 0; margin-top: 0">\n                      {{ registro.tamano }}\n                    </output>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n              <label class="control-label">Vista Previa</label>\n            </div>\n            <div\n              :class="{\'col-md-4\': this.registro.distribucion !== \'IM\', \'col-md-8\': this.registro.distribucion === \'IM\'}">\n              <div class="vista-previa">\n                <img :src="imagenCortada" alt="Vista Previa"/>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n              <label for="resolucion" class="control-label">Resolución máxima (Píxeles)</label>\n            </div>\n            <div class="col-md-8">\n              <output>\n                {{ registro.resolucion }}\n              </output>\n              {{resolucionMinima}}\n              <input\n                id="margen_izquierdo_datos_paciente"\n                type="range"\n                class="span2"\n                style="width:60%; display: inline-block;"\n                :min="resolucionMinima"\n                :max="resolucionMaxima"\n                name="margen_izquierdo_datos_paciente"\n                v-model="registro.resolucion"/>\n              {{resolucionMaxima}}\n              <div style="margin-top: 2px">\n                <button\n                  type="button"\n                  class="btn btn-default btn-sm"\n                  @click="registro.resolucion=resolucionMinima">\n                  {{ resolucionMinima }}\n                </button>\n                <button\n                  type="button"\n                  class="btn btn-default btn-sm"\n                  @click="registro.resolucion=resolucionMedia">\n                  {{ resolucionMedia }}\n                </button>\n                <button\n                  type="button"\n                  class="btn btn-default btn-sm"\n                  @click="registro.resolucion=resolucionMaxima">\n                  {{ resolucionMaxima }}\n                </button>\n              </div>\n            </div>\n\n\n          </div>\n          <div class="form-group">\n            <div class="col-md-2"></div>\n            <div class="col-sm-10 col-md-10 help-block">\n              <em>Nota:</em>\n              <ul>\n                <li>\n                  Resolución máxima recomendad 600px.\n                </li>\n                <li>\n                  Si la resolución de la imagen es inferior, se conservará la resolución de la imagen cargada\n                </li>\n                <li>A mayor resolución más lenta se hace la generación de PDFs.</li>\n              </ul>\n\n            </div>\n          </div>\n        </div>\n\n        <div class="form-row" v-show="registro.distribucion !== \'IM\'">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n              <label for="nombre" class="control-label">Contenido</label>\n            </div>\n            <div class="col-md-6 col-sm-9 editor">\n              <ckeditor\n                :editor="editor"\n                v-model="registro.contenido"\n                :config="editorConfig"/>\n            </div>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n            </div>\n            <div class="col-md-10">\n              <legend class="legend">Márgenes</legend>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n              <label for="margen_superior" class="control-label obligatorio">Alto Encabezado</label>\n            </div>\n            <div class="col-md-2">\n              <select id="margen_superior" name="margen_superior" class="form-control input-sm"\n                      v-model="registro.margen_superior" required>\n                <option value="tipo_espacio_0">2.0 cm</option>\n                <option value="tipo_espacio_1">2.5 cm</option>\n                <option value="tipo_espacio_2">3.0 cm</option>\n                <option value="tipo_espacio_3">3.5 cm</option>\n                <option value="tipo_espacio_4">4.0 cm</option>\n                <option value="tipo_espacio_5">4.5 cm</option>\n                <option value="tipo_espacio_6">5.0 cm</option>\n                <option value="tipo_espacio_7">5.5 cm</option>\n                <option value="tipo_espacio_8">6.0 cm</option>\n                <option value="tipo_espacio_9">6.5 cm</option>\n                <option value="tipo_espacio_10">7.0 cm</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n              <label for="margen_inferior" class="control-label obligatorio">Alto Pie de Página</label>\n            </div>\n            <div class="col-md-2">\n              <select id="margen_inferior" class="form-control input-sm" v-model="registro.margen_inferior" required>\n                <option value="altura_pie_pagina_1">1.0 cm</option>\n                <option value="altura_pie_pagina_2">1.5 cm</option>\n                <option value="altura_pie_pagina_3">2.0 cm</option>\n                <option value="altura_pie_pagina_4">2.5 cm</option>\n                <option value="altura_pie_pagina_5">3.0 cm</option>\n                <option value="altura_pie_pagina_6">3.5 cm</option>\n                <option value="altura_pie_pagina_7">4.0 cm</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n              <label for="margen_izquierdo" class="control-label obligatorio">Margen Izquierdo</label>\n            </div>\n            <div class="col-md-2">\n              <select id="margen_izquierdo" name="margen_izquierdo" class="form-control input-sm"\n                      v-model="registro.margen_izquierdo">\n                <option value="0.00">0 cm</option>\n                <option value="0.50">0.5 cm</option>\n                <option value="1.00">1.0 cm</option>\n                <option value="1.50">1.5 cm</option>\n                <option value="2.00">2.0 cm</option>\n                <option value="2.50">2.5 cm</option>\n                <option value="3.00">3.0 cm</option>\n                <option value="3.50">3.5 cm</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        <div class="form-row">\n          <div class="form-group">\n            <div class="col-md-2 text-right">\n              <label for="margen_derecho" class="control-label obligatorio">Margen Derecho</label>\n            </div>\n            <div class="col-md-2">\n              <select id="margen_derecho" name="margen_derecho" class="form-control input-sm"\n                      v-model="registro.margen_derecho">\n                <option value="0.00">0 cm</option>\n                <option value="0.50">0.5 cm</option>\n                <option value="1.00">1.0 cm</option>\n                <option value="1.50">1.5 cm</option>\n                <option value="2.00">2.0 cm</option>\n                <option value="2.50">2.5 cm</option>\n                <option value="3.00">3.0 cm</option>\n                <option value="3.50">3.5 cm</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n      </fieldset>\n\n    </form>\n    <cargando-modal ref="cargando"></cargando-modal>\n  </div>\n</template>\n\n<script>\n  import \'@ckeditor/ckeditor5-build-classic/build/translations/es\';\n  import CKEditor from \'@ckeditor/ckeditor5-vue2\';\n  import ClassicEditor from \'@ckeditor/ckeditor5-build-classic\';\n  import \'cropperjs/dist/cropper.css\';\n\n  export default {\n    components: {\n      ckeditor: CKEditor.component,\n    },\n    props: [\n      \'id\', \'permisos\', \'urlStorage\'\n    ],\n    data() {\n      return {\n        componentKey: 0,\n        registro: {\n          id: 0,\n          nombre: \'\',\n          logo: \'\',\n          dimensiones: \'\',\n          tamano: \'\',\n          contenido: \'\',\n          distribucion: \'LC\',\n          resolucion: 900,\n          margen_superior: \'tipo_espacio_2\',\n          margen_inferior: \'altura_pie_pagina_1\',\n          margen_izquierdo: \'1.00\',\n          margen_derecho: \'1.00\',\n        },\n        editor: ClassicEditor,\n        editorConfig: {\n          language: \'es\',\n          toolbar: [\n            \'heading\',\n            \'|\',\n            \'bold\',\n            \'italic\',\n            \'link\',\n            \'|\',\n            \'bulletedList\',\n            \'numberedList\',\n            \'|\',\n            \'undo\',\n            \'redo\',\n          ]\n        },\n        logo: \'\',\n        imagenOriginal: \'\',\n        imagenCortada: \'\'\n      }\n    },\n    mounted() {\n      $("img").hide();\n\n      this.cargarDatos();\n\n      $(\'#nombre\').focus();\n    },\n    methods: {\n      actualizarVistaPrevia() {\n        this.registro.logo = \'\';\n        this.imagenCortada = this.$refs.cropper.getCroppedCanvas({fillColor: \'white\'}).toDataURL(\'image/jpeg\');\n        if (!this.imagenOriginal) {\n          this.imagenOriginal = this.imagenCortada;\n        }\n      },\n      cargarDatos() {\n        this.definirResolucionInicial();\n\n        if (this.id !== \'0\') {\n          this.$refs.cargando.alternar();\n          axios\n            .get(`/api/membretes/${this.id}/edit`)\n            .then(({data: {data}}) => {\n              this.registro = data;\n              this.definirResolucionInicial();\n              if (!this.registro.contenido) {\n                this.registro.contenido = \'\';\n              }\n\n              if (this.registro.logo) {\n                if (this.registro.distribucion !== \'IM\') {\n                  this.$refs.cropper.replace(`${this.urlStorage}${this.registro.logo}`);\n                  $(\'img\').show();\n                } else {\n                  this.forzarRenderizado();\n                  setTimeout(() => {\n                    this.$refs.cropper.replace(`${this.urlStorage}${this.registro.logo}`);\n                    $(\'img\').show();\n                  }, 500);\n                }\n              }\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al cargar membrete!\', errores);\n            })\n            .then(() => this.$refs.cargando.alternar());\n        }\n      },\n      enviarFormulario(logo = null) {\n        this.$refs.cargando.alternar();\n        this.alternarBotonesSubmit();\n\n        const formulario = new FormData();\n        formulario.append(\'nombre\', this.registro.nombre);\n        formulario.append(\'distribucion\', this.registro.distribucion);\n        formulario.append(\'resolucion\', this.registro.resolucion);\n        formulario.append(\'contenido\', this.registro.contenido);\n        formulario.append(\'logo\', this.registro.logo);\n        formulario.append(\'margen_superior\', this.registro.margen_superior);\n        formulario.append(\'margen_inferior\', this.registro.margen_inferior);\n        formulario.append(\'margen_izquierdo\', this.registro.margen_izquierdo);\n        formulario.append(\'margen_derecho\', this.registro.margen_derecho);\n\n        if (logo) {\n          formulario.append(\'datosLogo\', logo);\n        }\n\n        if (this.id === \'0\') {\n          axios\n            .post(\'/api/membretes\', formulario)\n            .then(() => {\n              this.regresar();\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al guardar membrete!\', errores);\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n            });\n        } else {\n          formulario.append(\'_method\', \'PATCH\');\n\n          axios\n            .post(`/api/membretes/${this.id}`, formulario)\n            .then(() => {\n              this.regresar();\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al guardar membrete!\', errores);\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n            });\n        }\n      },\n      guardar() {\n        const canvas = this.$refs.cropper.getCroppedCanvas({\n          imageSmoothingEnabled: false,\n          fillColor: \'white\'\n        });\n        if (canvas) {\n          canvas.toBlob((logo) => {\n            this.enviarFormulario(logo);\n          }, \'image/jpeg\');\n        } else {\n          this.enviarFormulario();\n        }\n      },\n      imagenSeleccionada(evento) {\n        this.registro.logo = \'\';\n        this.registro.dimensiones = \'\';\n        this.registro.tamano = \'\';\n        $("img").show();\n        const file = evento.target.files[0];\n        this.logo = file;\n        if (!file.type.includes(\'image/\')) {\n          alert(\'Por favor seleccione una imagen\');\n          return;\n        }\n        if (typeof FileReader === \'function\') {\n          const reader = new FileReader();\n          reader.onload = (evento) => {\n            this.imagenOriginal = evento.target.result;\n            this.$refs.cropper.replace(evento.target.result);\n            this.cargarAnchoYAltoImagen(evento.target.result);\n          };\n          reader.readAsDataURL(file);\n        } else {\n          alert(\'Lo sentimos, su navegador no soporta esta función\');\n        }\n      },\n      cargarAnchoYAltoImagen(imagen) {\n        const image = new Image();\n        image.src = imagen;\n\n        image.onload = (event) => {\n          if (event.path[0]) {\n            const imagen = event.path[0];\n            this.registro.dimensiones = `${imagen.width} x ${imagen.height}`\n          }\n        };\n      },\n      mostrarAdvertencia(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      mostrarAdvertenciaRaza(mensaje, errores) {\n        this.$refs.alertaAgregarRaza.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      regresar() {\n        window.location.href = \'/membretes\';\n      },\n      eliminarLogo() {\n        this.logo = \'\';\n        this.registro.logo = \'\';\n        this.registro.dimensiones = \'\';\n        this.registro.tamano = \'\';\n        this.imagenOriginal = \'\';\n        this.imagenCortada = \'\';\n        this.$refs.cropper.destroy();\n        this.forzarRenderizado();\n      },\n      cambiar() {\n        this.forzarRenderizado();\n        this.definirResolucionInicial();\n      },\n      forzarRenderizado() {\n        this.componentKey += 1;\n      },\n      definirResolucionInicial() {\n        Vue.set(this.registro, \'resolucion\', this.registro.distribucion === \'IM\' ? 2000 : 900);\n      }\n    },\n    computed: {\n      resolucionMinima() {\n        return this.registro.distribucion === \'IM\' ? 1000 : 300;\n      },\n      resolucionMedia() {\n        return this.registro.distribucion === \'IM\' ? 1500 : 450;\n      },\n      resolucionMaxima() {\n        return this.registro.distribucion === \'IM\' ? 2000 : 900;\n      },\n    }\n  }\n<\/script>\n\n<style scoped>\n  .imagen-original, .vista-previa {\n    border: 1px solid #ccd0d2;\n    border-radius: 4px;\n    background-color: #d9d9d9;\n  }\n\n  .imagen-original {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 300px;\n  }\n\n  .vista-previa {\n    height: 160px;\n    overflow: auto;\n    padding: 5px;\n    text-align: center;\n  }\n\n  .vista-previa img {\n    max-height: 140px;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},9971:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".radio{margin-bottom:10px;margin-top:10px}","",{version:3,sources:["webpack://./resources/js/components/clientes/modals/EntregarResultadosModal.vue"],names:[],mappings:"AAyUA,OAEA,kBAAA,CADA,eAEA",sourcesContent:['<template>\n  <div class="modal fade" id="entregarResultadosModal" tabindex="-1" role="dialog">\n    <alerta ref="alerta"></alerta>\n    <div class="modal-dialog" role="document">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h4 class="modal-title">\n            {{ titulo }}\n          </h4>\n\n          <datos-orden\n            v-if="orden"\n            :mostrar-numero-orden="true"\n            :mostrar-estado-orden="true"\n            :mostrar-fecha-orden="false"\n            :mostrar-nombre-usuario-ingresa="false"\n            :mostrar-identificacion="true"\n            :mostrar-fecha-nacimiento="false"\n            :mostrar-sexo="false"\n            :mostrar-edad="false"\n            :mostrar-poliza="false"\n            :mostrar-telefono="false"\n            :mostrar-correo="false"\n            :mostrar-direccion="false"\n            :mostrar-cliente="false"\n            :mostrar-tipo-atencion="false"\n            :mostrar-servicio="false"\n            :mostrar-medico="esMedico"\n            :orden="orden"\n          />\n        </div>\n\n        <div class="modal-body">\n          <template v-if="esCorreo">\n            Va a enviar los resultados al correo:\n          </template>\n          <template v-if="esWhatsApp">\n            Va a enviar los resultados al número de celular:\n          </template>\n\n          <br>\n          <strong>{{ destinatario }}</strong>\n          <div v-if="esCorreo && motivoDestinatarioInvalido" style="color: darkred; font-size: 15px">\n            <strong>{{ motivoDestinatarioInvalido }}</strong>\n          </div>\n          <br>\n\n          <div class="radio">\n            <label>\n              <input\n                name="lang"\n                type="radio"\n                value="esEn"\n                v-model="lang"\n                @click="langClick">\n              Etiquetas en Español/Inglés\n            </label>\n          </div>\n\n          <div class="radio">\n            <label>\n              <input\n                name="lang"\n                type="radio"\n                value="en"\n                v-model="lang"\n                @click="langClick">\n              Etiquetas en Inglés\n            </label>\n          </div>\n\n          <div v-show="detallesOrdenes.length > 0">\n            Escoger exámenes:\n          </div>\n          <div class="checkbox" v-for="detalleOrden in detallesOrdenes">\n            <label>\n              <input type="checkbox" :value="detalleOrden.id" v-model="detallesOrdenesSeleccionados">\n              {{ detalleOrden.examen }}\n            </label>\n          </div>\n\n          ¿Está seguro?\n        </div>\n        <div class="modal-footer">\n          <div v-if="esWhatsApp" class="checkbox" style="float: left">\n            <label>\n              <input\n                name="lang"\n                type="checkbox"\n                value="1"\n                v-model="whatsappDesktop"\n                @change="cambioWhatsAppDesktop">\n              WhatsApp Desktop\n            </label>\n          </div>\n\n          <button type="button" id="botonCancelar" class="btn btn-default" data-dismiss="modal" :disabled="procesando">\n            Cancelar\n          </button>\n          <button\n            :id="esCorreo?\'enviarCorreo\':\'enviarWhatsApp\'"\n            type="button"\n            class="btn btn-primary"\n            @click="enviar"\n            :disabled="deshabilitarEnvio">\n            <i\n              class="fa-fw"\n              :class="{\'fas fa-envelope\': esCorreo, \'fab fa-whatsapp\': esWhatsApp}"\n              v-show="!procesando">\n            </i>\n            <i class="fas fa-spinner fa-spin fa-fw" v-show="procesando" aria-hidden="true"/>\n            Enviar\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {ErroresServicioEntregas} from "../../../support/constantes";\n  import DatosOrden from "../../comunes/DatosOrden";\n\n  export default {\n    components: {\n      DatosOrden,\n    },\n    props: {\n      actualizarDatos: {type: Boolean, default: false},\n    },\n    data() {\n      return {\n        procesando: false,\n        esMedico: false,\n        formaEntrega: \'\',\n        orden: {},\n        destinatario: \'\',\n        lang: \'\',\n        whatsappDesktop: \'\',\n        detallesOrdenes: [],\n        detallesOrdenesSeleccionados: [],\n        estadoEntrega: {\n          destinatario: \'\',\n          cantidad: 0,\n          minutos: 0,\n        },\n      }\n    },\n    mounted() {\n      $(\'#entregarResultadosModal\').on(\'show.bs.modal\', e => {\n        this.formaEntrega = $(e.relatedTarget).data(\'forma-entrega\');\n        this.orden = $(e.relatedTarget).data(\'orden\');\n        this.destinatario = $(e.relatedTarget).data(\'destinatario\');\n\n        const esMedico = $(e.relatedTarget).data(\'es-medico\');\n        this.esMedico = esMedico ? esMedico : false;\n\n        const detallesOrdenes = $(e.relatedTarget).data(\'detalles-ordenes\');\n        this.detallesOrdenes = detallesOrdenes ? detallesOrdenes : [];\n\n        this.verificarEntregaPorDestinatario();\n\n        if (this.esWhatsApp) {\n          this.whatsappDesktop = localStorage.getItem(\'whatsapp-desktop\') === \'true\';\n        }\n      });\n      $(\'#entregarResultadosModal\').on(\'hide.bs.modal\', e => {\n        this.formaEntrega = \'\';\n        this.orden = {};\n        this.destinatario = \'\';\n        this.lang = \'\';\n        this.detallesOrdenes = [];\n        this.detallesOrdenesSeleccionados = [];\n        this.estadoEntrega.destinatario = \'\'\n        this.estadoEntrega.cantidad = 0;\n        this.estadoEntrega.minutos = 0;\n      });\n    },\n    methods: {\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      mostrarAdvertencia(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      enviar() {\n        this.procesando = true;\n\n        if (this.motivoDestinatarioInvalido) {\n          this.mostrarErrores(\'Error\', this.motivoDestinatarioInvalido);\n          return;\n        }\n\n        if (this.esCorreo) {\n          this.enviarCorreo();\n        }\n\n        if (this.esWhatsApp) {\n          this.enviarWhatsApp();\n        }\n      },\n      enviarCorreo() {\n        const parametrosLang = this.lang ? `lang=${this.lang}&` : \'\';\n        axios\n          .post(`/api/entregas/resultados/${this.orden.id}/correo?${parametrosLang}actualizarDatos=${this.actualizarDatos}&${this.detallesOrdenesSeleccionadosParaEnviarQueryString}`)\n          .then(({data: {data}}) => {\n            this.$emit(\'correo-electronico-enviado\', data);\n            $(\'#entregarResultadosModal\').modal(\'toggle\');\n          })\n          .catch(error => {\n            if (!error.response) {\n              console.error(\'Error al enviar resultados\', error.response);\n              this.mostrarErrores(\'Error al enviar resultados\');\n              return;\n            }\n\n            const data = error.response.data;\n            if (data.type === \'WARNING\') {\n              this.mostrarAdvertencia(data.messages);\n            } else {\n              const errors = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al enviar resultados\', errors)\n            }\n          })\n          .then(() => this.procesando = false);\n      },\n      enviarWhatsApp() {\n        const params = {\n          lang: this.lang,\n          telefonoCelular: this.destinatario,\n        };\n\n        axios\n          .get(`/api/entregas/resultados/${this.orden.id}/whatsapp`, {params})\n          .then(({data: {data}}) => {\n\n            if (this.whatsappDesktop) {\n              window.location = `whatsapp://send?phone=${data.destinatario}&text=${data.textoMensaje}`;\n              this.$emit(\'whatsapp-enviado\', data.orden);\n              $(\'#entregarResultadosModal\').modal(\'toggle\');\n              return;\n            }\n            const url = `https://wa.me/${data.destinatario}/?text=${data.textoMensaje}`;\n\n            window.open(url, \'_blank\', \'height=600,width=900,left=20,top=29,scrollbars=no,menubar=no\');\n\n            this.$emit(\'whatsapp-enviado\', data.orden);\n            $(\'#entregarResultadosModal\').modal(\'toggle\');\n          })\n          .catch(error => {\n            const errors = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al enviar WhatsApp\', errors)\n          })\n          .then(() => this.procesando = false);\n      },\n      verificarEntregaPorDestinatario() {\n        if (this.esWhatsApp) {\n          return;\n        }\n\n        const params = {destinatario: this.destinatario, numeroOrden: this.orden.numero_orden};\n        axios\n          .get(`/api/entregas/verificar`, {params})\n          .then(({data: {data}}) => {\n            this.estadoEntrega = data;\n          })\n          .catch(error => {\n            const errors = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al verificar entregas\', errors)\n          })\n          .then(() => {\n          });\n      },\n      langClick(event) {\n        if (this.lang === event.target.value) {\n          this.lang = \'\';\n        }\n      },\n      cambioWhatsAppDesktop(event) {\n        if (event.target.checked) {\n          localStorage.setItem(\'whatsapp-desktop\', event.target.checked);\n        } else {\n          localStorage.removeItem(\'whatsapp-desktop\');\n        }\n      }\n    },\n    computed: {\n      detallesOrdenesSeleccionadosParaEnviarQueryString() {\n        if (this.detallesOrdenesSeleccionados.length > 0) {\n          return \'seleccionados[]=\' + this.detallesOrdenesSeleccionados.join(\'&seleccionados[]=\');\n        }\n        return \'\';\n      },\n      esCorreo() {\n        return this.formaEntrega === \'CORREO\';\n      },\n      esWhatsApp() {\n        return this.formaEntrega === \'WHATSAPP\';\n      },\n      titulo() {\n        if (this.esCorreo) {\n          return \'Entregar por correo electrónico\';\n        }\n        if (this.esMedico) {\n          return \'Entregar por WhatsApp a médico\';\n        }\n\n        return \'Entregar por WhatsApp a paciente\';\n      },\n      deshabilitarEnvio() {\n        return this.motivoDestinatarioInvalido || this.procesando || !this.destinatario || (this.detallesOrdenes.length > 0 && this.detallesOrdenesSeleccionados.length === 0);\n      },\n      motivoDestinatarioInvalido() {\n        const mensaje = Object.entries(ErroresServicioEntregas).find(([key, val]) => this.estadoEntrega.destinatario && this.estadoEntrega.destinatario.toLowerCase().includes(key));\n        return mensaje && mensaje.length > 1 ? mensaje[1] : \'\';\n      }\n    }\n  }\n<\/script>\n<style>\n  .radio {\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},8357:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".checkbox[data-v-5f982fad],.radio[data-v-5f982fad]{margin-bottom:5px;margin-top:5px}","",{version:3,sources:["webpack://./resources/js/components/clientes/modals/ImprimirModal.vue"],names:[],mappings:"AA+zDA,mDAGA,iBAAA,CADA,cAEA",sourcesContent:['<template>\n  <div>\n    <div id="modalImprimir" class="modal fade" tabindex="-1" role="dialog">\n      <div class="modal-dialog" :class="{\'modal-lg\':esResultados || esEtiquetas || esAsistencia }" role="document">\n        <div class="modal-content">\n          <form @submit.prevent="imprimir">\n            <div class="modal-header">\n              <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                <span aria-hidden="true">&times;</span>\n              </button>\n              <h4 class="modal-title">{{ titulo }}</h4>\n              <datos-orden\n                v-if="!esRemision"\n                :mostrar-numero-orden="true"\n                :mostrar-fecha-nacimiento="false"\n                :mostrar-sexo="false"\n                :mostrar-poliza="false"\n                :mostrar-telefono="false"\n                :mostrar-correo="false"\n                :mostrar-direccion="false"\n                :mostrar-saldo="esRecibo || esResultados"\n                :orden="registro"\n              />\n            </div>\n            <div class="modal-body">\n              <alerta ref="alerta"></alerta>\n\n              <div class="row">\n\n                <div v-if="esResultados || esEtiquetas || esAsistencia" class="col-md-8">\n\n                  <div id="resultados" class="collapse in" style="padding-top: 5px">\n                    <div v-if="opciones.existenExamenesValidados!==false || opciones.incluirReportados"\n                         class="btn-group btn-toggle btn-group-sm">\n                      <button\n                        type="button"\n                        class="btn btn-default btn-sm"\n                        :class="{\'btn-primary\': filtros.tipo===\'examenes\'}"\n                        @click="seleccionarTipoFiltro(\'examenes\')">\n                        Exámenes\n                      </button>\n                      <button\n                        v-if="esResultados"\n                        type="button"\n                        class="btn btn-default btn-sm"\n                        :class="{\'btn-primary\': filtros.tipo===\'seccion\'}"\n                        @click="seleccionarTipoFiltro(\'seccion\')">\n                        Sección\n                      </button>\n                      <button\n                        v-if="esResultados"\n                        type="button"\n                        class="btn btn-default btn-sm"\n                        :class="{\'btn-primary\': filtros.tipo===\'examenAcreditado\'}"\n                        @click="seleccionarTipoFiltro(\'examenAcreditado\')">\n                        Acreditación\n                      </button>\n                      <button\n                        v-if="esEtiquetas"\n                        type="button"\n                        class="btn btn-default btn-sm"\n                        :class="{\'btn-primary\': filtros.tipo===\'muestras\'}"\n                        @click="seleccionarTipoFiltro(\'muestras\')">\n                        Muestras\n                      </button>\n                    </div>\n\n                    <template v-if="filtros.tipo === \'examenes\'">\n                      <div class="row" style="padding-top: 12px">\n                        <div class="col-md-12" style="max-height: 300px; overflow-y: auto">\n                          <i\n                            v-show="cargandoDetallesOrden"\n                            class="fas fa-spinner fa-spin fa-fw"></i>\n                          <template v-if="!cargandoDetallesOrden && detallesOrdenParaImprimir.length===0">\n                            No existen exámenes validados\n                          </template>\n\n                          <table\n                            v-if="detallesOrdenParaImprimir.length>0"\n                            class="table table-striped table-bordered table-hover table-condensed">\n                            <thead>\n                            <tr>\n                              <th class="col-sm-1 text-center">\n                                <input type="checkbox" @change="alternarSeleccionDetallesOrden"\n                                       v-model="filtros.seleccionadosTodosDetallesOrden"/>\n                              </th>\n                              <th class="text-left">\n                                Examen\n                                <span class="badge cursor-menu" title="Seleccionados" rel="tooltip"\n                                      v-show="filtros.detallesOrdenIds.length > 0">\n                                  {{ filtros.detallesOrdenIds.length }}\n                                </span>\n                              </th>\n                              <th v-if="esEtiquetas" class="col-sm-1 text-center">Muestra</th>\n                              <th class="col-sm-1 text-center">Estado</th>\n                              <th v-if="esResultados" class="col-sm-1 text-left">Impreso</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr v-for="detalleOrden in detallesOrdenParaImprimir"\n                                @click="seleccionarDetalleOrden(detalleOrden)"\n                                class="puntero">\n                              <td class="text-center">\n                                <input\n                                  type="checkbox"\n                                  :value="detalleOrden.id"\n                                  :disabled="!opciones.incluirMuestrasPendientes && detalleOrden.todasMuestrasPendientes"\n                                  v-model="filtros.detallesOrdenIds">\n                              </td>\n                              <td class="text-left">{{ detalleOrden.examen.nombre }}</td>\n                              <td v-if="esEtiquetas" class="text-center">\n                                <template v-if="detalleOrden.estado === \'X\'">\n                                  No procesada\n                                </template>\n                                <template v-else-if="detalleOrden.muestras.length === 1">\n                                  {{ detalleOrden.todasMuestrasPendientes ? \'Pendiente\' : \'Recibida\' }}\n                                </template>\n                                <template v-else>\n                                  {{ detalleOrden.muestraPendiente ? \'Varias muestras\' : \'Recibida\' }}\n                                </template>\n                              </td>\n                              <td class="text-center">\n                                <detalle-orden-estado :estado="detalleOrden.estado"/>\n                              </td>\n                              <td v-if="esResultados" class="text-center">\n                                <i\n                                  v-if="detalleOrden.fecha_imprime"\n                                  rel="tooltip"\n                                  data-html="true"\n                                  :title="`<strong>Impreso por:</strong> ${detalleOrden.impreso_por.nombre_usuario}<br><strong>Fecha impreso:</strong> ${detalleOrden.fecha_imprime}`"\n                                  class="fas fa-print"></i>\n                                <i\n                                  v-if="detalleOrden.fecha_imprime"\n                                  class="icon-stack-2x fa fa-check text-gris">\n                                </i>\n                              </td>\n                            </tr>\n                            </tbody>\n                          </table>\n                        </div>\n                      </div>\n                    </template>\n                    <template v-if="filtros.tipo === \'seccion\'">\n                      <div class="row" style="padding-top: 15px; padding-bottom: 15px">\n                        <div class="col-md-10">\n                          <v-select\n                            id="filtrosSecciones"\n                            class="form-control input-sm"\n                            placeholder="Seleccione..."\n                            v-model="filtros.seccionId"\n                            :options="secciones"\n                            :loading="cargandoSecciones"\n                            label="nombre"\n                            :reduce="opcion => opcion.id">\n                            <template #no-options>No existen exámenes validados</template>\n                            <template #spinner="{ loading }">\n                              <div v-show="loading">\n                                <i class="fas fa-spinner fa-spin fa-fw"/>\n                              </div>\n                            </template>\n                          </v-select>\n                        </div>\n                      </div>\n                    </template>\n                    <template v-if="filtros.tipo === \'examenAcreditado\'">\n                      <div class="row" style="padding-top: 15px">\n                        <div class="col-md-12">\n                          <div class="radio">\n                            <label>\n                              <input\n                                id="acreditados"\n                                name="acreditados"\n                                type="radio"\n                                :value="true"\n                                v-model="filtros.examenAcreditado">\n                              Acreditados\n                            </label>\n                          </div>\n                        </div>\n                        <div class="col-md-12">\n                          <div class="radio">\n                            <label>\n                              <input\n                                id="noAcreditados"\n                                type="radio"\n                                name="acreditados"\n                                :value="false"\n                                v-model="filtros.examenAcreditado">\n                              No Acreditados\n                            </label>\n                          </div>\n                        </div>\n                      </div>\n                      <br>\n                    </template>\n                    <template v-if="filtros.tipo === \'muestras\'">\n                      <div class="row" style="padding-top: 12px">\n                        <div class="col-md-12">\n                          <i\n                            v-show="cargandoDetallesOrden"\n                            class="fas fa-spinner fa-spin fa-fw"></i>\n                          <table\n                            v-if="muestras.length>0"\n                            class="table table-striped table-bordered table-hover table-condensed">\n                            <thead>\n                            <tr>\n                              <th class="col-sm-1 text-center">\n                                <input\n                                  type="checkbox"\n                                  @change="alternarSeleccionMuestras"\n                                  v-model="filtros.seleccionadosTodosMuestras"/>\n                              </th>\n                              <th class="text-left">\n                                Muestra\n                                <span class="badge cursor-menu" title="Seleccionados" rel="tooltip"\n                                      v-show="filtros.muestrasIds.length > 0">\n                                  {{ filtros.muestrasIds.length }}\n                                </span>\n                              </th>\n                              <th class="text-center">Etiquetas</th>\n                              <th class="col-sm-1 text-center">Estado</th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr\n                              v-for="muestra in muestras"\n                              class="puntero">\n                              <td class="col-sm-1 text-center" @click="seleccionarMuestra(muestra)">\n                                <input\n                                  type="checkbox"\n                                  :value="muestra.id"\n                                  :disabled="!opciones.incluirMuestrasPendientes && [\'PENDIENTE\'].includes(muestra.pivot.estado)"\n                                  v-model="filtros.muestrasIds">\n                              </td>\n                              <td class="col-sm-7 text-left" @click="seleccionarMuestra(muestra)">\n                                {{ muestra.nombre }}\n                              </td>\n                              <td class="col-sm-2">\n                                <input\n                                  type="number"\n                                  class="form-control input-xs text-right"\n                                  min="0"\n                                  max="20"\n                                  step="1"\n                                  v-model="muestra.numero_etiquetas">\n                              </td>\n                              <td class="col-sm-2 text-center" @click="seleccionarMuestra(muestra)">\n                                {{ muestra.pivot.estado | estadoMuestra }}\n                              </td>\n                            </tr>\n                            </tbody>\n                          </table>\n\n                        </div>\n                      </div>\n                      <br>\n                    </template>\n                  </div>\n\n                </div>\n                <div\n                  :class="{\'col-md-4\':esResultados || esEtiquetas || esAsistencia,\n                \'col-md-12\':esRecibo || esRemision || esConsentimientoInformado || esCarnetGrupoSanguineo\n                || esPruebaPostprandial || esCurvaGlocosa || esGestionMuestra || esFlujoVaginal\n                || esAntigenoChlamydiaTrachomatis || esCitologiaVaginal || esVirusPapilomaHumano}">\n                  <div class="row">\n                    <div class="col-md-12 form-group">\n                      <label for="impresora">\n                        Impresora\n                      </label>\n                      <select\n                        id="impresora"\n                        name="impresora"\n                        class="form-control input-sm"\n                        @change="impresoraSeleccionada"\n                        v-model="impresora"\n                        required>\n                        <option v-for="impresora in impresoras" :value="impresora">\n                          {{ impresora }}\n                        </option>\n                      </select>\n                    </div>\n                  </div>\n                  <div class="row">\n                    <div class="col-md-12 form-group" v-if="!(esEtiquetas || esRemision || esCarnetGrupoSanguineo\n                    || esPruebaPostprandial || esCurvaGlocosa || esGestionMuestra || esFlujoVaginal\n                    || esAntigenoChlamydiaTrachomatis || esCitologiaVaginal || esVirusPapilomaHumano)">\n                      <label for="tamanoPapel">Tamaño de papel</label>\n                      <div v-show="!(esAsistencia)" class="text-uppercase">\n                        {{ this.tamanoPapel ? this.tamanoPapel : \'\' }}\n                      </div>\n                      <select\n                        id="tamanoPapel"\n                        class="form-control input-sm"\n                        @change="cambioTamanoPapel"\n                        v-show="esAsistencia"\n                        v-model="tamanoPapel"\n                        required>\n                        <option value="a4">A4</option>\n                        <option value="a5">A5</option>\n                      </select>\n                    </div>\n                    <div class="col-md-12 form-group" v-if="!esEtiquetas && !esImpresorsaPdf">\n                      <label for="copias">Copias</label>\n                      <input\n                        id="copias"\n                        type="number"\n                        class="form-control input-sm"\n                        min="0"\n                        max="10"\n                        step="1"\n                        @change="cambioCopias"\n                        v-model="copias">\n                    </div>\n                    <div class="col-md-12" v-if="esEtiquetas">\n                      <label for="impresora">Tamaño de etiqueta (mm)</label>\n                    </div>\n                    <div class="col-md-12 form-group" v-if="esEtiquetas">\n                      <strong>Ancho:</strong> {{ etiqueta.ancho }} <strong>Alto:</strong> {{ etiqueta.alto }}\n                    </div>\n                  </div>\n                  <template v-if="esAsistencia">\n                    <legend class="separador">\n                      <h4>\n                        <a\n                          href="#opciones">\n                          Configuración de impresión\n                        </a>\n                      </h4>\n                    </legend>\n                    <div class="row">\n                      <div class="col-md-12 form-group">\n                        <label for="ciudad">Ciudad</label>\n                        <input\n                          id="ciudad"\n                          type="text"\n                          class="form-control input-sm"\n                          @blur="cambioCiudad"\n                          v-model="opciones.ciudad">\n                      </div>\n                      <div class="col-md-12 form-group" v-show="mostrarIncluirMembrete">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              v-model="opciones.incluirMembrete">\n                            Incluir membrete\n                          </label>\n                        </div>\n                      </div>\n                      <div class="col-md-12 form-group">\n                        <label for="horaIngreso" class="control-label no-salto-linea">\n                          Hora de ingreso\n                        </label>\n                        <div class="input-group">\n                          <input\n                            id="horaIngreso"\n                            type="text"\n                            class="form-control input-sm"\n                            v-model="opciones.horaIngreso"\n                            autocomplete="off"\n                            readonly\n                            @click="abrirModalHora(\'horaIngresoModal\')"\n                          />\n                          <div class="input-group-btn">\n                            <button\n                              type="button"\n                              data-toggle="modal"\n                              data-target="#horaIngresoModal"\n                              title="Definir hora"\n                              class="btn btn-sm btn-default">\n                              <i aria-hidden="true" class="far fa-clock"></i>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-md-12 form-group">\n                        <label for="horaSalida" class="control-label no-salto-linea">\n                          Hora de salida\n                        </label>\n                        <div class="input-group">\n                          <input\n                            id="horaSalida"\n                            type="text"\n                            class="form-control input-sm"\n                            v-model="opciones.horaSalida"\n                            autocomplete="off"\n                            readonly\n                            @click="abrirModalHora(\'horaSalidaModal\')"\n                          />\n                          <div class="input-group-btn">\n                            <button\n                              type="button"\n                              data-toggle="modal"\n                              data-target="#horaSalidaModal"\n                              title="Definir hora"\n                              class="btn btn-sm btn-default">\n                              <i aria-hidden="true" class="far fa-clock"></i>\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-md-12">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              v-model="opciones.firmaUsuarioIngresa"\n                              @click="cambioFirmaUsuarioIngresa">\n                            Firma de usuario que ingresó la orden\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  </template>\n                  <template v-if="esResultados">\n                    <legend class="separador">\n                      <h4>\n                        <a\n                          href="#opciones">\n                          Configuración de impresión\n                        </a>\n                      </h4>\n                    </legend>\n                    <div class="row">\n                      <div class="col-md-12">\n                        <div class="checkbox" :class="{disabled: opciones.incluirReportados}">\n                          <label>\n                            <input\n                              :disabled="opciones.incluirReportados"\n                              type="checkbox"\n                              v-model="opciones.registrarImpresion">\n                            Registrar impresión\n                          </label>\n                        </div>\n                      </div>\n                      <div class="col-md-12" v-show="mostrarIncluirMembrete">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              v-model="opciones.incluirMembrete">\n                            Incluir membrete\n                          </label>\n                        </div>\n                      </div>\n                      <div class="col-md-12" v-show="mostrarIncluirFirma">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              v-model="opciones.incluirFirma">\n                            Incluir firma\n                          </label>\n                        </div>\n                      </div>\n                      <div class="col-md-12">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              v-model="opciones.incluirReportados"\n                              @change="cambioIncluirReportados">\n                            Vista previa con exámenes reportados\n                          </label>\n                        </div>\n                      </div>\n                      <div class="col-md-12">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              v-model="opciones.seccionPorHoja">\n                            Una sección en cada hoja\n                          </label>\n                        </div>\n                      </div>\n                      <div class="col-md-12">\n                        <div class="radio">\n                          <label>\n                            <input\n                              name="lang"\n                              type="radio"\n                              value="esEn"\n                              v-model="opciones.lang"\n                              @click="langClick">\n                            Etiquetas en Español/Inglés\n                          </label>\n                        </div>\n                      </div>\n                      <div class="col-md-12">\n                        <div class="radio">\n                          <label>\n                            <input\n                              name="lang"\n                              type="radio"\n                              value="en"\n                              v-model="opciones.lang"\n                              @click="langClick">\n                            Etiquetas en Inglés\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  </template>\n                  <template v-if="esEtiquetas">\n                    <legend class="separador">\n                      <h4>\n                        <a\n                          href="#opciones">\n                          Configuración de impresión\n                        </a>\n                      </h4>\n                    </legend>\n                    <div class="row">\n                      <div class="col-md-12 form-group">\n                        <div class="row">\n                          <div class="col-md-6">\n                            <label>\n                              Datos de paciente\n                            </label>\n                          </div>\n                          <div class="col-md-6">\n                            <input\n                              type="number"\n                              class="form-control input-xs text-right"\n                              min="0"\n                              max="10"\n                              step="1"\n                              v-model="opciones.etiquetasDatosPaciente">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-md-12 form-group">\n                        <div class="row">\n                          <div class="col-md-6">\n                            <label class="no-salto-linea">\n                              QR\n                            </label>\n                          </div>\n                          <div class="col-md-6">\n                            <input\n                              type="number"\n                              class="form-control input-xs text-right"\n                              min="0"\n                              max="10"\n                              step="1"\n                              v-model="opciones.etiquetasQr">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-md-12">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              @click="muestrasPendientesSeleccionado"\n                              v-model="opciones.incluirMuestrasPendientes">\n                            Incluir muestras pendientes\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row" v-if="$usuario.nombreUsuario === \'master\'">\n                      <div class="col-md-12">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              v-model="opciones.ocultarTexto">\n                            Ocultar texto\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row" v-if="$usuario.nombreUsuario === \'master\'">\n                      <div class="col-md-12 form-group">\n                        <div class="row">\n                          <div class="col-md-6">\n                            <label>\n                              Código\n                            </label>\n                          </div>\n                          <div class="col-md-6">\n                            <input\n                              type="text"\n                              class="form-control input-xs"\n                              v-model="opciones.codigoBarras"\n                            >\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </template>\n                  <template v-if="esRemision">\n                    <legend class="separador">\n                      <h4>\n                        <a\n                          href="#opciones">\n                          Configuración de impresión\n                        </a>\n                      </h4>\n                    </legend>\n                    <div class="row">\n                      <div class="col-md-12">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              v-model="opciones.resumido"\n                              @change="cambioResumido"\n                            >\n                            Resumido\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-md-12">\n                        <div class="checkbox">\n                          <label>\n                            <input\n                              type="checkbox"\n                              v-model="opciones.excluirObservaciones"\n                              @change="cambioExcluirObservaciones"\n                            >\n                            Sin observaciones\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  </template>\n                </div>\n              </div>\n\n              <a id="link-descargas" target="_blank" style="display: none"></a>\n\n            </div>\n            <div class="modal-footer">\n              <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cerrar</button>\n              <button\n                :id="idImprimir"\n                type="submit"\n                class="btn btn-primary btn-sm"\n                :disabled="!puedeImprimir">\n                <i class="fas fa-print fa-fw" v-show="!procesando"></i>\n                <i class="fas fa-spinner fa-spin fa-fw" v-show="procesando"></i>\n                &nbsp;{{ etiquetaImprimir }}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    <hora-modal\n      id="horaIngresoModal"\n      :hora="opciones.horaIngreso"\n      @hora-seleccionada="horaSeleccionada($event, \'horaIngreso\')"\n    />\n    <hora-modal\n      id="horaSalidaModal"\n      :hora="opciones.horaSalida"\n      @hora-seleccionada="horaSeleccionada($event, \'horaSalida\')"\n    />\n  </div>\n</template>\n\n<script>\n  import DatosOrden from "../../comunes/DatosOrden";\n  import DetalleOrdenEstado from "../../comunes/DetalleOrdenEstado";\n  import HoraModal from "../modals/HoraModal";\n  import {EstadoMuestra, TipoDocumento} from "../../../support/constantes";\n\n  export default {\n    components: {\n      DatosOrden,\n      DetalleOrdenEstado,\n      HoraModal\n    },\n    props: {\n      urlApiLocal: {type: String},\n      mostrarIncluirMembrete: {type: Boolean, default: false},\n      mostrarIncluirFirma: {type: Boolean, default: false},\n      habilitarTooltip: {type: Boolean, default: false},\n    },\n    data() {\n      return {\n        procesando: false,\n        cargandoSecciones: false,\n        cargandoDetallesOrden: false,\n        tipoDocumento: \'\',\n        registro: {},\n        detallesOrden: [],\n        muestras: [],\n        impresora: \'PDF\',\n        impresoras: [],\n        etiqueta: [],\n        tamanoPapel: \'\',\n        copias: 1,\n        secciones: [],\n        carnetGrupoSanguineo: {\n          detalleOrdenId: \'\'\n        },\n        opciones: {\n          lang: \'\',\n          registrarImpresion: false,\n          seccionPorHoja: false,\n          incluirMembrete: false,\n          incluirFirma: false,\n          incluirReportados: false,\n          existenExamenesValidados: null,\n          etiquetasDatosPaciente: 0,\n          etiquetasQr: 0,\n          incluirMuestrasPendientes: false,\n          ocultarTexto: false,\n          codigoBarras: \'\',\n          ciudad: \'\',\n          resumido: false,\n          excluirObservaciones: false,\n          horaIngreso: \'\',\n          horaSalida: \'\',\n          firmaUsuarioIngresa: false\n        },\n        filtros: {\n          tipo: \'\',\n          seleccionadosTodosDetallesOrden: false,\n          seleccionadosTodosMuestras: false,\n          detallesOrdenIds: [],\n          muestrasIds: [],\n          seccionId: \'\',\n          examenAcreditado: null,\n        }\n      }\n    },\n    mounted() {\n      if (this.habilitarTooltip) {\n        $(\'body\').tooltip({\n          selector: \'[rel="tooltip"]\',\n          container: \'body\',\n          trigger: \'hover\'\n        });\n      }\n\n      $(\'#modalImprimir\').on(\'show.bs.modal\', e => {\n        if (e.target.id === \'modalImprimir\' && e.relatedTarget && !(e.relatedTarget instanceof HTMLElement)) {\n          this.cargarDatos(e.relatedTarget);\n        }\n      });\n\n      $(\'#modalImprimir\').on(\'hide.bs.modal\', e => {\n        if (e.target.id === \'modalImprimir\') {\n          this.limpiar();\n        }\n      });\n    },\n    methods: {\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      mostrarAdvertencia(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      cargarDatos(parametros) {\n        if (parametros.registro) {\n          this.registro = parametros.registro;\n          this.tipoDocumento = parametros.tipoDocumento;\n          this.opciones.horaIngreso = this.fechaALocal(parametros.registro.fecha_orden, \'HH:mm:ss\')\n\n          this.cargarTipo(parametros);\n\n          this.tamanoPapel = this.esRecibo ? \'a5\' : parametros.tamanoPapel;\n          this.copias = 1;\n          this.opciones.existenExamenesValidados = parametros.existenExamenesValidados;\n\n          if (this.esAsistencia) {\n            const ciudad = localStorage.getItem(\'ciudad-certificado-asistencia\');\n\n            if (ciudad) {\n              this.opciones.ciudad = ciudad;\n\n            }\n            this.opciones.firmaUsuarioIngresa = localStorage.getItem(\'firma-usuario-ingresa-certificado-asistencia\') === \'true\';\n            const tamanoPapel = localStorage.getItem(\'tamano-papel-certificado-asistencia\');\n            if (tamanoPapel) {\n              this.tamanoPapel = tamanoPapel;\n            }\n          }\n\n          if (this.esRecibo) {\n            const copias = localStorage.getItem(\'copias-recibo\');\n            if (copias > 0) {\n              this.copias = copias;\n            }\n          }\n\n          if (this.esRemision) {\n            this.opciones.resumido = localStorage.getItem(\'remision-resumido\') === \'true\';\n            this.opciones.excluirObservaciones = localStorage.getItem(\'remision-excluir-observaciones\') === \'true\';\n          }\n\n          this.cargarImpresoras();\n\n          if (this.esEtiquetas) {\n            this.cargarConfiguracionesEtiquetas();\n          }\n        }\n      },\n      limpiar() {\n        this.registro = {};\n        this.detallesOrden = [];\n        this.muestras = [];\n        this.opciones.registrarImpresion = false;\n        this.opciones.incluirReportados = false;\n        this.opciones.seccionPorHoja = false;\n        this.opciones.incluirMembrete = false;\n        this.opciones.incluirFirma = false;\n        this.opciones.lang = \'\';\n        this.opciones.etiquetasDatosPaciente = 0;\n        this.opciones.etiquetasQr = 0;\n        this.opciones.incluirMuestrasPendientes = false;\n        this.opciones.ciudad = \'\';\n        this.opciones.existenExamenesValidados = null;\n        this.opciones.ocultarTexto = false;\n        this.opciones.horaSalida = \'\';\n        this.opciones.horaIngreso = \'\';\n        this.opciones.firmaUsuarioIngresa = false;\n        this.filtros.detallesOrdenIds = [];\n        this.filtros.seccionId = \'\';\n        this.filtros.muestrasIds = [];\n        this.filtros.examenAcreditado = null;\n        this.secciones = [];\n        this.cargandoSecciones = false;\n        this.procesando = false;\n        this.impresora = \'PDF\';\n        this.carnetGrupoSanguineo.detalleOrdenId = \'\';\n      },\n      cargarTipo(parametros) {\n        this.filtros.tipo = \'examenes\';\n\n        if (this.esResultados) {\n          this.cargarDetallesOrden().then(() => this.seleccionarTodosDetallesOrden());\n        }\n\n        if (this.esAsistencia) {\n          this.cargarDetallesOrden();\n        }\n\n        if (this.esCarnetGrupoSanguineo) {\n          this.cargarDetallesOrden().then(() => {\n            const detalleOrden = this.detallesOrden.filter(({examen}) =>\n              examen.documentos.includes(TipoDocumento.CARNET_GRUPO_SANGUINEO));\n            this.carnetGrupoSanguineo.detalleOrdenId = detalleOrden[0].id;\n          });\n        }\n\n        if (this.esEtiquetas) {\n          this.filtros.tipo = \'muestras\';\n          this.cargarDetallesOrden().then(() => {\n            if (_.isEmpty(parametros.muestrasIds)) {\n              this.seleccionarTodasLasMuestras();\n            } else {\n              this.filtros.muestrasIds = parametros.muestrasIds;\n            }\n          });\n        }\n      },\n      imprimir() {\n        if (this.esEtiquetas) {\n          if (!this.etiqueta.alto || !this.etiqueta.ancho) {\n            this.mostrarErrores(\'Falta configuración de tamaño de etiqueta\');\n            return;\n          }\n\n          if (_.isEmpty(this.filtros.detallesOrdenIds) && _.isEmpty(this.filtros.muestrasIds) && this.opciones.etiquetasDatosPaciente === 0 && this.opciones.etiquetasQr === 0) {\n            this.mostrarErrores(\'No existen etiquetas para imprimir\');\n            return;\n          }\n        }\n\n        this.procesando = true;\n\n        if (this.esImpresorsaPdf) {\n          this.imprimirEnImpresoraPDF();\n          return;\n        }\n\n        this.imprimirEnImpresoraDeComputadora();\n      },\n      imprimirEnImpresoraPDF() {\n        const urlPdf = this.obtenerUrlPdf();\n\n        const features = this.esEtiquetas ? \'height=400,width=700,left=20,top=20,,scrollbars=yes,menubar=no\' : null;\n\n        let ventanaPdf = window.open(urlPdf, \'_blank\', features);\n\n        if (!this.opciones.registrarImpresion) {\n          this.emitirResultadoDespuesDeImprimir();\n          this.procesando = false;\n          return;\n        }\n\n        if (ventanaPdf) {\n          const ordenId = this.registro.id;\n\n          if (navigator.userAgent.indexOf(\'Firefox\') !== -1) {\n            $(ventanaPdf).ready(() => this.obtenerCantidadDetallesOrdenImpresos(ordenId));\n          } else {\n            $(ventanaPdf).on(\'load\', () => this.obtenerCantidadDetallesOrdenImpresos(ordenId));\n          }\n        }\n\n        $(\'#modalImprimir\').modal(\'hide\');\n        this.procesando = false;\n      },\n      imprimirEnImpresoraDeComputadora() {\n        let idDetallesOrden = [];\n\n        Promise\n          .resolve()\n          .then(() => this.descargarPdf())\n          .then((response) => {\n            if (response === undefined) {\n              return undefined;\n            }\n\n            const nombreArhchivo = this.obtenerNombreArchivoDeHeader(response);\n            idDetallesOrden = this.obtenerIdDetallesOrdenDeHeader(response);\n            return this.enviarAOrionPrintServer(nombreArhchivo, response.data);\n          })\n          .then((response) => {\n            if (response === undefined) {\n              return \'error\';\n            }\n\n            if (this.opciones.registrarImpresion && !_.isEmpty(idDetallesOrden)) {\n              return this.registrarResultadosImpresos(idDetallesOrden);\n            }\n\n            return \'exito\';\n          })\n          .then((response) => {\n            if (typeof response === \'object\') {\n              const resultadoRegistroImpresion = response.data.data;\n              const mensaje = this.obtenerMensajePorCantidadDeExamenesImpresos(resultadoRegistroImpresion.cantidadDetallesOrdenImpresos);\n              this.emitirResultadoDespuesDeImprimir(mensaje, resultadoRegistroImpresion);\n            }\n\n            if (response === \'exito\') {\n              this.emitirResultadoDespuesDeImprimir();\n            }\n            this.procesando = false;\n          });\n      },\n      obtenerMensajePorCantidadDeExamenesImpresos(cantidadDetallesOrdenImpresos) {\n        return cantidadDetallesOrdenImpresos !== 1\n          ? `Existen ${cantidadDetallesOrdenImpresos} exámenes impresos`\n          : `Existen ${cantidadDetallesOrdenImpresos} examen impreso`;\n      },\n      obtenerCantidadDetallesOrdenImpresos(ordenId) {\n        axios\n          .get(`/api/ordenes/${ordenId}/impresion/resumen`)\n          .then(({data: {data}}) => {\n            const mensaje = this.obtenerMensajePorCantidadDeExamenesImpresos(data.cantidadDetallesOrdenImpresos);\n            this.emitirResultadoDespuesDeImprimir(mensaje, data);\n            this.procesando = false;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al otbener cantidad de exámenes impresos!\', errores);\n          });\n      },\n      registrarResultadosImpresos(detallesOrdenIds) {\n        const registro = {\n          detallesOrdenIds: detallesOrdenIds\n        };\n        return axios\n          .post(`/api/ordenes/${this.registro.id}/impresion`, registro)\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al registrar impresión de orden!\', errores);\n          });\n      },\n      descargarPdf() {\n        const url = this.obtenerUrlPdf();\n        const headers = {agent: \'print\'}\n        return axios\n          .get(url, {responseType: \'blob\', headers})\n          .catch(() => {\n            this.mostrarErrores(\'Error al imprimir\', \'No existen resultados con las opciones escogidas\');\n          });\n      },\n      obtenerUrlPdf() {\n        if (this.esRecibo) {\n          return `/ordenes/${this.registro.id}/recibo`;\n        }\n\n        if (this.esResultados) {\n          const tipoResultado = this.opciones.incluirReportados ? \'vista-previa\' : \'validado\';\n          const parametros = this.obtenerParametros();\n          return `/reportes/${this.registro.id}/pdf/${tipoResultado}${parametros}`;\n        }\n\n        if (this.esEtiquetas) {\n          const parametros = this.obtenerParametros();\n          return `/ordenes/${this.registro.id}/pdf-etiquetas${parametros}`;\n        }\n\n        if (this.esAsistencia) {\n          const parametros = this.obtenerParametros();\n          return `/ordenes/${this.registro.id}/documentos/certificado-asistencia/pdf${parametros}`;\n        }\n\n        if (this.esRemision) {\n          const parametros = this.obtenerParametros();\n          return `/remisiones/${this.registro.id}/pdf${parametros}`;\n        }\n\n        if (this.esConsentimientoInformado) {\n          return `/ordenes/${this.registro.id}/documentos/consentimiento-informado/pdf`;\n        }\n\n        if (this.esCarnetGrupoSanguineo) {\n          const parametros = this.obtenerParametros();\n          return `/ordenes/${this.registro.id}/documentos/carnet-grupo-sanguineo/pdf${parametros}`;\n        }\n\n        if (this.esPruebaPostprandial) {\n          return `/ordenes/${this.registro.id}/documentos/prueba-postprandial/pdf`;\n        }\n\n        if (this.esCurvaGlocosa) {\n          return `/ordenes/${this.registro.id}/documentos/curva-glucosa/pdf`;\n        }\n\n        if (this.esGestionMuestra) {\n          return `/ordenes/${this.registro.id}/documentos/gestion-muestra/pdf`;\n        }\n\n        if (this.esFlujoVaginal) {\n          const parametros = this.obtenerParametros();\n          return `/ordenes/${this.registro.id}/documentos/citologia/pdf${parametros}`;\n        }\n\n        if (this.esAntigenoChlamydiaTrachomatis) {\n          const parametros = this.obtenerParametros();\n          return `/ordenes/${this.registro.id}/documentos/citologia/pdf${parametros}`;\n        }\n\n        if (this.esCitologiaVaginal) {\n          const parametros = this.obtenerParametros();\n          return `/ordenes/${this.registro.id}/documentos/citologia/pdf${parametros}`;\n        }\n\n        if (this.esVirusPapilomaHumano) {\n          const parametros = this.obtenerParametros();\n          return `/ordenes/${this.registro.id}/documentos/citologia/pdf${parametros}`;\n        }\n\n        return \'#\';\n      },\n      obtenerParametros() {\n        let parametros = {\n          membrete: this.opciones.incluirMembrete ? \'1\' : null,\n          incluirFirma: this.opciones.incluirFirma ? \'1\' : null,\n          resumido: this.opciones.resumido ? \'1\' : null,\n          excluirObservaciones: this.opciones.excluirObservaciones ? \'1\' : null,\n          lang: this.opciones.lang,\n          registrarImpresion: this.opciones.registrarImpresion ? \'1\' : null,\n          seccionPorHoja: this.opciones.seccionPorHoja ? \'1\' : null,\n          etiquetasDatosPaciente: null,\n          etiquetasQr: null,\n          incluirMuestrasPendientes: null,\n          ocultarTexto: this.opciones.ocultarTexto ? this.opciones.ocultarTexto : null,\n          codigoBarras: this.opciones.codigoBarras ? this.opciones.codigoBarras : null,\n          ciudad: this.opciones.ciudad ? this.opciones.ciudad : null,\n          seccionId: this.filtros.seccionId ? this.filtros.seccionId : null,\n          examenAcreditado: this.filtros.examenAcreditado ? this.filtros.examenAcreditado : null,\n          tamanoPapel: this.esAsistencia ? this.tamanoPapel : null,\n          detalleOrdenId: this.esCarnetGrupoSanguineo ? this.carnetGrupoSanguineo.detalleOrdenId : null,\n          horaIngreso: this.esAsistencia ? this.opciones.horaIngreso : null,\n          horaSalida: this.esAsistencia ? this.opciones.horaSalida : null,\n          firmaUsuarioIngresa: this.esAsistencia ? this.opciones.firmaUsuarioIngresa : null,\n          tipoDocumento: (this.esFlujoVaginal || this.esAntigenoChlamydiaTrachomatis\n          || this.esCitologiaVaginal || this.esVirusPapilomaHumano) ? this.tipoDocumento: null,\n          detallesOrdenIds: null,\n          sinEtiquetasMuestra: null\n        };\n\n        if (this.esEtiquetas) {\n          parametros.etiquetasDatosPaciente = this.opciones.etiquetasDatosPaciente;\n          parametros.etiquetasQr = this.opciones.etiquetasQr;\n          parametros.incluirMuestrasPendientes = this.opciones.incluirMuestrasPendientes ? \'1\' : \'0\';\n          if (this.filtros.tipo === \'examenes\') {\n            parametros.sinEtiquetasMuestra = _.isEmpty(this.filtros.detallesOrdenIds);\n          }\n\n          if (this.filtros.tipo === \'muestras\') {\n            parametros.sinEtiquetasMuestra = _.isEmpty(this.filtros.muestrasIds);\n          }\n        }\n\n        if (this.filtros.tipo === \'examenes\') {\n          parametros.detallesOrdenIds = this.filtros.detallesOrdenIds;\n        }\n\n        if (this.esResultados || this.esAsistencia) {\n          parametros.sinEtiquetasMuestra = _.isEmpty(this.filtros.detallesOrdenIds);\n        }\n\n        parametros = this.obtenerParametrosUrl(parametros);\n\n        if (this.filtros.tipo === \'muestras\' && !_.isEmpty(this.filtros.muestrasIds)) {\n          const muestras = [];\n          for (let muestraId of this.filtros.muestrasIds) {\n            const muestra = this.muestras.find(muestra => muestra.id === muestraId);\n            if (muestra) {\n              muestras.push(`muestras[${muestra.id}]=${muestra.numero_etiquetas}`);\n            }\n          }\n\n          parametros = (parametros ? `${parametros}&` : \'?\') + muestras.join(\'&\');\n        }\n\n        return parametros;\n      },\n      enviarAOrionPrintServer(nombreArchivo, archivo) {\n        const formData = new FormData();\n        formData.append(\'archivo\', archivo, nombreArchivo);\n        const parametros = {\n          nombreImpresora: this.impresora,\n          tamanoPapel: this.tamanoPapel ? this.tamanoPapel.toUpperCase() : \'\',\n          alto: this.tamanoPapel === \'a4\' ? 297 : 210,\n          ancho: this.tamanoPapel === \'a4\' ? 210 : 148,\n          copias: this.copias > 0 ? this.copias : null,\n        };\n\n        if (this.esEtiquetas) {\n          parametros.tamanoPapel = null;\n          parametros.alto = this.etiqueta.alto;\n          parametros.ancho = this.etiqueta.ancho;\n        }\n\n        formData.append(\'parametros\', JSON.stringify(parametros));\n\n        return axios\n          .post(`${this.urlApiLocal}/api/imprimir/etiquetas`, formData)\n          .catch(error => {\n            const errores = this.procesarErroresOrionPrintServer(error);\n            this.mostrarErrores(\'¡Error al imprimir!\', errores);\n          });\n      },\n      emitirResultadoDespuesDeImprimir(mensaje, resultado) {\n        const data = {\n          mensajes: [`${this.tituloExitoImpresion} a imprimir`, `Impresora: ${this.impresora}`],\n          actualizar: !!resultado,\n          orden: resultado\n        };\n        if (mensaje) {\n          data.mensajes.push(mensaje);\n        }\n        this.$emit(\'documento-impreso\', data);\n        $(\'#modalImprimir\').modal(\'hide\');\n      },\n      cargarImpresoras() {\n        this.impresoras = [\'PDF\'];\n        if (!this.urlApiLocal) {\n          console.error(\'No existe url de Orión Print Server\');\n          return;\n        }\n\n        axios\n          .get(`${this.urlApiLocal}/api/impresoras`)\n          .then(({data}) => {\n            const impresorasPC = this.exlcuirImpresorasFaxXpsOtras(data);\n            this.impresoras = this.impresoras.concat(impresorasPC);\n          })\n          .catch(error => {\n            const errores = this.procesarErroresOrionPrintServer(error);\n            console.error(\'¡No se pudo cargar impresoras de este terminal!\', errores);\n          })\n          .then(() => this.cargarImpresoraDesdeStorage());\n      },\n      cargarConfiguracionesEtiquetas() {\n        axios\n          .get(\'/api/etiquetas/configuraciones\')\n          .then(({data: {data}}) => {\n            this.etiqueta = data;\n          })\n          .catch(error => {\n            const errores = this.procesarErroresOrionPrintServer(error);\n            console.error(\'No se pudo cargar configuraciones de etiquetas\', errores);\n          });\n      },\n      exlcuirImpresorasFaxXpsOtras(impresoras) {\n        const excluirImpresoras = [\'anydesk\', \'fax\', \'onenote\', \'xps\', \'pdf\'];\n        if (!this.esEtiquetas) {\n          excluirImpresoras.push(\'zebra\');\n          excluirImpresoras.push(\'zdesigner\');\n        }\n\n        return impresoras.filter(impresora => {\n          const impresoraEncontrada = excluirImpresoras\n            .find(impresoraExcluir => impresora.toLowerCase().includes(impresoraExcluir.toLowerCase()));\n          return impresoraEncontrada === undefined;\n        });\n      },\n      cargarImpresoraDesdeStorage() {\n        const impresoraStorage = this.obtenerImpresoraDeStorage();\n\n        if (!impresoraStorage) {\n          return;\n        }\n\n        const impresora = this.impresoras.find(impresora => impresora === impresoraStorage);\n\n        if (!impresora) {\n          console.error(`No se encontró la impresora ${impresoraStorage}`);\n        } else {\n          this.impresora = impresora;\n        }\n      },\n      impresoraSeleccionada(event) {\n        if (event.target.value) {\n\n          if (this.esRecibo) {\n            localStorage.setItem(\'impresora-recibo\', event.target.value);\n          }\n\n          if (this.esResultados) {\n            localStorage.setItem(\'impresora-resultados\', event.target.value);\n          }\n\n          if (this.esEtiquetas) {\n            localStorage.setItem(\'impresora-etiquetas\', event.target.value);\n          }\n\n          if (this.esAsistencia) {\n            localStorage.setItem(\'impresora-certificado-asistencia\', event.target.value);\n          }\n\n          if (this.esRemision) {\n            localStorage.setItem(\'impresora-remision\', event.target.value);\n          }\n\n          if (this.esConsentimientoInformado) {\n            localStorage.setItem(\'impresora-consentimiento-informado\', event.target.value);\n          }\n\n          if (this.esCarnetGrupoSanguineo) {\n            localStorage.setItem(\'impresora-carnet-grupo-sanguineo\', event.target.value);\n          }\n\n          if (this.esPruebaPostprandial) {\n            localStorage.setItem(\'impresora-prueba-postprandial\', event.target.value);\n          }\n\n          if (this.esCurvaGlocosa) {\n            localStorage.setItem(\'impresora-curva-glucosa\', event.target.value);\n          }\n\n          if (this.esGestionMuestra) {\n            localStorage.setItem(\'impresora-gestion-muestra\', event.target.value);\n          }\n\n          if (this.esFlujoVaginal) {\n            localStorage.setItem(\'impresora-flujo-vaginal\', event.target.value);\n          }\n\n          if (this.esAntigenoChlamydiaTrachomatis) {\n            localStorage.setItem(\'impresora-antigeno-chlamydia-trachomatis\', event.target.value);\n          }\n\n          if (this.esCitologiaVaginal) {\n            localStorage.setItem(\'impresora-citologia-vaginal\', event.target.value);\n          }\n\n          if (this.esVirusPapilomaHumano) {\n            localStorage.setItem(\'impresora-virus-papiloma-humano\', event.target.value);\n          }\n        }\n      },\n      cambioResumido(event) {\n        localStorage.setItem(\'remision-resumido\', event.target.checked);\n      },\n      cambioExcluirObservaciones(event) {\n        localStorage.setItem(\'remision-excluir-observaciones\', event.target.checked);\n      },\n      obtenerNombreArchivoDeHeader(response) {\n        const contentDisposition = response.headers[\'content-disposition\'];\n        return contentDisposition.substring(contentDisposition.indexOf(\'"\') + 1, contentDisposition.lastIndexOf(\'"\'));\n      },\n      obtenerIdDetallesOrdenDeHeader(response) {\n        const contentDisposition = response.headers[\'content-ids\'];\n        return contentDisposition ? contentDisposition.split(\',\') : [];\n      },\n      obtenerImpresoraDeStorage() {\n        if (this.esRecibo) {\n          return localStorage.getItem(\'impresora-recibo\');\n        }\n\n        if (this.esResultados) {\n          return localStorage.getItem(\'impresora-resultados\');\n        }\n\n        if (this.esEtiquetas) {\n          return localStorage.getItem(\'impresora-etiquetas\');\n        }\n\n        if (this.esAsistencia) {\n          return localStorage.getItem(\'impresora-certificado-asistencia\');\n        }\n\n        if (this.esRemision) {\n          return localStorage.getItem(\'impresora-remision\');\n        }\n\n        if (this.esConsentimientoInformado) {\n          return localStorage.getItem(\'impresora-consentimiento-informado\');\n        }\n\n        if (this.esCarnetGrupoSanguineo) {\n          return localStorage.getItem(\'impresora-carnet-grupo-sanguineo\');\n        }\n\n        if (this.esPruebaPostprandial) {\n          return localStorage.getItem(\'impresora-prueba-postprandial\');\n        }\n\n        if (this.esCurvaGlocosa) {\n          return localStorage.getItem(\'impresora-curva-glucosa\');\n        }\n\n        if (this.esGestionMuestra) {\n          return localStorage.getItem(\'impresora-gestion-muestra\');\n        }\n\n        if (this.esFlujoVaginal) {\n          return localStorage.getItem(\'impresora-flujo-vaginal\');\n        }\n\n        if (this.esAntigenoChlamydiaTrachomatis) {\n          return localStorage.getItem(\'impresora-antigeno-chlamydia-trachomatis\');\n        }\n\n        if (this.esCitologiaVaginal) {\n          return localStorage.getItem(\'impresora-citologia-vaginal\');\n        }\n\n        if (this.esVirusPapilomaHumano) {\n          return localStorage.getItem(\'impresora-virus-papiloma-humano\');\n        }\n\n        return \'\';\n      },\n      seleccionarTipoFiltro(tipo) {\n        this.filtros.tipo = tipo;\n        this.filtros.detallesOrdenIds = [];\n        this.filtros.muestrasIds = [];\n        this.filtros.seccionId = \'\';\n        this.filtros.examenAcreditado = null;\n        this.filtros.seleccionadosTodosDetallesOrden = false;\n        this.filtros.seleccionadosTodosMuestras = false;\n\n        switch (tipo) {\n          case \'examenes\':\n            this.seleccionarTodosDetallesOrden();\n            break;\n          case \'muestras\':\n            this.seleccionarTodasLasMuestras();\n            break;\n          case \'seccion\':\n            if (_.isEmpty(this.secciones)) {\n              this.cargarSecciones();\n            }\n            break;\n        }\n      },\n      cargarDetallesOrden() {\n        const params = {\n          incluir: \'examen,impresoPor,muestras\'\n        };\n        this.cargandoDetallesOrden = true;\n\n        return axios\n          .get(`/api/ordenes/${this.registro.id}/detalles`, {params})\n          .then(({data: {data}}) => {\n            this.detallesOrden = data;\n\n            this.cargarMuestras();\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar exámenes\', errores);\n          })\n          .then(() => this.cargandoDetallesOrden = false);\n      },\n      cargarSecciones() {\n        this.cargandoSecciones = true;\n        const params = {\n          estadosResultados: this.opciones.incluirReportados ? \'R,L,V,X\' : \'L,V,X\'\n        };\n        axios\n          .get(`/api/ordenes/${this.registro.id}/secciones`, {params})\n          .then(({data}) => {\n            this.secciones = data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar secciones de orden\', errores);\n          })\n          .then(() => this.cargandoSecciones = false);\n      },\n      cambioIncluirReportados(event) {\n        if (event.target.checked) {\n          this.opciones.registrarImpresion = false;\n        }\n\n        if (!event.target.checked) {\n\n          if (this.opciones.existenExamenesValidados === false) {\n            this.filtros.tipo = \'todos\';\n            this.filtros.detallesOrdenIds = [];\n            this.filtros.seccionId = \'\';\n            this.filtros.examenAcreditado = null;\n          }\n\n          if (this.filtros.tipo === \'examenes\') {\n            const idDetallesOrdenesParaImprimir = this.detallesOrdenParaImprimir.map(detalle => detalle.id);\n            const diferencia = this.filtros.detallesOrdenIds.filter(id => !idDetallesOrdenesParaImprimir.includes(id));\n            this.filtros.detallesOrdenIds = this.filtros.detallesOrdenIds.filter(id => !diferencia.includes(id));\n          }\n        }\n\n        if (this.registro.estado !== \'V\') {\n          this.secciones = [];\n        }\n\n        if (this.filtros.tipo === \'seccion\' && this.registro.estado !== \'V\') {\n          this.filtros.seccionId = \'\';\n          this.cargarSecciones();\n        }\n      },\n      procesarErroresOrionPrintServer(error) {\n        let errores = \'\';\n        if (error.response === undefined) {\n          errores = \'El servidor de impresión se encuentra apagado\';\n        } else {\n          errores = this.procesarErrorResponse(error);\n        }\n        return errores;\n      },\n      alternarSeleccionDetallesOrden() {\n        this.filtros.detallesOrdenIds = [];\n\n        if (this.filtros.seleccionadosTodosDetallesOrden) {\n          this.seleccionarTodosDetallesOrden()\n        }\n      },\n      seleccionarTodosDetallesOrden() {\n        this.filtros.detallesOrdenIds = this.detallesOrdenParaImprimir.map(detalle => {\n          if (!this.opciones.incluirMuestrasPendientes && detalle.todasMuestrasPendientes) {\n            return null;\n          }\n          return detalle.id;\n        }).filter(id => id !== null);\n      },\n      alternarSeleccionMuestras() {\n        this.filtros.muestrasIds = [];\n\n        if (this.filtros.seleccionadosTodosMuestras) {\n          this.seleccionarTodasLasMuestras();\n        }\n      },\n      seleccionarTodasLasMuestras() {\n        this.filtros.muestrasIds = this.muestras.map(muestra => {\n          if (!this.opciones.incluirMuestrasPendientes && [EstadoMuestra.PENDIENTE].includes(muestra.pivot.estado)) {\n            return null;\n          }\n          return muestra.id;\n        }).filter(id => id !== null);\n      },\n      seleccionarDetalleOrden(detalleOrden) {\n        if (!this.opciones.incluirMuestrasPendientes && detalleOrden.todasMuestrasPendientes) {\n          return;\n        }\n\n        if (this.filtros.detallesOrdenIds.includes(detalleOrden.id)) {\n          const indice = this.filtros.detallesOrdenIds.indexOf(detalleOrden.id);\n          this.filtros.detallesOrdenIds.splice(indice, 1);\n        } else {\n          this.filtros.detallesOrdenIds.push(detalleOrden.id);\n        }\n      },\n      seleccionarMuestra(muestra) {\n        if (!this.opciones.incluirMuestrasPendientes && [EstadoMuestra.PENDIENTE].includes(muestra.pivot.estado)) {\n          return;\n        }\n\n        if (this.filtros.muestrasIds.includes(muestra.id)) {\n          const indice = this.filtros.muestrasIds.indexOf(muestra.id);\n          this.filtros.muestrasIds.splice(indice, 1);\n        } else {\n          this.filtros.muestrasIds.push(muestra.id);\n        }\n      },\n      langClick(event) {\n        if (this.opciones.lang === event.target.value) {\n          this.opciones.lang = \'\';\n        }\n      },\n      cambioCiudad() {\n        if (this.esAsistencia) {\n          localStorage.setItem(\'ciudad-certificado-asistencia\', this.opciones.ciudad);\n        }\n      },\n      cambioFirmaUsuarioIngresa(event) {\n        if (this.esAsistencia) {\n          localStorage.setItem(\'firma-usuario-ingresa-certificado-asistencia\', event.target.checked.toString());\n        }\n      },\n      cambioTamanoPapel() {\n        if (this.esAsistencia) {\n          localStorage.setItem(\'tamano-papel-certificado-asistencia\', this.tamanoPapel);\n        }\n      },\n      cambioCopias() {\n        if (this.copias > 0) {\n          localStorage.setItem(\'copias-recibo\', this.copias);\n        }\n      },\n      cargarMuestras() {\n        this.muestras = [];\n\n        if (this.registro.id && this.detallesOrden.length > 0) {\n          const muestras = [];\n\n          this.detallesOrden.forEach(detalleOrden => {\n            detalleOrden.muestras.forEach(muestra => {\n              let muestraExistente = muestras[muestra.id];\n\n              if (!muestraExistente) {\n                muestraExistente = muestra;\n\n                muestraExistente.numero_etiquetas = detalleOrden.examen.numero_etiquetas;\n\n                muestras[muestra.id] = muestraExistente;\n              }\n\n              if (detalleOrden.examen.numero_etiquetas > muestraExistente.numero_etiquetas) {\n                muestras[muestra.id].numero_etiquetas = detalleOrden.examen.numero_etiquetas;\n              }\n\n              if (muestra.pivot.estado === EstadoMuestra.RECIBIDA) {\n                muestras[muestra.id].pivot.estado = muestra.pivot.estado;\n              }\n            });\n          });\n\n          //Se filtran muestra no existentes en posiciones del arreglo y se reindexa a traves de map\n          this.muestras = muestras.filter(muestra => muestra).map(muestra => muestra);\n        }\n      },\n      muestrasPendientesSeleccionado(event) {\n        if (!event.target.checked) {\n          this.filtros.detallesOrdenIds = [];\n          this.filtros.muestrasIds = [];\n        }\n      },\n      cambioNumeroEtiqueta(muestra) {\n        if (muestra.numero_etiquetas > 0) {\n          return;\n        }\n        this.filtros.muestrasIds = this.filtros.muestrasIds.filter(id => id !== muestra.id);\n      },\n      horaSeleccionada(horaSeleccionada, campo) {\n        this.opciones[campo] = horaSeleccionada;\n      },\n      abrirModalHora(modalId) {\n        $(`#${modalId}`).modal({backdrop: \'static\'});\n      }\n    },\n    computed: {\n      esImpresorsaPdf() {\n        return this.impresora === \'PDF\';\n      },\n      esRecibo() {\n        return this.tipoDocumento === \'recibo\';\n      },\n      esResultados() {\n        return this.tipoDocumento === \'resultados\';\n      },\n      esAsistencia() {\n        return this.tipoDocumento === TipoDocumento.CERTIFICADO_ASISTENCIA;\n      },\n      esEtiquetas() {\n        return this.tipoDocumento === \'etiquetas\';\n      },\n      esRemision() {\n        return this.tipoDocumento === \'remision\';\n      },\n      esConsentimientoInformado() {\n        return this.tipoDocumento === TipoDocumento.CONSENTIMIENTO_INFORMADO;\n      },\n      esCarnetGrupoSanguineo() {\n        return this.tipoDocumento === TipoDocumento.CARNET_GRUPO_SANGUINEO;\n      },\n      esPruebaPostprandial() {\n        return this.tipoDocumento === TipoDocumento.PRUEBA_POSTPRANDIAL;\n      },\n      esCurvaGlocosa() {\n        return this.tipoDocumento === TipoDocumento.CURVA_GLUCOSA;\n      },\n      esGestionMuestra() {\n        return this.tipoDocumento === TipoDocumento.GESTION_MUESTRA;\n      },\n      esFlujoVaginal(){\n        return this.tipoDocumento === TipoDocumento.FLUJO_VAGINAL;\n      },\n      esAntigenoChlamydiaTrachomatis(){\n        return this.tipoDocumento === TipoDocumento.ANTIGENO_CHLAMYDIA_TRACHOMATIS;\n      },\n      esCitologiaVaginal(){\n        return this.tipoDocumento === TipoDocumento.CITOLOGIA_VAGINAL;\n      },\n      esVirusPapilomaHumano(){\n        return this.tipoDocumento === TipoDocumento.VIRUS_PAPILOMA_HUMANO;\n      },\n      titulo() {\n        if (this.esRecibo) {\n          return \'Imprimir recibo\';\n        }\n\n        if (this.esResultados) {\n          return \'Imprimir resultados\';\n        }\n\n        if (this.esEtiquetas) {\n          return \'Imprimir etiquetas\';\n        }\n\n        if (this.esAsistencia) {\n          return \'Imprimir certificado de asistencia\';\n        }\n\n        if (this.esRemision) {\n          return \'Imprimir remisión\';\n        }\n\n        if (this.esConsentimientoInformado) {\n          return \'Imprimir consentimiento informado\';\n        }\n\n        if (this.esCarnetGrupoSanguineo) {\n          return \'Imprimir carnet de grupo sanguíneo\';\n        }\n\n        if (this.esPruebaPostprandial) {\n          return \'Imprimir instructivo para toma de prueba postprandial\';\n        }\n\n        if (this.esCurvaGlocosa) {\n          return \'Imprimir instructivo para toma de curva de glucosa\';\n        }\n\n        if (this.esGestionMuestra) {\n          return \'Imprimir gestión de muestra\';\n        }\n\n        if (this.esFlujoVaginal) {\n          return \'Imprimir examen de flujo vaginal\';\n        }\n\n        if (this.esAntigenoChlamydiaTrachomatis) {\n          return \'Imprimir Chlamydia Trachimatis antígeno\';\n        }\n\n        if (this.esCitologiaVaginal) {\n          return \'Imprimir citología vaginal\';\n        }\n\n        if (this.esVirusPapilomaHumano) {\n          return \'Imprimir detección de virus del papiloma humano\';\n        }\n\n        return \'Imprimir documento no especificado\';\n      },\n      tituloExitoImpresion() {\n        if (this.esRecibo) {\n          return \'Recibo enviado\';\n        }\n\n        if (this.esResultados) {\n          return \'Resultados enviados\';\n        }\n\n        if (this.esEtiquetas) {\n          return \'Etiquetas enviadas\';\n        }\n\n        return \'Documento enviado\';\n      },\n      idImprimir() {\n        if (this.esRecibo) {\n          return \'imprimirRecibo\';\n        }\n\n        if (this.esResultados) {\n          return \'imprimirResultados\';\n        }\n\n        if (this.esEtiquetas) {\n          return \'imprimirEtiquetas\';\n        }\n\n        if (this.esAsistencia) {\n          return \'imprimirAsistencia\';\n        }\n\n        if (this.esRemision) {\n          return \'imprimirRemision\';\n        }\n\n        if (this.esConsentimientoInformado) {\n          return \'imprimirConsentimientoInformado\';\n        }\n\n        if (this.esCarnetGrupoSanguineo) {\n          return \'imprimirCarnetGrupoSanguineo\';\n        }\n\n        if (this.esPruebaPostprandial) {\n          return \'imprimirPruebaPostprandial\';\n        }\n\n        if (this.esCurvaGlocosa) {\n          return \'imprimirCurvaGlocosa\';\n        }\n\n        if (this.esGestionMuestra) {\n          return \'imprimirGestionMuestra\';\n        }\n\n        if (this.esFlujoVaginal) {\n          return \'imprimirExamenFlujoVaginal\';\n        }\n\n        if (this.esAntigenoChlamydiaTrachomatis) {\n          return \'imprimirChlamydiaTrachomatis\';\n        }\n\n        if (this.esCitologiaVaginal) {\n          return \'imprimirCitologiaVaginal\';\n        }\n\n        if (this.esVirusPapilomaHumano) {\n          return \'imprimirVirusPapilomaHumano\';\n        }\n\n        return \'\';\n      },\n      etiquetaImprimir() {\n        let etiqueta = \'Imprimir\';\n        if (this.opciones.incluirReportados) {\n          etiqueta = \'Vista previa\';\n        }\n\n        if (this.opciones.incluirMembrete) {\n          etiqueta = etiqueta + \' con membrete\';\n        }\n        return etiqueta;\n      },\n      detallesOrdenConMuestra() {\n        if (this.detallesOrden.length > 0) {\n          let muestrasAExcluir = [EstadoMuestra.PENDIENTE];\n          return this.detallesOrden.map(detalleOrden => {\n            return {\n              ...detalleOrden,\n              todasMuestrasPendientes: detalleOrden.muestras.reduce((muestraPendiente, {pivot}) => muestraPendiente && muestrasAExcluir.includes(pivot.estado), true), //Todas las muestras pendientes para que sea tru\n              muestraPendiente: detalleOrden.muestras.reduce((muestraPendiente, {pivot}) => muestraPendiente || muestrasAExcluir.includes(pivot.estado), false), //  Al menos una esta pendiente y to-do esta pendiente\n            }\n          });\n        }\n\n        return [];\n      },\n      detallesOrdenParaVistaPrevia() {\n        if (this.registro.id && this.detallesOrden.length > 0) {\n          return this.detallesOrdenConMuestra.filter(detalleOrden => [\'R\', \'X\', \'L\', \'V\'].includes(detalleOrden.estado));\n        }\n        return [];\n      },\n      detallesOrdenParaDefinitivo() {\n        if (this.registro.id && this.detallesOrden.length > 0) {\n          return this.detallesOrdenConMuestra.filter(detalleOrden => [\'X\', \'L\', \'V\'].includes(detalleOrden.estado));\n        }\n        return [];\n      },\n      detallesOrdenParaImprimir() {\n        if (this.esResultados && this.opciones.incluirReportados) {\n          return this.detallesOrdenParaVistaPrevia;\n        }\n        if (this.esResultados && !this.opciones.incluirReportados) {\n          return this.detallesOrdenParaDefinitivo;\n        }\n        if (this.esEtiquetas || this.esAsistencia) {\n          return this.detallesOrdenConMuestra;\n        }\n      },\n      puedeImprimir() {\n        if (this.esResultados) {\n          return !this.procesando\n            && this.impresora\n            && (this.opciones.existenExamenesValidados !== false || this.opciones.incluirReportados)\n            && (this.opciones.incluirReportados || !this.tieneSaldoPendiente);\n        }\n\n        return !this.procesando && this.impresora;\n      },\n      tieneSaldoPendiente() {\n        if (!this.registro || !this.registro.subempresa) {\n          return true;\n        }\n        return !this.registro.subempresa.empresa.imprimir_resultados_ordenes_impagas && this.registro.saldo !== 0;\n      }\n    },\n    watch: {\n      \'filtros.detallesOrdenIds\'(nuevoArreglo) {\n        if (this.opciones.incluirMuestrasPendientes) {\n          this.filtros.seleccionadosTodosDetallesOrden = nuevoArreglo.length > 0 && nuevoArreglo.length === this.detallesOrdenParaImprimir.length;\n          return;\n        }\n        this.filtros.seleccionadosTodosDetallesOrden = nuevoArreglo.length > 0 && nuevoArreglo.length === this.detallesOrdenParaImprimir.filter(detalle => !detalle.todasMuestrasPendientes).length;\n      },\n      \'filtros.muestrasIds\'(nuevoArreglo) {\n        if (this.opciones.incluirMuestrasPendientes) {\n          this.filtros.seleccionadosTodosMuestras = nuevoArreglo && nuevoArreglo.length > 0 && nuevoArreglo.length === this.muestras.length;\n          return;\n        }\n        this.filtros.seleccionadosTodosMuestras = nuevoArreglo && nuevoArreglo.length > 0 && nuevoArreglo.length === this.muestras.filter(({pivot}) => (!this.opciones.incluirMuestrasPendientes && ![EstadoMuestra.PENDIENTE].includes(pivot.estado))).length;\n      }\n    }\n  }\n<\/script>\n<style scoped>\n  .checkbox,\n  .radio {\n    margin-top: 5px;\n    margin-bottom: 5px;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},9283:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"h4[data-v-7e1dcd56],label[data-v-7e1dcd56]{text-align:center}label[data-v-7e1dcd56]{border-radius:.25em;color:#fff;display:inline;font-weight:700;line-height:1;padding:.2em .6em .3em;vertical-align:baseline;white-space:nowrap}.label-success[data-v-7e1dcd56]{background-color:#5cb85c}.label-info[data-v-7e1dcd56]{background-color:#5bc0de}table thead tr th[data-v-7e1dcd56]{border-bottom:2px solid #ddd}td[data-v-7e1dcd56]{border:1px solid #aed0ea}.nota[data-v-7e1dcd56]{color:#045fb4;padding-top:5px}","",{version:3,sources:["webpack://./resources/js/components/clientes/modals/VerCoberturaMspModal.vue"],names:[],mappings:"AAsSA,2CAHA,iBAaA,CAVA,uBASA,mBAAA,CAJA,UAAA,CAJA,cAAA,CAEA,eAAA,CACA,aAAA,CAFA,sBAAA,CAMA,uBAAA,CADA,kBAGA,CAEA,gCACA,wBACA,CAEA,6BACA,wBACA,CAEA,mCACA,4BACA,CAEA,oBACA,wBACA,CAEA,uBACA,aAAA,CACA,eACA",sourcesContent:['<template>\n  <div :id="id" class="modal fade modal-nivel-multiple" tabindex="-1" role="dialog">\n    <div class="modal-dialog modal-lg" role="document">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n          </button>\n          <h4 class="modal-title">Cobertura MSP</h4>\n        </div>\n        <div class="modal-body">\n          <alerta ref="alerta"></alerta>\n          <div v-if="!cargandoCoberturaMsp">\n            <div v-if="paciente.nombres.length > 0">\n              <div class="row">\n                <div class="col-sm-8 form-group">\n                  <label class="label-success">\n                    {{ paciente.apellidos }} {{ paciente.nombres }}\n                  </label>\n                </div>\n                <div class="col-sm-4 form-group">\n                  <label class="label-info">\n                    Fecha de consulta: {{ fechaConsulta }}\n                  </label>\n                </div>\n              </div>\n\n              <h4>IESS, ISSFA, ISSPOL</h4>\n\n              <table>\n                <thead>\n                <tr>\n                  <th class="col-sm-2 text-center">Seguro</th>\n                  <th class="col-sm-4 text-center">Tipo de seguro</th>\n                  <th class="col-sm-3 text-center">Mensaje</th>\n                  <th class="col-sm-3 text-center">Registro de Cobertura de Atención de Salud</th>\n                </tr>\n                </thead>\n                <tbody>\n                <template v-for="publicos in paciente.segurosPublicos">\n                  <tr>\n                    <template v-for="publico in publicos">\n                      <td class="text-center">{{ publico }}</td>\n                    </template>\n                  </tr>\n                </template>\n                </tbody>\n              </table>\n\n              <h6 class="nota">* La información Histórica reflejada corresponde a datos desde Junio 2010</h6>\n            </div>\n\n            <br>\n\n            <div v-if="paciente.nombres.length > 0 && paciente.segurosPrivados.length">\n              <h4>RED PRIVADA COMPLEMENTARIA</h4>\n              <table>\n                <thead>\n                <tr>\n                  <th class="col-sm-2 text-center">RUC de empresa</th>\n                  <th class="col-sm-3 text-center">Nombre del Financiador</th>\n                  <th class="col-sm-2 text-center">Identificación del Beneficiario</th>\n                  <th class="col-sm-2 text-center">Nombres del Beneficiario</th>\n                  <th class="col-sm-3 text-center">Apellidos del Beneficiario</th>\n                </tr>\n                </thead>\n                <tbody>\n                <template v-for="privados in paciente.segurosPrivados">\n                  <tr>\n                    <template v-for="privado in privados">\n                      <td class="text-center">{{ privado }}</td>\n                    </template>\n                    <td class="text-center">{{ identificacionPaciente }}</td>\n                    <td class="text-center">{{ paciente.nombres }}</td>\n                    <td class="text-center">{{ paciente.apellidos }}</td>\n                  </tr>\n                </template>\n                </tbody>\n              </table>\n\n              <h6 class="nota">* La información Histórica reflejada corresponde a datos desde Agosto 2017</h6>\n            </div>\n            <div v-else-if="paciente.nombres.length > 0 ">\n              <h4>RED PRIVADA COMPLEMENTARIA</h4>\n              NO EXISTEN RESULTADOS PARA LOS PARÁMETROS INGRESADOS\n            </div>\n          </div>\n          <cargando\n            :cargando="cargandoCoberturaMsp"\n            :cantidad="paciente.nombres.length"\n            alto="210px"\n            tipo="recibo">\n            <template #cargando>Obteniendo datos desde MSP</template>\n            <template #no-resultado>{{ mensajeMSP }}</template>\n          </cargando>\n        </div>\n        <div class="modal-footer">\n          <button\n            class="btn btn-sm btn-default"\n            title="Actualizar"\n            :disabled="cargandoCoberturaMsp"\n            @click="cargarCoberturaMsp">\n            <i v-show="!cargandoCoberturaMsp" class="fas fa-sync"></i>\n            <i v-show="cargandoCoberturaMsp" class="fas fa-spinner fa-spin"></i>\n          </button>\n          <button\n            type="button"\n            class="btn btn-default btn-sm"\n            :disabled="!paciente.nombres.length > 0"\n            @click="generarPdf">\n            <i class="fas fa-print fa-fw"/>Imprimir\n          </button>\n          <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cerrar</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  export default {\n    props: {\n      id: {type: String, default: \'modalCoberturaMsp\'},\n      identificacionPaciente: {type: String, required: false},\n      fechaNacimiento: {type: String, required: false},\n      fechaOrden: {type: String, required: false}\n    },\n    data() {\n      return {\n        cargandoCoberturaMsp: false,\n        escala: \'\',\n        fechaConsulta: moment().format(\'DD-MM-YYYY HH:mm\'),\n        fechaCobertura: moment().format(\'DD-MM-YYYY\'),\n        mensajeMSP: \'\',\n        paciente: {\n          nombres: \'\',\n          apellidos: \'\',\n          fecha_nacimiento: \'\',\n          edad_calculado: \'\',\n          segurosPrivados: [],\n          segurosPublicos: []\n        },\n      }\n    },\n    mounted() {\n      $(`#${this.id}`).on(\'shown.bs.modal\', e => {\n        if (e.target.id === this.id) {\n          this.limpiar();\n          this.cargarCoberturaMsp();\n        }\n      });\n\n      $(`#${this.id}`).on(\'hide.bs.modal\', e => {\n        if (e.target.id === this.id) {\n          this.limpiar();\n        }\n      });\n    },\n    methods: {\n      mostrarAdvertencia(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      mostrarInformativo(mensaje) {\n        this.$refs.alerta.mostrarAlerta(\'info\', mensaje);\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      cargarCoberturaMsp() {\n        this.$refs.alerta.ocultarAlertas();\n        this.mensajeMSP = \'\';\n        this.cargandoCoberturaMsp = true;\n\n        axios\n          .get(`/api/identidad/${this.identificacionPaciente}`)\n          .then(({data: {data}}) => {\n\n            this.paciente.nombres = data.nombres;\n            this.paciente.apellidos = data.apellidos;\n            this.paciente.fecha_nacimiento = this.fechaNacimiento;\n            this.paciente.segurosPrivados = data.segurosPrivados;\n            this.paciente.segurosPublicos = data.segurosPublicos;\n\n            if (data.nombres === \'\' && data.apellidos === \'\') {\n              this.mostrarInformativo(\'No se encontraron datos para la identificación especificada\');\n              this.mensajeMSP = \'No se encontraron datos para la identificación especificada\';\n            }\n          })\n          .catch(error => {\n            if (!axios.isCancel(error)) {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(errores);\n              this.mensajeMSP = errores;\n            }\n          })\n          .then(response => this.cargandoCoberturaMsp = false);\n      },\n      limpiar() {\n        this.paciente.nombres = \'\';\n        this.paciente.apellidos = \'\';\n        this.paciente.fecha_nacimiento = \'\';\n        this.paciente.edad_calculado = \'\';\n        this.paciente.segurosPrivados = [];\n        this.paciente.segurosPublicos = [];\n        this.mensajeMSP = \'\';\n        this.escala = \'\';\n      },\n      calcularBasadoEnFechaNacimiento(val) {\n        this.paciente.edad_calculado = \'\';\n\n        if (val && val.length === 10) {\n          const hoy = moment();\n          const fechaNacimiento = moment(val);\n\n          let edadEnDias = hoy.diff(fechaNacimiento, \'days\');\n          let edadEnMeses = hoy.diff(fechaNacimiento, \'months\');\n          let edadEnAnios = hoy.diff(fechaNacimiento, \'years\');\n\n          if (edadEnAnios > 0) {\n            this.paciente.edad_calculado = edadEnAnios;\n            this.escala = \'Años\';\n          } else if (edadEnMeses > 0) {\n            this.paciente.edad_calculado = edadEnMeses;\n            this.escala = \'Meses\';\n          } else {\n            this.paciente.edad_calculado = edadEnDias;\n            this.escala = \'Días\';\n          }\n        }\n      },\n      generarPdf() {\n        if(this.fechaOrden){\n          this.fechaCobertura = this.fechaOrden;\n        }\n\n        const params = {\n          ...this.paciente,\n          fechaConsulta: moment().format(\'YYYY-MM-DD HH:mm\'),\n          fechaCobertura: this.fechaCobertura\n        }\n        const parametros = this.obtenerParametrosUrl(params);\n        window.open(`/cobertura/${this.identificacionPaciente}/msp/pdf${parametros}`, \'_blank\', \'height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no\');\n      }\n    },\n    watch: {\n      \'paciente.fecha_nacimiento\': function (val, oldVal) {\n        this.calcularBasadoEnFechaNacimiento(val);\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  h4 {\n    text-align: center;\n  }\n\n  label {\n    display: inline;\n    padding: 0.2em 0.6em 0.3em;\n    font-weight: 700;\n    line-height: 1;\n    color: #fff;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: baseline;\n    border-radius: 0.25em;\n  }\n\n  .label-success {\n    background-color: #5cb85c;\n  }\n\n  .label-info {\n    background-color: #5bc0de;\n  }\n\n  table thead tr th {\n    border-bottom: 2px solid #ddd\n  }\n\n  td {\n    border: 1px solid #AED0EA;\n  }\n\n  .nota {\n    color: #045FB4;\n    padding-top: 5px;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},6796:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"legend[data-v-2d99ce70]{position:relative}#totales .form-group[data-v-2d99ce70]{margin-bottom:7px!important}.hover-examen[data-v-2d99ce70]{background-color:#f5f5f5;font-weight:700}","",{version:3,sources:["webpack://./resources/js/components/clientes/ordenes/formulario.vue"],names:[],mappings:"AAyhJA,wBACA,iBACA,CAEA,sCACA,2BACA,CAEA,+BAEA,wBAAA,CADA,eAEA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"></alerta>\n    <form method="POST" @invalid.capture="elementosInvalidos" @submit.prevent="guardar">\n\n      <navbar\n        :mostrar-configuraciones="true"\n        :mostrar-servidor-local="true"\n        @click-configuraciones="abrirModalConfiguraciones">\n        <template #titulo>\n          {{ titulo }}\n          <strong>{{ registro.numero_orden }}</strong>\n        </template>\n        <template #opciones>\n          <ul class="nav navbar-nav">\n            <li>\n              <button\n                :id="id === \'0\'?\'crearOrden\':\'actualizarOrden\'"\n                type="submit"\n                ref="guardar"\n                class="btn btn-primary"\n                @click="registro.soloGuardar = true"\n                v-if="puedeModificar"\n                :disabled="errorEnTarifas || errorEnOrden">\n                <i class="fas fa-save fa-fw"/>&nbsp;Guardar\n              </button>\n            </li>\n            <li class="hidden-xs">\n              <button\n                :id="id === \'0\'?\'crearYNuevoOrden\':\'\'"\n                type="submit"\n                class="btn btn-default"\n                @click="registro.soloGuardar = false"\n                v-if="id === \'0\' && puedeModificar"\n                :disabled="errorEnTarifas || errorEnOrden">\n                <i class="fas fa-save fa-fw"></i>&nbsp;Guardar y Nuevo\n              </button>\n            </li>\n            <li>\n              <div v-if="id !== \'0\' && registro.estado !== \'N\'" class="dropdown">\n                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"\n                        aria-haspopup="true" aria-expanded="true">\n                  <i class="fas fa-print"></i>&nbsp;Imprimir\n                  <span class="caret"></span>\n                </button>\n                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" style="margin-top: -4px">\n                  <li>\n                    <a\n                      class="puntero"\n                      :class="{disabled:errorEnOrden}"\n                      @click="abrirModalImprimir(\'etiquetas\')"\n                      :disabled="errorEnOrden">\n                      Etiquetas\n                    </a>\n                  </li>\n                  <li>\n                    <a\n                      class="puntero"\n                      :class="{disabled:errorEnOrden}"\n                      @click="abrirModalImprimir(\'recibo\')"\n                      :disabled="errorEnOrden">\n                      Recibo\n                    </a>\n                  </li>\n                  <li>\n                    <a\n                      class="puntero"\n                      :class="{disabled:errorEnOrden}"\n                      @click="abrirModalImprimir(\'certificado-asistencia\')"\n                      :disabled="errorEnOrden">\n                      Certificado\n                    </a>\n                  </li>\n                </ul>\n              </div>\n            </li>\n            <li v-if="id === \'0\' && $cliente.subdominio===\'unidice\'">\n              <button type="button" class="btn btn-default" data-toggle="modal" data-backdrop="static"\n                      data-target="#jmFacturaOrden">\n                <i class="fas fa-download fa-fw"></i>&nbsp;Descargar factura\n              </button>\n            </li>\n            <li>\n              <button\n                v-if="id !== \'0\'"\n                type="button"\n                class="btn btn-default"\n                data-toggle="modal"\n                data-target="#verAuditoriasModal">\n                <i class="fas fa-fingerprint"></i>\n                Auditoría\n              </button>\n            </li>\n            <li>\n              <a class="btn btn-default" title="Regresar" @click="regresar">\n                <i class="fas fa-arrow-left"></i>\n              </a>\n            </li>\n          </ul>\n        </template>\n      </navbar>\n\n      <ul class="nav nav-tabs">\n        <li class="active"><a data-toggle="tab" href="#datosGenerales">Datos generales</a>\n        </li>\n        <li><a data-toggle="tab" href="#datosAdicionales" @click="abrirDatosAdicionales">Datos adicionales</a></li>\n        <li v-if="$cliente.pais===\'EC\'">\n          <a\n            data-toggle="tab"\n            href="#variablesEpidemilogicas"\n            @click="clickEpi1">\n            EPI 1\n          </a>\n        </li>\n      </ul>\n      <div class="tab-content">\n        <div id="datosGenerales" class="tab-pane fade in active">\n          <fieldset disabled>\n            <div class="row">\n              <div class="col-sm-4 col-md-3 form-group" v-if="id === \'0\'">\n                <label for="identificacion" class="control-label no-salto-linea"\n                       :class="{obligatorio: registro.paciente_type !== \'App\\\\Models\\\\PacienteAnimal\'}">\n                  Identificación\n                  {{ esObjeto ? \'objeto\' : \'paciente\' }}\n                </label>\n                <div class="input-group">\n                  <input\n                    id="identificacion"\n                    type="text"\n                    class="form-control input-sm"\n                    maxlength="25"\n                    v-model="registro.paciente_identificacion"\n                    @blur="autocompletarPaciente"\n                    @keydown.enter.prevent="focusSiguiente(\'crearPaciente\')"\n                    autocomplete="off"\n                    :disabled="id !== \'0\'"\n                    :required="registro.paciente_type !== \'App\\\\Models\\\\PacienteAnimal\'">\n                  <div class="input-group-btn">\n                    <button\n                      class="btn btn-sm btn-default hidden-md hidden-lg"\n                      type="button"\n                      @click="autocompletarPaciente"\n                      data-toggle="tooltip"\n                      title="Autocompletar"\n                      :disabled="id !== \'0\'">\n                      <i class="fas fa-user-check fa-fw"></i>\n                    </button>\n                    <button\n                      id="crearPaciente"\n                      class="btn btn-sm btn-default"\n                      type="button"\n                      @click="abrirAutocompletarPaciente"\n                      data-toggle="tooltip"\n                      title="Crear"\n                      :disabled="id !== \'0\'">\n                      <i class="fas fa-plus fa-fw"></i>\n                    </button>\n                    <button\n                      class="btn btn-sm btn-default"\n                      type="button"\n                      @click="abrirModalEditarPaciente"\n                      data-toggle="tooltip"\n                      :title="id !== \'0\' || !registro.paciente_id ? \'\':\'Editar datos de paciente seleccionado\'"\n                      :disabled="id !== \'0\' || !registro.paciente_id">\n                      <i class="fas fa-pencil-alt fa-fw"></i>\n                    </button>\n                    <button\n                      type="button"\n                      class="btn btn-sm btn-primary"\n                      @click="abrirPacienteSinBusqueda"\n                      data-toggle="tooltip"\n                      title="Cambiar a otro paciente"\n                      :disabled="id !== \'0\'">\n                      <i class="fas fa-search fa-fw" aria-hidden="true"/>\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <div class="form-group" :class="id === \'0\' ? \'col-sm-9\' : \'col-sm-10\'">\n                <label class="control-label" for="paciente_nombre" v-show="registro.paciente_type">\n                  {{ etiquetaDatosPaciente }}\n                </label>\n                <i\n                  v-show="cargandoPaciente"\n                  style="margin-top: 36px"\n                  class="fas fa-spinner fa-spin fa-fw"\n                  aria-hidden="true"\n                  title="Obteniendo datos de persona"/>\n                <button\n                  class="btn btn-xs btn-default"\n                  type="button"\n                  @click="abrirModalEditarPaciente"\n                  title="Editar datos de paciente seleccionado"\n                  data-toggle="tooltip"\n                  v-if="id !== \'0\' && registro.estado !== \'N\'">\n                  <i class="fas fa-pencil-alt"/>\n                </button>\n                <button\n                  type="button"\n                  class="btn btn-xs btn-primary"\n                  @click="abrirPacienteSinBusqueda"\n                  title="Cambiar a otro paciente"\n                  data-toggle="tooltip"\n                  v-if="id !== \'0\' && registro.estado !== \'N\'">\n                  <i class="fas fa-search" aria-hidden="true"/>\n                </button>\n                <button\n                  v-if="registro.paciente_type === \'App\\\\Models\\\\PacienteHumano\' && $cliente.pais === \'EC\'"\n                  type="button"\n                  class="btn btn-default btn-xs"\n                  @click="abrirCoberturaMspPaciente"\n                  title="Cobertura MSP"\n                  data-toggle="tooltip">\n                  <img id="logo_msp" src="/img/msp.ico"/>\n                </button>\n\n                <template v-if="datos.configuraciones.mostrarResumenPaciente && registro.paciente_type">\n                  &nbsp;\n                  <i\n                    v-if="resumenPaciente.saldo === 0"\n                    data-toggle="tooltip"\n                    title="Pago completo"\n                    class="far fa-check-circle text-success"\n                    aria-hidden="true"></i>\n\n                  <span\n                    class="text-danger"\n                    data-toggle="tooltip"\n                    v-else-if="resumenPaciente.saldo > 0"\n                    :key="`saldo-${registro.paciente_id}`"\n                    :title="resumenPaciente.saldo ? `Paciente debe ${$cliente.moneda}${resumenPaciente.saldo.toFixed(2)}`:\'\'">\n                    <i class="fas fa-hand-holding-usd"></i>\n                    <strong>\n                      {{ $cliente.moneda }}{{ resumenPaciente.saldo.toFixed(2) }}\n                    </strong>\n                  </span>\n                </template>\n\n                <span\n                  v-if="datos.configuraciones.mostrarResumenPaciente && resumenPaciente.cantidadOrdenes > 0 && registro.paciente_type"\n                  data-toggle="tooltip"\n                  class="puntero"\n                  :key="`cantidad-ordenes-${registro.paciente_id}`"\n                  :title="resumenPaciente.cantidadOrdenes ? `Órdenes anteriores del paciente: ${resumenPaciente.cantidadOrdenes}`:\'\'">\n\n                  &nbsp;\n\n                  <i\n                    class="fas fa-file-medical-alt"\n                    aria-hidden="true"></i>\n\n                  <strong>\n                    {{ resumenPaciente.cantidadOrdenes }}\n                  </strong>\n                </span>\n\n                <div id="paciente_nombre" v-show="registro.paciente_nombre">\n                  <i class="fas fa-user fa-lg" v-show="esHumano"></i>\n                  <i class="fas fa-paw fa-lg" v-show="esAnimal"></i>\n                  <i class="fas fa-flask fa-lg" v-show="esObjeto"></i>\n                  <span class="paciente">{{ registro.paciente_nombre }}</span>\n                  &nbsp;\n                  <span v-show="esAnimal && registro.paciente_taxonomia" class="no-salto-linea" title="Raza">\n                    <i class="fas fa-sitemap fa-lg"></i>\n                    {{ registro.paciente_taxonomia }}\n                    &nbsp;\n                  </span>\n                  <span v-show="id !== \'0\'" class="no-salto-linea">\n                    <i class="far fa-id-card fa-lg"></i>\n                    {{ registro.paciente_identificacion }}\n                    &nbsp;\n                  </span>\n                  <span v-show="numeroHistoriaClinica" class="no-salto-linea">\n                    <strong>HC</strong> {{ numeroHistoriaClinica }}\n                    &nbsp;\n                  </span>\n                  <span v-if="esHumano || esAnimal" class="no-salto-linea">\n                    <i class="fas fa-birthday-cake fa-lg"></i>\n                    {{ registro.paciente_fecha_nacimiento }} ({{ obtenerEdad(registro.paciente_fecha_nacimiento) }})\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_sexo" class="no-salto-linea">\n                    <i class="fas fa-mars fa-lg" v-show="registro.paciente_sexo === \'M\'"></i>\n                    <i class="fas fa-venus fa-lg" v-show="registro.paciente_sexo === \'F\'"></i>\n                    <template v-if="esHumano">\n                      {{ registro.paciente_sexo === \'M\' ? \'Masculino\' : \'Femenino\' }}\n                    </template>\n                    <template v-if="esAnimal">\n                      {{ registro.paciente_sexo === \'M\' ? \'Macho\' : \'Hembra\' }}\n                    </template>\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_numero_poliza" class="no-salto-linea" title="Número de poliza">\n                    <i class="fas fa-user-shield fa-lg" title="Número de poliza"></i>\n                    {{ registro.paciente_numero_poliza }}\n                    &nbsp;\n                  </span>\n                  <span v-if="(esAnimal || esObjeto) && registro.paciente_dueno_responsable" class="no-salto-linea">\n                    <i class="fas fa-user-tie fa-lg" title="Dueño"></i>\n                    {{ registro.paciente_dueno_responsable }}\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_telefono" class="no-salto-linea">\n                    <i class="fas fa-mobile-alt fa-lg"></i>\n                    {{ registro.paciente_telefono }}\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_correo" class="no-salto-linea">\n                    <i class="fas fa-envelope fa-lg"></i>\n                    {{ registro.paciente_correo }}\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_direccion" class="no-salto-linea">\n                    <i class="fas fa-map-marked-alt fa-lg"></i>\n                    {{ registro.paciente_direccion }}\n                    &nbsp;\n                  </span>\n                </div>\n              </div>\n\n              <div class="col-sm-2 form-group" v-show="this.id !== \'0\'">\n                <label for="responsable_ingresa" class="control-label">{{ usuarioIngresa ? \'Usuario\' : \'Sistema\' }}\n                  ingresa</label>\n                <div id="responsable_ingresa">\n                  {{ usuarioIngresa ? usuarioIngresa : sistemaIngresa }}\n                </div>\n              </div>\n            </div>\n\n            <div class="row">\n              <div class="col-sm-3 form-group">\n                <label for="empresa_id" class="control-label obligatorio">Cliente</label>\n                <v-select\n                  id="empresa_id"\n                  :disabled="!permisos.cambiarEmpresas"\n                  v-if="!tieneFacturaEmitida"\n                  placeholder="Seleccione..."\n                  class="form-control input-sm"\n                  v-model="registro.empresa_id"\n                  :options="empresas"\n                  label="nombre"\n                  :reduce="opcion => opcion.id"\n                  @input="cargarSubempresa(registro.empresa_id, true)">\n                  <template #no-options>No existen coincidencias</template>\n                </v-select>\n\n                <output v-if="tieneFacturaEmitida">\n                  {{ registroAuxiliar.empresaNombre }}\n                </output>\n              </div>\n\n              <div class="col-sm-2 form-group">\n                <label for="subempresa_id" class="control-label obligatorio no-salto-linea">\n                  Categoría\n                </label>\n                <v-select\n                  id="subempresa_id"\n                  v-if="!tieneFacturaEmitida"\n                  placeholder="Seleccione..."\n                  class="form-control input-sm"\n                  v-model="registro.subempresa_id"\n                  :options="subempresas"\n                  :loading="cargandoSubempresas"\n                  label="nombre"\n                  :reduce="opcion => opcion.id"\n                  @input="cargarExamenes(true, true)" required>\n                  <template #search="{attributes, events}">\n                    <input\n                      class="vs__search"\n                      :required="!registro.subempresa_id"\n                      v-bind="attributes"\n                      v-on="events"\n                    />\n                  </template>\n\n                  <template #no-options>No existen coincidencias</template>\n\n                  <template #spinner="{ loading }">\n                    <div v-show="loading">\n                      <i class="fas fa-spinner fa-spin fa-fw"/>\n                    </div>\n                  </template>\n\n                </v-select>\n\n                <output v-if="tieneFacturaEmitida">\n                  {{ registroAuxiliar.subempresaNombre }}\n                </output>\n              </div>\n\n              <div class="col-sm-3 form-group">\n                <label for="medico_nombre" class="control-label" :class="{obligatorio: config.medicoObligatorio}">\n                  Médico\n                  <i\n                    v-show="procesando.cargarMedico"\n                    class="fas fa-spinner fa-spin"\n                    aria-hidden="true"\n                    title="Cargando médico"\n                  />\n                  <i class="fas fa-check-circle" data-toggle="tooltip"\n                     title="Médico seleccionado"\n                     v-show="registro.medico_id"></i>\n                  <i class="fas fa-trash puntero" data-toggle="tooltip"\n                     title="Quitar médico"\n                     @click="eliminarMedico"\n                     v-if="puedeCambiarMedico"\n                     v-show="registro.medico_id"></i>\n                  <span>\n                  &nbsp;\n                  <button\n                    type="button"\n                    class="btn btn-xs btn-default fas fa-eye puntero"\n                    @click="verMedico"\n                    title="Ver médico"\n                    data-toggle="tooltip"\n                    v-if="puedeCambiarMedico"\n                    v-show="registro.medico_id">\n                </button>\n                </span>\n                  <span v-show="registroAuxiliar.medicoReferenciaAuxiliar" style="font-weight: normal"\n                        title="Referencia auxiliar" data-toggle="tooltip">\n                    {{ registroAuxiliar.medicoReferenciaAuxiliar }}\n                  </span>\n                </label>\n                <div class="input-group" v-if="puedeCambiarMedico">\n                  <input\n                    id="medico_nombre"\n                    type="text"\n                    class="form-control input-sm"\n                    maxlength="15"\n                    placeholder="Buscar médico"\n                    autocomplete="off"\n                    v-model="registroAuxiliar.medicoNombre"\n                    @blur="autocompletarMedico"\n                    @keydown.enter.prevent="focusSiguiente(\'crearMedico\')"\n                    :required="config.medicoObligatorio">\n                  <div class="input-group-btn">\n                    <button\n                      id="crearMedico"\n                      type="button"\n                      class="btn btn-sm btn-default"\n                      data-toggle="tooltip"\n                      title="Crear médico"\n                      @click="abrirModalGestionarMedico"\n                      v-show="$can(\'crear-medicos\')">\n                      <i class="fas fa-plus" aria-hidden="true"></i>\n                    </button>\n                    <button\n                      class="btn btn-sm btn-primary"\n                      type="button"\n                      data-toggle="tooltip"\n                      title="Buscar médico"\n                      @click="buscarMedico">\n                      <i class="fas fa-search" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                <div v-else>\n                  {{ registroAuxiliar.medicoNombre }}\n                </div>\n              </div>\n\n              <div class="col-sm-2 form-group">\n                <label for="tipo_atencion_id" class="control-label">\n                  Tipo atención\n                </label>\n                <v-select\n                  input-id="tipo_atencion_id"\n                  placeholder="Seleccione..."\n                  class="form-control input-sm"\n                  v-model="registro.tipo_atencion_id"\n                  :options="tiposAtenciones"\n                  label="nombre"\n                  :reduce="opcion => opcion.id">\n                  <template #no-options>No existen coincidencias</template>\n                  <template #selected-option="{ nombre, urgente }">\n                    {{ nombre }} <i v-if="urgente" class="fas fa-exclamation-triangle text-danger"\n                                    style="margin-left: 2px; margin-top: -3px"></i>\n                  </template>\n                  <template #option="{ nombre, urgente }">\n                    {{ nombre }} <i v-if="urgente" class="fas fa-exclamation-triangle text-danger"\n                                    style="margin-left: 2px"></i>\n                  </template>\n                </v-select>\n              </div>\n\n              <div class="col-sm-2 form-group">\n                <label for="fecha_orden" class="control-label no-salto-linea"\n                       :class="{obligatorio: $can(\'crear-editar-fecha-orden\')}">Fecha orden</label>\n                <div class="input-group" v-if="$can(\'crear-editar-fecha-orden\')">\n                  <input\n                    id="fecha_orden"\n                    class="form-control input-sm"\n                    data-provide="datepicker"\n                    data-date-format="yyyy-mm-dd"\n                    data-date-today-highlight="true"\n                    data-date-autoclose="true"\n                    data-date-language="es"\n                    data-date-clear-btn="true"\n                    data-date-today-btn="linked"\n                    placeholder="aaaa-mm-dd"\n                    required\n                    @keydown.enter.prevent=""\n                    v-date="registro.fecha_orden"\n                  />\n                  <div class="input-group-btn">\n                    <button\n                      type="button"\n                      class="btn btn-sm btn-default"\n                      data-toggle="modal"\n                      data-target="#horaFechaOrdenModal"\n                      title="Definir hora">\n                      <i class="far fa-clock" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n                <div v-else>\n                  {{ registro.fecha_orden }}\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-4 form-group">\n                <label for="observaciones_orden" class="control-label">Observaciones recibo</label>\n                <textarea class="form-control input-sm resize-vertical" rows="1" id="observaciones_orden"\n                          name="observaciones_orden" v-model="registro.observaciones_orden"></textarea>\n              </div>\n              <div class="col-sm-4 form-group">\n                <label for="observaciones_hoja_trabajo" class="control-label">Observaciones laboratorista</label>\n                <textarea class="form-control input-sm resize-vertical" rows="1" id="observaciones_hoja_trabajo"\n                          name="observaciones_hoja_trabajo"\n                          v-model="registro.observaciones_hoja_trabajo"></textarea>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label for="servicio_id" class="control-label">\n                  Servicio\n                </label>\n                <v-select\n                  id="servicio_id"\n                  placeholder="Seleccione..."\n                  class="form-control input-sm"\n                  v-model="registro.sala_id"\n                  :options="salas"\n                  label="nombre"\n                  :reduce="opcion => opcion.id">\n                  <template #no-options>No existen coincidencias</template>\n                  <template #selected-option="{ nombre, urgente }">\n                    {{ nombre }} <i v-if="urgente" class="fas fa-exclamation-triangle text-danger"\n                                    style="margin-left: 2px; margin-top: -3px"></i>\n                  </template>\n                  <template #option="{ nombre, urgente }">\n                    {{ nombre }} <i v-if="urgente" class="fas fa-exclamation-triangle text-danger"\n                                    style="margin-left: 2px"></i>\n                  </template>\n                </v-select>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label for="fecha_pedido" class="control-label">Fecha pedido</label>\n                <input\n                  id="fecha_pedido"\n                  data-provide="datepicker"\n                  data-date-format="yyyy-mm-dd"\n                  data-date-today-highlight="true"\n                  data-date-autoclose="true"\n                  data-date-end-date="0d"\n                  data-date-language="es"\n                  class="form-control input-sm"\n                  placeholder="aaaa-mm-dd"\n                  v-date="registro.fecha_pedido"\n                  @keydown.enter.prevent=""\n                />\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-2 form-group">\n                <label for="numero_orden_externa" class="control-label">Referencia</label>\n                <i class="fas fa-info-circle" title="Otros sistemas pueden depender de esta referencia"\n                   data-toggle="tooltip"/>\n                <input\n                  id="numero_orden_externa"\n                  type="text"\n                  class="form-control input-sm"\n                  maxlength="60"\n                  title="Sistemas externos a Orión pueden depender de este número."\n                  v-model="registro.numero_orden_externa"\n                  @keydown.enter.prevent=""\n                />\n              </div>\n\n              <div class="col-sm-3 form-group">\n                <label for="medico_nombre" class="control-label">\n                  Flebotomista\n                  <i\n                    v-show="procesando.cargarFlebotomista"\n                    class="fas fa-spinner fa-spin"\n                    aria-hidden="true"\n                    title="Cargando flebotomista"\n                  />\n                  <i class="fas fa-check-circle" data-toggle="tooltip"\n                     title="Flebotomista seleccionado"\n                     v-show="registroAuxiliar.flebotomistaId"></i>\n                  <i class="fas fa-trash puntero" data-toggle="tooltip"\n                     title="Quitar flebotomista"\n                     @click="eliminarFlebotomista"\n                     v-show="registroAuxiliar.flebotomistaId"></i>\n                </label>\n                <div class="input-group">\n                  <input\n                    id="flebotomista_id"\n                    type="text"\n                    class="form-control input-sm"\n                    maxlength="15"\n                    placeholder="Buscar flebotomista"\n                    autocomplete="off"\n                    v-model="registroAuxiliar.flebotomistaNombre"\n                    @blur="autocompletarFlebotomista"\n                    @keydown.enter.prevent="focusSiguiente(\'crearFlebotomista\')">\n                  <div class="input-group-btn">\n                    <button\n                      id="crearFlebotomista"\n                      type="button"\n                      class="btn btn-sm btn-default"\n                      data-toggle="tooltip"\n                      title="Crear flebotomista"\n                      @click="abrirModalGestionarFlebotomista">\n                      <i class="fas fa-plus" aria-hidden="true"></i>\n                    </button>\n                    <button\n                      class="btn btn-sm btn-primary"\n                      type="button"\n                      data-toggle="tooltip"\n                      title="Buscar flebotomista"\n                      @click="abrirModalBuscarFlebotomista">\n                      <i class="fas fa-search" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <div class="col-sm-2 form-group"\n                   v-show="registro.paciente_nombre && registro.paciente_sexo === \'F\' && registro.paciente_type !== \'App\\\\Models\\\\SujetoObjeto\'">\n                <label class="control-label">F.U.M.</label>\n                <input\n                  id="fum"\n                  class="form-control input-sm"\n                  data-provide="datepicker"\n                  data-date-format="yyyy-mm-dd"\n                  data-date-today-highlight="true"\n                  data-date-autoclose="true"\n                  data-date-language="es"\n                  data-date-clear-btn="true"\n                  data-date-today-btn="linked"\n                  placeholder="aaaa-mm-dd"\n                  @keydown.enter.prevent=""\n                  v-date="registro.fecha_ultima_menstruacion"\n                />\n              </div>\n\n              <div class="col-sm-2 form-group margen-superior-boton"\n                   v-show="registro.paciente_nombre && registro.paciente_sexo === \'F\' && registro.paciente_type !== \'App\\\\Models\\\\SujetoObjeto\'">\n                <div class="checkbox">\n                  <label>\n                    <input\n                      type="checkbox" value=""\n                      :disabled="registro.paciente_sexo === \'M\'"\n                      @change="cambioEmbarazada"\n                      v-model="registro.embarazada">\n                    Embarazada\n                  </label>\n                </div>\n              </div>\n\n              <div class="col-sm-2 form-group"\n                   v-show="registro.paciente_nombre && registro.paciente_sexo === \'F\' && registro.embarazada  && registro.paciente_type !== \'App\\\\Models\\\\SujetoObjeto\'">\n                <label class="control-label">Semanas gestación</label>\n                <input type="number" class="form-control input-sm" step="1" min="0" max="50"\n                       v-model="registro.semanas_gestacion"\n                       @keydown.enter.prevent=""/>\n              </div>\n            </div>\n\n          </fieldset>\n          <fieldset disabled style="margin-top: 10px">\n            <div class="row" v-show="!errorEnTarifas">\n              <div class="col-md-9">\n                <legend class="obligatorio">\n                  Exámenes\n                  <button\n                    v-show="detallesOrdenes.length > 0"\n                    type="button"\n                    class="btn btn-default btn-sm pull-right"\n                    @click="abrirModalMuestras">\n                    <i class="fas fa-vial fa-xs"/>\n                    Muestras\n                  </button>\n                </legend>\n              </div>\n              <div class="col-md-3 hidden-xs hidden-sm">\n                <legend class="legend">\n                  Totales\n                  <span v-show="detallesOrdenes.length > 0" class="badge pull-right">\n                    {{ detallesOrdenes.length }}\n                    {{ etiquetaSeleccionados }}\n                  </span>\n                </legend>\n              </div>\n              <div class="col-md-4" v-if="!cargandoExamenes">\n                <div style="height: 340px; overflow: auto; margin-bottom: 12px">\n                  <table class="table table-striped table-bordered table-hover table-condensed">\n                    <thead>\n                    <tr>\n                      <td class="text-left sticky-top" colspan="2" style="padding-left: 0">\n                        <div class="col-xs-6" style="padding-left: 0">\n                          <input\n                            type="text"\n                            id="buscarExamen"\n                            ref="buscarExamen"\n                            class="form-control input-sm"\n                            placeholder="Buscar examen"\n                            tabindex="-1"\n                            autocomplete="off"\n                            v-model="cadenaBusquedaExamenes"\n                            :disabled="tieneFacturaEmitida"\n                            @keydown.down.prevent="siguienteExamen(-1)"\n                            @keydown.enter.prevent="autocompletarExamen"/>\n                        </div>\n                        <div class="col-xs-6 pull-right" style="padding-right: 0">\n                          <v-select\n                            :tabindex="-1"\n                            id="perfiles"\n                            :disabled="tieneFacturaEmitida || this.grupos.length===0"\n                            placeholder="Perfil"\n                            class="form-control input-sm"\n                            :options="grupos"\n                            v-model="grupoId"\n                            label="nombre"\n                            :clearable="false"\n                            :reduce="opcion => opcion.id"\n                            :loading="cargandoPerfiles"\n                            @input="cargarExamenesPorGrupo">\n                            <template #no-options>No existen coincidencias</template>\n                            <template #spinner="{ loading }">\n                              <div v-show="loading">\n                                <i class="fas fa-spinner fa-spin fa-fw"/>\n                              </div>\n                            </template>\n                          </v-select>\n                        </div>\n                      </td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-if="examenesFiltrados.length === 0">\n                      <td colspan="2" class="text-center">\n                        <output v-show="registro.subempresa_id===\'\'">\n                          No se ha seleccionado una "Categoría"\n                        </output>\n                        <output v-show="registro.subempresa_id!==\'\'">\n                          No existen exámenes disponibles para la categoría seleccionada\n                        </output>\n                      </td>\n                    </tr>\n                    <template v-for="(examenTarifa, indice) in examenesFiltrados">\n                      <tr :class="{\'hover-examen\': indice === indiceExamen}" @mouseover="mouseSobreExamen">\n                        <td class="col-xs-11 col-sm-11 col-md-11 text-left cortar-texto">\n                          <div :title="examenTarifa.examen.nombre">\n                            {{ examenTarifa.examen.codigo }} - {{ examenTarifa.examen.nombre }}\n                            <i v-show="examenTarifa.examen.se_remite"\n                               class="fas fa-shipping-fast text-gris cursor-menu"\n                               title="Se remite" data-toggle="tooltip">\n                            </i>\n                          </div>\n                        </td>\n                        <td class="col-xs-1 col-sm-1 col-md-1 text-center">\n                          <button\n                            :id="\'examen-\'+indice"\n                            type="button"\n                            class="btn btn-primary btn-xs"\n                            title="Agregar examen"\n                            :disabled="tieneFacturaEmitida"\n                            @keydown.up.prevent="anteriorExamen(indice)"\n                            @keydown.down.prevent="siguienteExamen(indice)"\n                            @keydown.enter="$event.stopPropagation()"\n                            @click="agregarExamen(examenTarifa)">\n                            <i class="fas fa-plus fa-fw"></i>\n                          </button>\n                        </td>\n                      </tr>\n                    </template>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n              <div class="col-md-5" v-if="!cargandoExamenes">\n                <div id="examenes-seleccioandos" style="height: 340px; overflow: auto">\n                  <div v-if="detallesOrdenes.length === 0" class="text-center" style="padding-top: 30px">\n                    No existen exámenes seleccionados\n                  </div>\n                  <table\n                    v-show="detallesOrdenes.length > 0"\n                    class="table table-striped table-bordered table-hover table-condensed">\n                    <thead>\n                    <tr>\n                      <td class="sticky-top" style="padding-left: 0">\n                        <input\n                          type="text"\n                          class="form-control input-sm col-sm-3"\n                          placeholder="Buscar examen seleccionado"\n                          v-model="cadenaBusquedaDetalles"/>\n                      </td>\n                      <th class="col-xs-2 text-center sticky-top">Valor</th>\n                      <th class="text-center sticky-top">\n                        <button\n                          type="button"\n                          class="btn btn-xs btn-default"\n                          title="Eliminar todos los exámenes"\n                          data-toggle="tooltip"\n                          v-show="detallesOrdenes.length > 0"\n                          :disabled="tieneFacturaEmitida"\n                          @click="eliminarDetalles">\n                          <i class="fas fa-trash fa-fw" aria-hidden="true"></i>\n                        </button>\n                      </th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for="detalle in detallesOrdenesFiltrados">\n                      <td class="text-left">\n                        {{ detalle.examen.codigo }} - {{ detalle.examen.nombre }}\n\n                        <i v-show="detalle.examen.se_remite"\n                           class="fas fa-shipping-fast text-gris cursor-menu"\n                           title="Se remite" data-toggle="tooltip">\n                        </i>\n\n                        <i\n                          v-show="detalle.examen.condiciones_preanaliticas"\n                          class="fas fa-exclamation-circle fa-sm"\n                          style="padding-left: 4px"\n                          data-toggle="popover"\n                          data-html="true"\n                          data-placement="top"\n                          title="Condiciones preanalíticas"\n                          :data-content="tituloCondicionesPreanaliticas(detalle.examen)"\n                        />\n\n                        <i\n                          class="fas fa-vial fa-xs puntero"\n                          style="padding-left: 4px"\n                          data-toggle="tooltip"\n                          data-placement="top"\n                          @click="abrirModalMuestras"\n                          :title="detalle.muestraPendiente?\'Muestra pendiente\':\'Muestra recibida\'"\n                        />\n                        <i\n                          v-show="detalle.muestraPendiente"\n                          class="fas fa-times fa-sm icon-stack-2x text-danger"\n                          data-toggle="tooltip"\n                          title="Muestra pendiente">\n                        </i>\n                        <i\n                          v-show="!detalle.muestraPendiente"\n                          class="fas fa-check fa-sm icon-stack-2x text-gris"\n                          data-toggle="tooltip"\n                          title="Muestra recibida">\n                        </i>\n                        <span\n                          class="icon-stack-2x"\n                          style="padding-left: 1px; font-size: 0.8em;"\n                          v-show="!detalle.muestraPendiente && detalle.muestras.length>1"\n                        >\n                          {{ detalle.muestras.length }}\n                        </span>\n\n                        <i\n                          v-show="detalle.id && detalle.descargado_sistema_externo"\n                          class="fas fa-download"\n                          title="Examen descargado de sistema externo"\n                          data-toggle="tooltip"/>\n                        <i\n                          v-show="detalle.id && detalle.enviado_sistema_externo"\n                          class="fas fa-upload"\n                          title="Resultado enviado a sistema externo"\n                          data-toggle="tooltip"/>\n                      </td>\n                      <td class="text-right">\n                        <input\n                          type="number"\n                          class="form-control input-sm currency text-right"\n                          v-if="cambio_precio && !tieneFacturaEmitida"\n                          v-model="detalle.valor"\n                          min="0"\n                          step="0.01"\n                          :disabled="!cambio_precio || tieneFacturaEmitida"\n                          @keydown.enter.prevent=""\n                          @keyup="validarValor(detalle)"\n                          @keydown.tab="valorDetalleKeyTab(detalle)"\n                          @blur="formatearValorDetalle(detalle)"/>\n                        <template v-if="!cambio_precio || tieneFacturaEmitida">\n                          {{ detalle.valor }}\n                        </template>\n                      </td>\n                      <td class="text-center centrado-vertical">\n                        <div class="btn-group" role="group" aria-label="...">\n                          <button type="button" class="btn btn-default btn-xs" title="Eliminar examen"\n                                  @click="eliminarDetalle(detalle)"\n                                  :disabled="detalle.estado !== \'G\' || tieneFacturaEmitida || cargandoEliminarExamen === detalle.id">\n                            <i v-show="cargandoEliminarExamen !== detalle.id" class="fas fa-trash fa-fw"\n                               aria-hidden="true"></i>\n                            <i v-show="cargandoEliminarExamen === detalle.id" class="fas fa-spinner fa-spin fa-fw"\n                               aria-hidden="true"></i>\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n\n              <div id="totales" class="form-horizontal col-md-3" v-if="!cargandoExamenes">\n                <div class="hidden-md hidden-lg" style="margin-top: 15px">\n                  <legend class="legend">\n                    Totales\n                    <span v-show="detallesOrdenes.length > 0" class="badge pull-right">\n                      {{ detallesOrdenes.length }}\n                      {{ etiquetaSeleccionados }}\n                    </span>\n                  </legend>\n                </div>\n                <div class="form-group">\n                  <label for="valor_subtotal" class="col-xs-6 col-sm-6 col-md-6 control-label"\n                         style="text-align: left">Subtotal</label>\n                  <div id="valor_subtotal" class="col-xs-6 col-sm-6 col-md-6 text-right">\n                    {{ $cliente.moneda }}{{ valorSubtotal.toFixed(2) }}\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label for="porcentaje_descuento" class="col-xs-6 col-sm-6 col-md-6 control-label"\n                         style="text-align: left">\n                    % Descuento\n                  </label>\n                  <div class="col-md-6 text-right">\n                    <input\n                      id="porcentaje_descuento"\n                      class="form-control input-sm text-right"\n                      type="number"\n                      step="0.01"\n                      min="0"\n                      max="100"\n                      v-model.number="porcentaje_descuento"\n                      @keydown.enter.prevent="focusSiguiente(\'valor_descuento\')"\n                      @keyup="porcentajeDescuentoKeyup"\n                      @blur="formatearPorcentajeDescuento"\n                      :disabled="detallesOrdenes.length === 0"\n                      v-if="!tieneFacturaEmitida && permisos.generarDescuentoPorEmpresa"\n                    />\n                    <template v-else>\n                      {{ porcentaje_descuento }}\n                    </template>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label for="valor_descuento" class="col-xs-6 col-sm-6 col-md-6 control-label"\n                         style="text-align: left">Descuento</label>\n                  <div class="col-md-6 text-right">\n                    <input\n                      id="valor_descuento"\n                      class="form-control input-sm currency text-right"\n                      type="number"\n                      step="0.01"\n                      min="0"\n                      v-model="registro.valor_descuento"\n                      @keydown.enter.prevent="focusSiguiente(\'porcentaje_recargo\')"\n                      @keyup="valorDescuentoKeyup"\n                      @blur="formatearValorDescuento"\n                      :disabled="detallesOrdenes.length === 0"\n                      v-if="!tieneFacturaEmitida && permisos.generarDescuentoPorEmpresa"\n                    />\n                    <template v-else>\n                      {{ $cliente.moneda }}{{ valorDescuento }}\n                    </template>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label for="porcentaje_recargo" class="col-xs-6 col-sm-6 col-md-6 control-label"\n                         style="text-align: left">\n                    % Recargo\n                  </label>\n                  <div class="col-md-6 text-right">\n                    <input\n                      id="porcentaje_recargo"\n                      type="number"\n                      step="0.01"\n                      class="form-control input-sm currency text-right"\n                      min="0"\n                      v-model="porcentajeRecargo"\n                      @keydown.enter.prevent="focusSiguiente(\'valor_recargo\')"\n                      @keyup="porcentajeRecargoKeyup"\n                      @blur="formatearPorcentajeRecargo"\n                      :disabled="detallesOrdenes.length === 0"\n                      v-if="!tieneFacturaEmitida"\n                    />\n                    <template v-else>\n                      {{ porcentajeRecargo }}\n                    </template>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label for="valor_recargo" class="col-xs-6 col-sm-6 col-md-6 control-label"\n                         style="text-align: left">\n                    Recargo\n                  </label>\n                  <div class="col-md-6 text-right">\n                    <input\n                      id="valor_recargo"\n                      class="form-control input-sm currency text-right"\n                      type="number"\n                      step="0.01"\n                      min="0"\n                      v-model="registro.valor_recargo"\n                      @keydown.enter.prevent="focusSiguiente(\'valor_domicilio\')"\n                      @keyup="valorRecargoKeyup"\n                      @blur="formatearValorRecargo"\n                      :disabled="detallesOrdenes.length === 0"\n                      v-if="!tieneFacturaEmitida"\n                    />\n                    <template v-else>\n                      {{ $cliente.moneda }}{{ valorRecargo }}\n                    </template>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label for="valor_domicilio" class="col-xs-6 col-sm-6 col-md-6 control-label"\n                         style="text-align: left">Domicilio</label>\n                  <div class="col-md-6 text-right">\n                    <input\n                      id="valor_domicilio"\n                      class="form-control input-sm currency text-right"\n                      type="number"\n                      step="0.01"\n                      min="0"\n                      v-model="registro.valor_domicilio"\n                      @keydown.enter.prevent="focusSiguiente(\'abono\')"\n                      @keyup="valorDomicilioKeyup"\n                      @blur="formatearValorDomicilio"\n                      :disabled="detallesOrdenes.length === 0"\n                      v-if="!tieneFacturaEmitida"\n                    />\n                    <template v-else>\n                      {{ $cliente.moneda }}{{ valorDomicilio }}\n                    </template>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label for="valor_total" class="col-xs-5 col-sm-5 col-md-5 control-label" style="text-align: left">\n                    Valor total\n                  </label>\n                  <div id="valor_total" class="col-xs-7 col-md-7 text-right valor-total">\n                    {{ valorTotalCalculado | moneda }}\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <div class="col-md-6">\n                    <label\n                      for="abono"\n                      class="col-md-12 control-label no-padding"\n                      style="text-align: left"\n                      :title="$options.filters.formaPago(abono.forma_pago)">\n                      <span class="pull-left" style="margin-right: 2px">\n                        Abono\n                      </span>\n                      <button\n                        v-if="id === \'0\' && permisos.crearAbonos"\n                        :disabled="!abono.valor"\n                        class="btn btn-default btn-xs pull-left"\n                        type="button"\n                        @click="abrirModalCrearAbono"\n                        style="margin-right: 2px">\n                        <i class="fa fa-plus"></i>\n                      </button>\n                      <div class="dropup pull-left" v-show="id === \'0\' && permisos.crearAbonos">\n                        <button\n                          :disabled="!abono.valor"\n                          class="btn btn-default btn-xs dropdown-toggle"\n                          type="button"\n                          data-toggle="dropdown">\n                          {{ abono.forma_pago }}\n                          <span class="caret"></span>\n                        </button>\n                        <ul class="dropdown-menu dropdown-menu-right">\n                          <li v-for="formaPago in formasPago">\n                            <a @click="seleccionarFormaPagoAbono(formaPago)">{{ formaPago|formaPago }}</a>\n                          </li>\n                        </ul>\n                      </div>\n                    </label>\n\n                  </div>\n                  <div class="col-md-6 text-right">\n                    <div class="input-group" v-if="id === \'0\'">\n                      <div class="input-group-btn">\n                        <button\n                          type="button"\n                          class="btn btn-default btn-sm"\n                          @click="abonarTodo"\n                          title="Abonar todo"\n                          :disabled="detallesOrdenes.length === 0 || saldoCalculado <= 0 || !$can(\'crear-abonos\')">\n                          <i class="fas fa-arrow-circle-down fa-fw"></i>\n                        </button>\n                      </div>\n                      <input\n                        v-if="id === \'0\'"\n                        id="abono"\n                        type="number"\n                        class="form-control input-sm currency text-right"\n                        step="0.01"\n                        min="0"\n                        v-model="abono.valor"\n                        @keydown.enter.prevent=""\n                        @keyup="validarAbono"\n                        @blur="abonoKeyTab"\n                        :disabled="id !== \'0\' || !permisos.crearAbonos || detallesOrdenes.length === 0"/>\n                    </div>\n                    <div class="text-right" v-if="id !== \'0\'">{{ $cliente.moneda }}{{ abono.valor }}</div>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <div class="col-xs-5 col-md-5">\n                    <label for="saldo" class="control-label text-left">Saldo</label>\n                  </div>\n                  <div class="col-xs-7 col-md-7">\n                    <div id="saldo" class="text-right valor-total">{{ $cliente.moneda }}{{\n                        saldoCalculado\n                      }}\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div id="cargandoExamenes" class="col-md-12" v-if="cargandoExamenes">\n                <div class="panel-body text-center">\n                  <h4>\n                    <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"/>Cargando...\n                  </h4>\n                </div>\n              </div>\n            </div>\n            <div class="row" v-show="errorEnTarifas">\n              <div class="col-md-12">\n                <legend>\n                  Exámenes sin tarifa\n                </legend>\n              </div>\n              <div class="col-md-6" style="padding-top: 10px">\n                <div style="height: 300px; overflow: auto">\n                  <div v-if="examenesSinTarifa.length === 0">\n                    No existen registros\n                  </div>\n                  <ul>\n                    <li v-for="examen in examenesSinTarifa"> {{ examen.examen.codigo }} - {{ examen.examen.nombre }}\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </fieldset>\n          <hr v-show="examenes.length > 0 || cargandoExamenes"/>\n        </div>\n        <div id="datosAdicionales" class="tab-pane fade">\n          <fieldset disabled>\n            <div class="row">\n              <div class="col-sm-2 form-group">\n                <label for="tipo_paciente_id" class="control-label">\n                  Tipo\n                  {{ esObjeto ? \'objeto\' : \'paciente\' }}\n                </label>\n                <select class="form-control input-sm" id="tipo_paciente_id" name="tipo_paciente_id"\n                        v-model="registro.tipo_paciente_id">\n                  <option value="">Seleccione...</option>\n                  <option v-for="tipoPaciente in tiposPacientes" :value="tipoPaciente.id">{{\n                      tipoPaciente.nombre\n                    }}\n                  </option>\n                </select>\n              </div>\n\n              <div class="col-sm-2 form-group">\n                <label for="plan_salud_id" class="control-label">Plan salud</label>\n                <select class="form-control input-sm" id="plan_salud_id" name="plan_salud_id"\n                        v-model="registro.plan_salud_id">\n                  <option value="">Seleccione...</option>\n                  <option v-for="planSalud in planesSalud" :value="planSalud.id">{{ planSalud.nombre }}\n                  </option>\n                </select>\n              </div>\n\n              <div class="col-sm-1 form-group">\n                <label for="sala" class="control-label">Sala</label>\n                <input type="text" class="form-control input-sm" id="sala" maxlength="6"\n                       v-model="registro.numero_sala" @keydown.enter.prevent=""/>\n              </div>\n\n              <div class="col-sm-1 form-group">\n                <label for="cama" class="control-label">Cama</label>\n                <input type="text" class="form-control input-sm" id="cama" maxlength="8"\n                       v-model="registro.cama" @keydown.enter.prevent=""/>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label for="numero_pedido" class="control-label">Número pedido</label>\n                <input type="text" class="form-control input-sm" id="numero_pedido" maxlength="30"\n                       v-model="registro.numero_pedido" @keydown.enter.prevent=""/>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label for="laboratorio_id" class="control-label">Laboratorio remisión</label>\n                <select\n                  id="laboratorio_id"\n                  name="laboratorio_id"\n                  class="form-control input-sm"\n                  v-model="registro.laboratorio_id">\n                  <option value="">Seleccione...</option>\n                  <option v-for="laboratorio in laboratorios" :value="laboratorio.id">\n                    {{ laboratorio.nombre }}\n                  </option>\n                </select>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-4 form-group">\n                <label for="diagnostico_concepto" class="control-label">Diagnóstico</label>\n                <div class="input-group">\n                  <input type="text" class="form-control input-sm" id="diagnostico_concepto"\n                         maxlength="100" autocomplete="off"\n                         v-model="registro.diagnostico_concepto" @keydown.tab="autocompletarDiagnostico"\n                         @keydown.enter.prevent="autocompletarDiagnostico"\n                         v-on:blur="verificarDiagnostico"\n                         placeholder="Concepto">\n                  <div class="input-group-btn">\n                    <button class="btn btn-sm btn-primary" type="button" @click="buscarDiagnostico" title="Buscar">\n                      <i class="fas fa-search" aria-hidden="true"/>\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <div class="col-sm-2 form-group">\n                <label for="fecha_entrega_estimada" class="control-label no-salto-linea">Fecha entrega</label>\n                <div class="input-group">\n                  <input\n                    id="fecha_entrega_estimada"\n                    class="form-control input-sm"\n                    data-provide="datepicker"\n                    data-date-format="yyyy-mm-dd"\n                    data-date-today-highlight="true"\n                    data-date-autoclose="true"\n                    data-date-language="es"\n                    placeholder="aaaa-mm-dd"\n                    v-date="registro.fecha_entrega_estimada"\n                    @keydown.enter.prevent=""\n                  />\n                  <div class="input-group-btn">\n                    <button\n                      type="button"\n                      class="btn btn-sm btn-default"\n                      data-toggle="modal"\n                      data-target="#horaFechaEntregaModal"\n                      title="Definir hora">\n                      <i class="far fa-clock" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label for="fecha_procesamiento" class="control-label no-salto-linea">Fecha procesamiento</label>\n                <div class="input-group">\n                  <input\n                    id="fecha_procesamiento"\n                    class="form-control input-sm"\n                    data-provide="datepicker"\n                    data-date-format="yyyy-mm-dd"\n                    data-date-today-highlight="true"\n                    data-date-autoclose="true"\n                    data-date-language="es"\n                    placeholder="aaaa-mm-dd"\n                    v-date="registro.fecha_procesamiento"\n                    @keydown.enter.prevent=""\n                  />\n                  <div class="input-group-btn">\n                    <button\n                      type="button"\n                      class="btn btn-sm btn-default"\n                      data-toggle="modal"\n                      data-target="#horaFechaProcesamientoModal"\n                      title="Definir hora">\n                      <i class="far fa-clock" aria-hidden="true"></i>\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label class="control-label">Temperatura</label>\n                <input\n                  type="number"\n                  class="form-control input-sm"\n                  step="0.01"\n                  min="30"\n                  max="50"\n                  maxlength="6"\n                  v-model="registro.temperatura"\n                  @keydown.enter.prevent=""\n                />\n              </div>\n              <div class="col-sm-2 form-group">\n                <label class="control-label">Grupo</label>\n                <input\n                  type="text"\n                  class="form-control input-sm"\n                  maxlength="50"\n                  v-model="registro.grupo"\n                  @keydown.enter.prevent=""\n                />\n              </div>\n            </div>\n          </fieldset>\n        </div>\n        <div id="variablesEpidemilogicas" class="tab-pane fade">\n          <fieldset disabled>\n            <div class="row">\n              <div class="col-sm-12 form-group">\n                <div class="checkbox">\n                  <label>\n                    <input\n                      type="checkbox" value=""\n                      @change="cambioCumpleDefinicionCaso"\n                      v-model="variablesEpidemiologicas.cumple_definicion_caso">\n                    Cumple definición de caso\n                  </label>\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-4 form-group">\n                <label class="control-label">\n                  Diagnóstico\n                  <i\n                    v-show="cargandoDiagnosticoEpi"\n                    class="fas fa-spinner fa-spin fa-fw"\n                    title="Cargando"/>\n                </label>\n                <div class="input-group">\n                  <input type="text" class="form-control input-sm"\n                         maxlength="255" autocomplete="off"\n                         v-model="variablesEpidemiologicas.diagnostico_concepto"\n                         @keydown.tab="autocompletarDiagnosticoEpidemiologico"\n                         @keydown.enter.prevent="autocompletarDiagnosticoEpidemiologico"\n                         v-on:blur="verificarDiagnosticoEpidemiologico"\n                         placeholder="Concepto">\n                  <div class="input-group-btn">\n                    <button class="btn btn-sm btn-primary" type="button" title="Buscar"\n                            @click="buscarDiagnosticoEpidemiologico">\n                      <i class="fas fa-search" aria-hidden="true"/>\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label class="control-label no-salto-linea">Fecha inicio síntomas</label>\n                <input\n                  class="form-control input-sm cursor-menu"\n                  autocomplete="off"\n                  data-provide="datepicker"\n                  data-date-format="yyyy-mm-dd"\n                  data-date-today-highlight="true"\n                  data-date-autoclose="true"\n                  data-date-language="es"\n                  data-date-end-date="0d"\n                  placeholder="aaaa-mm-dd"\n                  v-date="variablesEpidemiologicas.fecha_inicio_sintomas"\n                  @keydown.enter.prevent=""\n                />\n              </div>\n              <div class="col-sm-2 form-group margen-superior-boton">\n                <div class="checkbox">\n                  <label>\n                    <input type="checkbox" v-model="variablesEpidemiologicas.epi_1">\n                    EPI 1\n                  </label>\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-6 form-group">\n                <label class="control-label">Comorbilidad (Enfermedades preexistentes)</label>\n                <textarea class="form-control input-sm resize-vertical" rows="1" maxlength="200"\n                          v-model="variablesEpidemiologicas.comorbilidad">\n                </textarea>\n              </div>\n              <div class="col-sm-6 form-group">\n                <label class="control-label">Lugar o antecedente probable de infección</label>\n                <select class="form-control input-sm"\n                        v-model="variablesEpidemiologicas.antecedente_infeccion">\n                  <option value="">Seleccione...</option>\n                  <option v-for="antecedenteInfeccion in antecedentesInfeccion" :value="antecedenteInfeccion.id">\n                    {{ antecedenteInfeccion.nombre }}\n                  </option>\n                </select>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-2 form-group">\n                <label class="control-label">Antecedente de viaje</label>\n                <select class="form-control input-sm"\n                        v-model="variablesEpidemiologicas.antecedente_viaje">\n                  <option value="">Seleccione...</option>\n                  <option value="DENTRO_PAIS">Dentro del país</option>\n                  <option value="FUERA_PAIS">Fuera del país</option>\n                </select>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label class="control-label">Fecha viaje</label>\n                <input\n                  class="form-control input-sm cursor-menu"\n                  autocomplete="off"\n                  data-provide="datepicker"\n                  data-date-format="yyyy-mm-dd"\n                  data-date-today-highlight="true"\n                  data-date-autoclose="true"\n                  data-date-language="es"\n                  data-date-end-date="0d"\n                  placeholder="aaaa-mm-dd"\n                  v-date="variablesEpidemiologicas.fecha_viaje"\n                  @keydown.enter.prevent=""\n                />\n              </div>\n              <div class="col-sm-8 form-group">\n                <label class="control-label">Lugar de viaje</label>\n                <input type="text" class="form-control input-sm" maxlength="100"\n                       v-model="variablesEpidemiologicas.lugar_viaje"\n                       @keydown.enter.prevent=""\n                />\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-6 form-group">\n                <label class="control-label">Unidad de salud que notifica</label>\n                <input\n                  type="text"\n                  class="form-control input-sm"\n                  maxlength="150"\n                  @change="cambiarUnidadSaludNotifica"\n                  v-model="variablesEpidemiologicas.unidad_salud_notifica"\n                  @keydown.enter.prevent=""\n                />\n              </div>\n              <div class="col-sm-3 form-group">\n                <label class="control-label">Semana epidemiológica</label>\n                <input type="number" class="form-control input-sm" step="1" min="0" maxlength="6"\n                       v-model="variablesEpidemiologicas.semana_epidemiologica"\n                       @keydown.enter.prevent=""\n                />\n              </div>\n            </div>\n\n            <div class="row">\n              <ubicacion-geografica-ec\n                :key="`ug-` + key"\n                :provincias="ubicacionesNivel2"\n                :provincia-id.sync="registroAuxiliar.provinciaId"\n                :canton-id="registroAuxiliar.cantonId"\n                :parroquia-id="variablesEpidemiologicas.unidad_salud_parroquia_id"\n                cookie="epi"\n                v-model="variablesEpidemiologicas.unidad_salud_parroquia_id"\n                @provincia-id-actualizada="provinciaIdEpiActualizada"\n                @canton-id-actualizado="cantonIdEpiActualizado">\n              </ubicacion-geografica-ec>\n            </div>\n          </fieldset>\n        </div>\n      </div>\n    </form>\n\n    <div id="modalGuardar" class="modal fade" tabindex="-1" role="dialog">\n      <div class="modal-dialog modal-sm" role="document">\n        <div class="modal-content">\n          <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n              <span aria-hidden="true">&times;</span>\n            </button>\n            <h4 class="modal-title">Guardar orden</h4>\n          </div>\n          <div class="modal-body">\n            <div class="row">\n              <div class="col-md-12 form-group">\n                {{ mensajeGuardar }}\n              </div>\n            </div>\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cerrar</button>\n            <button\n              type="submit"\n              class="btn btn-primary btn-sm"\n              data-dismiss="modal"\n              @click="guardar(false)">\n              Guardar de todos modos\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <gestionar-paciente-modal\n      :id-sistema-externo="id === \'0\'?$usuario.sistemaHisId:(registro.sistema_externo_id?registro.sistema_externo_id:$usuario.sistemaHisId)"\n      @paciente-humano-guardado="pacienteHumanoGuardado"\n      @paciente-animal-guardado="pacienteAnimalGuardado"\n      @sujeto-objeto-guardado="sujetoObjetoGuardado"/>\n\n    <buscar-paciente-modal @paciente-seleccionado="pacienteSeleccionado"/>\n\n    <gestionar-medico-modal @medico-creado="medicoCreado"/>\n\n    <buscar-medico-modal @medico-seleccionado="medicoSeleccionado"/>\n\n    <gestionar-flebotomista-modal @flebotomista-creado="flebotomistaCreado"/>\n\n    <buscar-flebotomista-modal @flebotomista-seleccionado="flebotomistaSeleccionado"/>\n\n    <clientes-generador-ordenes-modal\n      :datos.sync="datosGeneradorOrdenes">\n    </clientes-generador-ordenes-modal>\n\n    <clientes-jm-factura-orden-modal\n      :datos.sync="datosJM">\n    </clientes-jm-factura-orden-modal>\n\n    <clientes-buscar-diagnostico-modal\n      id="buscarDiagnostico"\n      @diagnostico-seleccionado="diagnosticoSeleccionado"/>\n\n    <clientes-buscar-diagnostico-modal\n      id="buscarDiagnosticoEpidemiologico"\n      @diagnostico-seleccionado="diagnosticoEpidemiologicoSeleccionado"/>\n\n    <ver-auditorias-modal\n      :orden-id="id"\n      tipo="ordenes"\n    />\n\n    <imprimir-modal\n      :url-api-local="printServer.urlApiLocal"\n      @documento-impreso="documentoImpreso">\n    </imprimir-modal>\n\n    <hora-modal\n      id="horaFechaOrdenModal"\n      :hora="registro.hora_orden"\n      @hora-seleccionada="horaFechaOrdenSeleccionada">\n    </hora-modal>\n\n    <hora-modal\n      id="horaFechaProcesamientoModal"\n      :hora="horaProcesamiento"\n      @hora-seleccionada="horaFechaProcesamientoSeleccionada">\n    </hora-modal>\n\n    <hora-modal\n      id="horaFechaEntregaModal"\n      :hora="horaEntrega"\n      @hora-seleccionada="horaFechaEntregaSeleccionada">\n    </hora-modal>\n\n    <abonos-formulario-modal\n      :sistema-factura="facturas.sistema"\n      :configs="facturas.configs"\n      @abono-creado="abonoCreado">\n    </abonos-formulario-modal>\n\n    <muestras-modal\n      :detalles-orden="detallesOrdenes"\n      :ver-muestra="id !== \'0\'"\n      :flebotomistas="flebotomistas"\n      :flebotomista-id="registroAuxiliar.flebotomistaId"\n      @muestras-guardadas="muestrasGuardadas"\n    ></muestras-modal>\n\n    <configs-modal :print-server="printServer"></configs-modal>\n\n    <ver-cobertura-msp-modal\n      :identificacion-paciente="registro.paciente_identificacion"\n      :fecha-nacimiento="registro.paciente_fecha_nacimiento"\n      :fecha-orden="registro.fecha_orden">\n    </ver-cobertura-msp-modal>\n\n    <ver-medico-modal\n      :medico-id=registro.medico_id>\n    </ver-medico-modal>\n\n    <cargando-modal ref="cargando"></cargando-modal>\n  </div>\n</template>\n\n<script>\n  import VerAuditoriasModal from "../modals/VerAuditoriasModal";\n  import UbicacionGeograficaEc from "../../comunes/UbicacionGeograficaEc";\n  import BuscarMedicoModal from "../modals/BuscarMedicoModal";\n  import GestionarMedicoModal from "../modals/GestionarMedicoModal";\n  import ImprimirModal from "../modals/ImprimirModal";\n  import HoraModal from "../modals/HoraModal";\n  import MuestrasModal from "../modals/MuestrasModal";\n  import {crearBotonConData, escaparRegex, verificarAbonoValido} from "../../../support/util";\n  import {\n    Catalogo,\n    EstadoDetalleOrden,\n    EstadoMuestra,\n    EstadoOrden, FormaPago,\n  } from "../../../support/constantes";\n  import BuscarPacienteModal from "../modals/BuscarPacienteModal";\n  import ConfigsModal from "./ConfigsModal";\n  import AbonosFormularioModal from "../abonos/AbonosFormularioModal";\n  import BuscarFlebotomistaModal from "../modals/BuscarFlebotomistaModal";\n  import GestionarFlebotomistaModal from "../modals/GestionarFlebotomistaModal";\n  import GestionarPacienteModal from "../modals/GestionarPacienteModal";\n  import VerCoberturaMspModal from "../modals/VerCoberturaMspModal.vue";\n  import VerMedicoModal from "../modals/VerMedicoModal.vue";\n\n  export default {\n    components: {\n      UbicacionGeograficaEc,\n      VerAuditoriasModal,\n      BuscarMedicoModal,\n      GestionarMedicoModal,\n      ImprimirModal,\n      HoraModal,\n      MuestrasModal,\n      BuscarPacienteModal,\n      ConfigsModal,\n      AbonosFormularioModal,\n      GestionarFlebotomistaModal,\n      BuscarFlebotomistaModal,\n      GestionarPacienteModal,\n      VerCoberturaMspModal,\n      VerMedicoModal\n    },\n    props: [\'id\', \'datos\'],\n    data() {\n      return {\n        indiceExamen: null,\n        config: {\n          medicoObligatorio: false,\n          mostrarAdvertenciaAbonoIncompleto: false,\n        },\n        primerClickEpi: false,\n        errorEnTarifas: false,\n        facturas: {\n          sistema: {},\n          configs: {\n            requeridos: {},\n            acciones: {},\n            mostrar: {},\n          },\n        },\n        errorEnOrden: false,\n        procesando: {\n          cargarFlebotomista: false,\n          cargarMedico: false,\n        },\n        cargandoPerfiles: false,\n        cargandoDiagnosticoEpi: false,\n        cargandoSubempresas: false,\n        cargandoPaciente: false,\n        cargandoExamenes: false,\n        cargandoEliminarExamen: [],\n        cadenaBusqueda: \'\',\n        cadenaBusquedaExamenes: \'\',\n        cadenaBusquedaDetalles: \'\',\n        respuesta: \'\',\n        permisos: {},\n        cotizacion: null,\n        pedido: null,\n        formasPago: FormaPago,\n        datosJM: {\n          orden: null\n        },\n        subdominio: \'\',\n        porcentajeRecargo: 0,\n        porcentaje_descuento: 0,\n        abono: {\n          id: null,\n          forma_pago: \'\',\n          valor: 0,\n          extras: null,\n          referencia: \'\',\n          numero_forma_pago: \'\',\n          cuenta_bancaria_id: \'\',\n        },\n        cambio_precio: true,\n        empresaPorDefectoId: \'\',\n        etiquetasDatosPaciente: 0,\n        mostrarPdfRecibo: true,\n        mostrarPdfEtiquetas: true,\n        descuentoPorPorcentaje: false,\n        recargoPorPorcentaje: false,\n        horaProcesamiento: \'\',\n        horaEntrega: \'\',\n        tieneFacturaEmitida: false,\n        usuarioIngresa: \'\',\n        sistemaIngresa: \'\',\n        registro: {\n          id: this.id,\n          soloGuardar: false,\n          fecha_orden: \'\',\n          hora_orden: \'\',\n          estado: \'\',\n          numero_orden: \'\',\n          numero_orden_externa: \'\',\n          paciente_id: \'\',\n          paciente_identificacion: \'\',\n          paciente_historia_clinica: \'\',\n          paciente_numero_historia_clinica: \'\',\n          paciente_tipo: \'\',\n          paciente_type: \'\',\n          paciente_nombre: \'\',\n          paciente_taxonomia: \'\',\n          paciente_fecha_nacimiento: \'\',\n          paciente_sexo: \'\',\n          paciente_correo: \'\',\n          paciente_direccion: \'\',\n          paciente_telefono: \'\',\n          paciente_numero_poliza: \'\',\n          paciente_dueno_responsable: \'\',\n          medico_id: \'\',\n          sucursal_id: \'\',\n          empresa_id: \'\',\n          subempresa_id: \'\',\n          numero_pedido: \'\',\n          fecha_pedido: \'\',\n          numero_sala: \'\',\n          cama: \'\',\n          extras: null,\n          embarazada: false,\n          tipo_paciente_id: \'\',\n          tipo_atencion_id: \'\',\n          plan_salud_id: \'\',\n          laboratorio_id: \'\',\n          sala_id: \'\',\n          sistema_externo_id: null,\n          diagnostico_id: \'\',\n          diagnostico_concepto: \'\',\n          fecha_entrega_estimada: \'\',\n          observaciones_orden: \'\',\n          observaciones_hoja_trabajo: \'\',\n          valor_descuento: 0,\n          valor_recargo: 0,\n          valor_domicilio: 0,\n          valor_total: \'\',\n          abonos: [],\n          temperatura: \'\',\n          grupo: \'\',\n          fecha_ultima_menstruacion: \'\',\n          semanas_gestacion: \'\',\n          fecha_procesamiento: \'\',\n          variablesEpidemiologicas: {}\n        },\n        variablesEpidemiologicas: {\n          id: \'\',\n          cumple_definicion_caso: \'\',\n          epi_1: \'\',\n          fecha_inicio_sintomas: \'\',\n          diagnostico_id: \'\',\n          diagnostico_concepto: \'\',\n          comorbilidad: \'\',\n          antecedente_viaje: \'\',\n          antecedente_infeccion: \'\',\n          fecha_viaje: \'\',\n          lugar_viaje: \'\',\n          unidad_salud_notifica: \'\',\n          unidad_salud_parroquia_id: \'\',\n          semana_epidemiologica: \'\'\n        },\n        detallesOrdenes: [],\n        tiposPacientes: [],\n        tiposAtenciones: [],\n        planesSalud: [],\n        laboratorios: [],\n        salas: [],\n        flebotomistas: [],\n        empresas: [],\n        subempresas: [],\n        examenes: [],\n        grupoId: \'\',\n        grupos: [],\n        detallesGrupos: [],\n        key: 0,\n        ubicacionesNivel2: [],\n        examenesSinTarifa: [],\n        sexos: [\n          {id: \'A\', nombre: \'Ambos Sexos\'},\n          {id: \'F\', nombre: \'Femenino\'},\n          {id: \'M\', nombre: \'Masculino\'},\n        ],\n        datosGeneradorOrdenes: {\n          cotizaciones: [],\n          pedidos: [],\n        },\n        registroAuxiliar: {\n          subempresaNombre: \'\',\n          empresaNombre: \'\',\n          provinciaId: \'\',\n          cantonId: \'\',\n          flebotomistaId: \'\',\n          flebotomistaNombre: \'\',\n          medicoNombre: \'\',\n          medicoReferenciaAuxiliar: \'\',\n        },\n        antecedentesInfeccion: [\n          {id: \'NUCLEO_FAMILIAR\', nombre: \'Núcleo familiar\'},\n          {id: \'TRABAJO\', nombre: \'Trabajo\'},\n          {id: \'TRANSPORTE\', nombre: \'Transporte\'},\n          {id: \'OTRO_PAIS\', nombre: \'Otro país\'},\n          {id: \'VIAJE_DOMESTICO\', nombre: \'Viaje doméstico\'},\n          {id: \'CENTROS_CUIDADO\', nombre: \'Centros de cuidado\'},\n          {id: \'CENTROS_PRIVACION_LIBERTAD\', nombre: \'Centros de privacion de libertad\'},\n          {id: \'REUNION_MASIVA\', nombre: \'Reunión masiva\'},\n          {id: \'REUNION_SOCIAL_CERRADA\', nombre: \'Reunión social cerrada\'},\n          {id: \'INDETERMINADO\', nombre: \'Indeterminado\'},\n        ],\n        urlPrevio: \'\',\n        mensajeGuardar: \'\',\n        resumenPaciente: {\n          saldo: null,\n          cantidadOrdenes: null,\n          keySaldo: 0,\n          keyCantidadOrdenes: 0,\n        },\n        printServer: {\n          urlApiLocal: \'\',\n          encendido: false,\n          etiquetas: {\n            imprimir: false,\n            incluirMuestrasPendientes: false,\n            impresora: \'\',\n            alto: \'\',\n            ancho: \'\',\n          },\n          recibo: {\n            imprimir: false,\n            impresora: \'\',\n            copias: 1,\n            alto: \'\',\n            ancho: \'\',\n          }\n        }\n      }\n    },\n    mounted() {\n      $(\'body\').tooltip({\n        selector: \'[data-toggle="tooltip"]\',\n        container: \'body\',\n        trigger: \'hover\'\n      });\n\n      $(\'body\').popover({\n        selector: \'[data-toggle="popover"]\',\n        container: \'body\',\n        trigger: \'hover\'\n      });\n\n      $(\'#jmFacturaOrden\').on(\'hide.bs.modal\', e => {\n        if (e.target.id === \'jmFacturaOrden\') {\n          this.cargarDesdeJM(this.datosJM.orden);\n        }\n      });\n\n      this.cargarDatos();\n      this.atajosTeclado();\n    },\n    methods: {\n      limpiarFormulario() {\n        this.cadenaBusqueda = \'\';\n        this.cadenaBusquedaExamenes = \'\';\n        this.cadenaBusquedaDetalles = \'\';\n        this.soloGuardar = false;\n        this.abono.id = null;\n        this.abono.forma_pago = \'EF\';\n        this.abono.extras = null;\n        this.abono.valor = \'\';\n        this.abono.cuenta_bancaria_id = \'\';\n        this.abono.referencia = \'\';\n        this.abono.numero_forma_pago = \'\';\n        this.horaProcesamiento = \'\';\n        this.examenesSinTarifa = [];\n        this.registro.id = this.id;\n        this.registro.fecha_orden = moment().format(\'YYYY-MM-DD\');\n        this.registro.estado = \'G\';\n        this.registro.numero_orden = \'\';\n        this.registro.numero_orden_externa = \'\';\n        this.registro.paciente_id = \'\';\n        this.registro.paciente_type = \'\';\n        this.registro.paciente_identificacion = \'\';\n        this.registro.paciente_nombre = \'\';\n        this.registro.paciente_taxonomia = \'\';\n        this.registro.paciente_fecha_nacimiento = \'\';\n        this.registro.paciente_sexo = \'\';\n        this.registro.paciente_correo = \'\';\n        this.registro.paciente_direccion = \'\';\n        this.registro.paciente_telefono = \'\';\n        this.registro.paciente_numero_poliza = \'\';\n        this.registro.paciente_dueno_responsable = \'\';\n        this.registro.paciente_historia_clinica = \'\';\n        this.registro.paciente_numero_historia_clinica = \'\';\n        this.registro.medico_id = \'\';\n        this.registro.sucursal_id = \'\';\n        this.registro.empresa_id = \'\';\n        this.registro.subempresa_id = \'\';\n        this.registro.numero_pedido = \'\';\n        this.registro.fecha_pedido = \'\';\n        this.registro.numero_sala = \'\';\n        this.registro.cama = \'\';\n        this.registro.extras = null;\n        this.registro.embarazada = false;\n        this.registro.tipo_paciente_id = \'\';\n        this.registro.tipo_atencion_id = \'\';\n        this.registro.plan_salud_id = \'\';\n        this.registro.laboratorio_id = \'\';\n        this.registro.sala_id = \'\';\n        this.registro.diagnostico_id = \'\';\n        this.registro.sistema_externo_id = null;\n        this.registro.diagnostico_concepto = \'\';\n        this.registro.fecha_entrega_estimada = \'\';\n        this.registro.fecha_procesamiento = \'\';\n        this.registro.observaciones_orden = \'\';\n        this.registro.observaciones_hoja_trabajo = \'\';\n        this.registro.valor_descuento = 0;\n        this.registro.valor_recargo = 0;\n        this.registro.valor_domicilio = 0;\n        this.porcentajeRecargo = 0;\n        this.porcentaje_descuento = 0;\n        this.registro.valor_total = \'\';\n        this.registro.temperatura = \'\';\n        this.registro.grupo = \'\';\n        this.registro.fecha_ultima_menstruacion = \'\';\n        this.registro.semanas_gestacion = \'\';\n        this.registro.subempresa = {};\n        this.registro.medico = {};\n        this.registro.diagnostico = {};\n        this.registro.detallesOrdenes = [];\n        this.registro.abonos = [];\n        this.registro.variablesEpidemiologicas = {};\n        this.detallesOrdenes = [];\n        this.subempresas = [];\n        this.examenes = [];\n        this.cotizacion = null;\n        this.pedido = null;\n        this.datosJM.orden = null;\n        this.registroAuxiliar.empresaNombre = \'\';\n        this.registroAuxiliar.subempresaNombre = \'\';\n        this.registroAuxiliar.provinciaId = \'\';\n        this.registroAuxiliar.cantonId = \'\';\n        this.registroAuxiliar.medicoNombre = \'\';\n        this.registroAuxiliar.medicoReferenciaAuxiliar = \'\';\n        this.variablesEpidemiologicas.id = \'\';\n        this.variablesEpidemiologicas.cumple_definicion_caso = \'\';\n        this.variablesEpidemiologicas.fecha_inicio_sintomas = \'\';\n        this.variablesEpidemiologicas.epi_1 = \'\';\n        this.variablesEpidemiologicas.diagnostico_id = \'\';\n        this.variablesEpidemiologicas.diagnostico_concepto = \'\';\n        this.variablesEpidemiologicas.comorbilidad = \'\';\n        this.variablesEpidemiologicas.antecedente_viaje = \'\';\n        this.variablesEpidemiologicas.antecedente_infeccion = \'\';\n        this.variablesEpidemiologicas.fecha_viaje = \'\';\n        this.variablesEpidemiologicas.lugar_viaje = \'\';\n        this.variablesEpidemiologicas.unidad_salud_notifica = \'\';\n        this.variablesEpidemiologicas.unidad_salud_parroquia_id = \'\';\n        this.variablesEpidemiologicas.semana_epidemiologica = \'\';\n        this.resumenPaciente.saldo = null;\n        this.resumenPaciente.cantidadOrdenes = null;\n      },\n      limpiarCadenaBusqueda() {\n        this.cadenaBusqueda = \'\';\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      mostrarAdvertencia(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      mostrarInformativo(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'info\', mensaje, errores);\n      },\n      mostrarExito(mensaje, mensajes) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, mensajes);\n      },\n      ocultarMensajes() {\n        this.$refs.alerta.ocultarAlertas();\n      },\n      alternarCamposFormulario() {\n        $(\'fieldset\').attr(\'disabled\') === \'disabled\' ? $(\'fieldset\').removeAttr(\'disabled\') : $(\'fieldset\').attr(\'disabled\', \'disabled\');\n      },\n      cargarDatos() {\n        this.examenesSinTarifa = [];\n        this.cotizacion = this.datos.cotizacion;\n        this.pedido = this.datos.pedido;\n        this.permisos = this.datos.permisos;\n        this.subdominio = this.datos.subdominio;\n        this.errorEnOrden = false;\n\n        this.cargarDatosImpresion(this.datos.configuraciones);\n\n        this.$refs.cargando.alternar();\n\n        if (this.id !== \'0\') {\n          axios\n            .get(`/api/ordenes/${this.id}/edit`)\n            .then(({data: {data}}) => {\n              this.editarOrden(data);\n              this.alternarCamposFormulario();\n            })\n            .catch(error => {\n              this.errorEnOrden = true;\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al cargar orden\', errores);\n            })\n            .then(() => this.$refs.cargando.alternar());\n        } else {\n          axios\n            .get(\'/api/ordenes/create\')\n            .then(({data: {data}}) => {\n              this.crearOrden(data);\n              this.cargarCotizacion();\n              this.cargarPedido();\n\n              if (!(this.cotizacion || this.pedido)) {\n                setTimeout(() => $(\'#identificacion\').focus(), 1000);\n              }\n              this.alternarCamposFormulario();\n            })\n            .catch(error => {\n              this.errorEnOrden = true;\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al cargar orden\', errores);\n            })\n            .then(() => this.$refs.cargando.alternar());\n        }\n      },\n      cargarDatosImpresion(configs) {\n        this.printServer.urlApiLocal = `https://${configs.dominioServidorLocal}:${configs.puertoServidorLocal}`;\n\n        this.etiquetasDatosPaciente = configs.etiquetasDatosPaciente;\n        this.mostrarPdfRecibo = configs.mostrarPdfRecibo;\n        this.mostrarPdfEtiquetas = configs.mostrarPdfEtiquetas;\n\n        this.printServer.etiquetas.alto = this.id === \'0\' ? configs.alto : \'\';\n        this.printServer.etiquetas.ancho = this.id === \'0\' ? configs.ancho : \'\';\n\n        this.config.medicoObligatorio = configs.medicoObligatorio;\n        this.config.mostrarAdvertenciaAbonoIncompleto = configs.mostrarAdvertenciaAbonoIncompleto;\n\n        this.verificarOrionPrintServer(configs);\n      },\n      verificarOrionPrintServer(configs) {\n        axios\n          .get(`${this.printServer.urlApiLocal}/api/estado`)\n          .then(() => {\n            const impresoraEtiquetas = localStorage.getItem(\'impresora-etiquetas\');\n            const imprimirEtiquetas = localStorage.getItem(\'imprimir-etiquetas\');\n\n            this.printServer.encendido = true;\n\n            if (this.id === \'0\') {\n              this.printServer.etiquetas.imprimir = imprimirEtiquetas !== null ? imprimirEtiquetas === \'true\' : configs.imprimirEtiquetaDirecto;\n            }\n            this.printServer.etiquetas.impresora = impresoraEtiquetas ? impresoraEtiquetas : configs.nombreImpresora;\n            this.printServer.etiquetas.incluirMuestrasPendientes = localStorage.getItem(\'incluir-muestras-pendientes\') === \'true\';\n\n            this.printServer.recibo.imprimir = localStorage.getItem(\'imprimir-recibo\') === \'true\';\n            this.printServer.recibo.impresora = localStorage.getItem(\'impresora-recibo\');\n            const copias = localStorage.getItem(\'copias-recibo\');\n            if (copias > 0) {\n              this.printServer.recibo.copias = copias;\n            }\n          })\n          .catch(() => console.info(\'Print Server no encontrado\'));\n      },\n      cargarUbicaciones() {\n        axios\n          .get(\'/api/ubicaciones\', {params: {\'padreCodigo\': this.$cliente.pais}})\n          .then(({data: {data}}) => {\n            this.ubicacionesNivel2 = data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar ubicaciones\', errores);\n          });\n      },\n      cargarCatalogos(response) {\n        this.empresas = response.empresas;\n        this.tiposAtenciones = response.tiposAtenciones;\n        this.salas = response.salas;\n        this.grupos = response.grupos;\n        this.flebotomistas = response.flebotomistas;\n      },\n      cargarCotizacion() {\n        if (this.cotizacion) {\n          this.registro.observaciones_orden = this.cotizacion.comentario;\n          this.registro.empresa_id = this.cotizacion.subempresa.empresa_id;\n          this.registro.valor_descuento = this.cotizacion.valor_descuento;\n          this.registro.valor_recargo = this.cotizacion.valor_recargo;\n          this.registro.valor_domicilio = this.cotizacion.valor_domicilio;\n          this.registro.subempresa_id = this.cotizacion.subempresa.id;\n          this.registro.plan_salud_id = this.cotizacion.plan_salud_id ? this.cotizacion.plan_salud_id : \'\';\n\n          //Se cargan aquí los detalles\n          this.cargarSubempresa(this.registro.empresa_id, true);\n\n          if (this.cotizacion.medico) {\n            this.registro.medico_id = this.cotizacion.medico.id;\n            this.registroAuxiliar.medicoNombre = this.cotizacion.medico.nombre_completo;\n            this.registroAuxiliar.medicoReferenciaAuxiliar = this.cotizacion.medico.referencia_auxiliar;\n          }\n\n          this.registro.paciente_id = this.cotizacion.paciente_id;\n          this.registro.paciente_type = this.cotizacion.paciente_type;\n          this.registro.paciente_identificacion = this.cotizacion.paciente.numero_identificacion;\n          this.registro.paciente_historia_clinica = this.cotizacion.paciente.historia_clinica;\n          this.registro.paciente_numero_historia_clinica = this.cotizacion.paciente.numero_historia_clinica;\n\n          this.registro.paciente_sexo = this.cotizacion.paciente.sexo;\n\n          if (this.cotizacion.es_humano || this.cotizacion.es_animal) {\n            this.registro.paciente_tipo = this.cotizacion.paciente.tipo_identificacion;\n            this.registro.paciente_nombre = this.cotizacion.paciente.nombre_paciente;\n            this.registro.paciente_fecha_nacimiento = this.cotizacion.paciente.fecha_nacimiento;\n            this.registro.paciente_correo = this.cotizacion.paciente.correo;\n          }\n\n          if (this.cotizacion.es_animal) {\n            this.registro.paciente_taxonomia = `${this.cotizacion.paciente.raza.padre.nombre} - ${this.cotizacion.paciente.raza.nombre}`;\n          }\n\n          if (this.cotizacion.es_objeto) {\n            this.registro.paciente_nombre = this.cotizacion.paciente.descripcion;\n            this.registro.paciente_correo = this.cotizacion.paciente.correo_responsable;\n          }\n        }\n      },\n      cargarPedido() {\n        if (this.pedido) {\n          this.registro.sistema_externo_id = this.pedido.sistema_externo_id;\n          this.registro.observaciones_orden = this.pedido.comentario;\n          this.registro.cama = this.pedido.cama;\n          this.registro.extras = this.pedido.extras;\n\n          if (this.pedido.categoria) {\n            this.registro.empresa_id = this.pedido.categoria.empresa_id;\n            this.registro.subempresa_id = this.pedido.categoria.id;\n          }\n\n          if (this.pedido.variable_epidemiologica) {\n            const variableEpidemiologica = this.pedido.variable_epidemiologica;\n            this.variablesEpidemiologicas.cumple_definicion_caso = variableEpidemiologica.cumple_definicion_caso;\n            this.variablesEpidemiologicas.fecha_inicio_sintomas = variableEpidemiologica.fecha_inicio_sintomas;\n            this.variablesEpidemiologicas.epi_1 = variableEpidemiologica.epi_1;\n            this.variablesEpidemiologicas.diagnostico_id = variableEpidemiologica.diagnostico_id;\n            this.variablesEpidemiologicas.diagnostico_concepto = variableEpidemiologica.diagnostico ? variableEpidemiologica.diagnostico.concepto : \'\';\n            this.variablesEpidemiologicas.comorbilidad = variableEpidemiologica.comorbilidad;\n            this.variablesEpidemiologicas.antecedente_viaje = variableEpidemiologica.antecedente_viaje ? variableEpidemiologica.antecedente_viaje : \'\';\n            this.variablesEpidemiologicas.antecedente_infeccion = variableEpidemiologica.antecedente_infeccion;\n            this.variablesEpidemiologicas.fecha_viaje = variableEpidemiologica.fecha_viaje;\n            this.variablesEpidemiologicas.lugar_viaje = variableEpidemiologica.lugar_viaje;\n            this.variablesEpidemiologicas.unidad_salud_notifica = variableEpidemiologica.unidad_salud_notifica;\n            this.variablesEpidemiologicas.unidad_salud_parroquia_id = variableEpidemiologica.unidad_salud_parroquia_id ? variableEpidemiologica.unidad_salud_parroquia_id : \'\';\n            this.variablesEpidemiologicas.semana_epidemiologica = variableEpidemiologica.semana_epidemiologica;\n\n            const unidadSaludParroquia = variableEpidemiologica.unidad_salud_parroquia;\n            if (unidadSaludParroquia) {\n              this.registroAuxiliar.provinciaId = unidadSaludParroquia.padre ? unidadSaludParroquia.padre.padre_id : \'\';\n              this.registroAuxiliar.cantonId = unidadSaludParroquia.padre_id;\n              this.key++;\n            }\n          }\n\n          this.registro.diagnostico_id = this.pedido.diagnostico ? this.pedido.diagnostico_id : \'\';\n          this.registro.diagnostico_concepto = this.pedido.diagnostico ? this.pedido.diagnostico.concepto : \'\';\n          //Se cargan aquí los detalles\n          this.cargarSubempresa(this.registro.empresa_id, true);\n          if (this.pedido.medico) {\n            this.registro.medico_id = this.pedido.medico.id;\n            this.registroAuxiliar.medicoNombre = this.pedido.medico.nombre_completo;\n            this.registroAuxiliar.medicoReferenciaAuxiliar = this.pedido.medico.referencia_auxiliar;\n          }\n\n          this.registro.paciente_id = this.pedido.paciente_id;\n          this.registro.paciente_type = this.pedido.paciente_type;\n          this.registro.paciente_identificacion = this.pedido.paciente.numero_identificacion;\n          this.registro.paciente_historia_clinica = this.pedido.paciente.historia_clinica;\n          this.registro.paciente_numero_historia_clinica = this.pedido.paciente.numero_historia_clinica;\n\n          this.registro.paciente_sexo = this.pedido.paciente.sexo;\n\n          if (this.pedido.es_humano || this.pedido.es_animal) {\n            this.registro.paciente_tipo = this.pedido.paciente.tipo_identificacion;\n            this.registro.paciente_nombre = this.pedido.paciente.nombre_paciente;\n            this.registro.paciente_fecha_nacimiento = this.pedido.paciente.fecha_nacimiento;\n            this.registro.paciente_correo = this.pedido.paciente.correo;\n          }\n\n          if (this.pedido.es_animal) {\n            this.registro.paciente_taxonomia = `${this.pedido.paciente.raza.padre.nombre} - ${this.pedido.paciente.raza.nombre}`;\n          }\n\n          if (this.pedido.es_objeto) {\n            this.registro.paciente_nombre = this.pedido.paciente.descripcion;\n            this.registro.paciente_correo = this.pedido.paciente.correo_responsable;\n          }\n\n          this.registro.tipo_atencion_id = this.pedido.tipo_atencion_id;\n          this.registro.sala_id = this.pedido.servicio_id;\n          this.registro.embarazada = this.pedido.embarazada;\n          this.registro.semanas_gestacion = this.pedido.semanas_gestacion;\n          this.registro.fecha_ultima_menstruacion = this.pedido.fecha_ultima_menstruacion;\n          this.registro.temperatura = this.pedido.temperatura;\n          this.registro.numero_orden_externa = this.pedido.numero_pedido_externo ? this.pedido.numero_pedido_externo : this.pedido.id;\n        }\n      },\n      cargarDesdeJM(orden) {\n        if (orden) {\n          this.registro.empresa_id = orden.cliente_id;\n\n          this.registro.valor_descuento = orden.valor_descuento;\n          this.registro.subempresa_id = orden.subempresa_id;\n          //Se cargan aquí los detalles\n          this.cargarSubempresa(this.registro.empresa_id, true);\n\n          this.registro.paciente_identificacion = orden.paciente.numero_identificacion;\n          this.registro.paciente_nombre = orden.paciente.nombre_paciente;\n          this.registro.paciente_fecha_nacimiento = orden.paciente.fecha_nacimiento;\n          this.registro.paciente_sexo = orden.paciente.sexo;\n          this.registro.paciente_correo = orden.paciente.correo;\n          this.registro.paciente_type = orden.paciente_type;\n          this.registro.paciente_id = orden.paciente_id;\n\n          if (orden.abonos && orden.abonos.length > 0) {\n            this.abono.valor = orden.abonos[0].valor;\n            this.abono.forma_pago = orden.abonos[0].forma_pago;\n          }\n\n          this.mostrarInformativo(\'Orden cargada exitosamente con factura "\' + orden.numeroFactura + \'".\');\n        }\n      },\n      crearOrden(response) {\n        this.cargarCatalogos(response);\n        this.facturas.sistema = response.facturas.sistema;\n        this.facturas.configs.requeridos = response.facturas.configs.requeridos ? response.facturas.configs.requeridos : {};\n        this.facturas.configs.acciones = response.facturas.configs.acciones ? response.facturas.configs.acciones : {};\n        this.facturas.configs.mostrar = response.facturas.configs.mostrar ? response.facturas.configs.mostrar : {};\n\n        this.errorEnTarifas = false;\n\n        this.registro.estado = EstadoOrden.GENERADO;\n        this.registro.fecha_orden = moment().format(\'YYYY-MM-DD\');\n\n        this.porcentaje_descuento = 0;\n\n        this.abono.id = null;\n        this.abono.valor = \'\';\n        this.abono.cuenta_bancaria_id = \'\';\n        this.abono.referencia = \'\';\n        this.abono.numero_forma_pago = \'\';\n        this.abono.extras = null;\n        this.abono.forma_pago = \'EF\';\n\n        if (response.empresaPorDefecto) {\n          this.ocultarMensajes();\n          this.empresaPorDefectoId = response.empresaPorDefecto.id;\n          this.registro.empresa_id = response.empresaPorDefecto.id;\n          this.cambio_precio = response.empresaPorDefecto.cambio_precio;\n          this.permisos.generarDescuentoPorEmpresa = this.permisos.generarDescuento && response.empresaPorDefecto.permitir_descuento;\n\n          if (response.subempresas != null) {\n\n            this.subempresas = response.subempresas;\n            if (response.subempresa) {\n              this.registro.subempresa_id = response.subempresa.id;\n              if (response.subempresa.porcentaje_descuento) {\n                this.porcentaje_descuento = response.subempresa.porcentaje_descuento;\n                this.descuentoPorPorcentaje = true;\n              }\n              if (!response.subempresa.tarifa_venta_id) {\n                this.errorEnTarifas = true;\n                this.mostrarAdvertencia(\'No se ha definido tarifa para la categoría seleccionada\');\n              } else {\n                if (!this.cotizacion) {\n                  this.examenes = response.examenesTarifa;\n                  if (_.isEmpty(this.examenes)) {\n                    this.errorEnTarifas = true;\n                    this.mostrarAdvertencia(\'No se han definido tarifas para los exámenes de la categoría seleccionada\');\n                  }\n                }\n              }\n            }\n          }\n        } else {\n          this.examenes = [];\n          this.detallesOrdenes = [];\n          this.subempresas = [];\n          this.registro.subempresa_id = \'\';\n\n          this.mostrarAdvertencia(\'El cliente por defecto de la sucursal está inactivo\');\n        }\n      },\n      editarOrden(response) {\n        this.cargarCatalogos(response);\n\n        this.porcentaje_descuento = 0;\n        this.subempresas = response.subempresas;\n        this.examenes = response.examenesTarifa;\n\n        this.urlPrevio = this.datos.urlPrevio;\n\n        const orden = response.orden;\n        this.registro.id = orden.id;\n        this.registro.soloGuardar = false;\n        this.registro.fecha_orden = this.fechaALocal(orden.fecha_orden, \'YYYY-MM-DD\');\n        this.registro.hora_orden = this.fechaALocal(orden.fecha_orden, \'HH:mm:ss\');\n        this.registro.estado = orden.estado;\n        this.registro.numero_orden = orden.numero_orden;\n        this.registro.numero_orden_externa = orden.numero_orden_externa;\n\n        this.registro.sistema_externo_id = orden.sistema_externo_id;\n        this.registro.sucursal_id = orden.sucursal_id;\n        this.registro.paciente_id = orden.paciente_id;\n        this.registro.paciente_type = orden.paciente_type;\n        this.registro.paciente_identificacion = orden.paciente.numero_identificacion;\n        this.registro.paciente_historia_clinica = orden.paciente.historia_clinica;\n        this.registro.paciente_numero_historia_clinica = orden.paciente.numero_historia_clinica;\n        this.registro.paciente_sexo = orden.paciente.sexo;\n        this.registro.paciente_correo = orden.paciente.correo;\n        this.registro.paciente_direccion = orden.paciente.direccion;\n        this.registro.paciente_telefono = orden.paciente.telefono_celular;\n\n        if (orden.es_humano) {\n          this.registro.paciente_tipo = orden.paciente.tipo_identificacion;\n          this.registro.paciente_nombre = orden.paciente.nombre_paciente;\n          this.registro.paciente_direccion = orden.paciente.direccion_completa;\n          this.registro.paciente_numero_poliza = orden.paciente.numero_poliza;\n          this.registro.paciente_fecha_nacimiento = orden.paciente.fecha_nacimiento;\n        }\n\n        if (orden.es_animal) {\n          const paciente = orden.paciente;\n          this.registro.paciente_nombre = paciente.nombre_paciente;\n          this.registro.paciente_taxonomia = `${paciente.raza.padre.nombre} - ${paciente.raza.nombre}`;\n          this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n          this.cargarDuenoResponsable(orden.paciente_type, paciente);\n        }\n\n        if (orden.es_objeto) {\n          this.registro.paciente_nombre = orden.paciente.descripcion;\n          this.cargarDuenoResponsable(orden.paciente_type, orden.paciente);\n        }\n\n        this.registro.medico_id = orden.medico_id ? orden.medico_id : \'\';\n        this.registroAuxiliar.medicoNombre = orden.medico ? orden.medico.nombre_completo : \'\';\n        this.registroAuxiliar.medicoReferenciaAuxiliar = orden.medico ? orden.medico.referencia_auxiliar : \'\';\n        this.registro.empresa_id = orden.subempresa.empresa_id;\n        this.registro.subempresa_id = orden.subempresa_id;\n        this.registro.numero_pedido = orden.numero_pedido;\n        this.registro.fecha_pedido = orden.fecha_pedido;\n        this.registro.numero_sala = orden.numero_sala;\n        this.registro.cama = orden.cama;\n        this.registro.embarazada = orden.embarazada;\n        this.registro.tipo_paciente_id = orden.tipo_paciente_id ? orden.tipo_paciente_id : \'\';\n        this.registro.tipo_atencion_id = orden.tipo_atencion_id ? orden.tipo_atencion_id : \'\';\n        this.registro.plan_salud_id = orden.plan_salud_id ? orden.plan_salud_id : \'\';\n        this.registro.laboratorio_id = orden.laboratorio_id ? orden.laboratorio_id : \'\';\n        this.registro.sala_id = orden.sala_id ? orden.sala_id : \'\';\n        this.registro.diagnostico_id = orden.diagnostico_id ? orden.diagnostico_id : \'\';\n        this.registro.diagnostico_concepto = orden.diagnostico ? orden.diagnostico.concepto : \'\';\n        this.registro.observaciones_orden = orden.observaciones_orden;\n        this.registro.observaciones_hoja_trabajo = orden.observaciones_hoja_trabajo;\n        this.registro.valor_descuento = orden.valor_descuento;\n        this.registro.valor_recargo = orden.valor_recargo;\n        this.registro.valor_domicilio = orden.valor_domicilio;\n        this.registro.valor_total = orden.valor_total;\n        this.registro.temperatura = orden.temperatura;\n        this.registro.grupo = orden.grupo;\n        this.registro.semanas_gestacion = orden.semanas_gestacion;\n        this.registro.fecha_ultima_menstruacion = orden.fecha_ultima_menstruacion;\n        this.registro.extras = orden.extras;\n        this.registro.abonos = orden.abonos;\n\n        this.registro.fecha_procesamiento = this.fechaALocal(orden.fecha_procesamiento, \'YYYY-MM-DD\');\n        this.horaProcesamiento = this.fechaALocal(orden.fecha_procesamiento, \'HH:mm:ss\');\n\n        this.registro.fecha_entrega_estimada = this.fechaALocal(orden.fecha_entrega_estimada, \'YYYY-MM-DD\');\n        this.horaEntrega = this.fechaALocal(orden.fecha_entrega_estimada, \'HH:mm:ss\');\n\n        this.usuarioIngresa = orden.usuario_ingresa ? orden.usuario_ingresa.nombre_usuario : \'\';\n        this.sistemaIngresa = orden.sistema_externo ? orden.sistema_externo.nombre : \'\';\n\n        if (orden.variable_epidemiologica) {\n          const variableEpidemiologica = orden.variable_epidemiologica;\n          this.variablesEpidemiologicas.id = variableEpidemiologica.id;\n          this.variablesEpidemiologicas.cumple_definicion_caso = variableEpidemiologica.cumple_definicion_caso;\n          this.variablesEpidemiologicas.fecha_inicio_sintomas = variableEpidemiologica.fecha_inicio_sintomas;\n          this.variablesEpidemiologicas.epi_1 = variableEpidemiologica.epi_1;\n          this.variablesEpidemiologicas.diagnostico_id = variableEpidemiologica.diagnostico_id;\n          this.variablesEpidemiologicas.diagnostico_concepto = variableEpidemiologica.diagnostico ? variableEpidemiologica.diagnostico.concepto : \'\';\n          this.variablesEpidemiologicas.comorbilidad = variableEpidemiologica.comorbilidad;\n          this.variablesEpidemiologicas.antecedente_viaje = variableEpidemiologica.antecedente_viaje ? variableEpidemiologica.antecedente_viaje : \'\';\n          this.variablesEpidemiologicas.fecha_viaje = variableEpidemiologica.fecha_viaje;\n          this.variablesEpidemiologicas.lugar_viaje = variableEpidemiologica.lugar_viaje;\n          this.variablesEpidemiologicas.unidad_salud_notifica = variableEpidemiologica.unidad_salud_notifica;\n          this.variablesEpidemiologicas.unidad_salud_parroquia_id = variableEpidemiologica.unidad_salud_parroquia_id ? variableEpidemiologica.unidad_salud_parroquia_id : \'\';\n          this.variablesEpidemiologicas.semana_epidemiologica = variableEpidemiologica.semana_epidemiologica;\n\n          this.variablesEpidemiologicas.antecedente_infeccion = this.definirAntecedenteInfeccionEpi(variableEpidemiologica.antecedente_infeccion);\n\n          const unidadSaludParroquia = variableEpidemiologica.unidad_salud_parroquia;\n          if (unidadSaludParroquia) {\n            this.registroAuxiliar.provinciaId = unidadSaludParroquia.padre ? unidadSaludParroquia.padre.padre_id : \'\';\n            this.registroAuxiliar.cantonId = unidadSaludParroquia.padre_id;\n            this.key++;\n          }\n        }\n\n        if (orden.subempresa.empresa.estado === \'N\') {\n          this.errorEnOrden = true;\n          this.empresas.push(orden.subempresa.empresa);\n          this.mostrarErrores(\'El cliente está inactivo\');\n        }\n\n        this.cambio_precio = orden.subempresa.empresa.cambio_precio;\n        this.permisos.generarDescuentoPorEmpresa = this.permisos.generarDescuento && orden.subempresa.empresa.permitir_descuento;\n        this.registroAuxiliar.empresaNombre = orden.subempresa.empresa.nombre;\n        this.registroAuxiliar.subempresaNombre = orden.subempresa.nombre;\n\n        this.detallesOrdenes = orden.detalles_ordenes.map(dor => {\n          const muestras = dor.detalle_orden_muestras.map(dom => {\n            return {\n              id: dom.id,\n              muestra_id: dom.muestra_id,\n              flebotomista_id: dom.flebotomista_id,\n              estado: dom.estado,\n              estado_original: dom.estado,\n              fecha: dom.fecha,\n              externa: dom.externa,\n              pendiente: dom.estado === EstadoMuestra.PENDIENTE,\n              rechazada: dom.rechazada,\n            }\n          });\n\n          return {\n            id: dor.id,\n            examen_id: dor.examen.id,\n            examen: dor.examen,\n            muestras: muestras,\n            valor: Number(dor.valor).toFixed(2),\n            fecha_entrega_estimada: dor.fecha_entrega_estimada,\n            tiempo_proceso: dor.examen.tiempo_proceso,\n            estado: dor.estado,\n            descargado_sistema_externo: dor.descargado_sistema_externo,\n            enviado_sistema_externo: dor.enviado_sistema_externo,\n            muestraPendiente: muestras.reduce((muestraPendiente, {estado}) => muestraPendiente || estado === EstadoMuestra.PENDIENTE, false)\n          }\n        });\n\n        this.calcularPorcentajeDescuento();\n        this.calcularPorcentajeRecargo();\n        this.sumarAbonos();\n        this.buscarSaldoPendientePaciente(this.registro.paciente_id, this.registro.paciente_type);\n        this.subempresa = \'\';\n        this.diagnostico = \'\';\n        this.detalles_ordenes = [];\n\n        this.tieneFacturaEmitida = !_.isEmpty(orden.facturas);\n\n        if (this.registro.estado !== \'N\' && this.tieneFacturaEmitida) {\n          this.mostrarInformativo(\'La orden tiene una factura emitida\');\n        }\n\n        if (!this.puedeModificar) {\n          this.alternarCamposFormulario();\n        }\n      },\n      definirAntecedenteInfeccionEpi(antecedenteInfeccionBd) {\n\n        if (!antecedenteInfeccionBd) {\n          return \'\';\n        }\n\n        const antecedenteInfeccion = this.antecedentesInfeccion.find(ai => ai.id === antecedenteInfeccionBd);\n        if (!antecedenteInfeccion) {\n          this.antecedentesInfeccion.push({id: \'OTRO\', nombre: `(Obsoleto) ${antecedenteInfeccionBd}`});\n          antecedenteInfeccionBd = \'OTRO\';\n        }\n\n        return antecedenteInfeccionBd;\n      },\n      cargarExamenes(mostrarCargando, cerrarCargando) {\n        this.examenes = [];\n        this.errorEnTarifas = false;\n\n        if (this.registro.subempresa_id === \'\' || !this.registro.subempresa_id) {\n          return;\n        }\n\n        if (this.subempresas.length === 0) {\n          return;\n        }\n\n        const subempresa = this.subempresas.find(p => p.id === this.registro.subempresa_id);\n\n        if (!subempresa) {\n          if (!mostrarCargando) {\n            this.cargandoExamenes = false;\n          }\n          return;\n        }\n\n        if (!subempresa.tarifa_venta_id) {\n          this.errorEnTarifas = true;\n          this.mostrarAdvertencia(\'No se ha definido tarifa para la categoría seleccionada\');\n          if (!mostrarCargando) {\n            this.cargandoExamenes = false;\n          }\n          return;\n        }\n\n        if (mostrarCargando) {\n          this.cargandoExamenes = true;\n        }\n\n        if (!(this.cotizacion || this.datosJM.orden)) {\n          if (subempresa.porcentaje_descuento) {\n            this.porcentaje_descuento = subempresa.porcentaje_descuento;\n            this.descuentoPorPorcentaje = true;\n          } else {\n            this.porcentaje_descuento = 0;\n            this.registro.valor_descuento = 0;\n          }\n        }\n\n        axios\n          .get(\'/api/examenes-tarifas?tarifaId=\' + subempresa.tarifa_venta_id)\n          .then(({data: {data}}) => {\n            this.examenes = data;\n\n            if (this.cotizacion) {\n              this.detallesOrdenes = this.cotizacion.detalles_cotizaciones.map(dc => {\n                const muestras = dc.examen.examen_muestras.map(examenMuestra => {\n                  return {\n                    id: null,\n                    muestra_id: examenMuestra.muestra_id,\n                    flebotomista_id: null,\n                    estado: EstadoMuestra.RECIBIDA,\n                    estado_original: \'\',\n                    fecha: \'\',\n                    externa: false,\n                    pendiente: false,\n                  }\n                });\n\n                return {\n                  examen_id: dc.examen.id,\n                  examen: dc.examen,\n                  muestras,\n                  valor: Number(dc.valor).toFixed(2),\n                  fecha_entrega_estimada: \'\',\n                  tiempo_proceso: dc.examen.tiempo_proceso,\n                  estado: EstadoDetalleOrden.GENERADO,\n                  descuento: Number(dc.descuento).toFixed(2),\n                  muestraPendiente: muestras.reduce((muestraPendiente, {estado}) => muestraPendiente || estado === EstadoMuestra.PENDIENTE, false)\n                }\n              });\n\n              this.calcularValorTotal();\n\n              this.calcularPorcentajeDescuento();\n\n              this.calcularPorcentajeRecargo();\n            }\n\n            if (this.pedido) {\n              this.detallesOrdenes = this.pedido.detalles_pedidos.map(dp => {\n                const muestras = dp.examen.examen_muestras.map(examenMuestra => {\n                  return {\n                    id: null,\n                    muestra_id: examenMuestra.muestra_id,\n                    flebotomista_id: null,\n                    estado: EstadoMuestra.RECIBIDA,\n                    estado_original: \'\',\n                    fecha: \'\',\n                    externa: false,\n                    pendiente: false,\n                  }\n                });\n\n                return {\n                  examen_id: dp.examen.id,\n                  examen: dp.examen,\n                  muestras,\n                  valor: null,\n                  fecha_entrega_estimada: \'\',\n                  tiempo_proceso: dp.examen.tiempo_proceso,\n                  estado: EstadoDetalleOrden.GENERADO,\n                  descuento: null,\n                  muestraPendiente: muestras.reduce((muestraPendiente, {estado}) => muestraPendiente || estado === EstadoMuestra.PENDIENTE, false),\n                  extras: dp.extras\n                }\n              });\n\n              this.calcularValorTotal();\n\n              this.calcularPorcentajeDescuento();\n            }\n\n            if (this.datosJM.orden) {\n              this.detallesOrdenes = this.datosJM.orden.detallesOrdenes.map(dor => {\n                const examenTarifa = this.examenes.find(examenTarifa => examenTarifa.examen.id === dor.examen_id);\n\n                const muestras = examenTarifa.examen.examen_muestras.map(examenMuestra => {\n                  return {\n                    id: null,\n                    muestra_id: examenMuestra.muestra_id,\n                    flebotomista_id: null,\n                    estado: EstadoMuestra.RECIBIDA,\n                    estado_original: \'\',\n                    fecha: \'\',\n                    externa: false,\n                    pendiente: false,\n                  }\n                });\n\n                return {\n                  examen_id: dor.examen_id,\n                  examen: _.omit(examenTarifa.examen, \'examen_muestras\'),\n                  muestras,\n                  valor: Number(dor.valor).toFixed(2),\n                  fecha_entrega_estimada: \'\',\n                  tiempo_proceso: dor.tiempo_proceso,\n                  estado: EstadoDetalleOrden.GENERADO,\n                  descuento: Number(dor.descuento).toFixed(2),\n                  muestraPendiente: muestras.reduce((muestraPendiente, {estado}) => muestraPendiente || estado === EstadoMuestra.PENDIENTE, false)\n                }\n              });\n\n              this.calcularPorcentajeDescuento();\n            }\n\n            if (_.isEmpty(this.examenes)) {\n              this.errorEnTarifas = true;\n              this.mostrarAdvertencia(\'No se han definido tarifas para ninguno de los exámenes de la categoría seleccionada.\');\n            } else {\n              this.examenesSinTarifa = [];\n              const detallesOrdenes = this.detallesOrdenes.filter(detalle => {\n                const examen = this.examenes.find(e => e.examen_id === detalle.examen_id);\n                if (examen && !(this.datosJM.orden || this.cotizacion)) {\n                  detalle.valor = Number(examen.valor).toFixed(2);\n                }\n\n                if (examen === undefined) {\n                  this.examenesSinTarifa.push(detalle);\n                }\n\n                return examen !== undefined;\n              });\n\n              if (!_.isEmpty(this.examenesSinTarifa)) {\n                this.errorEnTarifas = true;\n                this.mostrarErrores(\'Existen exámenes que no tienen tarifa definida para la categoría seleccionada.\');\n              } else {\n                this.detallesOrdenes = detallesOrdenes;\n                this.porcentajeDescuentoKeyup(null);\n              }\n            }\n            if (cerrarCargando) {\n              this.cargandoExamenes = false;\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar exámenes\', errores);\n            if (cerrarCargando) {\n              this.cargandoExamenes = false;\n            }\n          });\n      },\n      cargarEmpresaPorDefecto() {\n        const empresa = this.obtenerEmpresa(this.empresaPorDefectoId);\n        if (empresa != null) {\n          this.registro.empresa_id = this.empresaPorDefectoId;\n          this.cargarSubempresa(this.registro.empresa_id, false);\n        } else {\n          this.$refs.cargando.alternar();\n          this.mostrarAdvertencia(\'El cliente por defecto de la sucursal está "Inactivo".\');\n        }\n      },\n      sumarAbonos() {\n        let totalAbonos = this.registro.abonos.reduce((totalAbonos, abono) => totalAbonos * 1 + abono.valor * 1, 0);\n        totalAbonos = this.redondear2Decimales(totalAbonos);\n        this.abono.valor = totalAbonos.toFixed(2);\n      },\n      seleccionarFormaPagoAbono(formaPago) {\n        this.abono.extras = null;\n        this.abono.cuenta_bancaria_id = \'\';\n        this.abono.referencia = \'\';\n        this.abono.numero_forma_pago = \'\';\n        this.abono.forma_pago = formaPago;\n\n        if ([FormaPago.CHEQUE].includes(formaPago)) {\n          this.abono.extras = {\n            entidad_financiera_id: \'\',\n          };\n        }\n\n        if ([FormaPago.TARJETA_CREDITO, FormaPago.TARJETA_DEBITO].includes(formaPago)) {\n          this.abono.extras = {\n            entidad_financiera_id: \'\',\n            numero_lote: \'\'\n          };\n        }\n\n        this.$nextTick(() => this.esAbonoValido());\n      },\n      cargarExamenesPorGrupo(grupoId) {\n        this.grupoId = \'\';\n        this.ocultarMensajes();\n        if (grupoId === \'\') {\n          return;\n        }\n\n        if (!this.registro.subempresa_id) {\n          this.mostrarAdvertencia(\'No se ha seleccionado una "Categoría"\');\n          return;\n        }\n\n        if (this.examenes.length === 0) {\n          this.mostrarAdvertencia(\'No existen "exámenes" disponibles\');\n          return;\n        }\n\n        this.cargandoPerfiles = true;\n\n        axios\n          .get(\'/api/detalles-grupos?cadenaBusqueda=\' + grupoId)\n          .then(({data: {data}}) => {\n            this.detallesGrupos = data;\n\n            if (this.detallesGrupos.length === 0) {\n              this.mostrarAdvertencia(\'No existen exámenes definidos para este grupo\');\n              return;\n            }\n\n            let agregados = 0;\n\n            for (let examen of this.examenes) {\n              for (let detalleGrupo of this.detallesGrupos) {\n                if (examen.examen_id === detalleGrupo.examen_id) {\n                  const examenesExistentes = this.detallesOrdenes.reduce((contador, {examen_id}) => examen_id === examen.examen_id ? contador += 1 : contador, 0);\n                  if (examenesExistentes === 0) {\n                    this.agregarExamen(examen);\n                    agregados++;\n                  }\n                }\n              }\n            }\n\n            if (agregados > 0) {\n              const grupo = this.grupos.find(grupo => grupo.id === grupoId);\n              this.mostrarExito(`Examenes de perfil <strong>${grupo.nombre}</strong> agregados`);\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar perfil\', errores);\n          })\n          .then(() => this.cargandoPerfiles = false);\n\n      },\n      autocompletarExamen() {\n        if (this.examenesFiltrados.length === 1) {\n          this.agregarExamen(this.examenesFiltrados[0]);\n        }\n      },\n      agregarExamen(examenTarifa) {\n        if (this.tieneFacturaEmitida) {\n          return;\n        }\n\n        if (!this.puedeModificar) {\n          return;\n        }\n\n        this.ocultarMensajes();\n\n        if (this.registro.fecha_orden === \'\') {\n          this.mostrarErrores(\'Campo "Fecha orden" no puede ser vacío\');\n          return;\n        }\n\n        const estadoMuestra = this.datos.configuraciones.crearOrdenMuestraPendiente ? EstadoMuestra.PENDIENTE : EstadoMuestra.RECIBIDA;\n\n        const muestras = examenTarifa.examen.examen_muestras.map(exameMuestra => {\n          return {\n            id: null,\n            muestra_id: exameMuestra.muestra_id,\n            flebotomista_id: this.registroAuxiliar.flebotomistaId ? this.registroAuxiliar.flebotomistaId : null,\n            estado: estadoMuestra,\n            estado_original: \'\',\n            fecha: \'\',\n            externa: false,\n            pendiente: this.datos.configuraciones.crearOrdenMuestraPendiente,\n          }\n        });\n\n        const detalleOrden = {\n          examen_id: examenTarifa.examen.id,\n          examen: _.omit(examenTarifa.examen, \'examen_muestras\'),\n          muestras: muestras,\n          valor: Number(examenTarifa.valor).toFixed(2),\n          tiempo_proceso: examenTarifa.examen.tiempo_proceso,\n          fecha_entrega_estimada: \'\',\n          estado: EstadoDetalleOrden.GENERADO,\n          descuento: 0,\n          muestraPendiente: muestras.reduce((muestraPendiente, {estado}) => muestraPendiente || estado === EstadoMuestra.PENDIENTE, false)\n        };\n\n        const existeExamen = this.buscarSiExisteExamen(examenTarifa.examen.id);\n\n        if (!existeExamen) {\n          this.$refs.buscarExamen.focus();\n          this.$refs.buscarExamen.select();\n          this.indiceExamen = null;\n          this.detallesOrdenes.push(detalleOrden);\n\n          setTimeout(() => {\n            const element = document.getElementById("examenes-seleccioandos");\n            element.scrollTop = element.scrollHeight;\n          }, 100);\n\n          if (this.descuentoPorPorcentaje) {\n            this.porcentajeDescuentoKeyup(null);\n          } else {\n            this.valorDescuentoKeyup(null);\n          }\n\n          if (this.recargoPorPorcentaje) {\n            this.porcentajeRecargoKeyup(null);\n          } else {\n            this.valorRecargoKeyup(null);\n          }\n        }\n      },\n      buscarSiExisteExamen(idExamen) {\n        const examenEncontrado = this.detallesOrdenes.find(detalle => detalle.examen_id === idExamen);\n        return examenEncontrado !== undefined;\n      },\n      eliminarDetalle(detalle) {\n        if (this.tieneFacturaEmitida) {\n          return;\n        }\n\n        if (detalle.estado !== EstadoDetalleOrden.GENERADO) {\n          this.mostrarErrores(\'Detalle con estado "\' + detalle.estado + \'" por lo cual no puede ser eliminado\');\n          return;\n        }\n\n        if (detalle.id) {\n          this.cargandoEliminarExamen = detalle.id;\n          axios\n            .get(`/api/detalles-ordenes/${detalle.id}/remision`)\n            .then(({data: {data}}) => {\n              const remision = data;\n              if (remision) {\n                this.mostrarAdvertencia(\'Examen "\' + detalle.examen.nombre + \'" no se puede borrar porque esta vinculado en remisión No. "\' + remision + \'".\');\n              } else {\n                this.eliminarDetalleDelArreglo(detalle);\n              }\n              this.cargandoEliminarExamen = \'\';\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al eliminar examen!\', errores);\n            })\n            .then(() => this.cargandoEliminarExamen = \'\');\n        } else {\n          this.eliminarDetalleDelArreglo(detalle);\n        }\n      },\n      eliminarDetalleDelArreglo(detalle) {\n        const indice = this.detallesOrdenes.indexOf(detalle);\n        this.detallesOrdenes.splice(indice, 1);\n\n        if (_.isEmpty(this.detallesOrdenes)) {\n          this.porcentaje_descuento = 0;\n          this.registro.valor_descuento = 0;\n          this.porcentajeRecargo = 0;\n          this.registro.valor_recargo = 0;\n          this.registro.valor_domicilio = 0;\n          this.abono.forma_pago = \'EF\';\n          this.abono.valor = \'\';\n          this.abono.cuenta_bancaria_id = \'\';\n          this.abono.referencia = \'\';\n          this.abono.numero_forma_pago = \'\';\n          this.abono.extras = null;\n\n        } else {\n          if (this.descuentoPorPorcentaje) {\n            this.porcentajeDescuentoKeyup(null);\n          } else {\n            this.valorDescuentoKeyup(null);\n          }\n\n          if (this.recargoPorPorcentaje) {\n            this.porcentajeRecargoKeyup(null);\n          } else {\n            this.valorRecargoKeyup(null);\n          }\n        }\n      },\n      eliminarDetalles() {\n        if (this.tieneFacturaEmitida) {\n          return;\n        }\n\n        let detallesOrdenesTemporal = [];\n        for (let detalleOrden of this.detallesOrdenes) {\n          if (detalleOrden.estado !== EstadoDetalleOrden.GENERADO) {\n            detallesOrdenesTemporal.push(detalleOrden);\n          }\n        }\n\n        this.detallesOrdenes = detallesOrdenesTemporal;\n\n        if (this.id === \'0\') {\n          this.abono.valor = \'\';\n          this.abono.cuenta_bancaria_id = \'\';\n          this.abono.referencia = \'\';\n          this.abono.numero_forma_pago = \'\';\n          this.abono.extras = null;\n        }\n\n        this.abono.forma_pago = \'EF\';\n\n        this.porcentaje_descuento = 0;\n        this.registro.valor_descuento = 0;\n\n        this.porcentajeRecargo = 0;\n        this.registro.valor_recargo = 0;\n\n        this.registro.valor_domicilio = 0;\n\n        if (this.recargoPorPorcentaje) {\n          this.porcentajeRecargoKeyup(null);\n        } else {\n          this.valorRecargoKeyup(null);\n        }\n      },\n      postGuardar(data, esNuevo = false) {\n        this.respuesta = data;\n\n        if (this.mostrarPdfRecibo) {\n          this.imprimirReciboAlGuardar(this.respuesta.id);\n        }\n        if (this.mostrarPdfEtiquetas) {\n          this.imprimirEtiquetas(this.respuesta.id);\n        }\n        if (this.printServer.encendido && (this.printServer.etiquetas.imprimir || this.printServer.recibo.imprimir) && esNuevo) {\n          this.imprimirDirectoEtiquetasYRecibo(this.respuesta.id);\n        } else {\n          this.terminarGuardar();\n        }\n      },\n      terminarGuardar(mensajes, advertencia, parametros) {\n        if (this.registro.soloGuardar) {\n          this.redireccionar(parametros);\n        } else {\n          $(\'.nav a[href="#datosGenerales"]\').tab(\'show\');\n          this.limpiarFormulario();\n          this.cargarEmpresaPorDefecto();\n          this.procesarMensaje(mensajes, advertencia);\n          this.respuesta = \'\';\n          this.alternarBotonesSubmit();\n          this.$refs.cargando.alternar();\n        }\n      },\n      procesarMensaje(mensajes, advertencia) {\n        if (_.isEmpty(mensajes)) {\n          return;\n        }\n\n        if (!advertencia) {\n          this.mostrarExito(mensajes);\n        } else {\n          this.mostrarAdvertencia(mensajes);\n        }\n      },\n      armarAbonoInicial(registro) {\n        if (this.abono.valor > 0) {\n          registro.abonos.push(this.abono);\n        }\n        return registro;\n      },\n      imprimirEtiquetas(idOrden) {\n        //Verifica si existen etiquetas en examenes y de paciente\n        let contadorEtiquetas = +0 + +this.etiquetasDatosPaciente;\n        for (let detalleOrden of this.detallesOrdenes) {\n          contadorEtiquetas += +detalleOrden.examen.numero_etiquetas;\n        }\n\n        if (contadorEtiquetas > 0) {\n\n          let parametros = {\n            incluirMuestrasPendientes: this.printServer.etiquetas.incluirMuestrasPendientes ? \'1\' : null\n          };\n\n          parametros = this.obtenerParametrosUrl(parametros);\n\n          window.open(`/ordenes/${idOrden}/pdf-etiquetas${parametros}`, \'_blank\', \'height=400,width=700,left=20,top=20,,scrollbars=yes,menubar=no\');\n        } else {\n          this.mostrarAdvertencia(\'No existen etiquetas configuradas\');\n        }\n      },\n      imprimirDirectoEtiquetasYRecibo(idOrden) {\n        const promesasDescarga = this.obtenerPromesasDeDescarga(idOrden);\n\n        Promise\n          .allSettled(promesasDescarga)\n          .then(responses => {\n            const promesasImpresion = this.obtenerPromesasDeImpresion(responses);\n\n            this.enviarAOrionPrintServer(promesasImpresion);\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(`Error al generar archivo`, errores);\n          });\n\n      },\n      obtenerPromesasDeDescarga(idOrden) {\n        const promesasDescarga = [];\n        const impresoraRecibo = this.printServer.recibo.impresora;\n\n        if (this.printServer.etiquetas.imprimir && this.printServer.etiquetas.alto) {\n          let parametros = {\n            incluirMuestrasPendientes: this.printServer.etiquetas.incluirMuestrasPendientes ? \'1\' : null\n          };\n\n          parametros = this.obtenerParametrosUrl(parametros);\n\n          promesasDescarga.push(axios.get(`/ordenes/${idOrden}/pdf-etiquetas${parametros}`, {responseType: \'blob\'}))\n        }\n\n        if (this.printServer.recibo.imprimir && impresoraRecibo && impresoraRecibo !== \'PDF\') {\n          promesasDescarga.push(axios.get(`/ordenes/${idOrden}/recibo`, {responseType: \'blob\'}))\n        }\n\n        if (this.printServer.recibo.imprimir && !impresoraRecibo) {\n          this.mostrarErrores(\'No se definió impresora para recibo\');\n        }\n\n        return promesasDescarga;\n      },\n      obtenerPromesasDeImpresion(responses) {\n        const promesasImpresion = [];\n\n        responses.forEach(({status, value, reason}) => {\n          if (status === \'fulfilled\' && value.config.url.includes(\'etiqueta\')) {\n            promesasImpresion.push(this.obtenerAxiosEtiquetas(value))\n          }\n          if (status === \'fulfilled\' && value.config.url.includes(\'recibo\')) {\n            promesasImpresion.push(this.obtenerAxiosRecibo(value));\n          }\n\n          if (status === \'rejected\') {\n            const errores = this.procesarErrorResponse(reason);\n            this.mostrarAdvertencia(`¡Error al enviar a imprimir!`, errores);\n          }\n        });\n        return promesasImpresion;\n      },\n      enviarAOrionPrintServer(promesasImpresion) {\n        Promise\n          .allSettled(promesasImpresion)\n          .then(resultados => {\n            let existeError = false;\n            let parametrosParaMensaje = \'\';\n            resultados.forEach(({status, value, reason}) => {\n              if (status === \'fulfilled\') {\n                if (value.config.url.includes(\'?etiqueta\')) {\n                  parametrosParaMensaje = \'etiquetas=1\';\n                  this.mostrarExito([\'Etiquetas enviadas a imprimir\', \'Impresora: \' + this.printServer.etiquetas.impresora]);\n                }\n                if (value.config.url.includes(\'?recibo\')) {\n                  parametrosParaMensaje = parametrosParaMensaje ? `${parametrosParaMensaje}&recibo=1` : \'recibo=1\';\n                  this.mostrarExito([\'Recibo enviado a imprimir\', \'Impresora: \' + this.printServer.recibo.impresora]);\n                }\n              }\n\n              if (status === \'rejected\') {\n                existeError = true;\n                const errores = this.procesarErroresOrionPrintServer(reason)\n                if (reason.config.url.includes(\'?etiqueta\')) {\n                  errores.unshift(\'Error al imprimir etiquetas\');\n                  this.mostrarErrores(errores);\n                }\n                if (reason.config.url.includes(\'?recibo\')) {\n                  errores.unshift(\'Error al imprimir recibo\');\n                  this.mostrarErrores(errores);\n                }\n              }\n\n            });\n\n            this.terminarGuardar([], existeError, parametrosParaMensaje);\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(`¡Error al enviar a imprimir!`, errores);\n          });\n      },\n      obtenerAxiosEtiquetas(response) {\n        const parametros = {\n          nombreImpresora: this.printServer.etiquetas.impresora,\n          alto: this.printServer.etiquetas.alto,\n          ancho: this.printServer.etiquetas.ancho,\n        };\n        const nombreArchivo = this.obtenerNombreArchivo(response);\n        const formData = new FormData();\n        formData.append(\'archivo\', response.data, nombreArchivo);\n        formData.append(\'parametros\', JSON.stringify(parametros));\n        return axios.post(`${this.printServer.urlApiLocal}/api/imprimir/etiquetas?etiqueta`, formData);\n      },\n      obtenerAxiosRecibo(response) {\n        const nombreArchivo = this.obtenerNombreArchivo(response);\n        const parametros = {\n          nombreImpresora: this.printServer.recibo.impresora,\n          tamanoPapel: \'A5\',\n          alto: 210,\n          ancho: 148,\n          copias: this.printServer.recibo.copias,\n        }\n\n        const formData = new FormData();\n        formData.append(\'archivo\', response.data, nombreArchivo);\n        formData.append(\'parametros\', JSON.stringify(parametros));\n        return axios.post(`${this.printServer.urlApiLocal}/api/imprimir/etiquetas?recibo`, formData);\n      },\n      procesarErroresOrionPrintServer(error) {\n        let errores = [];\n        if (error.response === undefined) {\n          errores = [\'El servidor de impresión se encuentra apagado\'];\n        } else {\n          errores = this.procesarErrorResponse(error);\n        }\n        return errores;\n      },\n      obtenerNombreArchivo(response) {\n        const contentDisposition = response.headers[\'content-disposition\'];\n        return contentDisposition.substring(contentDisposition.indexOf(\'"\') + 1, contentDisposition.lastIndexOf(\'"\'));\n      },\n      guardar(mostrarAdvertenciaAbonoIncompleto = true) {\n        if (this.saldoCalculado < 0) {\n          this.mostrarErrores(\'El valor del saldo no puede ser negativo\');\n          return;\n        }\n\n        if (this.errorEnTarifas) {\n          this.mostrarErrores(\'Existen exámenes sin tarifas.\');\n          return;\n        }\n\n        if (this.registro.diagnostico_id === \'\' && this.registro.diagnostico_concepto !== \'\') {\n          this.mostrarErrores(\'No ha seleccionado un diagnóstico válido.\');\n          return;\n        }\n\n        if (this.variablesEpidemiologicas.antecedente_infeccion === \'OTRO\') {\n          $(\'.nav a[href="#variablesEpidemilogicas"]\').tab(\'show\');\n          this.mostrarErrores(\'El campo "Lugar o antecedente probable de infección" está obsoleto.\');\n          return;\n        }\n\n        if (this.registro.fecha_procesamiento && !this.horaProcesamiento) {\n          $(\'.nav a[href="#datosAdicionales"]\').tab(\'show\');\n          this.mostrarErrores(\'Debe definir una hora para el campo "Fecha procesamiento"\');\n          return;\n        }\n\n        if (this.registro.fecha_entrega_estimada && !this.horaEntrega) {\n          $(\'.nav a[href="#datosAdicionales"]\').tab(\'show\');\n          this.mostrarErrores(\'Debe definir una hora para el campo "Fecha entrega"\');\n          return;\n        }\n\n        if (this.config.medicoObligatorio && !this.registro.medico_id) {\n          this.mostrarErrores(\'Médico no definido\');\n          return;\n        }\n\n        if (this.config.mostrarAdvertenciaAbonoIncompleto && !mostrarAdvertenciaAbonoIncompleto) {\n          $(\'#modalGuardar\').modal(\'hide\');\n        }\n\n        if (this.config.mostrarAdvertenciaAbonoIncompleto && mostrarAdvertenciaAbonoIncompleto) {\n\n          if (this.abono.valor <= 0 || !this.abono.valor) {\n            this.mensajeGuardar = \'¿Está seguro de guardar sin abono?\';\n            $(\'#modalGuardar\').modal(\'show\');\n            return;\n          }\n\n          if (this.saldoCalculado > 0) {\n            this.mensajeGuardar = \'¿Está seguro de guardar con abono incompleto?\';\n            $(\'#modalGuardar\').modal(\'show\');\n            return;\n          }\n\n        }\n\n        if (!this.esAbonoValido()) {\n          return;\n        }\n\n        this.alternarBotonesSubmit();\n\n        this.$refs.cargando.alternar();\n\n        let registro = _.cloneDeep(this.registro);\n\n        registro = this.asignarRelacionesDeOrden(registro);\n\n        registro = this.completarValores(registro);\n\n        registro = this.definirHoraDeProcesamiento(registro);\n\n        registro = this.definirHoraDeEntrega(registro);\n\n        if (this.id === \'0\') {\n          registro = this.definirHoraDeOrden(registro);\n\n          registro = this.armarAbonoInicial(registro);\n\n          if (this.cotizacion) {\n            registro.cotizacionId = this.cotizacion.id;\n          }\n\n          if (this.pedido) {\n            registro.pedido_id = this.pedido.id;\n          }\n\n          registro.estado = EstadoOrden.GENERADO;\n\n          axios\n            .post(\'/api/ordenes\', registro)\n            .then(({data: {data}}) => {\n              if (!this.registro.soloGuardar) {\n                this.mostrarExito(`Orden <strong>${data.numero_orden}</strong> creada`);\n              }\n\n              this.postGuardar(data, true);\n            })\n            .catch(error => {\n              $(\'.nav a[href="#datosGenerales"]\').tab(\'show\');\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al crear orden\', errores);\n            });\n        } else {\n          const fechaOrdenUtc = this.fechaAUTC(registro.fecha_orden + \' \' + registro.hora_orden)\n          registro.fecha_orden = moment(fechaOrdenUtc).format(\'YYYY-MM-DD\');\n          registro.hora_orden = moment(fechaOrdenUtc).format(\'HH:mm:ss\');\n\n          axios\n            .patch(\'/api/ordenes/\' + this.id, registro)\n            .then(({data: {data}}) => this.postGuardar(data))\n            .catch(error => {\n              $(\'.nav a[href="#datosGenerales"]\').tab(\'show\');\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al actualizar orden\', errores);\n            });\n        }\n      },\n      completarValores(registro) {\n        if (!registro.valor_descuento) {\n          registro.valor_descuento = 0;\n        }\n\n        if (!registro.valor_recargo) {\n          registro.valor_recargo = 0;\n        }\n\n        if (!registro.valor_domicilio) {\n          registro.valor_domicilio = 0;\n        }\n\n        registro.valor_total = Number(registro.valor_total);\n\n        registro.detallesOrdenes.forEach(detalleOrden => {\n          detalleOrden.valor = Number(detalleOrden.valor);\n          delete detalleOrden.estado;\n        });\n\n        return registro;\n      },\n      definirHoraDeOrden(registro) {\n        const fechaAhora = moment().format(\'YYYY-MM-DD\');\n\n        if (!this.registro.hora_orden && registro.fecha_orden > fechaAhora) {\n          this.registro.hora_orden = \'00:00:00\';\n        }\n\n        return registro;\n      },\n      definirHoraDeEntrega(registro) {\n        if (registro.fecha_entrega_estimada) {\n          registro.fecha_entrega_estimada = registro.fecha_entrega_estimada + \' \' + this.horaEntrega;\n          registro.fecha_entrega_estimada = this.fechaAUTC(registro.fecha_entrega_estimada);\n        }\n\n        return registro;\n      },\n      definirHoraDeProcesamiento(registro) {\n        if (registro.fecha_procesamiento) {\n          registro.fecha_procesamiento = registro.fecha_procesamiento + \' \' + this.horaProcesamiento;\n          registro.fecha_procesamiento = this.fechaAUTC(registro.fecha_procesamiento);\n        }\n\n        return registro;\n      },\n      asignarRelacionesDeOrden(registro) {\n        registro.detallesOrdenes = this.detallesOrdenes;\n        registro.variablesEpidemiologicas = this.variablesEpidemiologicas;\n        registro.variablesEpidemiologicas.epi_1 = !registro.variablesEpidemiologicas.epi_1 ? \'\' : registro.variablesEpidemiologicas.epi_1;\n        registro.variablesEpidemiologicas.cumple_definicion_caso = !registro.variablesEpidemiologicas.cumple_definicion_caso ? \'\' : registro.variablesEpidemiologicas.cumple_definicion_caso;\n        return registro;\n      },\n      abrirModalImprimir(documento) {\n        const datos = {\n          registro: this.registro,\n          tipoDocumento: documento,\n          tamanoPapel: \'a5\',\n        }\n\n        $(\'#modalImprimir\').modal({backdrop: \'static\'}, datos);\n      },\n      imprimirReciboAlGuardar(idOrden) {\n        window.open(\'/ordenes/\' + idOrden + \'/recibo\', \'_blank\', \'height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no\');\n      },\n      redireccionar(parametros) {\n        let url = \'/ordenes\';\n        if (this.urlPrevio && this.urlPrevio.includes(\'/ordenes\')) {\n          url = this.urlPrevio;\n        }\n\n        if (parametros) {\n          url = url.includes(\'?\') ? `${url}&${parametros}` : `${url}?${parametros}`;\n        }\n\n        window.location.href = url;\n      },\n      limpiarPaciente() {\n        this.registro.paciente_id = \'\';\n        this.registro.paciente_type = \'\';\n        this.registro.paciente_nombre = \'\';\n        this.registro.paciente_taxonomia = \'\';\n        this.registro.paciente_fecha_nacimiento = \'\';\n        this.registro.paciente_sexo = \'\';\n        this.registro.paciente_correo = \'\';\n        this.registro.paciente_direccion = \'\';\n        this.registro.paciente_telefono = \'\';\n        this.registro.paciente_numero_poliza = \'\';\n        this.registro.paciente_dueno_responsable = \'\';\n      },\n      abrirAutocompletarPaciente() {\n        this.ocultarMensajes();\n\n        this.limpiarPaciente();\n\n        if (!this.registro.paciente_identificacion) {\n          this.abrirModalCrearPaciente();\n          return;\n        }\n\n        this.registro.paciente_identificacion = this.registro.paciente_identificacion.trim();\n        this.cargandoPaciente = true;\n\n        axios\n          .get(`/api/pacientes?identificacion=${this.registro.paciente_identificacion}`)\n          .then(({data: {data}}) => {\n            if (data.length === 1) {\n              this.pacienteSeleccionado(data[0]);\n              return;\n            }\n\n            this.abrirModalCrearPaciente();\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al buscar paciente\', errores);\n          })\n          .then(() => this.cargandoPaciente = false);\n      },\n      autocompletarPaciente() {\n        this.ocultarMensajes();\n\n        this.limpiarPaciente();\n\n        if (!this.registro.paciente_identificacion) {\n          return;\n        }\n\n        this.registro.paciente_identificacion = this.registro.paciente_identificacion.trim();\n        this.cargandoPaciente = true;\n\n        axios\n          .get(`/api/pacientes?identificacion=${this.registro.paciente_identificacion}`)\n          .then(({data: {data}}) => {\n            if (data.length === 0) {\n              this.abrirModalCrearPaciente();\n              return;\n            }\n\n            if (data.length > 1) {\n              this.cadenaBusqueda = this.registro.paciente_identificacion;\n              this.abrirPaciente(true);\n              return;\n            }\n\n            this.pacienteSeleccionado(data[0]);\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al buscar paciente\', errores);\n          })\n          .then(() => this.cargandoPaciente = false);\n      },\n      buscarCotizaciones(pacienteId, pacienteType) {\n        if (this.id === \'0\' && pacienteId) {\n          const filtros = {\n            pacienteId: pacienteId,\n            pacienteType: pacienteType\n          };\n\n          axios\n            .get(\'/api/cotizaciones\', {params: filtros})\n            .then(({data}) => {\n              if (!_.isEmpty(data)) {\n                this.datosGeneradorOrdenes.cotizaciones = data;\n                $(\'#generadorOrdenes\').modal(\'show\');\n              }\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al buscar cotizaciones\', errores);\n            });\n        }\n      },\n      buscarPedidos(pacienteId, pacienteType) {\n        if (this.id === \'0\' && pacienteId) {\n          const params = {\n            pacienteId: pacienteId,\n            pacienteType: pacienteType,\n            estado: \'G\'\n          };\n\n          axios\n            .get(\'/api/pedidos\', {params})\n            .then(({data}) => {\n              if (!_.isEmpty(data)) {\n                this.datosGeneradorOrdenes.pedidos = data;\n                $(\'#generadorOrdenes\').modal(\'show\');\n              }\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al buscar pedidos\', errores);\n            });\n        }\n      },\n      abrirPacienteSinBusqueda() {\n        this.abrirPaciente(false);\n      },\n      abrirPaciente(conCadenaBusqueda) {\n        const cadenaBusqueda = conCadenaBusqueda ? this.cadenaBusqueda : \'\';\n        const boton = crearBotonConData({\'cadena-busqueda\': cadenaBusqueda});\n        $(\'#buscarPaciente\').modal({}, boton);\n      },\n      pacienteSeleccionado(paciente) {\n        if (paciente) {\n          this.registro.paciente_id = \'\';\n          this.registro.paciente_nombre = \'\';\n          this.registro.paciente_taxonomia = \'\';\n\n          this.registro.paciente_id = paciente.id;\n          this.registro.paciente_type = paciente.tipo;\n          this.registro.paciente_nombre = paciente.nombre_paciente;\n          this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n          this.registro.paciente_sexo = paciente.sexo;\n          this.registro.paciente_correo = paciente.correo;\n          this.registro.paciente_identificacion = paciente.numero_identificacion;\n          this.registro.paciente_historia_clinica = paciente.historia_clinica;\n          this.registro.paciente_numero_historia_clinica = paciente.numero_historia_clinica;\n          this.registro.paciente_direccion = [paciente.direccion, paciente.direccion_numeracion].filter(Boolean).join(\' \');\n          this.registro.paciente_telefono = paciente.telefono_celular;\n          this.registro.paciente_numero_poliza = paciente.numero_poliza;\n\n          if (this.registro.paciente_sexo === \'M\') {\n            this.registro.embarazada = false;\n            this.registro.semanas_gestacion = \'\';\n            this.registro.fecha_ultima_menstruacion = \'\';\n          }\n\n          this.buscarSaldoPendientePaciente(paciente.id, paciente.tipo);\n          this.cargarDuenoResponsableVista(paciente.tipo, paciente);\n          this.cargarRaza(paciente.tipo, paciente.id);\n          if (!(this.cotizacion || this.pedido)) {\n            this.buscarCotizaciones(this.registro.paciente_id, this.registro.paciente_type);\n            this.buscarPedidos(this.registro.paciente_id, this.registro.paciente_type);\n          }\n        }\n      },\n      cargarRaza(tipo, pacienteId) {\n        if (tipo !== \'App\\\\Models\\\\PacienteAnimal\') {\n          return;\n        }\n\n        axios\n          .get(`/api/pacientes/animales/${pacienteId}`)\n          .then(({data: {data}}) => {\n            this.registro.paciente_taxonomia = `${data.raza.padre.nombre} - ${data.raza.nombre}`\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al buscar raza!\', errores);\n          });\n      },\n      cargarDuenoResponsableVista(tipo, paciente) {\n        if (tipo === \'App\\\\Models\\\\PacienteHumano\') {\n          return;\n        }\n\n        this.registro.paciente_dueno_responsable = [paciente.apellidos, paciente.nombres].filter(Boolean).join(\' \');\n      },\n      cargarDuenoResponsable(tipo, paciente) {\n        this.registro.paciente_dueno_responsable = \'\';\n\n        if (tipo === \'App\\\\Models\\\\PacienteAnimal\') {\n          this.registro.paciente_dueno_responsable = [paciente.apellidos_dueno, paciente.nombres_dueno].filter(Boolean).join(\' \');\n        }\n\n        if (tipo === \'App\\\\Models\\\\SujetoObjeto\') {\n          this.registro.paciente_dueno_responsable = [paciente.apellidos_responsable, paciente.nombres_responsable].filter(Boolean).join(\' \');\n        }\n      },\n      seleccionarPacienteHumano(paciente) {\n        this.paciente_type = \'humano\';\n        this.registro.paciente_id = paciente.id;\n        this.registro.paciente_type = \'App\\\\Models\\\\PacienteHumano\';\n        this.registro.paciente_nombre = paciente.nombre_paciente;\n        this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n        this.registro.paciente_sexo = paciente.sexo;\n        this.registro.paciente_correo = paciente.correo;\n        this.registro.paciente_identificacion = paciente.numero_identificacion;\n        this.registro.paciente_historia_clinica = paciente.historia_clinica;\n        this.registro.paciente_numero_historia_clinica = paciente.numero_historia_clinica;\n        this.registro.paciente_direccion = [paciente.direccion, paciente.direccion_numeracion].filter(Boolean).join(\' \');\n        this.registro.paciente_telefono = paciente.telefono_celular;\n        this.registro.paciente_numero_poliza = paciente.numero_poliza;\n        this.registro.paciente_dueno_responsable = \'\';\n\n        if (this.registro.paciente_sexo === \'M\') {\n          this.registro.embarazada = false;\n          this.registro.semanas_gestacion = \'\';\n          this.registro.fecha_ultima_menstruacion = \'\';\n        }\n      },\n      seleccionarPacienteAnimal(paciente) {\n        this.registro.paciente_dueno_responsable = \'\';\n        this.paciente_type = \'animal\';\n        this.registro.paciente_id = paciente.id;\n        this.registro.paciente_type = \'App\\\\Models\\\\PacienteAnimal\';\n        this.registro.paciente_nombre = paciente.nombre_paciente;\n        this.registro.paciente_taxonomia = `${paciente.raza.padre.nombre} - ${paciente.raza.nombre}`;\n        this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n        this.registro.paciente_identificacion = paciente.numero_identificacion;\n        this.registro.paciente_historia_clinica = paciente.historia_clinica;\n        this.registro.paciente_numero_historia_clinica = paciente.numero_historia_clinica;\n        this.registro.paciente_sexo = paciente.sexo;\n        this.registro.paciente_correo = paciente.correo;\n        this.registro.paciente_direccion = paciente.direccion;\n        this.registro.paciente_telefono = paciente.telefono_celular;\n        this.registro.paciente_numero_poliza = \'\';\n\n        this.cargarDuenoResponsable(this.registro.paciente_type, paciente);\n\n        if (this.registro.paciente_sexo === \'M\') {\n          this.registro.embarazada = false;\n          this.registro.semanas_gestacion = \'\';\n          this.registro.fecha_ultima_menstruacion = \'\';\n        }\n      },\n      seleccionarSujetoObjeto(sujeto) {\n        this.registro.paciente_dueno_responsable = \'\';\n        this.paciente_type = \'objeto\';\n        this.registro.paciente_id = sujeto.id;\n        this.registro.paciente_type = \'App\\\\Models\\\\SujetoObjeto\';\n        this.registro.paciente_nombre = sujeto.nombre_paciente;\n        this.registro.paciente_fecha_nacimiento = null;\n        this.registro.paciente_sexo = sujeto.sexo;\n        this.registro.paciente_identificacion = sujeto.numero_identificacion;\n        this.registro.paciente_correo = sujeto.correo;\n        this.registro.paciente_direccion = sujeto.direccion;\n        this.registro.paciente_telefono = sujeto.telefono_celular;\n        this.registro.paciente_numero_poliza = \'\';\n        this.cargarDuenoResponsable(this.registro.paciente_type, sujeto);\n\n        if (this.registro.paciente_sexo === \'M\') {\n          this.registro.embarazada = false;\n          this.registro.semanas_gestacion = \'\';\n          this.registro.fecha_ultima_menstruacion = \'\';\n        }\n      },\n      abrirModalCrearPaciente() {\n        const datos = {\n          pacienteType: \'\',\n          esCrearPaciente: true,\n          numeroIdentificacion: this.registro.paciente_identificacion\n        }\n        $(\'#gestionarPacienteModal\').modal({backdrop: \'static\'}, datos);\n      },\n      abrirModalEditarPaciente() {\n        const datos = {\n          pacienteType: this.obtenerPacienteType(this.registro.paciente_type),\n          esCrearPaciente: false,\n          numeroIdentificacion: this.registro.paciente_identificacion,\n          pacienteId: this.registro.paciente_id\n        }\n        $(\'#gestionarPacienteModal\').modal({backdrop: \'static\'}, datos);\n      },\n      obtenerPacienteType(sujetoType) {\n        let pacienteType = \'\';\n        switch (sujetoType) {\n          case \'App\\\\Models\\\\PacienteHumano\':\n            pacienteType = \'humano\';\n            break;\n          case \'App\\\\Models\\\\PacienteAnimal\':\n            pacienteType = \'animal\';\n            break;\n          case \'App\\\\Models\\\\SujetoObjeto\':\n            pacienteType = \'objeto\';\n            break;\n        }\n        return pacienteType;\n      },\n      pacienteHumanoGuardado(paciente) {\n        const accion = paciente.creado ? \'creado\' : \'actualizado\';\n        this.mostrarExito(`Paciente <strong>${paciente.nombre_paciente}</strong> ${accion} y seleccionado`);\n        this.seleccionarPacienteHumano(paciente);\n      },\n      pacienteAnimalGuardado(paciente) {\n        const accion = paciente.creado ? \'creado\' : \'actualizado\';\n        this.mostrarExito(`Paciente <strong>${paciente.nombre_paciente}</strong> ${accion} y seleccionado`);\n        this.seleccionarPacienteAnimal(paciente);\n      },\n      sujetoObjetoGuardado(sujeto) {\n        const accion = sujeto.creado ? \'creado\' : \'actualizado\';\n        this.mostrarExito(`Objeto <strong>${sujeto.descripcion}</strong> ${accion} y seleccionado`);\n        this.seleccionarSujetoObjeto(sujeto);\n      },\n      autocompletarMedico() {\n        this.ocultarMensajes();\n\n        this.registro.medico_id = \'\';\n        this.registroAuxiliar.medicoReferenciaAuxiliar = \'\';\n\n        if (!this.registroAuxiliar.medicoNombre) {\n          return;\n        }\n\n        this.registroAuxiliar.medicoNombre = this.registroAuxiliar.medicoNombre.trim();\n        this.procesando.cargarMedico = true;\n\n        const cadenaBusqueda = this.registroAuxiliar.medicoNombre.split(\' \');\n\n        const params = {\n          cadenaBusqueda: cadenaBusqueda && !_.isEmpty(cadenaBusqueda) ? cadenaBusqueda[0] : this.registroAuxiliar.medicoNombre,\n        };\n\n        axios\n          .get(\'/api/medicos\', {params})\n          .then(({data: {data}}) => {\n            if (data.length === 0) {\n              $(\'#modalGestionarMedico\').modal({backdrop: \'static\'});\n              this.cadenaBusqueda = this.registroAuxiliar.medicoNombre;\n              this.registroAuxiliar.medicoNombre = \'\';\n              return;\n            }\n\n            if (data.length > 1) {\n              const params = {cadenaBusqueda: this.registroAuxiliar.medicoNombre};\n              $(\'#modalBuscarMedico\').modal({}, params);\n              this.registroAuxiliar.medicoNombre = \'\';\n              return;\n            }\n\n            this.registro.medico_id = data[0].id;\n            this.registroAuxiliar.medicoNombre = data[0].nombre_completo;\n            this.registroAuxiliar.medicoReferenciaAuxiliar = data[0].referencia_auxiliar;\n            this.mostrarExito(\'Médico seleccionado\');\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al buscar médico\', errores);\n          })\n          .then(() => this.procesando.cargarMedico = false);\n      },\n      abrirModalGestionarMedico() {\n        if (this.procesando.cargarMedico) {\n          return;\n        }\n\n        $(\'#modalGestionarMedico\').modal({backdrop: \'static\'});\n      },\n      buscarMedico() {\n        $(\'#modalBuscarMedico\').modal(\'show\');\n      },\n      eliminarMedico() {\n        this.registro.medico_id = \'\';\n        this.registroAuxiliar.medicoNombre = \'\';\n        this.registroAuxiliar.medicoReferenciaAuxiliar = \'\';\n        this.mostrarExito(\'Selección de médico removida\')\n      },\n      verMedico() {\n        $(\'#modalVerMedico\').modal({backdrop: \'static\'});\n      },\n      medicoCreado(medico) {\n        this.registro.medico_id = medico.id;\n        this.registroAuxiliar.medicoNombre = medico.nombre_completo;\n        this.registroAuxiliar.medicoReferenciaAuxiliar = medico.referencia_auxiliar;\n        this.mostrarExito(`Médico <strong>${medico.nombre_completo}</strong> creado y seleccionado`);\n      },\n      medicoSeleccionado(medico) {\n        this.registro.medico_id = medico.id;\n        this.registroAuxiliar.medicoNombre = medico.nombre_completo;\n        this.registroAuxiliar.medicoReferenciaAuxiliar = medico.referencia_auxiliar;\n        this.mostrarExito(\'Médico seleccionado\');\n      },\n      cargarSubempresa(empresa_id, mostrarCargando) {\n        this.errorEnTarifas = false;\n\n        if (mostrarCargando) {\n          this.cargandoExamenes = true;\n        }\n\n        if (!empresa_id) {\n          this.examenes = [];\n          this.detallesOrdenes = [];\n          this.subempresas = [];\n          this.registro.subempresa_id = \'\';\n          this.cargandoExamenes = false;\n          return;\n        }\n\n        const empresa = this.obtenerEmpresa(empresa_id);\n\n        this.cambio_precio = empresa.cambio_precio;\n        this.permisos.generarDescuentoPorEmpresa = this.permisos.generarDescuento && empresa.permitir_descuento;\n        if (!this.permisos.generarDescuentoPorEmpresa) {\n          this.porcentaje_descuento = 0;\n          this.registro.valor_descuento = 0;\n        }\n        this.cargandoSubempresas = true;\n\n        this.registro.subempresa_id = \'\';\n\n        axios\n          .get(`/api/empresas/${empresa_id}/subempresas`)\n          .then(({data: {data}}) => {\n            this.subempresas = data;\n\n            if (this.pedido && this.pedido.categoria) {\n              this.registro.subempresa_id = this.pedido.categoria.id;\n              this.cargarExamenes(false, true);\n            } else {\n              if (this.cotizacion && this.cotizacion.subempresa) {\n                this.registro.subempresa_id = this.cotizacion.subempresa.id;\n                this.cargarExamenes(false, true);\n              } else {\n                const subempresa = this.subempresas.find(s => s.predeterminada);\n                if (!subempresa) {\n                  this.registro.subempresa_id = \'\';\n                  this.mostrarAdvertencia(\'No se ha definido una categoría predeterminada para este cliente.\');\n                } else {\n                  this.registro.subempresa_id = subempresa.id;\n                  this.cargarExamenes(false, true);\n                }\n              }\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al cargar categorías!\', errores);\n            if (mostrarCargando) {\n              this.cargandoExamenes = false;\n            }\n          })\n          .then(() => this.cargandoSubempresas = false);\n      },\n      obtenerEmpresa(empresaId) {\n        return this.empresas.find(empresa => empresa.id === empresaId);\n      },\n      autocompletarDiagnostico() {\n        this.ocultarMensajes();\n        if (_.isEmpty(this.registro.diagnostico_concepto)) {\n          this.registro.diagnostico_id = \'\';\n          return;\n        }\n        this.procesarBuscarDiagnostico(\'buscarDiagnostico\', this.registro);\n      },\n      verificarDiagnostico() {\n        if (this.registro.diagnostico_concepto === \'\') {\n          this.registro.diagnostico_id = \'\';\n        }\n      },\n      buscarDiagnostico() {\n        this.ocultarMensajes();\n        $(\'#buscarDiagnostico\').modal(\'show\');\n      },\n      autocompletarDiagnosticoEpidemiologico() {\n        this.ocultarMensajes();\n        if (_.isEmpty(this.variablesEpidemiologicas.diagnostico_concepto)) {\n          this.variablesEpidemiologicas.diagnostico_id = \'\';\n          return;\n        }\n        this.procesarBuscarDiagnostico(\'buscarDiagnosticoEpidemiologico\', this.registro);\n      },\n      verificarDiagnosticoEpidemiologico() {\n        if (this.variablesEpidemiologicas.diagnostico_concepto === \'\') {\n          this.variablesEpidemiologicas.diagnostico_id = \'\';\n        }\n      },\n      buscarDiagnosticoEpidemiologico() {\n        this.ocultarMensajes();\n        $(\'#buscarDiagnosticoEpidemiologico\').modal(\'show\');\n      },\n      procesarBuscarDiagnostico(id, registro) {\n        registro.diagnostico_id = \'\';\n        registro.diagnostico_concepto = registro.diagnostico_concepto.trim();\n\n        axios\n          .get(`/api/diagnosticos?cadenaBusqueda=${registro.diagnostico_concepto}`)\n          .then(({data}) => {\n            const diagnosticos = data;\n\n            if (diagnosticos.length === 0 || diagnosticos.length > 1) {\n              const parametros = {\n                cadenaBusqueda: registro.diagnostico_concepto\n              };\n              $(`#${id}`).modal({}, parametros);\n            } else {\n              registro.diagnostico_id = diagnosticos[0].id;\n              registro.diagnostico_concepto = diagnosticos[0].concepto;\n              this.mostrarExito(\'Diagnóstico seleccionado\')\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al buscar diagnósticos!\', errores);\n          })\n      },\n      diagnosticoSeleccionado(diagnostico) {\n        this.registro.diagnostico_id = diagnostico.id;\n        this.registro.diagnostico_concepto = diagnostico.concepto;\n      },\n      diagnosticoEpidemiologicoSeleccionado(diagnostico) {\n        this.variablesEpidemiologicas.diagnostico_id = diagnostico.id;\n        this.variablesEpidemiologicas.diagnostico_concepto = diagnostico.concepto;\n      },\n      validarAbono() {\n        if (!this.abono.valor) {\n          this.abono.cuenta_bancaria_id = \'\';\n          this.abono.referencia = \'\';\n          this.abono.numero_forma_pago = \'\';\n          this.abono.extras = null;\n          this.abono.forma_pago = \'EF\';\n          this.abono.valor = \'\';\n          return;\n        }\n\n        if (this.abono.valor === 0) {\n          this.abono.cuenta_bancaria_id = \'\';\n          this.abono.referencia = \'\';\n          this.abono.numero_forma_pago = \'\';\n          this.abono.extras = null;\n          this.abono.forma_pago = \'EF\';\n          return;\n        }\n\n        if (this.abono.valor < 0) {\n          this.abono.cuenta_bancaria_id = \'\';\n          this.abono.referencia = \'\';\n          this.abono.numero_forma_pago = \'\';\n          this.abono.extras = null;\n          this.abono.forma_pago = \'EF\';\n          this.abono.valor = \'\';\n          return;\n        }\n\n        if (Number(this.abono.valor) > Number(this.registro.valor_total) && this.registro.valor_total > 0) {\n          this.abono.valor = this.registro.valor_total;\n        }\n\n        if (this.registro.valor_total < 0) {\n          this.abono.valor = \'\';\n          this.abono.cuenta_bancaria_id = \'\';\n          this.abono.referencia = \'\';\n          this.abono.numero_forma_pago = \'\';\n          this.abono.forma_pago = \'EF\';\n        }\n      },\n      calcularPorcentajeDescuento() {\n        if (this.registro.valor_descuento > 0) {\n          const valorTotalSinDomicilio = +this.registro.valor_descuento + +this.registro.valor_total - +this.registro.valor_recargo - +this.registro.valor_domicilio;\n          this.porcentaje_descuento = (100 * this.registro.valor_descuento) / valorTotalSinDomicilio;\n          this.porcentaje_descuento = this.redondear2Decimales(this.porcentaje_descuento);\n          this.porcentaje_descuento = this.porcentaje_descuento.toFixed(2);\n        }\n      },\n      calcularPorcentajeRecargo() {\n        if (this.registro.valor_recargo > 0) {\n          const valorSinRecargo = +this.registro.valor_total - +this.registro.valor_recargo;\n          this.porcentajeRecargo = (100 * this.registro.valor_recargo) / valorSinRecargo;\n          this.porcentajeRecargo = this.redondear2Decimales(this.porcentajeRecargo);\n          this.porcentajeRecargo = this.porcentajeRecargo.toFixed(2);\n        }\n      },\n      cambioFechaOrden() {\n        if (this.detallesOrdenes.length > 0) {\n          for (let detalleOrden of this.detallesOrdenes) {\n            const examenTarifa = this.examenes.find(examen => examen.examen_id === detalleOrden.examen_id);\n            detalleOrden.tiempo_proceso = examenTarifa.examen.tiempo_proceso;\n            detalleOrden.fecha_entrega_estimada = \'\';\n            detalleOrden.muestras.forEach(muestra => muestra.fecha = \'\');\n          }\n        }\n      },\n      validarValor(detalle) {\n        const indice = this.detallesOrdenes.indexOf(detalle);\n\n        if (!this.detallesOrdenes[indice].valor) {\n          this.detallesOrdenes[indice].valor = \'0.00\';\n        }\n\n        if (this.detallesOrdenes[indice].valor < 0) {\n          this.detallesOrdenes[indice].valor = \'0.00\';\n        }\n\n        if (this.recargoPorPorcentaje) {\n          this.porcentajeRecargoKeyup(null);\n        } else {\n          this.valorRecargoKeyup(null);\n        }\n\n        this.porcentaje_descuento = \'0.00\';\n        this.registro.valor_descuento = \'0.00\';\n      },\n      formatearValorDetalle(detalle) {\n        detalle.valor = Number(detalle.valor).toFixed(2);\n      },\n      valorDetalleKeyTab(detalle) {\n        let indice = this.detallesOrdenes.indexOf(detalle);\n\n        if (this.detallesOrdenes[indice].valor) {\n          this.detallesOrdenes[indice].valor = Number(this.detallesOrdenes[indice].valor).toFixed(2);\n        }\n      },\n      porcentajeDescuentoKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.porcentaje_descuento < 0) {\n          this.porcentaje_descuento = 0;\n        }\n\n        if (Number(this.porcentaje_descuento) === 0) {\n          this.porcentaje_descuento = 0;\n          this.registro.valor_descuento = 0;\n          return;\n        }\n\n        let valorDescuentoTemporal = this.valorSubtotal * this.porcentaje_descuento / 100;\n        let saldoTemporal = this.valorSubtotal - valorDescuentoTemporal - this.abono.valor;\n\n        if (saldoTemporal < 0) {\n          const valorDescuento = this.valorSubtotal - this.abono.valor;\n          this.registro.valor_descuento = valorDescuento > 0 ? valorDescuento : 0;\n        } else {\n          this.registro.valor_descuento = valorDescuentoTemporal;\n        }\n\n        this.registro.valor_descuento = this.redondear2Decimales(this.registro.valor_descuento);\n        this.registro.valor_descuento = this.registro.valor_descuento.toFixed(2);\n        let porcentajeDescuento = (100 * this.registro.valor_descuento) / this.valorSubtotal;\n\n        if (saldoTemporal < 0) {\n          porcentajeDescuento = this.redondear2Decimales(porcentajeDescuento);\n          if (Number(porcentajeDescuento) < 0) {\n            this.porcentaje_descuento = 0;\n            return;\n          }\n          this.porcentaje_descuento = porcentajeDescuento;\n\n        }\n        this.descuentoPorPorcentaje = true;\n        if (this.recargoPorPorcentaje) {\n          this.porcentajeRecargoKeyup(null);\n        } else {\n          this.valorRecargoKeyup(null);\n        }\n      },\n      formatearPorcentajeDescuento() {\n        if (this.porcentaje_descuento) {\n          this.porcentaje_descuento = Number(this.porcentaje_descuento).toFixed(2);\n        }\n      },\n      valorDescuentoKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.registro.valor_descuento === 0) {\n          this.porcentaje_descuento = 0;\n          this.registro.valor_descuento = 0;\n          return;\n        }\n\n        if (this.registro.valor_descuento < 0) {\n          this.registro.valor_descuento = 0;\n        }\n\n        if (this.registro.valor_total < 0) {\n          this.registro.valor_descuento = 0;\n          return;\n        }\n\n        const saldoTemporal = this.valorSubtotal - this.registro.valor_descuento - this.abono.valor;\n\n        if (saldoTemporal < 0) {\n          const valorDescuento = this.valorSubtotal - this.abono.valor;\n          if (valorDescuento < 0) {\n            this.registro.valor_descuento = 0;\n            return;\n          }\n          this.registro.valor_descuento = valorDescuento;\n        }\n\n        this.porcentaje_descuento = (100 * this.registro.valor_descuento) / this.valorSubtotal;\n        this.porcentaje_descuento = this.redondear2Decimales(this.porcentaje_descuento);\n        this.porcentaje_descuento = this.porcentaje_descuento.toFixed(2);\n        this.descuentoPorPorcentaje = false;\n\n        if (this.recargoPorPorcentaje) {\n          this.porcentajeRecargoKeyup(null);\n        } else {\n          this.valorRecargoKeyup(null);\n        }\n      },\n      formatearValorDescuento() {\n        if (this.registro.valor_descuento > 0) {\n          this.registro.valor_descuento = Number(this.registro.valor_descuento).toFixed(2);\n        }\n      },\n      valorDomicilioKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.registro.valor_domicilio < 0) {\n          this.registro.valor_domicilio = 0;\n        }\n      },\n      formatearValorDomicilio() {\n        if (this.registro.valor_domicilio > 0) {\n          this.registro.valor_domicilio = Number(this.registro.valor_domicilio).toFixed(2);\n        }\n      },\n      valorRecargoKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.registro.valor_recargo === 0) {\n          this.porcentajeRecargo = 0;\n          this.registro.valor_recargo = 0;\n          return;\n        }\n\n        if (this.registro.valor_recargo < 0) {\n          this.registro.valor_recargo = 0;\n        }\n\n        if (Number(this.valorSubtotal) === 0) {\n          this.porcentajeRecargo = 0;\n          return;\n        }\n\n        this.porcentajeRecargo = (100 * this.registro.valor_recargo) / (this.valorSubtotal - this.registro.valor_descuento);\n        this.porcentajeRecargo = this.redondear2Decimales(this.porcentajeRecargo);\n        this.porcentajeRecargo = this.porcentajeRecargo.toFixed(2);\n        this.recargoPorPorcentaje = false;\n      },\n      formatearValorRecargo() {\n        if (this.registro.valor_recargo > 0) {\n          this.registro.valor_recargo = Number(this.registro.valor_recargo).toFixed(2);\n        }\n      },\n      porcentajeRecargoKeyup(event) {\n        //Se evita que al hacer tab en el input anterior, este metodo se ejecute\n        if (event != null && event.keyCode === 9) {\n          return;\n        }\n\n        if (this.porcentajeRecargo < 0) {\n          this.porcentajeRecargo = 0;\n        }\n\n        this.registro.valor_recargo = (this.valorSubtotal - this.registro.valor_descuento) * this.porcentajeRecargo / 100;\n        if (this.registro.valor_recargo > 0) {\n          this.registro.valor_recargo = this.redondear2Decimales(this.registro.valor_recargo);\n          this.registro.valor_recargo = Number(this.registro.valor_recargo).toFixed(2);\n        } else {\n          this.registro.valor_recargo = 0;\n        }\n        if (event) {\n          this.recargoPorPorcentaje = true;\n        }\n      },\n      formatearPorcentajeRecargo() {\n        if (this.porcentajeRecargo > 0) {\n          this.porcentajeRecargo = Number(this.porcentajeRecargo).toFixed(2);\n        }\n      },\n      abonoKeyTab() {\n        if (this.abono.valor) {\n          this.abono.valor = Number(this.abono.valor).toFixed(2);\n        }\n      },\n      regresar() {\n        this.redireccionar();\n      },\n      abonarTodo() {\n        this.abono.valor = this.registro.valor_total;\n        this.esAbonoValido();\n      },\n      esAbonoValido() {\n        const esAbonoValido = verificarAbonoValido(this.facturas.configs, this.abono);\n\n        if (esAbonoValido === \'abrirModal\') {\n          this.abrirModalCrearAbono();\n          return false;\n        }\n\n        return esAbonoValido;\n      },\n      cambioCumpleDefinicionCaso() {\n        if (this.variablesEpidemiologicas.cumple_definicion_caso) {\n          this.cargandoDiagnosticoEpi = true;\n          axios\n            .get(`/api/diagnosticos?codigo=U071`)\n            .then(({data}) => {\n              const diagnosticos = data;\n              if (diagnosticos.length === 1) {\n                this.variablesEpidemiologicas.diagnostico_id = diagnosticos[0].id;\n                this.variablesEpidemiologicas.diagnostico_concepto = diagnosticos[0].concepto;\n              }\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al buscar diagnóstico\', errores);\n            })\n            .then(() => this.cargandoDiagnosticoEpi = false);\n        }\n      },\n      cambioEmbarazada() {\n        if (!this.registro.embarazada) {\n          this.registro.semanas_gestacion = \'\';\n          this.registro.fecha_ultima_menstruacion = \'\';\n        }\n      },\n      clickEpi1() {\n        if (!this.primerClickEpi) {\n          this.cargarCookies();\n          this.cargarUbicaciones();\n        }\n        this.primerClickEpi = true;\n      },\n      cargarCookies() {\n        const unidadSaludNotifica = localStorage.getItem(\'unidadSaludNotifica\');\n        if (unidadSaludNotifica && !this.variablesEpidemiologicas.unidad_salud_notifica) {\n          this.variablesEpidemiologicas.unidad_salud_notifica = unidadSaludNotifica;\n        }\n\n        const epiNivel2 = localStorage.getItem(\'epi-nivel2\');\n        if (epiNivel2 && !this.registroAuxiliar.provinciaId) {\n          this.registroAuxiliar.provinciaId = parseInt(epiNivel2);\n        }\n\n        const epiNivel3 = localStorage.getItem(\'epi-nivel3\');\n        if (epiNivel3 && !this.registroAuxiliar.cantonId) {\n          this.registroAuxiliar.cantonId = parseInt(epiNivel3);\n        }\n\n        this.key++;\n      },\n      cambiarUnidadSaludNotifica() {\n        if (this.variablesEpidemiologicas.unidad_salud_notifica) {\n          localStorage.setItem(\'unidadSaludNotifica\', this.variablesEpidemiologicas.unidad_salud_notifica)\n        }\n      },\n      provinciaIdEpiActualizada(provinciaId) {\n        this.registroAuxiliar.provinciaId = provinciaId;\n      },\n      cantonIdEpiActualizado(cantonId) {\n        this.registroAuxiliar.cantonId = cantonId;\n      },\n      elementosInvalidos(event) {\n        event.target.parentElement.classList.add(\'has-error\');\n        $(\'.nav a[href="#datosGenerales"]\').tab(\'show\');\n      },\n      documentoImpreso(data) {\n        if (!data) {\n          const mensajes = [\'Impresión enviada\'];\n          this.mostrarExito(mensajes);\n          return;\n        }\n\n        this.mostrarExito(data.mensajes);\n      },\n      horaFechaOrdenSeleccionada(hora) {\n        this.registro.hora_orden = hora;\n      },\n      horaFechaProcesamientoSeleccionada(hora) {\n        this.horaProcesamiento = hora;\n      },\n      horaFechaEntregaSeleccionada(hora) {\n        this.horaEntrega = hora;\n      },\n      abonoCreado(abono) {\n        this.abono.forma_pago = abono.forma_pago;\n        this.abono.valor = abono.valor;\n        this.abono.cuenta_bancaria_id = abono.cuenta_bancaria_id;\n        this.abono.numero_forma_pago = abono.numero_forma_pago;\n        this.abono.extras = abono.extras;\n        this.abono.referencia = abono.referencia;\n      },\n      buscarSaldoPendientePaciente(pacienteId, pacienteType) {\n        if (!pacienteId || !pacienteType) {\n          return;\n        }\n\n        if (!this.datos.configuraciones.mostrarResumenPaciente) {\n          return;\n        }\n\n        const params = {pacienteType: pacienteType};\n\n        axios\n          .get(`/api/pacientes/${pacienteId}/resumen`, {params})\n          .then(({data: {data}}) => {\n            this.resumenPaciente.saldo = data.saldo;\n            this.resumenPaciente.cantidadOrdenes = data.cantidad_ordenes;\n            this.resumenPaciente.keySaldo++;\n            this.resumenPaciente.keyCantidadOrdenes++;\n\n            if (this.resumenPaciente.saldo > 0) {\n              this.mostrarAdvertencia(\'El paciente tiene un saldo pendiente de pago de \' + this.$cliente.moneda + Number(this.resumenPaciente.saldo).toFixed(2));\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            errores.unshift(\'Error al calcular saldo de paciente\');\n            this.mostrarErrores(errores);\n          });\n      },\n      focusSiguiente(idElemento) {\n        $(`#${idElemento}`).focus();\n      },\n      tituloCondicionesPreanaliticas(examen) {\n        if (!examen.condiciones_preanaliticas) {\n          return \'\';\n        }\n\n        return examen.condiciones_preanaliticas.replace(/\\n/g, "<br />");\n      },\n      abrirDatosAdicionales() {\n        this.cargarCatalogosDatosAdicionales();\n      },\n      cargarCatalogosDatosAdicionales() {\n        if (_.isEmpty(this.laboratorios)) {\n          axios\n            .get(`/api/catalogos`, {params: {catalogo: Catalogo.LABORATORIOS}})\n            .then(({data: {data}}) => {\n              this.laboratorios = data;\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              errores.unshift(\'Error al cargar Laboratorios\')\n              this.mostrarErrores(errores);\n            });\n        }\n\n        if (_.isEmpty(this.tiposPacientes)) {\n          axios\n            .get(`/api/catalogos`, {params: {catalogo: Catalogo.TIPOS_PACIENTES}})\n            .then(({data: {data}}) => {\n              this.tiposPacientes = data;\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              errores.unshift(\'Error al cargar Tipos de paciente\')\n              this.mostrarErrores(errores);\n            });\n        }\n\n        if (_.isEmpty(this.planesSalud)) {\n          axios\n            .get(`/api/catalogos`, {params: {catalogo: Catalogo.PLAN_SALUD}})\n            .then(({data: {data}}) => {\n              this.planesSalud = data;\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              errores.unshift(\'Error al cargar Planes de salud\')\n              this.mostrarErrores(errores);\n            });\n        }\n      },\n      muestrasGuardadas() {\n        this.detallesOrdenes.forEach(detalle => {\n          detalle.muestraPendiente = detalle.muestras.reduce((muestraPendiente, {estado}) => muestraPendiente || estado === EstadoMuestra.PENDIENTE, false)\n        });\n      },\n      abrirModalCrearAbono() {\n        const boton = crearBotonConData({\'abono\': this.abono});\n        $(\'#modalAbonoFormulario\').modal({}, boton);\n      },\n      abrirModalMuestras() {\n        if (this.id === \'0\') {\n          this.asignarFlebotomistaAMuestras();\n        }\n        $(\'#muestrasModal\').modal({backdrop: \'static\'});\n      },\n      asignarFlebotomistaAMuestras() {\n        this.detallesOrdenes.forEach(detalleOrden => {\n          detalleOrden\n            .muestras\n            .filter(muestra => muestra.estado === EstadoMuestra.RECIBIDA)\n            .forEach(muestra => {\n              muestra.flebotomista_id = this.registroAuxiliar.flebotomistaId;\n            });\n        });\n      },\n      autocompletarFlebotomista() {\n        this.ocultarMensajes();\n\n        this.registroAuxiliar.flebotomistaId = \'\';\n\n        if (!this.registroAuxiliar.flebotomistaNombre) {\n          return;\n        }\n\n        this.registroAuxiliar.flebotomistaNombre = this.registroAuxiliar.flebotomistaNombre.trim();\n        this.procesando.cargarFlebotomista = true;\n\n        const cadenaBusqueda = this.registroAuxiliar.flebotomistaNombre.split(\' \');\n        const params = {\n          catalogo: Catalogo.FLEBOTOMISTAS,\n          cadenaBusqueda: cadenaBusqueda && !_.isEmpty(cadenaBusqueda) ? cadenaBusqueda[0] : this.registroAuxiliar.flebotomistaNombre,\n        };\n\n        axios\n          .get(\'/api/catalogos\', {params})\n          .then(({data: {data}}) => {\n            if (data.length === 0) {\n              this.abrirModalGestionarFlebotomista();\n              this.cadenaBusqueda = this.registroAuxiliar.flebotomistaNombre;\n              this.registroAuxiliar.flebotomistaNombre = \'\';\n              return;\n            }\n\n            if (data.length > 1) {\n              const params = {cadenaBusqueda: this.registroAuxiliar.flebotomistaNombre};\n              $(\'#modalBuscarFlebotomista\').modal({}, params);\n              this.registroAuxiliar.flebotomistaNombre = \'\';\n              return;\n            }\n\n            this.registroAuxiliar.flebotomistaId = data[0].id;\n            this.registroAuxiliar.flebotomistaNombre = data[0].nombre_completo;\n            this.mostrarExito(\'Flebotomista seleccionado\');\n            this.asignarFlebotomistaAMuestras();\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al buscar flebotomista\', errores);\n          })\n          .then(() => this.procesando.cargarFlebotomista = false);\n      },\n      abrirModalGestionarFlebotomista() {\n        if (this.procesando.cargarFlebotomista) {\n          return;\n        }\n        $(\'#modalGestionarFlebotomista\').modal({backdrop: \'static\'});\n      },\n      abrirModalBuscarFlebotomista() {\n        $(\'#modalBuscarFlebotomista\').modal(\'show\');\n      },\n      flebotomistaCreado(flebotomista) {\n        this.registroAuxiliar.flebotomistaId = flebotomista.id;\n        this.registroAuxiliar.flebotomistaNombre = flebotomista.nombre_completo;\n        this.asignarFlebotomistaAMuestras();\n        this.mostrarExito(`Flebotomista <strong>${flebotomista.nombre_completo}</strong> creado y seleccionado`);\n      },\n      flebotomistaSeleccionado(flebotomista) {\n        this.registroAuxiliar.flebotomistaId = flebotomista.id;\n        this.registroAuxiliar.flebotomistaNombre = flebotomista.nombre_completo;\n        this.mostrarExito(\'Flebotomista seleccionado\');\n        this.asignarFlebotomistaAMuestras();\n      },\n      eliminarFlebotomista() {\n        this.registroAuxiliar.flebotomistaId = \'\';\n        this.registroAuxiliar.flebotomistaNombre = \'\';\n        this.mostrarExito(\'Selección de flebotomista removida\')\n      },\n      siguienteExamen(indice) {\n        this.indiceExamen = indice + 1;\n        $(\'#examen-\' + this.indiceExamen).focus();\n      },\n      anteriorExamen(indice) {\n        this.indiceExamen = indice - 1;\n        if (indice === 0) {\n          $(\'#buscarExamen\').focus();\n          return;\n        }\n        $(\'#examen-\' + this.indiceExamen).focus();\n      },\n      mouseSobreExamen() {\n        this.indiceExamen = null;\n      },\n      calcularValorTotal() {\n        this.registro.valor_total = this.valorSubtotal - this.registro.valor_descuento + +this.registro.valor_recargo + +this.registro.valor_domicilio;\n      },\n      abrirModalConfiguraciones() {\n        $(\'#modalConfigs\').modal(\'show\');\n      },\n      atajosTeclado() {\n        document.addEventListener(\'keydown\', (event) => {\n          if (event.ctrlKey && event.key.toLowerCase() === \'s\') {\n            event.preventDefault();\n            this.$refs.guardar.click();\n          }\n\n          if (event.ctrlKey && event.key.toLowerCase() === \'e\') {\n            event.preventDefault();\n            $(\'#buscarExamen\').focus();\n          }\n        });\n      },\n      abrirCoberturaMspPaciente() {\n        $(\'#modalCoberturaMsp\').modal({backdrop: \'static\'});\n      },\n    },\n    computed: {\n      titulo() {\n        return this.id === \'0\' ? \'Crear Orden\' : this.puedeModificar ? \'Editar Orden No. \' : \'Orden No. \';\n      },\n      puedeCambiarMedico() {\n        if (this.id === \'0\') {\n          return true;\n        }\n\n        if (!this.registro.sistema_externo_id) {\n          return true;\n        }\n\n        return this.$can(\'cambiar-medico-sistema-externo-ordenes\');\n      },\n      examenesFiltrados() {\n        if (this.examenes.length === 0) {\n          return this.examenes;\n        }\n\n        return this.examenes.filter(examenTarifa => {\n          const cadenaBusqueda = escaparRegex(this.cadenaBusquedaExamenes);\n          const regex = new RegExp(removeDiacritics(cadenaBusqueda), \'i\');\n          const encontradoEnExamenes = regex.test(examenTarifa.examen.codigo + \' \') || regex.test(examenTarifa.examen.referencia_auxiliar) || regex.test(examenTarifa.examen.referencia_auxiliar_2) || regex.test(removeDiacritics(examenTarifa.examen.nombre));\n          const encontradoEnOrden = this.detallesOrdenes.filter(detalleOrden => detalleOrden.examen_id === examenTarifa.examen.id);\n          return encontradoEnExamenes && encontradoEnOrden.length === 0;\n        });\n      },\n      detallesOrdenesFiltrados() {\n        if (this.detallesOrdenes.length > 0) {\n          return this\n            .detallesOrdenes\n            .filter(detalleOrden => {\n              const cadenaBusqueda = escaparRegex(this.cadenaBusquedaDetalles);\n              const regex = new RegExp(removeDiacritics(cadenaBusqueda), \'i\');\n              return regex.test(detalleOrden.examen.codigo) || regex.test(removeDiacritics(detalleOrden.examen.nombre));\n            });\n        }\n\n        return [];\n      },\n      valorSubtotal() {\n        let valorSubtotal = 0;\n        if (this.detallesOrdenes.length > 0) {\n          valorSubtotal = this.detallesOrdenes.reduce((prev, detalle) => +prev + +detalle.valor, 0);\n        }\n\n        return this.redondear2Decimales(valorSubtotal);\n      },\n      valorTotalCalculado() {\n        this.calcularValorTotal();\n\n        this.registro.valor_total = this.redondear2Decimales(this.registro.valor_total);\n\n        return this.registro.valor_total.toFixed(2);\n      },\n      valorDescuento() {\n        return Number(this.registro.valor_descuento).toFixed(2);\n      },\n      valorRecargo() {\n        return Number(this.registro.valor_recargo).toFixed(2);\n      },\n      valorDomicilio() {\n        return Number(this.registro.valor_domicilio).toFixed(2);\n      },\n      saldoCalculado() {\n        const saldo = this.registro.valor_total - this.abono.valor;\n        return Number(saldo).toFixed(2);\n      },\n      etiquetaSeleccionados() {\n        return this.detallesOrdenes.length > 1 ? \'exámenes\' : \'examen\';\n      },\n      etiquetaDatosPaciente() {\n        let etiquetaDatosPaciente = \'\';\n        switch (this.registro.paciente_type) {\n          case \'App\\\\Models\\\\PacienteHumano\':\n            etiquetaDatosPaciente = \'Datos del paciente\'\n            break;\n          case \'App\\\\Models\\\\PacienteAnimal\':\n            etiquetaDatosPaciente = \'Datos del paciente animal\'\n            break;\n          case \'App\\\\Models\\\\SujetoObjeto\':\n            etiquetaDatosPaciente = \'Datos del objeto\'\n            break;\n          default:\n            etiquetaDatosPaciente = \'Datos del paciente\'\n            break;\n        }\n        return etiquetaDatosPaciente;\n      },\n      puedeModificar() {\n        return this.registro.estado !== \'N\';\n      },\n      esHumano() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\PacienteHumano\';\n      },\n      esAnimal() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\PacienteAnimal\';\n      },\n      esObjeto() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\SujetoObjeto\';\n      },\n      numeroHistoriaClinica() {\n        const orden = {\n          es_humano: this.esHumano,\n          es_animal: this.esAnimal,\n          es_objeto: this.esObjeto,\n          paciente: {\n            historia_clinica: this.registro.paciente_historia_clinica,\n            numero_historia_clinica: this.registro.paciente_numero_historia_clinica\n          }\n        }\n\n        const idSistemaExterno = this.id === \'0\' ? this.$usuario.sistemaHisId : (this.registro.sistema_externo_id ? this.registro.sistema_externo_id : this.$usuario.sistemaHisId);\n\n        return this.obtenerNumeroHistoriaClinica(orden, idSistemaExterno);\n      }\n    },\n    watch: {\n      \'registro.fecha_orden\': function (val, oldVal) {\n        if (oldVal && val !== oldVal) {\n          this.cambioFechaOrden();\n        }\n      },\n    },\n  }\n<\/script>\n\n<style scoped>\n  legend {\n    position: relative;\n  }\n\n  #totales .form-group {\n    margin-bottom: 7px !important;\n  }\n\n  .hover-examen {\n    font-weight: bold;\n    background-color: #f5f5f5;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},2730:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"legend[data-v-1f60d25e]{position:relative}#contadorExamenes[data-v-1f60d25e]{bottom:5px;font-size:.62em;position:absolute;right:0}.titulo[data-v-1f60d25e]{font-size:21px;font-weight:700}.hover-examen[data-v-1f60d25e]{background-color:#f5f5f5;font-weight:700}","",{version:3,sources:["webpack://./resources/js/components/clientes/pedidos/formulario.vue"],names:[],mappings:"AAsiEA,wBACA,iBACA,CAEA,mCAEA,UAAA,CAEA,eAAA,CAHA,iBAAA,CAEA,OAEA,CAEA,yBAEA,cAAA,CADA,eAEA,CAEA,+BAEA,wBAAA,CADA,eAEA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"/>\n    <form method="POST" @submit.prevent="guardar" @invalid.capture="elementosInvalidos">\n\n      <liston v-if="!esPortal"></liston>\n\n      <navbar v-if="!esPortal">\n        <template #titulo>\n          {{ titulo }} <strong v-show="id !== \'0\'">{{ registro.id }}</strong>\n        </template>\n        <template #opciones>\n          <ul class="nav navbar-nav">\n            <li>\n              <button\n                :id="nombreId"\n                type="submit"\n                class="btn btn-primary">\n                <i class="fas fa-save fa-fw"/>&nbsp;Guardar\n              </button>\n            </li>\n            <li>\n              <button type="button" class="btn btn-default"\n                      @click="generarPDF(id)" v-if="id !== \'0\'"\n                      :disabled="!datos.permisos.imprimirPedidos">\n                <i class="fas fa-print fa-fw"/>&nbsp;Imprimir\n              </button>\n            </li>\n            <li>\n              <a class="btn btn-default" @click="navegarAPedidos">Regresar</a>\n            </li>\n          </ul>\n        </template>\n      </navbar>\n\n      <div v-else\n           style="display: flex; justify-content: flex-start; align-items: center; gap: 5px; margin-bottom: 10px">\n        <template v-if="id !== \'0\'">\n          {{ titulo }} <strong>{{ registro.id }}</strong>\n        </template>\n        <button\n          :id="nombreId"\n          type="submit"\n          class="btn btn-primary">\n          <i class="fas fa-save fa-fw"/>&nbsp;Guardar\n        </button>\n        <a class="btn btn-default" @click="navegarAPedidos">Regresar</a>\n      </div>\n\n      <ul class="nav nav-tabs">\n        <li class="active"><a data-toggle="tab" href="#datosGenerales">Datos generales</a></li>\n        <li v-if="this.$cliente.pais === \'EC\'">\n          <a\n            data-toggle="tab"\n            href="#variablesEpidemilogicas"\n            @click="clickEpi1">\n            EPI 1\n          </a>\n        </li>\n      </ul>\n      <div class="tab-content">\n        <div id="datosGenerales" class="tab-pane fade in active">\n          <fieldset disabled>\n            <div class="row">\n              <div class="form-group" :class="[ esPortal ? \'col-sm-4\' : \'col-sm-3\']" v-if="id === \'0\'">\n                <label for="identificacion" class="control-label"\n                       :class="{obligatorio: registro.paciente_type !== \'App\\\\Models\\\\PacienteAnimal\'}">\n                  Identificación paciente</label>\n                <div class="input-group">\n                  <input type="text" class="form-control input-sm" id="identificacion" maxlength="25"\n                         v-model="registro.paciente_identificacion"\n                         @blur="autocompletarPaciente"\n                         @keydown.enter.prevent="focusSiguiente(\'crearPaciente\')"\n                         autocomplete="off"\n                         :disabled="id !== \'0\'"\n                         :required="registro.paciente_type !== \'App\\\\Models\\\\PacienteAnimal\'">\n                  <div class="input-group-btn">\n                    <button\n                      class="btn btn-sm btn-default hidden-md hidden-lg"\n                      type="button"\n                      @click="autocompletarPaciente"\n                      data-toggle="tooltip"\n                      title="Autocompletar"\n                      :disabled="id !== \'0\'">\n                      <i class="fas fa-user-check fa-fw"></i>\n                    </button>\n                    <button\n                      id="crearPaciente"\n                      class="btn btn-sm btn-default"\n                      type="button"\n                      @click="abrirModalCrearPaciente"\n                      title="Crear Paciente" :disabled="id !== \'0\'">\n                      <i class="fas fa-plus" aria-hidden="true"/>\n                    </button>\n                    <button class="btn btn-sm btn-default" type="button" @click="abrirModalEditarPaciente"\n                            title="Editar Paciente" :disabled="id !== \'0\' || !registro.paciente_id">\n                      <i class="fas fa-pencil-alt" aria-hidden="true"/>\n                    </button>\n                    <button type="button" class="btn btn-sm btn-primary"\n                            @click="abrirPacienteSinBusqueda"\n                            title="Buscar Paciente" :disabled="id !== \'0\'">\n                      <i class="fas fa-search" aria-hidden="true"/>\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <div class="form-group" :class="claseDatosPaciente">\n                <label class="control-label" for="paciente_nombre" v-show="registro.paciente_type">\n                  {{ etiquetaDatosPaciente }}\n                </label>\n                <i\n                  v-show="cargandoPaciente"\n                  style="margin-top: 36px"\n                  class="fas fa-spinner fa-spin fa-fw"\n                  aria-hidden="true"\n                  title="Obteniendo datos de persona"/>\n                <div id="paciente_nombre" v-show="registro.paciente_nombre">\n                  <i class="fas fa-user fa-lg" v-show="esHumano"></i>\n                  <i class="fas fa-paw fa-lg" v-show="esAnimal"></i>\n                  <i class="fas fa-flask fa-lg" v-show="esObjeto"></i>\n                  <span class="paciente">{{ registro.paciente_nombre }}</span>\n                  &nbsp;\n                  <span v-show="esAnimal && registro.paciente_taxonomia" class="no-salto-linea" title="Raza">\n                    <i class="fas fa-sitemap fa-lg"></i>\n                    {{ registro.paciente_taxonomia }}\n                    &nbsp;\n                  </span>\n                  <span v-show="id !== \'0\'" class="no-salto-linea">\n                    <i class="far fa-id-card fa-lg"></i>\n                    {{ registro.paciente_identificacion }}\n                    &nbsp;\n                  </span>\n                  <span v-if="esHumano || esAnimal" class="no-salto-linea">\n                    <i class="fas fa-birthday-cake fa-lg"></i>\n                    {{ registro.paciente_fecha_nacimiento }} ({{ obtenerEdad(registro.paciente_fecha_nacimiento) }})\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_sexo" class="no-salto-linea">\n                    <i class="fas fa-mars fa-lg" v-show="registro.paciente_sexo === \'M\'"></i>\n                    <i class="fas fa-venus fa-lg" v-show="registro.paciente_sexo === \'F\'"></i>\n                    {{ registro.paciente_sexo === \'M\' ? \'Masculino\' : \'Femenino\' }}\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_numero_poliza" class="no-salto-linea" title="Número de poliza">\n                    <i class="fas fa-user-shield fa-lg" title="Número de poliza"></i>\n                    {{ registro.paciente_numero_poliza }}\n                    &nbsp;\n                  </span>\n                  <span v-if="(esAnimal || esObjeto) && registro.paciente_dueno_responsable" class="no-salto-linea">\n                    <i class="fas fa-user-tie fa-lg" title="Dueño"></i>\n                    {{ registro.paciente_dueno_responsable }}\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_telefono" class="no-salto-linea">\n                    <i class="fas fa-mobile-alt fa-lg"></i>\n                    {{ registro.paciente_telefono }}\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_correo" class="no-salto-linea">\n                    <i class="fas fa-envelope fa-lg"></i>\n                    {{ registro.paciente_correo }}\n                    &nbsp;\n                  </span>\n                  <span v-show="registro.paciente_direccion" class="no-salto-linea">\n                    <i class="fas fa-map-marked-alt fa-lg"></i>\n                    {{ registro.paciente_direccion }}\n                    &nbsp;\n                  </span>\n                </div>\n              </div>\n              <div class="col-sm-2 form-group" v-show="this.id !== \'0\' && registroAuxiliar.nombreUsuarioIngresa">\n                <label for="usuario_ingresa" class="control-label">Usuario Ingresa</label>\n                <div id="usuario_ingresa">\n                  {{ registroAuxiliar.nombreUsuarioIngresa }}\n                </div>\n              </div>\n              <div class="col-sm-2 text-right" v-show="cantidadOtrosPedidos!==null">\n                <label class="control-label">Pedidos agendados</label>\n                <div>{{ cantidadOtrosPedidos }}</div>\n              </div>\n            </div>\n\n            <div class="row">\n\n              <div class="col-sm-3 form-group" v-if="!esMedico">\n                <label\n                  for="cliente_id"\n                  class="control-label"\n                  :class="{\'obligatorio\': datos.configuraciones.clienteCategoriaRequeridoPedidos}">\n                  Cliente\n                </label>\n                <select\n                  id="cliente_id"\n                  name="cliente_id"\n                  class="form-control input-sm"\n                  v-if="datos.permisos.cambiarEmpresas" @change="cargarCategorias"\n                  v-model="registro.cliente_id"\n                  :required="datos.configuraciones.clienteCategoriaRequeridoPedidos">\n                  <option value="">Seleccione...</option>\n                  <option v-for="cliente in clientes" :value="cliente.id">\n                    {{ cliente.nombre }}\n                    <div v-if="cliente.estado === \'N\'">\n                      (Inactiva)\n                    </div>\n                  </option>\n                </select>\n                <div v-if="!datos.permisos.cambiarEmpresas">\n                  {{ obtenerNombreCliente }}\n                </div>\n              </div>\n\n              <div class="col-sm-2 form-group" v-if="!esMedico">\n                <label\n                  for="categoria_id"\n                  class="control-label"\n                  :class="{\'obligatorio\': datos.configuraciones.clienteCategoriaRequeridoPedidos}">\n                  Categoría\n                </label>\n                <select\n                  id="categoria_id"\n                  name="categoria_id"\n                  class="form-control input-sm"\n                  @change="cargarExamenesConPrecio"\n                  v-model="registro.categoria_id"\n                  :required="datos.configuraciones.clienteCategoriaRequeridoPedidos">\n                  <option value="">Seleccione...</option>\n                  <option v-for="categoria in categorias" :value="categoria.id">\n                    {{ categoria.nombre }}\n                  </option>\n                </select>\n              </div>\n\n              <div class="col-sm-3 form-group">\n                <label for="medico" class="control-label">\n                  Médico\n                  <i\n                    v-show="cargandoMedico"\n                    class="fas fa-spinner fa-spin fa-fw"\n                    aria-hidden="true"\n                    title="Cargando médico"/>\n                  <i class="fas fa-check-circle" data-toggle="tooltip"\n                     title="Médico seleccionado"\n                     v-show="registro.medico_id"></i>\n                </label>\n                <div class="input-group" v-if="!esMedico">\n                  <input type="text" class="form-control input-sm" id="medico"\n                         maxlength="15" placeholder="Buscar médico" autocomplete="off"\n                         v-model="registro.medico_nombre"\n                         @blur="autocompletarMedico"\n                         @keydown.enter.prevent="focusSiguiente(\'crearMedico\')">\n                  <div class="input-group-btn">\n                    <button\n                      id="crearMedico"\n                      type="button"\n                      class="btn btn-sm btn-default"\n                      title="Crear"\n                      @click="abrirModalGestionarMedico">\n                      <i class="fas fa-plus" aria-hidden="true"/>\n                    </button>\n                    <button\n                      class="btn btn-sm btn-primary"\n                      type="button" title="Búsqueda"\n                      @click="buscarMedico">\n                      <i class="fas fa-search" aria-hidden="true"/>\n                    </button>\n                  </div>\n                </div>\n\n                <div v-if="esMedico">{{ esMedico ? medicoPedido.nombre_completo : \'\' }}</div>\n              </div>\n\n              <div class="col-sm-2 form-group">\n                <label for="tipo_atencion_id" class="control-label">Tipo atención</label>\n                <select class="form-control input-sm" id="tipo_atencion_id" name="tipo_atencion_id"\n                        v-model="registro.tipo_atencion_id">\n                  <option value="">Seleccione...</option>\n                  <option v-for="tipoAtencion in tiposAtenciones" :value="tipoAtencion.id">\n                    {{ tipoAtencion.nombre }}\n                  </option>\n                </select>\n              </div>\n\n              <div class="col-sm-2 form-group">\n                <label for="fecha_cita" class="control-label obligatorio no-salto-linea">Fecha cita</label>\n                <input\n                  id="fecha_cita"\n                  class="form-control input-sm"\n                  data-provide="datepicker"\n                  data-date-format="yyyy-mm-dd"\n                  data-date-today-highlight="true"\n                  data-date-autoclose="true"\n                  data-date-language="es"\n                  data-date-start-date="0d"\n                  data-date-clear-btn="true"\n                  data-date-today-btn="linked"\n                  placeholder="aaaa-mm-dd"\n                  @keydown.enter.prevent=""\n                  autocomplete="off"\n                  required\n                  v-date="registro.fecha_cita"\n                />\n              </div>\n            </div>\n\n            <div class="row">\n              <div class="col-sm-2 form-group">\n                <label for="sucursal" class="control-label">Sucursal</label>\n                <select\n                  v-if="datos.permisos.cambiarSucursales"\n                  id="sucursal"\n                  name="sucursal"\n                  class="form-control input-sm"\n                  @change="cambioSucursal"\n                  @keydown.enter="$event.stopPropagation()"\n                  v-model="registro.sucursal_id">\n                  <option value="">Seleccione...</option>\n                  <option v-for="sucursal in sucursales" :value="sucursal.id">\n                    {{ sucursal.nombre }}\n                    <template v-if="sucursal.estado===\'N\'">(Inactiva)</template>\n                  </option>\n                </select>\n                <div v-if="!datos.permisos.cambiarSucursales">\n                  {{ sucursalNombre }}\n                </div>\n              </div>\n\n              <div class="col-sm-2 form-group">\n                <label for="servicio_id" class="control-label">Servicio</label>\n                <select class="form-control input-sm" id="servicio_id" name="servicio_id"\n                        v-model="registro.servicio_id">\n                  <option value="">Seleccione...</option>\n                  <option v-for="servicio in servicios" :value="servicio.id">{{ servicio.nombre }}</option>\n                </select>\n              </div>\n\n              <div class="col-sm-1 form-group">\n                <label class="control-label">Temperatura</label>\n                <input type="number" class="form-control input-sm" step="0.01" min="30" max="50" maxlength="6"\n                       @keydown.enter.prevent=""\n                       v-model="registro.temperatura"/>\n              </div>\n\n              <div class="col-sm-2 form-group"\n                   v-show="registro.paciente_nombre && registro.paciente_sexo === \'F\' && registro.paciente_type !== \'App\\\\Models\\\\SujetoObjeto\'">\n                <label class="control-label">F.U.M.</label>\n                <input\n                  id="fum"\n                  class="form-control input-sm"\n                  data-provide="datepicker"\n                  data-date-format="yyyy-mm-dd"\n                  data-date-today-highlight="true"\n                  data-date-autoclose="true"\n                  data-date-language="es"\n                  data-date-clear-btn="true"\n                  data-date-today-btn="linked"\n                  placeholder="aaaa-mm-dd"\n                  @keydown.enter.prevent=""\n                  v-date="registro.fecha_ultima_menstruacion"\n                />\n              </div>\n\n              <div class="col-sm-2 form-group"\n                   v-show="registro.paciente_nombre && registro.paciente_sexo === \'F\'  && registro.paciente_type !== \'App\\\\Models\\\\SujetoObjeto\'">\n                <label></label>\n                <div class="checkbox">\n                  <label>\n                    <input type="checkbox" value="" :disabled="registro.paciente_sexo === \'M\'"\n                           @change="cambioEmbarazada"\n                           v-model="registro.embarazada">\n                    Embarazada\n                  </label>\n                </div>\n              </div>\n\n              <div class="col-sm-2 form-group"\n                   v-show="registro.paciente_nombre && registro.paciente_sexo === \'F\' && registro.embarazada  && registro.paciente_type !== \'App\\\\Models\\\\SujetoObjeto\'">\n                <label class="control-label">Semanas gestación</label>\n                <input type="number" class="form-control input-sm" step="1" min="0" max="50"\n                       @keydown.enter.prevent=""\n                       v-model="registro.semanas_gestacion"/>\n              </div>\n\n              <div class="col-sm-1 form-group no-salto-linea" v-show="registro.numero_pedido_externo">\n                <label class="control-label ">Referencia</label>\n                <div>{{ registro.numero_pedido_externo }}</div>\n              </div>\n            </div>\n\n            <div class="row">\n              <div class="form-group col-sm-5">\n                <label for="diagnostico_concepto" class="control-label">Diagnóstico</label>\n                <div class="input-group">\n                  <input type="text" class="form-control input-sm" id="diagnostico_concepto"\n                         maxlength="255" autocomplete="off"\n                         v-model="registro.diagnostico_concepto" @keydown.tab="autocompletarDiagnostico"\n                         @keydown.enter.prevent="autocompletarDiagnostico"\n                         v-on:blur="verificarDiagnostico"\n                         placeholder="Concepto">\n                  <div class="input-group-btn">\n                    <button class="btn btn-sm btn-primary" type="button"\n                            @click="buscarDiagnostico"\n                            title="Buscar Diagnóstico">\n                      <i class="fas fa-search" aria-hidden="true"/>\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <div class="form-group col-sm-6">\n                <label for="comentario" class="control-label">Comentario</label>\n                <textarea class="form-control input-sm resize-vertical" rows="1" id="comentario"\n                          @keydown.enter="$event.stopPropagation()"\n                          name="comentario" v-model="registro.comentario"/>\n              </div>\n              <div class="col-sm-1 form-group">\n                <label class="control-label">Cama</label>\n                <input type="text" class="form-control input-sm" maxlength="8" v-model="registro.cama"/>\n              </div>\n            </div>\n          </fieldset>\n          <fieldset disabled style="margin-top: 10px">\n            <div class="row">\n              <div class="col-md-12">\n                <legend class="obligatorio">\n                  Exámenes\n                  <span id="contadorExamenes" v-show="detallesPedidos.length > 0" class="badge">\n                    {{ detallesPedidos.length }}\n                    {{ etiquetaSeleccionados }}\n                  </span>\n                </legend>\n              </div>\n              <div class="col-md-6" v-if="!cargandoExamenes">\n                <div style="height: 300px; overflow: auto; margin-bottom: 12px">\n                  <table class="table table-striped table-bordered table-hover table-condensed">\n                    <thead>\n                    <tr>\n                      <td class="text-left sticky-top" colspan="2" style="padding-left: 0">\n                        <div class="col-xs-6" style="padding-left: 0">\n                          <input\n                            type="text"\n                            id="buscarExamen"\n                            ref="buscarExamen"\n                            class="form-control input-sm"\n                            placeholder="Buscar examen"\n                            autocomplete="off"\n                            v-model="cadenaBusquedaExamenes"\n                            @keydown.down.prevent="siguienteExamen(-1)"\n                            @keydown.enter.prevent="autocompletarExamen"/>\n                        </div>\n                        <div class="col-xs-6 pull-right" style="padding-right: 0">\n                          <v-select\n                            id="perfiles"\n                            :tabindex="-1"\n                            :disabled="this.grupos.length===0"\n                            placeholder="Perfil"\n                            class="form-control input-sm"\n                            :options="grupos"\n                            v-model="grupoId"\n                            label="nombre"\n                            :clearable="false"\n                            :reduce="opcion => opcion.id"\n                            :loading="cargandoPerfiles"\n                            @input="cargarExamenesPorGrupo">\n                            <template #no-options>No existen coincidencias</template>\n                            <template #spinner="{ loading }">\n                              <div v-show="loading">\n                                <i class="fas fa-spinner fa-spin fa-fw"/>\n                              </div>\n                            </template>\n                          </v-select>\n                        </div>\n                      </td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-if="examenesFiltrados.length === 0">\n                      <td colspan="2" class="text-center">No existen exámenes</td>\n                    </tr>\n                    <template v-for="(examen, indice) in examenesFiltrados">\n                      <tr :class="{\'hover-examen\': indice === indiceExamen}" @mouseover="mouseSobreExamen">\n                        <td class="col-xs-11 col-sm-11 text-left cortar-texto">\n                          <div :title="examen.nombre">\n                            {{ examen.codigo }} - {{ examen.nombre }}\n                          </div>\n                        </td>\n                        <td class="col-xs-1 col-sm-1 text-center">\n                          <button\n                            :id="\'examen-\'+indice"\n                            type="button"\n                            class="btn btn-primary btn-xs"\n                            title="Agregar examen"\n                            @keydown.up.prevent="anteriorExamen(indice)"\n                            @keydown.down.prevent="siguienteExamen(indice)"\n                            @keydown.enter="$event.stopPropagation()"\n                            @click="agregarExamen(examen)">\n                            <i class="fas fa-plus"></i>\n                          </button>\n                        </td>\n                      </tr>\n                    </template>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n              <div class="col-md-6" v-if="!cargandoExamenes">\n                <div id="examenes-seleccioandos" style="height: 340px; overflow: auto">\n                  <div v-if="detallesPedidos.length === 0" class="text-center" style="padding-top: 30px">\n                    No existen exámenes seleccionados\n                  </div>\n                  <table\n                    v-show="detallesPedidos.length > 0"\n                    class="table table-striped table-bordered table-hover table-condensed">\n                    <thead>\n                    <tr>\n                      <td class="sticky-top" style="padding-left: 0">\n                        <input\n                          type="text"\n                          class="form-control input-sm col-sm-3"\n                          placeholder="Buscar examen seleccionado"\n                          v-model="cadenaBusquedaDetalles"/>\n                      </td>\n                      <th v-if="esCliente && datos.permisos.mostrarPrecios" class="col-sm-1 text-center sticky-top">\n                        Valor\n                      </th>\n                      <th class="col-sm-1 text-center sticky-top">\n                        <button class="btn btn-xs btn-default" type="button" title="Eliminar todos los exámenes"\n                                v-show="detallesPedidos.length > 0"\n                                @click="eliminarDetalles"><i class="fas fa-trash" aria-hidden="true"></i></button>\n                      </th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for="detalle in detallesPedidosFiltrados">\n                      <td class="text-left">\n                        {{ detalle.examen.codigo }} - {{ detalle.examen.nombre }}\n                        <i\n                          v-show="detalle.examen.condiciones_preanaliticas"\n                          class="fas fa-exclamation-circle fa-sm"\n                          style="padding-left: 4px"\n                          data-toggle="popover"\n                          data-html="true"\n                          data-placement="top"\n                          title="Condiciones preanalíticas"\n                          :data-content="tituloCondicionesPreanaliticas(detalle.examen)"\n                        />\n                      </td>\n                      <td v-if="esCliente && datos.permisos.mostrarPrecios" class="text-right">\n                        {{ detalle.valor ? Number(detalle.valor).toFixed(2) : \'Sin tarifa\' }}\n                      </td>\n                      <td class="text-center centrado-vertical">\n                        <div class="btn-group" role="group" aria-label="...">\n                          <button type="button" class="btn btn-default btn-xs" title="Eliminar examen"\n                                  @click="eliminarDetalle(detalle)">\n                            <i class="fas fa-trash" aria-hidden="true"></i>\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                    </tbody>\n                    <tfoot v-if="esCliente && datos.permisos.mostrarPrecios" v-show="detallesPedidos.length > 0">\n                    <tr>\n                      <td class="control-label text-right" style="font-weight: bold">Total</td>\n                      <td class="text-right">{{ total }}</td>\n                      <td/>\n                    </tr>\n                    </tfoot>\n                  </table>\n                </div>\n              </div>\n\n              <div id="cargandoExamenes" class="col-md-12" v-if="cargandoExamenes">\n                <div class="panel-body text-center">\n                  <h4>\n                    <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>Cargando...\n                  </h4>\n                </div>\n              </div>\n            </div>\n          </fieldset>\n          <hr v-show="examenes.length > 0 || cargandoExamenes"/>\n\n        </div>\n        <div id="variablesEpidemilogicas" class="tab-pane fade">\n          <fieldset disabled>\n            <div class="row">\n              <div class="col-sm-12 form-group">\n                <div class="checkbox">\n                  <label>\n                    <input type="checkbox" value="" @change="cambioCumpleDefinicionCaso"\n                           v-model="variablesEpidemiologicas.cumple_definicion_caso">\n                    Cumple definición de caso\n                  </label>\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-4 form-group">\n                <label class="control-label">\n                  Diagnóstico\n                  <i\n                    v-show="cargandoDiagnosticoEpi"\n                    class="fas fa-spinner fa-spin fa-fw"\n                    title="Cargando"/>\n                </label>\n                <div class="input-group">\n                  <input type="text" class="form-control input-sm"\n                         maxlength="255" autocomplete="off"\n                         v-model="variablesEpidemiologicas.diagnostico_concepto"\n                         @keydown.tab="autocompletarDiagnosticoEpidemiologico"\n                         @keydown.enter.prevent="autocompletarDiagnosticoEpidemiologico"\n                         v-on:blur="verificarDiagnosticoEpidemiologico"\n                         placeholder="Concepto">\n                  <div class="input-group-btn">\n                    <button class="btn btn-sm btn-primary" type="button" title="Buscar"\n                            @click="buscarDiagnosticoEpidemiologico">\n                      <i class="fas fa-search" aria-hidden="true"/>\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label class="control-label">Fecha inicio síntomas</label>\n                <input\n                  class="form-control input-sm cursor-menu"\n                  autocomplete="off"\n                  data-provide="datepicker"\n                  data-date-format="yyyy-mm-dd"\n                  data-date-today-highlight="true"\n                  data-date-autoclose="true"\n                  data-date-language="es"\n                  data-date-end-date="0d"\n                  placeholder="aaaa-mm-dd"\n                  v-date="variablesEpidemiologicas.fecha_inicio_sintomas"/>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label></label>\n                <div class="checkbox">\n                  <label>\n                    <input type="checkbox" v-model="variablesEpidemiologicas.epi_1">\n                    EPI 1\n                  </label>\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-6 form-group">\n                <label class="control-label">Comorbilidad (Enfermedades preexistentes)</label>\n                <textarea class="form-control input-sm resize-vertical" rows="1" maxlength="200"\n                          v-model="variablesEpidemiologicas.comorbilidad"></textarea>\n              </div>\n              <div class="col-sm-6 form-group">\n                <label class="control-label">Lugar o antecedente probable de infección</label>\n                <select class="form-control input-sm"\n                        v-model="variablesEpidemiologicas.antecedente_infeccion">\n                  <option value="">Seleccione...</option>\n                  <option v-for="antecedenteInfeccion in antecedentesInfeccion" :value="antecedenteInfeccion.id">\n                    {{ antecedenteInfeccion.nombre }}\n                  </option>\n                </select>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-2 form-group">\n                <label class="control-label">Antecedente de viaje</label>\n                <select class="form-control input-sm"\n                        v-model="variablesEpidemiologicas.antecedente_viaje">\n                  <option value="">Seleccione...</option>\n                  <option value="DENTRO_PAIS">Dentro del país</option>\n                  <option value="FUERA_PAIS">Fuera del país</option>\n                </select>\n              </div>\n              <div class="col-sm-2 form-group">\n                <label class="control-label">Fecha viaje</label>\n                <input\n                  class="form-control input-sm cursor-menu"\n                  autocomplete="off"\n                  data-provide="datepicker"\n                  data-date-format="yyyy-mm-dd"\n                  data-date-today-highlight="true"\n                  data-date-autoclose="true"\n                  data-date-language="es"\n                  data-date-end-date="0d"\n                  placeholder="aaaa-mm-dd"\n                  v-date="variablesEpidemiologicas.fecha_viaje"/>\n              </div>\n              <div class="col-sm-8 form-group">\n                <label class="control-label">Lugar de viaje</label>\n                <input type="text" class="form-control input-sm" maxlength="100"\n                       v-model="variablesEpidemiologicas.lugar_viaje"/>\n              </div>\n            </div>\n            <div class="row">\n              <div class="col-sm-5 form-group">\n                <label class="control-label">Unidad de salud que notifica</label>\n                <input type="text" class="form-control input-sm" maxlength="150"\n                       v-model="variablesEpidemiologicas.unidad_salud_notifica"/>\n              </div>\n              <div class="col-sm-3 form-group">\n                <label class="control-label">Semana epidemiológica</label>\n                <input type="number" class="form-control input-sm" step="1" min="0" maxlength="6"\n                       v-model="variablesEpidemiologicas.semana_epidemiologica"/>\n              </div>\n            </div>\n            <div class="row">\n              <ubicacion-geografica-ec\n                :key="key"\n                :provincias="ubicacionesNivel2"\n                :provincia-id="registroAuxiliar.provinciaId"\n                :canton-id="registroAuxiliar.cantonId"\n                :parroquia-id="variablesEpidemiologicas.unidad_salud_parroquia_id"\n                cookie="epi"\n                v-model="variablesEpidemiologicas.unidad_salud_parroquia_id"\n                @provincia-id-actualizada="provinciaIdEpiActualizada"\n                @canton-id-actualizado="cantonIdEpiActualizado">\n              </ubicacion-geografica-ec>\n            </div>\n          </fieldset>\n        </div>\n      </div>\n    </form>\n\n    <gestionar-paciente-modal\n      :id-sistema-externo="$usuario.sistemaHisId"\n      :con-sistemas-externos="!esPortal"\n      @paciente-humano-guardado="pacienteHumanoGuardado"\n      @paciente-animal-guardado="pacienteAnimalGuardado"\n      @sujeto-objeto-guardado="sujetoObjetoGuardado"\n    />\n\n    <buscar-paciente-modal @paciente-seleccionado="pacienteSeleccionado"/>\n\n    <gestionar-medico-modal @medico-creado="medicoCreado"/>\n\n    <buscar-medico-modal @medico-seleccionado="medicoSeleccionado"></buscar-medico-modal>\n\n    <clientes-buscar-diagnostico-modal\n      id="buscarDiagnostico"\n      @diagnostico-seleccionado="diagnosticoSeleccionado"\n    />\n\n    <clientes-buscar-diagnostico-modal\n      id="buscarDiagnosticoEpidemiologico"\n      @diagnostico-seleccionado="diagnosticoEpidemiologicoSeleccionado"\n    />\n\n    <cargando-modal ref="cargando"/>\n  </div>\n</template>\n<script>\n  import Liston from "../../comunes/Liston"\n  import UbicacionGeograficaEc from "../../comunes/UbicacionGeograficaEc";\n  import BuscarMedicoModal from "../modals/BuscarMedicoModal";\n  import GestionarMedicoModal from "../modals/GestionarMedicoModal";\n  import {crearBotonConData, escaparRegex} from "../../../support/util";\n  import BuscarPacienteModal from "../modals/BuscarPacienteModal";\n  import GestionarPacienteModal from "../modals/GestionarPacienteModal";\n  import ScrollInfinito from "../../comunes/ScrollInfinito";\n\n  export default {\n    props: [\'id\', \'portal\', \'token\', \'datos\', \'medicoPedido\', \'cliente\'],\n    components: {\n      Liston,\n      UbicacionGeograficaEc,\n      BuscarMedicoModal,\n      GestionarMedicoModal,\n      BuscarPacienteModal,\n      GestionarPacienteModal,\n      ScrollInfinito\n    },\n    data() {\n      return {\n        indiceExamen: null,\n        primerClickEpi: false,\n        procesando: {\n          cargarExamenes: false,\n        },\n        cargandoDiagnosticoEpi: false,\n        cargandoMedico: false,\n        cargandoPaciente: false,\n        cargandoExamenes: false,\n        cargandoPerfiles: false,\n        cadenaBusqueda: \'\',\n        cadenaBusquedaExamenes: \'\',\n        cadenaBusquedaDetalles: \'\',\n        cantidadOtrosPedidos: null,\n        grupoId: \'\',\n        registro: {\n          id: this.id,\n          cliente_id: \'\',\n          categoria_id: \'\',\n          sucursal_id: \'\',\n          paciente_id: \'\',\n          paciente_identificacion: \'\',\n          paciente_type: \'\',\n          paciente_nombre: \'\',\n          paciente_taxonomia: \'\',\n          paciente_fecha_nacimiento: \'\',\n          paciente_sexo: \'\',\n          paciente_correo: \'\',\n          paciente_direccion: \'\',\n          paciente_telefono: \'\',\n          paciente_numero_poliza: \'\',\n          paciente_dueno_responsable: \'\',\n          medico_id: \'\',\n          medico_nombre: \'\',\n          diagnostico_id: \'\',\n          diagnostico_concepto: \'\',\n          tipo_atencion_id: \'\',\n          servicio_id: \'\',\n          sistema_externo_id: null,\n          fecha_cita: \'\',\n          embarazada: false,\n          comentario: \'\',\n          numero_pedido_externo: \'\',\n          temperatura: \'\',\n          semanas_gestacion: \'\',\n          fecha_ultima_menstruacion: \'\',\n          cama: \'\',\n          variablesEpidemiologicas: {}\n        },\n        variablesEpidemiologicas: {\n          id: \'\',\n          cumple_definicion_caso: \'\',\n          epi_1: \'\',\n          fecha_inicio_sintomas: \'\',\n          diagnostico_id: \'\',\n          diagnostico_concepto: \'\',\n          comorbilidad: \'\',\n          antecedente_viaje: \'\',\n          antecedente_infeccion: \'\',\n          fecha_viaje: \'\',\n          lugar_viaje: \'\',\n          unidad_salud_notifica: \'\',\n          unidad_salud_parroquia_id: \'\',\n          semana_epidemiologica: \'\'\n        },\n        detallesPedidos: [],\n        clientes: [],\n        categorias: [],\n        sucursales: [],\n        examenes: [],\n        grupos: [],\n        ubicacionesNivel2: [],\n        key: 0,\n        tiposAtenciones: [],\n        servicios: [],\n        count: 0,\n        pagina: 1,\n        registroAuxiliar: {\n          provinciaId: \'\',\n          cantonId: \'\',\n          nombreUsuarioIngresa: \'\'\n        },\n        antecedentesInfeccion: [\n          {id: \'NUCLEO_FAMILIAR\', nombre: \'Núcleo familiar\'},\n          {id: \'TRABAJO\', nombre: \'Trabajo\'},\n          {id: \'TRANSPORTE\', nombre: \'Transporte\'},\n          {id: \'OTRO_PAIS\', nombre: \'Otro país\'},\n          {id: \'VIAJE_DOMESTICO\', nombre: \'Viaje doméstico\'},\n          {id: \'CENTROS_CUIDADO\', nombre: \'Centros de cuidado\'},\n          {id: \'CENTROS_PRIVACION_LIBERTAD\', nombre: \'Centros de privacion de libertad\'},\n          {id: \'REUNION_MASIVA\', nombre: \'Reunión masiva\'},\n          {id: \'REUNION_SOCIAL_CERRADA\', nombre: \'Reunión social cerrada\'},\n          {id: \'INDETERMINADO\', nombre: \'Indeterminado\'},\n        ],\n        paginacion: {\n          paginaActual: 1,\n          totalPaginas: 1,\n          totalRegistros: 0,\n        }\n      }\n    },\n    created() {\n      this.configurarInterceptorParaPortal();\n    },\n    mounted() {\n      $(\'body\').popover({\n        selector: \'[data-toggle="popover"]\',\n        container: \'body\',\n        trigger: \'hover\'\n      });\n\n      this.cargarDatos();\n    },\n    methods: {\n      limpiarFormulario() {\n        this.cadenaBusqueda = \'\';\n        this.cadenaBusquedaExamenes = \'\';\n        this.cadenaBusquedaDetalles = \'\';\n        this.registro.id = this.id;\n        this.registro.paciente_id = \'\';\n        this.registro.paciente_type = \'\';\n        this.registro.paciente_identificacion = \'\';\n        this.registro.paciente_nombre = \'\';\n        this.registro.paciente_taxonomia = \'\';\n        this.registro.paciente_fecha_nacimiento = \'\';\n        this.registro.paciente_sexo = \'\';\n        this.registro.paciente_correo = \'\';\n        this.registro.paciente_direccion = \'\';\n        this.registro.paciente_telefono = \'\';\n        this.registro.paciente_numero_poliza = \'\';\n        this.registro.paciente_dueno_responsable = \'\';\n        this.registro.medico_id = \'\';\n        this.registro.medico_nombre = \'\';\n        this.registro.diagnostico_id = \'\';\n        this.registro.diagnostico_concepto = \'\';\n        this.registro.embarazada = false;\n        this.registro.temperatura = \'\';\n        this.registro.semanas_gestacion = \'\';\n        this.registro.fecha_ultima_menstruacion = \'\';\n        this.registro.cama = \'\';\n        this.registro.detallesPedidos = [];\n        this.detallesPedidos = [];\n        this.examenes = [];\n        this.cargarEmpresaPorDefecto();\n      },\n      limpiarCadenaBusqueda() {\n        this.cadenaBusqueda = \'\';\n      },\n      limpiarCadenaBusquedaExamenes() {\n        this.cadenaBusquedaExamenes = \'\';\n      },\n      limpiarCadenaBusquedaDetalles() {\n        this.cadenaBusquedaDetalles = \'\';\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      mostrarAdvertencia(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'warning\', mensaje, errores);\n      },\n      mostrarInformativo(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'info\', mensaje, errores);\n      },\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      ocultarMensajes() {\n        this.$refs.alerta.ocultarAlertas();\n      },\n      alternarCamposFormulario() {\n        $(\'fieldset\').attr(\'disabled\') === \'disabled\' ? $(\'fieldset\').removeAttr(\'disabled\') : $(\'fieldset\').attr(\'disabled\', \'disabled\');\n      },\n      cargarDatos() {\n        this.$refs.cargando.alternar();\n        const params = {portal: this.portal}\n        if (this.id === \'0\') {\n          axios\n            .get(`/api/pedidos/create`, {params})\n            .then(({data}) => {\n              this.crear(data.data);\n              this.alternarCamposFormulario();\n            },)\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al cargar pedido!\', errores);\n            })\n            .then(() => this.$refs.cargando.alternar());\n        } else {\n          axios\n            .get(`/api/pedidos/${this.id}/edit`, {params})\n            .then(({data}) => {\n              this.editar(data.data);\n              this.alternarCamposFormulario();\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al cargar pedido!\', errores);\n            })\n            .then(() => this.$refs.cargando.alternar());\n        }\n      },\n      crear(response) {\n        if (!this.esMedico) {\n          this.clientes = response.clientes;\n        }\n\n        this.sucursales = response.sucursales;\n        this.grupos = response.grupos;\n        this.examenes = response.examenes;\n        this.servicios = response.servicios;\n        this.tiposAtenciones = response.tiposAtenciones;\n        if (!response.cambiarSucursales) {\n          this.datos.permisos.cambiarSucursales = response.cambiarSucursales;\n        }\n\n        this.detallesPedidos = [];\n\n        if (response.sucursalId) {\n          this.registro.sucursal_id = response.sucursalId;\n        }\n\n        if (response.clientePorDefectoId && !this.esMedico) {\n          const clientePorDefecto = this.clientes.find(c => c.id === parseInt(response.clientePorDefectoId));\n\n          if (clientePorDefecto) {\n            this.registro.cliente_id = response.clientePorDefectoId;\n            this.cargarCategorias();\n          } else {\n            this.mostrarAdvertencia(\'¡Advertencia!\', \'El cliente por defecto está "Inactivo".\');\n          }\n        }\n      },\n      editar(response) {\n        this.clientes = response.clientes;\n        this.grupos = response.grupos;\n        this.examenes = response.examenes;\n        this.sucursales = response.sucursales;\n        this.examenes = response.examenes;\n        this.servicios = response.servicios;\n        this.tiposAtenciones = response.tiposAtenciones;\n        if (!response.cambiarSucursales) {\n          this.datos.permisos.cambiarSucursales = response.cambiarSucursales;\n        }\n\n        const pedido = response.pedido;\n        this.registro.id = pedido.id;\n        this.registro.cliente_id = pedido.categoria && pedido.categoria.empresa ? pedido.categoria.empresa.id : \'\';\n        this.cargarCategorias(false);\n        this.registro.categoria_id = pedido.categoria_id ? pedido.categoria_id : \'\';\n        this.registro.sucursal_id = pedido.sucursal_id ? pedido.sucursal_id : \'\';\n\n        this.registro.paciente_id = pedido.paciente_id;\n        this.registro.paciente_type = pedido.paciente_type;\n        this.registro.paciente_identificacion = pedido.paciente.numero_identificacion;\n        this.registro.paciente_sexo = pedido.paciente.sexo;\n        this.registro.paciente_correo = pedido.paciente.correo;\n        this.registro.paciente_direccion = pedido.paciente.direccion;\n        this.registro.paciente_telefono = pedido.paciente.telefono_celular;\n\n        if (pedido.es_humano) {\n          this.registro.paciente_tipo = pedido.paciente.tipo_identificacion;\n          this.registro.paciente_nombre = pedido.paciente.nombre_paciente;\n          this.registro.paciente_direccion = pedido.paciente.direccion_completa;\n          this.registro.paciente_numero_poliza = pedido.paciente.numero_poliza;\n          this.registro.paciente_fecha_nacimiento = pedido.paciente.fecha_nacimiento;\n        }\n\n        if (pedido.es_animal) {\n          const paciente = pedido.paciente;\n          this.registro.paciente_nombre = paciente.nombre_paciente;\n          this.registro.paciente_taxonomia = `${paciente.raza.padre.nombre} - ${paciente.raza.nombre}`;\n          this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n          this.cargarDuenoResponsable(pedido.paciente_type, paciente);\n        }\n\n        if (pedido.es_objeto) {\n          this.registro.paciente_nombre = pedido.paciente.descripcion;\n          this.cargarDuenoResponsable(pedido.paciente_type, pedido.paciente);\n\n        }\n\n        this.registro.medico_id = pedido.medico_id;\n        this.registro.medico_nombre = pedido.medico ? pedido.medico.nombre_completo : \'\';\n        this.registro.diagnostico_id = pedido.diagnostico_id;\n        this.registro.diagnostico_concepto = pedido.diagnostico ? pedido.diagnostico.concepto : \'\';\n        this.registro.tipo_atencion_id = pedido.tipo_atencion_id ? pedido.tipo_atencion_id : \'\';\n        this.registro.servicio_id = pedido.servicio_id ? pedido.servicio_id : \'\';\n        this.registro.sistema_externo_id = pedido.sistema_externo_id;\n        this.registro.comentario = pedido.comentario;\n        this.registro.embarazada = pedido.embarazada;\n        this.registro.fecha_cita = pedido.fecha_cita;\n        this.registro.numero_pedido_externo = pedido.numero_pedido_externo;\n        this.registro.temperatura = pedido.temperatura;\n        this.registro.semanas_gestacion = pedido.semanas_gestacion;\n        this.registro.fecha_ultima_menstruacion = pedido.fecha_ultima_menstruacion;\n        this.registro.cama = pedido.cama;\n        this.registroAuxiliar.nombreUsuarioIngresa = pedido.usuario_ingresa ? pedido.usuario_ingresa.nombre_usuario : \'\';\n\n        if (pedido.variable_epidemiologica) {\n          const variableEpidemiologica = pedido.variable_epidemiologica;\n          this.variablesEpidemiologicas.id = variableEpidemiologica.id;\n          this.variablesEpidemiologicas.cumple_definicion_caso = variableEpidemiologica.cumple_definicion_caso;\n          this.variablesEpidemiologicas.fecha_inicio_sintomas = variableEpidemiologica.fecha_inicio_sintomas;\n          this.variablesEpidemiologicas.epi_1 = variableEpidemiologica.epi_1;\n          this.variablesEpidemiologicas.diagnostico_id = variableEpidemiologica.diagnostico_id;\n          this.variablesEpidemiologicas.diagnostico_concepto = variableEpidemiologica.diagnostico ? variableEpidemiologica.diagnostico.concepto : \'\';\n          this.variablesEpidemiologicas.comorbilidad = variableEpidemiologica.comorbilidad;\n          this.variablesEpidemiologicas.antecedente_viaje = variableEpidemiologica.antecedente_viaje ? variableEpidemiologica.antecedente_viaje : \'\';\n          this.variablesEpidemiologicas.fecha_viaje = variableEpidemiologica.fecha_viaje;\n          this.variablesEpidemiologicas.lugar_viaje = variableEpidemiologica.lugar_viaje;\n          this.variablesEpidemiologicas.unidad_salud_notifica = variableEpidemiologica.unidad_salud_notifica;\n          this.variablesEpidemiologicas.unidad_salud_parroquia_id = variableEpidemiologica.unidad_salud_parroquia_id ? variableEpidemiologica.unidad_salud_parroquia_id : \'\';\n          this.variablesEpidemiologicas.semana_epidemiologica = variableEpidemiologica.semana_epidemiologica;\n\n          this.variablesEpidemiologicas.antecedente_infeccion = this.definirAntecedenteInfeccionEpi(variableEpidemiologica.antecedente_infeccion);\n\n          const unidadSaludParroquia = variableEpidemiologica.unidad_salud_parroquia;\n          if (unidadSaludParroquia) {\n            this.registroAuxiliar.provinciaId = unidadSaludParroquia.padre ? unidadSaludParroquia.padre.padre_id : \'\';\n            this.registroAuxiliar.cantonId = unidadSaludParroquia.padre_id;\n            this.key++;\n          }\n        }\n        this.cargarDetallesPedidoYExamenesConPrecio(pedido);\n        this.detalles_pedidos = [];\n      },\n      definirAntecedenteInfeccionEpi(antecedenteInfeccionBd) {\n        if (!antecedenteInfeccionBd) {\n          return \'\';\n        }\n\n        const antecedenteInfeccion = this.antecedentesInfeccion.find(ai => ai.id === antecedenteInfeccionBd);\n        if (!antecedenteInfeccion) {\n          this.antecedentesInfeccion.push({id: \'OTRO\', nombre: `(Obsoleto) ${antecedenteInfeccionBd}`});\n          antecedenteInfeccionBd = \'OTRO\';\n        }\n\n        return antecedenteInfeccionBd;\n      },\n      cargarUbicaciones() {\n        if (!_.isEmpty(this.ubicacionesNivel2)) {\n          return;\n        }\n\n        axios\n          .get(\'/api/ubicaciones\', {params: {\'padreCodigo\': this.$cliente.pais}})\n          .then(({data: {data}}) => {\n            this.ubicacionesNivel2 = data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar ubicaciones\', errores);\n          });\n      },\n      cargarCategorias(cargarExamenes = true) {\n        if (!this.registro.cliente_id && !this.esMedico) {\n          this.examenes = [];\n          this.categorias = [];\n          this.registro.categoria_id = \'\';\n          return;\n        }\n\n        const cliente = this.clientes.find(c => c.id === this.registro.cliente_id);\n        if (cliente) {\n          this.categorias = cliente.subempresas;\n          const categoria = this.categorias.find(s => s.predeterminada);\n          if (categoria) {\n            this.registro.categoria_id = categoria.id;\n            if (cargarExamenes) {\n              this.cargarExamenesConPrecio();\n            }\n          }\n        }\n      },\n      cargarExamenesPorGrupo(grupoId) {\n        this.grupoId = \'\';\n\n        this.ocultarMensajes();\n        if (grupoId === \'\') {\n          return;\n        }\n\n        if (this.examenes.length === 0) {\n          this.mostrarAdvertencia(\'¡Advertencia!\', \'No existen exámenes disponibles.\');\n          return;\n        }\n\n        this.cargandoPerfiles = true;\n\n        const params = {cadenaBusqueda: grupoId}\n\n        axios\n          .get(`/api/detalles-grupos`, {params})\n          .then(({data: {data}}) => {\n            const detallesGrupos = data;\n\n            if (detallesGrupos.length === 0) {\n              this.mostrarAdvertencia(\'¡Advertencia!\', \'No existen exámenes definidos para este grupo.\');\n              return;\n            }\n            let agregados = 0;\n\n            for (let examen of this.examenes) {\n              for (let detalleGrupo of detallesGrupos) {\n                if (examen.id === detalleGrupo.examen_id) {\n                  const examenesExistentes = this.detallesPedidos.reduce((contador, {examen_id}) => examen_id === examen.id ? contador += 1 : contador, 0);\n                  if (examenesExistentes === 0) {\n                    this.agregarExamen(examen);\n                    agregados++;\n                  }\n                }\n              }\n            }\n\n            if (agregados > 0) {\n              const grupo = this.grupos.find(grupo => grupo.id === grupoId);\n              this.mostrarExito(`Examenes de perfil <strong>${grupo.nombre}</strong> agregados`);\n            }\n\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al cargar los exámenes por grupo!\', errores);\n          })\n          .then(() => this.cargandoPerfiles = false);\n      },\n      autocompletarExamen() {\n        if (this.examenesFiltrados.length === 1) {\n          this.agregarExamen(this.examenesFiltrados[0]);\n        }\n      },\n      agregarExamen(examen) {\n        this.ocultarMensajes();\n        const examenExisteEnPedido = this.detallesPedidos.some(dp => dp.examen_id === examen.id);\n        if (!examenExisteEnPedido) {\n          this.$refs.buscarExamen.focus();\n          this.$refs.buscarExamen.select();\n          this.indiceExamen = null;\n\n          const detallePedido = {\n            examen_id: examen.id,\n            examen: examen,\n            valor: examen.valor\n          };\n\n          this.detallesPedidos.push(detallePedido);\n\n          setTimeout(() => {\n            const element = document.getElementById("examenes-seleccioandos");\n            element.scrollTop = element.scrollHeight;\n          }, 100);\n        }\n      },\n      eliminarDetalle(detalle) {\n        const indice = this.detallesPedidos.indexOf(detalle);\n        this.detallesPedidos.splice(indice, 1);\n      },\n      eliminarDetalles() {\n        this.detallesPedidos = [];\n      },\n      posteriorAGuardar(responseData) {\n        const respuesta = responseData.data;\n        this.generarPDF(respuesta.id);\n        this.navegarAPedidos();\n      },\n      guardar() {\n        const sucursal = this.sucursales.find(s => s.id === this.registro.sucursal_id);\n\n        if (this.registro.sucursal_id && sucursal.estado === \'N\') {\n          this.mostrarErrores(\'¡Error!\', \'No se puede escoger una sucursal inactiva.\');\n          return;\n        }\n\n        if (this.variablesEpidemiologicas.antecedente_infeccion === \'OTRO\') {\n          $(\'.nav a[href="#variablesEpidemilogicas"]\').tab(\'show\');\n          this.mostrarErrores(\'¡Error!\', \'El campo "Lugar o antecedente probable de infección" está obsoleto.\');\n          return;\n        }\n\n        this.alternarBotonesSubmit();\n\n        this.$refs.cargando.alternar();\n\n        const registro = {\n          id: this.id,\n          categoria_id: this.registro.categoria_id,\n          sucursal_id: this.registro.sucursal_id,\n          paciente_id: this.registro.paciente_id,\n          paciente_type: this.registro.paciente_type,\n          medico_id: this.esMedico ? this.medicoPedido.id : this.registro.medico_id,\n          diagnostico_id: this.registro.diagnostico_id,\n          tipo_atencion_id: this.registro.tipo_atencion_id,\n          servicio_id: this.registro.servicio_id,\n          sistema_externo_id: this.registro.sistema_externo_id,\n          comentario: this.registro.comentario,\n          embarazada: this.registro.embarazada,\n          fecha_cita: this.registro.fecha_cita,\n          temperatura: this.registro.temperatura,\n          semanas_gestacion: this.registro.semanas_gestacion,\n          fecha_ultima_menstruacion: this.registro.fecha_ultima_menstruacion,\n          cama: this.registro.cama,\n          detallesPedidos: this.detallesPedidos,\n          variablesEpidemiologicas: this.variablesEpidemiologicas\n        };\n\n        registro.variablesEpidemiologicas.epi_1 = !registro.variablesEpidemiologicas.epi_1 ? \'\' : registro.variablesEpidemiologicas.epi_1;\n        registro.variablesEpidemiologicas.cumple_definicion_caso = !registro.variablesEpidemiologicas.cumple_definicion_caso ? \'\' : registro.variablesEpidemiologicas.cumple_definicion_caso;\n        const params = {portal: this.portal};\n\n        if (this.id === \'0\') {\n          axios\n            .post(`/api/pedidos`, registro, {params})\n            .then(({data}) => this.posteriorAGuardar(data))\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al crear pedido\', errores);\n            })\n            .then(() => {\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n            });\n        } else {\n          axios\n            .patch(`/api/pedidos/${this.id}`, registro, {params})\n            .then(({data}) => this.posteriorAGuardar(data))\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al crear pedido\', errores);\n            })\n            .then(() => {\n              this.$refs.cargando.alternar();\n              this.alternarBotonesSubmit();\n            });\n        }\n      },\n      generarPDF(pedidoId) {\n        let url = \'/pedidos/\'\n        if (this.esMedico) {\n          url = \'/consulta-resultados-medicos\' + url;\n        }\n        if (this.esCliente) {\n          url = \'/consulta-resultados-empresas\' + url;\n        }\n        let params = {token: this.token, portal: this.portal, esCreacion: this.id === \'0\'}\n        params = this.obtenerParametrosUrl(params);\n        window.open(`${url}${pedidoId}/pdf${params}`, \'_blank\', \'height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no\');\n      },\n      navegarAPedidos() {\n        let urlPrevio = document.referrer;\n        const dominio = window.location.hostname;\n        if (!urlPrevio.includes(dominio)) {\n          urlPrevio = \'/pedidos\';\n          if (this.esMedico) {\n            urlPrevio = `/consulta-resultados-medicos/pedidos?token=${this.token}`;\n          }\n          if (this.esCliente) {\n            urlPrevio = `/consulta-resultados-empresas/pedidos?token=${this.token}`;\n          }\n        }\n        window.location.href = urlPrevio;\n      },\n      limpiarPaciente() {\n        this.registro.paciente_id = \'\';\n        this.registro.paciente_type = \'\';\n        this.registro.paciente_nombre = \'\';\n        this.registro.paciente_taxonomia = \'\';\n        this.registro.paciente_fecha_nacimiento = \'\';\n        this.registro.paciente_sexo = \'\';\n        this.registro.paciente_correo = \'\';\n        this.registro.paciente_direccion = \'\';\n        this.registro.paciente_telefono = \'\';\n        this.registro.paciente_numero_poliza = \'\';\n        this.registro.paciente_dueno_responsable = \'\';\n      },\n      autocompletarPaciente() {\n        this.ocultarMensajes();\n        this.limpiarPaciente();\n\n        if (!this.registro.paciente_identificacion) {\n          return;\n        }\n\n        this.registro.paciente_identificacion = this.registro.paciente_identificacion.trim();\n\n        const params = {identificacion: this.registro.paciente_identificacion};\n        this.cargandoPaciente = true;\n\n        axios\n          .get(`/api/pacientes`, {params})\n          .then(({data: {data}}) => {\n            if (data.length === 0) {\n              this.abrirModalCrearPaciente();\n              return;\n            }\n\n            if (data.length > 1) {\n              this.cadenaBusqueda = this.registro.paciente_identificacion;\n              this.abrirPaciente(true);\n              return;\n            }\n\n            this.pacienteSeleccionado(data[0]);\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al autocompletar paciente!\', errores);\n          })\n          .then(() => this.cargandoPaciente = false);\n      },\n      abrirPacienteSinBusqueda() {\n        this.abrirPaciente(false);\n      },\n      abrirPaciente(mostrarMensaje) {\n        const cadenaBusqueda = mostrarMensaje ? this.cadenaBusqueda : \'\';\n        const boton = crearBotonConData({\'cadena-busqueda\': cadenaBusqueda});\n        $(\'#buscarPaciente\').modal({}, boton);\n      },\n      pacienteSeleccionado(paciente) {\n        if (paciente) {\n          this.registro.paciente_id = \'\';\n          this.registro.paciente_nombre = \'\';\n\n          this.registro.paciente_id = paciente.id;\n          this.registro.paciente_type = paciente.tipo;\n          this.registro.paciente_nombre = paciente.nombre_paciente;\n          this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n          this.registro.paciente_sexo = paciente.sexo;\n          this.registro.paciente_correo = paciente.correo;\n          this.registro.paciente_identificacion = paciente.numero_identificacion;\n          this.registro.paciente_direccion = [paciente.direccion, paciente.direccion_numeracion].filter(Boolean).join(\' \');\n          this.registro.paciente_telefono = paciente.telefono_celular;\n          this.registro.paciente_numero_poliza = paciente.numero_poliza;\n\n          this.cargarDuenoResponsableVista(paciente.tipo, paciente);\n          this.cargarRaza(paciente.tipo, paciente.id);\n        }\n      },\n      cargarRaza(tipo, pacienteId) {\n        if (tipo !== \'App\\\\Models\\\\PacienteAnimal\') {\n          return;\n        }\n\n        axios\n          .get(`/api/pacientes/animales/${pacienteId}`)\n          .then(({data: {data}}) => {\n            this.registro.paciente_taxonomia = `${data.raza.padre.nombre} - ${data.raza.nombre}`;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al buscar raza!\', errores);\n          });\n      },\n      cargarDuenoResponsableVista(tipo, paciente) {\n        if (tipo === \'App\\\\Models\\\\PacienteHumano\') {\n          return;\n        }\n\n        this.registro.paciente_dueno_responsable = [paciente.apellidos, paciente.nombres].filter(Boolean).join(\' \');\n      },\n      cargarDuenoResponsable(tipo, paciente) {\n        this.registro.paciente_dueno_responsable = \'\';\n\n        if (tipo === \'App\\\\Models\\\\PacienteAnimal\') {\n          this.registro.paciente_dueno_responsable = [paciente.apellidos_dueno, paciente.nombres_dueno].filter(Boolean).join(\' \');\n        }\n\n        if (tipo === \'App\\\\Models\\\\SujetoObjeto\') {\n          this.registro.paciente_dueno_responsable = [paciente.apellidos_responsable, paciente.nombres_responsable].filter(Boolean).join(\' \');\n        }\n      },\n      seleccionarPacienteHumano(paciente) {\n        this.paciente_type = \'humano\';\n        this.registro.paciente_id = paciente.id;\n        this.registro.paciente_type = \'App\\\\Models\\\\PacienteHumano\';\n        this.registro.paciente_nombre = paciente.nombre_paciente;\n        this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n        this.registro.paciente_sexo = paciente.sexo;\n        this.registro.paciente_correo = paciente.correo;\n        this.registro.paciente_identificacion = paciente.numero_identificacion;\n        this.registro.paciente_direccion = [paciente.direccion, paciente.direccion_numeracion].filter(Boolean).join(\' \');\n        this.registro.paciente_telefono = paciente.telefono_celular;\n        this.registro.paciente_numero_poliza = paciente.numero_poliza;\n        this.registro.paciente_dueno_responsable = \'\';\n\n        if (this.registro.paciente_sexo === \'M\') {\n          this.registro.embarazada = false;\n          this.registro.semanas_gestacion = \'\';\n          this.registro.fecha_ultima_menstruacion = \'\';\n        }\n      },\n      seleccionarPacienteAnimal(paciente) {\n        this.paciente_type = \'animal\';\n        this.registro.paciente_id = paciente.id;\n        this.registro.paciente_type = \'App\\\\Models\\\\PacienteAnimal\';\n        this.registro.paciente_nombre = paciente.nombre_paciente;\n        this.registro.paciente_taxonomia = `${paciente.raza.padre.nombre} - ${paciente.raza.nombre}`;\n        this.registro.paciente_fecha_nacimiento = paciente.fecha_nacimiento;\n        this.registro.paciente_sexo = paciente.sexo;\n        this.registro.paciente_identificacion = paciente.numero_identificacion;\n        this.registro.paciente_correo = paciente.correo;\n        this.registro.paciente_direccion = paciente.direccion;\n        this.registro.paciente_telefono = paciente.telefono_celular;\n        this.registro.paciente_numero_poliza = \'\';\n\n        this.cargarDuenoResponsable(this.registro.paciente_type, paciente);\n\n        if (this.registro.paciente_sexo === \'M\') {\n          this.registro.embarazada = false;\n          this.registro.semanas_gestacion = \'\';\n        }\n      },\n      seleccionarSujetoObjeto(sujeto) {\n        this.paciente_type = \'objeto\';\n        this.registro.paciente_id = sujeto.id;\n        this.registro.paciente_type = \'App\\\\Models\\\\SujetoObjeto\';\n        this.registro.paciente_nombre = sujeto.nombre_paciente;\n        this.registro.paciente_fecha_nacimiento = null;\n        this.registro.paciente_sexo = sujeto.sexo;\n        this.registro.paciente_correo = sujeto.correo;\n        this.registro.paciente_direccion = sujeto.direccion;\n        this.registro.paciente_telefono = sujeto.telefono_celular;\n        this.registro.paciente_numero_poliza = \'\';\n        this.registro.paciente_identificacion = sujeto.numero_identificacion;\n        this.cargarDuenoResponsable(this.registro.paciente_type, sujeto);\n\n        if (this.registro.paciente_sexo === \'M\') {\n          this.registro.embarazada = false;\n          this.registro.semanas_gestacion = \'\';\n          this.registro.fecha_ultima_menstruacion = \'\';\n        }\n      },\n      abrirModalCrearPaciente() {\n        const datos = {\n          pacienteType: \'\',\n          esCrearPaciente: true,\n          numeroIdentificacion: this.registro.paciente_identificacion\n        }\n        $(\'#gestionarPacienteModal\').modal({backdrop: \'static\'}, datos);\n      },\n      abrirModalEditarPaciente() {\n        const datos = {\n          pacienteType: this.obtenerPacienteType(this.registro.paciente_type),\n          esCrearPaciente: false,\n          numeroIdentificacion: this.registro.paciente_identificacion,\n          pacienteId: this.registro.paciente_id,\n        }\n        $(\'#gestionarPacienteModal\').modal({backdrop: \'static\'}, datos);\n      },\n      obtenerPacienteType(sujetoType) {\n        let pacienteType = \'\';\n        switch (sujetoType) {\n          case \'App\\\\Models\\\\PacienteHumano\':\n            pacienteType = \'humano\';\n            break;\n          case \'App\\\\Models\\\\PacienteAnimal\':\n            pacienteType = \'animal\';\n            break;\n          case \'App\\\\Models\\\\SujetoObjeto\':\n            pacienteType = \'objeto\';\n            break;\n        }\n        return pacienteType;\n      },\n      pacienteHumanoGuardado(paciente) {\n        const accion = paciente.esCreado ? \'creado\' : \'actualizado\';\n        this.mostrarExito(`Paciente "${paciente.nombre_paciente}" ${accion} y seleccionado.`);\n        this.seleccionarPacienteHumano(paciente);\n      },\n      pacienteAnimalGuardado(paciente) {\n        const accion = paciente.esCreado ? \'creado\' : \'actualizado\';\n        this.mostrarExito(`Paciente "${paciente.nombre_paciente}" ${accion} y seleccionado.`);\n        this.seleccionarPacienteAnimal(paciente);\n      },\n      sujetoObjetoGuardado(sujeto) {\n        const accion = sujeto.esCreado ? \'creado\' : \'actualizado\';\n        this.mostrarExito(`Objeto "${sujeto.descripcion}" ${accion} y seleccionado.`);\n        this.seleccionarSujetoObjeto(sujeto);\n      },\n      autocompletarMedico() {\n        this.ocultarMensajes();\n\n        this.registro.medico_id = \'\';\n\n        if (!this.registro.medico_nombre) {\n          return;\n        }\n\n        this.registro.medico_nombre = this.registro.medico_nombre.trim();\n        this.cargandoMedico = true;\n\n        const params = {cadenaBusqueda: this.registro.medico_nombre}\n        axios\n          .get(`/api/medicos`, {params})\n          .then(({data: {data}}) => {\n            if (data.length === 0) {\n              this.abrirModalGestionarMedico();\n              this.cadenaBusqueda = this.registro.medico_nombre;\n              this.registro.medico_nombre = \'\';\n              return;\n            }\n\n            if (data.length > 1) {\n              const params = {cadenaBusqueda: this.registro.medico_nombre};\n              $(\'#modalBuscarMedico\').modal({}, params);\n              this.registro.medico_nombre = \'\';\n              return;\n            }\n\n            this.registro.medico_id = data[0].id;\n            this.registro.medico_nombre = data[0].nombre_completo;\n            this.mostrarExito(\'Médico seleccionado\');\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al buscar médico\', errores);\n          })\n          .then(() => this.cargandoMedico = false);\n      },\n      verificarMedico() {\n        if (this.registro.medico_nombre === \'\') {\n          this.registro.medico_id = \'\';\n        }\n      },\n      abrirModalGestionarMedico() {\n        if(this.cargandoMedico){\n          return;\n        }\n        $(\'#modalGestionarMedico\').modal({backdrop: \'static\'});\n      },\n      buscarMedico() {\n        $(\'#modalBuscarMedico\').modal(\'show\');\n      },\n      medicoCreado(medico) {\n        this.registro.medico_id = medico.id;\n        this.registro.medico_nombre = medico.nombre_completo;\n        this.mostrarExito(`Médico "${medico.nombre_completo}" creado y seleccionado`);\n      },\n      medicoSeleccionado(medico) {\n        this.registro.medico_id = medico.id;\n        this.registro.medico_nombre = medico.nombre_completo;\n        this.mostrarExito(\'Médico seleccionado\');\n      },\n      contarOtrosPedidos(fechaCita) {\n        if (fechaCita && !this.esPortal) {\n          const params = {\n            pedidoId: this.registro.id !== \'0\' ? this.registro.id : \'\',\n            sucursalId: this.registro.sucursal_id\n          };\n\n          axios\n            .get(`/api/pedidos/contar-por-fecha/${fechaCita}`, {params})\n            .then(({data: {data}}) => {\n              this.cantidadOtrosPedidos = data;\n            })\n            .catch(error => {\n              this.cantidadOtrosPedidos = null;\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al contar pedidos!\', errores);\n            });\n        }\n      },\n      cambioSucursal() {\n        this.contarOtrosPedidos(this.registro.fecha_cita);\n      },\n      autocompletarDiagnostico() {\n        this.ocultarMensajes();\n        if (_.isEmpty(this.registro.diagnostico_concepto)) {\n          this.registro.diagnostico_id = \'\';\n          return;\n        }\n        this.procesarBuscarDiagnostico(\'buscarDiagnostico\', this.registro);\n      },\n      verificarDiagnostico() {\n        if (this.registro.diagnostico_concepto === \'\') {\n          this.registro.diagnostico_id = \'\';\n        }\n      },\n      buscarDiagnostico() {\n        this.ocultarMensajes();\n        $(\'#buscarDiagnostico\').modal(\'show\');\n      },\n      autocompletarDiagnosticoEpidemiologico() {\n        this.ocultarMensajes();\n        if (_.isEmpty(this.variablesEpidemiologicas.diagnostico_concepto)) {\n          this.variablesEpidemiologicas.diagnostico_id = \'\';\n          return;\n        }\n        this.procesarBuscarDiagnostico(\'buscarDiagnosticoEpidemiologico\', this.registro);\n      },\n      verificarDiagnosticoEpidemiologico() {\n        if (this.variablesEpidemiologicas.diagnostico_concepto === \'\') {\n          this.variablesEpidemiologicas.diagnostico_id = \'\';\n        }\n      },\n      buscarDiagnosticoEpidemiologico() {\n        this.ocultarMensajes();\n        $(\'#buscarDiagnosticoEpidemiologico\').modal(\'show\');\n      },\n      procesarBuscarDiagnostico(id, registro) {\n        registro.diagnostico_id = \'\';\n        registro.diagnostico_concepto = registro.diagnostico_concepto.trim();\n        const params = {cadenaBusqueda: registro.diagnostico_concepto};\n        axios\n          .get(`/api/diagnosticos`, {params})\n          .then(({data}) => {\n            const diagnosticos = data;\n\n            if (diagnosticos.length === 0 || diagnosticos.length > 1) {\n              $(`#${id}`).modal({}, params);\n            } else {\n              registro.diagnostico_id = diagnosticos[0].id;\n              registro.diagnostico_concepto = diagnosticos[0].concepto;\n              this.mostrarExito(\'Diagnóstico seleccionado.\')\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al buscar diagnósticos!\', errores);\n          });\n      },\n      diagnosticoSeleccionado(diagnostico) {\n        this.registro.diagnostico_id = diagnostico.id;\n        this.registro.diagnostico_concepto = diagnostico.concepto;\n      },\n      diagnosticoEpidemiologicoSeleccionado(diagnostico) {\n        this.variablesEpidemiologicas.diagnostico_id = diagnostico.id;\n        this.variablesEpidemiologicas.diagnostico_concepto = diagnostico.concepto;\n      },\n      cambioCumpleDefinicionCaso() {\n        if (this.variablesEpidemiologicas.cumple_definicion_caso) {\n          this.cargandoDiagnosticoEpi = true;\n\n          const params = {codigo: \'U071\'};\n          axios\n            .get(`/api/diagnosticos`, {params})\n            .then(({data}) => {\n              const diagnosticos = data;\n              if (diagnosticos.length === 1) {\n                this.variablesEpidemiologicas.diagnostico_id = diagnosticos[0].id;\n                this.variablesEpidemiologicas.diagnostico_concepto = diagnosticos[0].concepto;\n              }\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'¡Error al cargar diagnóstico!\', errores);\n            })\n            .then(() => this.cargandoDiagnosticoEpi = false);\n        }\n      },\n      cambioEmbarazada() {\n        if (!this.registro.embarazada) {\n          this.registro.semanas_gestacion = \'\';\n          this.registro.fecha_ultima_menstruacion = \'\';\n        }\n      },\n      clickEpi1() {\n        if (!this.primerClickEpi) {\n          this.cargarCookies();\n          this.cargarUbicaciones();\n        }\n        this.primerClickEpi = true;\n      },\n      cargarCookies() {\n        const unidadSaludNotifica = localStorage.getItem(\'unidadSaludNotifica\');\n        if (unidadSaludNotifica && !this.variablesEpidemiologicas.unidad_salud_notifica) {\n          this.variablesEpidemiologicas.unidad_salud_notifica = unidadSaludNotifica;\n        }\n\n        const epiNivel2 = localStorage.getItem(\'epi-nivel2\');\n        if (epiNivel2 && !this.registroAuxiliar.provinciaId) {\n          this.registroAuxiliar.provinciaId = parseInt(epiNivel2);\n        }\n\n        const epiNivel3 = localStorage.getItem(\'epi-nivel3\');\n        if (epiNivel3 && !this.registroAuxiliar.cantonId) {\n          this.registroAuxiliar.cantonId = parseInt(epiNivel3);\n        }\n\n        this.key++;\n      },\n      cambiarUnidadSaludNotifica() {\n        if (this.variablesEpidemiologicas.unidad_salud_notifica) {\n          localStorage.setItem(\'unidadSaludNotifica\', this.variablesEpidemiologicas.unidad_salud_notifica)\n        }\n      },\n      provinciaIdEpiActualizada(provinciaId) {\n        this.registroAuxiliar.provinciaId = provinciaId;\n      },\n      cantonIdEpiActualizado(cantonId) {\n        this.registroAuxiliar.cantonId = cantonId;\n      },\n      elementosInvalidos(event) {\n        event.target.parentElement.classList.add(\'has-error\');\n        $(\'.nav a[href="#datosGenerales"]\').tab(\'show\');\n      },\n      cargarExamenesConPrecio() {\n        if (this.esCliente) {\n          this.examenes = [];\n          const categoria = this.categorias.find(c => c.id === this.registro.categoria_id);\n          if (this.registro.categoria_id && categoria) {\n            this.cargandoExamenes = true;\n            const params = {portal: this.portal};\n            axios\n              .get(`/api/examenes/tarifas/${categoria.tarifa_venta_id}`, {params})\n              .then(({data}) => {\n                this.examenes = data.data;\n                this.detallesPedidos.forEach(dp => {\n                  const examen = this.examenes.find(e => e.id === dp.examen_id);\n                  dp.valor = examen ? examen.valor : \'\';\n                });\n              })\n              .catch(error => {\n                const errores = this.procesarErrorResponse(error);\n                this.mostrarErrores(\'¡Error al obtener exámenes!\', errores);\n              })\n              .then(() => this.cargandoExamenes = false);\n          }\n        }\n      },\n      cargarDetallesPedidoYExamenesConPrecio(pedido) {\n        if (this.esCliente) {\n          this.examenes = [];\n          const categoria = this.categorias.find(c => c.id === this.registro.categoria_id);\n          if (this.registro.categoria_id && categoria) {\n            const params = {portal: this.portal};\n            axios\n              .get(`/api/examenes/tarifas/${categoria.tarifa_venta_id}`, {params})\n              .then(({data: {data}}) => {\n                this.examenes = data;\n                this.detallesPedidos = pedido.detalles_pedidos.map(dp => {\n                  const examen = this.examenes.find(e => e.id === dp.examen.id);\n                  return {\n                    id: dp.id,\n                    examen_id: dp.examen.id,\n                    examen: dp.examen,\n                    valor: examen ? examen.valor : \'\'\n                  }\n                });\n\n              })\n              .catch(error => {\n                const errores = this.procesarErrorResponse(error);\n                this.mostrarErrores(\'¡Error al obtener exámenes!\', errores);\n              });\n          }\n        } else {\n          this.detallesPedidos = pedido.detalles_pedidos.map(dp => {\n            return {\n              id: dp.id,\n              examen_id: dp.examen.id,\n              examen: dp.examen,\n            }\n          });\n        }\n      },\n      configurarInterceptorParaPortal() {\n        if (this.esPortal) {\n          axios.interceptors.request.use((config) => {\n            if (this.esMedico) {\n              config.url = `/consulta-resultados-medicos${config.url}`;\n            }\n            if (this.esCliente) {\n              config.url = `/consulta-resultados-empresas${config.url}`;\n            }\n            config.params = {...config.params, token: this.token}\n            return config;\n          });\n        }\n      },\n      tituloCondicionesPreanaliticas(examen) {\n        if (!examen.condiciones_preanaliticas) {\n          return \'\';\n        }\n\n        return examen.condiciones_preanaliticas.replace(/\\n/g, "<br />");\n      },\n      siguienteExamen(indice) {\n        this.indiceExamen = indice + 1;\n        $(\'#examen-\' + this.indiceExamen).focus();\n      },\n      anteriorExamen(indice) {\n        this.indiceExamen = indice - 1;\n        if (indice === 0) {\n          $(\'#buscarExamen\').focus();\n          return;\n        }\n        $(\'#examen-\' + this.indiceExamen).focus();\n      },\n      mouseSobreExamen() {\n        this.indiceExamen = null;\n      },\n      focusSiguiente(idElemento) {\n        $(`#${idElemento}`).focus();\n      },\n      cargarExamenes() {\n        const params = {\n          cadenaBusqueda: this.cadenaBusquedaExamenes,\n          page: this.paginacion.paginaActual,\n          tamano: 15,\n        };\n\n        this.procesando.cargarExamenes = true;\n\n        axios\n          .get(\'/api/examenes\', {params})\n          .then(response => {\n            this.paginacion.totalPaginas = response.data.data.last_page;\n            this.paginacion.totalRegistros = response.data.data.total;\n            this.paginacion.paginaActual++;\n\n            const examenes = response.data.data.data;\n\n            if (_.isEmpty(examenes)) {\n              return;\n            }\n\n            examenes.forEach(examenNuevo => {\n\n              const existeOrden = this.examenes.find(examen => examen.id === examenNuevo.id);\n\n              if (!existeOrden) {\n                this.examenes.push(examenNuevo);\n              }\n            });\n\n          })\n          .catch(e => {\n            console.error(e);\n            alert(\'Lo sentimos, hubo un error al cargar las órdenes.\');\n          })\n          .then(() => this.procesando.cargarExamenes = false);\n\n      }\n    },\n    computed: {\n      examenesFiltrados() {\n        if (this.examenes.length === 0) {\n          return this.examenes;\n        }\n\n        const cadenaBusqueda = escaparRegex(this.cadenaBusquedaExamenes);\n        const regex = new RegExp(removeDiacritics(cadenaBusqueda), \'i\');\n        return this.examenes.filter(examen => {\n          const resultadoRegex = regex.test(examen.codigo + \' \') || regex.test(examen.referencia_auxiliar) || regex.test(examen.referencia_auxiliar_2) || regex.test(removeDiacritics(examen.nombre));\n          const examenExisteEnPedido = this.detallesPedidos.some(dp => dp.examen_id === examen.id);\n          return resultadoRegex && !examenExisteEnPedido;\n        });\n      },\n      detallesPedidosFiltrados() {\n        if (this.detallesPedidos.length > 0) {\n          const cadenaBusqueda = escaparRegex(this.cadenaBusquedaDetalles);\n          const regex = new RegExp(removeDiacritics(cadenaBusqueda), \'i\');\n          return this.detallesPedidos\n            .filter(detalle => regex.test(detalle.examen.codigo) || regex.test(removeDiacritics(detalle.examen.nombre)));\n        }\n        return this.detallesPedidos;\n      },\n      esPacienteHumano() {\n        return this.pacienteType === \'humano\';\n      },\n      esPacienteAnimal() {\n        return this.pacienteType === \'animal\';\n      },\n      etiquetaSeleccionados() {\n        return this.detallesPedidos.length > 1 ? \'seleccionados\' : \'seleccionado\';\n      },\n      esPortal() {\n        return this.medicoPedido !== undefined || this.cliente !== undefined;\n      },\n      esMedico() {\n        return this.medicoPedido !== undefined;\n      },\n      esCliente() {\n        return this.cliente !== undefined;\n      },\n      claseDatosPaciente() {\n        let clase = \'\'\n\n        if (this.id === \'0\') {\n          clase = \'col-sm-9\';\n          if (this.cantidadOtrosPedidos !== null) {\n            clase = \'col-sm-7\';\n          }\n        } else {\n          clase = \'col-sm-10\';\n\n          if (this.registroAuxiliar.nombreUsuarioIngresa) {\n            clase = \'col-sm-8\';\n          }\n        }\n\n        if (this.esPortal) {\n          if (this.id === \'0\') {\n            clase = \'col-sm-8\';\n          } else {\n            clase = \'col-sm-12\';\n          }\n        }\n        return clase;\n      },\n      mensajeOtrosPedidos() {\n        let mensaje = \'\';\n        if (this.cantidadOtrosPedidos === 0) {\n          mensaje = \'No existen otros pedidos para la fecha especificada.\';\n        }\n        if (this.cantidadOtrosPedidos === 1) {\n          mensaje = \'Existe 1 pedido para la fecha especificada.\';\n        }\n        if (this.cantidadOtrosPedidos > 1) {\n          mensaje = \'Existen \' + this.cantidadOtrosPedidos + \' pedidos para la fecha especificada.\';\n        }\n        return mensaje;\n      },\n      total() {\n        let total = \'\';\n        const existeSinTarifa = this.detallesPedidos.find(dp => dp.valor === \'\');\n        if (existeSinTarifa) {\n          total = \'-\';\n        } else {\n          total = this.detallesPedidos.reduce((total, dp) => total + Number(dp.valor), 0);\n          total = total.toFixed(2);\n        }\n        return total;\n      },\n      etiquetaDatosPaciente() {\n        let etiquetaDatosPaciente = \'\';\n        switch (this.registro.paciente_type) {\n          case \'App\\\\Models\\\\PacienteHumano\':\n            etiquetaDatosPaciente = \'Datos del paciente\'\n            break;\n          case \'App\\\\Models\\\\PacienteAnimal\':\n            etiquetaDatosPaciente = \'Datos del paciente animal\'\n            break;\n          case \'App\\\\Models\\\\SujetoObjeto\':\n            etiquetaDatosPaciente = \'Datos del objeto\'\n            break;\n          default:\n            etiquetaDatosPaciente = \'Datos del paciente\'\n            break;\n        }\n        return etiquetaDatosPaciente;\n      },\n      esHumano() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\PacienteHumano\';\n      },\n      esAnimal() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\PacienteAnimal\';\n      },\n      esObjeto() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\SujetoObjeto\';\n      },\n      obtenerNombreCliente() {\n        const cliente = this.clientes.find(c => c.id === this.registro.cliente_id);\n        return cliente ? cliente.nombre : \'\';\n      },\n      sucursalNombre() {\n        const sucursal = this.sucursales.find(s => s.id === this.registro.sucursal_id);\n        return sucursal ? sucursal.nombre : \'\';\n      },\n      titulo() {\n        let titulo = \'\';\n        if (this.id === \'0\') {\n          if (!this.esPortal) {\n            titulo = \'Crear Pedido\';\n          }\n        } else {\n          if (this.esPortal) {\n            titulo = \'Pedido No. \';\n          } else {\n            titulo = \'Editar Pedido No. \';\n          }\n        }\n        return titulo;\n      },\n      nombreId() {\n        if (this.esPortal) {\n          return this.id === \'0\' ? \'portalCrearPedido\' : \'portalActualizarPedido\';\n\n        }\n        return this.id === \'0\' ? \'crearPedido\' : \'actualizarPedido\';\n      }\n    },\n    watch: {\n      \'registro.fecha_cita\': function (val, oldVal) {\n        if (val !== oldVal) {\n          this.contarOtrosPedidos(val);\n        }\n      }\n    },\n  }\n<\/script>\n\n<style scoped>\n  legend {\n    position: relative;\n  }\n\n  #contadorExamenes {\n    position: absolute;\n    bottom: 5px;\n    right: 0;\n    font-size: .62em;\n  }\n\n  .titulo {\n    font-weight: bold;\n    font-size: 21px\n  }\n\n  .hover-examen {\n    font-weight: bold;\n    background-color: #f5f5f5;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},7163:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"#filtros[data-v-8e73253e],#filtros li[data-v-8e73253e]{margin-right:2px}#filtros li[data-v-8e73253e]{margin-left:0}","",{version:3,sources:["webpack://./resources/js/components/clientes/pedidos/index.vue"],names:[],mappings:"AAmpBA,uDAHA,gBAMA,CAHA,6BAEA,aACA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"></alerta>\n\n    <cargando-modal ref="cargando"></cargando-modal>\n\n    <navbar v-if="!esPortal">\n      <template #titulo>\n        Pedidos\n      </template>\n      <template #opciones>\n\n        <ul class="nav navbar-nav">\n          <li>\n            <div>\n              <a\n                class="btn btn-primary"\n                :href="urlNuevo"\n                :class="{disabled: !permisos.crearPedidos}">\n                <i class="fas fa-file fa-fw"></i> Nuevo\n              </a>\n            </div>\n          </li>\n        </ul>\n\n      </template>\n    </navbar>\n    <div v-if="!esPortal" id="filtros" class="panel panel-default">\n      <div class="panel-body">\n        <div class="row">\n          <div class="col-sm-3 form-group">\n            <select\n              id="cliente_id"\n              name="cliente_id"\n              class="form-control input-sm"\n              :title="nombreFiltroCliente"\n              v-model="filtros.clienteId"\n              @change="cambiaClienteId">\n              <option value="">Clientes</option>\n              <option v-for="cliente in clientes" :value="cliente.id">\n                {{ cliente.nombre }}\n              </option>\n            </select>\n          </div>\n          <div class="col-sm-3 form-group">\n            <select\n              id="categoria_id"\n              name="categoria_id"\n              class="form-control input-sm"\n              :title="nombreFiltroCategoria"\n              v-model="filtros.categoriaId">\n              <option value="">Categorías</option>\n              <option v-for="categoria in categorias" :value="categoria.id">\n                {{ categoria.nombre }}\n              </option>\n            </select>\n          </div>\n          <div class="col-sm-2 form-group">\n            <select\n              id="estado"\n              name="estado"\n              class="form-control input-sm"\n              v-model="filtros.estado">\n              <option value="">Estado</option>\n              <option value="G">Generado</option>\n              <option value="D">Descargado</option>\n              <option value="N">Anulado</option>\n            </select>\n          </div>\n          <div class="col-sm-2 form-group">\n            <input\n              id="fecha_cita"\n              name="fecha_cita"\n              class="form-control input-sm"\n              data-provide="datepicker"\n              data-date-format="yyyy-mm-dd"\n              data-date-today-highlight="true"\n              data-date-autoclose="true"\n              data-date-language="es"\n              v-date="filtros.fechaCita"\n              placeholder="aaaa-mm-dd"\n              autocomplete="off"/>\n          </div>\n        </div>\n        <div class="row">\n\n          <div class="col-sm-10 form-group">\n            <input\n              type="text"\n              class="form-control input-sm"\n              placeholder="Buscar por número de pedido, identificación, nombres o apellidos del paciente..."\n              name="cadenaBusqueda"\n              v-model="filtros.cadenaBusqueda"\n              @keydown.enter.prevent="buscarPedidos"/>\n          </div>\n          <div class="col-sm-1 form-group text-right">\n            <button\n              class="btn btn-default btn-sm"\n              type="button"\n              title="Borrar"\n              @click="borrarFiltros">\n              <i class="fas fa-times" aria-hidden="true"></i> Borrar\n            </button>\n          </div>\n          <div class="col-sm-1 form-group text-right">\n            <button class="btn btn-primary btn-sm" type="button" title="Buscar"\n                    @click="buscarPedidos">\n              <i class="fas fa-search" aria-hidden="true"></i> Buscar\n            </button>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <div v-else style="display: flex; justify-content: flex-start; align-items: center; gap: 5px; margin-bottom: 10px">\n      <input\n        type="text"\n        class="form-control"\n        style="width: unset"\n        placeholder="Buscar..."\n        name="cadenaBusqueda"\n        v-model="filtros.cadenaBusqueda"\n        @keydown.enter.prevent="buscarPedidos"\n      />\n      <button class="btn btn-default" type="button" title="Buscar"\n              @click="buscarPedidos">\n        <i class="fas fa-search" aria-hidden="true"></i>\n      </button>\n      <button\n        class="btn btn-default"\n        type="button"\n        title="Borrar filtros"\n        @click="borrarFiltros">\n        <i class="fas fa-times" aria-hidden="true"></i>\n      </button>\n      <div>\n        <a\n          class="btn btn-primary"\n          :href="urlNuevo"\n          :class="{disabled: !permisos.crearPedidos}">\n          <i class="fas fa-file fa-fw"></i> Nuevo\n        </a>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-sm-8 col-sm-offset-2 form-group">\n        <calendar-view\n          :show-date="calendario.fecha"\n          :items="calendario.eventos"\n          :starting-day-of-week="1"\n          locale="es-EC"\n          month-name-format="long"\n          weekday-name-format="narrow"\n          current-period-label="Hoy"\n          :time-format-options="{hour: \'numeric\', minute: \'numeric\', hour12: false}"\n          class="calendario"\n          @click-date="seleccionaFecha"\n          :period-changed-callback="cambioPeriodo"\n          :key="calendario.key"\n        >\n          <calendar-view-header\n            slot="header"\n            slot-scope="t"\n            :header-props="t.headerProps"\n            @input="defineFechaCalendario"/>\n        </calendar-view>\n      </div>\n    </div>\n    <div v-if="!procesando.busqueda && pedidos.length > 0">\n      <table id="listado" class="table table-striped table-bordered table-hover table-condensed">\n        <thead>\n        <tr>\n          <th class="col-sm-1 text-center hidden-xs" v-if="configuraciones.mostrarServicioTipoAtencion">\n            Servicio/Atención\n          </th>\n          <th class="col-sm-1 text-center">No.</th>\n          <th class="col-sm-1 text-center">Fecha cita</th>\n          <th class="col-sm-3 text-left hidden-xs">\n            <template v-if="configuraciones.clienteEnOrdenes">\n              Cliente/Médico\n            </template>\n            <template v-else-if="!esMedico">\n              Médico\n            </template>\n          </th>\n          <th class="text-left">Paciente</th>\n          <th class="col-sm-1 text-center">Estado</th>\n          <th class="col-sm-1 text-center" v-if="!esPortal">Orden</th>\n        </tr>\n        </thead>\n        <tbody>\n        <template v-for="pedido in pedidos">\n          <tr>\n            <td class="text-center hidden-xs" v-if="configuraciones.mostrarServicioTipoAtencion">\n              <small title="Servicio" data-toggle="tooltip">{{ pedido.servicio ? pedido.servicio.nombre : \'\' }}</small>\n              <div v-if="pedido.tipo_atencion" title="Tipo atención" data-toggle="tooltip">\n                {{ pedido.tipo_atencion.nombre }}\n              </div>\n            </td>\n            <td class="text-center" style="position: relative">\n              <div class="visible-xs" style="position: absolute;top: 7px; left: -14px; width: 400px">\n                <opciones-pedido\n                  v-if="$root.movil"\n                  :es-portal="esPortal"\n                  :configuraciones="configuraciones"\n                  :permisos="permisos"\n                  :pedido="pedido"\n                  :token="token"\n                  tamano="md"\n                  @guardar-como-orden="guardarComoOrden"\n                  @ver-pedido="verPedido"\n                  @generar-pdf="generarPDF"\n                />\n              </div>\n\n              <small title="Referencia" data-toggle="tooltip">{{ pedido.numero_pedido_externo }}</small>\n              <div>\n                {{ pedido.id }}\n              </div>\n            </td>\n            <td class="text-center no-salto-linea">{{ pedido.fecha_cita }}</td>\n            <td class="text-left hidden-xs">\n              <div v-if="configuraciones.clienteEnOrdenes">\n                <small title="Cliente" data-toggle="tooltip">\n                  {{ pedido.categoria ? pedido.categoria.empresa.nombre : \'\' }}\n                  <template v-if="pedido.categoria">\n                    {{\n                      pedido.categoria.empresa.nombre !== pedido.categoria.nombre ? `(${pedido.categoria.nombre})` : \'\'\n                    }}\n                  </template>\n                </small>\n              </div>\n              <div v-if="!esMedico && pedido.medico" title="Médico" data-toggle="tooltip">\n                {{ pedido.medico.nombre_completo }}\n              </div>\n            </td>\n            <td class="text-left contenedor-menu-oculto">\n              <small>\n                {{ pedido.paciente.numero_identificacion }}\n                <span class="text-muted" title="Número de historia clínica" data-toggle="tooltip"\n                      v-if="configuraciones.mostrarHistoriaClinica && pedido.paciente.numero_historia_clinica">\n                  <small>({{\n                      pedido.paciente.numero_historia_clinica\n                    }})</small>\n                </span>\n              </small>\n              <div>\n                {{ pedido.paciente.nombre_paciente }}\n              </div>\n\n              <div class="menu-oculto">\n                <opciones-pedido\n                  :es-portal="esPortal"\n                  :configuraciones="configuraciones"\n                  :permisos="permisos"\n                  :pedido="pedido"\n                  :token="token"\n                  @guardar-como-orden="guardarComoOrden"\n                  @ver-pedido="verPedido"\n                  @generar-pdf="generarPDF"\n                />\n              </div>\n\n            </td>\n            <td class="text-center">\n              <pedido-estado class="puntero" :estado="pedido.estado" @click="abrirModalEstadoPedido(pedido)"/>\n              <div style="padding-top: 5px">\n                <i\n                  v-if="pedido.sistema_externo"\n                  class="fas fa-external-link-alt text-gris"\n                  data-toggle="tooltip"\n                  data-placement="right"\n                  data-html="true"\n                  :title="`Sistema externo ${pedido.sistema_externo.nombre}`"\n                />\n              </div>\n            </td>\n            <td class="text-center" v-if="!esPortal">\n              <a\n                v-if="pedido.orden"\n                :href="`/ordenes?cadenaBusqueda=${pedido.orden.numero_orden}`">\n                {{ pedido.orden.numero_orden }}\n              </a>\n            </td>\n          </tr>\n        </template>\n        </tbody>\n      </table>\n    </div>\n    <div class="paginacion alto-paginacion" v-if="!procesando.busqueda && pedidos.length > 0">\n      <output class="pull-left"><strong>Total:</strong> {{ totalRegistros }}</output>\n      <paginate\n        v-if="totalPaginas > 1"\n        class="pull-right"\n        v-model="paginaActual"\n        :page-count="totalPaginas"\n        :page-range="7"\n        :container-class="\'pagination\'"\n        :click-handler="cargarPedidos"\n        :prevText="\'<i class=\\\'fas fa-chevron-left\\\'></i>\'"\n        :nextText="\'<i class=\\\'fas fa-chevron-right\\\'></i>\'"/>\n    </div>\n\n    <cargando :cargando="procesando.busqueda" :cantidad="pedidos.length" tipo="pedidos"></cargando>\n\n    <anular-modal\n      :medico-pedido="medico"\n      :cliente="cliente"\n      @pedido-anulado="pedidoAnulado">\n    </anular-modal>\n\n    <estado-pedido-modal :pedido="pedido"></estado-pedido-modal>\n  </div>\n</template>\n\n<script>\n  import {Catalogo, DriverSistemaExterno} from "../../../support/constantes";\n  import Liston from "../../comunes/Liston"\n  import PedidoEstado from "../../comunes/PedidoEstado";\n  import OpcionesPedido from "./OpcionesPedido";\n  import AnularModal from "./AnularModal";\n  import EstadoPedidoModal from "../modals/EstadoPedidoModal";\n  import {CalendarView, CalendarViewHeader} from "vue-simple-calendar";\n  import "vue-simple-calendar/static/css/default.css"\n\n  export default {\n    components: {\n      AnularModal,\n      Liston,\n      PedidoEstado,\n      OpcionesPedido,\n      EstadoPedidoModal,\n      CalendarView,\n      CalendarViewHeader\n    },\n    props: [\n      \'medico\',\n      \'cliente\',\n      \'datos\',\n      \'token\'\n    ],\n    data() {\n      return {\n        procesando: {\n          busqueda: false,\n          calendario: false,\n        },\n        paginaActual: 1,\n        totalRegistros: 0,\n        totalPaginas: 0,\n        filtros: {\n          cadenaBusqueda: \'\',\n          medicoId: \'\',\n          clienteId: \'\',\n          categoriaId: \'\',\n          fechaCita: \'\',\n          estado: \'\',\n        },\n        clientes: [],\n        pedidos: [],\n        pedido: {},\n        permisos: \'\',\n        configuraciones: {},\n        pedidoAnular: {\n          id: \'\',\n          estado: \'\',\n          usuario_anula_id: \'\',\n          motivo_anula: \'\',\n          fecha_anula: \'\'\n        },\n        calendario: {\n          fecha: new Date(),\n          eventos: [],\n          key: 0\n        }\n      }\n    },\n    created() {\n      this.configurarInterceptorParaPortal();\n      this.cargarDatos();\n    },\n    mounted() {\n      $(\'body\').tooltip({\n        selector: \'[data-toggle="tooltip"]\',\n        container: \'body\',\n        trigger: \'hover\'\n      });\n\n      this.mostrarMensaje();\n    },\n    methods: {\n      mostrarMensaje() {\n        if (this.datos.mensaje) {\n          this.mostrarExito(this.datos.mensaje);\n          this.datos.mensaje = \'\';\n        }\n      },\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      cargarDatos() {\n        this.permisos = this.datos.permisos;\n        this.configuraciones = this.datos.configuraciones ? this.datos.configuraciones : {};\n        this.cargarFiltros();\n        this.cargarCatalogos();\n        this.cargarPedidos();\n      },\n      borrarFiltros() {\n        this.filtros.cadenaBusqueda = \'\';\n        this.filtros.clienteId = \'\';\n        this.filtros.categoriaId = \'\';\n        this.filtros.fechaCita = \'\';\n        this.filtros.estado = \'\';\n        this.pedidos = [];\n        this.buscarPedidos();\n      },\n      cargarFiltros() {\n        const {parametros} = this.datos;\n        this.filtros.cadenaBusqueda = parametros.cadenaBusqueda ? parametros.cadenaBusqueda : \'\';\n        this.filtros.clienteId = parametros.clienteId ? parseInt(parametros.clienteId) : \'\';\n        this.filtros.categoriaId = parametros.categoriaId ? parseInt(parametros.categoriaId) : \'\';\n        this.filtros.fechaCita = parametros.fechaCita ? parametros.fechaCita : \'\';\n        this.filtros.estado = parametros.estado ? parametros.estado : \'\';\n        this.paginaActual = parametros.page ? Number(parametros.page) : 1;\n      },\n      cargarCatalogos() {\n        if (!this.esPortal) {\n          const params = {catalogo: Catalogo.CLIENTES}\n          axios\n            .get(`/api/catalogos`, {params})\n            .then(({data}) => {\n              this.clientes = data.data;\n              if (!this.datos.permisos.cambiarEmpresas) {\n                this.clientes = this.clientes.filter(empresa => empresa.id === this.datos.empresaPorDefectoId);\n              }\n            })\n            .catch(error => {\n              const errores = this.procesarErrorResponse(error);\n              this.mostrarErrores(\'Error al cargar Clientes\', errores);\n            });\n        }\n      },\n      cargarPedidos() {\n        this.procesando.busqueda = true;\n\n        const params = {\n          portal: this.esPortal ? (this.esMedico ? \'medicos\' : \'empresas\') : null,\n          cadenaBusqueda: this.filtros.cadenaBusqueda ? this.filtros.cadenaBusqueda : null,\n          clienteId: this.filtros.clienteId ? this.filtros.clienteId : null,\n          categoriaId: this.filtros.categoriaId ? this.filtros.categoriaId : null,\n          fechaCita: this.filtros.fechaCita ? this.filtros.fechaCita : null,\n          estado: this.filtros.estado ? this.filtros.estado : null,\n          page: this.paginaActual,\n        }\n\n        this.actualizarUrl({...params, token: this.token});\n\n        axios\n          .get(`/api/pedidos`, {params})\n          .then(({data}) => {\n            this.totalPaginas = data.last_page;\n            this.totalRegistros = data.total;\n            const pedidos = data.data;\n            pedidos.forEach(pedido => {\n              pedido.paciente.numero_historia_clinica = this.obtenerNumeroHistoriaClinica(pedido, pedido.sistema_externo_id);\n              Vue.set(pedido, \'procesando\', false)\n            })\n            this.pedidos = pedidos;\n          })\n          .catch(error => {\n            this.pedidos = [];\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al listar pedidos\', errores);\n          })\n          .then(() => this.procesando.busqueda = false);\n      },\n      pedidoAnulado(idPedido) {\n        this.mostrarExito(`Pedido <strong>${idPedido}</strong> anulado`);\n        this.cargarPedidos();\n      },\n      buscarPedidos() {\n        this.paginaActual = 1;\n        this.filtros.cadenaBusqueda = this.filtros.cadenaBusqueda.trim();\n        this.cargarPedidos();\n        this.actualizarCalendario();\n      },\n      cambiaClienteId() {\n        this.filtros.categoriaId = \'\';\n      },\n      configurarInterceptorParaPortal() {\n        if (this.esPortal) {\n          axios.interceptors.request.use((config) => {\n            if (this.esMedico) {\n              config.url = `/consulta-resultados-medicos${config.url}`;\n            }\n            if (this.esCliente) {\n              config.url = `/consulta-resultados-empresas${config.url}`;\n            }\n            config.params = {...config.params, token: this.token}\n            return config;\n          });\n        }\n      },\n      guardarComoOrden(pedido) {\n        if (pedido.estado !== \'G\' || this.esPortal) {\n          return;\n        }\n\n        if (pedido.sistema_externo && pedido.sistema_externo.driver === DriverSistemaExterno.IESS) {\n          window.location.href = `/iess/ordenes/create?numeroOrdenExterna=${pedido.numero_pedido_externo}`;\n          return;\n        }\n\n        pedido.procesando = true;\n        axios\n          .post(`/api/pedidos/${pedido.id}/orden`)\n          .then(({data}) => {\n            pedido.estado = data.estado;\n            pedido.orden = data.orden;\n            this.mostrarExito(`Orden <strong>${pedido.orden.numero_orden}</strong> creada a partir del pedido <strong>${data.id}</strong>`);\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al crear pedido como orden!\', errores);\n          })\n          .then(() => pedido.procesando = false);\n      },\n      verPedido(pedido) {\n        let url = \'/pedidos/\'\n        if (this.esMedico) {\n          url = \'/consulta-resultados-medicos\' + url;\n        }\n\n        if (this.esCliente) {\n          url = \'/consulta-resultados-empresas\' + url;\n        }\n        const params = this.obtenerParametrosUrl({token: this.token})\n        window.location.href = `${url}${pedido.id}${params}`;\n      },\n      generarPDF(pedidoId) {\n        let url = \'/pedidos/\'\n\n        if (this.esMedico) {\n          url = \'/consulta-resultados-medicos\' + url;\n        }\n\n        if (this.esCliente) {\n          url = \'/consulta-resultados-empresas\' + url;\n        }\n\n        const params = this.obtenerParametrosUrl({token: this.token});\n\n        window.open(`${url}${pedidoId}/pdf${params}`, \'_blank\', \'height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no\');\n      },\n      abrirModalEstadoPedido(pedido) {\n        this.pedido = pedido;\n        $(\'#modalEstadoPedido\').modal(\'show\');\n      },\n      seleccionaFecha(fecha) {\n        if (this.esPortal) {\n          return;\n        }\n\n        this.filtros.fechaCita = moment(fecha).format(\'YYYY-MM-DD\');\n        this.filtros.estado = \'G\';\n        this.buscarPedidos();\n      },\n      actualizarCalendario() {\n        this.calendario.key++;\n      },\n      defineFechaCalendario(fecha) {\n        this.calendario.fecha = fecha;\n      },\n      cambioPeriodo(calendario) {\n        this.calendario.eventos = [];\n\n        const params = {\n          fechaDesde: moment(calendario.displayFirstDate).format(\'YYYY-MM-DD\'),\n          fechaHasta: moment(calendario.displayLastDate).format(\'YYYY-MM-DD\'),\n        }\n\n        this.procesando.calendario = true;\n\n        axios\n          .get(`/api/pedidos-dia`, {params})\n          .then(({data: {data}}) => {\n            let indice = 1;\n            for (let pedido of data) {\n              const evento = {\n                id: indice,\n                startDate: pedido.fecha_cita,\n                endDate: pedido.fecha_cita,\n                title: pedido.cantidad,\n                classes: [\'pedidos\']\n              };\n\n              this.calendario.eventos.push(evento);\n              indice++;\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al cargar pedidos en calendario!\', errores);\n          })\n          .then(() => this.procesando.calendario = false);\n      }\n    },\n    computed: {\n      esPortal() {\n        return this.medico !== undefined || this.cliente !== undefined;\n      },\n      esMedico() {\n        return this.medico !== undefined;\n      },\n      esCliente() {\n        return this.cliente !== undefined;\n      },\n      urlNuevo() {\n        let urlNuevo = \'./pedidos/create\';\n        if (this.esPortal) {\n          urlNuevo += \'/?token=\' + this.token;\n        }\n        return urlNuevo;\n      },\n      categorias() {\n        const cliente = this.clientes.find(c => c.id === this.filtros.clienteId);\n        return cliente ? cliente.subempresas : [];\n      },\n      nombreFiltroCliente() {\n        const cliente = this.clientes.find(c => c.id === this.filtros.clienteId)\n        return cliente ? cliente.nombre : \'\';\n      },\n      nombreFiltroCategoria() {\n        const categoria = this.categorias.find(c => c.id === this.filtros.categoriaId)\n        return categoria ? categoria.nombre : \'\';\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  #filtros {\n    margin-right: 2px;\n  }\n\n  #filtros li {\n    margin-right: 2px;\n    margin-left: 0;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},4529:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"legend[data-v-dcb31686]{position:relative}#contadorExamenes[data-v-dcb31686]{bottom:5px;font-size:.62em;position:absolute;right:0}.pl-0[data-v-dcb31686]{padding-left:0!important}","",{version:3,sources:["webpack://./resources/js/components/clientes/pedidos/show.vue"],names:[],mappings:"AAmWA,wBACA,iBACA,CAEA,mCAEA,UAAA,CAEA,eAAA,CAHA,iBAAA,CAEA,OAEA,CAEA,uBACA,wBACA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"/>\n    <form method="POST">\n\n      <navbar v-if="!esPortal">\n        <template #titulo>\n          Pedido No. <strong>{{ registro.id }}</strong>\n        </template>\n        <template #opciones>\n          <ul class="nav navbar-nav">\n            <li>\n              <div>\n                <a class="btn btn-default" @click="navegarAPedidos">Regresar</a>\n              </div>\n            </li>\n          </ul>\n        </template>\n      </navbar>\n\n      <div v-else\n           style="display: flex; justify-content: flex-start; align-items: center; gap: 5px; margin-bottom: 10px">\n        Pedido No. <strong>{{ registro.id }}</strong>\n        <a class="btn btn-default" @click="navegarAPedidos">Regresar</a>\n      </div>\n\n      <fieldset disabled>\n        <legend class="legend">Datos generales</legend>\n        <div class="row">\n          <div class="col-sm-12 form-group">\n            <label class="control-label" for="paciente_nombre">\n              Datos del Paciente\n            </label>\n            <div id="paciente_nombre" v-show="registro.paciente">\n              <i class="fas fa-user fa-lg" v-show="esHumano"></i>\n              <i class="fas fa-paw fa-lg" v-show="esAnimal"></i>\n              <i class="fas fa-flask fa-lg" v-show="esObjeto"></i>\n\n              <span class="paciente">{{ registro.paciente ? registro.paciente.nombre_paciente : \'\' }}</span>\n              &nbsp;\n              <i class="far fa-id-card fa-lg"/>\n              <span v-show="id !== \'0\'">{{ registro.paciente ? registro.paciente.numero_identificacion : \'\' }}</span>\n              <span\n                v-if="registro.paciente_type === \'App\\\\Models\\\\PacienteHumano\' || registro.paciente_type === \'App\\\\Models\\\\PacienteAnimal\'">\n                &nbsp;\n                <i class="fas fa-birthday-cake fa-lg"/>\n                {{ registro.paciente ? registro.paciente.fecha_nacimiento : \'\' }} ({{\n                  registro.paciente ?\n                    obtenerEdad(registro.paciente.fecha_nacimiento) : \'\'\n                }})\n              </span>\n              <span\n                v-if="registro.paciente_type === \'App\\\\Models\\\\PacienteHumano\' || registro.paciente_type === \'App\\\\Models\\\\PacienteAnimal\'">\n                &nbsp;\n                <i class="fas fa-mars fa-lg" v-show="registro.paciente && registro.paciente.sexo === \'M\'"/>\n                <i class="fas fa-venus fa-lg" v-show="registro.paciente && registro.paciente.sexo === \'F\'"/>\n                {{ registro.paciente && registro.paciente.sexo === \'M\' ? \'Masculino\' : \'Femenino\' }}\n              </span>\n              <span\n                v-if="registro.paciente_type === \'App\\\\Models\\\\PacienteHumano\' || registro.paciente_type === \'App\\\\Models\\\\PacienteAnimal\'">\n                &nbsp;\n                <i class="fas fa-check fa-lg" v-show="registro.embarazada"/>\n                {{ registro.embarazada ? \'Embarazada\' : \'\' }}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div class="row">\n          <div class="col-sm-1 form-group">\n            <label class="control-label">Estado</label>\n            <div>\n              <pedido-estado :estado="registro.estado"/>\n            </div>\n          </div>\n          <div class="col-sm-2 form-group">\n            <label for="sucursal" class="control-label">Sucursal</label>\n            <div id="sucursal">{{ registro.sucursal_id ? registro.sucursal.nombre : \'-\' }}</div>\n          </div>\n\n          <div class="col-sm-3 form-group">\n            <label for="medico" class="control-label">Médico</label>\n            <div id="medico">{{ registro.medico_id ? registro.medico.nombre_completo : \'-\' }}</div>\n          </div>\n\n          <div class="col-sm-2 form-group">\n            <label for="fecha_cita" class="control-label">Fecha de Cita</label>\n            <div id="fecha_cita">{{ registro.fecha_cita }}</div>\n          </div>\n\n          <div class="col-sm-2 form-group">\n            <label for="medico" class="control-label">Orden No.</label>\n            <div v-if="registro.orden && !esPortal">\n              <a\n                :href="\'/ordenes/\'+registro.orden.id+\'/edit\'">{{\n                  registro.orden ? registro.orden.numero_orden : \'\'\n                }}</a>\n            </div>\n            <div v-if="registro.orden && esPortal">\n              {{ registro.orden ? registro.orden.numero_orden : \'\' }}\n            </div>\n            <div v-if="!registro.orden">-</div>\n          </div>\n\n          <div class="col-sm-2 form-group" v-show="registro.numero_pedido_externo">\n            <label class="control-label">Referencia</label>\n            <i class="fas fa-info-circle" title="Otros sistemas pueden depender de esta referencia"\n               data-toggle="tooltip"/>\n            <div>{{ registro.numero_pedido_externo }}</div>\n          </div>\n\n        </div>\n        <div class="row">\n          <div class="col-sm-4 form-group">\n            <label for="diagnostico" class="control-label">Diagnóstico</label>\n            <div id="diagnostico">{{ registro.diagnostico_id ? registro.diagnostico.concepto : \'-\' }}\n            </div>\n          </div>\n          <div class="col-md-6 form-group">\n            <label for="comentario" class="control-label">Comentario</label>\n            <div id="comentario">{{ registro.comentario ? registro.comentario : \'-\' }}</div>\n          </div>\n          <div class="col-md-2 form-group">\n            <label class="control-label">Fecha creación</label>\n            <div>{{ registro.created_at | fecha }}</div>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset disabled v-if="registro.estado === \'N\'">\n        <legend class="legend">Datos de anulación</legend>\n        <div class="form-group">\n          <div class="col-sm-3" v-if="registro.usuario_anula">\n            <label for="usuario_anula" class="control-label">Usuario</label>\n            <div id="usuario_anula">{{ registro.usuario_anula ? registro.usuario_anula.nombre_usuario : \'\' }}\n            </div>\n          </div>\n          <div class="col-sm-4">\n            <label for="fecha_anula" class="control-label">Fecha</label>\n            <div id="fecha_anula">{{ registro.fecha_anula | fecha }}</div>\n          </div>\n          <div class="col-sm-12">\n            <label class="control-label">Motivo</label>\n            <div>{{ registro.motivo_anula }}</div>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset disabled style="margin-top: 10px">\n        <div class="row">\n          <div class="col-md-12">\n            <legend>\n              Exámenes\n              <span id="contadorExamenes" v-show="detallesPedidos.length > 0" class="badge">{{ detallesPedidos.length }}\n                {{ etiquetaSeleccionados }}\n              </span>\n            </legend>\n          </div>\n          <div class="col-md-12">\n            <table class="table table-striped table-bordered table-hover table-condensed">\n              <thead>\n              <tr>\n                <th>Examen</th>\n                <th v-if="esCliente && datos.permisos.mostrarPrecios" class="text-right">Valor</th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr v-if="detallesPedidos.length === 0">\n                <td class="text-center">No existen exámenes seleccionados</td>\n              </tr>\n              <tr v-for="detalle in detallesPedidos">\n                <td class="text-left">{{ detalle.examen_codigo }} - {{ detalle.examen_nombre }}</td>\n                <td v-if="esCliente && datos.permisos.mostrarPrecios" class="text-right">\n                  {{ detalle.valor ? Number(detalle.valor).toFixed(2) : \'Sin tarifa\' }}\n                </td>\n              </tr>\n              </tbody>\n              <tfoot v-if="esCliente && datos.permisos.mostrarPrecios" v-show="detallesPedidos.length > 0">\n              <tr>\n                <td class="control-label text-right" style="font-weight: bold">Total</td>\n                <td class="text-right">{{ total }}</td>\n              </tr>\n              </tfoot>\n            </table>\n          </div>\n        </div>\n      </fieldset>\n    </form>\n    <cargando-modal ref="cargando"/>\n  </div>\n</template>\n\n<script>\n  import PedidoEstado from "../../comunes/PedidoEstado";\n\n  export default {\n    components: {\n      PedidoEstado\n    },\n    props: [\'id\', \'medicoPedido\', \'cliente\', \'datos\', \'token\'],\n    data() {\n      return {\n        cargandoExamenes: false,\n        registro: {},\n        detallesPedidos: []\n      }\n    },\n    created() {\n      this.configurarInterceptorParaPortal();\n    },\n    mounted() {\n      this.cargarDatos();\n    },\n    methods: {\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      alternarCamposFormulario() {\n        $(\'fieldset\').attr(\'disabled\') === \'disabled\' ? $(\'fieldset\').removeAttr(\'disabled\') : $(\'fieldset\').attr(\'disabled\', \'disabled\');\n      },\n      cargarDatos() {\n        this.$refs.cargando.alternar();\n        axios\n          .get(`/api/pedidos/${this.id}`)\n          .then(({data: {data}}) => {\n            this.cargarPedido(data);\n            this.alternarCamposFormulario();\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al cargar pedido!\', errores);\n          })\n          .then(() => this.$refs.cargando.alternar());\n      },\n      cargarPedido(pedido) {\n        this.registro = pedido;\n\n        if (this.esCliente) {\n          if (this.registro.categoria_id && this.registro.categoria) {\n            axios\n              .get(`/api/examenes/tarifas/${this.registro.categoria.tarifa_venta_id}`)\n              .then(({data: {data}}) => {\n                const examenes = data;\n\n                this.detallesPedidos = pedido.detalles_pedidos.map(dp => {\n                  const examen = examenes.find(e => e.id === dp.examen.id);\n                  return {\n                    id: dp.id,\n                    examen_id: dp.examen.id,\n                    examen_codigo: dp.examen.codigo,\n                    examen_nombre: dp.examen.nombre,\n                    valor: examen ? examen.valor : \'\'\n                  }\n                });\n              })\n              .catch(error => {\n                const errores = this.procesarErrorResponse(error);\n                this.mostrarErrores(\'Error al obtener exámenes\', errores);\n              });\n          }\n        } else {\n          this.detallesPedidos = pedido.detalles_pedidos.map(dp => {\n            return {\n              id: dp.id,\n              examen_id: dp.examen.id,\n              examen_codigo: dp.examen.codigo,\n              examen_nombre: dp.examen.nombre,\n            }\n          });\n        }\n      },\n      navegarAPedidos() {\n        let urlPrevio = document.referrer;\n        const dominio = window.location.hostname;\n        if (!urlPrevio.includes(dominio)) {\n          urlPrevio = \'/pedidos\';\n          if (this.esMedico) {\n            urlPrevio = `/consulta-resultados-medicos/pedidos?token=${this.token}`;\n          }\n          if (this.esCliente) {\n            urlPrevio = `/consulta-resultados-empresas/pedidos?token=${this.token}`;\n          }\n        }\n        window.location.href = urlPrevio;\n      },\n      configurarInterceptorParaPortal() {\n        if (this.esPortal) {\n          axios.interceptors.request.use((config) => {\n            if (this.esMedico) {\n              config.url = `/consulta-resultados-medicos${config.url}`;\n            }\n            if (this.esCliente) {\n              config.url = `/consulta-resultados-empresas${config.url}`;\n            }\n            config.params = {...config.params, token: this.token}\n            return config;\n          });\n        }\n      }\n\n    },\n    computed: {\n      etiquetaSeleccionados() {\n        return this.detallesPedidos.length > 1 ? \'seleccionados\' : \'seleccionado\';\n      },\n      esPortal() {\n        return this.medicoPedido !== undefined || this.cliente !== undefined;\n      },\n      esMedico() {\n        return this.medicoPedido !== undefined;\n      },\n      esCliente() {\n        return this.cliente !== undefined;\n      },\n      total() {\n        let total = \'\';\n        const existeSinTarifa = this.detallesPedidos.find(dp => dp.valor === \'\');\n        if (existeSinTarifa) {\n          total = \'-\';\n        } else {\n          total = this.detallesPedidos.reduce((total, dp) => total + Number(dp.valor), 0);\n          total = total.toFixed(2);\n        }\n        return total;\n      },\n      esHumano() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\PacienteHumano\';\n      },\n      esAnimal() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\PacienteAnimal\';\n      },\n      esObjeto() {\n        return this.registro.paciente_type === \'App\\\\Models\\\\SujetoObjeto\';\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n\n  legend {\n    position: relative;\n  }\n\n  #contadorExamenes {\n    position: absolute;\n    bottom: 5px;\n    right: 0;\n    font-size: .62em;\n  }\n\n  .pl-0 {\n    padding-left: 0 !important;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},4138:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"abbr[data-v-403bae1e]{cursor:default}table[data-v-403bae1e]{position:relative}th[data-v-403bae1e]{background-color:#fff;position:-webkit-sticky!important;position:sticky!important;top:50px}@media (max-width:767px){th[data-v-403bae1e]{top:0}}","",{version:3,sources:["webpack://./resources/js/components/clientes/plantillas/Homologaciones.vue"],names:[],mappings:"AAiPA,sBACA,cACA,CAEA,uBACA,iBACA,CAEA,oBACA,qBAAA,CACA,iCAAA,CAAA,yBAAA,CACA,QACA,CAEA,yBACA,oBACA,KACA,CACA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"></alerta>\n\n    <navbar>\n      <template #titulo>\n        Homologaciones\n      </template>\n      <template #opciones>\n        <ul class="nav navbar-nav">\n          <li>\n            <a href="javascript:history.back()" class="btn btn-default">Regresar</a>\n          </li>\n        </ul>\n      </template>\n    </navbar>\n\n    <table class="table table-striped table-bordered table-hover table-condensed" style="width: auto">\n      <thead>\n      <tr class="bg-info">\n        <th style="width: 100px">Parámetros</th>\n        <th v-if="$usuario.nombreUsuario === \'master\'" class="text-center" style="width: 200px">\n          <span style="padding-right: 5px">Código</span>\n          <button\n            type="button"\n            class="btn btn-default btn-xs"\n            title="Editar códigos"\n            @click="idColumnaEditable = \'codigos\'"\n            v-show="idColumnaEditable !== \'codigos\'"\n            :disabled="idColumnaEditable !== 0"\n          >\n            <i class="fas fa-edit fa-fw"/>\n          </button>\n          <button\n            type="button"\n            class="btn btn-primary btn-xs"\n            title="Guardar códigos"\n            @click="guardarCodigos"\n            v-show="idColumnaEditable === \'codigos\'"\n            :disabled="guardando"\n          >\n            <i v-if="guardando" class="fas fa-spinner fa-spin fa-fw"/>\n            <i v-else class="fas fa-save fa-fw"/>\n          </button>\n          <button\n            type="button"\n            class="btn btn-default btn-xs"\n            title="Cancelar edición"\n            @click="cancelarEdicion"\n            v-show="idColumnaEditable === \'codigos\'"\n            :disabled="guardando"\n          >\n            <i class="fas fa-times fa-fw"/>\n          </button>\n        </th>\n        <th v-for="sistemaExterno in sistemasExternos" class="text-center" style="width: 200px">\n          <span style="padding-right: 5px">{{ sistemaExterno.nombre }}</span>\n          <button\n            type="button"\n            class="btn btn-default btn-xs"\n            title="Editar columna"\n            @click="idColumnaEditable = sistemaExterno.id"\n            v-show="idColumnaEditable !== sistemaExterno.id"\n            :disabled="idColumnaEditable !== 0 || codigoEditable"\n          >\n            <i class="fas fa-edit fa-fw"/>\n          </button>\n          <button\n            type="button"\n            class="btn btn-primary btn-xs"\n            title="Guardar columna"\n            @click="guardar"\n            v-show="idColumnaEditable === sistemaExterno.id"\n            :disabled="guardando"\n          >\n            <i v-if="guardando" class="fas fa-spinner fa-spin fa-fw"/>\n            <i v-else class="fas fa-save fa-fw"/>\n          </button>\n          <button\n            type="button"\n            class="btn btn-default btn-xs"\n            title="Cancelar edición"\n            @click="cancelarEdicion"\n            v-show="idColumnaEditable === sistemaExterno.id"\n            :disabled="guardando"\n          >\n            <i class="fas fa-times fa-fw"/>\n          </button>\n        </th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr v-for="(parametro, indiceParametro) in plantilla.parametros">\n        <td>\n          {{ parametro.nombre }} [<abbr title="Sexo">{{ parametro.sexo }}</abbr>]\n        </td>\n        <td v-if="$usuario.nombreUsuario === \'master\'" class="text-center">\n          <span v-if="idColumnaEditable !== \'codigos\'">\n            {{ codigosParametros[\'codigos\'][parametro.id] }}\n          </span>\n          <input\n            type="text"\n            class="form-control input-xs text-center"\n            maxlength="10"\n            :tabindex="indiceParametro"\n            v-else\n            v-model="codigosParametros[\'codigos\'][parametro.id]"\n            :disabled="guardando"\n          >\n        </td>\n        <td v-for="(sistemaExterno, indiceSistemExterno) in sistemasExternos" class="text-center">\n          <span v-if="idColumnaEditable !== sistemaExterno.id">\n            {{ codigosParametros[sistemaExterno.id][parametro.id] }}\n          </span>\n          <input\n            type="text"\n            class="form-control input-xs text-center"\n            maxlength="15"\n            :tabindex="indiceParametro + (indiceSistemExterno * plantilla.parametros.length) + 100"\n            v-else\n            v-model="codigosParametros[sistemaExterno.id][parametro.id]"\n            :disabled="guardando"\n          >\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        codigosParametros: {},\n        guardando: false,\n        idColumnaEditable: 0,\n        codigoEditable: false\n      }\n    },\n    props: [\n      \'permisos\', \'plantilla\', \'sistemasExternos\'\n    ],\n    created() {\n      this.mapearCodigos()\n    },\n    methods: {\n      cancelarEdicion() {\n        this.mapearCodigos();\n        this.idColumnaEditable = 0;\n      },\n      guardar() {\n        const parametros = Object\n          .keys(this.codigosParametros[this.idColumnaEditable])\n          .map(parametroId => {\n            return {\n              id: Number(parametroId),\n              codigo_parametro: this.codigosParametros[this.idColumnaEditable][parametroId]\n            }\n          });\n        this.guardando = true;\n\n        axios\n          .patch(`/api/sistemas-externos/${this.idColumnaEditable}/homologaciones-parametros`, {parametros})\n          .then(_ => {\n            this.idColumnaEditable = 0;\n            this.$refs.alerta.mostrarAlerta(\'success\', \'Homologaciones guardadas\');\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.$refs.alerta.mostrarAlerta(\'danger\', \'Error al guardar\', errores);\n          })\n          .then(_ => this.guardando = false);\n      },\n      guardarCodigos() {\n        const parametros = Object\n          .keys(this.codigosParametros[\'codigos\'])\n          .map(parametroId => {\n            return {\n              id: Number(parametroId),\n              codigo: this.codigosParametros[\'codigos\'][parametroId]\n            }\n          });\n        this.guardando = true;\n\n        axios\n          .patch(`/api/examenes/${this.plantilla.examen_id}/plantillas/${this.plantilla.id}/codigos`, {parametros})\n          .then(_ => {\n            this.idColumnaEditable = 0;\n            this.$refs.alerta.mostrarAlerta(\'success\', \'Códigos guardados\');\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.$refs.alerta.mostrarAlerta(\'danger\', \'Error al guardar\', errores);\n          })\n          .then(_ => this.guardando = false);\n      },\n      mapearCodigos() {\n        this.codigosParametros[\'codigos\'] = {};\n        this.plantilla.parametros.forEach(parametro => {\n          this.codigosParametros[\'codigos\'][parametro.id] = parametro.codigo;\n        });\n\n        this.sistemasExternos.forEach(sistemaExterno => {\n          this.codigosParametros[sistemaExterno.id] = {};\n\n          this.plantilla.parametros.forEach(parametro => {\n            const parametroSistemaExterno = parametro.sistemas_externos.find(se => se.id === sistemaExterno.id);\n\n            this.codigosParametros[sistemaExterno.id][parametro.id] = parametroSistemaExterno ? parametroSistemaExterno.pivot.codigo_parametro : \'\'\n          })\n        });\n      }\n    },\n    computed: {},\n    watch: {}\n  }\n<\/script>\n\n<style scoped>\n  abbr {\n    cursor: default;\n  }\n\n  table {\n    position: relative;\n  }\n\n  th {\n    background-color: white;\n    position: sticky !important;\n    top: 50px;\n  }\n\n  @media (max-width: 767px) {\n    th {\n      top: 0;\n    }\n  }\n</style>\n'],sourceRoot:""}]);const n=s},8147:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,'.panel-heading a[data-v-7b5ab49a]:after{content:""}',"",{version:3,sources:["webpack://./resources/js/components/clientes/reportes/PacienteOrden.vue"],names:[],mappings:"AA8VA,wCACA,UACA",sourcesContent:['<template>\n  <div class="row">\n    <div class="col-md-12">\n      <div class="panel panel-gris">\n        <div class="panel-heading sticky-top">\n          <template v-if="!orden.numero_orden">\n            Paciente\n          </template>\n          <datos-orden\n            :mostrar-numero-orden="true"\n            :mostrar-numero-orden-externa="configuracion.mostrarOrdenExterna"\n            :mostrar-fecha-orden="true"\n            :mostrar-fecha-nacimiento="false"\n            :mostrar-sexo="true"\n            :mostrar-edad="true"\n            :mostrar-poliza="false"\n            :mostrar-telefono="false"\n            :mostrar-correo="false"\n            :mostrar-direccion="false"\n            :mostrar-historia-clinica="true"\n            :mostrar-saldo="orden && orden.subempresa && orden.subempresa.empresa && orden.subempresa.empresa.mostrar_valores_orden_en_reportes"\n            :orden="orden"\n          />\n          &nbsp;\n          <a\n            v-if="orden.numero_orden"\n            class="puntero"\n            title="Ver entregas por correo electrónico"\n            rel="tooltip"\n            @click="abrirModalVerEntregas">\n            <i\n              class="fas fa-envelope text-gris">\n            </i>\n          </a>\n          &nbsp;\n          <a\n            v-if="orden.numero_orden"\n            class="puntero"\n            title="Ver impresiones"\n            rel="tooltip"\n            @click="abrirModalGestionarImpresion(orden)">\n            <i class="fas fa-print text-gris">\n            </i>\n          </a>\n        </div>\n        <div class="panel-body" v-if="existeOrden">\n          <div class="row">\n            <div class="col-md-2 form-group">\n              <label>Sucursal</label>\n              <p>{{ sucursal }}</p>\n            </div>\n            <div class="col-md-2 form-group" v-if="$can(\'ver-cliente-reportes\')">\n              <label>Cliente</label>\n              <p>\n                {{ nombreCliente }}\n              </p>\n            </div>\n            <div class="col-md-2 form-group">\n              <label>Tipo atención</label>\n              <p>{{ nombreTipoAtencion }}</p>\n            </div>\n            <div class="col-md-2 form-group">\n              <label>Servicio</label>\n              <p>{{ nombreSala }}</p>\n            </div>\n            <div class="col-md-2 form-group">\n              <label>Plan salud</label>\n              <p>{{ nombrePlanSalud }}</p>\n            </div>\n            <div class="col-md-2 form-group">\n              <label>Médico</label>\n              <p>{{ nombreMedico }}</p>\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-md-2 form-group" v-if="orden.embarazada">\n              <label>Embarazada</label>\n              <p class="no-salto-linea">{{ embarazada }}</p>\n            </div>\n            <div class="col-md-2 form-group" v-if="orden.fecha_ultima_menstruacion">\n              <label>F.U.M.</label>\n              <p class="no-salto-linea">{{ orden.fecha_ultima_menstruacion }}</p>\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-md-3 form-group" v-if="esHumano">\n              <label>Datos clínicos</label>\n              <textarea\n                class="form-control resize-vertical"\n                rows="2" disabled>{{ paciente.datos_clinicos }}</textarea>\n            </div>\n            <div class="col-md-3 form-group">\n              <label>Diagnóstico</label>\n              <textarea\n                class="form-control resize-vertical"\n                rows="2"\n                disabled\n                :value="orden.diagnostico ? `${orden.diagnostico.codigo} - ${orden.diagnostico.concepto}` : \'\'"\n              >\n              </textarea>\n            </div>\n            <div class="col-md-3 form-group">\n              <label>Observaciones recibo</label>\n              <button\n                type="button"\n                @click="guardarObservacionesRecibo"\n                class="btn btn-xs btn-default"\n                :disabled="!existeOrden"\n                title="Guardar Observación">\n                <i class="fas fa-save"></i>\n              </button>\n              <textarea\n                class="form-control resize-vertical"\n                rows="2"\n                v-model="orden.observaciones_orden">\n                </textarea>\n            </div>\n            <div class="col-md-3 form-group">\n              <label>Observaciones laboratorista</label>\n              <button\n                type="button"\n                @click="guardarObservacionesLaboratorista"\n                class="btn btn-xs btn-default"\n                title="Guardar Observación"\n                :disabled="!existeOrden">\n                <i class="fas fa-save"></i>\n              </button>\n              <textarea\n                class="form-control resize-vertical"\n                rows="2"\n                v-model="orden.observaciones_hoja_trabajo">\n                </textarea>\n            </div>\n          </div>\n        </div>\n        <div class="panel-body" v-else>\n          Por favor seleccione una orden\n        </div>\n      </div>\n    </div>\n    <ver-entregas-modal/>\n\n    <gestionar-impresion-modal @impresion-registrada="impresionRegistrada"/>\n\n  </div>\n</template>\n\n<script>\n  import DatosOrden from "../../comunes/DatosOrden";\n  import VerEntregasModal from "../../comunes/VerEntregasModal";\n  import {crearBotonConData} from "../../../support/util";\n  import GestionarImpresionModal from "../modals/GestionarImpresionModal";\n\n  export default {\n    components: {\n      DatosOrden,\n      VerEntregasModal,\n      GestionarImpresionModal\n    },\n    props: [\n      \'configuracion\',\n      \'orden\',\n    ],\n    methods: {\n      cambiarEstadoBoton(boton, icono) {\n        if (boton.classList.contains(\'disabled\')) {\n          boton.classList.remove(\'disabled\');\n          icono.classList.add(\'fa-save\');\n          icono.classList.remove(\'fa-spinner\', \'fa-spin\');\n        } else {\n          boton.classList.add(\'disabled\');\n          icono.classList.remove(\'fa-save\');\n          icono.classList.add(\'fa-spinner\', \'fa-spin\');\n        }\n      },\n      guardarObservacionesRecibo(event) {\n        let icono = null;\n        let boton = null;\n\n        if (event.target.localName === \'i\') {\n          boton = event.target.parentNode;\n          icono = event.target;\n        }\n\n        if (event.target.localName === \'button\') {\n          boton = event.target;\n          icono = event.target.childNodes[0];\n        }\n\n        this.cambiarEstadoBoton(boton, icono);\n\n        const registro = {\n          observaciones: this.orden.observaciones_orden\n        }\n        this.guardarObservaciones(\'recibo\', registro, boton, icono);\n      },\n      guardarObservacionesLaboratorista(event) {\n        let icono = null;\n        let boton = null;\n\n        if (event.target.localName === \'i\') {\n          boton = event.target.parentNode;\n          icono = event.target;\n        }\n\n        if (event.target.localName === \'button\') {\n          boton = event.target;\n          icono = event.target.childNodes[0];\n        }\n\n        this.cambiarEstadoBoton(boton, icono);\n\n        const registro = {\n          observaciones: this.orden.observaciones_hoja_trabajo\n        }\n        this.guardarObservaciones(\'laboratorista\', registro, boton, icono);\n      },\n      guardarObservaciones(observacion, registro, boton, icono) {\n        axios\n          .patch(`/api/ordenes/${this.orden.id}/observaciones/${observacion}`, registro)\n          .then(() => this.$emit(\'exito\', \'Observación guardada\'))\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            console.error(errores);\n            this.$emit(\'error\', \'Error al actualizar observación\')\n          })\n          .then(() => this.cambiarEstadoBoton(boton, icono));\n      },\n      abrirModalVerEntregas() {\n        const boton = crearBotonConData({\'forma\': \'CORREO\', \'orden\': this.orden});\n        $(\'#modalVerEntregas\').modal({backdrop: \'static\'}, boton);\n      },\n      abrirModalGestionarImpresion(orden) {\n        const boton = crearBotonConData({\'forma\': \'CORREO\', \'orden\': orden});\n        $(\'#modalGestionarImpresion\').modal({backdrop: \'static\'}, boton);\n      },\n      impresionRegistrada(idOrden) {\n        this.$emit(\'exito\', \'Impresión de orden registrada\')\n      }\n    },\n    computed: {\n      empresa() {\n        return !_.isEmpty(this.subempresa) ? this.subempresa.empresa : {};\n      },\n      esHumano() {\n        return !_.isEmpty(this.orden) ? this.orden.es_humano : true;\n      },\n      esAnimal() {\n        return !_.isEmpty(this.orden) ? this.orden.es_animal : true;\n      },\n      esObjeto() {\n        return !_.isEmpty(this.orden) ? this.orden.es_objeto : true;\n      },\n      nombreCliente() {\n        if (_.isEmpty(this.subempresa)) {\n          return \'-\';\n        }\n\n        return this.empresa.nombre + (this.empresa.nombre !== this.subempresa.nombre ? \'(\' + this.subempresa.nombre + \')\' : \'\');\n      },\n      nombreSala() {\n        if (_.isEmpty(this.sala)) {\n          return \'-\';\n        }\n\n        return this.sala.nombre;\n      },\n      nombreTipoAtencion() {\n        if (_.isEmpty(this.tipoAtencion)) {\n          return \'-\';\n        }\n\n        return this.tipoAtencion.nombre;\n      },\n      nombrePlanSalud() {\n        if (_.isEmpty(this.planSalud)) {\n          return \'-\';\n        }\n\n        return this.planSalud.nombre;\n      },\n      nombreMedico() {\n        if (_.isEmpty(this.medico)) {\n          return \'-\';\n        }\n\n        return this.medico.nombre_completo;\n      },\n      embarazada() {\n        if (!this.orden.embarazada) {\n          return \'No\';\n        }\n\n        if (this.orden.semanas_gestacion === 1) {\n          return this.orden.semanas_gestacion + \' semana\';\n        }\n\n        if (this.orden.semanas_gestacion > 1) {\n          return this.orden.semanas_gestacion + \' semanas\';\n        }\n\n        return \'Si\';\n      },\n      paciente() {\n        return !_.isEmpty(this.orden) ? this.orden.paciente : {};\n      },\n      sala() {\n        return !_.isEmpty(this.orden) ? this.orden.sala : {};\n      },\n      tipoAtencion() {\n        return !_.isEmpty(this.orden) ? this.orden.tipo_atencion : {};\n      },\n      planSalud() {\n        return !_.isEmpty(this.orden) ? this.orden.plan_salud : {};\n      },\n      medico() {\n        return !_.isEmpty(this.orden) ? this.orden.medico : {};\n      },\n      sexoPaciente() {\n        if (_.isEmpty(this.paciente)) {\n          return \'\';\n        }\n\n        if (this.paciente.sexo && (this.esHumano || this.esObjeto)) {\n          return this.paciente.sexo === \'M\' ? \'Masculino\' : \'Femenino\';\n        }\n        if (this.esAnimal) {\n          return this.paciente.sexo === \'M\' ? \'Macho\' : \'Hembra\';\n        }\n        return \'\';\n      },\n      subempresa() {\n        return !_.isEmpty(this.orden) ? this.orden.subempresa : {};\n      },\n      existeOrden() {\n        return !_.isEmpty(this.orden);\n      },\n      sucursal() {\n        return this.orden.sucursal.nombre;\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  .panel-heading a:after {\n    content: \'\';\n  }\n</style>\n'],sourceRoot:""}]);const n=s},6580:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"textarea[data-v-41a342c9]{max-height:100px;resize:vertical}table>tbody>tr>td[data-v-41a342c9]{vertical-align:middle}.cargando[data-v-41a342c9]{font-size:18px;text-align:center}.seleccionada[data-v-41a342c9]{background-color:#fcf8e3;font-weight:500}.seleccionada td[data-v-41a342c9]{border-left:6px solid #2e6da4!important;box-sizing:content-box}@media screen{.scroll-vertical[data-v-41a342c9]{height:90vh;overflow-y:scroll;padding-bottom:5px}}@media (max-width:1200px){.scroll-vertical[data-v-41a342c9]{height:85vh;overflow-y:scroll;padding-bottom:5px}}","",{version:3,sources:["webpack://./resources/js/components/clientes/reportes/formulario.vue"],names:[],mappings:"AA25DA,0BAEA,gBAAA,CADA,eAEA,CAEA,mCACA,qBACA,CAEA,2BACA,cAAA,CACA,iBACA,CAEA,+BACA,wBAAA,CACA,eACA,CAEA,kCACA,uCAAA,CACA,sBACA,CAEA,cACA,kCAEA,WAAA,CADA,iBAAA,CAEA,kBACA,CACA,CAEA,0BACA,kCAEA,WAAA,CADA,iBAAA,CAEA,kBACA,CACA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta" :top="20"></alerta>\n\n    <navbar>\n      <template #titulo>\n        Resultados y validación\n      </template>\n      <template #opciones>\n        <ul class="nav navbar-nav">\n          <li v-show="datos.permisos.imprimir">\n            <button\n              :disabled="!existenExamenesParaImprimir"\n              type="button"\n              class="btn btn-default"\n              @click="abrirModalImprimir">\n              <i class="fas fa-print fa-fw"></i>\n              &nbsp;Imprimir\n            </button>\n          </li>\n          <li>\n            <button\n              :disabled="!existenExamenesParaImprimir || cargandoOrdenes"\n              id="verResultados"\n              type="button"\n              class="btn btn-default"\n              @click="abrirModalResultados">\n              <i class="fas fa-eye fa-fw"></i>&nbsp;\n              Ver\n            </button>\n          </li>\n          <li v-show="datos.permisos.imprimir">\n            <button\n              type="button"\n              class="btn btn-default"\n              @click="abrirEnviarCorreo"\n              :disabled="!(ordenSeleccionada && existenExamenesParaCorreo)"\n              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n              <i class="far fa-envelope fa-fw"></i>&nbsp;Enviar correo\n            </button>\n          </li>\n          <li v-show="datos.permisos.imprimir">\n            <button\n              :disabled="cargandoOrdenes"\n              type="button"\n              class="btn btn-default"\n              @click="abrirModalBuscarDocumentos">\n              <i class="fas fa-file fa-fw"></i>\n            </button>\n          </li>\n          <li>\n            <button\n              v-if="ordenSeleccionada"\n              type="button"\n              class="btn btn-default"\n              data-toggle="modal"\n              data-target="#verAuditoriasModal">\n              <i class="fas fa-fingerprint"></i>\n              Auditoría\n            </button>\n          </li>\n          <li>\n            <a @click="regresar" class="btn btn-default" v-show="urlPrevio" title="Regresar">\n              <i class="fas fa-arrow-left"></i>\n            </a>\n          </li>\n        </ul>\n      </template>\n    </navbar>\n\n    <div class="row">\n      \x3c!-- Inicio columna izquierda --\x3e\n      <div class="col-md-3 scroll-vertical">\n        \x3c!-- Inicio búsqueda --\x3e\n        <div class="row">\n          <div class="col-md-12">\n            <div class="panel panel-oscuro">\n              <div class="panel-heading">Búsqueda</div>\n              <div class="panel-body">\n                <form @submit.prevent="buscarOrdenes">\n                  \x3c!--Número de orden--\x3e\n                  <div class="row">\n                    <div class="col-md-12">\n                      <input type="text" class="form-control input-sm" id="numeroOrden"\n                             v-model="numeroOrden"\n                             placeholder="Número de orden">\n                    </div>\n                  </div>\n                  \x3c!--Paciente--\x3e\n                  <div class="row" style="padding-top: 10px">\n                    <div class="col-md-12">\n                      <input type="text" class="form-control input-sm" id="pacienteOrden"\n                             v-model="pacienteBusqueda"\n                             placeholder="Nombre o Identificación del paciente">\n                    </div>\n                  </div>\n                  \x3c!--Filtros--\x3e\n                  <div class="row" style="padding-top: 10px">\n                    <div class="col-md-12">\n                      <div class="panel-group" id="accordion" role="tablist"\n                           aria-multiselectable="true" style="margin-bottom: 10px">\n                        <div class="panel panel-default">\n                          <div class="panel-heading collapsed" role="tab" id="headingOne"\n                               data-toggle="collapse" data-target="#collapseOne"\n                               style="padding: 6px 15px">\n                            <h4 class="panel-title" style="font-size: 14px;">\n                              <a class="collapsed" role="button"\n                                 style="display: flex; justify-content: space-between"\n                                 href="#"\n                                 aria-expanded="false" aria-controls="collapseOne">\n                                <span>Filtros</span>\n                              </a>\n                            </h4>\n                          </div>\n                          <div id="collapseOne" class="panel-collapse collapse"\n                               role="tabpanel"\n                               aria-labelledby="headingOne">\n                            <div class="panel-body">\n                              <div class="row">\n                                <div class="col-md-6">\n                                  <label for="fecha_desde">Fecha desde</label>\n                                  <input\n                                    id="fecha_desde"\n                                    class="form-control input-sm cursor-menu"\n                                    data-provide="datepicker"\n                                    data-date-format="yyyy-mm-dd"\n                                    data-date-today-highlight="true"\n                                    data-date-autoclose="true"\n                                    data-date-language="es"\n                                    data-date-orientation="bottom"\n                                    data-date-clear-btn="true"\n                                    data-date-today-btn="linked"\n                                    placeholder="aaaa-mm-dd"\n                                    v-date="fechaDesde"\n                                    readonly>\n                                </div>\n                                <div class="col-md-6">\n                                  <label for="fecha_hasta">Fecha hasta</label>\n                                  <input\n                                    id="fecha_hasta"\n                                    class="form-control input-sm cursor-menu"\n                                    data-provide="datepicker"\n                                    data-date-format="yyyy-mm-dd"\n                                    data-date-today-highlight="true"\n                                    data-date-autoclose="true"\n                                    data-date-language="es"\n                                    data-date-orientation="bottom"\n                                    data-date-clear-btn="true"\n                                    data-date-today-btn="linked"\n                                    placeholder="aaaa-mm-dd"\n                                    v-date="fechaHasta"\n                                    readonly>\n                                </div>\n                              </div>\n                              <div class="row" style="padding-top: 10px">\n                                <div class="col-md-12">\n                                  <label for="seccion_id">Sección</label>\n                                  <v-select\n                                    id="seccion_id"\n                                    class="form-control input-sm"\n                                    placeholder="Todas"\n                                    v-model="seccionId"\n                                    :options="datos.secciones"\n                                    label="nombre"\n                                    :reduce="opcion => opcion.id">\n                                    <template #no-options>No existen coincidencias</template>\n                                  </v-select>\n                                </div>\n                              </div>\n                              <div class="row" style="padding-top: 10px">\n                                <div class="col-md-6">\n                                  <label for="sucursal_id">Sucursal</label>\n                                  <select class="form-control input-sm"\n                                          id="sucursal_id"\n                                          v-model="sucursalId">\n                                    <option value="">Todas</option>\n                                    <option v-for="sucursal in datos.sucursales"\n                                            :value="sucursal.id">\n                                      {{ sucursal.nombre }}\n                                    </option>\n                                  </select>\n                                </div>\n                                <div class="col-md-6">\n                                  <label for="estado">Estado</label>\n                                  <select class="form-control input-sm"\n                                          id="estado"\n                                          v-model="estado">\n                                    <option value="">Todos</option>\n                                    <option v-for="estado in estados"\n                                            :value="estado.id">\n                                      {{ estado.nombre }}\n                                    </option>\n                                  </select>\n                                </div>\n                              </div>\n                              <div class="row" style="padding-top: 10px">\n                                <div class="col-md-6">\n                                  <label for="empresa_id">Cliente</label>\n                                  <select class="form-control input-sm"\n                                          id="empresa_id"\n                                          v-model="empresaId">\n                                    <option value="">Todas</option>\n                                    <option v-for="empresa in datos.empresas"\n                                            :value="empresa.id">\n                                      {{ empresa.nombre }}\n                                    </option>\n                                  </select>\n                                </div>\n                                <div class="col-md-6">\n                                  <label for="tipo_atencion_id">Tipo atención</label>\n                                  <select class="form-control input-sm"\n                                          id="tipo_atencion_id"\n                                          v-model="tipoAtencionId">\n                                    <option value="">Todos</option>\n                                    <option v-for="tipoAtencion in datos.tiposAtencion"\n                                            :value="tipoAtencion.id">\n                                      {{ tipoAtencion.nombre }}\n                                    </option>\n                                  </select>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \x3c!--Botón de buscar--\x3e\n                  <div class="row">\n                    <div class="col-md-12">\n                      <button type="submit" class="btn btn-sm btn-primary">\n                        <i class="fas fa-search fa-fw" aria-hidden="true"></i>Buscar\n                      </button>\n                      <button type="button" class="btn btn-sm btn-default" @click="borrarFiltros">\n                        Borrar filtros\n                      </button>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n        \x3c!-- Fin búsqueda --\x3e\n        \x3c!-- Inicio órdenes --\x3e\n        <div class="row">\n          <div class="col-md-12">\n            <div class="panel panel-oscuro">\n              <div class="panel-heading">Órdenes</div>\n              <div class="table-responsive" v-if="ordenes.length > 0">\n                <table class="table table-hover table-condensed" style="overflow: hidden">\n                  <tbody>\n                  <tr\n                    class="cursor-menu"\n                    v-for="orden in ordenes"\n                    :class="{ seleccionada: orden.id === (ordenSeleccionada ? ordenSeleccionada.id : null) }"\n                    @click="seleccionarOrden(orden)"\n                  >\n                    <td class="text-truncate">\n                      <div class="estado-orden-no-auto"\n                           style="display: flex; justify-content: space-between; align-items: center">\n                        <div style="display: flex; align-items: center">\n                          <small class="text-muted" :title="orden.numero_orden">{{ orden.numero_orden }}</small>\n                          <i\n                            v-if="orden.tipo_atencion && orden.tipo_atencion.urgente"\n                            class="fas fa-exclamation-triangle text-danger"\n                            style="padding-left: 10px"\n                            title="Orden urgente"\n                          ></i>\n                        </div>\n                        <orden-estado :estado="orden.estado"></orden-estado>\n                      </div>\n                      <div :title="nombrePacienteOrden(orden)">\n                        {{ nombrePacienteOrden(orden) }}\n                      </div>\n                    </td>\n                  </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div class="panel-body" v-if="ordenes.length === 0 && !cargandoOrdenes">\n                No existen órdenes con los filtros especificados\n              </div>\n              <div class="panel-body" v-if="cargandoOrdenes">\n                <div class="cargando">\n                  <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>Cargando...\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \x3c!-- Fin órdenes --\x3e\n      </div>\n      \x3c!-- Fin columna izquierda --\x3e\n      \x3c!-- Inicio columna derecha --\x3e\n      <div class="col-md-9 scroll-vertical">\n        \x3c!-- Inicio paciente --\x3e\n        <div class="row">\n          <div class="col-md-12">\n            <div class="panel panel-gris">\n              <div class="panel-heading">\n                <template v-if="!ordenSeleccionada">\n                  Paciente\n                </template>\n                <datos-orden\n                  v-if="ordenSeleccionada"\n                  :mostrar-numero-orden="false"\n                  :mostrar-numero-orden-externa="datos.mostrarOrdenExterna"\n                  :mostrar-fecha-orden="true"\n                  :mostrar-fecha-nacimiento="false"\n                  :mostrar-sexo="true"\n                  :mostrar-edad="true"\n                  :mostrar-poliza="false"\n                  :mostrar-telefono="false"\n                  :mostrar-correo="false"\n                  :mostrar-direccion="false"\n                  :mostrar-historia-clinica="true"\n                  :mostrar-saldo="ordenSeleccionada && ordenSeleccionada.subempresa && ordenSeleccionada.subempresa.empresa && ordenSeleccionada.subempresa.empresa.mostrar_valores_orden_en_reportes"\n                  :orden="ordenSeleccionada"\n                />\n              </div>\n              <div class="panel-body" v-if="ordenSeleccionada">\n                <div class="row">\n                  <div class="col-md-3 form-group">\n                    <label>Cliente</label>\n                    <p>\n                      {{\n                        subempresa.empresa.nombre + (subempresa.empresa.nombre !== subempresa.nombre ? \' (\' +\n                          subempresa.nombre + \')\' : \'\')\n                      }}\n                    </p>\n                  </div>\n                  <div class="col-md-2 form-group">\n                    <label>Servicio</label>\n                    <p>{{ tipoAtencion ? tipoAtencion.nombre : \'-\' }}</p>\n                  </div>\n                  <div class="col-md-2 form-group">\n                    <label>Servicio</label>\n                    <p>{{ sala ? sala.nombre : \'-\' }}</p>\n                  </div>\n                  <div class="col-md-2 form-group">\n                    <label>Plan Salud</label>\n                    <p>{{ planSalud ? planSalud.nombre : \'-\' }}</p>\n                  </div>\n                  <div class="col-md-2 form-group">\n                    <label>Médico</label>\n                    <p>{{ nombreMedico }}</p>\n                  </div>\n                  <div class="col-md-1 form-group" v-if="ordenSeleccionada.embarazada">\n                    <label>Embarazada</label>\n                    <p class="no-salto-linea">{{ embarazada }}</p>\n                  </div>\n                </div>\n                <div class="row">\n                  <div class="form-group">\n                    <div class="col-md-4" v-if="ordenSeleccionada.es_humano">\n                      <label>Datos clínicos</label>\n                      <textarea class="form-control" rows="2" disabled>{{ paciente.datos_clinicos }}</textarea>\n                    </div>\n                    <div class="col-md-4">\n                      <label>Observaciones recibo</label>\n                      <button\n                        type="button"\n                        @click="guardarObservacionesRecibo"\n                        class="btn btn-xs btn-default"\n                        title="Guardar Observación">\n                        <i class="fas fa-save"></i>\n                      </button>\n                      <textarea class="form-control" rows="2" v-model="ordenSeleccionada.observaciones_orden">\n                      </textarea>\n                    </div>\n                    <div class="col-md-4">\n                      <label>Observaciones laboratorista</label>\n                      <button\n                        type="button"\n                        @click="guardarObservacionesLaboratorista"\n                        class="btn btn-xs btn-default"\n                        title="Guardar Observación">\n                        <i class="fas fa-save"></i>\n                      </button>\n                      <textarea class="form-control" rows="2" v-model="ordenSeleccionada.observaciones_hoja_trabajo">\n                      </textarea>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class="panel-body" v-else>\n                Por favor seleccione una orden\n              </div>\n            </div>\n          </div>\n        </div>\n        \x3c!-- Fin paciente --\x3e\n        \x3c!-- Inicio exámenes y resultados --\x3e\n        <div class="row">\n          \x3c!-- Inicio exámenes --\x3e\n          <div class="col-md-4">\n            <div class="panel panel-gris">\n              <div class="panel-heading" style="display: flex; justify-content: space-between; align-items: center">\n                <div>Exámenes</div>\n                <div>\n                  <button\n                    type="button" class="btn btn-default btn-sm"\n                    title="Valida exámenes reportados"\n                    v-show="datos.permisos.validar && exameneReportados.length > 0"\n                    @click="validarTodosReportes"\n                    :disabled="validandoReporte"\n                  >\n                    <i class="fas fa-spinner fa-spin fa-fw" v-if="validandoReporte"></i>\n                    <i class="fas fa-check fa-fw" v-else></i> Validar Todos\n                  </button>\n                </div>\n              </div>\n              <div class="table-responsive" v-if="ordenSeleccionada">\n                <table class="table table-hover table-condensed">\n                  <tbody>\n                  <tr v-for="detalleOrden in detallesOrdenSeleccionada"\n                      class="cursor-menu"\n                      :class="{ seleccionada : detalleOrden.id === (detalleOrdenSeleccionado ? detalleOrdenSeleccionado.id : null)}"\n                      @click="seleccionarDetalleOrden(detalleOrden)">\n                    <td class="text-truncate">\n                      <div>\n                        <div style="display: flex; justify-content: space-between; align-items: center">\n                          <small class="text-muted">\n                            {{ detalleOrden.examen.codigo }}\n                            <i\n                              class="fas fa-exclamation-triangle text-danger"\n                              title="Muestra pendiente"\n                              v-if="detalleOrden.muestraPendiente"\n                              style="padding-left: 10px"\n                            ></i>\n                          </small>\n                          <detalle-orden-estado :estado="detalleOrden.estado"/>\n                        </div>\n                        <div :title="detalleOrden.examen.nombre">{{ detalleOrden.examen.nombre }}</div>\n                      </div>\n                    </td>\n                  </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div class="panel-body" v-if="!ordenSeleccionada">\n                Por favor seleccione una orden\n              </div>\n              <div class="panel-body"\n                   v-if="ordenSeleccionada && detallesOrdenSeleccionada.length === 0 && !cargandoDetallesOrden">\n                No existen detalles para la orden seleccionada\n              </div>\n              <div class="panel-body" v-if="cargandoDetallesOrden">\n                <div class="cargando">\n                  <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>Cargando...\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- Fin exámenes --\x3e\n          \x3c!-- Inicio resultados --\x3e\n          <div class="col-md-8">\n            <div class="panel panel-gris">\n              <div class="panel-heading">Resultados</div>\n              <form\n                @submit.prevent="guardarReportes"\n                v-if="detalleOrdenSeleccionado && !detalleOrdenSeleccionado.muestraPendiente"\n              >\n                <fieldset :disabled="guardandoReporte || validandoReporte">\n                  <div class="panel-body">\n                    <div style="display: flex; justify-content: space-between; align-items: center">\n                      <div>\n                        <div class="form-inline">\n                          <div class="form-group form-group-sm" style="margin-bottom: 0px">\n                            <label for="plantilla_id">Plantilla</label>\n                            <select class="form-control" id="plantilla_id"\n                                    :disabled="existenCambiosEnReporte()"\n                                    v-model="plantillaId" style="width: 180px">\n                              <option value="">Seleccione...</option>\n                              <option v-for="plantilla in filtrarPlantillas(examenSeleccionado.plantillas)"\n                                      :value="plantilla.id">\n                                {{ plantilla.estado === \'A\' ? plantilla.nombre : plantilla.nombre + \'(Inactiva)\' }}\n                              </option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div>\n                        <button\n                          type="button" class="btn btn-default btn-sm"\n                          v-show="!edicionActivada && plantillaId != \'\' && esPlantillaActiva && [\'L\', \'V\'].indexOf(detalleOrdenSeleccionado.estado) == -1 && datos.permisos.validar"\n                          @click="validarReportes"\n                        >\n                          <i class="fas fa-spinner fa-spin fa-fw" v-if="validandoReporte"></i>\n                          <i class="fas fa-check fa-fw" v-if="!validandoReporte"></i> Validar\n                        </button>\n                        <button\n                          type="button"\n                          :class="\'btn btn-sm btn-default\'"\n                          v-show="((existenReportes() && plantillaId != \'\') || existenCambiosEnReporte()) && puedeEditarReportes && esPlantillaActiva"\n                          @click="editarReporte"\n                        >\n                          <i :class="\'fas fa-fw\' + (edicionActivada ? \' fa-times\' : \' fa-pencil-alt\')"></i>{{\n                            edicionActivada ? \'Cancelar\' : \'Editar\'\n                          }}\n                        </button>\n                        <button\n                          type="button" class="btn btn-danger btn-sm"\n                          v-show="!edicionActivada && plantillaId != \'\' && existenReportes() && puedeEliminarReportes"\n                          @click="eliminarReportes"\n                        >\n                          <i class="fas fa-spinner fa-spin fa-fw" v-if="guardandoReporte"></i>\n                          <i class="fas fa-trash fa-fw" v-else></i> Eliminar\n                        </button>\n                        <button\n                          type="submit"\n                          class="btn btn-primary btn-sm"\n                          v-show="edicionActivada && plantillaId != \'\' && (datos.permisos.crear || datos.permisos.editar) && esPlantillaActiva"\n                        >\n                          <i class="fas fa-spinner fa-spin fa-fw" v-if="guardandoReporte"></i>\n                          <i class="fas fa-save fa-fw" v-if="!guardandoReporte"></i> Guardar\n                        </button>\n                      </div>\n                    </div>\n                    <div class="col-md-6">\n                    </div>\n                    <div class="col-md-6 text-right">\n                    </div>\n                  </div>\n                  <div class="table-responsive">\n                    <table class="table table-condensed" v-show="plantillaId !== \'\'">\n                      <thead>\n                      <tr>\n                        <th class="col-sm-5 text-center">Parámetro</th>\n                        <th class="col-sm-4 text-center">Resultado</th>\n                        <th class="col-sm-3 text-center">V. Referencia</th>\n                        <th class="col-sm-2 text-center">Historial</th>\n                        <th class="col-sm-2 text-center">Comentarios</th>\n                      </tr>\n                      </thead>\n                      <tbody>\n                      <tr v-for="parametro in reportes"\n                          :bgcolor="obtenerColorValoresReferenciaTipoParametroNumerico(parametro)">\n                        <td v-if="parametro.tipo_parametro === \'T\'" colspan="5">\n                          <strong>{{ parametro.nombre_parametro }}</strong>\n                        </td>\n                        <template v-else>\n                          <td class="text-truncate" :title="parametro.nombre_parametro">{{ parametro.nombre_parametro }}\n                          </td>\n                          <td :colspan="parametro.tipo_parametro === \'E\' ? 3 : 1">\n                            <template v-if="!edicionActivada">\n                              <input type="text" class="form-control input-xs text-center"\n                                     :disabled="true"\n                                     v-if="[\'N\', \'S\', \'X\', \'F\'].includes(parametro.tipo_parametro)"\n                                     v-model="reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado">\n                              <ckeditor\n                                :editor="editor"\n                                v-model="reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado"\n                                :config="editorConfig"\n                                v-if="parametro.tipo_parametro === \'E\'"\n                                disabled\n                              />\n                              <button type="button"\n                                      class="btn btn-default btn-xs"\n                                      v-if="parametro.tipo_parametro === \'G\'"\n                                      @click="abrirGrafico(parametro.id)">\n                                <i class="fas fa-poll fa-fw"></i> Ver Gráfico\n                              </button>\n                            </template>\n                            <template v-if="edicionActivada">\n                              <input type="number" class="form-control input-xs text-center"\n                                     step="any"\n                                     lang="en"\n                                     v-if="parametro.tipo_parametro === \'N\'"\n                                     v-model="reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado">\n                              <div v-if="parametro.tipo_parametro === \'F\'" style="display: flex">\n                                <input type="number" class="form-control input-xs text-center"\n                                       step="any"\n                                       lang="en"\n                                       v-model="reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado">\n                                <button type="button"\n                                        title="Calcular"\n                                        class="btn btn-xs btn-default"\n                                        v-if="parametro.tipo_parametro === \'F\'"\n                                        @click="calcularFormula(parametro)">\n                                  <i class="fas fa-calculator"></i>\n                                </button>\n                              </div>\n                              <select class="form-control input-xs"\n                                      v-if="parametro.tipo_parametro === \'S\'"\n                                      v-model="reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado">\n                                <option value="">Seleccione...</option>\n                                <option v-for="opcion in obtenerOpciones(parametro.parametro_id)">\n                                  {{ opcion.nombre }}\n                                </option>\n                              </select>\n                              <input type="text" class="form-control input-xs text-center" maxlength="80"\n                                     v-if="parametro.tipo_parametro === \'X\'"\n                                     v-model="reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado">\n                              <ckeditor\n                                :editor="editor"\n                                v-model="reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado"\n                                :config="editorConfig"\n                                v-if="parametro.tipo_parametro === \'E\'"\n                              />\n                              <span v-if="parametro.tipo_parametro === \'G\'">---</span>\n                            </template>\n                          </td>\n                          <td class="text-center" v-if="parametro.tipo_parametro !== \'E\'">\n                            {{ obtenerValoresReferencia(parametro) }}\n                          </td>\n                          <td class="text-center" v-if="parametro.tipo_parametro !== \'E\'">\n                            <button type="button"\n                                    class="btn btn-xs btn-default"\n                                    tabindex="-1"\n                                    v-if="[\'N\', \'S\', \'X\', \'F\'].indexOf(parametro.tipo_parametro) !== -1"\n                                    @click="abrirHistorial(parametro)">\n                              <i class="fas fa-history"></i>\n                            </button>\n                          </td>\n                          <td class="text-center"\n                              :style="parametro.tipo_parametro === \'L\' ? \'height: 22px\' : \'\'">\n                            <button type="button"\n                                    :class="\'btn btn-xs\' + (parametro.comentario ? \' btn-info\' : \' btn-default\')"\n                                    tabindex="-1"\n                                    v-if="[\'N\', \'S\', \'X\', \'E\', \'F\'].includes(parametro.tipo_parametro)"\n                                    @click="abrirComentario(parametro)">\n                              <i class="fas fa-align-justify"></i>\n                            </button>\n                          </td>\n                        </template>\n                      </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                </fieldset>\n              </form>\n              <div class="panel-body"\n                   v-if="detalleOrdenSeleccionado && detalleOrdenSeleccionado.muestraPendiente">\n                No es posible reportar los resultados porque la muestra está pendiente\n              </div>\n              <div class="panel-body" v-if="!detalleOrdenSeleccionado">\n                Por favor seleccione un examen\n              </div>\n            </div>\n          </div>\n          \x3c!-- Fin resultados --\x3e\n        </div>\n        \x3c!-- Fin exámenes y resultado --\x3e\n      </div>\n      \x3c!-- Fin columna derecha --\x3e\n    </div>\n\n    <div class="modal fade" id="modalComentario" tabindex="-1" role="dialog">\n      <div class="modal-dialog" role="document">\n        <div class="modal-content">\n          <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n              <span\n                aria-hidden="true">&times;\n              </span>\n            </button>\n            <h4 class="modal-title">Comentario</h4>\n          </div>\n          <form @submit.prevent="guardarComentario">\n            <div class="modal-body">\n              <div class="form-group" v-if="comentarios.length>0">\n                <v-select\n                  id="catalogoComentario"\n                  class="form-control input-sm"\n                  placeholder="Seleccione un comentario..."\n                  v-model="comentarioSelecionado"\n                  :options="comentarios"\n                  label="nombre"\n                  v-show="edicionActivada"\n                  :reduce="opcion => opcion.contenido"\n                  @input="seleccionarComentario">\n                  <template #no-options>No existen comentarios</template>\n                </v-select>\n              </div>\n\n              <div class="editor" v-if="edicionActivada">\n                <ckeditor\n                  :editor="editor"\n                  :config="editorConfig"\n                  :disabled="!edicionActivada"\n                  v-model="comentario"\n                />\n              </div>\n\n              <div v-else v-html="comentario?comentario:\'No tiene comentario registrado\'">\n              </div>\n            </div>\n            <div class="modal-footer">\n              <button type="button" class="btn btn-default btn-sm" @click="cerrarComentario">\n                <i class="fas fa-times fa-fw"></i>Cerrar\n              </button>\n              <button type="submit" class="btn btn-primary btn-sm" v-show="edicionActivada">\n                <i class="fas fa-save fa-fw"></i>Guardar\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n\n    <div class="modal fade" id="modalHistorial" tabindex="-1" role="dialog">\n      <div class="modal-dialog"\n           :class="[\'N\', \'F\'].indexOf(parametroSeleccionado.tipo_parametro) !== -1 ? \'modal-lg\' : \'\'"\n           role="document">\n        <div class="modal-content">\n          <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n              <span\n                aria-hidden="true">&times;\n              </span>\n            </button>\n            <h5 v-if="ordenSeleccionada && ordenSeleccionada.es_humano">\n              {{\n                mayusculas(paciente.apellidos) + \', \' +\n                primerasLetrasMayusculas(paciente.nombres)\n              }} ({{ paciente.sexo }}, {{ paciente.edad }})\n            </h5>\n            <h5 v-if="ordenSeleccionada && ordenSeleccionada.es_animal">\n              {{\n                primerasLetrasMayusculas(paciente.nombre) + (paciente.raza ? \' (\' +\n                  paciente.raza.padre.nombre + \' - \' + paciente.raza.nombre + \')\' : \'\')\n              }} ({{ paciente.sexo }}, {{ paciente.edad }})\n            </h5>\n            <h5 v-if="ordenSeleccionada && ordenSeleccionada.es_objeto">\n              {{ primerasLetrasMayusculas(paciente.descripcion) }} ({{ paciente.sexo }})\n            </h5>\n            <h4 class="modal-title">Historial de {{ parametroSeleccionado.nombre_parametro }}</h4>\n          </div>\n          <div class="modal-body">\n            <div class="row" v-if="!cargandoHistorial">\n              <div\n                :class="[\'N\', \'F\'].indexOf(parametroSeleccionado.tipo_parametro) !== -1 ? \'col-md-6\' : \'col-md-8 col-md-offset-2\'">\n                <div style="height: 280px; overflow: auto">\n                  <table class="table table-hover table-condensed">\n                    <thead>\n                    <tr>\n                      <th class="col-sm-4">Orden</th>\n                      <th class="col-sm-4">Fecha</th>\n                      <th class="col-sm-4 text-center">Valor</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for="historia in historial">\n                      <td>{{ historia.numero }}</td>\n                      <td>{{ historia.fecha }}</td>\n                      <td class="text-right">{{ historia.resultado }} {{\n                          historia.unidadMedida\n                        }}\n                      </td>\n                    </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n              <div class="col-md-6" v-if="[\'N\', \'F\'].indexOf(parametroSeleccionado.tipo_parametro) !== -1">\n                <grafico-historial style="height: 280px;" v-if="!cargandoHistorial"\n                                   :datos="datosGraficoHistorial"></grafico-historial>\n              </div>\n            </div>\n            <div style="height: 280px" v-if="cargandoHistorial">\n              <table class="table">\n                <tr>\n                  <td class="text-center" style="height: 220px; vertical-align: middle">\n                    <div class="cargando">\n                      <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>Cargando...\n                    </div>\n                  </td>\n                </tr>\n              </table>\n            </div>\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-default btn-sm" @click="cerrarHistorial">\n              <i class="fas fa-times fa-fw"></i>Cerrar\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <entregar-resultados-modal @correo-electronico-enviado="correoElectronicoEnviado"/>\n\n    <ver-auditorias-modal :orden-id="ordenSeleccionada?ordenSeleccionada.id:\'\'" tipo="resultados"/>\n\n    <pdf-certificado-modal\n      :permiso-imprimir="datos.permisos.imprimir"\n      :resultado-con-membrete="datos.resultadoConMembrete"\n      @correo-electronico-certificado-enviado="correoElectronicoCertificadoEnviado"/>\n\n    <imprimir-modal\n      :url-api-local="datos.urlApiLocal"\n      :mostrar-incluir-membrete="datos.resultadoConMembrete"\n      :habilitar-tooltip="true"\n      @documento-impreso="documentoImpreso">\n    </imprimir-modal>\n\n    <resultados-modal></resultados-modal>\n\n    <buscar-documentos-modal\n      :orden-id="ordenSeleccionada?ordenSeleccionada.id:\'\'"\n      :tamano-papel-reporte="datos.tamanoPapelReporte">\n    </buscar-documentos-modal>\n\n  </div>\n</template>\n\n<script>\n  import graficoHistorial from \'./graficoHistorial\';\n  import \'@ckeditor/ckeditor5-build-classic/build/translations/es\';\n  import CKEditor from \'@ckeditor/ckeditor5-vue2\';\n  import ClassicEditor from \'@ckeditor/ckeditor5-build-classic\';\n  import VerAuditoriasModal from "../modals/VerAuditoriasModal";\n  import PdfCertificadoModal from "./PdfCertificadoModal";\n  import ImprimirModal from "../modals/ImprimirModal";\n  import DetalleOrdenEstado from "../../comunes/DetalleOrdenEstado";\n  import {EstadoMuestra} from "../../../support/constantes";\n  import DatosOrden from "../../comunes/DatosOrden";\n  import {crearBotonConData} from "../../../support/util";\n  import EntregarResultadosModal from "../modals/EntregarResultadosModal";\n  import ResultadosModal from "../modals/ResultadosModal";\n  import BuscarDocumentosModal from "../modals/BuscarDocumentosModal";\n\n  export default {\n    components: {\n      graficoHistorial,\n      ckeditor: CKEditor.component,\n      VerAuditoriasModal,\n      PdfCertificadoModal,\n      ImprimirModal,\n      DetalleOrdenEstado,\n      DatosOrden,\n      EntregarResultadosModal,\n      ResultadosModal,\n      BuscarDocumentosModal\n    },\n    data() {\n      return {\n        cargandoDetallesOrden: false,\n        cargandoHistorial: false,\n        cargandoOrdenes: false,\n        comentario: \'\',\n        datosGraficoHistorial: {},\n        detalleOrdenSeleccionado: null,\n        detallesOrdenSeleccionada: [],\n        edicionActivada: false,\n        editor: ClassicEditor,\n        editorConfig: {\n          language: \'es\',\n          toolbar: [\n            \'bold\',\n            \'italic\',\n            \'|\',\n            \'bulletedList\',\n            \'numberedList\',\n            \'|\',\n            \'insertTable\',\n            \'|\',\n            \'undo\',\n            \'redo\',\n          ],\n          table: {\n            contentToolbar: [\'tableColumn\', \'tableRow\', \'mergeTableCells\']\n          },\n        },\n        estado: \'\',\n        estados: [\n          {id: \'G\', nombre: \'Generado\'},\n          {id: \'R\', nombre: \'Reportado\'},\n          {id: \'L\', nombre: \'Preliminar\'},\n          {id: \'V\', nombre: \'Validado\'},\n        ],\n        empresaId: \'\',\n        examenSeleccionado: null,\n        fechaDesde: moment().format(\'YYYY-MM-DD\'),\n        fechaHasta: moment().format(\'YYYY-MM-DD\'),\n        guardandoReporte: false,\n        historial: [],\n        numeroOrden: \'\',\n        ordenes: [],\n        ordenSeleccionada: null,\n        paciente: {},\n        pacienteBusqueda: \'\',\n        parametroSeleccionado: {},\n        plantillaId: \'\',\n        reportes: [],\n        sala: {},\n        tipoAtencion: {},\n        planSalud: {},\n        medico: {},\n        seccionId: \'\',\n        subempresa: {\n          empresa: {}\n        },\n        sucursalId: this.datos.sucursalActivaId,\n        tipoAtencionId: \'\',\n        validandoReporte: false,\n        urlPrevio: \'\',\n        comentarios: [],\n        comentarioSelecionado: \'\',\n      }\n    },\n    props: [\n      \'datos\',\n      \'permisos\',\n      \'idUsuario\',\n    ],\n    mounted() {\n      $(\'#modalComentario\').on(\'shown.bs.modal\', () => {\n        this.comentarioSelecionado = \'\';\n        this.cargarComentarios();\n        $(\'#comentario\').focus();\n      });\n\n      this.numeroOrden = this.datos.numeroOrden !== 0 ? this.datos.numeroOrden : \'\';\n\n      if (this.datos.urlPrevio && this.datos.urlPrevio.includes(\'/ordenes\')) {\n        this.urlPrevio = this.datos.urlPrevio;\n      }\n\n      if (this.numeroOrden) {\n        this.fechaDesde = \'\';\n        this.buscarOrdenes();\n      }\n    },\n    methods: {\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      abrirComentario(parametro) {\n        let indiceParametro = this.obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden);\n        this.comentario = this.reportes[indiceParametro].comentario;\n        this.comentario = this.comentario === null ? \'\' : this.comentario;\n        this.parametroSeleccionado = parametro;\n        $(\'#modalComentario\').modal({\n          backdrop: \'static\',\n        });\n      },\n      abrirGrafico(detalleOrdenId) {\n        window.open(`/reportes/${detalleOrdenId}/grafico`, \'\', \'scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=350,height=350,left=50,top=50\');\n      },\n      abrirHistorial(parametro) {\n        $(\'#modalHistorial\').modal({\n          backdrop: \'static\',\n        });\n\n        this.cargandoHistorial = true;\n        this.historial = [];\n        this.datosGraficoHistorial = {};\n        this.parametroSeleccionado = parametro;\n        const tipo = this.ordenSeleccionada.es_humano ? \'humano\' : (this.ordenSeleccionada.es_animal ? \'animal\' : \'objeto\');\n        const nombreExamen = encodeURIComponent(this.examenSeleccionado.nombre);\n        const nombreParametro = encodeURIComponent(parametro.nombre_parametro);\n\n        axios\n          .get(`/api/parametros/${this.ordenSeleccionada.paciente.id}?nombre_examen=${nombreExamen}&nombre_parametro=${nombreParametro}&orden_parametro=${parametro.orden}&tipo=${tipo}`)\n          .then(response => {\n            let datos = _.orderBy(\n              response.data.data.map(orden => {\n                return {\n                  numero: orden.numero_orden,\n                  fecha: moment(orden.fecha_orden).format(\'YYYY-MM-DD\'),\n                  nombreParametro: orden.detalles_ordenes[0].reportes[0].detalles_reportes[0].nombre_parametro,\n                  unidadMedida: orden.detalles_ordenes[0].reportes[0].detalles_reportes[0].unidad_medida,\n                  resultado: orden.detalles_ordenes[0].reportes[0].detalles_reportes[0].resultado\n                };\n              }),\n              [\'fecha\'],\n              [\'asc\']\n            );\n\n            this.historial = _.orderBy(datos, [\'fecha\'], [\'desc\']);\n\n            this.datosGraficoHistorial = {\n              labels: datos.map(dato => dato.fecha),\n              datasets: [\n                {\n                  label: parametro.nombre_parametro,\n                  backgroundColor: \'#d9edf7\',\n                  data: datos.map(dato => dato.resultado),\n                }\n              ]\n            };\n\n            this.cargandoHistorial = false;\n          });\n      },\n      abrirEnviarCorreo() {\n        if (!this.ordenSeleccionada.paciente.correo) {\n          this.$refs.alerta.mostrarAlerta(\'danger\', \'El paciente no tiene correo registrado\');\n          return;\n        }\n\n        if (!(this.ordenSeleccionada.saldo === 0 || this.ordenSeleccionada.subempresa.empresa.mostrar_ordenes_impagas)) {\n          this.$refs.alerta.mostrarAlerta(\'danger\', \'La orden tiene saldo pendiente\');\n          return;\n        }\n\n        const datos = {\n          \'forma-entrega\': \'CORREO\',\n          \'orden\': this.ordenSeleccionada,\n          \'destinatario\': this.ordenSeleccionada ? this.ordenSeleccionada.paciente.correo : \'\',\n        }\n\n        const boton = crearBotonConData(datos);\n        $(\'#entregarResultadosModal\').modal({\n          backdrop: \'static\',\n          keyboard: false,\n        }, boton);\n      },\n      correoElectronicoEnviado(orden) {\n        if (orden) {\n          this.$refs.alerta.mostrarAlerta(\'success\', \'Correo electrónico enviado\');\n        }\n      },\n      regresar() {\n        if (this.urlPrevio && this.urlPrevio.includes(\'/ordenes\')) {\n          window.location.href = this.urlPrevio;\n        } else {\n          window.history.back();\n        }\n      },\n      actualizarDetalle(detalle) {\n        const indiceDetalle = this.detallesOrdenSeleccionada.findIndex(d => d.id === detalle.id);\n        Vue.set(this.detallesOrdenSeleccionada, indiceDetalle, detalle);\n\n        this.edicionActivada = false;\n        this.seleccionarDetalleOrden(this.detallesOrdenSeleccionada[indiceDetalle]);\n        this.construirReportes();\n      },\n      actualizarDetalles(detalles) {\n        this.detallesOrdenSeleccionada = detalles.map(detalle => {\n          return {\n            ...detalle,\n            muestraPendiente: detalle.detalle_orden_muestras.reduce((muestraPendiente, {estado}) => muestraPendiente && estado === EstadoMuestra.PENDIENTE, true), //Todas las muestras pendientes para que sea true\n          }\n        });\n        this.edicionActivada = false;\n      },\n      actualizarOrden(orden) {\n        const indiceOrden = this.ordenes.findIndex(o => o.id === orden.id);\n        this.ordenes[indiceOrden] = orden;\n        this.ordenSeleccionada = this.ordenes[indiceOrden];\n      },\n      actualizarOrdenYDetalle() {\n        const params = {\n          incluir: [\'paciente\', \'subempresa.empresa\', \'sala\', \'planSalud:id,nombre\', \'tipoAtencion\', \'sucursal:id,extras\']\n        };\n\n        return Promise\n          .all([\n            axios.get(`/api/ordenes/${this.ordenSeleccionada.id}`, {params}),\n            axios.get(`/api/ordenes/${this.ordenSeleccionada.id}/detalles/${this.detalleOrdenSeleccionado.id}`)\n          ])\n          .then(([responseOrden, responseDetalle]) => {\n            this.actualizarOrden(responseOrden.data.data);\n            this.actualizarDetalle(responseDetalle.data.data);\n          })\n      },\n      actualizarOrdenYDetalles() {\n        const params = {\n          incluir: [\'paciente\', \'subempresa.empresa\', \'sala\', \'planSalud:id,nombre\', \'tipoAtencion\']\n        };\n\n        return Promise\n          .all([\n            axios.get(`/api/ordenes/${this.ordenSeleccionada.id}`, {params}),\n            axios.get(`/api/ordenes/${this.ordenSeleccionada.id}/detalles`)\n          ])\n          .then(([responseOrden, responseDetalle]) => {\n            this.actualizarOrden(responseOrden.data.data);\n            this.actualizarDetalles(responseDetalle.data.data);\n          })\n      },\n      buscarOrdenes() {\n        this.ordenes = [];\n        this.paciente = {};\n        this.ordenSeleccionada = null;\n        this.detalleOrdenSeleccionado = null;\n        this.examenSeleccionado = null;\n        this.plantillaId = \'\';\n        this.reportes = [];\n        this.subempresa = {empresa: {}};\n        this.sala = {};\n        this.tipoAtencion = {};\n        this.planSalud = {};\n\n        if (this.numeroOrden === \'\' && this.fechaDesde === \'\') {\n          alert(\'La fecha de inicio en los filtros no puede estar vacía\');\n          return;\n        }\n\n        if (this.numeroOrden === \'\' && this.fechaHasta === \'\') {\n          alert(\'La fecha de fin en los filtros no puede estar vacía\');\n          return;\n        }\n\n        const params = {\n          numeroOrden: this.numeroOrden,\n          pacienteBusqueda: this.pacienteBusqueda,\n          fechaDesde: this.numeroOrden ? \'\' : this.fechaDesde,\n          fechaHasta: this.numeroOrden ? \'\' : this.fechaHasta,\n          sucursalId: this.sucursalId,\n          seccionId: this.seccionId,\n          detallesEstado: this.estado,\n          empresaId: this.empresaId,\n          tipoAtencionId: this.tipoAtencionId,\n          soloSeccionesPermitidas: 1,\n          incluir: \'paciente.raza.padre,subempresa.empresa,sala,tipoAtencion,planSalud:id|nombre,medico,sistemaExterno,sucursal:id|extras\',\n        };\n\n        this.cargandoOrdenes = true;\n\n        axios\n          .get(\'/api/ordenes/buscar\', {params})\n          .then(response => {\n            this.ordenes = response.data.data;\n\n            if (this.ordenes.length === 1) {\n              this.seleccionarOrden(this.ordenes[0]);\n            }\n          })\n          .catch(_ => {\n            alert(\'Lo sentimos, hubo un error al cargar las órdenes.\');\n          })\n          .then(() => {\n            this.cargandoOrdenes = false;\n          });\n      },\n      borrarFiltros() {\n        this.numeroOrden = \'\';\n        this.pacienteBusqueda = \'\';\n        this.estado = \'\';\n        this.sucursalId = \'\';\n        this.seccionId = \'\';\n        this.empresaId = \'\';\n        this.tipoAtencionId = \'\';\n      },\n      buscarReporte(nombreParametro, orden) {\n        let reporte = this.detalleOrdenSeleccionado.reportes.find((r) => r.plantilla_id === this.plantillaId);\n        if (reporte) {\n          return reporte.detalles_reportes.find(function (detalleReporte) {\n            return detalleReporte.nombre_parametro === nombreParametro && detalleReporte.orden === orden;\n          });\n        }\n        return null;\n      },\n      calcularFormula(parametro) {\n        const errores = [];\n        let formula = parametro.formula.map(itemFormula => {\n          if (itemFormula.startsWith(\'"\') && itemFormula.endsWith(\'"\')) {\n            itemFormula = itemFormula.substring(1, itemFormula.length - 1);\n            const [nombreExamen, nombreParametro] = itemFormula.split(\' -|- \');\n            const detalleOrden = this.detallesOrdenSeleccionada.find(detalle => detalle.examen.nombre === nombreExamen);\n\n            itemFormula = null;\n            //Valida que el examen exista dentro de la orden\n            if (detalleOrden) {\n              //Comprueba si el examen de la fórmula es el que está actualmente seleccionado, de acuerdo a eso busca en diferentes lugares\n              if (this.examenSeleccionado.nombre === nombreExamen) {\n                //Busca el resultado dentro los resultados que se muestran actualmente en pantalla\n                const resultado = this.reportes.find(reporte => reporte.nombre_parametro === nombreParametro).resultado;\n                if (resultado === null || resultado === \'\' || isNaN(resultado)) {\n                  errores.push(`El paramétro "${nombreParametro}" no tiene valor o no es numérico`);\n                } else {\n                  itemFormula = resultado;\n                }\n              } else {\n                //Busca el resultado dentro los resultados ya reportados\n                const reporte = detalleOrden.reportes.find(reporte => reporte.nombre_examen === nombreExamen);\n                //Valida si el examen ya fue reportado\n                if (reporte) {\n                  const detalleReporte = reporte.detalles_reportes.find(detalle => detalle.nombre_parametro === nombreParametro);\n                  //Valida si el parámetro ya fue reportado\n                  if (detalleReporte) {\n                    itemFormula = (detalleReporte.resultado === null || detalleReporte.resultado === \'\' || isNaN(detalleReporte.resultado)) ? null : detalleReporte.resultado;\n                  } else {\n                    errores.push(`El paramétro "${nombreParametro}" no ha sido reportado`);\n                  }\n                } else {\n                  errores.push(`El examen "${nombreExamen}" no ha sido reportado`);\n                }\n              }\n            } else {\n              errores.push(`El examen "${nombreExamen}" no existe en la orden`);\n            }\n          }\n          return itemFormula;\n        });\n        if (errores.length > 0) {\n          this.$refs.alerta.mostrarAlerta(\'danger\', \'¡Error!\', errores);\n        } else {\n          try {\n            formula = formula.join(\' \').replace(\'^\', \'**\');\n\n            let valor = eval(formula).toFixed(2);\n            const [entero, decimal] = valor.split(\'.\');\n            if (decimal === \'00\') {\n              valor = entero;\n            }\n            this.reportes[this.obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado = valor;\n          } catch (e) {\n            this.$refs.alerta.mostrarAlerta(\'danger\', \'¡Error!\', [\'La fórmula contiene errores\']);\n          }\n\n        }\n      },\n      cerrarComentario() {\n        $(\'#modalComentario\').modal(\'toggle\');\n      },\n      cerrarHistorial() {\n        $(\'#modalHistorial\').modal(\'toggle\');\n      },\n      construirReportes() {\n        let that = this;\n        that.reportes = [];\n        if (!_.isEmpty(this.examenSeleccionado) && that.plantillaId !== \'\') {\n          if (this.edicionActivada) {\n            let parametros = this.examenSeleccionado.plantillas.find(plantilla => plantilla.id === this.plantillaId)\n              .parametros.filter(function (parametro) {\n                return parametro.sexo === null || parametro.sexo === \'A\' || parametro.sexo === that.paciente.sexo;\n              });\n            _.sortBy(parametros, \'orden\').forEach(function (parametro) {\n              let reporte = that.buscarReporte(parametro.nombre, parametro.orden);\n              let valor_minimo = null;\n              let valor_maximo = null;\n              let valor_minimo_critico = null;\n              let valor_maximo_critico = null;\n              let valorPredeterminado = \'\';\n\n              if (parametro.tipo_parametro === \'N\' || parametro.tipo_parametro === \'F\') {\n                let valoresReferencia = that.obtenerValoresReferenciaTipoParametroNumerico(parametro);\n                valor_minimo = valoresReferencia[0];\n                valor_maximo = valoresReferencia[1];\n                valor_minimo_critico = valoresReferencia[2];\n                valor_maximo_critico = valoresReferencia[3];\n              }\n\n              if (parametro.tipo_parametro === \'S\' && parametro.opcion_tipo_dato_id && !_.isEmpty(parametro.tipo_dato.opciones)) {\n                valorPredeterminado = parametro.tipo_dato.opciones.find(function (opcion) {\n                  return opcion.id === parametro.opcion_tipo_dato_id;\n                }).nombre;\n              }\n\n              if (reporte && parametro.tipo_parametro === \'E\') {\n                reporte.resultado = reporte.valor_adicional;\n              }\n\n              const muestraEncontrada = that.detalleOrdenSeleccionado.detalle_orden_muestras.find(dom => dom.muestra_id === parametro.muestra_id);\n\n              that.reportes.push({\n                muestra_id: muestraEncontrada && parametro.muestra_id ? parametro.muestra_id : null,\n                parametro_id: parametro.id,\n                nombre_examen: that.detalleOrdenSeleccionado.examen.nombre,\n                nombre_parametro: parametro.nombre,\n                tipo_parametro: parametro.tipo_parametro,\n                resultado: reporte ? reporte.resultado : valorPredeterminado,\n                orden: parametro.orden,\n                imprimir_valor_referencia: parametro.imprimir_valor_referencia,\n                unidad_medida: parametro.unidad_medida,\n                valor_minimo: valor_minimo,\n                valor_maximo: valor_maximo,\n                valor_normal_texto: parametro.valor_normal_texto,\n                valor_minimo_critico: valor_minimo_critico,\n                valor_maximo_critico: valor_maximo_critico,\n                interpretacion: parametro.interpretacion,\n                interpretacion_valor_referencia: parametro.interpretacion_valor_referencia,\n                formula: parametro.formula,\n                comentario: reporte ? reporte.comentario : null,\n              });\n            });\n          }\n          if (!this.edicionActivada) {\n            let reporte = that.detalleOrdenSeleccionado.reportes.find(function (reporte) {\n              return reporte.plantilla_id === that.plantillaId;\n            });\n            let parametros = reporte ? reporte.detalles_reportes : [];\n\n            _.sortBy(parametros, \'orden\').forEach(function (parametro) {\n\n              const muestraEncontrada = that.detalleOrdenSeleccionado.detalle_orden_muestras.find(dom => dom.muestra_id === parametro.muestra_id);\n\n              that.reportes.push({\n                id: parametro.id,\n                muestra_id: muestraEncontrada && parametro.muestra_id ? parametro.muestra_id : null,\n                nombre_parametro: parametro.nombre_parametro,\n                tipo_parametro: parametro.tipo_parametro,\n                resultado: parametro.tipo_parametro === \'E\' ? parametro.valor_adicional : parametro.resultado,\n                orden: parametro.orden,\n                unidad_medida: parametro.unidad_medida,\n                valor_minimo: parametro.valor_minimo,\n                valor_maximo: parametro.valor_maximo,\n                valor_normal_texto: parametro.valor_normal_texto,\n                valor_minimo_critico: parametro.valor_minimo_critico,\n                valor_maximo_critico: parametro.valor_maximo_critico,\n                interpretacion: parametro.interpretacion,\n                interpretacion_valor_referencia: parametro.interpretacion_valor_referencia,\n                formula: parametro.formula,\n                comentario: parametro.comentario,\n              });\n            });\n          }\n        }\n      },\n      convertirEdadAEscala(escala) {\n        switch (escala) {\n          case \'D\':\n            return this.paciente.edad_en_dias;\n          case \'M\':\n            return this.paciente.edad_en_meses;\n          case \'Ñ\':\n            return this.paciente.edad_en_anios;\n        }\n      },\n      editarReporte() {\n        if (this.existenReportes()) {\n          this.edicionActivada = !this.edicionActivada;\n        }\n\n        this.construirReportes();\n      },\n      eliminarReportes() {\n        if (confirm(\'¿Está seguro que desea eliminar?\')) {\n          this.guardandoReporte = true;\n          axios\n            .delete(\'/api/reportes/\' + this.detalleOrdenSeleccionado.id, {\n              params: {plantillaId: this.plantillaId}\n            })\n            .then(_ => {\n              return this.actualizarOrdenYDetalle();\n            })\n            .then(_ => {\n              this.$refs.alerta.mostrarAlerta(\'success\', \'Resultados eliminados\');\n            })\n            .catch(error => {\n              this.mostrarErrores(error.response);\n            })\n            .then(() => {\n              this.guardandoReporte = false;\n            });\n        }\n      },\n      existenCambiosEnReporte() {\n        let existenCambios = false;\n        this.reportes\n          .filter((reporte) => reporte.plantilla_id === this.plantillaId)\n          .forEach(reporte => {\n            let reporteOriginal = this.buscarReporte(reporte.nombre_parametro, reporte.orden);\n            reporteOriginal = reporteOriginal ? reporteOriginal : {resultado: null, comentario: null};\n            if (reporteOriginal.resultado !== reporte.resultado || reporteOriginal.comentario !== reporte.comentario) {\n              existenCambios = true;\n            }\n          });\n        return existenCambios;\n      },\n      existenReportes() {\n        if (!_.isEmpty(this.detalleOrdenSeleccionado)) {\n          return !_.isEmpty(this.detalleOrdenSeleccionado.reportes.filter((r) => r.plantilla_id === this.plantillaId));\n        }\n        return false;\n      },\n      existenReportesEnOtrasPlantillas() {\n        if (!_.isEmpty(this.detalleOrdenSeleccionado)) {\n          return !_.isEmpty(this.detalleOrdenSeleccionado.reportes.filter((r) => r.plantilla_id !== this.plantillaId));\n        }\n        return false;\n      },\n      filtrarPlantillas(plantillas) {\n        return plantillas.filter(plantilla => !plantilla.taxonomia_id || plantilla.taxonomia_id === (this.ordenSeleccionada.paciente.raza ? this.ordenSeleccionada.paciente.raza.padre.id : null));\n      },\n      filtrarReportes(reportes) {\n        //Elimina reportes sin resultado\n        reportes = reportes.filter(reporte => (reporte.resultado !== null && reporte.resultado !== \'\') || reporte.tipo_parametro === \'G\' || reporte.tipo_parametro === \'T\' || reporte.tipo_parametro === \'L\' || reporte.tipo_parametro === \'A\' || reporte.tipo_parametro === \'I\' || reporte.tipo_parametro === \'M\');\n        let reportesFiltrados = reportes.slice();\n\n        //Elimina títulos huérfanos y líneas de separación en esos títulos\n        for (let i = 0; i < reportes.length; i++) {\n          if (reportes[i].tipo_parametro === \'T\') {\n            let contador = 0;\n            let lineasSeparacion = [];\n            for (let j = i + 1; j < reportes.length; j++) {\n              if ((reportes[j].resultado !== null && reportes[j].resultado !== \'\') || reportes[j].tipo_parametro === \'G\') {\n                contador++;\n              }\n              if (reportes[j].tipo_parametro === \'L\') {\n                lineasSeparacion.push(reportes[j]);\n              }\n              if (reportes[j].tipo_parametro === \'T\') {\n                break;\n              }\n            }\n            if (contador === 0) {\n              lineasSeparacion.forEach(ls => reportesFiltrados.splice(reportesFiltrados.indexOf(ls), 1));\n              reportesFiltrados.splice(reportesFiltrados.indexOf(reportes[i]), 1);\n            }\n          }\n        }\n\n        //Elimina líneas de separación al inicio\n        let lineasSeparacion = [];\n        for (let i = 0; i < reportesFiltrados.length; i++) {\n          if (reportesFiltrados[i].tipo_parametro !== \'L\') {\n            break;\n          }\n          lineasSeparacion.push(reportesFiltrados[i]);\n        }\n        lineasSeparacion.forEach(ls => reportesFiltrados.splice(reportesFiltrados.indexOf(ls), 1));\n\n        //Elimina líneas de separación al final\n        lineasSeparacion = [];\n        for (let i = reportesFiltrados.length - 1; i >= 0; i--) {\n          if (reportesFiltrados[i].tipo_parametro !== \'L\') {\n            break;\n          }\n          lineasSeparacion.push(reportesFiltrados[i]);\n        }\n        lineasSeparacion.forEach(ls => reportesFiltrados.splice(reportesFiltrados.indexOf(ls), 1));\n\n        return reportesFiltrados;\n      },\n      guardarComentario() {\n        let indiceParametro = this.obtenerIndiceParametro(this.parametroSeleccionado.nombre_parametro, this.parametroSeleccionado.orden);\n        this.reportes[indiceParametro].comentario = this.comentario;\n        $(\'#modalComentario\').modal(\'toggle\');\n      },\n      guardarReportes() {\n        let continuar = true;\n        if (this.existenReportesEnOtrasPlantillas()) {\n          continuar = confirm("Los resultados reportados en otras plantillas se eliminarán.\\n\\n¿Desea continuar?");\n        }\n        if (continuar) {\n          let plantilla = this.examenSeleccionado.plantillas.find(p => p.id === this.plantillaId);\n          this.guardandoReporte = true;\n\n          const datos = {\n            plantillaId: this.plantillaId,\n            nombreExamen: this.detalleOrdenSeleccionado.examen.nombre,\n            ordenExamen: this.detalleOrdenSeleccionado.examen.ordenamiento,\n            acreditadoExamen: this.detalleOrdenSeleccionado.examen.acreditado,\n            nombreSeccion: plantilla.seccion.nombre,\n            ordenSeccion: plantilla.seccion.orden,\n            firmaId: plantilla.seccion.firma_id,\n            nombreTecnica: plantilla.tecnica ? plantilla.tecnica.nombre : null,\n            imprimirSoloParametros: plantilla.imprimir_solo_parametros,\n            extras: this.detalleOrdenSeleccionado.examen.extras,\n            detalles: this.filtrarReportes(this.reportes),\n          };\n\n          this.definirUrlQr(datos, this.detalleOrdenSeleccionado.examen);\n\n          axios\n            .patch(\'/api/reportes/\' + this.detalleOrdenSeleccionado.id, datos)\n            .then(_ => {\n              return this.actualizarOrdenYDetalle();\n            })\n            .then(_ => {\n              this.$refs.alerta.mostrarAlerta(\'success\', \'Resultados guardados\');\n            })\n            .catch(error => {\n              this.mostrarErrores(error.response);\n            })\n            .then(() => {\n              this.guardandoReporte = false;\n            });\n        }\n      },\n      definirUrlQr(datos, examen) {\n        if (_.get(this.ordenSeleccionada.sucursal, \'extras.examenesQr\')) {\n          const examenQr = this.ordenSeleccionada.sucursal.extras.examenesQr.find(eQr => eQr.examen_id === examen.id);\n\n          if (examenQr) {\n            datos.extras.urlQr = examenQr.url;\n          }\n        }\n      },\n      mayusculas(cadena) {\n        return _.toUpper(cadena);\n      },\n      mostrarErrores(response) {\n        if (!response) {\n          this.$refs.alerta.mostrarAlerta(\'danger\', \'Error no determinado\');\n          return;\n        }\n\n        if (response.status === 401) {\n          this.redireccionar();\n        } else {\n          this.$refs.alerta.mostrarAlerta(\'danger\', response.data.errors);\n        }\n      },\n      nombrePacienteOrden(orden) {\n        let nombrePaciente = \'\';\n        if (orden.es_humano) {\n          nombrePaciente = _.toUpper(orden.paciente.apellidos) + \', \' + _.startCase(_.toLower(orden.paciente.nombres));\n        }\n        if (orden.es_animal) {\n          nombrePaciente = _.startCase(_.toLower(orden.paciente.nombre)) + (orden.paciente.raza ? \'(\' + orden.paciente.raza.padre.nombre + \' - \' + orden.paciente.raza.nombre + \')\' : \'\');\n        }\n        if (orden.es_objeto) {\n          nombrePaciente = _.startCase(_.toLower(orden.paciente.descripcion));\n        }\n        return nombrePaciente\n      },\n      obtenerColorValoresReferenciaTipoParametroNumerico(parametro) {\n        if ([\'N\', \'F\'].indexOf(parametro.tipo_parametro) !== -1 && parametro.resultado) {\n          if (parametro.valor_minimo_critico !== null && parametro.valor_maximo_critico !== null) {\n            if (parseFloat(parametro.resultado) < parseFloat(parametro.valor_minimo_critico)\n              || parseFloat(parametro.resultado) > parseFloat(parametro.valor_maximo_critico)) {\n              return \'#FF5454\';\n            }\n          }\n\n          if (parametro.valor_minimo !== null && parametro.valor_maximo !== null) {\n            if (parseFloat(parametro.resultado) < parseFloat(parametro.valor_minimo)\n              || parseFloat(parametro.resultado) > parseFloat(parametro.valor_maximo)) {\n              return \'#f2dede\';\n            }\n          }\n        }\n        return \'#fff\';\n      },\n      obtenerEscalaEdad() {\n        let edad = this.paciente.edad_en_dias;\n        if (edad < 30) {\n          return \'D\';\n        }\n        if (edad < 365) {\n          return \'M\';\n        }\n        return (\'Ñ\');\n      },\n      obtenerIndiceParametro(nombreParametro, orden) {\n        return this.reportes.indexOf(this.reportes.find(reporte => reporte.nombre_parametro === nombreParametro && reporte.orden === orden));\n      },\n      obtenerOpciones(parametroId) {\n        let tipoDato = this.parametros.find(function (parametro) {\n          return parametro.id == parametroId;\n        }).tipo_dato;\n\n        return tipoDato ? tipoDato.opciones : [];\n      },\n      obtenerValoresReferenciaTipoParametroNumerico(parametro) {\n        if (parametro.tipo_parametro === \'N\' || parametro.tipo_parametro === \'F\') {\n          if (parametro.valores_referencia_edad.length > 0) {\n            let escala = this.obtenerEscalaEdad();\n            let edad = this.convertirEdadAEscala(escala);\n            let valorReferenciaEdad = parametro.valores_referencia_edad.filter(function (vre) {\n              return vre.escala_edad == escala;\n            }).find(function (vre) {\n              if (vre.edad_desde <= edad && edad <= vre.edad_hasta) {\n                return true;\n              }\n            });\n            if (valorReferenciaEdad) {\n              return [\n                valorReferenciaEdad.valor_minimo,\n                valorReferenciaEdad.valor_maximo,\n                valorReferenciaEdad.valor_minimo_critico,\n                valorReferenciaEdad.valor_maximo_critico,\n              ];\n            }\n          }\n          return [\n            parametro.valor_minimo,\n            parametro.valor_maximo,\n            parametro.valor_minimo_critico,\n            parametro.valor_maximo_critico,\n          ];\n        }\n        return [\'\', \'\'];\n      },\n      obtenerValoresReferencia(parametro) {\n        if ([\'N\', \'F\'].indexOf(parametro.tipo_parametro) !== -1 && parametro.valor_minimo) {\n          return parametro.valor_minimo + \' - \' + parametro.valor_maximo + (parametro.unidad_medida ? (\' \' + parametro.unidad_medida) : \'\');\n        }\n        if (parametro.tipo_parametro === \'X\' || parametro.tipo_parametro === \'S\') {\n          return (parametro.valor_normal_texto ? parametro.valor_normal_texto : \'\') + (parametro.unidad_medida ? (\' \' + parametro.unidad_medida) : \'\');\n        }\n        return \'\';\n      },\n      primerasLetrasMayusculas(cadena) {\n        return _.startCase(cadena);\n      },\n      redireccionar() {\n        window.location.href = \'/ordenes\';\n      },\n      seleccionarDetalleOrden(detalleOrden) {\n        if (this.edicionActivada && this.existenCambiosEnReporte()) {\n          alert(\'Por favor guarde los cambios\');\n        } else {\n          this.plantillaId = \'\';\n          this.reportes = [];\n          this.detalleOrdenSeleccionado = detalleOrden;\n          this.examenSeleccionado = detalleOrden.examen;\n\n          const plantillas = this.filtrarPlantillas(this.examenSeleccionado.plantillas);\n\n          if (plantillas.length === 1) {\n            this.plantillaId = plantillas[0].id;\n          }\n\n          if (this.detalleOrdenSeleccionado.reportes.length === 1) {\n            this.plantillaId = this.detalleOrdenSeleccionado.reportes[0].plantilla_id;\n          }\n\n          this.edicionActivada = false;\n\n          if (this.plantillaId !== \'\' && !this.existenReportes() && this.esPlantillaActiva) {\n            this.edicionActivada = true;\n          }\n\n          this.construirReportes();\n        }\n      },\n      seleccionarOrden(orden) {\n        this.cargandoDetallesOrden = true;\n        this.ordenSeleccionada = orden;\n        this.detallesOrdenSeleccionada = [];\n        this.paciente = orden.paciente;\n        this.subempresa = orden.subempresa;\n        this.sala = orden.sala;\n        this.tipoAtencion = orden.tipo_atencion;\n        this.planSalud = orden.plan_salud;\n        this.medico = orden.medico;\n        this.detalleOrdenSeleccionado = null;\n        this.examenSeleccionado = null;\n\n        const filtros = {\n          seccionId: this.seccionId,\n          seccionesIds: !this.seccionId ? _.map(this.datos.secciones, \'id\') : null,\n          estado: this.estado,\n        };\n\n        axios\n          .get(`/api/ordenes/${orden.id}/detalles`, {params: filtros})\n          .then(({data}) => {\n            this.detallesOrdenSeleccionada = data.data.map(detalle => {\n              return {\n                ...detalle,\n                muestraPendiente: detalle.detalle_orden_muestras.reduce((muestraPendiente, {estado}) => muestraPendiente && estado === EstadoMuestra.PENDIENTE, true), //Todas las muestras pendientes para que sea true\n              }\n            });\n          })\n          .catch(_ => {\n            alert(\'Lo sentimos, hubo un error al cargar los detalles de la orden.\')\n          })\n          .then(_ => {\n            this.cargandoDetallesOrden = false;\n          });\n      },\n      validarReportes() {\n        this.validandoReporte = true;\n\n        axios\n          .patch(\'/api/reportes/\' + this.detalleOrdenSeleccionado.id + \'/validar\', {\n            plantillaId: this.plantillaId\n          })\n          .then(_ => {\n            return this.actualizarOrdenYDetalle();\n          })\n          .then(_ => {\n            this.$refs.alerta.mostrarAlerta(\'success\', \'Examen validado\');\n          })\n          .catch(error => {\n            this.mostrarErrores(error.response);\n          })\n          .then(_ => {\n            this.validandoReporte = false;\n          });\n      },\n      validarTodosReportes() {\n        this.validandoReporte = true;\n        this.detalleOrdenSeleccionado = null;\n        this.examenSeleccionado = null;\n\n        axios\n          .patch(\'/api/reportes/\' + this.ordenSeleccionada.id + \'/validar-todos\')\n          .then(_ => {\n            return this.actualizarOrdenYDetalles();\n          })\n          .then(_ => {\n            this.$refs.alerta.mostrarAlerta(\'success\', \'Exámenes validados\');\n          })\n          .catch(error => {\n            this.mostrarErrores(error.response);\n          })\n          .then(() => {\n            this.validandoReporte = false;\n          });\n      },\n      cambiarEstadoBoton(boton, icono) {\n        if (boton.classList.contains(\'disabled\')) {\n          boton.classList.remove(\'disabled\');\n          icono.classList.add(\'fa-save\');\n          icono.classList.remove(\'fa-spinner\', \'fa-spin\');\n        } else {\n          boton.classList.add(\'disabled\');\n          icono.classList.remove(\'fa-save\');\n          icono.classList.add(\'fa-spinner\', \'fa-spin\');\n        }\n      },\n      guardarObservacionesRecibo(event) {\n        let icono = null;\n        let boton = null;\n\n        if (event.target.localName === \'i\') {\n          boton = event.target.parentNode;\n          icono = event.target;\n        }\n\n        if (event.target.localName === \'button\') {\n          boton = event.target;\n          icono = event.target.childNodes[0];\n        }\n\n        this.cambiarEstadoBoton(boton, icono);\n\n        const registro = {\n          observaciones: this.ordenSeleccionada.observaciones_orden\n        }\n        this.guardarObservaciones(\'recibo\', registro, boton, icono);\n      },\n      guardarObservacionesLaboratorista(event) {\n        let icono = null;\n        let boton = null;\n\n        if (event.target.localName === \'i\') {\n          boton = event.target.parentNode;\n          icono = event.target;\n        }\n\n        if (event.target.localName === \'button\') {\n          boton = event.target;\n          icono = event.target.childNodes[0];\n        }\n\n        this.cambiarEstadoBoton(boton, icono);\n\n        const registro = {\n          observaciones: this.ordenSeleccionada.observaciones_hoja_trabajo\n        }\n        this.guardarObservaciones(\'laboratorista\', registro, boton, icono);\n      },\n      guardarObservaciones(observacion, registro, boton, icono) {\n        axios\n          .patch(`/api/ordenes/${this.ordenSeleccionada.id}/observaciones/${observacion}`, registro)\n          .then(() => {\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.$refs.alerta.mostrarAlerta(\'danger\', \'¡Error al actualizar observación!\', errores);\n          })\n          .then(() => this.cambiarEstadoBoton(boton, icono));\n      },\n      correoElectronicoCertificadoEnviado(orden) {\n        this.$refs.alerta.mostrarAlerta(\'success\', \'Correo electrónico con certificado enviado\');\n      },\n      abrirModalImprimir() {\n        const datos = {\n          registro: this.ordenSeleccionada,\n          tipoDocumento: \'resultados\',\n          tamanoPapel: this.datos.tamanoPapelReporte,\n          existenExamenesValidados: this.existenExamenesValidados(),\n        }\n        $(\'#modalImprimir\').modal({backdrop: \'static\', keyboard: false}, datos);\n      },\n      documentoImpreso(data) {\n        if (!data) {\n          const mensajes = [\'Impresión enviada\'];\n          this.mostrarExito(mensajes);\n          return;\n        }\n\n        this.mostrarExito(data.mensajes);\n      },\n      existenExamenesValidados() {\n        if (this.ordenSeleccionada && this.detallesOrdenSeleccionada) {\n          const count = this.detallesOrdenSeleccionada.reduce((contador, {estado}) => [\'L\', \'V\'].includes(estado) ? contador += 1 : contador, 0);\n          return count > 0;\n        }\n        return false;\n      },\n      cargarComentarios() {\n        if (!_.isEmpty(this.comentarios)) {\n          return;\n        }\n\n        axios\n          .get(\'/api/comentarios\')\n          .then(({data: {data}}) => this.comentarios = data)\n          .catch(error => {\n            this.mostrarErrores(error.response);\n          })\n          .then(() => this.cargando = false);\n      },\n      seleccionarComentario(contenido) {\n        if (!contenido) {\n          return;\n        }\n        this.comentario = this.comentario ? this.comentario + \' \' + contenido : contenido;\n        this.comentarioSelecionado = \'\';\n      },\n      abrirModalResultados() {\n        const boton = crearBotonConData({\'orden\': this.ordenSeleccionada});\n        $(\'#modalResultados\').modal({backdrop: \'static\'}, boton);\n      },\n      abrirModalBuscarDocumentos() {\n        const datos = {\n          orden: this.ordenSeleccionada\n        }\n        $(\'#buscarDocumentosModal\').modal({backdrop: \'static\'}, datos);\n      }\n    },\n    computed: {\n      exameneReportados() {\n        if (this.ordenSeleccionada && this.detallesOrdenSeleccionada) {\n          return this.detallesOrdenSeleccionada.filter(detalleOrden => detalleOrden.estado === \'R\');\n        }\n        return [];\n      },\n      esPlantillaActiva() {\n        return this.examenSeleccionado.plantillas.find(p => p.id === this.plantillaId).estado === \'A\';\n      },\n      existenExamenesParaImprimir() {\n        if (this.ordenSeleccionada && this.detallesOrdenSeleccionada) {\n          const count = this.detallesOrdenSeleccionada.reduce((contador, {estado}) => [\'L\', \'V\', \'R\'].includes(estado) ? contador += 1 : contador, 0);\n          return count > 0;\n        }\n        return false;\n      },\n      existenExamenesParaCorreo() {\n        if (this.ordenSeleccionada && this.detallesOrdenSeleccionada) {\n          const count = this.detallesOrdenSeleccionada.reduce((contador, {estado}) => [\'L\', \'V\'].includes(estado) ? contador += 1 : contador, 0);\n          return count > 0;\n        }\n        return false;\n      },\n      parametros() {\n        if (this.plantillaId) {\n          return this.examenSeleccionado.plantillas.find(p => p.id == this.plantillaId).parametros;\n        }\n        return [];\n      },\n      puedeEditarReportes() {\n        if (this.detalleOrdenSeleccionado.estado === \'L\' || this.detalleOrdenSeleccionado.estado === \'V\') {\n          if (this.datos.permisos.editarReportesValidadosPorOtros) {\n            return true;\n          }\n          if (this.datos.permisos.editarReportesValidadosPropios && this.detalleOrdenSeleccionado.usuario_valida === this.datos.idUsuario) {\n            return true;\n          }\n          return false;\n        }\n        return this.datos.permisos.editar;\n      },\n      puedeEliminarReportes() {\n        if (this.detalleOrdenSeleccionado.estado === \'L\' || this.detalleOrdenSeleccionado.estado === \'V\') {\n          if (this.datos.permisos.eliminarReportesValidadosPorOtros) {\n            return true;\n          }\n          if (this.datos.permisos.eliminarReportesValidadosPropios && this.detalleOrdenSeleccionado.usuario_valida === this.datos.idUsuario) {\n            return true;\n          }\n          return false;\n        }\n        return this.datos.permisos.eliminar;\n      },\n      nombreMedico() {\n        if (_.isEmpty(this.medico)) {\n          return \'-\';\n        }\n\n        return this.medico.nombre_completo;\n      },\n      embarazada() {\n        if (!this.ordenSeleccionada.embarazada) {\n          return \'No\';\n        }\n\n        if (this.ordenSeleccionada.semanas_gestacion === 1) {\n          return this.ordenSeleccionada.semanas_gestacion + \' semana\';\n        }\n\n        if (this.ordenSeleccionada.semanas_gestacion > 1) {\n          return this.ordenSeleccionada.semanas_gestacion + \' semanas\';\n        }\n\n        return \'Si\';\n      },\n    },\n    watch: {\n      plantillaId() {\n        this.edicionActivada = false;\n\n        if (this.plantillaId !== \'\' && !this.existenReportes() && this.esPlantillaActiva) {\n          this.edicionActivada = true;\n        }\n\n        this.construirReportes();\n      }\n    }\n\n  }\n<\/script>\n<style scoped>\n  textarea {\n    resize: vertical;\n    max-height: 100px;\n  }\n\n  table > tbody > tr > td {\n    vertical-align: middle;\n  }\n\n  .cargando {\n    font-size: 18px;\n    text-align: center;\n  }\n\n  .seleccionada {\n    background-color: #fcf8e3;\n    font-weight: 500;\n  }\n\n  .seleccionada td {\n    border-left: 6px solid #2e6da4 !important;\n    box-sizing: content-box;\n  }\n\n  @media screen {\n    .scroll-vertical {\n      overflow-y: scroll;\n      height: 90vh;\n      padding-bottom: 5px;\n    }\n  }\n\n  @media (max-width: 1200px) {\n    .scroll-vertical {\n      overflow-y: scroll;\n      height: 85vh;\n      padding-bottom: 5px;\n    }\n  }\n</style>\n'],sourceRoot:""}]);const n=s},843:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,'table[data-v-20424c58]{table-layout:fixed;width:auto}th[data-v-20424c58]{background:#fff;position:-webkit-sticky;position:sticky}.colu[data-v-20424c58]{max-width:60px;width:60px}thead th[data-v-20424c58]{top:0;white-space:nowrap;z-index:1}tbody th[data-v-20424c58]{font-weight:400;left:0;z-index:2}.rotacion[data-v-20424c58],.rotacion[data-v-20424c58]:before{display:inline-block}.rotacion[data-v-20424c58]:before{content:"";padding-top:70%;vertical-align:middle;width:0}.contenido-rotacion[data-v-20424c58]{text-overflow:fas fa-flasksis;transform:translateX(50px) rotate(-45deg);transform-origin:bottom left}.encabezado-examenes[data-v-20424c58]{left:0;width:300px}.table-responsive[data-v-20424c58]{height:65vh}',"",{version:3,sources:["webpack://./resources/js/components/clientes/tarifas/tarifas.vue"],names:[],mappings:"AA8SA,uBACA,kBAAA,CACA,UACA,CAEA,oBACA,eAAA,CACA,uBAAA,CACA,eACA,CAEA,uBAEA,cAAA,CADA,UAEA,CAEA,0BAGA,KAAA,CADA,kBAAA,CAEA,SAEA,CAEA,0BAGA,eAAA,CAFA,MAAA,CACA,SAEA,CAOA,6DAHA,oBASA,CANA,kCACA,UAAA,CAEA,eAAA,CAEA,qBAAA,CAHA,OAIA,CAEA,qCAKA,6BAAA,CAFA,yCAAA,CADA,4BAIA,CAEA,sCAEA,MAAA,CADA,WAEA,CAEA,mCACA,WACA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"></alerta>\n    <div class="panel panel-oscuro">\n      <div class="panel-heading">\n        <h3 class="panel-title">Copiar tarifas</h3>\n      </div>\n      <div class="panel-body">\n        <form class="form-inline">\n          Copiar de\n          <select class="form-control input-sm" v-model="tarifaIdOrigen">\n            <option value="">Seleccione...</option>\n            <option v-for="tarifa in tarifasFiltradas" :value="tarifa.id">{{ tarifa.nombre }}</option>\n          </select>\n          a\n          <select class="form-control input-sm" v-model="tarifaIdDestino">\n            <option value="">Seleccione...</option>\n            <option v-for="tarifa in tarifasFiltradas" :value="tarifa.id">{{ tarifa.nombre }}</option>\n          </select>\n          con variación de\n          <div class="input-group">\n            <input type="number" style="width: 80px;" class="form-control input-sm text-right"\n                   placeholder="0.00"\n                   data-toggle="popover" data-trigger="focus" data-placement="bottom" title="Variación"\n                   data-content="Negativo para descuento o positivo para incremento"\n                   v-model="variacion"\n            />\n            <div class="input-group-addon">%</div>\n          </div>\n          <button type="button" class="btn btn-default btn-sm" :disabled="!puedeRealizarCopiado" @click="copiarTarifa">\n            Copiar\n          </button>\n        </form>\n      </div>\n    </div>\n    <div class="panel panel-gris">\n      <div class="panel-heading" style="display: flex; align-items: center; gap: 20px">\n        <h3 class="panel-title">\n          Precios\n        </h3>\n        <div style="width: 150px">\n          <select\n            id="tipo"\n            name="tipo"\n            class="form-control input-sm"\n            v-model="tipoTarifa"\n            required\n          >\n            <option value="VENTA">Venta</option>\n            <option value="COSTO">Costo</option>\n            <option value="REMISION">Remisión</option>\n          </select>\n        </div>\n      </div>\n      <div class="table-responsive">\n        <table id="precios" class="table table-condensed">\n          <thead>\n          <tr>\n            <th class="encabezado-examenes" style="z-index: 500">\n              Exámenes\n            </th>\n            <th v-for="(tarifa, i) in tarifasFiltradas" :key="tarifa.id" class="colu" v-bind:style="{\'z-index\': 500 - i}">\n              <div class="rotacion">\n                <div\n                  class="contenido-rotacion"\n                  data-toggle="tooltip"\n                  data-placement="right"\n                  :title="tarifa.nombre">\n                  {{ tarifa.nombre }}\n                </div>\n              </div>\n            </th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr v-for="(examen, indiceExamen) in examenes" :key="examen.id">\n            <th :title="examen.nombre" class="encabezado-examenes">{{ examen.nombre }}</th>\n            <td class="text-right colu" v-for="(tarifa, indiceTarifa) in tarifasFiltradas">\n              <div\n                role="button"\n                :id="`${indiceExamen+(indiceTarifa*examenes.length)+100}`"\n                @click="editar($event, examen.id, tarifa.id)"\n              >\n                <span v-if="!precios[examen.id][tarifa.id].editar">\n                  {{ precios[examen.id][tarifa.id].valor || \'-\' }}\n                </span>\n\n                <input\n                  class="form-control input-xs text-right"\n                  type="number"\n                  min="0"\n                  step="0.01"\n                  v-if="precios[examen.id][tarifa.id].editar"\n                  :tabindex="indiceExamen+(indiceTarifa*examenes.length)+100"\n                  :value="precios[examen.id][tarifa.id].valor"\n                  @keyup.enter="cambiarCelda"\n                  @keydown.tab="cambiarCelda"\n                  @blur="guardarValor($event, examen.id, tarifa.id)"\n                />\n              </div>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <cargando-modal ref="cargando"></cargando-modal>\n  </div>\n</template>\n\n<script>\n  import _ from \'lodash\';\n\n  export default {\n    props: [\'examenes\', \'tarifas\'],\n    data() {\n      return {\n        celdaActiva: null,\n        tarifaIdDestino: \'\',\n        tarifaIdOrigen: \'\',\n        tipoTarifa: \'VENTA\',\n        precios: {},\n        variacion: \'\',\n      }\n    },\n    created() {\n      this.mapearPrecios();\n    },\n    mounted() {\n      $(\'[data-toggle="popover"]\').popover();\n      $(\'[data-toggle="tooltip"]\').tooltip({container: \'body\'});\n    },\n    methods: {\n      cambiarCelda($event) {\n        let indiceActual = parseInt($event.target.tabIndex);\n        const indiceDestino = $event.shiftKey ? --indiceActual : ++indiceActual;\n\n        this.celdaActiva.editar = false;\n\n        $(`#${indiceDestino}`).click();\n      },\n      copiarTarifa() {\n        if (!this.tienePreciosTarifaOrigen) {\n          const tarifaOrigen = this.tarifasFiltradas.find((tarifa) => tarifa.id === this.tarifaIdOrigen);\n          this.mostrarErrores(`¡Error! La tarifa <strong>"${tarifaOrigen.nombre}"</strong> no tiene precios definidos.`);\n          return;\n        }\n\n        this.$refs.cargando.alternar();\n\n        axios.post(\'/api/examenes-tarifas\', {\n          tarifa_id_origen: this.tarifaIdOrigen,\n          tarifa_id_destino: this.tarifaIdDestino,\n          variacion: this.variacion,\n        }).then(response => {\n          location.reload();\n        }).catch(error => {\n          this.$refs.cargando.alternar();\n          this.mostrarErrores(\'¡Error!\', error.response.data.errors);\n        });\n      },\n      editar($event, examenId, tarifaId) {\n        if (this.celdaActiva) {\n          this.celdaActiva.editar = false;\n        }\n\n        this.celdaActiva = this.precios[examenId][tarifaId];\n        this.celdaActiva.editar = true;\n\n        this.$nextTick(_ => {\n          const destino = $event.currentTarget ? $event.currentTarget : $event.target;\n          window.setTimeout(_ => $(`#${destino.id} > :first-child`).focus(), 0);\n        });\n      },\n      guardarValor($event, examenId, tarifaId) {\n        const valor = this.precios[examenId][tarifaId];\n        const valorAnterior = valor.valor;\n\n        valor.valor = $event.target.value;\n\n        axios\n          .patch(`/api/examenes-tarifas/${examenId}`, {\n            tarifa_id: tarifaId,\n            valor: $event.target.value,\n          })\n          .then(() => {\n            valor.valor = $event.target.value;\n            this.$refs.alerta.ocultarAlertas();\n            this.mostrarMensaje(\'Precio guardado\');\n          })\n          .catch(error => {\n            valor.valor = valorAnterior;\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al guardar precio!\', errores);\n          })\n          .then(_ => {\n            valor.editar = false;\n          });\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      mostrarMensaje(mensaje) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje);\n      },\n      mapearPrecios() {\n        this.examenes.forEach(examen => {\n          const tarifas = {};\n\n          this.tarifas.forEach(tarifa => {\n            const examenTarifa = examen.tarifas.find(t => t.id === tarifa.id);\n            tarifas[tarifa.id] = {\n              editar: false,\n              valor: examenTarifa ? parseFloat(examenTarifa.pivot.valor) : \'\'\n            };\n          });\n\n          this.$set(this.precios, examen.id, tarifas);\n        })\n      },\n    },\n    computed: {\n      puedeRealizarCopiado() {\n        return this.tarifaIdOrigen !== \'\' && this.tarifaIdDestino !== \'\' && this.variacion !== \'\' && this.tarifaIdOrigen !== this.tarifaIdDestino;\n      },\n      tarifasFiltradas() {\n        return this.tarifas.filter((tarifa) => tarifa.tipo === this.tipoTarifa);\n      },\n      tienePreciosTarifaOrigen() {\n        return _\n          .chain(this.precios)\n          .mapValues((examen) => examen[this.tarifaIdOrigen].valor)\n          .values()\n          .compact()\n          .value()\n          .length > 0;\n      },\n    }\n  }\n<\/script>\n<style scoped>\n  table {\n    table-layout: fixed;\n    width: auto;\n  }\n\n  th {\n    background: white;\n    position: -webkit-sticky;\n    position: sticky;\n  }\n\n  .colu {\n    width: 60px;\n    max-width: 60px;\n  }\n\n  thead th {\n    /*height: 140px;*/\n    white-space: nowrap;\n    top: 0;\n    z-index: 1;\n    /*width: 60px;*/\n  }\n\n  tbody th {\n    left: 0;\n    z-index: 2;\n    font-weight: normal;\n  }\n\n  .rotacion {\n    /*width: 60px;*/\n    display: inline-block;\n  }\n\n  .rotacion:before {\n    content: \'\';\n    width: 0;\n    padding-top: 70%;\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  .contenido-rotacion {\n    /*max-width: 100px;*/\n    transform-origin: bottom left;\n    transform: translateX(50px) rotate(-45deg);\n    /*overflow: hidden;*/\n    text-overflow: fas fa-flasksis;\n  }\n\n  .encabezado-examenes {\n    width: 300px;\n    left: 0;\n  }\n\n  .table-responsive {\n    height: 65vh;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},8520:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"div#modalCargando.modal i.fa-spin[data-v-acea5eca]{text-shadow:0 0 5px #fff,1px 1px 10px #fdcf80,-1px -1px 10px #2579a9}","",{version:3,sources:["webpack://./resources/js/components/comunes/CargandoModal.vue"],names:[],mappings:"AAwCA,mDACA,oEACA",sourcesContent:['<template>\n  <div class="modal fade" id="modalCargando" tabindex="-1" role="dialog" data-keyboard="false" style="z-index: 1051"\n       data-backdrop="static">\n    <div class="modal-dialog modal-sm" style="padding-top: 60px">\n      <div class="modal-content">\n        <div class="modal-body">\n          <div class="row">\n            <div class="col-sm-12 text-center">\n              <i class="fas fa-circle-notch fa-spin fa-3x"></i>\n            </div>\n          </div>\n          <div class="row" style="padding-top: 5px">\n            <div class="col-sm-12">\n              <slot>\n                Por favor espere...<br/>La página está cargando.\n              </slot>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    methods: {\n      alternar() {\n        $(\'#modalCargando\').modal(\'toggle\');\n      },\n    }\n  }\n<\/script>\n\n<style scoped>\n  div#modalCargando.modal i.fa-spin {\n    text-shadow: 0 0 5px white, 1px 1px 10px #fdcf80, -1px -1px 10px #2579A9;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},6774:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".corner-ribbon[data-v-bac58d58]{background:rgba(255,0,0,.3);color:#fff;font:700 14px sans-serif;line-height:25px;position:fixed;text-align:center;top:9px;width:200px;z-index:1000}.corner-ribbon.left[data-v-bac58d58]{left:-50px;transform:rotate(-45deg)}.corner-ribbon.right[data-v-bac58d58]{left:auto;right:-80px;transform:rotate(45deg)}","",{version:3,sources:["webpack://./resources/js/components/comunes/Liston.vue"],names:[],mappings:"AA2CA,gCAGA,2BAAA,CACA,UAAA,CAHA,wBAAA,CAOA,gBAAA,CAHA,cAAA,CACA,iBAAA,CACA,OAAA,CALA,WAAA,CAOA,YACA,CAEA,qCACA,UAAA,CAKA,wBACA,CAEA,sCAEA,SAAA,CADA,WAAA,CAMA,uBACA",sourcesContent:["<template>\n  <div class=\"corner-ribbon right hidden-xs\">{{ texto }}</div>\n</template>\n<script>\n  export default {\n    props: {\n      texto: {type: String, default: 'PRO'}\n    }\n  }\n<\/script>\n<style scoped>\n  .corner-ribbon {\n    font: bold 14px sans-serif;\n    width: 200px;\n    background: rgba(255, 0, 0, 0.3);\n    color: #fff;\n    position: fixed;\n    text-align: center;\n    top: 9px;\n    line-height: 25px;\n    z-index: 1000;\n  }\n\n  .corner-ribbon.left {\n    left: -50px;\n    -ms-transform: rotate(-45deg);\n    -webkit-transform: rotate(-45deg);\n    -moz-transform: rotate(-45deg);\n    -o-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }\n\n  .corner-ribbon.right {\n    right: -80px;\n    left: auto;\n    -ms-transform: rotate(45deg);\n    -webkit-transform: rotate(45deg);\n    -moz-transform: rotate(-45deg);\n    -o-transform: rotate(-45deg);\n    transform: rotate(45deg);\n  }\n</style>\n"],sourceRoot:""}]);const n=s},6590:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".nav-vue[data-v-18c5766e]{margin-left:-49px;margin-right:-15px}@media (max-width:767px){.nav-vue[data-v-18c5766e]{margin-left:-15px}.contenedor[data-v-18c5766e]{padding-left:10px;padding-right:10px}.opciones[data-v-18c5766e]{margin-bottom:10px;margin-right:10px;margin-top:5px}}@media (min-width:767px){.contenedor[data-v-18c5766e]{align-items:center;display:flex;justify-content:space-between;padding-left:36px;padding-right:10px}}.opciones[data-v-18c5766e]{align-items:center;display:flex;font-size:.75rem;gap:.25rem;height:100%;justify-content:flex-end}.opciones a[data-v-18c5766e]{width:unset}[data-iniciales][data-v-18c5766e]:before{background:#636b6f;border-radius:50%;color:#fff;content:attr(data-iniciales);display:inline-block;font-size:1em;font-style:normal;height:1.85em;line-height:2em;text-align:center;vertical-align:middle;width:1.85em}.navbar-brand[data-v-18c5766e]{padding-right:0}.opciones button[data-v-18c5766e]{align-items:center;background-color:transparent;border-color:transparent;display:flex;gap:.5rem;padding:4px 6px;width:unset}.opciones button .fa-2x[data-v-18c5766e]{font-size:1.25em}.opciones button[data-v-18c5766e]:hover{background-color:#eeeeeee6}.open>.btn-default.dropdown-toggle[data-v-18c5766e]:focus{background-color:#fff;color:#333}.menu[data-v-18c5766e]{margin:3px 0 0}","",{version:3,sources:["webpack://./resources/js/components/comunes/Navbar.vue"],names:[],mappings:"AAufA,0BACA,iBAAA,CACA,kBACA,CAEA,yBACA,0BACA,iBACA,CAEA,6BACA,iBAAA,CACA,kBACA,CAEA,2BAEA,kBAAA,CACA,iBAAA,CAFA,cAGA,CACA,CAEA,yBACA,6BAQA,kBAAA,CAFA,YAAA,CACA,6BAAA,CANA,iBAAA,CACA,kBACA,CAOA,CAEA,2BAEA,kBAAA,CADA,YAAA,CAKA,gBAAA,CADA,UAAA,CADA,WAAA,CADA,wBAIA,CAEA,6BACA,WACA,CAEA,yCAUA,kBAAA,CADA,iBAAA,CAGA,UAAA,CAXA,4BAAA,CACA,oBAAA,CACA,aAAA,CACA,iBAAA,CAEA,aAAA,CACA,eAAA,CACA,iBAAA,CAGA,qBAAA,CANA,YAQA,CAEA,+BACA,eACA,CAEA,kCAMA,kBAAA,CALA,4BAAA,CACA,wBAAA,CAGA,YAAA,CAEA,SAAA,CAJA,eAAA,CACA,WAIA,CAEA,yCACA,gBACA,CAEA,wCACA,0BACA,CAEA,0DACA,qBAAA,CACA,UACA,CAEA,uBACA,cACA",sourcesContent:['<template>\n  <nav class="navbar navbar-fixed-top" :class="{\'nav-vue\': this.esVue}" v-if="mostrar">\n\n    <alerta ref="alerta"></alerta>\n\n    <div class="contenedor">\n      <div>\n        <div class="navbar-header">\n          <span class="navbar-brand">\n            <slot name="titulo">Título</slot>\n            <i class="fas fa-chevron-right fa-fw" aria-hidden="true"/>\n          </span>\n        </div>\n        <slot name="opciones"></slot>\n      </div>\n\n      <div class="opciones">\n\n        <button\n          class="btn btn-default dropdown-toggle"\n          type="button"\n          v-if="mostrarServidorLocal"\n          @click="verificarServidorLocal"\n          :title="etiquetaServidorLocal"\n        >\n            <i class="fas fa-print fa-2x fa-fw"></i>\n            <i class="icon-stack-1x fas fa-circle text-success"\n               v-if="!procesando.servidorLocal && printServer.encendido"></i>\n            <i class="icon-stack-1x fas fa-circle text-danger"\n               v-if="!procesando.servidorLocal && !printServer.encendido"></i>\n            <i class="icon-stack-1x fas fa-spinner fa-spin" v-if="procesando.servidorLocal"></i>\n        </button>\n\n        <div class="dropdown">\n          <button\n            v-if="$usuario.id && $canAny([\'crear-ordenes\', \'crear-pedidos\', \'crear-cotizaciones\', \'descargar-sistema-externo\', \'agendar-sistema-externo\'])"\n            class="btn btn-default dropdown-toggle"\n            type="button"\n            title="Nuevo"\n            data-toggle="dropdown"\n            aria-haspopup="true"\n            aria-expanded="true">\n            <i class="fas fa-plus-square fa-2x fa-fw"></i>\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu dropdown-menu-right menu">\n            <li v-if="$can(\'crear-ordenes\')">\n              <a href="/ordenes/create">\n                Nueva orden\n              </a>\n            </li>\n            <li v-if="$can(\'crear-pedidos\')">\n              <a href="/pedidos/create">\n                Nuevo pedido\n              </a>\n            </li>\n            <li v-if="$can(\'crear-cotizaciones\')">\n              <a href="/cotizaciones/create">\n                Nueva cotización\n              </a>\n            </li>\n            <li\n              v-if="$canAny([\'crear-ordenes\', \'crear-pedidos\', \'crear-cotizaciones\']) && $canAny([\'agendar-sistema-externo\', \'descargar-sistema-externo\'])"\n              role="separator" class="divider"></li>\n            <li v-if="$can(\'descargar-sistema-externo\')">\n              <a href="/iess/ordenes/create">\n                Nueva orden IESS AS400\n              </a>\n            </li>\n            <li v-if="$can(\'agendar-sistema-externo\')">\n              <a href="/iess/citas/create">\n                Nueva cita IESS AS400\n              </a>\n            </li>\n          </ul>\n        </div>\n\n        <button\n          class="btn btn-default"\n          type="button"\n          data-toggle="modal"\n          data-backdrop="static"\n          data-target="#modalVerAlertas"\n          :title="alertas + \' alertas sin leer\'"\n          v-if="alertas > 0">\n          <i class="fas fa-bell fa-2x fa-fw"></i>\n          <span\n            class="icon-stack-2x text-gris">{{ alertas }}\n          </span>\n        </button>\n\n        <slot name="configuraciones">\n          <button\n            v-if="mostrarConfiguraciones"\n            class="btn btn-default"\n            type="button"\n            @click="$emit(\'click-configuraciones\')">\n            <i class="fas fa-cog fa-2x fa-fw"></i>\n          </button>\n        </slot>\n\n        <div class="dropdown">\n          <button\n            class="btn btn-default dropdown-toggle"\n            type="button"\n            data-toggle="dropdown"\n            aria-haspopup="true"\n            aria-expanded="true"\n            :title="$usuario.sucursal && $usuario.sucursal.nombre"\n            @click="cargarSucursales"\n          >\n            <i class="fas fa-building fa-2x fa-fw"></i>\n            <span>{{ nombreSucursal }}</span>\n            <span v-show="$can(\'cambiar-sucursal\')" class="caret"></span>\n          </button>\n          <ul\n            v-if="$can(\'cambiar-sucursal\')"\n            class="dropdown-menu dropdown-menu-right menu"\n          >\n            <li v-if="procesando.cargarSucursales" class="text-center">\n              <i class="fa fa-spinner fa-spin fa-fw"></i> Cargando...\n            </li>\n            <li v-for="sucursal in sucursales" :class="{disabled: $usuario.sucursalId === sucursal.id}">\n              <a :href="`/sucursales/${sucursal.id}/cambiar`">\n                {{ sucursal.nombre }}\n                <i v-if="$usuario.sucursalId === sucursal.id" class="text-success fas fa-check fa-fw"></i>\n              </a>\n            </li>\n          </ul>\n        </div>\n\n        <div class="dropdown">\n          <button\n            class="btn btn-default dropdown-toggle"\n            type="button"\n            data-toggle="dropdown"\n            aria-haspopup="true"\n            aria-expanded="true"\n            title="Ayuda"\n          >\n            <i class="fas fa-question-circle fa-2x fa-fw"></i>\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu dropdown-menu-right menu">\n            <li>\n              <a href="#" @click="abrirChat">\n                <i class="far fa-comments fa-fw text-gris"></i>\n                Chat de soporte\n              </a>\n            </li>\n            <li>\n              <a href="#" @click="abrirAyuda">\n                <i class="fas fa-ticket-alt fa-fw text-gris"></i>\n                Ticket de soporte\n              </a>\n            </li>\n            <li>\n              <slot name="ayuda"></slot>\n            </li>\n            <li>\n              <a href="https://www.youtube.com/playlist?list=PLOwFKKdWz5lhhCqAdmlnjr6mtm4H6P2oo" target="_blank">\n                <i class="fab fa-youtube fa-fw text-gris"></i>\n                Videos\n              </a>\n            </li>\n          </ul>\n        </div>\n\n        <div class="dropdown" v-if="$usuario.id">\n          <button\n            class="btn btn-default dropdown-toggle"\n            type="button"\n            data-toggle="dropdown"\n            aria-haspopup="true"\n            aria-expanded="true"\n            :title="nombreCompletoUsuario">\n            <i :data-iniciales="inicialesUsuario"></i>\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu dropdown-menu-right menu">\n            <li style="padding: 5px 20px 0">\n              <strong>{{ nombreCompletoUsuario }}</strong>\n              <div>\n                <small>\n                  {{ $usuario.nombreUsuario }}\n                  <template v-if="$usuario.referenciaAuxiliar">\n                    ({{ $usuario.referenciaAuxiliar }})\n                  </template>\n                </small>\n              </div>\n              <div><small>{{ $usuario.correo }}</small></div>\n            </li>\n            <li role="separator" class="divider"></li>\n            <li>\n              <a href="" @click.prevent="cerrarSesion" style="color: #a94442;">\n                Cerrar sesión\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <ver-alertas-modal\n      :sonido="sonido"\n      @sonido-cambio="sonidoCambio">\n    </ver-alertas-modal>\n  </nav>\n</template>\n\n<script>\n  import VerAlertasModal from "../clientes/modals/VerAlertasModal";\n\n  export default {\n    components: {\n      VerAlertasModal\n    },\n    props: {\n      id: {type: String, default: \'navVue\'},\n      esVue: {type: Boolean, default: true},\n      mostrarConfiguraciones: {type: Boolean, default: false},\n      mostrarServidorLocal: {type: Boolean, default: false},\n    },\n    data() {\n      return {\n        procesando: {\n          verificarAlertas: false,\n          cargarSucursales: false,\n          servidorLocal: false,\n        },\n        mostrar: true,\n        alertas: 0,\n        sucursales: [],\n        intervalo: null,\n        sonido: true,\n        printServer: {\n          urlApiLocal: \'\',\n          encendido: false,\n        }\n      }\n    },\n    created() {\n      this.cargarSonidoDeCookie();\n      this.cargarUrlServidorLocal();\n      if (this.mostrarServidorLocal) {\n        window.setInterval(_ => this.verificarServidorLocal(), 20000);\n      }\n      // this.verificarAlertas();\n      // this.intervalo = window.setInterval(_ => this.verificarAlertas(), 10000);\n    },\n    methods: {\n      abrirAyuda() {\n        FreshworksWidget(\'open\');\n      },\n      abrirChat() {\n        window.fcWidget.open()\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      cargarSonidoDeCookie() {\n        const sonido = localStorage.getItem(\'alerta-sonido\');\n        if (sonido === null) {\n          return;\n        }\n\n        this.sonido = sonido === \'true\';\n      },\n      cerrarSesion() {\n        axios\n          .post(\'/logout\')\n          .then(() => {\n            window.location = \'/\';\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cerrar sesión\', errores);\n          });\n      },\n      cargarSucursales() {\n        if (!this.$can(\'cambiar-sucursal\')) {\n          return;\n        }\n\n        if (!_.isEmpty(this.sucursales)) {\n          return;\n        }\n\n        this.procesando.cargarSucursales = true;\n\n        axios\n          .get(\'/api/sucursales\')\n          .then(({data}) => {\n            this.sucursales = data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar sucursales\', errores);\n          })\n          .then(() => this.procesando.cargarSucursales = false);\n      },\n      verificarAlertas() {\n        if (this.procesando.verificarAlertas) {\n          return;\n        }\n\n        this.procesando.verificarAlertas = true;\n        axios\n          .get(\'/api/alertas?verificar=1\')\n          .then(({data}) => {\n            this.alertas = data;\n            if (this.alertas > 0) {\n              this.reproducirSonido();\n            }\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al verificar alertas\', errores);\n          })\n          .then(() => this.procesando.verificarAlertas = false);\n      },\n      reproducirSonido() {\n        if (!this.sonido) {\n          return;\n        }\n        const audio = new Audio(\'/storage/beep.mp3\');\n        audio.play();\n      },\n      sonidoCambio(sonido) {\n        this.sonido = sonido;\n        localStorage.setItem(\'alerta-sonido\', this.sonido);\n      },\n      cargarUrlServidorLocal() {\n        if (!this.mostrarServidorLocal) {\n          return;\n        }\n\n        this.procesando.servidorLocal = true;\n        this.printServer.encendido = false;\n\n        axios\n          .get(\'/api/servidor/local\')\n          .then(({data: data}) => {\n            this.printServer.urlApiLocal = `https://${data.dominioServidorLocal}:${data.puertoServidorLocal}`;\n            this.verificarServidorLocal();\n          })\n          .catch(() => {\n            this.printServer.encendido = false;\n          })\n          .then(() => this.procesando.servidorLocal = false);\n      },\n      verificarServidorLocal() {\n        this.procesando.servidorLocal = true;\n        this.printServer.encendido = false;\n\n        if (!this.printServer.urlApiLocal) {\n          console.info(\'URL Servidor local no definido\');\n        }\n\n        axios\n          .get(`${this.printServer.urlApiLocal}/api/estado`)\n          .then(() => {\n            this.printServer.encendido = true;\n            this.$root.$emit(\'servidor-local-estado\', true);\n          })\n          .catch(e => {\n            this.$root.$emit(\'servidor-local-estado\', false);\n            console.info(\'Error al conectar con Orión Print Server\', e);\n            this.printServer.encendido = false;\n          })\n          .then(() => this.procesando.servidorLocal = false);\n      },\n    },\n    computed: {\n      inicialesUsuario() {\n        return this.$usuario.nombres?.substring(0, 1) + this.$usuario.apellidos?.substring(0, 1);\n      },\n      nombreCompletoUsuario() {\n        return `${this.$usuario.nombres} ${this.$usuario.apellidos}`\n      },\n      nombreSucursal() {\n        if (!this.$usuario.sucursal) {\n          return \'\';\n        }\n        if (this.$usuario.sucursal.nombre.length > 8) {\n          return this.$usuario.sucursal.nombre.substring(0, 7).trim() + \'...\';\n        }\n        return this.$usuario.sucursal.nombre;\n      },\n      etiquetaServidorLocal() {\n        if (this.procesando.servidorLocal) {\n          return \'Verificando servidor de impresión\';\n        }\n\n        if (this.printServer.encendido) {\n          return \'Servidor de impresión encendido\';\n        }\n\n        if (!this.printServer.encendido) {\n          return \'Servidor de impresión apagado\';\n        }\n\n        return \'\';\n      }\n    }\n  }\n<\/script>\n<style scoped>\n  .nav-vue {\n    margin-left: -49px;\n    margin-right: -15px;\n  }\n\n  @media (max-width: 767px) {\n    .nav-vue {\n      margin-left: -15px\n    }\n\n    .contenedor {\n      padding-left: 10px;\n      padding-right: 10px;\n    }\n\n    .opciones {\n      margin-top: 5px;\n      margin-bottom: 10px;\n      margin-right: 10px;\n    }\n  }\n\n  @media (min-width: 767px) {\n    .contenedor {\n      padding-left: 36px;\n      padding-right: 10px;\n    }\n\n    .contenedor {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n  }\n\n  .opciones {\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    height: 100%;\n    gap: 0.25rem;\n    font-size: 0.75rem;\n  }\n\n  .opciones a {\n    width: unset;\n  }\n\n  [data-iniciales]:before {\n    content: attr(data-iniciales);\n    display: inline-block;\n    font-size: 1em;\n    font-style: normal;\n    width: 1.85em;\n    height: 1.85em;\n    line-height: 2.0em;\n    text-align: center;\n    border-radius: 50%;\n    background: #636b6f;\n    vertical-align: middle;\n    color: white;\n  }\n\n  .navbar-brand {\n    padding-right: 0;\n  }\n\n  .opciones button {\n    background-color: transparent;\n    border-color: transparent;\n    padding: 4px 6px 4px;\n    width: unset;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n  }\n\n  .opciones button .fa-2x {\n    font-size: 1.25em;\n  }\n\n  .opciones button:hover {\n    background-color: #eeeeeee6;\n  }\n\n  .open > .btn-default.dropdown-toggle:focus {\n    background-color: white;\n    color: #333333;\n  }\n\n  .menu {\n    margin: 3px 0 0 0;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},9222:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".panel-scroll[data-v-1e58e5ae]{border:1px solid #ddd;padding:15px}.cargar-mas[data-v-1e58e5ae]{font-size:16px}.cargar-mas[data-v-1e58e5ae]:hover{font-weight:700}","",{version:3,sources:["webpack://./resources/js/components/comunes/ScrollInfinito.vue"],names:[],mappings:"AAwEA,+BACA,qBAAA,CACA,YACA,CAEA,6BACA,cACA,CAEA,mCACA,eACA",sourcesContent:['<template>\n  <div id="lista-infinita">\n    <slot>\n      Listado\n    </slot>\n    <div class="panel-scroll text-center puntero cargar-mas" @click="cargarDatos" v-if="existenRegistros">\n      Cargar más\n    </div>\n    <div v-if="cantidadRegistros === 0 && !cargando" class="panel-scroll">\n      No existen {{ nombreLista }} con los filtros especificados\n    </div>\n    <div class="panel-scroll text-center" v-if="mostrarCargando && cargando" style="font-size: 18px;">\n      <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>Cargando...\n    </div>\n  </div>\n</template>\n<script>\n  export default {\n    props: {\n      existenMasRegistros: {type: Boolean},\n      cantidadRegistros: {type: Number, default: null},\n      cargando: {type: Boolean, required: true},\n      mostrarCargando: {type: Boolean, default: true},\n      nombreLista: {type: String, default: \'registros\'},\n    },\n    mounted() {\n      this.inicializarScrollInfinito();\n    },\n    methods: {\n      inicializarScrollInfinito() {\n        const lista = document.querySelector(\'#lista-infinita\');\n        lista.addEventListener(\'scroll\', () => {\n\n          if (lista.scrollTop + lista.clientHeight + 1 >= lista.scrollHeight) {\n            this.cargarDatos();\n          }\n        });\n      },\n      cargarDatos() {\n        if (!this.existenMasRegistros) {\n          return;\n        }\n\n        if (this.cargando) {\n          return;\n        }\n\n        this.$emit(\'cargar-datos\');\n      }\n    },\n    computed: {\n      existenRegistros() {\n        return this.existenMasRegistros && this.cantidadRegistros > 0 && !this.cargando;\n      }\n    }\n  }\n<\/script>\n<style scoped>\n  .panel-scroll {\n    border: 1px solid #ddd;\n    padding: 15px\n  }\n\n  .cargar-mas {\n    font-size: 16px;\n  }\n\n  .cargar-mas:hover {\n    font-weight: bold;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},5891:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".nav-tabs[data-v-1e8be5b1]{margin-bottom:15px}.fade-enter[data-v-1e8be5b1]{opacity:0}.fade-enter-active[data-v-1e8be5b1]{transition:opacity 2s}.fade-leave-active[data-v-1e8be5b1]{opacity:0;transition:opacity .5s}","",{version:3,sources:["webpack://./resources/js/components/consulta-resultados-empresas/ConsultaResultadosEmpresas.vue"],names:[],mappings:"AAoPA,2BACA,kBACA,CAEA,6BACA,SACA,CAEA,oCACA,qBACA,CAMA,oCAEA,SAAA,CADA,sBAEA",sourcesContent:['<template>\n  <div>\n    <div class="row">\n      <div class="col-sm-12 col-md-2">\n        <div class="form-group">\n          <div class="btn-group btn-group-justified" role="group">\n            <a\n              class="btn btn-default"\n              :class="{\'btn-primary\': porOrden}"\n              @click="cambiarComponente(\'ResultadosPorOrden\')"\n            >\n              Orden\n            </a>\n            <a\n              class="btn btn-default"\n              :class="{\'btn-primary\': porPaciente}"\n              @click="cambiarComponente(\'ResultadosPorPaciente\')"\n            >\n              Paciente\n            </a>\n          </div>\n        </div>\n      </div>\n      <div class="col-sm-12 col-md-2">\n        <div class="form-group">\n          <div class="btn-group btn-group-justified" role="group">\n            <a\n              type="button"\n              class="btn btn-default"\n              title="Humanos"\n              :class="{\'btn-primary\': filtros.tipoPaciente === \'h\'}"\n              @click="cambiarTipoPaciente(\'h\')"\n            >\n              <i class="fas fa-user"></i>\n            </a>\n            <a\n              type="button"\n              class="btn btn-default"\n              title="Animales"\n              :class="{\'btn-primary\': filtros.tipoPaciente === \'a\'}"\n              @click="cambiarTipoPaciente(\'a\')"\n            >\n              <i class="fas fa-paw"></i>\n            </a>\n            <a\n              type="button"\n              class="btn btn-default"\n              title="Objetos"\n              :class="{\'btn-primary\': filtros.tipoPaciente === \'o\'}"\n              @click="cambiarTipoPaciente(\'o\')"\n            >\n              <i class="fas fa-flask"></i>\n            </a>\n          </div>\n        </div>\n      </div>\n      <div class="col-sm-12 col-md-2 form-group">\n        <div class="input-group">\n          <input\n            id="fechaOrden"\n            class="form-control cursor-menu"\n            data-provide="datepicker"\n            data-date-format="yyyy-mm-dd"\n            data-date-today-highlight="true"\n            data-date-autoclose="true"\n            data-date-language="es"\n            placeholder="aaaa-mm-dd"\n            v-date="filtros.fechaOrden"\n            autocomplete="off"\n            readonly\n          />\n          <div class="input-group-btn">\n            <button class="btn btn-default" type="button" title="Borrar" @click="filtros.fechaOrden = \'\'">\n              <i class="fas fa-times" aria-hidden="true"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class="col-sm-2 form-group">\n        <select\n          class="form-control"\n          id="estado"\n          name="estado"\n          v-model="filtros.estado"\n          @change="cambioFiltro">\n          <option value="">Estado</option>\n          <option value="G">Generado</option>\n          <option value="P">En Proceso</option>\n          <option value="R">Reportado</option>\n          <option value="L">Preliminar</option>\n          <option value="V">Validado</option>\n        </select>\n      </div>\n      <div class="col-sm-12 col-md-2 form-group">\n        <v-select\n          id="subempresas"\n          class="form-control"\n          placeholder="Categoría..."\n          v-model="filtros.subempresaId"\n          :options="empresa.subempresas"\n          label="nombre"\n          :reduce="opcion => opcion.id"\n          @input="cambioFiltro">\n          <template #no-options>No existen coincidencias</template>\n        </v-select>\n      </div>\n      <div class="col-sm-12 col-md-2 form-group">\n        <input\n          class="form-control"\n          id="busqueda"\n          v-model="filtros.cadenaBusqueda"\n          placeholder="Nombre o Identificación"\n          @input="cambioFiltro"\n          data-toggle="popover"\n          data-trigger="manual"\n          data-placement="bottom"\n          title="Advertencia"\n          data-content="Debe ingresar al menos 3 caracteres"\n        />\n      </div>\n    </div>\n    <br>\n    <transition name="fade" mode="out-in">\n      <keep-alive>\n        <component\n          :is="componente"\n          v-bind="propsComponente">\n        </component>\n      </keep-alive>\n    </transition>\n  </div>\n</template>\n\n<script>\n  import ResultadosPorOrden from \'../consulta-resultados/ResultadosPorOrden.vue\';\n  import ResultadosPorPaciente from \'./ResultadosPorPaciente.vue\';\n\n  export default {\n    components: {\n      ResultadosPorOrden,\n      ResultadosPorPaciente\n    },\n    props: [\n      \'empresa\',\n      \'token\'\n    ],\n    data() {\n      return {\n        filtros: {\n          cadenaBusqueda: \'\',\n          fechaOrden: \'\',\n          subempresaId: \'\',\n          tipoPaciente: \'h\',\n          estado: \'\'\n        },\n        componente: \'ResultadosPorOrden\',\n      }\n    },\n    created() {\n      if (this.empresa.subempresas.length === 1) {\n        this.filtros.subempresaId = this.empresa.subempresas[0].id;\n      }\n    },\n    methods: {\n      cambioFiltro() {\n        if (this.porOrden) {\n          this.$refs.resultadosPorOrden?.cambioFiltro();\n        }\n        if (this.porPaciente) {\n          this.$refs.resultadosPorPaciente?.cambioFiltro();\n        }\n      },\n      cambiarComponente(componente) {\n        this.componente = componente;\n      },\n      cambiarTipoPaciente(tipo) {\n        this.filtros.tipoPaciente = tipo;\n        if (this.porOrden) {\n          this.$refs.resultadosPorOrden?.cambiarTipoPaciente();\n        }\n        if (this.porPaciente) {\n          this.$refs.resultadosPorPaciente?.cambiarTipoPaciente();\n        }\n      }\n    },\n    computed: {\n      porOrden() {\n        return this.componente === \'ResultadosPorOrden\';\n      },\n      porPaciente() {\n        return this.componente === \'ResultadosPorPaciente\';\n      },\n      nombreFiltroCategoria() {\n        const subempresa = this.empresa.subempresas.find(s => s.id === this.filtros.subempresaId)\n        return subempresa ? subempresa.nombre : \'\';\n      },\n      propsComponente() {\n        const props = {\n          token: this.token,\n          empresa: this.empresa,\n          filtros: this.filtros,\n        };\n\n        if (this.porOrden) {\n          return {...props, ref: \'resultadosPorOrden\', portal: \'empresas\'};\n        }\n        if (this.porPaciente) {\n          return {...props, ref: \'resultadosPorPaciente\'};\n        }\n      }\n    },\n    watch: {\n      \'filtros.fechaOrden\': function (val, oldVal) {\n        if (val !== oldVal) {\n          this.cambioFiltro();\n        }\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  .nav-tabs {\n    margin-bottom: 15px;\n  }\n\n  .fade-enter {\n    opacity: 0;\n  }\n\n  .fade-enter-active {\n    transition: opacity 2000ms;\n  }\n\n  .fade-leave {\n\n  }\n\n  .fade-leave-active {\n    transition: opacity 500ms;\n    opacity: 0;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},2517:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".panel-heading[data-v-329943f6]{align-items:center;display:flex;justify-content:space-between}","",{version:3,sources:["webpack://./resources/js/components/consulta-resultados-empresas/Paciente.vue"],names:[],mappings:"AA2MA,gCAGA,kBAAA,CAFA,YAAA,CACA,6BAEA",sourcesContent:['<template>\n  <div class="panel panel-gris">\n    <alerta ref="alerta"></alerta>\n\n    <div class="panel-heading">\n      <div>\n        <strong>\n          {{ paciente.tipo_paciente === \'App\\\\Models\\\\SujetoObjeto\' ? paciente.descripcion : paciente.nombre }}\n          ({{ paciente.numero_identificacion }})\n          <template v-if="paciente.numero_historia_clinica">\n            HC: {{ paciente.numero_historia_clinica }}\n          </template>\n        </strong>\n      </div>\n      <div>\n        <button\n          type="button"\n          class="btn btn-sm btn-default"\n          title="Ver comparativo de resultados"\n          @click="$emit(\'ver-comparativo-resultados\', paciente)"\n        >\n          <i class="fas fa-chart-line"></i>\n        </button>\n      </div>\n    </div>\n    <div class="table-responsive">\n      <table class="table table-bordered table-hover">\n        <thead>\n        <tr>\n          <th class="col-md-1 text-center">Orden No.</th>\n          <th class="col-md-1 text-center">Fecha</th>\n          <th class="col-md-3">Médico</th>\n          <th class="col-md-3">Categoría</th>\n          <th class="col-md-1 text-center">Estado</th>\n          <th class="col-md-2"></th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for="orden in paciente.ordenes">\n          <td class="text-center">\n            <small v-if="orden.numero_orden_externa">{{ orden.numero_orden_externa }}</small>\n            {{ orden.numero_orden }}\n          </td>\n          <td class="text-center">\n            <div class="no-salto-linea" :title="$usuario.zonaHoraria"\n                 v-html="$options.filters.fecha(orden.fecha_orden, \'YYYY-MM-DD </br> HH:mm\')">\n            </div>\n          </td>\n          <td>{{ orden.medico ? orden.medico.nombre_completo : \'-\' }}</td>\n          <td>{{ orden.subempresa.nombre }}</td>\n          <td class="text-center">\n            <orden-estado :estado="orden.estado"></orden-estado>\n            <div>\n              <small>\n                {{ cantidadDetallesOrdenesValidadas(orden) }}/{{ orden.detalles_ordenes.length }}\n              </small>\n            </div>\n          </td>\n          <td class="text-center">\n            <template v-if="ordenPagada(orden) && esOrdenValidada(orden)">\n              <a\n                :class="\'btn btn-sm btn-default\' + (cantidadDetallesOrdenesValidadas(orden) === 0 ? \' disabled\' : \'\')"\n                title="Imprimir resultados"\n                @click="abrirModalImprimirResultados(orden)">\n                <i class="fas fa-print"></i>\n              </a>\n\n              <span\n                data-toggle="tooltip"\n                data-placement="top"\n                :title="tooltipCorreo(orden)">\n                <a\n                  data-toggle="modal"\n                  data-target="#envioCorreo"\n                  :data-orden-id="orden.id"\n                  :data-orden-numero="orden.numero_orden"\n                  :data-correo="paciente.correo"\n                  class="btn btn-sm btn-default"\n                  :class="{disabled: cantidadDetallesOrdenesValidadas(orden) === 0 || !paciente.correo}">\n                  <i class="fas fa-envelope"></i>\n                </a>\n              </span>\n              <span\n                data-toggle="tooltip"\n                data-placement="top"\n                :title="tooltipAdjuntos(orden)">\n                <a\n                  @click="verAdjuntos(orden)"\n                  class="btn btn-sm btn-default"\n                  :class="{disabled: cantidadDetallesOrdenesValidadas(orden) === 0 || !orden.tiene_adjuntos}">\n                  <i class="fas fa-paperclip"></i>\n                </a>\n              </span>\n            </template>\n            <template v-else>\n              <div v-if="!ordenPagada(orden)">\n                <i class="fas fa-exclamation-triangle fa-fw" aria-hidden="true"></i>Pago incompleto\n              </div>\n              <div v-if="!esOrdenValidada(orden)">\n                <i class="fas fa-exclamation-triangle fa-fw" aria-hidden="true"></i>\n                Resultado(s) incompleto(s)\n              </div>\n            </template>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <enviar-correo-resultados\n      @correo-electronico-enviado="correoElectronicoEnviado">\n    </enviar-correo-resultados>\n\n    <imprimir-resultados-modal\n      portal="empresas"\n      :token="token"\n    />\n  </div>\n</template>\n\n<script>\n  import EnviarCorreoResultados from "./../consulta-resultados/EnviarCorreoResultados";\n  import {crearBotonConData} from "../../support/util";\n  import ImprimirResultadosModal from "../comunes/ImprimirResultadosModal";\n\n  export default {\n    props: [\n      \'paciente\',\n      \'token\',\n    ],\n    components: {\n      EnviarCorreoResultados,\n      ImprimirResultadosModal\n    },\n    methods: {\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      cantidadDetallesOrdenesValidadas(orden) {\n        return orden.detalles_ordenes.filter(detalleOrden => [\'X\', \'L\', \'V\'].includes(detalleOrden.estado)).length;\n      },\n      esOrdenValidada(orden) {\n        let esOrdenValidada = true;\n        if (orden.subempresa.empresa.descargar_resultados_con_validacion_completa) {\n          esOrdenValidada = orden.detalles_ordenes.length === this.cantidadDetallesOrdenesValidadas(orden);\n        }\n        return esOrdenValidada;\n      },\n      ordenPagada(orden) {\n        let totalAbonos = orden.abonos.reduce((totalAbonos, abono) => totalAbonos * 1 + abono.valor * 1, 0);\n        totalAbonos = Math.round((totalAbonos + Number.EPSILON) * 100) / 100\n\n        return orden.subempresa.empresa.portal_mostrar_ordenes_impagas\n          ? orden.subempresa.empresa.portal_mostrar_ordenes_impagas\n          : totalAbonos >= orden.valor_total * 1;\n      },\n      verAdjuntos(orden) {\n        this.$emit(\'ver-adjuntos\', orden);\n      },\n      tooltipCorreo(orden) {\n        let mensaje = \'Enviar por correo electrónico\';\n\n        if (!this.paciente.correo) {\n          mensaje = \'El paciente no tiene correo electrónico definido\';\n        }\n\n        if (this.cantidadDetallesOrdenesValidadas(orden) === 0) {\n          mensaje = \'No existen exámenes validados\';\n        }\n\n        return mensaje;\n      },\n      tooltipAdjuntos(orden) {\n        let mensaje = \'Ver adjuntos\';\n\n        if (this.cantidadDetallesOrdenesValidadas(orden) === 0) {\n          mensaje = \'No existen exámenes validados\';\n        }\n\n        if (!orden.tiene_adjuntos) {\n          mensaje = \'No tiene adjuntos\';\n        }\n\n        return mensaje;\n      },\n      correoElectronicoEnviado() {\n        this.mostrarExito(\'Correo electrónico enviado\');\n      },\n      abrirModalImprimirResultados(orden) {\n        const boton = crearBotonConData({\'orden\': orden});\n        $(\'#modalImprimirResultados\').modal({backdrop: \'static\'}, boton);\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  .panel-heading {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},9442:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".barra[data-v-3b2b4d5e]{margin-bottom:52px}.modal .page-header[data-v-3b2b4d5e]{margin:44px 15px 10px}td[data-v-3b2b4d5e]{vertical-align:top!important}.observacion[data-v-3b2b4d5e]{white-space:pre-wrap}","",{version:3,sources:["webpack://./resources/js/components/consulta-resultados-empresas/SolicitudesVisitas.vue"],names:[],mappings:"AA+bA,wBACA,kBACA,CAEA,qCACA,qBACA,CACA,oBACA,4BACA,CAEA,8BACA,oBACA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"></alerta>\n\n    <div class="barra row">\n      <div class="col-md-12">\n        <button\n          class="btn btn-primary"\n          type="button"\n          title="Nueva solicitud"\n          :disabled="guardando"\n          @click="abrirModalNuevaSolicitudVisita()"\n        >\n          <i class="fas fa-file fa-fw"></i>\n          Nueva\n        </button>\n      </div>\n    </div>\n\n    <table\n      v-if="!cargando && solicitudesVisitas.length > 0"\n      class="table table-striped table-bordered table-hover table-condensed"\n    >\n      <thead>\n      <tr>\n        <th class="text-center col-md-1">No.</th>\n        <th class="text-left col-md-4">Destino</th>\n        <th class="text-left col-md-3">Tareas</th>\n        <th class="text-center col-md-1">Estado</th>\n        <th class="col-md-3">\n        </th>\n      </tr>\n      </thead>\n      <tbody>\n      <template v-for="solicitudVisita in solicitudesVisitas">\n        <tr>\n          <td class="text-center">\n            {{ solicitudVisita.id }}\n          </td>\n          <td class="text-left">\n            {{ solicitudVisita.destino.nombre }}\n          </td>\n          <td class="text-left">\n            {{ obtenerNombresTareas(solicitudVisita.detalles) }}\n          </td>\n          <td class="text-center">\n            <estado-solicitud-visita :estado="solicitudVisita.estado"></estado-solicitud-visita>\n          </td>\n          <td class="text-center">\n            <button\n              class="btn btn-xs btn-default"\n              type="button"\n              title="Ver solicitud"\n              v-if="esPlanificada(solicitudVisita)"\n              :disabled="guardando"\n              @click="abrirModalVerSolicitudVisita(solicitudVisita)"\n            >\n              <i class="fas fa-eye fa-fw"></i>\n            </button>\n            <button\n              class="btn btn-xs btn-default"\n              type="button"\n              title="Editar solicitud"\n              v-if="!esPlanificada(solicitudVisita)"\n              :disabled="esPlanificada(solicitudVisita) || guardando"\n              @click="abrirModalEditarSolicitudVisita(solicitudVisita)"\n            >\n              <i class="fas fa-edit fa-fw"></i>\n            </button>\n            <button\n              class="btn btn-xs btn-danger"\n              type="button"\n              title="Eliminar solicitud"\n              :disabled="esPlanificada(solicitudVisita) || guardando"\n              @click="eliminarSolicitudVisita(solicitudVisita)"\n            >\n              <i class="fas fa-trash-alt fa-fw"></i>\n            </button>\n          </td>\n        </tr>\n      </template>\n      </tbody>\n    </table>\n\n    <cargando :cargando="cargando" :cantidad="solicitudesVisitas.length">\n      <template #no-resultado>No se han encontrado solicitudes de visitas</template>\n    </cargando>\n\n    <div class="paginacion alto-paginacion" v-show="cargando && solicitudesVisitas.length > 0">\n      <output class="pull-left"><strong>Total:</strong> {{ totalRegistros }}</output>\n      <paginate\n        v-model="paginaActual"\n        class="pull-right"\n        :page-count="totalPaginas"\n        :container-class="\'pagination\'"\n        :click-handler="cargarSolicitudesVisitas"\n        :prevText="\'Anterior\'"\n        :nextText="\'Siguiente\'"\n      ></paginate>\n    </div>\n\n    <modal\n      id="modalSolicitudeVisita"\n      v-model="mostrarModalSolicitudVisita"\n      tamano="lg"\n    >\n      <template #titulo>\n        Solicitud\n      </template>\n      <template #cuerpo>\n        <div class="row">\n          <div class="form-group">\n            <div class="col-md-7">\n              <label class="obligatorio">Destino</label>\n              <div>\n                <template v-if="edicion">\n                  <v-select\n                    id="destino_id"\n                    class="form-control input-sm"\n                    placeholder="Seleccione..."\n                    label="nombre"\n                    v-model="solicitudVisitaSeleccionada.destino_id"\n                    :options="destinos"\n                    :reduce="opcion => opcion.id"\n                    required\n                  >\n                    <template #no-options>No existen coincidencias</template>\n                  </v-select>\n                </template>\n                <template v-else>{{ solicitudVisitaSeleccionada.destino.nombre }}</template>\n              </div>\n            </div>\n            <div class="col-md-5" v-if="solicitudVisitaSeleccionada.id">\n              <label>Estado</label>\n              <div>\n                <estado-solicitud-visita :estado="solicitudVisitaSeleccionada.estado"></estado-solicitud-visita>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="row">\n          <h4 class="page-header">\n            Tareas\n            <button\n              class="btn btn-xs btn-primary"\n              type="button"\n              title="Agregar tarea"\n              rel="tooltip"\n              @click="agregarTarea(solicitudVisitaSeleccionada)"\n              :disabled="solicitudVisitaSeleccionada.detalles.length >= tareas.length"\n              v-if="edicion"\n            >\n              <i class="fas fa-plus fa-fw"></i>\n            </button>\n          </h4>\n        </div>\n\n        <div class="row">\n          <div class="col-md-12">\n            <div\n              v-if="solicitudVisitaSeleccionada.detalles.length === 0"\n              class="flex items-center justify-center"\n              style="height: 120px"\n            >\n              Agregue tareas para la solicitud de visita\n            </div>\n            <table\n              v-if="solicitudVisitaSeleccionada.detalles.length > 0"\n              class="table table-striped table-bordered table-hover table-condensed"\n            >\n              <thead>\n              <tr>\n                <th class="text-left col-md-4">Nombre</th>\n                <th class="text-left col-md-7">Observación</th>\n                <th v-if="edicion" class="text-left col-md-1"></th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr v-for="detalle in solicitudVisitaSeleccionada.detalles">\n                <td>\n                  <template v-if="edicion">\n                    <select\n                      class="form-control input-sm"\n                      v-model="detalle.destino_tarea_id"\n                    >\n                      <option :value="null">Seleccione...</option>\n                      <option v-for="tarea in tareasFiltradas(detalle.destino_tarea_id)" :value="tarea.id">{{ tarea.nombre }}</option>\n                    </select>\n                  </template>\n                  <template v-else>{{ detalle.tarea.nombre }}</template>\n                </td>\n                <td>\n                  <template v-if="edicion">\n                    <textarea v-model="detalle.observacion" class="form-control input-sm textarea" rows="2"></textarea>\n                  </template>\n                  <div v-else class="observacion">{{ detalle.observacion }}</div>\n                </td>\n                <td v-if="edicion" class="text-center">\n                  <button\n                    class="btn btn-xs btn-danger"\n                    type="button"\n                    title="Eliminar tarea"\n                    :disabled="guardando"\n                    @click="eliminarDetalle(detalle)"\n                  >\n                    <i class="fas fa-trash-alt fa-fw"></i>\n                  </button>\n                </td>\n              </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </template>\n      <template #pie>\n        <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">Cerrar</button>\n        <button\n          type="button"\n          class="btn btn-primary btn-sm"\n          v-if="edicion"\n          :disabled="guardando"\n          @click="guardarSolicitudVisita(solicitudVisitaSeleccionada)"\n        >\n          <i class="fas fa-save fa-fw" v-show="!guardando"></i>\n          <i class="fas fa-spinner fa-spin fa-fw" v-show="guardando"></i>\n          &nbsp;Guardar\n        </button>\n      </template>\n    </modal>\n  </div>\n</template>\n\n<script>\n  import _ from \'lodash\';\n  import Alerta from \'../alerta\';\n  import Cargando from \'../comunes/Cargando\';\n  import {Catalogo, EstadoSolicitudVisita as Estados} from \'../../support/constantes\';\n  import EstadoSolicitudVisita from "../comunes/EstadoSolicitudVisita";\n  import Modal from "../comunes/Modal";\n  import Paginate from \'vuejs-paginate\';\n\n  export default {\n    components: {\n      Alerta,\n      Cargando,\n      EstadoSolicitudVisita,\n      Modal,\n      Paginate\n    },\n    props: [\n      \'empresa\',\n      \'datos\',\n      \'token\'\n    ],\n    data() {\n      return {\n        cargando: false,\n        destinos: [],\n        edicion: false,\n        guardando: false,\n        mostrarModalSolicitudVisita: false,\n        paginaActual: 1,\n        solicitudesVisitas: [],\n        solicitudVisitaSeleccionada: {destino: {}, detalles: []},\n        tareas: [],\n        totalPaginas: 0,\n        totalRegistros: 0\n      }\n    },\n    mounted() {\n      this.cargarCatalogos();\n      this.cargarSolicitudesVisitas();\n    },\n    methods: {\n      abrirModalEditarSolicitudVisita(solicitudVisita) {\n        this.edicion = true;\n        this.abrirModalSolicitudVisita(solicitudVisita)\n      },\n      abrirModalNuevaSolicitudVisita() {\n        this.edicion = true;\n        this.abrirModalSolicitudVisita({\n          id: null,\n          destino_tarea_id: null,\n          detalles: []\n        });\n      },\n      abrirModalVerSolicitudVisita(solicitudVisita) {\n        this.edicion = false;\n        this.abrirModalSolicitudVisita(solicitudVisita)\n      },\n      abrirModalSolicitudVisita(solicitudVisita) {\n        this.seleccionarSolicitudVisita(solicitudVisita);\n        this.mostrarModalSolicitudVisita = true;\n      },\n      agregarTarea(solicitudVisita) {\n        solicitudVisita.detalles.push({\n          id: null,\n          destino_tarea_id: null,\n          observacion: \'\',\n        });\n      },\n      cargarCatalogos() {\n        axios\n          .all([\n            axios.get(\'api/catalogos\', {params: {\'token\': this.token, \'catalogo\': Catalogo.TAREAS}}),\n            axios.get(\'api/catalogos\', {params: {\'token\': this.token, \'catalogo\': Catalogo.DESTINOS}})\n          ])\n          .then(([tareas, destinos]) => {\n            this.tareas = tareas.data.data;\n            this.destinos = destinos.data.data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarError(\'¡Error al cargar catálogos!\', errores);\n          });\n      },\n      cargarSolicitudesVisitas() {\n        this.cargando = true;\n\n        const params = {\n          page: this.paginaActual,\n          token: this.token\n        }\n\n        axios\n          .get(\'api/solicitudes-visitas\', {params})\n          .then(({data}) => {\n            this.totalPaginas = data.last_page;\n            this.totalRegistros = data.total;\n            this.solicitudesVisitas = data.data;\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'Error al cargar solicitudes de visitas\', errores);\n          })\n          .finally(() => this.cargando = false);\n      },\n      eliminarDetalle(detalle) {\n        if (!confirm(\'¿Está seguro que desea eliminar?\')) {\n          return;\n        }\n\n        const indice = this.solicitudVisitaSeleccionada.detalles.indexOf(detalle);\n        this.solicitudVisitaSeleccionada.detalles.splice(indice, 1);\n      },\n      eliminarSolicitudVisita(solicitudVisita) {\n        if (!confirm(\'¿Está seguro que desea eliminar?\')) {\n          return;\n        }\n\n        this. guardando = true;\n        axios\n          .delete(`api/solicitudes-visitas/${solicitudVisita.id}`, {params: {token: this.token}})\n          .then(() => {\n            this.cargarSolicitudesVisitas();\n            this.mostrarExito(\'¡Solicitud de visita eliminada exitosamente!\');\n          })\n          .catch((error) => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al eliminar solicitud de visita!\', errores);\n          })\n          .finally(() => this.guardando = false);\n      },\n      esPlanificada(solicitudVisita) {\n        return solicitudVisita.estado === Estados.PLANIFICADA;\n      },\n      guardarSolicitudVisita(solicitudVisita) {\n        let url = \'api/solicitudes-visitas\';\n        let metodo = \'post\';\n        let accion = \'creada\';\n\n        if (solicitudVisita.id) {\n          url = `api/solicitudes-visitas/${solicitudVisita.id}`;\n          metodo = \'patch\';\n          accion = \'actualizada\';\n        }\n\n        const registro = {\n          destino_id: solicitudVisita.destino_id,\n          detalles: solicitudVisita.detalles.map((detalle) => ({\n            id: detalle.id,\n            destino_tarea_id: detalle.destino_tarea_id,\n            observacion: detalle.observacion,\n          }))\n        };\n\n        this.guardando = true;\n\n        axios[metodo](url, registro, {params: {token: this.token}})\n          .then(() => {\n            this.mostrarModalSolicitudVisita = false;\n            this.cargarSolicitudesVisitas();\n            this.mostrarExito(`¡Solicitud de visita ${accion} exitosamente!`);\n          })\n          .catch((error) => {\n            const errores = this.procesarErrorResponse(error);\n            this.mostrarErrores(\'¡Error al eliminar solicitud de visita!\', errores);\n          })\n          .finally(() => this.guardando = false);\n      },\n      mostrarErrores(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'danger\', mensaje, errores);\n      },\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      obtenerNombresTareas(detalles) {\n        return detalles\n          .map((detalle) => detalle.tarea.nombre)\n          .join(\', \');\n      },\n      seleccionarSolicitudVisita(solicitudVisita) {\n        this.solicitudVisitaSeleccionada = _.cloneDeep(solicitudVisita);\n      }\n    },\n    computed: {\n      tareasFiltradas() {\n        return (tareaId) => {\n          const tareasIds = _\n            .map(this.solicitudVisitaSeleccionada.detalles, \'destino_tarea_id\')\n            .filter((id) => id !== tareaId);\n\n          return this.tareas.filter((t) => !tareasIds.includes(t.id));\n        };\n      },\n    }\n  }\n<\/script>\n\n<style scoped>\n  .barra {\n    margin-bottom: 52px;\n  }\n\n  .modal .page-header {\n    margin: 44px 15px 10px;\n  }\n  td {\n    vertical-align: top !important;\n  }\n\n  .observacion {\n    white-space: pre-wrap;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},7592:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".fade-enter[data-v-6af35d5e]{opacity:0}.fade-enter-active[data-v-6af35d5e]{transition:opacity 2s}.fade-leave-active[data-v-6af35d5e]{opacity:0;transition:opacity .5s}","",{version:3,sources:["webpack://./resources/js/components/consulta-resultados-medicos/ConsultaResultadosMedicos.vue"],names:[],mappings:"AAiKA,6BACA,SACA,CAEA,oCACA,qBACA,CAMA,oCAEA,SAAA,CADA,sBAEA",sourcesContent:['<template>\n  <div>\n    <div class="row">\n      <div class="col-sm-3 form-group">\n        <div class="btn-group btn-group-justified btn-toggle" role="group">\n          <a\n            class="btn btn-default"\n            :class="{\'btn-primary\': porOrden}"\n            @click="cambiarComponente(\'ResultadosPorOrden\')"\n          >\n            Orden\n          </a>\n          <a\n            class="btn btn-default"\n            :class="{\'btn-primary\': porPaciente}"\n            @click="cambiarComponente(\'ResultadosPorPaciente\')"\n          >\n            Paciente\n          </a>\n        </div>\n      </div>\n      <div class="col-sm-2 form-group">\n        <div class="input-group">\n          <input\n            id="fechaOrden"\n            class="form-control cursor-menu"\n            data-provide="datepicker"\n            data-date-format="yyyy-mm-dd"\n            data-date-today-highlight="true"\n            data-date-autoclose="true"\n            data-date-language="es"\n            placeholder="aaaa-mm-dd"\n            v-date="filtros.fechaOrden"\n            autocomplete="off"\n            readonly\n          />\n          <div class="input-group-btn">\n            <button class="btn btn-default" type="button" title="Borrar" @click="filtros.fechaOrden = \'\'">\n              <i class="fas fa-times" aria-hidden="true"></i>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class="col-sm-2 form-group">\n        <select\n          class="form-control"\n          id="estado"\n          name="estado"\n          v-model="filtros.estado"\n          @change="cambioFiltro">\n          <option value="">Estado</option>\n          <option value="G">Generado</option>\n          <option value="P">En Proceso</option>\n          <option value="R">Reportado</option>\n          <option value="L">Preliminar</option>\n          <option value="V">Validado</option>\n        </select>\n      </div>\n      <div class="col-sm-5 form-group">\n        <input\n          class="form-control"\n          id="busqueda"\n          v-model="filtros.cadenaBusqueda"\n          placeholder="Nombre, Apellidos o Identificación"\n          @input="cambioFiltro"\n          data-toggle="popover"\n          data-trigger="manual"\n          data-placement="bottom"\n          title="Advertencia"\n          data-content="Debe ingresar al menos 3 caracteres"\n        />\n      </div>\n    </div>\n    <br>\n    <transition name="fade" mode="out-in">\n      <keep-alive>\n        <component :is="componente" v-bind="propsComponente"></component>\n      </keep-alive>\n    </transition>\n  </div>\n</template>\n\n<script>\n  import ResultadosPorOrden from \'../consulta-resultados/ResultadosPorOrden.vue\';\n  import ResultadosPorPaciente from \'./ResultadosPorPaciente.vue\';\n\n  export default {\n    components: {\n      ResultadosPorOrden,\n      ResultadosPorPaciente\n    },\n    props: [\'token\'],\n    data() {\n      return {\n        filtros: {\n          cadenaBusqueda: \'\',\n          fechaOrden: \'\',\n          estado: \'\'\n        },\n        componente: \'ResultadosPorOrden\'\n      }\n    },\n    methods: {\n      cambioFiltro() {\n        if (this.porOrden) {\n          this.$refs.resultadosPorOrden.cambioFiltro();\n        }\n        if (this.porPaciente) {\n          this.$refs.resultadosPorPaciente.cambioFiltro();\n        }\n      },\n      cambiarComponente(componente) {\n        this.componente = componente;\n      }\n    },\n    computed: {\n      porOrden() {\n        return this.componente === \'ResultadosPorOrden\';\n      },\n      porPaciente() {\n        return this.componente === \'ResultadosPorPaciente\';\n      },\n      propsComponente() {\n        const props = {token: this.token, filtros: this.filtros};\n        if (this.porOrden) {\n          return {...props, ref: \'resultadosPorOrden\', portal: \'medicos\'};\n        }\n        if (this.porPaciente) {\n          return {...props, ref: \'resultadosPorPaciente\'};\n        }\n      }\n    },\n    watch: {\n      \'filtros.fechaOrden\': function (val, oldVal) {\n        if (val !== oldVal) {\n          this.cambioFiltro();\n        }\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  .fade-enter {\n    opacity: 0;\n  }\n\n  .fade-enter-active {\n    transition: opacity 2000ms;\n  }\n\n  .fade-leave {\n\n  }\n\n  .fade-leave-active {\n    transition: opacity 500ms;\n    opacity: 0;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},512:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".panel-heading[data-v-554b7444]{align-items:center;display:flex;justify-content:space-between}","",{version:3,sources:["webpack://./resources/js/components/consulta-resultados-medicos/Paciente.vue"],names:[],mappings:"AA8KA,gCAGA,kBAAA,CAFA,YAAA,CACA,6BAEA",sourcesContent:['<template>\n  <div class="panel panel-gris">\n    <alerta ref="alerta"></alerta>\n\n    <div class="panel-heading">\n      <div>\n        <strong>{{\n            paciente.tipo_paciente === \'App\\\\Models\\\\SujetoObjeto\' ? paciente.descripcion : paciente.nombre_paciente\n          }} ({{ paciente.numero_identificacion }})</strong>\n      </div>\n      <div>\n        <button\n          type="button"\n          class="btn btn-sm btn-default"\n          title="Ver comparativo de resultados"\n          @click="$emit(\'ver-comparativo-resultados\', paciente)">\n          <i class="fas fa-chart-line"></i>\n        </button>\n      </div>\n    </div>\n    <div class="table-responsive">\n      <table class="table table-bordered table-hover">\n        <thead>\n        <tr>\n          <th class="text-center col-md-1">Número</th>\n          <th class="text-center col-md-2">Fecha</th>\n          <th>Médico</th>\n          <th class="text-center col-md-1">Estado</th>\n          <th class="text-center col-md-2"></th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for="orden in paciente.ordenes">\n          <td class="text-center">{{ orden.numero_orden }}</td>\n          <td class="text-center no-salto-linea">{{ orden.fecha_orden | fecha(\'YYYY-MM-DD\') }}</td>\n          <td>{{ orden.medico ? orden.medico.nombre_completo : \'\' }}</td>\n          <td class="text-center">\n            <orden-estado :estado="orden.estado"></orden-estado>\n            <div>\n              <small>\n                {{ cantidadDetallesOrdenesValidadas(orden) }}/{{ orden.detalles_ordenes.length }}\n              </small>\n            </div>\n          </td>\n          <td class="text-center">\n            <template v-if="ordenPagada(orden)">\n              <a\n                :class="\'btn btn-sm btn-default\' + (cantidadDetallesOrdenesValidadas(orden) === 0 ? \' disabled\' : \'\')"\n                title="Imprimir resultados"\n                @click="abrirModalImprimirResultados(orden)">\n                <i class="fas fa-print"></i>\n              </a>\n              <span\n                data-toggle="tooltip"\n                data-placement="top"\n                :title="tooltipCorreo(orden)">\n                <a\n                  data-toggle="modal"\n                  data-target="#envioCorreo"\n                  :data-orden-id="orden.id"\n                  :data-orden-numero="orden.numero_orden"\n                  :data-correo="paciente.correo"\n                  class="btn btn-sm btn-default"\n                  :class="{disabled: cantidadDetallesOrdenesValidadas(orden) === 0 || !paciente.correo}">\n                  <i class="fas fa-envelope"></i>\n                </a>\n              </span>\n              <span\n                data-toggle="tooltip"\n                data-placement="top"\n                :title="tooltipAdjuntos(orden)">\n                <a @click="verAdjuntos(orden)"\n                   class="btn btn-sm btn-default"\n                   :class="{disabled: cantidadDetallesOrdenesValidadas(orden) === 0 || !orden.tiene_adjuntos}">\n                  <i class="fas fa-paperclip"></i>\n                </a>\n              </span>\n            </template>\n            <template v-else>\n              <i class="fas fa-exclamation-triangle fa-fw" aria-hidden="true"></i>Pago incompleto\n            </template>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <enviar-correo-resultados\n      @correo-electronico-enviado="correoElectronicoEnviado">\n    </enviar-correo-resultados>\n\n    <imprimir-resultados-modal\n      portal="medicos"\n      :token="this.token"\n    />\n  </div>\n</template>\n\n<script>\n  import EnviarCorreoResultados from "./../consulta-resultados/EnviarCorreoResultados";\n  import {crearBotonConData} from "../../support/util";\n  import ImprimirResultadosModal from "../comunes/ImprimirResultadosModal";\n\n  export default {\n    props: [\n      \'paciente\',\n      \'token\',\n    ],\n    components: {\n      EnviarCorreoResultados,\n      ImprimirResultadosModal\n    },\n    methods: {\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      cantidadDetallesOrdenesValidadas(orden) {\n        return orden.detalles_ordenes.filter(detalleOrden => [\'X\', \'L\', \'V\'].includes(detalleOrden.estado)).length;\n      },\n      ordenPagada(orden) {\n        let totalAbonos = orden.abonos.reduce((totalAbonos, abono) => totalAbonos * 1 + abono.valor * 1, 0);\n        totalAbonos = Math.round((totalAbonos + Number.EPSILON) * 100) / 100\n\n        return orden.subempresa.empresa.portal_mostrar_ordenes_impagas\n          ? orden.subempresa.empresa.portal_mostrar_ordenes_impagas\n          : totalAbonos >= orden.valor_total * 1;\n      },\n      verAdjuntos(orden) {\n        this.$emit(\'ver-adjuntos\', orden);\n      },\n      tooltipCorreo(orden) {\n        let mensaje = \'Enviar por correo electrónico\';\n\n        if (!this.paciente.correo) {\n          mensaje = \'El paciente no tiene correo electrónico definido\';\n        }\n\n        if (this.cantidadDetallesOrdenesValidadas(orden) === 0) {\n          mensaje = \'No existen exámenes validados\';\n        }\n\n        return mensaje;\n      },\n      tooltipAdjuntos(orden) {\n        let mensaje = \'Ver adjuntos\';\n\n        if (this.cantidadDetallesOrdenesValidadas(orden) === 0) {\n          mensaje = \'No existen exámenes validados\';\n        }\n\n        if (!orden.tiene_adjuntos) {\n          mensaje = \'No tiene adjuntos\';\n        }\n\n        return mensaje;\n      },\n      correoElectronicoEnviado() {\n        this.mostrarExito(\'Correo electrónico enviado\');\n      },\n      abrirModalImprimirResultados(orden) {\n        const boton = crearBotonConData({\'orden\': orden});\n        $(\'#modalImprimirResultados\').modal({backdrop: \'static\'}, boton);\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  .panel-heading {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},6508:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".panel-heading[data-v-3e5733b3]{align-items:center;display:flex;justify-content:space-between}","",{version:3,sources:["webpack://./resources/js/components/consulta-resultados-pacientes/Paciente.vue"],names:[],mappings:"AAiMA,gCAGA,kBAAA,CAFA,YAAA,CACA,6BAEA",sourcesContent:['<template>\n  <div class="panel panel-gris">\n    <alerta ref="alerta"></alerta>\n\n    <div class="panel-heading">\n      <div>\n        <strong>{{ paciente.nombre_paciente }} ({{ paciente.numero_identificacion }})</strong>\n      </div>\n      <div>\n        <button\n          type="button"\n          class="btn btn-sm btn-default"\n          @click="$emit(\'ver-comparativo-resultados\', paciente)"\n        >\n          <i class="fas fa-chart-line"></i>\n        </button>\n      </div>\n    </div>\n    <div class="table-responsive" v-if="paciente.ordenes.length >0">\n      <table class="table table-bordered table-hover">\n        <thead>\n        <tr>\n          <th class="text-center col-md-2">Número</th>\n          <th class="text-center col-md-2">Fecha</th>\n          <th>Médico</th>\n          <th class="text-center col-md-1">Estado</th>\n          <th class="col-md-2"></th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for="orden in paciente.ordenes">\n          <td class="text-center">{{ orden.numero_orden }}</td>\n          <td class="text-center no-salto-linea">{{ orden.fecha_orden | fecha(\'YYYY-MM-DD\') }}</td>\n          <td>{{ orden.medico ? orden.medico.nombre_completo : \'\' }}</td>\n          <td class="text-center">\n            <orden-estado :estado="orden.estado"></orden-estado>\n            <div>\n              <small>\n                {{ cantidadDetallesOrdenesValidadas(orden) }}/{{ orden.detalles_ordenes.length }}\n              </small>\n            </div>\n          </td>\n          <td class="text-center">\n            <template v-if="ordenPagada(orden)">\n              <a\n                :class="\'btn btn-sm btn-default\' + (cantidadDetallesOrdenesValidadas(orden) === 0 ? \' disabled\' : \'\')"\n                title="ver resultados"\n                @click="abrirModalVerResultados(orden)">\n                <i class="fas fa-eye"></i>\n              </a>\n\n              <a\n                :class="\'btn btn-sm btn-default\' + (cantidadDetallesOrdenesValidadas(orden) === 0 ? \' disabled\' : \'\')"\n                title="Imprimir resultados"\n                @click="abrirModalImprimirResultados(orden)">\n                <i class="fas fa-print"></i>\n              </a>\n\n              <span\n                data-toggle="tooltip"\n                data-placement="top"\n                :title="tooltipCorreo(orden)">\n                <a\n                  data-toggle="modal"\n                  data-target="#envioCorreo"\n                  :data-orden-id="orden.id"\n                  :data-orden-numero="orden.numero_orden"\n                  :data-correo="paciente.correo"\n                  class="btn btn-sm btn-default"\n                  :class="{disabled: cantidadDetallesOrdenesValidadas(orden) === 0 || !paciente.correo}">\n                  <i class="fas fa-envelope"></i>\n                </a>\n              </span>\n              <span\n                data-toggle="tooltip"\n                data-placement="top"\n                :title="tooltipAdjuntos(orden)">\n                <a\n                  @click="verAdjuntos(orden)"\n                  class="btn btn-sm btn-default"\n                  :class="{disabled: cantidadDetallesOrdenesValidadas(orden) === 0 || !orden.tiene_adjuntos}">\n                  <i class="fas fa-paperclip"></i>\n                </a>\n              </span>\n            </template>\n            <template v-else>\n              <i class="fas fa-exclamation-triangle fa-fw" aria-hidden="true"></i>Pago incompleto\n            </template>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <div v-else style="padding: 5px">\n      No tiene resultados\n    </div>\n    <enviar-correo-resultados\n      @correo-electronico-enviado="correoElectronicoEnviado">\n    </enviar-correo-resultados>\n\n    <imprimir-resultados-modal\n      portal="pacientes"\n      :token="this.token"\n    />\n\n    <resultados-modal portal="pacientes" :token="token"></resultados-modal>\n\n  </div>\n</template>\n\n<script>\n  import EnviarCorreoResultados from "./../consulta-resultados/EnviarCorreoResultados";\n  import {crearBotonConData} from "../../support/util";\n  import ImprimirResultadosModal from "../comunes/ImprimirResultadosModal";\n  import ResultadosModal from "../clientes/modals/ResultadosModal";\n\n  export default {\n    props: [\n      \'paciente\',\n      \'token\',\n    ],\n    components: {\n      EnviarCorreoResultados,\n      ImprimirResultadosModal,\n      ResultadosModal\n    },\n    methods: {\n      mostrarExito(mensaje, errores) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, errores);\n      },\n      cantidadDetallesOrdenesValidadas(orden) {\n        return orden.detalles_ordenes.filter(detalleOrden => [\'X\', \'L\', \'V\'].includes(detalleOrden.estado)).length;\n      },\n      ordenPagada(orden) {\n        let totalAbonos = orden.abonos.reduce((totalAbonos, abono) => totalAbonos * 1 + abono.valor * 1, 0);\n        totalAbonos = Math.round((totalAbonos + Number.EPSILON) * 100) / 100;\n\n        return orden.subempresa.empresa.portal_mostrar_ordenes_impagas\n          ? orden.subempresa.empresa.portal_mostrar_ordenes_impagas\n          : totalAbonos >= orden.valor_total * 1;\n      },\n      verAdjuntos(orden) {\n        this.$emit(\'ver-adjuntos\', orden);\n      },\n      tooltipCorreo(orden) {\n        let mensaje = \'Enviar por correo electrónico\';\n\n        if (!this.paciente.correo) {\n          mensaje = \'El paciente no tiene correo electrónico definido\';\n        }\n\n        if (this.cantidadDetallesOrdenesValidadas(orden) === 0) {\n          mensaje = \'No existen exámenes validados\';\n        }\n\n        return mensaje;\n      },\n      tooltipAdjuntos(orden) {\n        let mensaje = \'Ver adjuntos\';\n\n        if (this.cantidadDetallesOrdenesValidadas(orden) === 0) {\n          mensaje = \'No existen exámenes validados\';\n        }\n\n        if (!orden.tiene_adjuntos) {\n          mensaje = \'No tiene adjuntos\';\n        }\n\n        return mensaje;\n      },\n      correoElectronicoEnviado() {\n        this.mostrarExito(\'Correo electrónico enviado\');\n      },\n      abrirModalImprimirResultados(orden) {\n        const boton = crearBotonConData({\'orden\': orden});\n        $(\'#modalImprimirResultados\').modal({backdrop: \'static\'}, boton);\n      },\n      abrirModalVerResultados(orden) {\n        const boton = crearBotonConData({\'orden\': orden});\n        $(\'#modalResultados\').modal({backdrop: \'static\'}, boton);\n      },\n    }\n  }\n<\/script>\n\n<style scoped>\n  .panel-heading {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},8607:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"#modalHistorialResultados .modal-content[data-v-29a0a555]{top:11px!important}","",{version:3,sources:["webpack://./resources/js/components/consulta-resultados/ComparativoResultados.vue"],names:[],mappings:"AA+TA,0DACA,kBACA",sourcesContent:['<template>\n  <div>\n    \x3c!--MODAL COMPARATIVO RESULTADOS--\x3e\n    <div class="modal fade" tabindex="-1" role="dialog" id="modalComparativoResultados">\n      <div class="modal-dialog modal-lg" role="document">\n        <div class="modal-content">\n          <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n              <span\n                aria-hidden="true">&times;\n              </span>\n            </button>\n            <h5>\n              {{ paciente.nombre_paciente }}\n            </h5>\n            <h4 class="modal-title">Comparativo de Resultados</h4>\n          </div>\n          <div class="modal-body">\n            <div class="row">\n              <div class="col-md-5">\n                <div class="panel panel-default">\n                  <div class="panel-heading">Exámenes</div>\n                  <div class="table-responsive" style="height: 280px; overflow: auto">\n                    <table class="table table-hover table-condensed"\n                           v-if="!cargandoExamenes && examenes.length > 0">\n                      <tbody>\n                      <tr\n                        v-for="(examen, indice) in examenes"\n                        :key="indice"\n                        :class="{ \'bg-warning\' : examen === examenSeleccionado}"\n                        @click="seleccionarExamen(examen)"\n                      >\n                        <td class="puntero">{{ examen.nombre }}</td>\n                      </tr>\n                      </tbody>\n                    </table>\n                    <table class="table" v-else>\n                      <tr>\n                        <td class="text-center" style="height: 280px; vertical-align: middle">\n                          <h4 v-if="cargandoExamenes">\n                            <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>Cargando...\n                          </h4>\n                          <p v-if="!cargandoExamenes && examenes.length === 0">\n                            No se han encontrado exámenes para el paciente\n                          </p>\n                        </td>\n                      </tr>\n                    </table>\n                  </div>\n                </div>\n              </div>\n              <div class="col-md-7">\n                <div class="panel panel-default">\n                  <div class="panel-heading">Parámetros</div>\n                  <div\n                    class="table-responsive"\n                    style="height: 280px; overflow: auto"\n                  >\n                    <table\n                      class="table table-hover table-condensed"\n                      v-if="!cargandoParametros && examenSeleccionado && parametros.length > 0"\n                    >\n                      <tbody>\n                      <tr\n                        v-for="(parametro, indice) in parametros"\n                        :key="indice"\n                      >\n                        <td class="col-md-10">{{ parametro.nombre_parametro }}</td>\n                        <td class="col-md-2 text-center">\n                          <button type="button"\n                                  title="Historial de Resultados"\n                                  class="btn btn-xs btn-default"\n                                  @click="abrirHistorial(parametro)">\n                            <i class="fas fa-history"></i>\n                          </button>\n                        </td>\n                      </tr>\n                      </tbody>\n                    </table>\n                    <table class="table" v-else>\n                      <tr>\n                        <td class="text-center" style="height: 280px; vertical-align: middle">\n                          <h4 v-if="cargandoParametros && examenSeleccionado">\n                            <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>Cargando...\n                          </h4>\n                          <p v-if="!cargandoParametros && examenSeleccionado && parametros.length === 0">\n                            No se han encontrado parámetros para el examen seleccionado\n                          </p>\n                          <p v-if="!cargandoParametros && !examenSeleccionado">\n                            Por favor seleccione un examen\n                          </p>\n                        </td>\n                      </tr>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">\n              <i class="fas fa-times fa-fw"></i>Cerrar\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!--MODAL HISTORIAL RESULTADOS--\x3e\n    <div class="modal fade" id="modalHistorialResultados" tabindex="-1" role="dialog">\n      <div class="modal-dialog" :class="{\'modal-lg\': parametroSeleccionado.tipo_parametro === \'N\'}"\n           role="document">\n        <div class="modal-content" style="">\n          <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n              <span aria-hidden="true">&times;</span>\n            </button>\n            <h5>\n              {{ paciente.nombre_paciente }}\n            </h5>\n            <h4 class="modal-title">Historial de {{ parametroSeleccionado.nombre_parametro }}</h4>\n          </div>\n          <div class="modal-body">\n            <div class="row" v-if="!cargandoHistorial">\n              <div\n                :class="[\'N\', \'F\'].includes(parametroSeleccionado.tipo_parametro) ? \'col-md-6\' : \'col-md-8 col-md-offset-2\'">\n                <div style="height: 280px; overflow: auto">\n                  <table class="table table-hover table-condensed">\n                    <thead>\n                    <tr>\n                      <th class="col-sm-4">Orden</th>\n                      <th class="col-sm-4">Fecha</th>\n                      <th class="col-sm-4 text-center">Valor</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for="historia in historial">\n                      <td>{{ historia.numero }}</td>\n                      <td>{{ historia.fecha }}</td>\n                      <td class="text-right">\n                        {{ historia.resultado }} {{ historia.unidadMedida }}\n                      </td>\n                    </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n              <div class="col-md-6" v-if="[\'N\', \'F\'].includes(parametroSeleccionado.tipo_parametro)">\n                <grafico-historial\n                  style="height: 280px;"\n                  v-if="!cargandoHistorial"\n                  :datos="datosGraficoHistorial"\n                >\n                </grafico-historial>\n              </div>\n            </div>\n            <div style="height: 280px" v-if="cargandoHistorial">\n              <table class="table">\n                <tr>\n                  <td class="text-center" style="height: 220px; vertical-align: middle">\n                    <h4>\n                      <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>Cargando...\n                    </h4>\n                  </td>\n                </tr>\n              </table>\n            </div>\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">\n              <i class="fas fa-times fa-fw"></i>Cerrar\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import graficoHistorial from \'../clientes/reportes/graficoHistorial\';\n\n  export default {\n    components: {\n      graficoHistorial\n    },\n    props: [\n      \'paciente\',\n      \'tipoPaciente\',\n      \'visible\',\n    ],\n    data() {\n      return {\n        cargandoExamenes: false,\n        cargandoHistorial: false,\n        cargandoParametros: false,\n        examenes: [],\n        examenSeleccionado: {},\n        historial: [],\n        parametros: [],\n        parametroSeleccionado: {},\n      }\n    },\n    mounted() {\n      $(\'#modalComparativoResultados\').on(\'hide.bs.modal\', e => {\n        this.examenes = [];\n        this.examenSeleccionado = {};\n        this.parametros = [];\n        this.$emit(\'cerrado\');\n      });\n      $(\'#modalHistorialResultados\').on(\'hide.bs.modal\', e => {\n        this.historial = [];\n        this.parametroSeleccionado = {};\n      });\n      $(\'#modalHistorialResultados\').on(\'hidden.bs.modal\', e => {\n        $(\'body\').addClass(\'modal-open\');\n      });\n    },\n    methods: {\n      abrirComparativo() {\n        $(\'#modalComparativoResultados\').modal();\n        this.cargandoExamenes = true;\n\n        axios\n          .get(`/examenes`, {\n            params: {\n              pacienteId: this.paciente.id,\n              tipoPaciente: this.tipoPaciente,\n            }\n          })\n          .then(({data: {data}}) => this.examenes = data)\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            console.error(errores);\n            this.$emit(\'errpor\', \'Error al cargar exámenes\');\n          })\n          .then(() => this.cargandoExamenes = false);\n      },\n      abrirHistorial(parametro) {\n        $(\'#modalHistorialResultados\').modal();\n        this.cargandoHistorial = true;\n        this.parametroSeleccionado = parametro;\n\n        axios\n          .get(`/historial`, {\n            params: {\n              nombreParametro: parametro.nombre_parametro,\n              ordenParametro: parametro.orden,\n              nombreExamen: this.examenSeleccionado.nombre,\n              pacienteId: this.paciente.id,\n              tipoPaciente: this.tipoPaciente,\n            }\n          })\n          .then(response => {\n            this.historial = response.data.data.map(parametro => {\n              return {\n                numero: parametro.numero_orden,\n                fecha: this.fechaALocal(parametro.fecha_orden, \'YYYY-MM-DD\'),\n                resultado: parametro.resultado,\n                unidadMedida: parametro.unidad_medida\n              };\n            });\n\n            const historialOrdenAscendente = _.orderBy(this.historial, [\'fecha\'], [\'asc\']);\n            this.datosGraficoHistorial = {\n              labels: historialOrdenAscendente.map(dato => dato.fecha),\n              datasets: [\n                {\n                  label: parametro.nombre_parametro,\n                  backgroundColor: \'#d9edf7\',\n                  data: historialOrdenAscendente.map(dato => dato.resultado),\n                }\n              ]\n            };\n          })\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            console.error(errores);\n            this.$emit(\'errpor\', \'Error al cargar historial\');\n          })\n          .then(() => this.cargandoHistorial = false);\n      },\n      seleccionarExamen(examen) {\n        this.examenSeleccionado = examen;\n        this.cargandoParametros = true;\n\n        axios\n          .get(`/parametros`, {\n            params: {\n              nombreExamen: this.examenSeleccionado.nombre,\n              pacienteId: this.paciente.id,\n              tipoPaciente: this.tipoPaciente,\n            }\n          })\n          .then(response => this.parametros = response.data.data)\n          .catch(error => {\n            const errores = this.procesarErrorResponse(error);\n            console.error(errores);\n            this.$emit(\'errpor\', \'Error al cargar parámetros\');\n          })\n          .then(() => this.cargandoParametros = false);\n      }\n    },\n    watch: {\n      visible(valorNuevo, valorAnterior) {\n        if (valorNuevo) {\n          this.abrirComparativo();\n        }\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  #modalHistorialResultados .modal-content {\n    top: 11px !important;\n  }\n</style>\n'],sourceRoot:""}]);const n=s},8283:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,"@media (max-width:767px){a[data-v-9bbd19b0]{width:100%}}","",{version:3,sources:["webpack://./resources/js/components/resultados/Resultados.vue"],names:[],mappings:"AAsKA,yBACA,mBACA,UACA,CACA",sourcesContent:['<template>\n  <div>\n    <alerta ref="alerta"></alerta>\n\n    <div class="row">\n      <div class="col-xs-12 col-sm-5 form-group">\n        <label class="control-label">Paciente</label>\n        <div>{{ orden.paciente ? orden.paciente.nombre_paciente : \'\' }}</div>\n      </div>\n      <div class="col-xs-12 col-sm-2 form-group">\n        <label class="control-label">Orden No.</label>\n        <div>{{ orden.numero_orden }}</div>\n      </div>\n      <div class="col-xs-1 form-group">\n        <label class="control-label">Estado</label>\n        <div>\n          <orden-estado :estado="estado"></orden-estado>\n        </div>\n      </div>\n    </div>\n    <div class="row nav">\n      <div class="col-xs-12 col-sm-3 form-group" v-if="estado === \'P\' || estado === \'V\' || estado === \'L\'">\n        <a\n          id="portalPdfResultados"\n          :href="`/resultados/${this.orden.id}/resultados.pdf${this.parametros}`"\n          target="_blank"\n          class="btn btn-primary btn-sm"\n          :class="{disabled: procesando}"\n          @click="descargarPdfResultadosRetardado">\n          <i v-if="procesando" class="fas fa-spinner fa-spin fa-fw"></i>\n          <i v-if="!procesando" class="fas fa-cloud-download-alt fa-fw"></i>\n          Descargar PDF resultados\n        </a>\n      </div>\n      <div class="col-xs-12 col-sm-2 form-group" v-if="estado === \'P\' || estado === \'V\' || estado === \'L\'">\n        <a\n          id="portalQrVerResultados"\n          class="btn btn-primary btn-sm"\n          @click="abrirModalResultados">\n          <i class="fas fa-eye fa-fw"></i>\n          Ver resultados\n        </a>\n      </div>\n      <div\n        class="col-xs-12 col-sm-3 form-group"\n        v-if="datos.certificado && (estado === \'P\' || estado === \'V\' || estado === \'L\')">\n        <a\n          id="portalPdfCertificado"\n          :class="{disabled: procesando}"\n          :href="`/resultados/${this.orden.id}/certificado${this.parametrosCertificado}`"\n          target="_blank"\n          class="btn btn-primary btn-sm"\n          @click="descargarPdfResultadosRetardado">\n          <i v-if="procesando" class="fas fa-spinner fa-spin fa-fw"></i>\n          <i v-if="!procesando" class="fas fa-cloud-download-alt fa-fw"></i>\n          Descargar certificado\n        </a>\n      </div>\n      <div class="col-xs-12 col-sm-2 form-group" v-if="estado === \'P\' || estado === \'V\' || estado === \'L\'">\n        <a\n          class="btn btn-primary btn-sm"\n          data-toggle="modal"\n          data-target="#modalAdjuntos">\n          <i v-if="procesando" class="fas fa-spinner fa-spin fa-fw"></i>\n          <i v-if="!procesando" class="fas fa-paperclip fa-fw"></i>\n          Adjuntos\n        </a>\n      </div>\n    </div>\n\n    <adjuntos-modal\n      :orden="orden"\n      :token="token"\n      tipo-consulta="resultados">\n    </adjuntos-modal>\n\n    <resultados-modal :token="token"></resultados-modal>\n  </div>\n</template>\n\n<script>\n  import AdjuntosModal from "../comunes/AdjuntosModal";\n  import ResultadosModal from "../clientes/modals/ResultadosModal";\n  import {crearBotonConData} from "../../support/util";\n\n  export default {\n    components: {\n      AdjuntosModal,\n      ResultadosModal\n    },\n    props: {\n      token: {type: String, required: true},\n      datos: {type: Object, required: true, default: () => ({})},\n      orden: {type: Object, required: true},\n    },\n    data() {\n      return {\n        cargando: false,\n        procesando: false,\n      }\n    },\n    created() {\n      this.configurarInterceptor();\n    },\n    methods: {\n      mostrarExito(mensaje, mensajes) {\n        this.$refs.alerta.mostrarAlerta(\'success\', mensaje, mensajes);\n      },\n      descargarPdfResultadosRetardado: _.debounce(function () {\n        this.descargarPdfResultados();\n      }, 200),\n      descargarPdfResultados() {\n        this.procesando = true;\n        setTimeout(() => {\n          this.procesando = false;\n          this.mostrarExito([\'El PDF ha sido descargado.\', \'Revise su carpeta de descargas.\']);\n        }, 400)\n      },\n      configurarInterceptor() {\n        axios.interceptors.request.use((config) => {\n          config.url = `/resultados${config.url}`;\n          config.params = {...config.params, token: this.token}\n          return config;\n        });\n      },\n      abrirModalResultados() {\n        const boton = crearBotonConData({orden: this.orden, lang: this.datos.lang});\n        $(\'#modalResultados\').modal({backdrop: \'static\'}, boton);\n      }\n    },\n    computed: {\n      estado() {\n        return this.orden.estado === \'V\' || this.orden.estado === \'L\' || this.orden.estado === \'N\' ? this.orden.estado : \'P\';\n      },\n      parametros() {\n        const parametros = {\n          token: this.token,\n          lang: this.datos.lang,\n          seccionPorHoja: this.datos.seccionPorHoja ? 1 : \'\',\n        }\n        return this.obtenerParametrosUrl(parametros);\n      },\n      parametrosCertificado() {\n        let parametros = {\n          token: this.token,\n          examenId: this.datos.examenId,\n          parametrosIds: this.datos.parametrosIds,\n          ciudad: this.datos.ciudad,\n        }\n\n        parametros = this.obtenerParametrosUrl(parametros);\n\n        return parametros;\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  @media (max-width: 767px) {\n    a {\n      width: 100%;\n    }\n  }\n</style>\n'],sourceRoot:""}]);const n=s},9461:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,'@charset "UTF-8";.alertas-resistencia[data-v-7e245f57]{display:flex;flex-wrap:wrap;gap:2px;margin-top:5px}.alertas-resistencia .alerta-resistencia[data-v-7e245f57]{align-items:center;display:flex;justify-content:space-between}.alertas-resistencia .alerta-resistencia__cerrar[data-v-7e245f57]{align-items:center;background-color:#999;display:flex;font-weight:700;margin-left:5px;padding:0 2px}table>tbody>tr>td[data-v-7e245f57]{vertical-align:middle}select.form-control[data-v-7e245f57]{height:19px!important;padding:0 5px!important}a.disabled[data-v-7e245f57]{color:gray;pointer-events:none}.cargando[data-v-7e245f57]{font-size:18px;text-align:center}.encabezado-examenes[data-v-7e245f57]{align-items:center;display:flex;justify-content:space-between;padding:6px 15px}.examenes[data-v-7e245f57]{font-size:12px}.examenes td[data-v-7e245f57]{line-height:1.1}.examenes .label[data-v-7e245f57]{padding:2px 5px}@media (min-width:768px){.botones-acciones[data-v-7e245f57]{visibility:hidden}}.input-group .input-group-addon[data-v-7e245f57]{font-size:10px;padding:3px}.input-group .btn-xs[data-v-7e245f57]{height:19px;line-height:1;width:18px}td.acciones[data-v-7e245f57]{padding:2px 5px}td.parametro[data-v-7e245f57]{padding-left:15px}td.muestra[data-v-7e245f57]{padding-left:30px}td.parametro-titulo[data-v-7e245f57]{color:#888;font-weight:700;padding-left:10px}td.parametro-linea[data-v-7e245f57]{height:20px}td.parametro-fuera-plantilla[data-v-7e245f57]{font-weight:700;padding-left:10px;text-transform:uppercase}td.resultado[data-v-7e245f57]{padding:2px 5px;position:relative}td.resultado input.input-xs[data-v-7e245f57]{height:19px!important;padding:0 5px}td.resultado[data-v-7e245f57]:after{color:#777;content:"";font-family:Font Awesome\\ 5 Free;font-weight:900;opacity:0;position:absolute;right:-10px;top:7px;transition:all .8s ease}td.resultado.modificado[data-v-7e245f57]:after{opacity:1}td.valor-referencia .con-interpretacion[data-v-7e245f57]{color:#3097d1;display:inline-block;position:relative;width:25px}td.valor-referencia .con-interpretacion .interpretacion[data-v-7e245f57]{background-color:#fcf8e3;border:1px solid #dca;border-radius:3px;box-shadow:0 1px 8px rgba(0,0,0,.5);box-sizing:border-box;color:#636b6f;display:none;left:100%;margin-left:5px;max-height:110px;padding:10px 8px;position:absolute;text-align:left;top:50%;transform:translateY(-50%);white-space:pre-line;width:210px;z-index:100}td.valor-referencia .con-interpretacion .interpretacion .flecha[data-v-7e245f57]{height:24px;margin-top:-12px;overflow:hidden;position:absolute;right:100%;top:50%;width:12px}td.valor-referencia .con-interpretacion .interpretacion .flecha[data-v-7e245f57]:after{background-color:#fcf8e3;box-shadow:0 1px 8px rgba(0,0,0,.5);content:"";height:12px;left:0;position:absolute;top:50%;transform:translate(50%,-50%) rotate(-45deg);width:12px}td.valor-referencia .con-interpretacion:hover .interpretacion[data-v-7e245f57]{display:block;transition:all .8s ease}tr.examen[data-v-7e245f57]{background-color:#f5f5f5}tr.examen>td[data-v-7e245f57]{padding:2px 5px}tr.examen>td>div[data-v-7e245f57]{align-items:center;display:flex;justify-content:space-between}tr:hover .botones-acciones[data-v-7e245f57]{visibility:visible}tr[data-v-7e245f57]:focus-within{border-left:5px solid #2e6da4!important;box-sizing:content-box}tr .form-control[data-v-7e245f57]:focus{box-shadow:inset 0 1px 1px rgba(0,0,0,.08),0 0 8px 4px rgba(152,203,232,.6)}',"",{version:3,sources:["webpack://./resources/js/components/clientes/reportes/ExamenesOrden.vue"],names:[],mappings:"AAsHI,gBANJ,CA/GA,sCAEE,YAAA,CAEA,cAAA,CADA,OAAA,CAFA,cAIF,CACE,0DAGE,kBAAA,CAFA,YAAA,CACA,6BAEJ,CACI,kEAIE,kBAAA,CACA,qBAAA,CAFA,YAAA,CAGA,eAAA,CALA,eAAA,CACA,aAKN,CAIA,mCACE,qBADF,CAIA,qCACE,qBAAA,CACA,uBADF,CAIA,4BACE,UAAA,CACA,mBADF,CAIA,2BACE,cAAA,CACA,iBADF,CAIA,sCAGE,kBAAA,CAFA,YAAA,CACA,6BAAA,CAEA,gBADF,CAIA,2BACE,cADF,CAGE,8BACE,eADJ,CAIE,kCACE,eAFJ,CAMA,yBACE,mCACE,iBAHF,CACF,CAOE,iDAEE,cAAA,CADA,WAJJ,CAQE,sCACE,WAAA,CAEA,aAAA,CADA,UALJ,CAWE,6BACE,eARJ,CAWE,8BACE,iBATJ,CAYE,4BACE,iBAVJ,CAaE,qCAGE,UAAA,CADA,eAAA,CADA,iBATJ,CAcE,oCACE,WAZJ,CAeE,8CAEE,eAAA,CADA,iBAAA,CAEA,wBAbJ,CAgBE,8BACE,eAAA,CACA,iBAdJ,CAgBI,6CACE,qBAAA,CACA,aAdN,CAiBI,oCAME,UAAA,CAHA,WAAA,CAFA,gCAAA,CACA,eAAA,CAEA,SAAA,CACA,iBAAA,CAGA,WAAA,CADA,OAAA,CAEA,uBAfN,CAkBI,+CACE,SAhBN,CAqBI,yDAEE,aAAA,CACA,oBAAA,CAFA,iBAAA,CAGA,UAnBN,CAqBM,yEASE,wBAAA,CAIA,qBAAA,CACA,iBAAA,CAEA,mCAAA,CADA,qBAAA,CAZA,aAAA,CAFA,YAAA,CAIA,SAAA,CAMA,eAAA,CAJA,gBAAA,CAKA,gBAAA,CARA,iBAAA,CAFA,eAAA,CAIA,OAAA,CAIA,0BAAA,CAOA,oBAAA,CATA,WAAA,CAUA,WAnBR,CAqBQ,iFAME,WAAA,CAFA,gBAAA,CAGA,eAAA,CANA,iBAAA,CAEA,UAAA,CADA,OAAA,CAGA,UAjBV,CAqBU,uFAQE,wBAAA,CACA,mCAAA,CARA,UAAA,CAGA,WAAA,CACA,MAAA,CAHA,iBAAA,CAIA,OAAA,CACA,4CAAA,CAJA,UAbZ,CAwBM,+EACE,aAAA,CACA,uBAtBR,CA6BE,2BACE,wBA1BJ,CA4BI,8BACE,eA1BN,CA4BM,kCAGE,kBAAA,CAFA,YAAA,CACA,6BAzBR,CAgCI,4CACE,kBA9BN,CAkCE,iCACE,uCAAA,CACA,sBAhCJ,CAmCE,wCACE,2EAjCJ",sourcesContent:["\n.alertas-resistencia {\n  margin-top: 5px;\n  display: flex;\n  gap: 2px;\n  flex-wrap: wrap;\n\n  .alerta-resistencia {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    &__cerrar {\n      margin-left: 5px;\n      padding: 0 2px;\n      display: flex;\n      align-items: center;\n      background-color: #999999;\n      font-weight: bold;\n    }\n  }\n}\n\ntable > tbody > tr > td {\n  vertical-align: middle;\n}\n\nselect.form-control {\n  height: 19px !important;\n  padding: 0 5px !important;\n}\n\na.disabled {\n  color: gray;\n  pointer-events: none;\n}\n\n.cargando {\n  font-size: 18px;\n  text-align: center;\n}\n\n.encabezado-examenes {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 6px 15px;\n}\n\n.examenes {\n  font-size: 12px;\n\n  td {\n    line-height: 1.1;\n  }\n\n  .label {\n    padding: 2px 5px;\n  }\n}\n\n@media (min-width: 768px) {\n  .botones-acciones {\n    visibility: hidden;\n  }\n}\n\n.input-group {\n  .input-group-addon {\n    padding: 3px;\n    font-size: 10px;\n  }\n\n  .btn-xs {\n    height: 19px;\n    width: 18px;\n    line-height: 1;\n  }\n}\n\ntd {\n  &.acciones {\n    padding: 2px 5px;\n  }\n\n  &.parametro {\n    padding-left: 15px;\n  }\n\n  &.muestra {\n    padding-left: 30px;\n  }\n\n  &.parametro-titulo {\n    padding-left: 10px;\n    font-weight: bold;\n    color: #888;\n  }\n\n  &.parametro-linea {\n    height: 20px;\n  }\n\n  &.parametro-fuera-plantilla {\n    padding-left: 10px;\n    font-weight: bold;\n    text-transform: uppercase;\n  }\n\n  &.resultado {\n    padding: 2px 5px;\n    position: relative;\n\n    input.input-xs {\n      height: 19px !important;\n      padding: 0 5px;\n    }\n\n    &:after {\n      font-family: \"Font Awesome 5 Free\";\n      font-weight: 900;\n      content: '\\f069';\n      opacity: 0;\n      position: absolute;\n      color: #777;\n      top: 7px;\n      right: -10px;\n      transition: all 0.8s ease;\n    }\n\n    &.modificado:after {\n      opacity: 1;\n    }\n  }\n\n  &.valor-referencia {\n    .con-interpretacion {\n      position: relative;\n      color: #3097D1;\n      display: inline-block;\n      width: 25px;\n\n      .interpretacion {\n        display: none;\n        text-align: left;\n        color: #636b6f;\n        position: absolute;\n        left: 100%;\n        top: 50%;\n        max-height: 110px;\n        width: 210px;\n        background-color: #fcf8e3;\n        transform: translate(0, -50%);\n        margin-left: 5px;\n        padding: 10px 8px;\n        border: 1px solid #ddccaa;\n        border-radius: 3px;\n        box-sizing: border-box;\n        box-shadow: 0 1px 8px rgba(0, 0, 0, 0.5);\n        white-space: pre-line;\n        z-index: 100;\n\n        .flecha {\n          position: absolute;\n          top: 50%;\n          right: 100%;\n          margin-top: -12px;\n          width: 12px;\n          height: 24px;\n          overflow: hidden;\n\n          &:after {\n            content: '';\n            position: absolute;\n            width: 12px;\n            height: 12px;\n            left: 0;\n            top: 50%;\n            transform: translate(50%, -50%) rotate(-45deg);\n            background-color: #fcf8e3;\n            box-shadow: 0 1px 8px rgba(0, 0, 0, 0.5);\n          }\n        }\n      }\n\n      &:hover .interpretacion {\n        display: block;\n        transition: all 0.8s ease;\n      }\n    }\n  }\n}\n\ntr {\n  &.examen {\n    background-color: #f5f5f5;\n\n    > td {\n      padding: 2px 5px;\n\n      > div {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n    }\n  }\n\n  &:hover {\n    .botones-acciones {\n      visibility: visible;\n    }\n  }\n\n  &:focus-within {\n    border-left: 5px solid #2e6da4 !important;\n    box-sizing: content-box;\n  }\n\n  .form-control:focus {\n    box-shadow: inset 0px 1px 1px rgb(0 0 0 / 8%), 0 0 8px 4px rgb(152 203 232 / 60%);\n  }\n}\n"],sourceRoot:""}]);const n=s},7222:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(7897),o=a.n(r),i=a(1519),s=a.n(i)()(o());s.push([e.id,".bloqueada[data-v-284f2633]{cursor:not-allowed;opacity:.65}.bloqueada>div[data-v-284f2633]{pointer-events:none}textarea[data-v-284f2633]{max-height:100px;resize:vertical}table>tbody>tr>td[data-v-284f2633]{vertical-align:middle}.seleccionada[data-v-284f2633]{background-color:#fcf8e3;font-weight:500}.seleccionada td[data-v-284f2633]{border-left:6px solid #2e6da4!important;box-sizing:content-box}@media screen{.scroll-vertical[data-v-284f2633]{height:90vh;overflow-y:scroll;padding-bottom:5px}}@media (max-width:1200px){.scroll-vertical[data-v-284f2633]{height:85vh;overflow-y:scroll;padding-bottom:5px}}@media (max-width:992px){.scroll-vertical[data-v-284f2633]{margin-top:22px}}","",{version:3,sources:["webpack://./resources/js/components/clientes/reportes/Reportes.vue"],names:[],mappings:"AACA,4BACE,kBAAA,CACA,WAAF,CAEE,gCACE,mBAAJ,CAIA,0BAEE,gBAAA,CADA,eAAF,CAIA,mCACE,qBADF,CAIA,+BACE,wBAAA,CACA,eADF,CAIA,kCACE,uCAAA,CACA,sBADF,CAIA,cACE,kCAEE,WAAA,CADA,iBAAA,CAEA,kBADF,CACF,CAIA,0BACE,kCAEE,WAAA,CADA,iBAAA,CAEA,kBAFF,CACF,CAKA,yBACE,kCACE,eAHF,CACF",sourcesContent:["\n.bloqueada {\n  cursor: not-allowed;\n  opacity: 0.65;\n\n  > div {\n    pointer-events: none;\n  }\n}\n\ntextarea {\n  resize: vertical;\n  max-height: 100px;\n}\n\ntable > tbody > tr > td {\n  vertical-align: middle;\n}\n\n.seleccionada {\n  background-color: #fcf8e3;\n  font-weight: 500;\n}\n\n.seleccionada td {\n  border-left: 6px solid #2e6da4 !important;\n  box-sizing: content-box;\n}\n\n@media screen {\n  .scroll-vertical {\n    overflow-y: scroll;\n    height: 90vh;\n    padding-bottom: 5px;\n  }\n}\n\n@media (max-width: 1200px) {\n  .scroll-vertical {\n    overflow-y: scroll;\n    height: 85vh;\n    padding-bottom: 5px;\n  }\n}\n\n@media (max-width: 992px) {\n  .scroll-vertical {\n    margin-top: 22px;\n  }\n}\n"],sourceRoot:""}]);const n=s},1057:()=>{},2982:()=>{},1039:()=>{},2577:()=>{},336:()=>{},3299:()=>{},3834:()=>{},1846:()=>{},5182:()=>{},5391:()=>{},1632:()=>{},2296:()=>{},8952:()=>{},1346:()=>{},9055:()=>{},3199:()=>{},6462:()=>{},5899:()=>{},1537:()=>{},9988:()=>{},1682:()=>{},5062:()=>{},8477:()=>{},3487:()=>{},1664:()=>{},171:()=>{},4736:()=>{},9642:()=>{},2261:()=>{},5510:()=>{},6609:()=>{},3846:()=>{},3499:()=>{},417:()=>{},6700:(e,t,a)=>{var r={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":7093,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":7093,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":1044,"./ta.js":1044,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=6700},1953:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});const r={props:{top:{type:Number,default:60},timeout:{type:Number,default:1e4}},data:function(){return{mensajes:[]}},methods:{mostrarAlerta:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t instanceof Array&&(1===t.length?t=t[0]:(a=t,t=null)),1===a.length&&(a=a[0]),t instanceof Object&&(a=t,t=null);var r=this.crearMensaje(e,t,a);this.mensajes.unshift(r)},crearMensaje:function(e,t,a){var r=this,o={id:(this.mensajes.length>0?this.mensajes[0].id:0)+1,tipo:e,mensaje:t,visible:!0,lista:[]};return o.lista=a instanceof Array?a:a instanceof Object?Object.values(a).map((function(e){return e[0]})):[a],setTimeout((function(){return r.ocultarAlerta(o)}),this.timeout),o},ocultarAlerta:function(e){e.visible=!1;var t=this.mensajes.indexOf(e);t>-1&&this.mensajes.splice(t,1)},ocultarAlertas:function(){this.mensajes.forEach((function(e){return e.visible=!1}))},estiloMensaje:function(e){return _.isEmpty(e.lista)?"":"font-weight: 500"},claseTipo:function(e){return{"fas fa-check-circle":"success"===e.tipo,"fas fa-info-circle":"info"===e.tipo,"fas fa-exclamation-circle":"warning"===e.tipo,"fas fa-times-circle":"danger"===e.tipo}}}};var o=a(3379),i=a.n(o),s=a(430),n={insert:"head",singleton:!1};i()(s.Z,n);s.Z.locals;const c=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{position:"fixed",right:"20px","z-index":"1050"},style:{top:"".concat(e.top,"px")}},[t("transition-group",{attrs:{name:"fade"}},e._l(e.mensajes,(function(a){return t("div",{directives:[{name:"show",rawName:"v-show",value:a.visible,expression:"mensaje.visible"}],key:a.id,class:"alert alert-"+a.tipo,staticStyle:{position:"sticky","max-width":"700px","max-height":"300px","margin-bottom":"7px",padding:"13px"},attrs:{role:"alert"},on:{click:function(t){return e.ocultarAlerta(a)}}},[t("i",{class:e.claseTipo(a),staticStyle:{"font-size":"1.85em"},attrs:{id:"icono"}}),e._v(" "),t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:a.mensaje,expression:"mensaje.mensaje"}],staticStyle:{"padding-top":"2px"},style:e.estiloMensaje(a),domProps:{innerHTML:e._s(a.mensaje)}}),e._v(" "),a.lista.length>0?t("ul",{staticStyle:{"padding-left":"17px"}},e._l(a.lista,(function(a){return t("li",{domProps:{innerHTML:e._s(a)}})})),0):e._e()])])})),0)],1)}),[],!1,null,"1f22f6d0",null).exports},1546:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(4590),o=a(7974);const i={props:{empresaSaldo:{type:Number,default:0},totalSaldo:{type:Number,default:0},sistemaFactura:{required:!0},cuentasBancarias:{required:!1,type:Array,default:function(){return[]}},entidadesFinancieras:{required:!1,type:Array,default:function(){return[]}},top:{type:Number,default:0},configs:{type:Object,required:!1,default:function(){return{requeridos:{},acciones:{},mostrar:{}}}},abono:{type:Object,required:!1,default:function(){return{id:"",fecha_abono:"",fechaAbono:"",horaAbono:"",valor:"",valor_saldo_a_favor:"",estado:"V",usuario_anula_id:"",forma_pago:"EF",extras:null,numero_forma_pago:"",cuenta_bancaria_id:"",referencia:""}}}},data:function(){return{formasPago:r.xe}},methods:{cambioFormaPago:function(){this.abono.cuenta_bancaria_id="",this.abono.numero_forma_pago="",this.abono=(0,o.SP)(this.abono)},cargarFacturasTarjeta:function(){var e=localStorage.getItem("facturas-tarjeta");e&&(this.abono.numero_forma_pago=e)},completarAbono:function(){this.abono.valor=this.totalSaldo},completarSaldoAFavor:function(){this.abono.valor_saldo_a_favor=this.empresaSaldo},cambioProveedor:function(e){e.target.value&&localStorage.setItem("facturas-tarjeta",e.target.value)}},computed:{bancos:function(){return this.entidadesFinancieras.filter((function(e){return"BANCO"===e.tipo}))},emisoresTarjetas:function(){return this.entidadesFinancieras.filter((function(e){return"TARJETA"===e.tipo}))},valorTotalAbono:function(){return 1*this.abono.valor+1*this.abono.valor_saldo_a_favor}}};const s=(0,a(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"forma_pago"}},[e._v("Forma pago")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.abono.forma_pago,expression:"abono.forma_pago"}],staticClass:"form-control input-sm",attrs:{id:"forma_pago",name:"forma_pago",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.abono,"forma_pago",t.target.multiple?a:a[0])},e.cambioFormaPago]}},e._l(e.formasPago,(function(a){return t("option",{domProps:{value:a}},[e._v("\n          "+e._s(e._f("formaPago")(a))+"\n        ")])})),0)]),e._v(" "),e.abono.id?t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_orden"}},[e._v("\n        Fecha\n        "),t("span",{staticStyle:{"font-weight":"normal"}},[t("small",[e._v(e._s(e.abono.horaAbono))])])]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.abono.fechaAbono,expression:"abono.fechaAbono"}],staticClass:"form-control input-sm",attrs:{id:"fecha_orden","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",required:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}}),e._v(" "),e._m(0)])]):e._e(),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label no-salto-linea",class:{obligatorio:!e.abono.id},attrs:{for:"valor_abono"}},[e._v("Valor")]),e._v(" "),e.abono.id?t("div",{attrs:{id:"valor"}},[e._v(e._s(e._f("moneda")(e.abono.valor)))]):t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.completarAbono}},[t("i",{staticClass:"fas fa-arrow-circle-down fa-fw"})])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.abono.valor,expression:"abono.valor"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"valor_abono",type:"number",step:"0.01",min:"0.01",required:""},domProps:{value:e.abono.valor},on:{input:function(t){t.target.composing||e.$set(e.abono,"valor",t.target.value)}}})])]),e._v(" "),e.empresaSaldo>0||e.abono.valor_saldo_a_favor?t("div",{staticClass:"col-sm-3 form-group"},[t("label",[e._v("Valor saldo a favor "+e._s(e._f("moneda")(e.empresaSaldo)))]),e._v(" "),t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:0===e.empresaSaldo},on:{click:e.completarSaldoAFavor}},[t("i",{staticClass:"fas fa-arrow-circle-down fa-fw"})])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.abono.valor_saldo_a_favor,expression:"abono.valor_saldo_a_favor"}],staticClass:"form-control input-sm text-right",attrs:{type:"number",step:"0.01",min:"0.01"},domProps:{value:e.abono.valor_saldo_a_favor},on:{input:function(t){t.target.composing||e.$set(e.abono,"valor_saldo_a_favor",t.target.value)}}})])]):e._e(),e._v(" "),e.empresaSaldo>0||e.abono.valor_saldo_a_favor?t("div",{staticClass:"col-sm-2 form-group"},[t("label",[e._v("Valor total")]),e._v(" "),t("div",[e._v("\n        "+e._s(e._f("moneda")(e.valorTotalAbono))+"\n      ")])]):e._e()]),e._v(" "),e.abono.id?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Usuario ingresa")]),e._v(" "),t("div",[e._v(e._s(e.abono.usuario_ingresa?e.abono.usuario_ingresa.nombre_usuario:"")+"\n      ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"estado"}},[e._v("Estado")]),e._v(" "),t("div",{attrs:{id:"estado"}},[e._v(e._s(e._f("estadoAbono")(e.abono.estado)))])])]):e._e(),e._v(" "),"CH"===e.abono.forma_pago?t("div",{staticClass:"row"},[e.bancos.length>0?t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.chEntidadFinancieraId},attrs:{for:"banco_id"}},[e._v("\n        Entidad emisora\n      ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"banco_id",placeholder:"Seleccione...",options:e.bancos,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:e.configs.requeridos.chEntidadFinancieraId&&!e.abono.extras.entidad_financiera_id}},"input",r,!1),o))]}}],null,!1,365117011),model:{value:e.abono.extras.entidad_financiera_id,callback:function(t){e.$set(e.abono.extras,"entidad_financiera_id",t)},expression:"abono.extras.entidad_financiera_id"}})],1):e._e(),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.chNumero},attrs:{for:"numero_cheque"}},[e._v("\n        Nro. cheque\n      ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.abono.numero_forma_pago,expression:"abono.numero_forma_pago"}],staticClass:"form-control input-sm",attrs:{id:"numero_cheque",type:"text",maxlength:"20",required:e.configs.requeridos.chNumero},domProps:{value:e.abono.numero_forma_pago},on:{input:function(t){t.target.composing||e.$set(e.abono,"numero_forma_pago",t.target.value)}}})])]):e._e(),e._v(" "),"DE"===e.abono.forma_pago?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_forma_pago"}},[e._v("Nro. deposito")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.abono.numero_forma_pago,expression:"abono.numero_forma_pago"}],staticClass:"form-control input-sm",attrs:{id:"numero_forma_pago",type:"text",maxlength:"20"},domProps:{value:e.abono.numero_forma_pago},on:{input:function(t){t.target.composing||e.$set(e.abono,"numero_forma_pago",t.target.value)}}})]),e._v(" "),e.configs.acciones.cargarCuentasBancarias?t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.deCuentaBancariaId},attrs:{for:"cuenta_bancaria_id"}},[e._v("\n        Cuenta bancaria destino\n      ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.abono.cuenta_bancaria_id,expression:"abono.cuenta_bancaria_id"}],staticClass:"form-control input-sm",attrs:{id:"cuenta_bancaria_id",name:"cuenta_bancaria_id",required:e.configs.requeridos.deCuentaBancariaId},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.abono,"cuenta_bancaria_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.cuentasBancarias,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n          "+e._s(a.nombre)+" ("+e._s(a.tipo)+") No.\n          "+e._s(a.numero)+"\n        ")])}))],2)]):e._e()]):e._e(),e._v(" "),"TI"===e.abono.forma_pago?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.tiNumeroComprobante},attrs:{for:"ti_numero_forma_pago"}},[e._v("\n        Nro. comprobante\n      ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.abono.numero_forma_pago,expression:"abono.numero_forma_pago"}],staticClass:"form-control input-sm",attrs:{id:"ti_numero_forma_pago",type:"text",maxlength:"20",required:e.configs.requeridos.tiNumeroComprobante},domProps:{value:e.abono.numero_forma_pago},on:{input:function(t){t.target.composing||e.$set(e.abono,"numero_forma_pago",t.target.value)}}})]),e._v(" "),e.configs.acciones.cargarCuentasBancarias?t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.tiCuentaBancariaId},attrs:{for:"cuenta_bancaria_id"}},[e._v("\n        Cuenta bancaria destino\n      ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.abono.cuenta_bancaria_id,expression:"abono.cuenta_bancaria_id"}],staticClass:"form-control input-sm",attrs:{id:"cuenta_bancaria_id",name:"cuenta_bancaria_id",required:e.configs.requeridos.tiCuentaBancariaId},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.abono,"cuenta_bancaria_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.cuentasBancarias,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n          "+e._s(a.nombre)+" ("+e._s(a.tipo)+") No.\n          "+e._s(a.numero)+"\n        ")])}))],2)]):e._e()]):e._e(),e._v(" "),"TD"===e.abono.forma_pago?t("div",{staticClass:"row"},[e.emisoresTarjetas.length>0?t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.tdEntidadFinancieraId},attrs:{for:"emisor_id"}},[e._v("\n        Entidad emisora\n      ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"emisor_id",placeholder:"Seleccione...",options:e.emisoresTarjetas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:e.configs.requeridos.tdEntidadFinancieraId&&!e.abono.extras.entidad_financiera_id}},"input",r,!1),o))]}}],null,!1,1759710120),model:{value:e.abono.extras.entidad_financiera_id,callback:function(t){e.$set(e.abono.extras,"entidad_financiera_id",t)},expression:"abono.extras.entidad_financiera_id"}})],1):e._e(),e._v(" "),e.configs.mostrar.tdProveedor?t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.tdProveedor},attrs:{for:"numero_forma_pago_tarjeta"}},[e._v("\n        Proveedor\n      ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.abono.numero_forma_pago,expression:"abono.numero_forma_pago"}],staticClass:"form-control input-sm",attrs:{id:"numero_forma_pago_tarjeta",name:"forma_pago",required:e.configs.requeridos.tdProveedor},on:{click:e.cambioProveedor,change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.abono,"numero_forma_pago",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"M"}},[e._v("Medianet")]),e._v(" "),t("option",{attrs:{value:"D"}},[e._v("Datafast")])])]):e._e(),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.tdNumeroLote},attrs:{for:"numero_lote"}},[e._v("\n        Nro. lote\n      ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.abono.extras.numero_lote,expression:"abono.extras.numero_lote"}],staticClass:"form-control input-sm",attrs:{id:"numero_lote",type:"text",maxlength:"20",required:e.configs.requeridos.tdNumeroLote},domProps:{value:e.abono.extras.numero_lote},on:{input:function(t){t.target.composing||e.$set(e.abono.extras,"numero_lote",t.target.value)}}})])]):e._e(),e._v(" "),"TC"===e.abono.forma_pago?t("div",{staticClass:"row"},[e.emisoresTarjetas.length>0?t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.tcEntidadFinancieraId},attrs:{for:"emisor_id"}},[e._v("\n        Entidad emisora\n      ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"emisor_id",placeholder:"Seleccione...",options:e.emisoresTarjetas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:e.configs.requeridos.tcEntidadFinancieraId&&!e.abono.extras.entidad_financiera_id}},"input",r,!1),o))]}}],null,!1,2455135023),model:{value:e.abono.extras.entidad_financiera_id,callback:function(t){e.$set(e.abono.extras,"entidad_financiera_id",t)},expression:"abono.extras.entidad_financiera_id"}})],1):e._e(),e._v(" "),e.configs.mostrar.tcProveedor?t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.tcProveedor},attrs:{for:"numero_forma_pago_tarjeta"}},[e._v("\n        Proveedor\n      ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.abono.numero_forma_pago,expression:"abono.numero_forma_pago"}],staticClass:"form-control input-sm",attrs:{id:"numero_forma_pago_tarjeta",name:"forma_pago",required:e.configs.requeridos.tcProveedor},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.abono,"numero_forma_pago",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"M"}},[e._v("Medianet")]),e._v(" "),t("option",{attrs:{value:"D"}},[e._v("Datafast")])])]):e._e(),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.configs.requeridos.tcNumeroLote},attrs:{for:"tc_numero_lote"}},[e._v("\n        Nro. lote\n      ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.abono.extras.numero_lote,expression:"abono.extras.numero_lote"}],staticClass:"form-control input-sm",attrs:{id:"tc_numero_lote",type:"text",maxlength:"20",required:e.configs.requeridos.tcNumeroLote},domProps:{value:e.abono.extras.numero_lote},on:{input:function(t){t.target.composing||e.$set(e.abono.extras,"numero_lote",t.target.value)}}})])]):e._e(),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n        Referencia\n      ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.abono.referencia,expression:"abono.referencia"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"50"},domProps:{value:e.abono.referencia},on:{input:function(t){t.target.composing||e.$set(e.abono,"referencia",t.target.value)}}})])])])}),[function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#modalHora",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])}],!1,null,null,null).exports},1769:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(755),o=a(4590),i=a(1546),s=a(7974);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d={components:{HoraModal:r.Z,Abono:i.Z},props:{id:{type:String,default:"modalAbonoFormulario"},ordenId:{required:!1},sistemaFactura:{required:!0},cuentasBancarias:{required:!1,type:Array,default:function(){return[]}},entidadesFinancieras:{required:!1,type:Array,default:function(){return[]}},top:{type:Number,default:0},configs:{type:Object,required:!1,default:function(){return{requeridos:{},acciones:{},mostrar:{}}}}},data:function(){return{procesando:!1,abono:{fechaAbono:"",horaAbono:"",valor:0},formasPago:o.xe}},mounted:function(){var e=this;$("#".concat(this.id)).on("show.bs.modal",(function(t){if(t.target.id===e.id){var a=$(t.relatedTarget).data("abono");a.id?e.cargarDatos(a):(e.cargarConfigs(a),e.cargarExtras(a),e.abono=a)}})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.abono={fechaAbono:"",horaAbono:"",valor:0})}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cerrar:function(){$("#".concat(this.id)).modal("toggle")},cargarDatos:function(e){var t=this;axios.get("/api/ordenes/".concat(this.ordenId,"/abonos/").concat(e.id,"/edit")).then((function(e){var a=e.data.data;t.cargarExtras(a),t.abono=c(c({},a),{},{valor_saldo_a_favor:0,fechaAbono:t.fechaALocal(a.fecha_abono,"YYYY-MM-DD"),horaAbono:t.fechaALocal(a.fecha_abono,"HH:mm")})})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar abono",a)}))},guardar:function(){var e=this;if(this.procesando=!0,!this.abono.id)return this.$emit("abono-creado",this.abono),$("#".concat(this.id)).modal("hide"),void(this.procesando=!1);this.procesando=!0;var t=_.cloneDeep(this.abono);t.fecha_abono=this.fechaAUTC(this.abono.fechaAbono+" "+this.abono.horaAbono),axios.patch("/api/ordenes/".concat(this.ordenId,"/abonos/").concat(this.abono.id),t).then((function(){$("#".concat(e.id)).modal("hide"),e.$emit("abono-actualizado",t)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error",a)})).then((function(){return e.procesando=!1}))},cargarExtras:function(e){e.extras||(e=(0,s.SP)(e))},horaSeleccionada:function(e){this.abono.horaAbono=e},cargarProveedor:function(e){if((this.mostrarTcProveedor||this.mostrarTdProveedor)&&[o.xe.TARJETA_CREDITO,o.xe.TARJETA_DEBITO].includes(e.forma_pago)){var t=localStorage.getItem("proveedor-tarjeta");t&&(e.numero_forma_pago=t)}},cambioFormaPago:function(){this.abono.cuenta_bancaria_id="",this.abono.numero_forma_pago="",this.abono.extras=null,[o.xe.DEPOSITO,o.xe.TRANSFERENCIA_INTERBANCARIA].includes(this.abono.forma_pago)&&this.cargarCuentasBancarias(),this.abono=(0,s.SP)(this.abono)},cargarFacturasTarjeta:function(){var e=localStorage.getItem("facturas-tarjeta");e&&(this.abono.numero_forma_pago=e)},cargarConfigs:function(e){var t=this;return this.sistemaFactura?axios.get("/api/sistemas-externos/".concat(this.sistemaFactura.id,"/configs")).then((function(a){var r=a.data.data;t.configs.requeridos=r.requeridos?r.requeridos:{},t.configs.acciones=r.acciones?r.acciones:{},t.configs.mostrar=r.mostrar?r.mostrar:{},t.cargarProveedor(e),t.cargarCuentasBancarias(),t.cargarEntidadesFinancieras()})).catch((function(e){return console.error("Error al cargar configuraciones de sistema de facturas",e)})):(this.cargarCuentasBancarias(),void this.cargarEntidadesFinancieras())},cargarEntidadesFinancieras:function(){var e=this;_.isEmpty(this.entidadesFinancieras)&&axios.get("/api/catalogos",{params:{catalogo:o.oH.ENTIDADES_FINANCIERAS}}).then((function(t){t.data.data.forEach((function(t){return e.entidadesFinancieras.push(t)}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Entidades financieras",a)}))},cargarCuentasBancarias:function(){var e=this;this.configs.acciones.cargarCuentasBancarias&&_.isEmpty(this.cuentasBancarias)&&axios.get("/api/sistemas-externos/".concat(this.sistemaFactura.id,"/cuentas-bancarias")).then((function(t){t.data.data.forEach((function(t){return e.cuentasBancarias.push(t)}))})).catch((function(){return e.mostrarErrores("Error al cargar cuentas bancarias")}))},cambioProveedor:function(){localStorage.setItem("proveedor-tarjeta",this.abono.numero_forma_pago)}},computed:{esAnulada:function(){return"N"===this.abono.estado},cuentaBancaria:function(){var e=this;if(this.abono.cuenta_bancaria_id){var t=this.cuentasBancarias.find((function(t){return t.id=e.abono.cuenta_bancaria_id}));if(t)return"".concat(t.nombre," (").concat(t.tipo,") No. ").concat(t.numero)}return""},titulo:function(){return this.esAnulada?"Ver aboono":this.abono.id?"Editar abono":"Crear abono"},bancos:function(){return this.entidadesFinancieras.filter((function(e){return"BANCO"===e.tipo}))},emisoresTarjetas:function(){return this.entidadesFinancieras.filter((function(e){return"TARJETA"===e.tipo}))},mostrarTcProveedor:function(){return _.get(this.configs,"mostrar.tcProveedor")},mostrarTdProveedor:function(){return _.get(this.configs,"mostrar.tcProveedor")},estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""}}};const u=(0,a(1900).Z)(d,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v(e._s(e.titulo))])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("abono",{attrs:{"sistema-factura":e.sistemaFactura,"cuentas-bancarias":e.cuentasBancarias,"entidades-financieras":e.entidadesFinancieras,configs:e.configs,abono:e.abono}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")]),e._v(" "),t("boton",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",procesando:e.procesando}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])],1)])])])]),e._v(" "),t("hora-modal",{attrs:{id:"modalHora",hora:e.abono.horaAbono,top:20},on:{"hora-seleccionada":e.horaSeleccionada}})],1)}),[],!1,null,null,null).exports},1844:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(7974);const o={props:{abonos:{type:Array,required:!0,default:function(){return[]}},cargando:{type:Boolean,default:!1},puedeModificar:{type:Boolean,default:!0}},methods:{abrirModalEditarAbono:function(e){var t=(0,r.MD)({abono:e});$("#modalAbonoFormulario").modal({backdrop:"static"},t)},abrirModalVerAbono:function(e){var t=(0,r.MD)({abono:e});$("#modalAbonosVer").modal({backdrop:"static"},t)},abrirModalAnularAbono:function(e){var t=(0,r.MD)({abono:e});$("#modalAnularAbono").modal({backdrop:"static"},t)},deshabilitarPorPermiso:function(e){return this.$can("anular-abonos")||"V"!==e.estado||!0,!this.$can("anular-abonos")&&"V"===e.estado}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[e.abonos.length>0&&!e.cargando?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.abonos,(function(a){return e.abonos.length>0?[t("tr",[t("td",[e._v(e._s(e._f("formaPago")(a.forma_pago)))]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea"},[e._v("\n              "+e._s(e._f("fecha")(a.fecha_abono))+"\n            ")])]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n            "+e._s(a.usuario_ingresa?a.usuario_ingresa.nombre_usuario:"")+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoAbono")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.valor)))]),e._v(" "),t("td",{staticClass:"text-right"},[e.puedeModificar&&e.$can("editar-abonos")&&"V"===a.estado?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.abrirModalEditarAbono(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]):t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.abrirModalVerAbono(a)}}},[t("i",{staticClass:"fas fa-eye fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.puedeModificar&&"N"!==a.estado,expression:"puedeModificar && abono.estado!=='N'"}],staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Anular",disabled:e.deshabilitarPorPermiso(a)},on:{click:function(t){return e.abrirModalAnularAbono(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})])])])]:e._e()}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.abonos.length,tipo:"abonos"},scopedSlots:e._u([{key:"no-resultado",fn:function(){return[e._v("No existen abonos para esta orden")]},proxy:!0}])})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-2"},[e._v("Forma pago")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha abono")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Usuario ingresa")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1"})])])}],!1,null,null,null).exports},649:(e,t,a)=>{"use strict";a.d(t,{Z:()=>x});var r=a(4590),o=a(1546),i=a(1430),s=a(1844);const n={props:{orden:{required:!0,type:Object,default:function(){return{}}}},components:{Modal:i.Z,AbonosRegistrados:s.Z},data:function(){return{procesando:{cargarAbonos:!1},abonos:[]}},mounted:function(){var e=this;$("#modalAbonosRegistrados").on("shown.bs.modal",(function(t){"modalAbonosRegistrados"===t.target.id&&e.cargarAbonos()})),$("#modalAbonosRegistrados").on("hide.bs.modal",(function(t){"modalAbonosRegistrados"===t.target.id&&(e.abonos=[])}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarAbonos:function(){var e=this;this.procesando.cargarAbonos=!0,axios.get("/api/ordenes/".concat(this.orden.id,"/abonos")).then((function(t){var a=t.data.data;e.abonos=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar abonos",a)})).then((function(){return e.procesando.cargarAbonos=!1}))},cerrar:function(){$("#modalAbonosRegistrados").modal("toggle")}}};var c=a(1900);const l=(0,c.Z)(n,(function(){var e=this,t=e._self._c;return t("modal",{attrs:{id:"modalAbonosRegistrados",top:11,tamano:"lg"},scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("Abonos registrados")]},proxy:!0},{key:"cuerpo",fn:function(){return[t("alerta",{ref:"alerta"}),e._v(" "),t("abonos-registrados",{attrs:{abonos:e.abonos,cargando:e.procesando.cargarAbonos,"puede-modificar":!1}})]},proxy:!0},{key:"pie",fn:function(){return[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")])]},proxy:!0}])})}),[],!1,null,null,null).exports;var d=a(5959),u=a(7974),m=a(9652);function p(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b={components:{Abono:o.Z,VerAbonosRegistradosModal:l,VerAbonoModal:d.Z,BuscarReciboModal:m.Z},data:function(){return{filtros:{empresaId:"",subempresaId:"",fechaDesde:"",fechaHasta:"",numeroFactura:"",numeroOrden:"",reciboId:""},procesando:{guardarAbonos:!1,buscarOrdenes:!1},ordenes:[],empresas:[],sistemaFactura:{},configs:{requeridos:{},mostrar:{},acciones:{}},idsOrdenesSeleccionadas:[],seleccion:!1,enviarCobros:!1,formasPago:r.xe,ordenSeleccionada:{},abonos:[],cuentasBancarias:[],entidadesFinancieras:[],recibo:null}},mounted:function(){this.cargaInicial()},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cargaInicial:function(){var e=this;_.isEmpty(this.empresas)&&axios.get("/api/abonos-ordenes/create").then((function(t){var a=t.data.data;e.empresas=a.empresas,e.sistemaFactura=a.sistemaFactura,e.configs.requeridos=a.configs.requeridos?a.configs.requeridos:{},e.configs.acciones=a.configs.acciones?a.configs.acciones:{},e.configs.mostrar=a.configs.mostrar?a.configs.mostrar:{},e.cargarEntidadesFinancieras(),e.cargarCuentasBancarias()}))},buscarOrdenes:function(){this.cargarOrdenes()},cargarOrdenes:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.ordenes=[],this.idsOrdenesSeleccionadas=[],this.procesando.buscarOrdenes=!0,axios.get("/api/abonos-ordenes",{params:{empresa_id:this.filtros.empresaId,subempresa_id:this.filtros.subempresaId,fecha_inicio:this.filtros.fechaDesde,fecha_fin:this.filtros.fechaHasta,numero_factura:this.filtros.numeroFactura,numero_orden:this.filtros.numeroOrden,ordenes_ids:t}}).then((function(t){e.ordenes=t.data.data.map((function(e){return h(h({},e),{},{saldo:e.valor_total-e.valor_total_abonos})}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){e.idsOrdenesSeleccionadas=[],e.procesando.buscarOrdenes=!1}))},guardar:function(){var e=this;if(this.empresaSaldo<0)this.mostrarErrores("Valor saldo a favor registrado es mayor al saldo del cliente");else{this.procesando.guardarAbonos=!0;var t={abonos:this.abonos.map((function(e){return h(h({},e),{},{valor:1*e.valor+1*e.valor_saldo_a_favor,valor_saldo_a_favor:e.valor_saldo_a_favor?e.valor_saldo_a_favor:0})})),ordenes_ids:this.idsOrdenesSeleccionadas,enviar_cobros:this.enviarCobros,empresa_id:this.filtros.empresaId,recibo_id:this.filtros.reciboId};axios.post("/api/abonos-ordenes",t).then((function(t){var a=t.data;e.empresa&&(e.empresa.saldo=a.empresaSaldo);var r=["Se registró  ".concat(a.abonosCreados," abono en Orión")];a.abonosCreados>1&&(r=["Se registraron  ".concat(a.abonosCreados," abonos en Orión")]),e.enviarCobros&&a.abonosEnviados>0&&r.push("Se enviarón ".concat(a.abonosEnviados," abonos al sistema de facturas")),e.mostrarExito(r),e.enviarCobros&&a.abonosEnviados<=0&&e.mostrarExito("No se envió ningún abono al sistema de facturas"),e.filtros.reciboId="",e.recibo=null,e.idsOrdenesSeleccionadas=[],e.seleccion=!1,e.abonos=[],e.cargarOrdenes()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.procesando.guardarAbonos=!1}))}},limpiar:function(){this.filtros.empresaId="",this.filtros.subempresaId="",this.filtros.fechaDesde="",this.filtros.fechaHasta="",this.filtros.numeroFactura="",this.filtros.numeroOrden="",this.filtros.reciboId="",this.ordenes=[],this.idsOrdenesSeleccionadas=[],this.recibo=null,this.seleccion=!1},alternarSeleccion:function(){this.seleccion?this.idsOrdenesSeleccionadas=this.ordenes.map((function(e){return e.id})):this.idsOrdenesSeleccionadas=[]},seleccionar:function(e){if(this.idsOrdenesSeleccionadas.includes(e.id)){var t=this.idsOrdenesSeleccionadas.indexOf(e.id);this.idsOrdenesSeleccionadas.splice(t,1)}else this.idsOrdenesSeleccionadas.push(e.id)},regresar:function(){window.location.href="/ordenes"},verAbonos:function(e){this.ordenSeleccionada=e,$("#modalAbonosRegistrados").modal({backdrop:"static"})},cargarEntidadesFinancieras:function(){var e=this;_.isEmpty(this.entidadesFinancieras)&&axios.get("/api/catalogos",{params:{catalogo:r.oH.ENTIDADES_FINANCIERAS}}).then((function(t){var a=t.data.data;e.entidadesFinancieras=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Entidades financieras",a)}))},cargarCuentasBancarias:function(){var e=this;this.configs.acciones.cargarCuentasBancarias&&_.isEmpty(this.cuentasBancarias)&&axios.get("/api/sistemas-externos/".concat(this.sistemaFactura.id,"/cuentas-bancarias")).then((function(t){var a=t.data.data;e.cuentasBancarias=a})).catch((function(){return e.mostrarErrores("Error al cargar cuentas bancarias")}))},agregarAbono:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.xe.EFECTIVO,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a={id:null,valor:t,valor_saldo_a_favor:"",forma_pago:e,numero_forma_pago:"",cuenta_bancaria_id:"",extras:null,referencia:""};a=(0,u.SP)(a),this.abonos.push(a),this.$nextTick((function(){window.scrollTo(0,document.body.scrollHeight)}))},quitarAbono:function(e){this.abonos.splice(e,1)},buscarRecibo:function(){$("#modalBuscarRecibo").modal({backdrop:"static"})},reciboSeleccionado:function(e){var t=this,a=e.recibo;this.abonos=[],this.ordenes=[],this.filtros.reciboId=a.id;var r=_.get(a.extras,"ordenes",null);_.isEmpty(r)||this.cargarOrdenes(r).then((function(){t.idsOrdenesSeleccionadas=t.ordenes.map((function(e){return e.id})),t.ordenes.length!==r.length&&t.mostrarAdvertencia("Existen órdenes del recibo que no tienen saldo pendiente")}));var o,i=p(a.detalles);try{for(i.s();!(o=i.n()).done;){var s=o.value;this.agregarAbono(s.forma_pago,s.valor)}}catch(e){i.e(e)}finally{i.f()}},cambiarCliente:function(){this.filtros.reciboId="",this.recibo=null,this.abonos=[]}},computed:{puedeBuscar:function(){return this.filtros.empresaId},subempresas:function(){var e=this;return this.filtros.subempresaId="",this.filtros.empresaId?this.empresas.find((function(t){return t.id===e.filtros.empresaId})).subempresas:[]},abonoTotalSeleccionado:function(){var e=this;return this.idsOrdenesSeleccionadas.reduce((function(t,a){return t+parseFloat(e.ordenes.find((function(e){return e.id===a})).valor_total_abonos)}),0)},valorTotalSeleccionado:function(){var e=this;return this.idsOrdenesSeleccionadas.reduce((function(t,a){return t+parseFloat(e.ordenes.find((function(e){return e.id===a})).valor_total)}),0)},etiquetaSeleccionados:function(){return this.ordenes.length>1?"seleccionados":"seleccionado"},totalAbonoSeleccionado:function(){return this.valorTotalSeleccionado-this.abonoTotalSeleccionado},totalOrdenes:function(){return this.ordenes.reduce((function(e,t){return 1*e+1*t.valor_total}),0)},totalAbonos:function(){return this.ordenes.reduce((function(e,t){return 1*e+1*t.valor_total_abonos}),0)},totalSaldo:function(){return this.totalOrdenes-this.totalAbonos},empresa:function(){var e=this;return this.empresas.find((function(t){return t.id===e.filtros.empresaId}))},empresaSaldo:function(){var e=_.get(this.empresa,"saldo",0);e=e||0;var t=this.abonos.reduce((function(e,t){return 1*e+1*t.valor_saldo_a_favor}),0);return parseFloat(e)-t},valorTotalAbonos:function(){return this.abonos.reduce((function(e,t){return 1*e+1*t.valor+1*t.valor_saldo_a_favor}),0)}},watch:{idsOrdenesSeleccionadas:function(e){this.seleccion=e.length===this.ordenes.length}}};const x=(0,c.Z)(b,(function(){var e=this,t=e._self._c;return t("div",[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Abonos\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"panel-group"},[t("div",{staticClass:"panel panel-gris"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.buscarOrdenes.apply(null,arguments)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"empresas"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresas",placeholder:"Seleccione...",options:e.empresas,label:"nombre",reduce:function(e){return e.id}},on:{"option:selected":e.cambiarCliente},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.filtros.empresaId}},"input",r,!1),o))]}}]),model:{value:e.filtros.empresaId,callback:function(t){e.$set(e.filtros,"empresaId",t)},expression:"filtros.empresaId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresas"}},[e._v("Categoría")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"subempresas",placeholder:"Seleccione...",options:e.subempresas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.subempresaId,callback:function(t){e.$set(e.filtros,"subempresaId",t)},expression:"filtros.subempresaId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaDesde,expression:"filtros.fechaDesde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaHasta,expression:"filtros.fechaHasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-end-date":"0d",placeholder:"aaaa-mm-dd"}})])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numeroFactura"}},[e._v("No. factura")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroFactura,expression:"filtros.numeroFactura"}],staticClass:"form-control input-sm",attrs:{id:"numeroFactura",type:"text"},domProps:{value:e.filtros.numeroFactura},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numeroFactura",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numeroOrden"}},[e._v("No. orden")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroOrden,expression:"filtros.numeroOrden"}],staticClass:"form-control input-sm",attrs:{id:"numeroOrden",type:"text"},domProps:{value:e.filtros.numeroOrden},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numeroOrden",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"reciboId"}},[e._v("No. recibo")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.reciboId,expression:"filtros.reciboId"}],staticClass:"form-control input-sm",attrs:{id:"reciboId",type:"text",readonly:""},domProps:{value:e.filtros.reciboId},on:{input:function(t){t.target.composing||e.$set(e.filtros,"reciboId",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-toggle":"tooltip",title:"Buscar recibo",disabled:!e.puedeBuscar},on:{click:e.buscarRecibo}},[t("i",{staticClass:"fas fa-search fa-fw"})])])])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("button",{staticClass:"btn btn-default btn-sm margen-superior-boton",attrs:{type:"button"},on:{click:e.limpiar}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v(" Borrar\n              ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("boton",{staticClass:"btn btn-primary btn-sm margen-superior-boton",attrs:{type:"submit",disabled:!e.puedeBuscar,procesando:e.procesando.buscarOrdenes}},[t("i",{staticClass:"fas fa-search fa-fw"}),e._v(" Buscar\n              ")])],1)])]),e._v(" "),e.ordenes.length>0?t("div",{staticClass:"table-responsive",staticStyle:{height:"316px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top sticky-bottom"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.seleccion,expression:"seleccion"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.seleccion)?e._i(e.seleccion,null)>-1:e.seleccion},on:{change:[function(t){var a=e.seleccion,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.seleccion=a.concat([null])):i>-1&&(e.seleccion=a.slice(0,i).concat(a.slice(i+1)))}else e.seleccion=o},e.alternarSeleccion]}})]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("No. Orden")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha orden")]),e._v(" "),t("th",[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Total")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Abono")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Saldo")]),e._v(" "),t("th",{staticClass:"col-sm-1"})])]),e._v(" "),t("tbody",e._l(e.ordenes,(function(a){return t("tr",{staticClass:"puntero"},[t("td",{staticClass:"col-sm-1 text-center",on:{click:function(t){return e.seleccionar(a)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.idsOrdenesSeleccionadas,expression:"idsOrdenesSeleccionadas"}],attrs:{type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(e.idsOrdenesSeleccionadas)?e._i(e.idsOrdenesSeleccionadas,a.id)>-1:e.idsOrdenesSeleccionadas},on:{change:function(t){var r=e.idsOrdenesSeleccionadas,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.id,n=e._i(r,s);o.checked?n<0&&(e.idsOrdenesSeleccionadas=r.concat([s])):n>-1&&(e.idsOrdenesSeleccionadas=r.slice(0,n).concat(r.slice(n+1)))}else e.idsOrdenesSeleccionadas=i}}})]),e._v(" "),t("td",{staticClass:"col-sm-1 text-center",on:{click:function(t){return e.seleccionar(a)}}},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"col-sm-2 text-center",on:{click:function(t){return e.seleccionar(a)}}},[e._v("\n                "+e._s(e._f("fecha")(a.fecha_orden,"YYYY-MM-DD"))+"\n              ")]),e._v(" "),t("td",{on:{click:function(t){return e.seleccionar(a)}}},[e._v("\n                "+e._s(a.paciente.nombre_paciente)+"\n              ")]),e._v(" "),t("td",{staticClass:"col-sm-1 text-right",on:{click:function(t){return e.seleccionar(a)}}},[e._v("\n                "+e._s(e._f("moneda")(a.valor_total))+"\n              ")]),e._v(" "),t("td",{staticClass:"col-sm-1 text-right",on:{click:function(t){return e.seleccionar(a)}}},[e._v("\n                "+e._s(e._f("moneda")(a.valor_total_abonos))+"\n              ")]),e._v(" "),t("td",{staticClass:"col-sm-1 text-right",on:{click:function(t){return e.seleccionar(a)}}},[e._v("\n                "+e._s(e._f("moneda")(a.saldo))+"\n              ")]),e._v(" "),t("td",{staticClass:"col-sm-1 text-center"},[a.valor_total_abonos>0?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Ver abonos"},on:{click:function(t){return e.verAbonos(a)}}},[t("i",{staticClass:"fas fa-donate fa-fw"})]):e._e()])])})),0),e._v(" "),t("tfoot",[t("tr",[t("td",{staticClass:"negrilla text-center"},[e._v("\n                "+e._s(e.ordenes.length)+"\n              ")]),e._v(" "),t("td",{staticClass:"negrilla text-right"}),e._v(" "),t("td"),e._v(" "),t("td",{staticClass:"col-sm-4 text-right negrilla"}),e._v(" "),t("td",{staticClass:"col-sm-1 text-right negrilla"},[e._v("\n                "+e._s(e._f("moneda")(e.totalOrdenes))+"\n              ")]),e._v(" "),t("td",{staticClass:"col-sm-1 text-right negrilla"},[e._v("\n                "+e._s(e._f("moneda")(e.totalAbonos))+"\n              ")]),e._v(" "),t("td",{staticClass:"col-sm-1 text-right negrilla",class:{"text-danger":e.totalSaldo>0}},[e._v("\n                "+e._s(e._f("moneda")(e.totalSaldo))+"\n              ")]),e._v(" "),t("td",{staticClass:"col-sm-1"})])])])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.buscarOrdenes,cantidad:e.ordenes.length,tipo:"órdenes"}})],1)])]),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"panel-group"},[t("div",{staticClass:"panel panel-gris"},[e._m(1),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label"},[e._v("Órdenes")]),e._v(" "),t("div",[e._v(e._s(e.idsOrdenesSeleccionadas.length))])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label"},[e._v("Valor")]),e._v(" "),t("div",[e._v(e._s(e._f("moneda")(e.totalAbonoSeleccionado)))])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label"},[e._v("Abonos")]),e._v(" "),t("div",[e._v(e._s(e.abonos.length))])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label"},[e._v("Valor")]),e._v(" "),t("div",[e._v(e._s(e._f("moneda")(e.valorTotalAbonos)))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Saldo a favor")]),e._v(" "),t("div",[e._v("\n                "+e._s(e._f("moneda")(e.empresaSaldo))+"\n              ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 col-sm-offset-2 text-right margen-superior-boton"},[e.configs.acciones.enviarCobros?t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.enviarCobros,expression:"enviarCobros"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.enviarCobros)?e._i(e.enviarCobros,null)>-1:e.enviarCobros},on:{change:function(t){var a=e.enviarCobros,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.enviarCobros=a.concat([null])):i>-1&&(e.enviarCobros=a.slice(0,i).concat(a.slice(i+1)))}else e.enviarCobros=o}}}),e._v("\n                  Enviar a "+e._s(e.sistemaFactura.nombre)+"\n                ")])]):e._e()]),e._v(" "),t("div",{staticClass:"col-sm-2 text-right margen-superior-boton"},[t("boton",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:0===e.idsOrdenesSeleccionadas.length||e.procesando.guardarAbonos},on:{click:e.agregarAbono}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v(" Agregar\n              ")]),e._v(" "),t("boton",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",procesando:e.procesando.guardarAbonos,disabled:0===e.idsOrdenesSeleccionadas.length||0===e.abonos.length||e.procesando.guardarAbonos}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Abonar\n              ")])],1)])])])]),e._v(" "),e._l(e.abonos,(function(a,r){return[t("div",{staticClass:"panel-group"},[t("div",{staticClass:"panel panel-gris"},[t("div",{staticClass:"panel-heading"},[t("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"}},[t("strong",[e._v("Registrar abono No. "+e._s(r+1))]),e._v(" "),t("div",[t("boton",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",procesando:e.procesando.guardarAbonos},on:{click:function(t){return e.quitarAbono(r)}}},[t("i",{staticClass:"fas fa-minus fa-fw"}),e._v(" \n                ")]),e._v(" "),t("boton",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",procesando:e.procesando.guardarAbonos},on:{click:e.agregarAbono}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v(" \n                ")])],1)])]),e._v(" "),t("div",{staticClass:"panel-body"},[t("abono",{attrs:{"empresa-saldo":e.empresaSaldo,"sistema-factura":e.sistemaFactura,"cuentas-bancarias":e.cuentasBancarias,"entidades-financieras":e.entidadesFinancieras,"total-saldo":e.totalAbonoSeleccionado,abono:a,configs:e.configs}})],1)])])]}))],2),e._v(" "),t("ver-abonos-registrados-modal",{attrs:{orden:e.ordenSeleccionada}}),e._v(" "),t("ver-abono-modal",{attrs:{"orden-id":e.ordenSeleccionada.id,"sistema-factura":e.sistemaFactura,"cuentas-bancarias":e.cuentasBancarias,"entidades-financieras":e.entidadesFinancieras,configs:e.configs,top:22}}),e._v(" "),t("buscar-recibo-modal",{attrs:{seleccionable:!0,"empresa-id":e.filtros.empresaId},on:{"recibo-seleccionado":e.reciboSeleccionado}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h4",{staticClass:"panel-title"},[this._v("\n          Órdenes\n        ")])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h4",{staticClass:"panel-title"},[this._v("\n            Resumen de abonos\n          ")])])}],!1,null,null,null).exports},5959:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});a(4590);var r=a(1430),o=a(7974);const i={components:{Modal:r.Z},props:{ordenId:{required:!1},sistemaFactura:{required:!0},cuentasBancarias:{required:!1,type:Array,default:function(){return[]}},entidadesFinancieras:{required:!1,type:Array,default:function(){return[]}},top:{type:Number,default:0},configs:{type:Object,required:!1,default:function(){return{requeridos:{},acciones:{},mostrar:{}}}}},data:function(){return{procesando:!1,mostrar:!1,abono:{valor:0}}},mounted:function(){var e=this;$("#modalAbonosVer").on("show.bs.modal",(function(t){if("modalAbonosVer"===t.target.id){var a=$(t.relatedTarget).data("abono");e.cargarDatos(a)}})),$("#modalAbonosVer").on("hide.bs.modal",(function(t){"modalAbonosVer"===t.target.id&&(e.abono={valor:0})}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cerrar:function(){$("#modalAbonosVer").modal("toggle")},cargarDatos:function(e){var t=this;axios.get("/api/ordenes/".concat(this.ordenId,"/abonos/").concat(e.id)).then((function(e){var a=e.data.data;t.cargarExtras(a),t.abono=a})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar abono",a)}))},cargarExtras:function(e){e.extras||(e=(0,o.SP)(e))}},computed:{esAnulada:function(){return"N"===this.abono.estado},cuentaBancaria:function(){var e=this;if(!this.abono.cuenta_bancaria_id)return"-";var t=this.cuentasBancarias.find((function(t){return t.id=e.abono.cuenta_bancaria_id}));return t?"".concat(t.nombre," (").concat(t.tipo,") No. ").concat(t.numero):"-"},bancos:function(){return this.entidadesFinancieras.filter((function(e){return"BANCO"===e.tipo}))},emisoresTarjetas:function(){return this.entidadesFinancieras.filter((function(e){return"TARJETA"===e.tipo}))},mostrarTcProveedor:function(){return _.get(this.configs,"mostrar.tcProveedor")},mostrarTdProveedor:function(){return _.get(this.configs,"mostrar.tcProveedor")},entidadEmisoraBanco:function(){var e=this;if(!_.get(this.abono.extras,"entidad_financiera_id"))return"-";var t=this.bancos.find((function(t){return t.id===e.abono.extras.entidad_financiera_id}));return t?t.nombre:"-"},entidadEmisoraTarjeta:function(){var e=this;if(!_.get(this.abono.extras,"entidad_financiera_id"))return"-";var t=this.emisoresTarjetas.find((function(t){return t.id==e.abono.extras.entidad_financiera_id}));return t?t.nombre:"-"}}};const s=(0,a(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("modal",{attrs:{id:"modalAbonosVer",top:e.top},scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("Ver abono")]},proxy:!0},{key:"cuerpo",fn:function(){return[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label"},[e._v("Forma pago")]),e._v(" "),t("div",[e._v("\n          "+e._s(e._f("formaPago")(e.abono.forma_pago))+"\n        ")])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha")]),e._v(" "),t("div",[e._v("\n          "+e._s(e._f("fecha")(e.abono.fecha_abono))+"\n        ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Valor")]),e._v(" "),t("div",[e._v(e._s(e.$cliente.moneda)+e._s(e._f("numero")(e.abono.valor)))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Usuario ingresa")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.abono.usuario_ingresa?e.abono.usuario_ingresa.nombre_usuario:"")+"\n        ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"estado"}},[e._v("Estado")]),e._v(" "),t("div",{attrs:{id:"estado"}},[e._v(e._s(e._f("estadoAbono")(e.abono.estado)))])])]),e._v(" "),"CH"===e.abono.forma_pago?t("div",{staticClass:"row"},[e.bancos.length>0?t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Entidad emisora\n        ")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.entidadEmisoraBanco)+"\n        ")])]):e._e(),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Nro. cheque\n        ")]),e._v(" "),t("div",[e._v(e._s(e.abono.numero_forma_pago?e.abono.numero_forma_pago:"-"))])])]):e._e(),e._v(" "),"DE"===e.abono.forma_pago?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Nro. deposito")]),e._v(" "),t("div",[e._v(e._s(e.abono.numero_forma_pago?e.abono.numero_forma_pago:"-"))])]),e._v(" "),t("div",{staticClass:"col-sm-9 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Cuenta bancaria destino\n        ")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.cuentaBancaria?e.cuentaBancaria:"-")+"\n        ")])])]):e._e(),e._v(" "),"TI"===e.abono.forma_pago?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Nro. comprobante")]),e._v(" "),t("div",[e._v(e._s(e.abono.numero_forma_pago?e.abono.numero_forma_pago:"-"))])]),e._v(" "),e.configs.acciones.cargarCuentasBancarias?t("div",{staticClass:"col-sm-9 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Cuenta bancaria destino\n        ")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.cuentaBancaria?e.cuentaBancaria:"-")+"\n        ")])]):e._e()]):e._e(),e._v(" "),"TD"===e.abono.forma_pago?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"emisor_id"}},[e._v("\n          Entidad emisora\n        ")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.entidadEmisoraTarjeta)+"\n        ")])]),e._v(" "),e.mostrarTdProveedor?t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Proveedor\n        ")]),e._v(" "),t("div",[e._v(e._s(e._f("proveedorContifico")(e.abono.numero_forma_pago)))])]):e._e(),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Nro. lote\n        ")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.abono.extras.numero_lote?e.abono.extras.numero_lote:"-")+"\n        ")])])]):e._e(),e._v(" "),"TC"===e.abono.forma_pago?t("div",{staticClass:"row"},[e.emisoresTarjetas.length>0?t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Entidad emisora\n        ")]),e._v(" "),t("div",[e._v(e._s(e.entidadEmisoraTarjeta))])]):e._e(),e._v(" "),e.mostrarTcProveedor?t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Proveedor\n        ")]),e._v(" "),t("div",[e._v(e._s(e._f("proveedorContifico")(e.abono.numero_forma_pago)))])]):e._e(),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Nro. lote\n        ")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.abono.extras.numero_lote?e.abono.extras.numero_lote:"-")+"\n        ")])])]):e._e(),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n          Referencia\n        ")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.abono.referencia?e.abono.referencia:"-")+"\n        ")])])]),e._v(" "),e.esAnulada?[t("h4",[e._v("Anulación")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Usuario")]),e._v(" "),t("div",[e._v(e._s(e.abono.usuario_anula?e.abono.usuario_anula.nombre_usuario:""))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha")]),e._v(" "),t("div",[e._v(e._s(e.abono.fecha_anula))])]),e._v(" "),t("div",{staticClass:"col-sm-7 form-group"},[t("label",{staticClass:"control-label"},[e._v("Motivo")]),e._v(" "),t("div",[e._v(e._s(e.abono.motivo_anula))])])])]:e._e()]},proxy:!0},{key:"pie",fn:function(){return[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")])]},proxy:!0}])})}),[],!1,null,null,null).exports},4049:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id","antibioticos"],data:function(){return{cadenaBusquedaAntibiotico:"",registro:{nombre:"",antibioticos:[]}}},mounted:function(){this.cargarDatos()},methods:{abrirBusquedaAntibioticos:function(){this.cadenaBusquedaAntibiotico="",$("#busquedaAntibiotico").modal()},agregarAntibiotico:function(e){this.registro.antibioticos.some((function(t){return t.id===e.id}))||this.registro.antibioticos.push(e)},cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/antibiogramas/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar antibiograma!",a)})).then((function(){return e.$refs.cargando.alternar()})))},eliminarAntibiotico:function(e){var t=this.registro.antibioticos.indexOf(e);this.registro.antibioticos.splice(t,1)},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/antibiogramas",a="post";"0"!==this.id&&(t="/api/antibiogramas/".concat(this.id),a="patch");var r={id:this.registro.id,nombre:this.registro.nombre,antibioticos:_.map(this.registro.antibioticos,"id")};axios[a](t,r).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar antibiograma!",a)}))},limpiarCadenaBusquedaAntibiotico:function(){this.cadenaBusquedaAntibiotico=""},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/antibiogramas"},regresar:function(){window.history.back()}},computed:{antibioticosFiltrados:function(){var e=new RegExp(removeDiacritics(this.cadenaBusquedaAntibiotico),"i"),t=_.map(this.registro.antibioticos,"id");return this.antibioticos.filter((function(a){return!t.includes(a.id)&&(e.test(removeDiacritics(a.nombre))||e.test(a.codigo))}))},antibioticosOrdenados:function(){return _.orderBy(this.registro.antibioticos,"nombre")}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear antibiograma":"Editar antibiograma")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"100",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row"},[e._m(0),e._v(" "),t("div",{staticClass:"col-sm-4 text-right",staticStyle:{"padding-top":"25px"}},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:e.abrirBusquedaAntibioticos}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v("Agregar\n            ")])])]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",e._l(e.antibioticosOrdenados,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.codigo))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(t){return e.eliminarAntibiotico(a)}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Eliminar\n              ")])])])})),0)])])])],1),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"busquedaAntibiotico",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(2),e._v(" "),t("alerta",{ref:"alertaBusquedaAntibioticos"}),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusquedaAntibiotico,expression:"cadenaBusquedaAntibiotico"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusquedaAntibiotico},on:{input:function(t){t.target.composing||(e.cadenaBusquedaAntibiotico=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusquedaAntibiotico}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])])]),e._v(" "),t("br"),e._v(" "),t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(3),e._v(" "),t("tbody",[e._l(e.antibioticosFiltrados,(function(a){return[t("tr",[t("td",[e._v(e._s(a.codigo))]),e._v(" "),t("td",[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Agregar"},on:{click:function(t){return e.agregarAntibiotico(a)}}},[t("i",{staticClass:"fas fa-plus"})])])])]}))],2)])])])],1)])]),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-sm-8"},[e("h3",[this._v("Antibióticos")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-6 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-left"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Antibióticos")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-7 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-left"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-sm-2"})])])}],!1,null,null,null).exports},5329:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{permisos:{},cargando:!1,paginaActual:1,totalRegistros:0,totalPaginas:0,cadenaBusqueda:"",antibiogramas:[]}},mounted:function(){this.cargarDatos()},methods:{buscarAntibiogramas:function(){this.paginaActual=1,this.cargarAntibiogramas()},cargarAntibiogramas:function(){var e=this;this.cargando=!0,this.antibiogramas=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginaActual};axios.get("/api/antibiogramas",{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.antibiogramas=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al listar antibiogramas!",a)})).finally((function(){return e.cargando=!1}))},cargarDatos:function(){this.permisos=this.datos.permisos,this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginaActual=1,this.cargarAntibiogramas()},editarAntibiograma:function(e){window.location.href="/antibiogramas/"+e.id+"/edit"},eliminarAntibiograma:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/antibiogramas/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("¡Antibiograma eliminado exitosamente!")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar antibiograma!",a)}))},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginaActual=1,this.cargarAntibiogramas()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Antibiogramas\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarAntibiogramas.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarAntibiogramas}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[t("a",{class:"btn btn-primary"+(e.permisos.crearAntibiogramas?"":" disabled"),attrs:{href:"/antibiogramas/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")])])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.antibiogramas.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.antibiogramas,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left cortar-texto"},[e._v(e._s(a.codigo))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.permisos.editarAntibiogramas},on:{click:function(t){return e.editarAntibiograma(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.permisos.eliminarAntibiogramas},on:{click:function(t){return e.eliminarAntibiograma(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.antibiogramas.length,tipo:"antibiogramas"}}),e._v(" "),!e.cargando&&e.antibiogramas.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarAntibiogramas,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-md-2 text-left"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-md-2 text-center"})])])}],!1,null,null,null).exports},5415:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],data:function(){return{registro:{nombre:"",codigo:"",referencia_auxiliar:""}}},mounted:function(){this.cargarDatos()},methods:{cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/antibioticos/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar antibiótico!",a)})).then((function(){return e.$refs.cargando.alternar()})))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/antibioticos",a="post";"0"!==this.id&&(t="/api/antibioticos/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar antibiótico!",a)}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/antibioticos"},regresar:function(){window.history.back()}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear antibiótico":"Editar antibiótico")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"100",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"codigo"}},[e._v("Código")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.codigo,expression:"registro.codigo"}],staticClass:"form-control input-sm",attrs:{id:"codigo",name:"codigo",type:"text",maxlength:"5",required:""},domProps:{value:e.registro.codigo},on:{input:function(t){t.target.composing||e.$set(e.registro,"codigo",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label",attrs:{for:"referencia_auxiliar"}},[e._v("Referencia auxiliar")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.referencia_auxiliar,expression:"registro.referencia_auxiliar"}],staticClass:"form-control input-sm",attrs:{id:"referencia_auxiliar",name:"referencia_auxiliar",type:"text",maxlength:"60"},domProps:{value:e.registro.referencia_auxiliar},on:{input:function(t){t.target.composing||e.$set(e.registro,"referencia_auxiliar",t.target.value)}}})])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},9602:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{permisos:{},cargando:!1,paginaActual:1,totalRegistros:0,totalPaginas:0,cadenaBusqueda:"",antibioticos:[]}},mounted:function(){this.cargarDatos()},methods:{buscarAntibioticos:function(){this.paginaActual=1,this.cargarAntibioticos()},cargarAntibioticos:function(){var e=this;this.cargando=!0,this.antibioticos=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginaActual};axios.get("/api/antibioticos",{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.antibioticos=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al listar antibióticos!",a)})).finally((function(){return e.cargando=!1}))},cargarDatos:function(){this.permisos=this.datos.permisos,this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginaActual=1,this.cargarAntibioticos()},editarAntibiotico:function(e){window.location.href="/antibioticos/"+e.id+"/edit"},eliminarAntibiotico:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/antibioticos/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("¡Antibiótico eliminado exitosamente!")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar antibiótico!",a)}))},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginaActual=1,this.cargarAntibioticos()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Antibióticos\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarAntibioticos.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarAntibioticos}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[t("a",{class:"btn btn-primary"+(e.permisos.crearAntibioticos?"":" disabled"),attrs:{href:"/antibioticos/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")])])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.antibioticos.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.antibioticos,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left cortar-texto"},[e._v(e._s(a.codigo))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.permisos.editarAntibioticos},on:{click:function(t){return e.editarAntibiotico(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.permisos.eliminarAntibioticos},on:{click:function(t){return e.eliminarAntibiotico(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.antibioticos.length,tipo:"antibióticos"}}),e._v(" "),!e.cargando&&e.antibioticos.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarAntibioticos,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-md-2 text-left"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-md-2 text-center"})])])}],!1,null,null,null).exports},5418:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s={props:{nombreLaboratorio:{type:String},nombresUsuario:{type:String}},data:function(){return{procesando:{cargarEntradas:!1,cargarArticulos:!1,cargarCantidadOrdenes:!1,cargarPacientesNuevos:!1,cargarPacientesRecurrentes:!1},ultimasEntradas:[],anterioresEntradas:[],articulos:[],dashboard:{cantidadOrdenes:"-",pacientesNuevos:"-",pacientesRecurrentes:"-"},fecha:{ano:null,mess:null,etiqueta:""},fechas:[]}},created:function(){this.cargarEntradas(),this.cargarArticulos(),this.cargarFechas(),this.cargarDashboard()},mounted:function(){var e=this;Echo.channel("".concat(this.$cliente.subdominio,".ordenes")).listen("OrdenCreada",(function(t){e.cargarDashboard(!1)}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarFechas:function(){for(var e=moment(),t=0;t<10;t++)this.fechas.push({ano:e.year(),mes:e.month()+1,etiqueta:e.format("yyyy MMMM")}),e=e.subtract(1,"months");this.fecha=this.fechas[0]},cargarEntradas:function(){var e=this;this.procesando.cargarEntradas=!0,axios.get("/api/feeds/entradas").then((function(t){var a=t.data.data;e.ultimasEntradas=a.ultimas,e.anterioresEntradas=a.anteriores})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar entradas",a)})).then((function(){return e.procesando.cargarEntradas=!1}))},cargarArticulos:function(){var e=this;this.procesando.cargarArticulos=!0,axios.get("/api/feeds/articulos").then((function(t){var a=t.data.data;e.articulos=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar artículos",a)})).then((function(){return e.procesando.cargarArticulos=!1}))},cargarDashboard:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cargarCantidadOrdenes(e),this.cargarPacientesNuevos(e),this.cargarPacientesRecurrentes(e)},cargarCantidadOrdenes:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.procesando.cargarCantidadOrdenes=!0,axios.get("/api/metricas/cantidad-ordenes",{params:o(o({},this.fecha),{},{cache:t})}).then((function(t){var a=t.data.data;e.dashboard.cantidadOrdenes=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar cantidad órdenes",a)})).then((function(){return e.procesando.cargarCantidadOrdenes=!1}))},cargarPacientesNuevos:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.procesando.cargarPacientesNuevos=!0,axios.get("/api/metricas/pacientes-nuevos",{params:o(o({},this.fecha),{},{cache:t})}).then((function(t){var a=t.data.data;e.dashboard.pacientesNuevos=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar pacientes nuevos",a)})).then((function(){return e.procesando.cargarPacientesNuevos=!1}))},cargarPacientesRecurrentes:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.procesando.cargarPacientesRecurrentes=!0,axios.get("/api/metricas/pacientes-recurrentes",{params:o(o({},this.fecha),{},{cache:t})}).then((function(t){var a=t.data.data;e.dashboard.pacientesRecurrentes=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar pacientes recurrentes",a)})).then((function(){return e.procesando.cargarPacientesRecurrentes=!1}))},cambioFecha:function(){this.cargarDashboard()}}};var n=a(3379),c=a.n(n),l=a(9983),d={insert:"head",singleton:!1};c()(l.Z,d);l.Z.locals;const u=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      "+e._s(e.nombreLaboratorio)+" \n    ")]},proxy:!0}])}),e._v(" "),t("table",{staticClass:"table table-borderless"},[t("div",{staticClass:"col-sm-1"}),e._v(" "),t("div",{staticClass:"col-sm-7"},[t("div",{staticClass:"tarjeta tarjeta-usuario"},[t("h3",[e._v("¡Hola, "+e._s(e.nombresUsuario)+"!")]),e._v(" "),t("p",[e._v("Nos alegra que estés de regreso")]),e._v(" "),e._m(0)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.ultimasEntradas.length>0||e.anterioresEntradas.length>0,expression:"ultimasEntradas.length>0 || anterioresEntradas.length>0"}],staticClass:"tarjeta tarjeta-novedades"},[t("h3",[e._v("Tablero de métricas")]),e._v(" "),e._m(1),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.fecha,expression:"fecha"}],staticClass:"form-control input-xs",attrs:{id:"fecha",name:"fecha"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.fecha=t.target.multiple?a:a[0]},e.cambioFecha]}},e._l(e.fechas,(function(a){return t("option",{domProps:{value:a}},[e._v("\n                "+e._s(a.etiqueta)+"\n              ")])})),0)])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 tarjeta-metrica"},[t("div",{staticClass:"panel"},[e._m(2),e._v(" "),t("div",{staticClass:"panel-body text-center"},[t("cargando",{attrs:{cargando:e.procesando.cargarCantidadOrdenes,"mostrar-etiqueta":!1,alto:"50px"}}),e._v(" "),e.procesando.cargarCantidadOrdenes?e._e():t("div",{staticClass:"metrica"},[e._v("\n                "+e._s(e.dashboard.cantidadOrdenes)+"\n              ")])],1)])]),e._v(" "),t("div",{staticClass:"col-sm-3 tarjeta-metrica"},[t("div",{staticClass:"panel"},[e._m(3),e._v(" "),t("div",{staticClass:"panel-body text-center"},[t("cargando",{attrs:{cargando:e.procesando.cargarPacientesNuevos,"mostrar-etiqueta":!1,alto:"50px"}}),e._v(" "),e.procesando.cargarPacientesNuevos?e._e():t("div",{staticClass:"metrica"},[e._v("\n                "+e._s(e.dashboard.pacientesNuevos)+"\n              ")])],1)])]),e._v(" "),t("div",{staticClass:"col-sm-4 tarjeta-metrica"},[t("div",{staticClass:"panel"},[e._m(4),e._v(" "),t("div",{staticClass:"panel-body text-center"},[t("cargando",{attrs:{cargando:e.procesando.cargarPacientesRecurrentes,"mostrar-etiqueta":!1,alto:"50px"}}),e._v(" "),e.procesando.cargarPacientesRecurrentes?e._e():t("div",{staticClass:"metrica"},[e._v("\n                "+e._s(e.dashboard.pacientesRecurrentes)+"\n              ")])],1)])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.ultimasEntradas.length>0||e.anterioresEntradas.length>0,expression:"ultimasEntradas.length>0 || anterioresEntradas.length>0"}],staticClass:"tarjeta tarjeta-novedades"},[t("h3",[e._v("Novedades de Orión")]),e._v(" "),e._m(5)]),e._v(" "),t("div",{staticStyle:{position:"relative"}},[t("div",{staticClass:"publicacion"},[t("cargando",{attrs:{cargando:e.procesando.cargarEntradas,"mostrar-etiqueta":!1,alto:"50px"}}),e._v(" "),e._l(e.ultimasEntradas,(function(a){return t("div",{staticClass:"semana panel"},[t("div",{staticClass:"img"}),e._v(" "),t("div",{staticClass:"panel-heading"},[t("h4",[e._v(" "+e._s(a.titulo)+" ")])]),e._v(" "),t("div",{staticClass:"panel-body"},[e._v("\n              "+e._s(a.descripcion)+"\n            ")]),e._v(" "),t("div",{staticClass:"panel-footer"},[t("a",{staticClass:"btn btn-default btn-sm",attrs:{href:a.enlace,target:"_blank"}},[e._v("\n                Ver más\n              ")]),e._v("\n               "),t("span",{staticClass:"fecha"},[e._v(e._s(a.fecha))])])])})),e._v(" "),e._l(e.anterioresEntradas,(function(a){return t("div",{staticClass:"panel"},[t("div",{staticClass:"img"}),e._v(" "),t("div",{staticClass:"panel-heading"},[t("h4",[e._v(" "+e._s(a.titulo)+" ")])]),e._v(" "),t("div",{staticClass:"panel-body"},[e._v("\n              "+e._s(a.descripcion)+"\n            ")]),e._v(" "),t("div",{staticClass:"panel-footer"},[t("a",{staticClass:"btn btn-default btn-sm",attrs:{href:a.enlace,target:"_blank"}},[e._v("\n                Ver más\n              ")]),e._v("\n               "),t("span",{staticClass:"fecha"},[e._v(e._s(a.fecha))])])])}))],2)]),e._v(" "),e._m(6)]),e._v(" "),t("div",{staticClass:"col-sm-1"}),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.cargarArticulos,"mostrar-etiqueta":!1,alto:"50px"}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.articulos.length>0,expression:"articulos.length>0"}],staticClass:"col-sm-3"},[e._m(7),e._v(" "),t("div",{staticClass:"articulo"},e._l(e.anterioresEntradas,(function(a){return t("div",{staticClass:"panel-oscuro panel"},[t("div",{staticClass:"img"}),e._v(" "),t("div",{staticClass:"panel-heading"},[t("h4",[e._v(" "+e._s(a.titulo)+" ")])]),e._v(" "),t("div",{staticClass:"panel-body"},[e._v("\n            "+e._s(a.descripcion)+"\n          ")]),e._v(" "),t("div",{staticClass:"panel-footer"},[t("a",{staticClass:"btn btn-default btn-sm",attrs:{href:a.enlace,target:"_blank"}},[e._v("\n              Ver más\n            ")]),e._v("\n             "),t("span",{staticClass:"fecha"},[e._v(e._s(a.fecha))])])])})),0)])],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"tarjeta-icono"},[e("i",{staticClass:"fas fa-user-circle fa-6",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("div",{staticClass:"tarjeta-icono"},[e("i",{staticClass:"fas fa-chart-bar fa-6",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h6",[this._v("Cantidad de órdenes")])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h6",[this._v("Pacientes nuevos")])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h6",[this._v("Pacientes recurrentes")])])},function(){var e=this._self._c;return e("div",{staticClass:"tarjeta-icono"},[e("i",{staticClass:"fas fa-eye fa-6",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"tarjeta tarjeta-ayuda"},[t("h3",[e._v("¿Necesitas ayuda?")]),e._v(" "),t("div",{staticClass:"tarjeta-icono"},[t("i",{staticClass:"fas fa-question fa-6",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("p",[e._v("Revisa nuestra lista de reproducción en YouTube para...")]),e._v(" "),t("div",{},[t("a",{staticClass:"btn btn-default btn-sm",attrs:{href:"https://www.youtube.com/watch?v=K54qyFXwSeI&list=PLOwFKKdWz5lhhCqAdmlnjr6mtm4H6P2oo",target:"_blank"}},[e._v("Configuración")]),e._v(" "),t("a",{staticClass:"btn btn-default btn-sm",attrs:{href:"https://www.youtube.com/watch?v=Mi-Y3O1GXYc&list=PLOwFKKdWz5lj_RTdJq96aJRMt_skaMUgc",target:"_blank"}},[e._v("Proceso de laboratorio")]),e._v(" "),t("a",{staticClass:"btn btn-default btn-sm",attrs:{href:"https://www.youtube.com/watch?v=PZk1qyiSH6E&list=PLOwFKKdWz5liILl9Db_4zMV0KxmCTeFqn",target:"_blank"}},[e._v("Consula de resultados")]),e._v(" "),t("a",{staticClass:"btn btn-default btn-sm",attrs:{href:"https://youtu.be/ABUh19U7ylc",target:"_blank"}},[e._v("Pedidos en línea (médicos)")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"tarjeta tarjeta-interes"},[t("h3",[e._v("Artículos de interés")]),e._v(" "),t("div",{staticClass:"tarjeta-icono"},[t("i",{staticClass:"fas fa-coffee fa-6",attrs:{"aria-hidden":"true"}})])])}],!1,null,"290f94e2",null).exports},3553:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:["datos"],data:function(){return{cadenaBusqueda:"",filtros:{fecha_desde:moment().format("YYYY-MM-DD"),hora_desde:"",minuto_desde:"",hora_hasta:"",minuto_hasta:"",usuario_id:"",usuario_nombre:"",sucursal_id:"",empresa_id:"",subempresa_id:"",ordenes_con_abonos:!1,ordenes_con_sin_abonos:!1,flujo_caja:!1,excluir_proformas:!1,incluir_detalle_abonos:!1},usuarios:[],sucursales:[],empresas:[],empresa:"",subempresas:[]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/cierres").then((function(t){e.usuarios=t.data.data.usuarios,e.sucursales=t.data.data.sucursales,e.empresas=t.data.data.empresas,e.datos.permisos.cambiarSucursal||(e.filtros.sucursal_id=e.datos.sucursalActivaId),e.datos.permisos.cambiarEmpresas||(e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al inicializar los filtros",a)})).then((function(){return e.$refs.cargando.alternar()}))},limpiarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.hora_desde="",this.filtros.hora_hasta="",this.filtros.minuto_desde="",this.filtros.minuto_hasta="",this.filtros.usuario_id="",this.filtros.usuario_nombre="",this.filtros.subempresa_id="",this.filtros.ordenes_con_abonos=!1,this.filtros.excluir_proformas=!1,this.filtros.incluir_detalle_abonos=!1,this.datos.permisos.cambiarSucursal&&(this.filtros.sucursal_id=""),this.datos.permisos.cambiarEmpresas&&(this.empresa="",this.filtros.empresa_id="")},abrirBusquedaUsuario:function(){this.cadenaBusqueda="",$("#busquedaUsuario").modal()},seleccionarUsuario:function(e){this.filtros.usuario_id=e.id,this.filtros.usuario_nombre=e.nombre_usuario,$("#busquedaUsuario").modal("hide")},limpiarUsuario:function(){this.filtros.usuario_id="",this.filtros.usuario_nombre=""},limpiarCadenaBusqueda:function(){this.cadenaBusqueda=""},generar:function(){var e=this.obtenerParametrosUrl(this.filtros);window.open("cierres/pdf".concat(e),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},cambiarEmpresa:function(){this.filtros.subempresa_id="",this.empresa?(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas):(this.filtros.empresa_id="",this.subempresas="")},cambioOrdenesConAbonos:function(){this.filtros.ordenes_con_sin_abonos=!this.filtros.ordenes_con_abonos},cambioOrdenesConSinAbonos:function(){this.filtros.ordenes_con_abonos=!this.filtros.ordenes_con_sin_abonos}},computed:{usuariosFiltrados:function(){var e=this;return this.usuarios.length>0?this.usuarios.filter((function(t){var a=new RegExp(removeDiacritics(e.cadenaBusqueda),"i");return a.test(removeDiacritics(t.nombre_usuario))||a.test(removeDiacritics(t.nombre_completo))})):this.usuarios},esContifico:function(){return this.datos.sistemaFactura&&this.datos.sistemaFactura.driver===r.Q0.CONTIFICO}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Cierre de Caja\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{id:"generarInformeCierreCaja",type:"submit"}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Generar informe\n            ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fecha_desde"}},[e._v("Fecha")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fecha_desde","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",autocomplete:"off",required:""}})]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"hora_desde"}},[e._v("Hora desde")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.hora_desde,expression:"filtros.hora_desde"}],staticClass:"form-control input-sm",attrs:{id:"hora_desde",type:"number",min:"0",max:"23",step:"1",title:"Ejemplo: 13",required:""!==e.filtros.minuto_desde||""!==e.filtros.hora_hasta||""!==e.filtros.minuto_hasta},domProps:{value:e.filtros.hora_desde},on:{input:function(t){t.target.composing||e.$set(e.filtros,"hora_desde",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"minuto_desde"}},[e._v("Minuto desde")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.minuto_desde,expression:"filtros.minuto_desde"}],staticClass:"form-control input-sm",attrs:{id:"minuto_desde",type:"number",min:"0",max:"59",step:"1",title:"Ejemplo: 00",required:""!==e.filtros.hora_desde||""!==e.filtros.hora_hasta||""!==e.filtros.minuto_hasta},domProps:{value:e.filtros.minuto_desde},on:{input:function(t){t.target.composing||e.$set(e.filtros,"minuto_desde",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"hora_hasta"}},[e._v("Hora hasta")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.hora_hasta,expression:"filtros.hora_hasta"}],staticClass:"form-control input-sm",attrs:{id:"hora_hasta",type:"number",min:"0",max:"23",step:"1",title:"Ejemplo: 19",required:""!==e.filtros.hora_desde||""!==e.filtros.minuto_desde||""!==e.filtros.minuto_hasta},domProps:{value:e.filtros.hora_hasta},on:{input:function(t){t.target.composing||e.$set(e.filtros,"hora_hasta",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"minuto_hasta"}},[e._v("Minuto hasta")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.minuto_hasta,expression:"filtros.minuto_hasta"}],staticClass:"form-control input-sm",attrs:{id:"minuto_hasta",type:"number",min:"0",max:"59",step:"1",title:"Ejemplo: 00",required:""!==e.filtros.hora_desde||""!==e.filtros.minuto_desde||""!==e.filtros.hora_hasta},domProps:{value:e.filtros.minuto_hasta},on:{input:function(t){t.target.composing||e.$set(e.filtros,"minuto_hasta",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",placeholder:"Todos",disabled:!e.datos.permisos.cambiarEmpresas,options:e.empresas,label:"nombre"},on:{input:e.cambiarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categorías")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"subempresa_id",placeholder:"Todos",options:e.subempresas,reduce:function(e){return e.id},label:"nombre"},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.subempresa_id,callback:function(t){e.$set(e.filtros,"subempresa_id",t)},expression:"filtros.subempresa_id"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.datos.permisos.cambiarSucursal},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario"}},[e._v("Usuario")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.usuario_nombre,expression:"filtros.usuario_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"usuario",maxlength:"15",disabled:""},domProps:{value:e.filtros.usuario_nombre},on:{input:function(t){t.target.composing||e.$set(e.filtros,"usuario_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBusquedaUsuario}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarUsuario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.ordenes_con_abonos,expression:"filtros.ordenes_con_abonos"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.ordenes_con_abonos)?e._i(e.filtros.ordenes_con_abonos,null)>-1:e.filtros.ordenes_con_abonos},on:{change:[function(t){var a=e.filtros.ordenes_con_abonos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"ordenes_con_abonos",a.concat([null])):i>-1&&e.$set(e.filtros,"ordenes_con_abonos",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"ordenes_con_abonos",o)},e.cambioOrdenesConAbonos]}}),e._v("\n                  Listado de Órdenes con Abonos\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.ordenes_con_sin_abonos,expression:"filtros.ordenes_con_sin_abonos"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.ordenes_con_sin_abonos)?e._i(e.filtros.ordenes_con_sin_abonos,null)>-1:e.filtros.ordenes_con_sin_abonos},on:{change:[function(t){var a=e.filtros.ordenes_con_sin_abonos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"ordenes_con_sin_abonos",a.concat([null])):i>-1&&e.$set(e.filtros,"ordenes_con_sin_abonos",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"ordenes_con_sin_abonos",o)},e.cambioOrdenesConSinAbonos]}}),e._v("\n                  Listado de Órdenes con y sin Abonos\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.flujo_caja,expression:"filtros.flujo_caja"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.flujo_caja)?e._i(e.filtros.flujo_caja,null)>-1:e.filtros.flujo_caja},on:{change:function(t){var a=e.filtros.flujo_caja,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"flujo_caja",a.concat([null])):i>-1&&e.$set(e.filtros,"flujo_caja",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"flujo_caja",o)}}}),e._v("\n                  Listado de Flujo de Caja\n                ")])])]),e._v(" "),e.esContifico?t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.excluir_proformas,expression:"filtros.excluir_proformas"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.excluir_proformas)?e._i(e.filtros.excluir_proformas,null)>-1:e.filtros.excluir_proformas},on:{change:function(t){var a=e.filtros.excluir_proformas,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"excluir_proformas",a.concat([null])):i>-1&&e.$set(e.filtros,"excluir_proformas",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"excluir_proformas",o)}}}),e._v("\n                  Excluir proformas\n                ")])])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.incluir_detalle_abonos,expression:"filtros.incluir_detalle_abonos"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.incluir_detalle_abonos)?e._i(e.filtros.incluir_detalle_abonos,null)>-1:e.filtros.incluir_detalle_abonos},on:{change:function(t){var a=e.filtros.incluir_detalle_abonos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"incluir_detalle_abonos",a.concat([null])):i>-1&&e.$set(e.filtros,"incluir_detalle_abonos",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"incluir_detalle_abonos",o)}}}),e._v("\n                  Incluir detalle de abonos\n                ")])])])])])])])],1),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"busquedaUsuario",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(1),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(2),e._v(" "),t("tbody",[e._l(e.usuariosFiltrados,(function(a){return[t("tr",[t("td",[e._v(e._s(a.nombre_usuario))]),e._v(" "),t("td",[e._v(e._s(a.nombre_completo))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:function(t){return e.seleccionarUsuario(a)}}},[t("i",{staticClass:"fas fa-check"})])])])]}))],2)])])])])])])],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Usuarios")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-3 text-center"},[e._v("Usuario")]),e._v(" "),t("th",{staticClass:"col-sm-7 text-center"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"})])])}],!1,null,null,null).exports},1120:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});a(2155);var r=a(1272),o=a.n(r),i=a(5234),s=a.n(i);const n={props:["id"],components:{ckeditor:o().component},data:function(){return{editor:s(),editorConfig:{language:"es",toolbar:["bold","italic","|","bulletedList","numberedList","|","insertTable","|","undo","redo"],table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]}},registro:{nombre:"",contenido:""}}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarInformativo:function(e,t){this.$refs.alerta.mostrarAlerta("info",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/comentarios/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar comentario!",a)})).then((function(){return e.$refs.cargando.alternar()})))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),"0"===this.id?axios.post("/api/comentarios",this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar comentario!",a)})):axios.patch("/api/comentarios/".concat(this.id),this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar comentario!",a)}))},redireccionar:function(){window.location.href="/comentarios"},regresar:function(){window.history.back()}}};const c=(0,a(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",[t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear comentario":"Editar comentario")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"30",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-12 editor alto-400"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"contenido"}},[e._v("Contenido")]),e._v(" "),t("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig,required:""},model:{value:e.registro.contenido,callback:function(t){e.$set(e.registro,"contenido",t)},expression:"registro.contenido"}})],1)])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},9959:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{permisos:{},cargando:!1,paginaActual:1,totalRegistros:0,totalPaginas:0,cadenaBusqueda:"",comentarios:[]}},created:function(){},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.permisos=this.datos.permisos,this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginaActual=1,this.cargarComentarios()},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginaActual=1,this.cargarComentarios()},cargarComentarios:function(){var e=this;this.cargando=!0,this.comentarios=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginaActual};axios.get("/api/comentarios",{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.comentarios=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al listar comentarios!",a)})).then((function(){return e.cargando=!1}))},editarComentario:function(e){window.location.href="/comentarios/"+e.id+"/edit"},eliminarComentario:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/comentarios/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("¡Comentario eliminado exitosamente!")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar comentario!",a)}))},buscarComentarios:function(){this.paginaActual=1,this.cargarComentarios()}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Comentarios\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarComentarios.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarComentarios}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[t("a",{class:"btn btn-primary"+(e.permisos.crearComentarios?"":" disabled"),attrs:{href:"/comentarios/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")])])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.comentarios.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.comentarios,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.permisos.editarComentarios},on:{click:function(t){return e.editarComentario(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.permisos.eliminarComentarios},on:{click:function(t){return e.eliminarComentario(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.comentarios.length,tipo:"comentarios"}}),e._v(" "),!e.cargando&&e.comentarios.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarComentarios,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-md-2 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-md-2 text-center"})])])}],!1,null,null,null).exports},1134:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(8550),o=a.n(r),i=(a(6424),a(7974));const s={props:["configuraciones","datos"],components:{VSwatches:o()},data:function(){return{sistemasExternos:[],estadoServidorLocal:"",marcaAguaPdf:"",urlMarcaAgua:"",registro:{tipo_numeracion:"",mostrar_servicio_tipo_atencion:"",cliente_en_ordenes:"",mostrar_historia_clinica:"",mostrar_orden_externa:"",mostrar_pdf_recibo:"",mostrar_pdf_etiquetas:"",tamano_papel_reporte:"",mostrar_validado_por:"",interpretacion_valor_referencia:"",imprimir_encabezado:"",imprimir_pie_pagina:"",imprimir_indicadores:"",negrilla_resultado_fuera_rango:"",imprimir_fecha_validacion:"",dominio_servidor_local:"",puerto_servidor_local:"",etiquetas_datos_paciente:"",etiquetas_qr:"",imprimir_url_resultados:"",imprimir_examenes:"",nombre_impuesto:"",porcentaje_impuesto:"",imprimir_factura_doble:"",factura_examenes_top:"",factura_examenes_lados:"",imprimir_firma_resultados:!1,tamano_letra_resultados:"",tipo_letra:"",membrete_id_pedidos:"",imprimir_categoria:!1,imprimir_sucursal:!1,color_1:"",color_2:"",plantilla_pdf:"",token_correo_recepcion:"",recibo_papel_termico:!1,mostrar_encabezado_recibo:!1,mostrar_firma_autorizacion_recibo:!1,imprimir_muestra_adecuada:!1,imprimir_muestra_recibida:!1,imprimir_categoria_etiqueta_paciente:!1,seguridad_pdf:!1,mostrar_codigo_qr:!1,cliente_categoria_requerido_pedidos:!1,numeracion_pagina_pdf_resultados:!1,mostrar_fecha_nacimiento:!1,mostrar_procesador_por:!1,mostrar_titulo_pdf_resultados:!1,margen_superior_sin_encabezado_primera_hoja:"",imprimir_etiqueta_datos_paciente_principio:"",medico_obligatorio:!1,mostrar_advertencia_abono_incompleto:!1,modulo_resultados_ordenes:"",mostrar_codigo_qr_recibo:!1,etiqueta_muestra_imprimir_historia_clinica:!1,etiqueta_muestra_imprimir_numero_orden_externa:!1,etiqueta_paciente_imprimir_historia_clinica:!1,etiqueta_paciente_imprimir_numero_orden_externa:!1,etiqueta_paciente_imprimir_medico:!1,etiqueta_paciente_imprimir_servicio:!1,iess_enviar_usuario_valida:!1,iess_enviar_no_procesados:!1,mostrar_resumen_paciente:"",etiqueta_muestra_imprimir_servicio:!1,etiqueta_muestra_imprimir_tipo_atencion:!1,etiqueta_muestra_imprimir_identificacion:!1,id_sistema_factura:"",etiqueta_muestra_imprimir_icono_emergencia:!1,iess_usuario_enviar_resultados:"",etiqueta_muestra_imprimir_medico:!1,crear_orden_muestra_pendiente:!1,mostrar_url_resultados_recibo:!1,sumilla_validacion_como_firma:!1,padding_tipo_numeracion:0,margenes_sin_encabezado:{superior:"",inferior:"",izquierdo:"",derecho:""},factura:{alto:"",ancho:"",tamano_letra:"",cantidad:{etiqueta:"",top:"",left:""},descuento:{etiqueta:"",top:"",left:""},detalle:{etiqueta:"",top:"",left:""},direccion:{etiqueta:"",top:"",left:""},fecha_emision:{etiqueta:"",top:"",left:""},identificacion:{etiqueta:"",top:"",left:""},impuesto:{etiqueta:"",top:"",left:""},nombre:{etiqueta:"",top:"",left:""},numero_factura:{etiqueta:"",top:"",left:""},subtotal:{etiqueta:"",top:"",left:""},telefono:{etiqueta:"",top:"",left:""},total:{etiqueta:"",top:"",left:""},valor_total:{etiqueta:"",top:"",left:""},valor_unitario:{etiqueta:"",top:"",left:""}},factura_totales:{top:"",left:""}}}},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.sistemasExternos=this.datos.sistemasExternosFacturas,this.registro.tipo_numeracion=this.obtenerValorPorClave("TIPO_NUMERACION"),this.registro.mostrar_servicio_tipo_atencion="1"===this.obtenerValorPorClave("MOSTRAR_SERVICIO_TIPO_ATENCION"),this.registro.cliente_en_ordenes="1"===this.obtenerValorPorClave("CLIENTE_EN_ORDENES"),this.registro.mostrar_historia_clinica="1"===this.obtenerValorPorClave("MOSTRAR_HISTORIA_CLINICA"),this.registro.mostrar_orden_externa="1"===this.obtenerValorPorClave("MOSTRAR_ORDEN_EXTERNA"),this.registro.mostrar_pdf_recibo="1"===this.obtenerValorPorClave("MOSTRAR_PDF_RECIBO"),this.registro.mostrar_pdf_etiquetas="1"===this.obtenerValorPorClave("MOSTRAR_PDF_ETIQUETAS"),this.registro.tamano_papel_reporte=this.obtenerValorPorClave("TAMANO_PAPEL_REPORTE"),this.registro.mostrar_validado_por="1"===this.obtenerValorPorClave("MOSTRAR_VALIDADO_POR"),this.registro.interpretacion_valor_referencia="1"===this.obtenerValorPorClave("INTERPRETACION_VALOR_REFERENCIA"),this.registro.imprimir_encabezado="1"===this.obtenerValorPorClave("IMPRIMIR_ENCABEZADO"),this.registro.imprimir_pie_pagina="1"===this.obtenerValorPorClave("IMPRIMIR_PIE_PAGINA"),this.registro.imprimir_indicadores="1"===this.obtenerValorPorClave("IMPRIMIR_INDICADORES"),this.registro.dominio_servidor_local=this.obtenerValorPorClave("DOMINIO_SERVIDOR_LOCAL"),this.registro.puerto_servidor_local=this.obtenerValorPorClave("PUERTO_SERVIDOR_LOCAL"),this.registro.etiquetas_datos_paciente=this.obtenerValorPorClave("ETIQUETAS_DATOS_PACIENTE"),this.registro.etiquetas_qr=this.obtenerValorPorClave("ETIQUETAS_QR"),this.registro.imprimir_url_resultados="1"===this.obtenerValorPorClave("IMPRIMIR_URL_RESULTADOS"),this.registro.imprimir_examenes="1"===this.obtenerValorPorClave("IMPRIMIR_EXAMENES"),this.registro.imprimir_categoria="1"===this.obtenerValorPorClave("IMPRIMIR_CATEGORIA"),this.registro.imprimir_sucursal="1"===this.obtenerValorPorClave("IMPRIMIR_SUCURSAL"),this.registro.nombre_impuesto=this.obtenerValorPorClave("NOMBRE_IMPUESTO"),this.registro.porcentaje_impuesto=this.obtenerValorPorClave("PORCENTAJE_IMPUESTO"),this.registro.imprimir_factura_doble="1"===this.obtenerValorPorClave("IMPRIMIR_FACTURA_DOBLE"),this.registro.factura_examenes_top=this.obtenerValorPorClave("FACTURA_EXAMENES_TOP"),this.registro.factura_examenes_lados=this.obtenerValorPorClave("FACTURA_EXAMENES_LADOS"),this.registro.imprimir_firma_resultados="1"===this.obtenerValorPorClave("IMPRIMIR_FIRMA_RESULTADOS"),this.registro.tamano_letra_resultados=this.obtenerValorPorClave("TAMANO_LETRA_RESULTADOS"),this.registro.membrete_id_pedidos=this.obtenerValorPorClave("MEMBRETE_ID_PEDIDOS"),this.registro.color_1=this.obtenerValorPorClave("COLOR_1"),this.registro.token_correo_recepcion="1"===this.obtenerValorPorClave("TOKEN_CORREO_RECEPCION"),this.registro.recibo_papel_termico="1"===this.obtenerValorPorClave("RECIBO_PAPEL_TERMICO"),this.registro.mostrar_encabezado_recibo="1"===this.obtenerValorPorClave("MOSTRAR_ENCABEZADO_RECIBO"),this.registro.imprimir_muestra_adecuada="1"===this.obtenerValorPorClave("IMPRIMIR_MUESTRA_ADECUADA"),this.registro.imprimir_muestra_recibida="1"===this.obtenerValorPorClave("IMPRIMIR_MUESTRA_RECIBIDA"),this.registro.imprimir_categoria_etiqueta_paciente="1"===this.obtenerValorPorClave("IMPRIMIR_CATEGORIA_ETIQUETA_PACIENTE"),this.registro.plantilla_pdf=this.obtenerValorPorClave("PLANTILLA_PDF"),this.registro.color_2=this.obtenerValorPorClave("COLOR_2"),this.registro.tipo_letra=this.obtenerValorPorClave("TIPO_LETRA"),this.registro.seguridad_pdf="1"===this.obtenerValorPorClave("SEGURIDAD_PDF"),this.registro.mostrar_codigo_qr="1"===this.obtenerValorPorClave("MOSTRAR_CODIGO_QR");var e=this.obtenerValorPorClave("MARCA_AGUA_PDF");this.urlMarcaAgua=e?"".concat(this.datos.urlStorage,"\\").concat(e):"",this.registro.cliente_categoria_requerido_pedidos="1"===this.obtenerValorPorClave("CLIENTE_CATEGORIA_REQUERIDO_PEDIDOS"),this.registro.negrilla_resultado_fuera_rango="1"===this.obtenerValorPorClave("NEGRILLA_RESULTADO_FUERA_RANGO"),this.registro.mostrar_firma_autorizacion_recibo="1"===this.obtenerValorPorClave("MOSTRAR_FIRMA_AUTORIZACION_RECIBO"),this.registro.numeracion_pagina_pdf_resultados="1"===this.obtenerValorPorClave("NUMERACION_PAGINA_PDF_RESULTADOS"),this.registro.mostrar_fecha_nacimiento="1"===this.obtenerValorPorClave("MOSTRAR_FECHA_NACIMIENTO"),this.registro.mostrar_procesador_por="1"===this.obtenerValorPorClave("MOSTRAR_PROCESADOR_POR"),this.registro.mostrar_titulo_pdf_resultados="1"===this.obtenerValorPorClave("MOSTRAR_TITULO_PDF_RESULTADOS"),this.registro.margen_superior_sin_encabezado_primera_hoja=this.obtenerValorPorClave("MARGEN_SUPERIOR_SIN_ENCABEZADO_PRIMERA_HOJA"),this.registro.imprimir_etiqueta_datos_paciente_principio="1"===this.obtenerValorPorClave("IMPRIMIR_ETIQUETA_DATOS_PACIENTE_PRINCIPIO"),this.registro.medico_obligatorio="1"===this.obtenerValorPorClave("MEDICO_OBLIGATORIO"),this.registro.mostrar_advertencia_abono_incompleto="1"===this.obtenerValorPorClave("MOSTRAR_ADVERTENCIA_ABONO_INCOMPLETO"),this.registro.modulo_resultados_ordenes=this.obtenerValorPorClave("MODULO_RESULTADOS_ORDENES"),this.registro.mostrar_codigo_qr_recibo="1"===this.obtenerValorPorClave("mostrar_codigo_qr_recibo"),this.registro.etiqueta_muestra_imprimir_historia_clinica="1"===this.obtenerValorPorClave("ETIQUETA_MUESTRA_IMPRIMIR_HISTORIA_CLINICA"),this.registro.etiqueta_muestra_imprimir_numero_orden_externa="1"===this.obtenerValorPorClave("ETIQUETA_MUESTRA_IMPRIMIR_NUMERO_ORDEN_EXTERNA"),this.registro.etiqueta_paciente_imprimir_historia_clinica="1"===this.obtenerValorPorClave("ETIQUETA_PACIENTE_IMPRIMIR_HISTORIA_CLINICA"),this.registro.etiqueta_paciente_imprimir_numero_orden_externa="1"===this.obtenerValorPorClave("ETIQUETA_PACIENTE_IMPRIMIR_NUMERO_ORDEN_EXTERNA"),this.registro.etiqueta_paciente_imprimir_medico="1"===this.obtenerValorPorClave("ETIQUETA_PACIENTE_IMPRIMIR_MEDICO"),this.registro.etiqueta_paciente_imprimir_servicio="1"===this.obtenerValorPorClave("ETIQUETA_PACIENTE_IMPRIMIR_SERVICIO"),this.registro.iess_enviar_usuario_valida="1"===this.obtenerValorPorClave("IESS_ENVIAR_USUARIO_VALIDA"),this.registro.mostrar_resumen_paciente="1"===this.obtenerValorPorClave("mostrar_resumen_paciente"),this.registro.etiqueta_muestra_imprimir_servicio="1"===this.obtenerValorPorClave("ETIQUETA_MUESTRA_IMPRIMIR_SERVICIO"),this.registro.etiqueta_muestra_imprimir_tipo_atencion="1"===this.obtenerValorPorClave("ETIQUETA_MUESTRA_IMPRIMIR_TIPO_ATENCION"),this.registro.etiqueta_muestra_imprimir_identificacion="1"===this.obtenerValorPorClave("etiqueta_muestra_imprimir_identificacion"),this.registro.id_sistema_factura=this.obtenerValorPorClave("id_sistema_factura"),this.registro.etiqueta_muestra_imprimir_icono_emergencia="1"===this.obtenerValorPorClave("etiqueta_muestra_imprimir_icono_emergencia"),this.registro.etiqueta_paciente_imprimir_microbiologia="1"===this.obtenerValorPorClave("etiqueta_paciente_imprimir_microbiologia"),this.registro.pdf_resultados_imprimir_datos_orden_encabezado="1"===this.obtenerValorPorClave("pdf_resultados_imprimir_datos_orden_encabezado"),this.registro.iess_usuario_enviar_resultados=this.obtenerValorPorClave("iess_usuario_enviar_resultados"),this.registro.iess_enviar_no_procesados="1"===this.obtenerValorPorClave("iess_enviar_no_procesados"),this.registro.etiqueta_muestra_imprimir_medico="1"===this.obtenerValorPorClave("etiqueta_muestra_imprimir_medico"),this.registro.crear_orden_muestra_pendiente="1"===this.obtenerValorPorClave("crear_orden_muestra_pendiente"),this.registro.mostrar_url_resultados_recibo="1"===this.obtenerValorPorClave("mostrar_url_resultados_recibo"),this.registro.sumilla_validacion_como_firma="1"===this.obtenerValorPorClave("sumilla_validacion_como_firma"),this.registro.padding_tipo_numeracion=this.obtenerValorPorClave("padding_tipo_numeracion"),this.registro.imprimir_id_sucursal_numero_orden_pdf_resultados="1"===this.obtenerValorPorClave("imprimir_id_sucursal_numero_orden_pdf_resultados"),this.registro.imprimir_fecha_validacion=this.obtenerValorPorClave("IMPRIMIR_FECHA_VALIDACION"),""===this.registro.membrete_id_pedidos&&(this.registro.membrete_id_pedidos="ninguno"),this.registro.margenes_sin_encabezado=JSON.parse(this.obtenerValorPorClave("MARGENES_SIN_ENCABEZADO")),this.registro.factura=JSON.parse(this.obtenerValorPorClave("COORDENADAS_FACTURA")),this.registro.factura_totales=JSON.parse(this.obtenerValorPorClave("COORDENADAS_FACTURA_TOTALES")),this.validarServidorLocal(!1)},guardar:function(){var e=this;this.$refs.cargando.alternar();var t=new FormData,a=this.registro;t.append("datos",JSON.stringify(a)),null!==this.marcaAguaPdf&&t.append("marca_agua_pdf",this.marcaAguaPdf?this.marcaAguaPdf:""),axios.post("/api/configuraciones",t).then((function(){e.mostrarExito("Configuraciones guardadas")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar",a)})).then((function(){return e.$refs.cargando.alternar()}))},obtenerValorPorClave:function(e){var t="";e=e.toUpperCase();var a=this.configuraciones.find((function(t){return t.clave===e}));return a?t=a.valor:this.mostrarErrores('Configuración "'+e+'" no existe'),t},obtenerDescripcionPorClave:function(e){var t="",a=this.configuraciones.find((function(t){return t.clave===e}));return a?t=a.descripcion:this.mostrarErrores('Configuración "'+e+'" no existe'),t},validarServidorLocal:function(e){var t=this;e&&this.$refs.cargando.alternar(),axios.get("".concat(this.url,"/api/estado")).then((function(a){e&&(t.$refs.cargando.alternar(),t.procesarExito(a)),t.estadoServidorLocal="EXITO"})).catch((function(a){t.procesarErrores("".concat(t.url,"/api/estado"),"validar servidor local",a,e)}))},apagarServidorLocal:function(){var e=this;this.$refs.cargando.alternar();var t="/api/detener";axios.get(this.url+t).then((function(t){e.$refs.cargando.alternar(),e.estadoServidorLocal="",e.procesarExito(t)})).catch((function(a){e.procesarErrores(e.url+t,"detener servidor local",a,!0)}))},procesarExito:function(e){var t=[];t.push('Conectado con <a href="'.concat(this.url,'/api/estado" target="_blank">').concat(this.url,"</a>")),t.push(e.data.mensaje),this.mostrarExito(t)},procesarErrores:function(e,t,a,r){if(this.validarEstado(a),r){var o=[];o.push('Conectado con <a href="'.concat(this.url,'/api/estado" target="_blank">').concat(this.url,"</a>")),void 0===a.response?o.push("El servidor se encuetra apagado"):o.push(a.response.data),this.$refs.cargando.alternar(),o.push("Error al "+t),this.mostrarErrores(o)}},validarEstado:function(e){void 0===e.response?this.estadoServidorLocal="":this.estadoServidorLocal="ERROR"},borrarMarcaAgua:function(){this.urlMarcaAgua="",this.marcaAguaPdf=null},marcaAguaSeleccionada:function(e){var t=this;this.urlMarcaAgua="";var a=e.target.files[0];if(a.type.includes("image/"))if("function"==typeof FileReader){this.marcaAguaPdf=a;var r=new FileReader;r.onload=function(e){t.urlMarcaAgua=e.target.result},r.readAsDataURL(a)}else alert("Lo sentimos, su navegador no soporta esta función");else alert("Por favor seleccione una imagen")},abrirmodalSistemaFacturas:function(){var e=(0,i.MD)({"id-sistema-externo":this.registro.id_sistema_factura});$("#modalSistemaFacturas").modal({backdrop:"static"},e)},sistemaExternoFacturasGuardado:function(){var e=this;axios.get("/api/sistemas-externos",{params:{tipo:"FACTURACION"}}).then((function(t){var a=t.data.data;e.sistemasExternos=a})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al cargar sistemas externos de facturación"),e.mostrarErrores(a)}))}},computed:{encendido:function(){return"EXITO"===this.estadoServidorLocal},error:function(){return"ERROR"===this.estadoServidorLocal},apagado:function(){return""===this.estadoServidorLocal},sistemasExternosFacturas:function(){return this.sistemasExternos.push({id:"",codigo:"MANUAL",nombre:"Manual"}),_.sortBy(this.sistemasExternos,["nombre"])},url:function(){return"https://"+this.registro.dominio_servidor_local+":"+this.registro.puerto_servidor_local}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Configuración del sistema\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"./configuraciones"}},[e._v("Recargar")])])])]},proxy:!0}])}),e._v(" "),e._m(0),e._v(" "),t("div",{staticClass:"tab-content"},[t("div",{staticClass:"tab-pane fade in active",attrs:{id:"ordenes"}},[t("div",{staticClass:"form-group"},[e._m(1),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tipo_numeracion,expression:"registro.tipo_numeracion"}],staticClass:"form-control input-sm",attrs:{id:"tipo_numeracion",name:"tipo_numeracion",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tipo_numeracion",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"5"}},[e._v("Secuencia: Global & Esquema: Diario YYMMDD")]),e._v(" "),t("option",{attrs:{value:"4"}},[e._v("Secuencia: Global & Esquema: Ordinal")]),e._v(" "),t("option",{attrs:{value:"6"}},[e._v("Secuencia: Sucursal & Esquema: Diario YYMMDD")]),e._v(" "),t("option",{attrs:{value:"2"}},[e._v("Secuencia: Sucursal & Esquema: Ordinal")]),e._v(" "),t("option",{attrs:{value:"1"}},[e._v("Secuencia: Global & Esquema: Diario DDMMYYYY (Obsoleto)")]),e._v(" "),t("option",{attrs:{value:"3"}},[e._v("Secuencia: Sucursal & Esquema: Diario DDMMYYYY (Obsoleto)")])])]),e._v(" "),e._m(2)]),e._v(" "),"master"===e.$usuario.nombreUsuario?t("div",{staticClass:"row"},[e._m(3)]):e._e(),e._v(" "),"master"===e.$usuario.nombreUsuario?t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-1"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.padding_tipo_numeracion,expression:"registro.padding_tipo_numeracion"}],staticClass:"form-control input-sm",attrs:{type:"number",name:"padding",min:"0",max:"5",step:"1"},domProps:{value:e.registro.padding_tipo_numeracion},on:{input:function(t){t.target.composing||e.$set(e.registro,"padding_tipo_numeracion",t.target.value)}}})])]):e._e()])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(4),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_servicio_tipo_atencion,expression:"registro.mostrar_servicio_tipo_atencion"}],attrs:{type:"checkbox",id:"mostrar_servicio_tipo_atencion"},domProps:{checked:Array.isArray(e.registro.mostrar_servicio_tipo_atencion)?e._i(e.registro.mostrar_servicio_tipo_atencion,null)>-1:e.registro.mostrar_servicio_tipo_atencion},on:{change:function(t){var a=e.registro.mostrar_servicio_tipo_atencion,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_servicio_tipo_atencion",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_servicio_tipo_atencion",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_servicio_tipo_atencion",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_servicio_tipo_atencion"}},[e._v('Mostrar columna "Servicio/Tipo\n                  atención"')]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* Aplica también para el listado de pedidos.")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.cliente_en_ordenes,expression:"registro.cliente_en_ordenes"}],attrs:{type:"checkbox",id:"cliente_en_ordenes"},domProps:{checked:Array.isArray(e.registro.cliente_en_ordenes)?e._i(e.registro.cliente_en_ordenes,null)>-1:e.registro.cliente_en_ordenes},on:{change:function(t){var a=e.registro.cliente_en_ordenes,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"cliente_en_ordenes",a.concat([null])):i>-1&&e.$set(e.registro,"cliente_en_ordenes",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"cliente_en_ordenes",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"cliente_en_ordenes"}},[e._v('Mostrar columna "Cliente/Médico"')]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* Aplica también para el listado de pedidos.")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_historia_clinica,expression:"registro.mostrar_historia_clinica"}],attrs:{type:"checkbox",id:"mostrar_historia_clinica",name:"mostrar_historia_clinica"},domProps:{checked:Array.isArray(e.registro.mostrar_historia_clinica)?e._i(e.registro.mostrar_historia_clinica,null)>-1:e.registro.mostrar_historia_clinica},on:{change:function(t){var a=e.registro.mostrar_historia_clinica,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_historia_clinica",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_historia_clinica",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_historia_clinica",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_historia_clinica"}},[e._v('Mostrar "Número de\n                  historia clínica"')])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_orden_externa,expression:"registro.mostrar_orden_externa"}],attrs:{type:"checkbox",id:"mostrar_orden_externa",name:"mostrar_orden_externa"},domProps:{checked:Array.isArray(e.registro.mostrar_orden_externa)?e._i(e.registro.mostrar_orden_externa,null)>-1:e.registro.mostrar_orden_externa},on:{change:function(t){var a=e.registro.mostrar_orden_externa,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_orden_externa",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_orden_externa",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_orden_externa",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_orden_externa"}},[e._v('Mostrar "Referencia"')])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Módulo de Resultados")]),e._v(" "),t("div",{staticClass:"col-md-3"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.modulo_resultados_ordenes,expression:"registro.modulo_resultados_ordenes"}],staticClass:"form-control input-sm",attrs:{id:"modulo_resultados_ordenes",name:"modulo_resultados_ordenes",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"modulo_resultados_ordenes",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"2"}},[e._v("Resultados Nuevo")]),e._v(" "),t("option",{attrs:{value:"1"}},[e._v("Resultados")])])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(5),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.medico_obligatorio,expression:"registro.medico_obligatorio"}],attrs:{type:"checkbox",id:"medico_obligatorio",name:"medico_obligatorio"},domProps:{checked:Array.isArray(e.registro.medico_obligatorio)?e._i(e.registro.medico_obligatorio,null)>-1:e.registro.medico_obligatorio},on:{change:function(t){var a=e.registro.medico_obligatorio,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"medico_obligatorio",a.concat([null])):i>-1&&e.$set(e.registro,"medico_obligatorio",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"medico_obligatorio",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"medico_obligatorio"}},[e._v("Médico obligatorio")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_advertencia_abono_incompleto,expression:"registro.mostrar_advertencia_abono_incompleto"}],attrs:{type:"checkbox",id:"mostrar_advertencia_abono_incompleto",name:"mostrar_advertencia_abono_incompleto"},domProps:{checked:Array.isArray(e.registro.mostrar_advertencia_abono_incompleto)?e._i(e.registro.mostrar_advertencia_abono_incompleto,null)>-1:e.registro.mostrar_advertencia_abono_incompleto},on:{change:function(t){var a=e.registro.mostrar_advertencia_abono_incompleto,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_advertencia_abono_incompleto",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_advertencia_abono_incompleto",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_advertencia_abono_incompleto",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_advertencia_abono_incompleto"}},[e._v("Mostrar advertencia de\n                  abono incompleto")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_pdf_recibo,expression:"registro.mostrar_pdf_recibo"}],attrs:{type:"checkbox",id:"mostrar_pdf_recibo",name:"mostrar_pdf_recibo"},domProps:{checked:Array.isArray(e.registro.mostrar_pdf_recibo)?e._i(e.registro.mostrar_pdf_recibo,null)>-1:e.registro.mostrar_pdf_recibo},on:{change:function(t){var a=e.registro.mostrar_pdf_recibo,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_pdf_recibo",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_pdf_recibo",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_pdf_recibo",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_pdf_recibo"}},[e._v("Abrir el PDF de recibo")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_pdf_etiquetas,expression:"registro.mostrar_pdf_etiquetas"}],attrs:{type:"checkbox",id:"mostrar_pdf_etiquetas",name:"mostrar_pdf_etiquetas"},domProps:{checked:Array.isArray(e.registro.mostrar_pdf_etiquetas)?e._i(e.registro.mostrar_pdf_etiquetas,null)>-1:e.registro.mostrar_pdf_etiquetas},on:{change:function(t){var a=e.registro.mostrar_pdf_etiquetas,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_pdf_etiquetas",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_pdf_etiquetas",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_pdf_etiquetas",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_pdf_etiquetas"}},[e._v("Abrir el PDF de etiquetas")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_resumen_paciente,expression:"registro.mostrar_resumen_paciente"}],attrs:{id:"mostrar_resumen_paciente",name:"mostrar_resumen_paciente",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.mostrar_resumen_paciente)?e._i(e.registro.mostrar_resumen_paciente,null)>-1:e.registro.mostrar_resumen_paciente},on:{change:function(t){var a=e.registro.mostrar_resumen_paciente,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_resumen_paciente",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_resumen_paciente",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_resumen_paciente",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_resumen_paciente"}},[e._v("\n                  Mostrar saldo y cantidad de órdenes del paciente\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.crear_orden_muestra_pendiente,expression:"registro.crear_orden_muestra_pendiente"}],attrs:{id:"crear_orden_muestra_pendiente",name:"crear_orden_muestra_pendiente",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.crear_orden_muestra_pendiente)?e._i(e.registro.crear_orden_muestra_pendiente,null)>-1:e.registro.crear_orden_muestra_pendiente},on:{change:function(t){var a=e.registro.crear_orden_muestra_pendiente,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"crear_orden_muestra_pendiente",a.concat([null])):i>-1&&e.$set(e.registro,"crear_orden_muestra_pendiente",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"crear_orden_muestra_pendiente",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"crear_orden_muestra_pendiente"}},[e._v("\n                  Dejar la muestra pendiente\n                ")])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(6),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.token_correo_recepcion,expression:"registro.token_correo_recepcion"}],attrs:{type:"checkbox",id:"token_correo_recepcion",name:"mostrar_pdf_etiquetas"},domProps:{checked:Array.isArray(e.registro.token_correo_recepcion)?e._i(e.registro.token_correo_recepcion,null)>-1:e.registro.token_correo_recepcion},on:{change:function(t){var a=e.registro.token_correo_recepcion,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"token_correo_recepcion",a.concat([null])):i>-1&&e.$set(e.registro,"token_correo_recepcion",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"token_correo_recepcion",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"token_correo_recepcion"}},[e._v("\n                  Enviar token al correo registrado del paciente\n                ")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* El envío necesita que haya un correo registrado")])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(7),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.recibo_papel_termico,expression:"registro.recibo_papel_termico"}],attrs:{type:"checkbox",id:"recibo_papel_termico",name:"recibo_papel_termico"},domProps:{checked:Array.isArray(e.registro.recibo_papel_termico)?e._i(e.registro.recibo_papel_termico,null)>-1:e.registro.recibo_papel_termico},on:{change:function(t){var a=e.registro.recibo_papel_termico,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"recibo_papel_termico",a.concat([null])):i>-1&&e.$set(e.registro,"recibo_papel_termico",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"recibo_papel_termico",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"recibo_papel_termico"}},[e._v("Recibo en papel térmico")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_encabezado_recibo,expression:"registro.mostrar_encabezado_recibo"}],attrs:{type:"checkbox",id:"mostrar_encabezado_recibo",name:"mostrar_encabezado_recibo"},domProps:{checked:Array.isArray(e.registro.mostrar_encabezado_recibo)?e._i(e.registro.mostrar_encabezado_recibo,null)>-1:e.registro.mostrar_encabezado_recibo},on:{change:function(t){var a=e.registro.mostrar_encabezado_recibo,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_encabezado_recibo",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_encabezado_recibo",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_encabezado_recibo",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_encabezado_recibo"}},[e._v("Mostrar encabezado")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_firma_autorizacion_recibo,expression:"registro.mostrar_firma_autorizacion_recibo"}],attrs:{type:"checkbox",id:"mostrar_firma_autorizacion_recibo",name:"mostrar_firma_autorizacion_recibo"},domProps:{checked:Array.isArray(e.registro.mostrar_firma_autorizacion_recibo)?e._i(e.registro.mostrar_firma_autorizacion_recibo,null)>-1:e.registro.mostrar_firma_autorizacion_recibo},on:{change:function(t){var a=e.registro.mostrar_firma_autorizacion_recibo,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_firma_autorizacion_recibo",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_firma_autorizacion_recibo",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_firma_autorizacion_recibo",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_firma_autorizacion_recibo"}},[e._v("\n                  Mostrar firma autorización\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_codigo_qr_recibo,expression:"registro.mostrar_codigo_qr_recibo"}],attrs:{type:"checkbox",id:"mostrar_codigo_qr_recibo",name:"mostrar_codigo_qr_recibo"},domProps:{checked:Array.isArray(e.registro.mostrar_codigo_qr_recibo)?e._i(e.registro.mostrar_codigo_qr_recibo,null)>-1:e.registro.mostrar_codigo_qr_recibo},on:{change:function(t){var a=e.registro.mostrar_codigo_qr_recibo,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_codigo_qr_recibo",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_codigo_qr_recibo",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_codigo_qr_recibo",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_codigo_qr_recibo"}},[e._v("Mostrar código QR")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_url_resultados_recibo,expression:"registro.mostrar_url_resultados_recibo"}],attrs:{type:"checkbox",id:"mostrar_url_resultados_recibo",name:"mostrar_url_resultados_recibo"},domProps:{checked:Array.isArray(e.registro.mostrar_url_resultados_recibo)?e._i(e.registro.mostrar_url_resultados_recibo,null)>-1:e.registro.mostrar_url_resultados_recibo},on:{change:function(t){var a=e.registro.mostrar_url_resultados_recibo,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_url_resultados_recibo",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_url_resultados_recibo",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_url_resultados_recibo",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_url_resultados_recibo"}},[e._v("Mostrar URL resultados")])])])])])]),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"etiquetas"}},[t("div",{staticClass:"form-group"},[e._m(8),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_sucursal,expression:"registro.imprimir_sucursal"}],attrs:{type:"checkbox",id:"imprimir_sucursal",name:"imprimir_sucursal"},domProps:{checked:Array.isArray(e.registro.imprimir_sucursal)?e._i(e.registro.imprimir_sucursal,null)>-1:e.registro.imprimir_sucursal},on:{change:function(t){var a=e.registro.imprimir_sucursal,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_sucursal",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_sucursal",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_sucursal",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_sucursal"}},[e._v("Imprimir sucursal")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_categoria,expression:"registro.imprimir_categoria"}],attrs:{type:"checkbox",id:"imprimir_categoria",name:"imprimir_categoria"},domProps:{checked:Array.isArray(e.registro.imprimir_categoria)?e._i(e.registro.imprimir_categoria,null)>-1:e.registro.imprimir_categoria},on:{change:function(t){var a=e.registro.imprimir_categoria,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_categoria",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_categoria",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_categoria",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_categoria"}},[e._v("Imprimir categoría")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_muestra_imprimir_historia_clinica,expression:"registro.etiqueta_muestra_imprimir_historia_clinica"}],attrs:{id:"etiqueta_muestra_imprimir_historia_clinica",name:"etiqueta_muestra_imprimir_historia_clinica",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_muestra_imprimir_historia_clinica)?e._i(e.registro.etiqueta_muestra_imprimir_historia_clinica,null)>-1:e.registro.etiqueta_muestra_imprimir_historia_clinica},on:{change:function(t){var a=e.registro.etiqueta_muestra_imprimir_historia_clinica,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_muestra_imprimir_historia_clinica",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_muestra_imprimir_historia_clinica",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_muestra_imprimir_historia_clinica",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_muestra_imprimir_historia_clinica"}},[e._v("Imprimir número\n                  historia clínica de paciente")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_muestra_imprimir_numero_orden_externa,expression:"registro.etiqueta_muestra_imprimir_numero_orden_externa"}],attrs:{id:"etiqueta_muestra_imprimir_numero_orden_externa",name:"etiqueta_muestra_imprimir_numero_orden_externa",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_muestra_imprimir_numero_orden_externa)?e._i(e.registro.etiqueta_muestra_imprimir_numero_orden_externa,null)>-1:e.registro.etiqueta_muestra_imprimir_numero_orden_externa},on:{change:function(t){var a=e.registro.etiqueta_muestra_imprimir_numero_orden_externa,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_muestra_imprimir_numero_orden_externa",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_muestra_imprimir_numero_orden_externa",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_muestra_imprimir_numero_orden_externa",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_muestra_imprimir_numero_orden_externa"}},[e._v("\n                  Imprimir número orden externa\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_muestra_imprimir_tipo_atencion,expression:"registro.etiqueta_muestra_imprimir_tipo_atencion"}],attrs:{id:"etiqueta_muestra_imprimir_tipo_atencion",name:"etiqueta_muestra_imprimir_tipo_atencion",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_muestra_imprimir_tipo_atencion)?e._i(e.registro.etiqueta_muestra_imprimir_tipo_atencion,null)>-1:e.registro.etiqueta_muestra_imprimir_tipo_atencion},on:{change:function(t){var a=e.registro.etiqueta_muestra_imprimir_tipo_atencion,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_muestra_imprimir_tipo_atencion",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_muestra_imprimir_tipo_atencion",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_muestra_imprimir_tipo_atencion",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_muestra_imprimir_tipo_atencion"}},[e._v("Imprimir tipo\n                  atención")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_muestra_imprimir_medico,expression:"registro.etiqueta_muestra_imprimir_medico"}],attrs:{id:"etiqueta_muestra_imprimir_medico",name:"etiqueta_muestra_imprimir_medico",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_muestra_imprimir_medico)?e._i(e.registro.etiqueta_muestra_imprimir_medico,null)>-1:e.registro.etiqueta_muestra_imprimir_medico},on:{change:function(t){var a=e.registro.etiqueta_muestra_imprimir_medico,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_muestra_imprimir_medico",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_muestra_imprimir_medico",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_muestra_imprimir_medico",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_muestra_imprimir_medico"}},[e._v("Imprimir médico")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_muestra_imprimir_servicio,expression:"registro.etiqueta_muestra_imprimir_servicio"}],attrs:{id:"etiqueta_muestra_imprimir_servicio",name:"etiqueta_muestra_imprimir_servicio",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_muestra_imprimir_servicio)?e._i(e.registro.etiqueta_muestra_imprimir_servicio,null)>-1:e.registro.etiqueta_muestra_imprimir_servicio},on:{change:function(t){var a=e.registro.etiqueta_muestra_imprimir_servicio,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_muestra_imprimir_servicio",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_muestra_imprimir_servicio",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_muestra_imprimir_servicio",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_muestra_imprimir_servicio"}},[e._v("Imprimir servicio")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_muestra_imprimir_identificacion,expression:"registro.etiqueta_muestra_imprimir_identificacion"}],attrs:{id:"etiqueta_muestra_imprimir_identificacion",name:"etiqueta_muestra_imprimir_identificacion",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_muestra_imprimir_identificacion)?e._i(e.registro.etiqueta_muestra_imprimir_identificacion,null)>-1:e.registro.etiqueta_muestra_imprimir_identificacion},on:{change:function(t){var a=e.registro.etiqueta_muestra_imprimir_identificacion,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_muestra_imprimir_identificacion",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_muestra_imprimir_identificacion",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_muestra_imprimir_identificacion",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_muestra_imprimir_identificacion"}},[e._v("Imprimir\n                  identificación de paciente")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_muestra_imprimir_icono_emergencia,expression:"registro.etiqueta_muestra_imprimir_icono_emergencia"}],attrs:{id:"etiqueta_muestra_imprimir_icono_emergencia",name:"etiqueta_muestra_imprimir_icono_emergencia",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_muestra_imprimir_icono_emergencia)?e._i(e.registro.etiqueta_muestra_imprimir_icono_emergencia,null)>-1:e.registro.etiqueta_muestra_imprimir_icono_emergencia},on:{change:function(t){var a=e.registro.etiqueta_muestra_imprimir_icono_emergencia,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_muestra_imprimir_icono_emergencia",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_muestra_imprimir_icono_emergencia",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_muestra_imprimir_icono_emergencia",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_muestra_imprimir_icono_emergencia"}},[e._v("Imprimir\n                  ícono emergencia")])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(9),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiquetas_datos_paciente,expression:"registro.etiquetas_datos_paciente"}],staticClass:"form-control input-sm",attrs:{name:"etiquetas_datos_paciente"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"etiquetas_datos_paciente",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"0"}},[e._v("No imprimir etiqueta")]),e._v(" "),t("option",{attrs:{value:"1"}},[e._v("Imprimir 1 etiqueta")]),e._v(" "),t("option",{attrs:{value:"2"}},[e._v("Imprimir 2 etiquetas")]),e._v(" "),t("option",{attrs:{value:"3"}},[e._v("Imprimir 3 etiquetas")]),e._v(" "),t("option",{attrs:{value:"4"}},[e._v("Imprimir 4 etiquetas")]),e._v(" "),t("option",{attrs:{value:"5"}},[e._v("Imprimir 5 etiquetas")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_etiqueta_datos_paciente_principio,expression:"registro.imprimir_etiqueta_datos_paciente_principio"}],attrs:{id:"imprimir_etiqueta_datos_paciente_principio",name:"imprimir_etiqueta_datos_paciente_principio",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.imprimir_etiqueta_datos_paciente_principio)?e._i(e.registro.imprimir_etiqueta_datos_paciente_principio,null)>-1:e.registro.imprimir_etiqueta_datos_paciente_principio},on:{change:function(t){var a=e.registro.imprimir_etiqueta_datos_paciente_principio,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_etiqueta_datos_paciente_principio",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_etiqueta_datos_paciente_principio",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_etiqueta_datos_paciente_principio",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_etiqueta_datos_paciente_principio"}},[e._v("Imprimir al\n                  principio")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_url_resultados,expression:"registro.imprimir_url_resultados"}],attrs:{type:"checkbox",id:"imprimir_url_resultados",name:"imprimir_url_resultados"},domProps:{checked:Array.isArray(e.registro.imprimir_url_resultados)?e._i(e.registro.imprimir_url_resultados,null)>-1:e.registro.imprimir_url_resultados},on:{change:function(t){var a=e.registro.imprimir_url_resultados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_url_resultados",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_url_resultados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_url_resultados",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_url_resultados"}},[e._v("Imprimir URL de resultados\n                  de paciente")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* URL es la dirección del portal de consulta de resultados")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_examenes,expression:"registro.imprimir_examenes"}],attrs:{type:"checkbox",id:"imprimir_examenes",name:"imprimir_examenes"},domProps:{checked:Array.isArray(e.registro.imprimir_examenes)?e._i(e.registro.imprimir_examenes,null)>-1:e.registro.imprimir_examenes},on:{change:function(t){var a=e.registro.imprimir_examenes,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_examenes",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_examenes",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_examenes",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_examenes"}},[e._v("\n                  Imprimir códigos de exámenes\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_categoria_etiqueta_paciente,expression:"registro.imprimir_categoria_etiqueta_paciente"}],attrs:{type:"checkbox",id:"imprimir_categoria_etiqueta_paciente",name:"imprimir_categoria_etiqueta_paciente"},domProps:{checked:Array.isArray(e.registro.imprimir_categoria_etiqueta_paciente)?e._i(e.registro.imprimir_categoria_etiqueta_paciente,null)>-1:e.registro.imprimir_categoria_etiqueta_paciente},on:{change:function(t){var a=e.registro.imprimir_categoria_etiqueta_paciente,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_categoria_etiqueta_paciente",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_categoria_etiqueta_paciente",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_categoria_etiqueta_paciente",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_categoria_etiqueta_paciente"}},[e._v("Imprimir\n                  categoría")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_paciente_imprimir_historia_clinica,expression:"registro.etiqueta_paciente_imprimir_historia_clinica"}],attrs:{id:"etiqueta_paciente_imprimir_historia_clinica",name:"etiqueta_paciente_imprimir_historia_clinica",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_paciente_imprimir_historia_clinica)?e._i(e.registro.etiqueta_paciente_imprimir_historia_clinica,null)>-1:e.registro.etiqueta_paciente_imprimir_historia_clinica},on:{change:function(t){var a=e.registro.etiqueta_paciente_imprimir_historia_clinica,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_paciente_imprimir_historia_clinica",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_paciente_imprimir_historia_clinica",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_paciente_imprimir_historia_clinica",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_paciente_imprimir_historia_clinica"}},[e._v("Imprimir número\n                  historia clínica de paciente")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_paciente_imprimir_numero_orden_externa,expression:"registro.etiqueta_paciente_imprimir_numero_orden_externa"}],attrs:{id:"etiqueta_paciente_imprimir_numero_orden_externa",name:"etiqueta_paciente_imprimir_numero_orden_externa",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_paciente_imprimir_numero_orden_externa)?e._i(e.registro.etiqueta_paciente_imprimir_numero_orden_externa,null)>-1:e.registro.etiqueta_paciente_imprimir_numero_orden_externa},on:{change:function(t){var a=e.registro.etiqueta_paciente_imprimir_numero_orden_externa,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_paciente_imprimir_numero_orden_externa",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_paciente_imprimir_numero_orden_externa",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_paciente_imprimir_numero_orden_externa",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_paciente_imprimir_numero_orden_externa"}},[e._v("Imprimir\n                  número de orden externa")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_paciente_imprimir_medico,expression:"registro.etiqueta_paciente_imprimir_medico"}],attrs:{id:"etiqueta_paciente_imprimir_medico",name:"etiqueta_paciente_imprimir_medico",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_paciente_imprimir_medico)?e._i(e.registro.etiqueta_paciente_imprimir_medico,null)>-1:e.registro.etiqueta_paciente_imprimir_medico},on:{change:function(t){var a=e.registro.etiqueta_paciente_imprimir_medico,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_paciente_imprimir_medico",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_paciente_imprimir_medico",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_paciente_imprimir_medico",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_paciente_imprimir_medico"}},[e._v("Imprimir médico")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_paciente_imprimir_servicio,expression:"registro.etiqueta_paciente_imprimir_servicio"}],attrs:{id:"etiqueta_paciente_imprimir_servicio",name:"etiqueta_paciente_imprimir_servicio",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_paciente_imprimir_servicio)?e._i(e.registro.etiqueta_paciente_imprimir_servicio,null)>-1:e.registro.etiqueta_paciente_imprimir_servicio},on:{change:function(t){var a=e.registro.etiqueta_paciente_imprimir_servicio,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_paciente_imprimir_servicio",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_paciente_imprimir_servicio",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_paciente_imprimir_servicio",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_paciente_imprimir_servicio"}},[e._v("Imprimir servicio")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiqueta_paciente_imprimir_microbiologia,expression:"registro.etiqueta_paciente_imprimir_microbiologia"}],attrs:{id:"etiqueta_paciente_imprimir_microbiologia",name:"etiqueta_paciente_imprimir_microbiologia",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.etiqueta_paciente_imprimir_microbiologia)?e._i(e.registro.etiqueta_paciente_imprimir_microbiologia,null)>-1:e.registro.etiqueta_paciente_imprimir_microbiologia},on:{change:function(t){var a=e.registro.etiqueta_paciente_imprimir_microbiologia,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"etiqueta_paciente_imprimir_microbiologia",a.concat([null])):i>-1&&e.$set(e.registro,"etiqueta_paciente_imprimir_microbiologia",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"etiqueta_paciente_imprimir_microbiologia",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"etiqueta_paciente_imprimir_microbiologia"}},[e._v("Imprimir etiqueta\n                  adicional si existen exámenes de microbiología")])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(10),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.etiquetas_qr,expression:"registro.etiquetas_qr"}],staticClass:"form-control input-sm",attrs:{name:"etiquetas_qr"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"etiquetas_qr",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"0"}},[e._v("No imprimir etiqueta")]),e._v(" "),t("option",{attrs:{value:"1"}},[e._v("Imprimir 1 etiqueta")]),e._v(" "),t("option",{attrs:{value:"2"}},[e._v("Imprimir 2 etiquetas")]),e._v(" "),t("option",{attrs:{value:"3"}},[e._v("Imprimir 3 etiquetas")]),e._v(" "),t("option",{attrs:{value:"4"}},[e._v("Imprimir 4 etiquetas")]),e._v(" "),t("option",{attrs:{value:"5"}},[e._v("Imprimir 5 etiquetas")])])])])])])]),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"reportes"}},[t("div",{staticClass:"form-group"},[e._m(11),e._v(" "),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_validado_por,expression:"registro.mostrar_validado_por"}],attrs:{type:"checkbox",id:"mostrar_validado_por",name:"mostrar_validado_por"},domProps:{checked:Array.isArray(e.registro.mostrar_validado_por)?e._i(e.registro.mostrar_validado_por,null)>-1:e.registro.mostrar_validado_por},on:{change:function(t){var a=e.registro.mostrar_validado_por,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_validado_por",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_validado_por",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_validado_por",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_validado_por"}},[e._v('\n                  Imprimir "Validado por" y sumilla de por sección')])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.sumilla_validacion_como_firma,expression:"registro.sumilla_validacion_como_firma"}],attrs:{type:"checkbox",id:"sumilla_validacion_como_firma",name:"sumilla_validacion_como_firma"},domProps:{checked:Array.isArray(e.registro.sumilla_validacion_como_firma)?e._i(e.registro.sumilla_validacion_como_firma,null)>-1:e.registro.sumilla_validacion_como_firma},on:{change:function(t){var a=e.registro.sumilla_validacion_como_firma,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"sumilla_validacion_como_firma",a.concat([null])):i>-1&&e.$set(e.registro,"sumilla_validacion_como_firma",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"sumilla_validacion_como_firma",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"sumilla_validacion_como_firma"}},[e._v("\n                  Imprimir sumilla como firma\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.interpretacion_valor_referencia,expression:"registro.interpretacion_valor_referencia"}],attrs:{type:"checkbox",id:"interpretacion_valor_referencia",name:"interpretacion_valor_referencia"},domProps:{checked:Array.isArray(e.registro.interpretacion_valor_referencia)?e._i(e.registro.interpretacion_valor_referencia,null)>-1:e.registro.interpretacion_valor_referencia},on:{change:function(t){var a=e.registro.interpretacion_valor_referencia,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"interpretacion_valor_referencia",a.concat([null])):i>-1&&e.$set(e.registro,"interpretacion_valor_referencia",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"interpretacion_valor_referencia",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"interpretacion_valor_referencia"}},[e._v('\n                  Interpretación en columna "Valores de Referencia"\n                ')])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_indicadores,expression:"registro.imprimir_indicadores"}],attrs:{type:"checkbox",id:"imprimir_indicadores",name:"imprimir_indicadores"},domProps:{checked:Array.isArray(e.registro.imprimir_indicadores)?e._i(e.registro.imprimir_indicadores,null)>-1:e.registro.imprimir_indicadores},on:{change:function(t){var a=e.registro.imprimir_indicadores,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_indicadores",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_indicadores",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_indicadores",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_indicadores"}},[e._v("Indicadores de fuera de rango")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.negrilla_resultado_fuera_rango,expression:"registro.negrilla_resultado_fuera_rango"}],attrs:{type:"checkbox",id:"negrilla_resultado_fuera_rango",name:"negrilla_resultado_fuera_rango"},domProps:{checked:Array.isArray(e.registro.negrilla_resultado_fuera_rango)?e._i(e.registro.negrilla_resultado_fuera_rango,null)>-1:e.registro.negrilla_resultado_fuera_rango},on:{change:function(t){var a=e.registro.negrilla_resultado_fuera_rango,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"negrilla_resultado_fuera_rango",a.concat([null])):i>-1&&e.$set(e.registro,"negrilla_resultado_fuera_rango",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"negrilla_resultado_fuera_rango",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"negrilla_resultado_fuera_rango"}},[e._v("Negrilla en resultado fuera\n                  rango")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("\n                Imprimir fecha de validación\n              ")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_fecha_validacion,expression:"registro.imprimir_fecha_validacion"}],attrs:{id:"imprimir_fecha_validacion",name:"imprimir_fecha_validacion",type:"radio",value:"fecha"},domProps:{checked:e._q(e.registro.imprimir_fecha_validacion,"fecha")},on:{change:function(t){return e.$set(e.registro,"imprimir_fecha_validacion","fecha")}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_fecha_validacion"}},[e._v("\n                  Fecha\n                ")])]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_fecha_validacion,expression:"registro.imprimir_fecha_validacion"}],attrs:{id:"imprimir_fecha_hora_validacion",name:"imprimir_fecha_validacion",type:"radio",value:"fechaHora"},domProps:{checked:e._q(e.registro.imprimir_fecha_validacion,"fechaHora")},on:{change:function(t){return e.$set(e.registro,"imprimir_fecha_validacion","fechaHora")}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_fecha_hora_validacion"}},[e._v("\n                  Fecha y hora")])]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_fecha_validacion,expression:"registro.imprimir_fecha_validacion"}],attrs:{id:"imprimir_ninguno_validacion",name:"imprimir_fecha_validacion",type:"radio",value:""},domProps:{checked:e._q(e.registro.imprimir_fecha_validacion,"")},on:{change:function(t){return e.$set(e.registro,"imprimir_fecha_validacion","")}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_ninguno_validacion"}},[e._v("\n                  No imprimir\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_firma_resultados,expression:"registro.imprimir_firma_resultados"}],attrs:{type:"checkbox",id:"imprimir_firma_resultados",name:"imprimir_firma_resultados"},domProps:{checked:Array.isArray(e.registro.imprimir_firma_resultados)?e._i(e.registro.imprimir_firma_resultados,null)>-1:e.registro.imprimir_firma_resultados},on:{change:function(t){var a=e.registro.imprimir_firma_resultados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_firma_resultados",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_firma_resultados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_firma_resultados",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_firma_resultados"}},[e._v("Firma digital de\n                  responsable")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* Si se desactiva solo se imprime la firma solo en reportes de resultados en\n                  línea.\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_muestra_adecuada,expression:"registro.imprimir_muestra_adecuada"}],attrs:{type:"checkbox",id:"imprimir_muestra_adecuada",name:"imprimir_muestra_adecuada"},domProps:{checked:Array.isArray(e.registro.imprimir_muestra_adecuada)?e._i(e.registro.imprimir_muestra_adecuada,null)>-1:e.registro.imprimir_muestra_adecuada},on:{change:function(t){var a=e.registro.imprimir_muestra_adecuada,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_muestra_adecuada",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_muestra_adecuada",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_muestra_adecuada",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_muestra_adecuada"}},[e._v("Imprimir muestra adecuada")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_muestra_recibida,expression:"registro.imprimir_muestra_recibida"}],attrs:{type:"checkbox",id:"imprimir_muestra_recibida",name:"imprimir_muestra_recibida"},domProps:{checked:Array.isArray(e.registro.imprimir_muestra_recibida)?e._i(e.registro.imprimir_muestra_recibida,null)>-1:e.registro.imprimir_muestra_recibida},on:{change:function(t){var a=e.registro.imprimir_muestra_recibida,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_muestra_recibida",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_muestra_recibida",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_muestra_recibida",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_muestra_recibida"}},[e._v("Imprimir muestra recibida")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_fecha_nacimiento,expression:"registro.mostrar_fecha_nacimiento"}],attrs:{type:"checkbox",id:"mostrar_fecha_nacimiento",name:"mostrar_fecha_nacimiento"},domProps:{checked:Array.isArray(e.registro.mostrar_fecha_nacimiento)?e._i(e.registro.mostrar_fecha_nacimiento,null)>-1:e.registro.mostrar_fecha_nacimiento},on:{change:function(t){var a=e.registro.mostrar_fecha_nacimiento,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_fecha_nacimiento",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_fecha_nacimiento",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_fecha_nacimiento",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_fecha_nacimiento"}},[e._v("Imprimir fecha de nacimiento")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_procesador_por,expression:"registro.mostrar_procesador_por"}],attrs:{type:"checkbox",id:"mostrar_procesador_por",name:"mostrar_procesador_por"},domProps:{checked:Array.isArray(e.registro.mostrar_procesador_por)?e._i(e.registro.mostrar_procesador_por,null)>-1:e.registro.mostrar_procesador_por},on:{change:function(t){var a=e.registro.mostrar_procesador_por,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_procesador_por",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_procesador_por",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_procesador_por",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_procesador_por"}},[e._v("Imprimir procesador por")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_titulo_pdf_resultados,expression:"registro.mostrar_titulo_pdf_resultados"}],attrs:{type:"checkbox",id:"mostrar_titulo_pdf_resultados",name:"mostrar_titulo_pdf_resultados"},domProps:{checked:Array.isArray(e.registro.mostrar_titulo_pdf_resultados)?e._i(e.registro.mostrar_titulo_pdf_resultados,null)>-1:e.registro.mostrar_titulo_pdf_resultados},on:{change:function(t){var a=e.registro.mostrar_titulo_pdf_resultados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_titulo_pdf_resultados",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_titulo_pdf_resultados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_titulo_pdf_resultados",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_titulo_pdf_resultados"}},[e._v("Imprimir título informe")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.pdf_resultados_imprimir_datos_orden_encabezado,expression:"registro.pdf_resultados_imprimir_datos_orden_encabezado"}],attrs:{type:"checkbox",id:"pdf_resultados_imprimir_datos_orden_encabezado",name:"mostrar_titulo_pdf_resultados"},domProps:{checked:Array.isArray(e.registro.pdf_resultados_imprimir_datos_orden_encabezado)?e._i(e.registro.pdf_resultados_imprimir_datos_orden_encabezado,null)>-1:e.registro.pdf_resultados_imprimir_datos_orden_encabezado},on:{change:function(t){var a=e.registro.pdf_resultados_imprimir_datos_orden_encabezado,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"pdf_resultados_imprimir_datos_orden_encabezado",a.concat([null])):i>-1&&e.$set(e.registro,"pdf_resultados_imprimir_datos_orden_encabezado",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"pdf_resultados_imprimir_datos_orden_encabezado",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"pdf_resultados_imprimir_datos_orden_encabezado"}},[e._v("\n                  Imprimir datos de orden en todas las páginas\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_id_sucursal_numero_orden_pdf_resultados,expression:"registro.imprimir_id_sucursal_numero_orden_pdf_resultados"}],attrs:{type:"checkbox",id:"imprimir_id_sucursal_numero_orden_pdf_resultados",name:"imprimir_id_sucursal_numero_orden_pdf_resultados"},domProps:{checked:Array.isArray(e.registro.imprimir_id_sucursal_numero_orden_pdf_resultados)?e._i(e.registro.imprimir_id_sucursal_numero_orden_pdf_resultados,null)>-1:e.registro.imprimir_id_sucursal_numero_orden_pdf_resultados},on:{change:function(t){var a=e.registro.imprimir_id_sucursal_numero_orden_pdf_resultados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_id_sucursal_numero_orden_pdf_resultados",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_id_sucursal_numero_orden_pdf_resultados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_id_sucursal_numero_orden_pdf_resultados",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_id_sucursal_numero_orden_pdf_resultados"}},[e._v("\n                  Imprimir id sucursal en número de orden\n                ")])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(12),e._v(" "),t("div",{staticClass:"col-md-7"},["master"===e.$usuario.nombreUsuario?t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.seguridad_pdf,expression:"registro.seguridad_pdf"}],attrs:{type:"checkbox",id:"seguridad_pdf",name:"seguridad_pdf"},domProps:{checked:Array.isArray(e.registro.seguridad_pdf)?e._i(e.registro.seguridad_pdf,null)>-1:e.registro.seguridad_pdf},on:{change:function(t){var a=e.registro.seguridad_pdf,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"seguridad_pdf",a.concat([null])):i>-1&&e.$set(e.registro,"seguridad_pdf",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"seguridad_pdf",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"seguridad_pdf"}},[e._v("PDF protegido con contraseña")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n                  * Esto afecta a los PDF's de: reportes de resultados, recibos de orden, pedidos, cotizaciones y\n                  remisiones.\n                ")])])]):e._e(),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_codigo_qr,expression:"registro.mostrar_codigo_qr"}],attrs:{type:"checkbox",id:"mostrar_codigo_qr",name:"mostrar_codigo_qr"},domProps:{checked:Array.isArray(e.registro.mostrar_codigo_qr)?e._i(e.registro.mostrar_codigo_qr,null)>-1:e.registro.mostrar_codigo_qr},on:{change:function(t){var a=e.registro.mostrar_codigo_qr,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_codigo_qr",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_codigo_qr",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_codigo_qr",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"mostrar_codigo_qr"}},[e._v("Mostrar código QR")])])])])])]),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"pedidos"}},[t("div",{staticClass:"form-group"},[e._m(13),e._v(" "),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.membrete_id_pedidos,expression:"registro.membrete_id_pedidos"}],staticClass:"form-control input-sm",attrs:{name:"membrete_id_pedidos"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"membrete_id_pedidos",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"ninguno"}},[e._v("Ninguno")]),e._v(" "),e._l(e.datos.membretes,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                    "+e._s(a.nombre)+"\n                  ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-md-8"},[t("p",{staticClass:"help-block"},[e._v("\n                  * "+e._s(this.obtenerDescripcionPorClave("MEMBRETE_ID_PEDIDOS"))+" "),t("br"),e._v("\n                  * Los membretes se crean en la opción Gestión de Catálogos\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.cliente_categoria_requerido_pedidos,expression:"registro.cliente_categoria_requerido_pedidos"}],attrs:{type:"checkbox",id:"cliente_categoria_requerido_pedidos",name:"cliente_categoria_requerido_pedidos"},domProps:{checked:Array.isArray(e.registro.cliente_categoria_requerido_pedidos)?e._i(e.registro.cliente_categoria_requerido_pedidos,null)>-1:e.registro.cliente_categoria_requerido_pedidos},on:{change:function(t){var a=e.registro.cliente_categoria_requerido_pedidos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"cliente_categoria_requerido_pedidos",a.concat([null])):i>-1&&e.$set(e.registro,"cliente_categoria_requerido_pedidos",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"cliente_categoria_requerido_pedidos",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"cliente_categoria_requerido_pedidos"}},[e._v("Cliente/Categoría\n                  requerido")])])])])])]),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"diseno"}},[t("div",{staticClass:"form-group"},[e._m(14),e._v(" "),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_encabezado,expression:"registro.imprimir_encabezado"}],attrs:{type:"checkbox",id:"imprimir_encabezado",name:"imprimir_encabezado"},domProps:{checked:Array.isArray(e.registro.imprimir_encabezado)?e._i(e.registro.imprimir_encabezado,null)>-1:e.registro.imprimir_encabezado},on:{change:function(t){var a=e.registro.imprimir_encabezado,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_encabezado",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_encabezado",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_encabezado",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_encabezado"}},[e._v("Mostrar encabezado")]),e._v(" "),e._m(15)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_pie_pagina,expression:"registro.imprimir_pie_pagina"}],attrs:{type:"checkbox",id:"imprimir_pie_pagina",name:"imprimir_pie_pagina"},domProps:{checked:Array.isArray(e.registro.imprimir_pie_pagina)?e._i(e.registro.imprimir_pie_pagina,null)>-1:e.registro.imprimir_pie_pagina},on:{change:function(t){var a=e.registro.imprimir_pie_pagina,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_pie_pagina",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_pie_pagina",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_pie_pagina",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_pie_pagina"}},[e._v("Mostrar pie de página")]),e._v(" "),e._m(16)])]),e._v(" "),"master"===e.$usuario.nombreUsuario?t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.numeracion_pagina_pdf_resultados,expression:"registro.numeracion_pagina_pdf_resultados"}],attrs:{id:"numeracion_pagina_pdf_resultados",name:"numeracion_pagina_pdf_resultados",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.numeracion_pagina_pdf_resultados)?e._i(e.registro.numeracion_pagina_pdf_resultados,null)>-1:e.registro.numeracion_pagina_pdf_resultados},on:{change:function(t){var a=e.registro.numeracion_pagina_pdf_resultados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"numeracion_pagina_pdf_resultados",a.concat([null])):i>-1&&e.$set(e.registro,"numeracion_pagina_pdf_resultados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"numeracion_pagina_pdf_resultados",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"numeracion_pagina_pdf_resultados"}},[e._v("Numeración de página con\n                  total")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n                  * Aplica sólo para el reporte de resultados\n                ")])])]):e._e()])]),e._v(" "),e.registro.imprimir_encabezado?e._e():t("div",{staticClass:"form-group"},[e._m(17),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Superior")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margenes_sin_encabezado.superior,expression:"registro.margenes_sin_encabezado.superior"}],staticClass:"form-control input-sm",attrs:{id:"margen_superior",name:"margen_superior",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro.margenes_sin_encabezado,"superior",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"tipo_espacio_0"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_1"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_2"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_3"}},[e._v("3.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_4"}},[e._v("4.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_5"}},[e._v("4.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_6"}},[e._v("5.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_7"}},[e._v("5.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_8"}},[e._v("6.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_9"}},[e._v("6.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_10"}},[e._v("7.0 cm")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Inferior")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margenes_sin_encabezado.inferior,expression:"registro.margenes_sin_encabezado.inferior"}],staticClass:"form-control input-sm",attrs:{id:"margen_inferior",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro.margenes_sin_encabezado,"inferior",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"altura_pie_pagina_1"}},[e._v("1.0 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_2"}},[e._v("1.5 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_3"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_4"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_5"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_6"}},[e._v("3.5 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_7"}},[e._v("4.0 cm")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Izquierdo")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margenes_sin_encabezado.izquierdo,expression:"registro.margenes_sin_encabezado.izquierdo"}],staticClass:"form-control input-sm",attrs:{id:"margen_izquierdo",name:"margen_izquierdo",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro.margenes_sin_encabezado,"izquierdo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"0"}},[e._v("0 cm")]),e._v(" "),t("option",{attrs:{value:"0.5"}},[e._v("0.5 cm")]),e._v(" "),t("option",{attrs:{value:"1"}},[e._v("1.0 cm")]),e._v(" "),t("option",{attrs:{value:"1.5"}},[e._v("1.5 cm")]),e._v(" "),t("option",{attrs:{value:"2"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"2.5"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"3"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"3.5"}},[e._v("3.5 cm")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Derecho")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margenes_sin_encabezado.derecho,expression:"registro.margenes_sin_encabezado.derecho"}],staticClass:"form-control input-sm",attrs:{id:"margen_derecho",name:"margen_derecho",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro.margenes_sin_encabezado,"derecho",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"0"}},[e._v("0 cm")]),e._v(" "),t("option",{attrs:{value:"0.5"}},[e._v("0.5 cm")]),e._v(" "),t("option",{attrs:{value:"1"}},[e._v("1.0 cm")]),e._v(" "),t("option",{attrs:{value:"1.5"}},[e._v("1.5 cm")]),e._v(" "),t("option",{attrs:{value:"2"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"2.5"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"3"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"3.5"}},[e._v("3.5 cm")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Superior primera hoja")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.margen_superior_sin_encabezado_primera_hoja,expression:"registro.margen_superior_sin_encabezado_primera_hoja"}],staticClass:"form-control input-sm",attrs:{id:"margen_superior_sin_encabezado_primera_hoja",type:"number",min:"-10",max:"10",step:"0.01"},domProps:{value:e.registro.margen_superior_sin_encabezado_primera_hoja},on:{input:function(t){t.target.composing||e.$set(e.registro,"margen_superior_sin_encabezado_primera_hoja",t.target.value)}}})])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(18),e._v(" "),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tamano_papel_reporte,expression:"registro.tamano_papel_reporte"}],staticClass:"form-control input-sm",attrs:{name:"tamano_papel_reporte"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tamano_papel_reporte",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"a4"}},[e._v("Papel A4")]),e._v(" "),t("option",{attrs:{value:"a5"}},[e._v("Papel A5")])]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n                  * "+e._s(this.obtenerDescripcionPorClave("TAMANO_PAPEL_REPORTE"))+"\n                ")])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(19),e._v(" "),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tamano_letra_resultados,expression:"registro.tamano_letra_resultados"}],staticClass:"form-control input-sm",attrs:{name:"tamano_letra_resultados"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tamano_letra_resultados",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"pequeno"}},[e._v("Letra pequeña")]),e._v(" "),t("option",{attrs:{value:"mediano"}},[e._v("Letra mediana")]),e._v(" "),t("option",{attrs:{value:"grande"}},[e._v("Letra grande")]),e._v(" "),t("option",{attrs:{value:"extraGrande"}},[e._v("Letra extra grande")])]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n                  * "+e._s(this.obtenerDescripcionPorClave("TAMANO_LETRA_RESULTADOS"))+"\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tipo_letra,expression:"registro.tipo_letra"}],staticClass:"form-control input-sm",attrs:{name:"tipo_letra"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tipo_letra",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"helvetica"}},[e._v("Helvetica")]),e._v(" "),e.datos.permisoDiseno?t("option",{attrs:{value:"roboto"}},[e._v("Roboto")]):e._e(),e._v(" "),e.datos.permisoDiseno?t("option",{attrs:{value:"ubuntumono"}},[e._v("Ubuntu Mono")]):e._e(),e._v(" "),e.datos.permisoDiseno?t("option",{attrs:{value:"barlow"}},[e._v("Barlow")]):e._e(),e._v(" "),e.datos.permisoDiseno?t("option",{attrs:{value:"rubik"}},[e._v("Rubik")]):e._e()]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n                  * "+e._s(this.obtenerDescripcionPorClave("TIPO_LETRA"))+"\n                ")])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(20),e._v(" "),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.plantilla_pdf,expression:"registro.plantilla_pdf"}],staticClass:"form-control input-sm",attrs:{name:"plantilla_pdf"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"plantilla_pdf",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"1"}},[e._v("Plantilla 1")]),e._v(" "),e.datos.permisoDiseno?t("option",{attrs:{value:"2"}},[e._v("Plantilla 2")]):e._e(),e._v(" "),e.datos.permisoDiseno?t("option",{attrs:{value:"3"}},[e._v("Plantilla 3")]):e._e()]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n                  * "+e._s(this.obtenerDescripcionPorClave("PLANTILLA_PDF"))+"\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[e._v("Color primario de adornos: "+e._s(e.registro.color_1))])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-1"},[t("v-swatches",{attrs:{swatches:"text-advanced","fallback-input-type":"color","popover-x":"right",shapes:"circles"},model:{value:e.registro.color_1,callback:function(t){e.$set(e.registro,"color_1",t)},expression:"registro.color_1"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[e._v("Color secundario de adornos: "+e._s(e.registro.color_2))])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-1"},[t("v-swatches",{attrs:{swatches:"text-advanced","fallback-input-type":"color","popover-x":"right",shapes:"circles",disabled:!e.datos.permisoDiseno},model:{value:e.registro.color_2,callback:function(t){e.$set(e.registro,"color_2",t)},expression:"registro.color_2"}})],1)])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(21),e._v(" "),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[e.datos.permisoDiseno?t("label",{staticClass:"btn btn-default"},[e._v("\n                  Seleccionar imagen\n                  "),t("input",{ref:"file",staticClass:"sfo",attrs:{id:"marca_agua_pdf",name:"marca_agua_pdf",type:"file",accept:"image/*"},on:{change:e.marcaAguaSeleccionada}})]):e._e(),e._v(" "),t("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:!e.datos.permisoDiseno},on:{click:e.borrarMarcaAgua}},[t("i",{staticClass:"fas fa-trash"})]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n                  * "+e._s(this.obtenerDescripcionPorClave("MARCA_AGUA_PDF"))+"\n                ")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n                  * Dimensiones máximas: 350px x 500px\n                ")]),e._v(" "),t("img",{directives:[{name:"show",rawName:"v-show",value:e.urlMarcaAgua,expression:"urlMarcaAgua"}],staticStyle:{"max-width":"400px"},attrs:{src:e.urlMarcaAgua,alt:"Marca de agua"}})])])])])]),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"facturas"}},[t("div",{staticClass:"form-group"},[e._m(22),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Nombre")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre_impuesto,expression:"registro.nombre_impuesto"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"nombre_impuesto",required:""},domProps:{value:e.registro.nombre_impuesto},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre_impuesto",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Porcentaje")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.porcentaje_impuesto,expression:"registro.porcentaje_impuesto"}],staticClass:"form-control input-sm",attrs:{type:"number",name:"porcentaje_impuesto",min:"0",required:""},domProps:{value:e.registro.porcentaje_impuesto},on:{input:function(t){t.target.composing||e.$set(e.registro,"porcentaje_impuesto",t.target.value)}}})])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(23),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.id_sistema_factura,expression:"registro.id_sistema_factura"}],staticClass:"form-control input-sm",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"id_sistema_factura",t.target.multiple?a:a[0])}}},e._l(e.sistemasExternosFacturas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])})),0)]),e._v(" "),t("div",{staticClass:"col-md-4"},[t("button",{directives:[{name:"show",rawName:"v-show",value:""!==e.registro.id_sistema_factura,expression:"registro.id_sistema_factura !== ''"}],staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.abrirmodalSistemaFacturas}},[t("i",{staticClass:"fas fa-cog fa-fw"}),e._v(" Configurar\n            ")]),e._v(" "),e._m(24)])]),e._v(" "),""===e.registro.id_sistema_factura?[t("div",{staticClass:"form-group"},[e._m(25),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Alto (cm)")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.alto,expression:"registro.factura.alto"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_alto"},domProps:{value:e.registro.factura.alto},on:{input:function(t){t.target.composing||e.$set(e.registro.factura,"alto",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Ancho (cm)")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.ancho,expression:"registro.factura.ancho"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_ancho"},domProps:{value:e.registro.factura.ancho},on:{input:function(t){t.target.composing||e.$set(e.registro.factura,"ancho",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Tamaño de letra")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.tamano_letra,expression:"registro.factura.tamano_letra"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_tamano_letra"},domProps:{value:e.registro.factura.tamano_letra},on:{input:function(t){t.target.composing||e.$set(e.registro.factura,"tamano_letra",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_factura_doble,expression:"registro.imprimir_factura_doble"}],attrs:{type:"checkbox",id:"imprimir_factura_doble",name:"imprimir_factura_doble"},domProps:{checked:Array.isArray(e.registro.imprimir_factura_doble)?e._i(e.registro.imprimir_factura_doble,null)>-1:e.registro.imprimir_factura_doble},on:{change:function(t){var a=e.registro.imprimir_factura_doble,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_factura_doble",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_factura_doble",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_factura_doble",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"imprimir_factura_doble"}},[e._v("Imprimir factura doble")])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(26),e._v(" "),t("div",{staticClass:"col-md-9"},[e._m(27),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Fecha de emisión")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.fecha_emision.top,expression:"registro.factura.fecha_emision.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_fecha_emision_top"},domProps:{value:e.registro.factura.fecha_emision.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.fecha_emision,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.fecha_emision.left,expression:"registro.factura.fecha_emision.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_fecha_emision_left"},domProps:{value:e.registro.factura.fecha_emision.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.fecha_emision,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.fecha_emision.etiqueta,expression:"registro.factura.fecha_emision.etiqueta"}],attrs:{type:"checkbox",id:"f_fecha_emision_etiqueta",name:"f_fecha_emision_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.fecha_emision.etiqueta)?e._i(e.registro.factura.fecha_emision.etiqueta,null)>-1:e.registro.factura.fecha_emision.etiqueta},on:{change:function(t){var a=e.registro.factura.fecha_emision.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.fecha_emision,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.fecha_emision,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.fecha_emision,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_fecha_emision_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Identificación")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.identificacion.top,expression:"registro.factura.identificacion.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_identificacion_top"},domProps:{value:e.registro.factura.identificacion.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.identificacion,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.identificacion.left,expression:"registro.factura.identificacion.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_identificacion_left"},domProps:{value:e.registro.factura.identificacion.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.identificacion,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.identificacion.etiqueta,expression:"registro.factura.identificacion.etiqueta"}],attrs:{type:"checkbox",id:"f_identificacion_etiqueta",name:"f_identificacion_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.identificacion.etiqueta)?e._i(e.registro.factura.identificacion.etiqueta,null)>-1:e.registro.factura.identificacion.etiqueta},on:{change:function(t){var a=e.registro.factura.identificacion.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.identificacion,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.identificacion,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.identificacion,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_identificacion_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Nombre")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.nombre.top,expression:"registro.factura.nombre.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_nombre_top"},domProps:{value:e.registro.factura.nombre.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.nombre,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.nombre.left,expression:"registro.factura.nombre.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_nombre_left"},domProps:{value:e.registro.factura.nombre.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.nombre,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.nombre.etiqueta,expression:"registro.factura.nombre.etiqueta"}],attrs:{type:"checkbox",id:"f_nombre_etiqueta",name:"f_nombre_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.nombre.etiqueta)?e._i(e.registro.factura.nombre.etiqueta,null)>-1:e.registro.factura.nombre.etiqueta},on:{change:function(t){var a=e.registro.factura.nombre.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.nombre,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.nombre,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.nombre,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_nombre_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Dirección")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.direccion.top,expression:"registro.factura.direccion.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_direccion_top"},domProps:{value:e.registro.factura.direccion.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.direccion,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.direccion.left,expression:"registro.factura.direccion.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_direccion_left"},domProps:{value:e.registro.factura.direccion.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.direccion,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.direccion.etiqueta,expression:"registro.factura.direccion.etiqueta"}],attrs:{type:"checkbox",id:"f_direccion_etiqueta",name:"f_direccion_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.direccion.etiqueta)?e._i(e.registro.factura.direccion.etiqueta,null)>-1:e.registro.factura.direccion.etiqueta},on:{change:function(t){var a=e.registro.factura.direccion.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.direccion,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.direccion,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.direccion,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_direccion_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Teléfono")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.telefono.top,expression:"registro.factura.telefono.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_telefono_top"},domProps:{value:e.registro.factura.telefono.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.telefono,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.telefono.left,expression:"registro.factura.telefono.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_telefono_left"},domProps:{value:e.registro.factura.telefono.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.telefono,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.telefono.etiqueta,expression:"registro.factura.telefono.etiqueta"}],attrs:{type:"checkbox",id:"f_telefono_etiqueta",name:"f_telefono_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.telefono.etiqueta)?e._i(e.registro.factura.telefono.etiqueta,null)>-1:e.registro.factura.telefono.etiqueta},on:{change:function(t){var a=e.registro.factura.telefono.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.telefono,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.telefono,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.telefono,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_telefono_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Número")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.numero_factura.top,expression:"registro.factura.numero_factura.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_numero_factura_top"},domProps:{value:e.registro.factura.numero_factura.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.numero_factura,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.numero_factura.left,expression:"registro.factura.numero_factura.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_numero_factura_left"},domProps:{value:e.registro.factura.numero_factura.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.numero_factura,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.numero_factura.etiqueta,expression:"registro.factura.numero_factura.etiqueta"}],attrs:{type:"checkbox",id:"f_numero_factura_etiqueta",name:"f_numero_factura_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.numero_factura.etiqueta)?e._i(e.registro.factura.numero_factura.etiqueta,null)>-1:e.registro.factura.numero_factura.etiqueta},on:{change:function(t){var a=e.registro.factura.numero_factura.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.numero_factura,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.numero_factura,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.numero_factura,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_numero_factura_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("h5",[e._v("Factura sin detalle")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Cantidad")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.cantidad.top,expression:"registro.factura.cantidad.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_cantidad_top"},domProps:{value:e.registro.factura.cantidad.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.cantidad,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.cantidad.left,expression:"registro.factura.cantidad.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_cantidad_left"},domProps:{value:e.registro.factura.cantidad.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.cantidad,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.cantidad.etiqueta,expression:"registro.factura.cantidad.etiqueta"}],attrs:{type:"checkbox",id:"f_cantidad_etiqueta",name:"f_cantidad_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.cantidad.etiqueta)?e._i(e.registro.factura.cantidad.etiqueta,null)>-1:e.registro.factura.cantidad.etiqueta},on:{change:function(t){var a=e.registro.factura.cantidad.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.cantidad,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.cantidad,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.cantidad,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_cantidad_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Detalle")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.detalle.top,expression:"registro.factura.detalle.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_detalle_top"},domProps:{value:e.registro.factura.detalle.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.detalle,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.detalle.left,expression:"registro.factura.detalle.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_detalle_left"},domProps:{value:e.registro.factura.detalle.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.detalle,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.detalle.etiqueta,expression:"registro.factura.detalle.etiqueta"}],attrs:{type:"checkbox",id:"f_detalle_etiqueta",name:"f_detalle_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.detalle.etiqueta)?e._i(e.registro.factura.detalle.etiqueta,null)>-1:e.registro.factura.detalle.etiqueta},on:{change:function(t){var a=e.registro.factura.detalle.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.detalle,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.detalle,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.detalle,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_detalle_etiqueta"}},[e._v("Etiqueta")])]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.detalle.width,expression:"registro.factura.detalle.width"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_detalle_width"},domProps:{value:e.registro.factura.detalle.width},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.detalle,"width",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Valor unitario")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.valor_unitario.top,expression:"registro.factura.valor_unitario.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_valor_unitario_top"},domProps:{value:e.registro.factura.valor_unitario.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.valor_unitario,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.valor_unitario.left,expression:"registro.factura.valor_unitario.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_valor_unitario_left"},domProps:{value:e.registro.factura.valor_unitario.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.valor_unitario,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.valor_unitario.etiqueta,expression:"registro.factura.valor_unitario.etiqueta"}],attrs:{type:"checkbox",id:"f_valor_unitario_etiqueta",name:"f_valor_unitario_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.valor_unitario.etiqueta)?e._i(e.registro.factura.valor_unitario.etiqueta,null)>-1:e.registro.factura.valor_unitario.etiqueta},on:{change:function(t){var a=e.registro.factura.valor_unitario.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.valor_unitario,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.valor_unitario,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.valor_unitario,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_valor_unitario_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Valor total")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.valor_total.top,expression:"registro.factura.valor_total.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_valor_total_top"},domProps:{value:e.registro.factura.valor_total.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.valor_total,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.valor_total.left,expression:"registro.factura.valor_total.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_valor_total_left"},domProps:{value:e.registro.factura.valor_total.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.valor_total,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.valor_total.etiqueta,expression:"registro.factura.valor_total.etiqueta"}],attrs:{type:"checkbox",id:"f_valor_total_etiqueta",name:"f_valor_total_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.valor_total.etiqueta)?e._i(e.registro.factura.valor_total.etiqueta,null)>-1:e.registro.factura.valor_total.etiqueta},on:{change:function(t){var a=e.registro.factura.valor_total.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.valor_total,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.valor_total,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.valor_total,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_valor_total_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Subtotal")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.subtotal.top,expression:"registro.factura.subtotal.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_subtotal_top"},domProps:{value:e.registro.factura.subtotal.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.subtotal,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.subtotal.left,expression:"registro.factura.subtotal.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_subtotal_left"},domProps:{value:e.registro.factura.subtotal.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.subtotal,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.subtotal.etiqueta,expression:"registro.factura.subtotal.etiqueta"}],attrs:{type:"checkbox",id:"f_subtotal_etiqueta",name:"f_subtotal_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.subtotal.etiqueta)?e._i(e.registro.factura.subtotal.etiqueta,null)>-1:e.registro.factura.subtotal.etiqueta},on:{change:function(t){var a=e.registro.factura.subtotal.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.subtotal,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.subtotal,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.subtotal,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_subtotal_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Descuento")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.descuento.top,expression:"registro.factura.descuento.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_descuento_top"},domProps:{value:e.registro.factura.descuento.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.descuento,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.descuento.left,expression:"registro.factura.descuento.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_descuento_left"},domProps:{value:e.registro.factura.descuento.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.descuento,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.descuento.etiqueta,expression:"registro.factura.descuento.etiqueta"}],attrs:{type:"checkbox",id:"f_descuento_etiqueta",name:"f_descuento_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.descuento.etiqueta)?e._i(e.registro.factura.descuento.etiqueta,null)>-1:e.registro.factura.descuento.etiqueta},on:{change:function(t){var a=e.registro.factura.descuento.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.descuento,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.descuento,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.descuento,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_descuento_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Impuesto")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.impuesto.top,expression:"registro.factura.impuesto.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_impuesto_top"},domProps:{value:e.registro.factura.impuesto.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.impuesto,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.impuesto.left,expression:"registro.factura.impuesto.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_impuesto_left"},domProps:{value:e.registro.factura.impuesto.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.impuesto,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.impuesto.etiqueta,expression:"registro.factura.impuesto.etiqueta"}],attrs:{type:"checkbox",id:"f_impuesto_etiqueta",name:"f_impuesto_etiqueta"},domProps:{checked:Array.isArray(e.registro.factura.impuesto.etiqueta)?e._i(e.registro.factura.impuesto.etiqueta,null)>-1:e.registro.factura.impuesto.etiqueta},on:{change:function(t){var a=e.registro.factura.impuesto.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro.factura.impuesto,"etiqueta",a.concat([null])):i>-1&&e.$set(e.registro.factura.impuesto,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.impuesto,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_impuesto_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Total")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.total.top,expression:"registro.factura.total.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_total_top"},domProps:{value:e.registro.factura.total.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.total,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.total.left,expression:"registro.factura.total.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_total_left"},domProps:{value:e.registro.factura.total.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura.total,"left",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura.total.etiqueta,expression:"registro.factura.total.etiqueta"}],attrs:{type:"checkbox",id:"f_total_etiqueta",name:"f_total_etiqueta",value:"1"},domProps:{checked:Array.isArray(e.registro.factura.total.etiqueta)?e._i(e.registro.factura.total.etiqueta,"1")>-1:e.registro.factura.total.etiqueta},on:{change:function(t){var a=e.registro.factura.total.etiqueta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"1");r.checked?i<0&&e.$set(e.registro.factura.total,"etiqueta",a.concat(["1"])):i>-1&&e.$set(e.registro.factura.total,"etiqueta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro.factura.total,"etiqueta",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"f_total_etiqueta"}},[e._v("Etiqueta")])])]),e._v(" "),t("h5",[e._v("Factura con detalle de exámenes")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Listado de exámenes")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura_examenes_top,expression:"registro.factura_examenes_top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"factura_examenes_top"},domProps:{value:e.registro.factura_examenes_top},on:{input:function(t){t.target.composing||e.$set(e.registro,"factura_examenes_top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura_examenes_lados,expression:"registro.factura_examenes_lados"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"factura_examenes_lados"},domProps:{value:e.registro.factura_examenes_lados},on:{input:function(t){t.target.composing||e.$set(e.registro,"factura_examenes_lados",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[e._v("Totales")]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura_totales.top,expression:"registro.factura_totales.top"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_totales_top"},domProps:{value:e.registro.factura_totales.top},on:{input:function(t){t.target.composing||e.$set(e.registro.factura_totales,"top",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura_totales.left,expression:"registro.factura_totales.left"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"f_totales_left"},domProps:{value:e.registro.factura_totales.left},on:{input:function(t){t.target.composing||e.$set(e.registro.factura_totales,"left",t.target.value)}}})])]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n                * Imprimir etiquetas se debe desactivar si la factura pre-impresa ya incluye los nombres "),t("br"),e._v("\n                * El ancho de las etiquetas es de 2cm. Tomar en cuenta este ancho cuando se quita la etiqueta.\n                * "+e._s(this.obtenerDescripcionPorClave("COORDENADAS_FACTURA"))+"\n              ")])])])]:e._e()],2),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"avanzado"}},["EC"===e.$cliente.pais?t("div",{staticClass:"form-group"},[e._m(28),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.iess_enviar_usuario_valida,expression:"registro.iess_enviar_usuario_valida"}],attrs:{type:"checkbox",id:"iess_enviar_usuario_valida"},domProps:{checked:Array.isArray(e.registro.iess_enviar_usuario_valida)?e._i(e.registro.iess_enviar_usuario_valida,null)>-1:e.registro.iess_enviar_usuario_valida},on:{change:function(t){var a=e.registro.iess_enviar_usuario_valida,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"iess_enviar_usuario_valida",a.concat([null])):i>-1&&e.$set(e.registro,"iess_enviar_usuario_valida",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"iess_enviar_usuario_valida",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"iess_enviar_usuario_valida"}},[e._v("Enviar usuario que valida en\n                  comentario")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.iess_enviar_no_procesados,expression:"registro.iess_enviar_no_procesados"}],attrs:{type:"checkbox",id:"iess_enviar_no_procesados"},domProps:{checked:Array.isArray(e.registro.iess_enviar_no_procesados)?e._i(e.registro.iess_enviar_no_procesados,null)>-1:e.registro.iess_enviar_no_procesados},on:{change:function(t){var a=e.registro.iess_enviar_no_procesados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"iess_enviar_no_procesados",a.concat([null])):i>-1&&e.$set(e.registro,"iess_enviar_no_procesados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"iess_enviar_no_procesados",o)}}}),e._v(" "),t("label",{staticStyle:{"font-weight":"normal"},attrs:{for:"iess_enviar_no_procesados"}},[e._v("\n                  Enviar exámenes no procesados\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5"},[e._v("Usuario a enviar en resultados")]),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.iess_usuario_enviar_resultados,expression:"registro.iess_usuario_enviar_resultados"}],staticClass:"form-control input-sm",attrs:{id:"iess_usuario_enviar_resultados",name:"iess_usuario_enviar_resultados",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"iess_usuario_enviar_resultados",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"USUARIO_INGRESA"}},[e._v("Usuario ingresa")]),e._v(" "),t("option",{attrs:{value:"USUARIO_VALIDA"}},[e._v("Usuario valida")])])])])])])])]):e._e(),e._v(" "),t("div",{staticClass:"form-group"},[e._m(29),e._v(" "),t("div",{staticClass:"col-md-9"},[e._m(30),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.dominio_servidor_local,expression:"registro.dominio_servidor_local"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"dominio"},domProps:{value:e.registro.dominio_servidor_local},on:{input:function(t){t.target.composing||e.$set(e.registro,"dominio_servidor_local",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.puerto_servidor_local,expression:"registro.puerto_servidor_local"}],staticClass:"form-control input-sm",attrs:{type:"text",name:"puerto"},domProps:{value:e.registro.puerto_servidor_local},on:{input:function(t){t.target.composing||e.$set(e.registro,"puerto_servidor_local",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("div",{staticStyle:{display:"inline-block","font-size":"large"}},[e.encendido?t("span",{staticClass:"label label-success"},[e._v("Encendido")]):e._e(),e._v(" "),e.error?t("span",{staticClass:"label label-warning"},[e._v("Error")]):e._e(),e._v(" "),e.apagado?t("span",{staticClass:"label label-danger"},[e._v("Apagado")]):e._e()]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(t){return e.validarServidorLocal(!0)}}},[e._v("\n                  Validar estado servidor local\n                ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(t){return e.apagarServidorLocal(!0)}}},[e._v("\n                  Apagar\n                ")])])])])])])])],1),e._v(" "),t("sistema-externo-facturas-modal",{on:{"sistema-externo-facturas-guardado":e.sistemaExternoFacturasGuardado}})],1)}),[function(){var e=this,t=e._self._c;return t("ul",{staticClass:"nav nav-tabs"},[t("li",{staticClass:"active"},[t("a",{attrs:{"data-toggle":"tab",href:"#ordenes"}},[e._v("Órdenes")])]),e._v(" "),t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#etiquetas"}},[e._v("Etiquetas")])]),e._v(" "),t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#reportes"}},[e._v("Reportes")])]),e._v(" "),t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#pedidos"}},[e._v("Pedidos")])]),e._v(" "),t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#diseno"}},[e._v("Diseño")])]),e._v(" "),t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#facturas"}},[e._v("Facturas")])]),e._v(" "),t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#avanzado"}},[e._v("Avanzado")])])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Tipo de numeración")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-10"},[t("p",{staticClass:"help-block"},[e._v("\n                  *"),t("em",[e._v("Secuencia global: ")]),e._v(" La numeración es unificada en todas las sucursales "),t("br"),e._v(" "),t("em",[e._v("Secuencia sucursal: ")]),e._v(" Cada sucursal mantiene su propia numeración "),t("br"),e._v(" "),t("em",[e._v("Esquema ordinal: ")]),e._v(" La secuencia de numeración es de tipo 1, 2, … n "),t("br"),e._v(" "),t("em",[e._v("Esquema diario: ")]),e._v(" La secuencia de numeración utiliza el formato DDMMYYYY+ordinal "),t("br")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",[this._v("Padding")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Visualización en pantalla de listado de órdenes")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Al guardar una orden")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Al generar la recepción")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Recibo")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Etiquetas de muestras")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Etiquetas de datos de paciente")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Etiquetas QR")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Impresión en los reportes de resultados")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Seguridad PDF")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Membrete por defecto")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-3 text-right"},[t("label",[e._v("Encabezo y pie de página")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* Esto afecta a los reportes de resultados, recibos\n              de orden, pedidos, cotizaciones y remisiones.")])])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"help-block"},[e._v("\n                  * Desactivar si utiliza papel membretado"),t("br"),e._v("\n                  * La versión PDF siempre incluye encabezado"),t("br"),e._v("\n                  * No aplica para el PDF de recibo de la orden\n                ")])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"help-block"},[e._v("\n                  * Desactivar si utiliza papel membretado"),t("br"),e._v("\n                  * La versión PDF siempre incluye pie de página\n                ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-3 text-right"},[t("label",[e._v("Márgenes")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v('* Márgenes aplican cuando la casilla de "Mostrar encabezado" está deshabilitada.')])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Tamaño de papel")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-3 text-right"},[t("span",{staticClass:"label label-danger"},[e._v("Pro")]),e._v(" "),t("label",[e._v("Tipografía")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* Esto afecta a los reportes de resultados, recibos\n              de orden, pedidos, cotizaciones y remisiones.")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-3 text-right"},[t("span",{staticClass:"label label-danger"},[e._v("Pro")]),e._v(" "),t("label",[e._v("Plantilla")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* Esto afecta a los reportes de resultados, recibos\n              de orden, pedidos, cotizaciones y remisiones.")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-3 text-right"},[t("span",{staticClass:"label label-danger"},[e._v("Pro")]),e._v(" "),t("label",[e._v("Marca de agua")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* Esto afecta a los reportes de resultados, recibos\n              de orden, pedidos, cotizaciones y remisiones.")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Impuesto")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Sistema facturas")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-toggle":"modal","data-backdrop":"static","data-target":"#modalSistemaFacturas"}},[e("i",{staticClass:"fas fa-plus fa-fw"}),this._v(" Agregar sistema de facturas\n            ")])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Dimensiones")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Posición de elementos")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",staticStyle:{"font-weight":"bold"}},[t("div",{staticClass:"col-md-3"},[e._v("Elemento")]),e._v(" "),t("div",{staticClass:"col-md-2"},[e._v("Margen superior (cm)")]),e._v(" "),t("div",{staticClass:"col-md-2"},[e._v("Margen izquierdo (cm)")]),e._v(" "),t("div",{staticClass:"col-md-2"},[e._v("Imprimir")]),e._v(" "),t("div",{staticClass:"col-md-2"},[e._v("Ancho")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-md-3 text-right"},[t("label",[e._v("Integración IESS AS400")]),e._v(" "),t("p",{staticClass:"help-block"},[e._v("* Solamente si trabaja con IESS")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",[this._v("Servidor de impresión")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4"},[e._v("Dominio")]),e._v(" "),t("div",{staticClass:"col-md-2"},[e._v("Puerto")]),e._v(" "),t("div",{staticClass:"col-md-6"},[e._v("Estado")])])}],!1,null,null,null).exports},8102:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var r=a(6714),o=a(7226),i=a(7974),s=a(9676),n=a(2979);function c(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var d,u,m;const p={components:{BuscarMedicoModal:r.Z,GestionarMedicoModal:o.Z,BuscarPacienteModal:s.Z,GestionarPacienteModal:n.Z},props:["id","permisos"],data:function(){return{indiceExamen:null,cargandoPaciente:!1,cargandoMedico:!1,errorEnTarifas:!1,errorEnCotizacion:!1,cargandoExamenes:!1,cargandoPerfiles:!1,cadenaBusqueda:"",cadenaBusquedaExamenes:"",cadenaBusquedaDetalles:"",porcentajeRecargo:0,porcentaje_descuento:0,permitir_descuento:!0,cambio_precio:!0,empresaPorDefectoId:"",descuentoPorPorcentaje:!1,recargoPorPorcentaje:!1,grupoId:"",empresa:"",registro:{id:this.id,sucursal_id:"",fecha:"",fecha_turno:"",plan_salud_id:"",paciente_id:"",paciente_identificacion:"",paciente_tipo:"",paciente_type:"",paciente_nombre:"",paciente_taxonomia:"",paciente_fecha_nacimiento:"",paciente_sexo:"",paciente_correo:"",paciente_direccion:"",paciente_telefono:"",paciente_numero_poliza:"",paciente_dueno_responsable:"",medico_id:"",medico_nombre:"",subempresa_id:"",embarazada:!1,valor_descuento:0,valor_recargo:0,valor_domicilio:0,valor_total:"",grupo_id:"",comentario:""},detallesCotizaciones:[],sucursales:[],empresas:[],subempresas:[],examenes:[],grupos:[],detallesGrupos:[],planesSalud:[],sexos:[{id:"A",nombre:"Ambos Sexos"},{id:"F",nombre:"Femenino"},{id:"M",nombre:"Masculino"}],count:0,pagina:1}},mounted:function(){$("body").popover({selector:'[data-toggle="popover"]',container:"body",trigger:"hover"}),this.cargarDatos()},methods:(d={limpiarCadenaBusqueda:function(){this.cadenaBusqueda=""},limpiarCadenaBusquedaExamenes:function(){this.cadenaBusquedaExamenes=""},limpiarCadenaBusquedaDetalles:function(){this.cadenaBusquedaDetalles=""},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e,t){this.$refs.alerta.mostrarAlerta("info",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},ocultarMensajes:function(){this.$refs.alerta.ocultarAlertas()},alternarCamposFormulario:function(){"disabled"===$("fieldset").attr("disabled")?$("fieldset").removeAttr("disabled"):$("fieldset").attr("disabled","disabled")},cargarDatos:function(){var e=this;this.errorEnCotizacion=!1,this.$refs.cargando.alternar(),"0"!==this.id?axios.get("/api/cotizaciones/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.editar(a),e.alternarCamposFormulario()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar cotizacion!",a)})).then((function(){return e.$refs.cargando.alternar()})):axios.get("/api/cotizaciones/create").then((function(t){var a=t.data.data;e.crear(a),e.alternarCamposFormulario()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar cotizacion",a)})).then((function(){return e.$refs.cargando.alternar()}))},crear:function(e){if(this.errorEnTarifas=!1,this.porcentaje_descuento=0,this.grupos=e.grupos,this.empresas=e.empresas,this.planesSalud=e.planesSalud,this.registro.sucursal_id=e.sucursal_id,this.registro.usuario_ingresa=e.usuario_id,this.registro.usuario_modifica=e.usuario_id,this.registro.fecha=moment().format("YYYY-MM-DD"),this.permitir_descuento=e.permisos.generarDescuento,null!=e.empresaPorDefectoId){this.ocultarMensajes(),this.empresaPorDefectoId=e.empresaPorDefectoId;var t=this.obtenerEmpresa(this.empresaPorDefectoId);if(!t)return this.examenes=[],this.detallesCotizaciones=[],this.registro.empresa_id="",this.registro.subempresa_id="",void this.mostrarAdvertencia('El cliente por defecto tiene estado "Inactivo", no se puede seleccionar');this.empresa=t,this.subempresas=this.empresa.subempresas,this.cambio_precio=this.empresa.cambio_precio,this.permitir_descuento=this.permitir_descuento&&this.empresa.permitir_descuento;var a=this.obtenerSubempresaMatriz();null!=a&&(this.registro.subempresa_id=a.id,a.porcentaje_descuento&&(this.porcentaje_descuento=a.porcentaje_descuento,this.descuentoPorPorcentaje=!0),a.tarifa_venta_id?(this.examenes=e.examenesTarifa,_.isEmpty(this.examenes)&&(this.errorEnTarifas=!0,this.mostrarAdvertencia("No se ha definido tarifa para los exámenes de la categoría seleccionada"))):(this.errorEnTarifas=!0,this.mostrarAdvertencia("No se ha definido tarifa para la categoría seleccionada")))}},editar:function(e){if(this.grupos=e.grupos,this.empresas=e.empresas,this.planesSalud=e.planesSalud,e.cotizacion.fecha=this.fechaALocal(e.cotizacion.fecha,"YYYY-MM-DD"),e.cotizacion.medico_id||(e.cotizacion.medico_id=""),e.cotizacion.medico_nombre="",e.cotizacion.plan_salud_id||(e.cotizacion.plan_salud_id=""),this.registro=e.cotizacion,"N"===this.registro.subempresa.empresa.estado&&(this.errorEnCotizacion=!0,this.empresas.push(this.registro.subempresa.empresa),this.mostrarErrores("¡Error!",'Cliente con estado "Inactivo"')),this.cambio_precio=this.registro.subempresa.empresa.cambio_precio,this.permitir_descuento=e.permisos.generarDescuento&&this.registro.subempresa.empresa.permitir_descuento,this.examenes=e.examenesTarifa,this.empresa=this.obtenerEmpresa(this.registro.subempresa.empresa.id),this.subempresas=this.empresa.subempresas,this.porcentaje_descuento=0,this.registro.paciente_identificacion=this.registro.paciente.numero_identificacion,this.registro.paciente_sexo=this.registro.paciente.sexo,this.registro.paciente_correo=this.registro.paciente.correo,this.registro.paciente_direccion=this.registro.paciente.direccion,this.registro.paciente_telefono=this.registro.paciente.telefono_celular,this.registro.es_humano&&(this.registro.paciente_tipo=this.registro.paciente.tipo_identificacion,this.registro.paciente_nombre=this.registro.paciente.nombre_paciente,this.registro.paciente_direccion=this.registro.paciente.direccion_completa,this.registro.paciente_numero_poliza=this.registro.paciente.numero_poliza,this.registro.paciente_fecha_nacimiento=this.registro.paciente.fecha_nacimiento),this.registro.es_animal){var t=this.registro.paciente;this.registro.paciente_nombre=t.nombre_paciente,this.registro.paciente_taxonomia="".concat(t.raza.padre.nombre," - ").concat(t.raza.nombre),this.registro.paciente_fecha_nacimiento=t.fecha_nacimiento,this.cargarDuenoResponsable(this.registro.paciente_type,t)}this.registro.es_objeto&&(this.registro.paciente_nombre=this.registro.paciente.descripcion,this.cargarDuenoResponsable(this.registro.paciente_type,this.registro.paciente)),this.registro.medico&&(this.registro.medico_nombre=this.registro.medico.nombre_completo),this.registro.usuario_modifica=e.usuario_id,this.registro.comentario=e.cotizacion.comentario,this.registro.valor_domicilio=e.cotizacion.valor_domicilio,this.detallesCotizaciones=this.registro.detalles_cotizaciones.map((function(e){return{id:e.id,examen_id:e.examen.id,examen:e.examen,valor:Number(e.valor).toFixed(2)}})),this.calcularPorcentajeDescuento(),this.calcularPorcentajeRecargo(),this.detalles_cotizaciones=[]},cargarExamenes:function(e,t){var a=this;if(this.errorEnTarifas=!1,this.examenes=[],this.registro.subempresa_id&&""!==this.registro.subempresa_id&&0!==this.empresa.subempresas.length){var r=this.registro.subempresa_id,o=this.empresa.subempresas.find((function(e){return e.id===r}));if(o){if(!o.tarifa_venta_id)return this.errorEnTarifas=!0,this.mostrarAdvertencia("¡No se ha definido tarifa para la categoría seleccionada!"),void(e||(this.cargandoExamenes=!1));e&&(this.cargandoExamenes=!0),o.porcentaje_descuento?(this.porcentaje_descuento=o.porcentaje_descuento,this.descuentoPorPorcentaje=!0):(this.porcentaje_descuento=0,this.registro.valor_descuento=0),axios.get("/api/examenes-tarifas?tarifaId=".concat(o.tarifa_venta_id)).then((function(e){var t=e.data.data;if(a.examenes=t,_.isEmpty(a.examenes))a.errorEnTarifas=!0,a.mostrarAdvertencia("¡No se ha definido tarifa para los exámenes de la categoría seleccionada!");else{var r=a;a.detallesCotizaciones.forEach((function(e){if(!r.examenes.find((function(t){var a=t.examen_id===e.examen_id;return a&&(e.valor=Number(t.valor).toFixed(2)),a}))){var t=r.detallesCotizaciones.indexOf(e);r.detallesCotizaciones.splice(t,1)}})),a.porcentajeDescuentoKeyup(null)}})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores("Error al obtener exámenes",t)})).then((function(){t&&(a.cargandoExamenes=!1)}))}else e||(this.cargandoExamenes=!1)}},cargarExamenesPorGrupo:function(e){var t=this;this.grupoId="",this.ocultarMensajes(),""!==e&&(this.registro.subempresa_id?0!==this.examenes.length?(this.cargandoPerfiles=!0,axios.get("/api/detalles-grupos?cadenaBusqueda="+e).then((function(a){var r=a.data.data;if(t.detallesGrupos=r,0!==t.detallesGrupos.length){var o,i=0,s=c(t.examenes);try{var n=function(){var e,a=o.value,r=c(t.detallesGrupos);try{for(r.s();!(e=r.n()).done;){var s=e.value;a.examen_id===s.examen_id&&0===t.detallesCotizaciones.reduce((function(e,t){return t.examen_id===a.examen_id?e+=1:e}),0)&&(t.agregarExamen(a),i++)}}catch(e){r.e(e)}finally{r.f()}};for(s.s();!(o=s.n()).done;)n()}catch(e){s.e(e)}finally{s.f()}if(i>0){var l=t.grupos.find((function(t){return t.id===e}));t.mostrarExito("Examenes de perfil <strong>".concat(l.nombre,"</strong> agregados"))}}else t.mostrarAdvertencia("No existen exámenes definidos para este grupo")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al cargar los exámenes por grupo!",a)})).then((function(){return t.cargandoPerfiles=!1}))):this.mostrarAdvertencia('No existen "Exámenes" disponibles'):this.mostrarAdvertencia('No se ha seleccionado una "Categoría"'))},autocompletarExamen:function(){1===this.examenesFiltrados.length&&this.agregarExamen(this.examenesFiltrados[0])},agregarExamen:function(e){if(this.ocultarMensajes(),""!==this.registro.fecha){var t={};t.examen_id=e.examen.id,t.examen=e.examen,t.valor=Number(e.valor).toFixed(2),this.buscarSiExisteExamen(e.examen.id)||(this.$refs.buscarExamen.focus(),this.$refs.buscarExamen.select(),this.indiceExamen=null,this.detallesCotizaciones.push(t),setTimeout((function(){var e=document.getElementById("examenes-seleccioandos");e.scrollTop=e.scrollHeight}),100),this.descuentoPorPorcentaje?this.porcentajeDescuentoKeyup(null):this.valorDescuentoKeyup(null),this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null))}else this.mostrarErrores("¡Error!",'Campo "Fecha" no puede ser vacío')},buscarSiExisteExamen:function(e){var t=!1;return this.detallesCotizaciones.filter((function(t){if(t.examen_id===e)return t.examen_id})).length>0&&(t=!0),t},eliminarDetalle:function(e){var t=this.detallesCotizaciones.indexOf(e);this.detallesCotizaciones.splice(t,1),_.isEmpty(this.detallesCotizaciones)?(this.porcentaje_descuento=0,this.registro.valor_descuento=0):(this.descuentoPorPorcentaje?this.porcentajeDescuentoKeyup(null):this.valorDescuentoKeyup(null),this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null))},eliminarDetalles:function(){this.detallesCotizaciones=[],this.porcentaje_descuento=0,this.registro.valor_descuento=0,this.porcentajeRecargo=0,this.registro.valor_recargo=0,this.registro.valor_domicilio=0,this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null)},postGuardar:function(e){var t=e.data.data;this.permisos.imprimirCotizaciones&&this.imprimirPdf(t.id),this.redireccionar()},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t=_.cloneDeep(this.registro);(t=this.completarValores(t)).detallesCotizaciones=this.detallesCotizaciones,t.fecha=this.fechaAUTC(t.fecha,"YYYY-MM-DD"),"0"===this.id?axios.post("/api/cotizaciones",t).then((function(t){e.postGuardar(t)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar cotización!",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})):axios.patch("/api/cotizaciones/"+this.id,t).then((function(t){e.postGuardar(t)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al actualizar cotización",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()}))},completarValores:function(e){return e.valor_descuento||(e.valor_descuento=0),e.valor_recargo||(e.valor_recargo=0),e.valor_domicilio||(e.valor_domicilio=0),e},imprimirPdfAlEditar:function(){this.imprimirPdf(this.id)},imprimirPdf:function(e){window.open("/cotizaciones/"+e+"/pdf","_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},redireccionar:function(){window.location.href="/cotizaciones"},limpiarPaciente:function(){this.registro.paciente_id="",this.registro.paciente_type="",this.registro.paciente_nombre="",this.registro.paciente_taxonomia="",this.registro.paciente_fecha_nacimiento="",this.registro.paciente_sexo="",this.registro.paciente_correo="",this.registro.paciente_direccion="",this.registro.paciente_telefono="",this.registro.paciente_numero_poliza="",this.registro.paciente_dueno_responsable=""},autocompletarPaciente:function(){var e=this;this.ocultarMensajes(),this.limpiarPaciente(),this.registro.paciente_identificacion&&(this.registro.paciente_identificacion=this.registro.paciente_identificacion.trim(),this.cargandoPaciente=!0,axios.get("/api/pacientes?identificacion=".concat(this.registro.paciente_identificacion)).then((function(t){var a=t.data.data;if(0!==a.length)return a.length>1?(e.cadenaBusqueda=e.registro.paciente_identificacion,void e.abrirPaciente(!0)):void e.pacienteSeleccionado(a[0]);e.abrirModalCrearPaciente()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al buscar paciente!",a)})).then((function(){return e.cargandoPaciente=!1})))},abrirPacienteSinBusqueda:function(){this.abrirPaciente(!1)},abrirPaciente:function(e){var t=e?this.cadenaBusqueda:"",a=(0,i.MD)({"cadena-busqueda":t});$("#buscarPaciente").modal({},a)},pacienteSeleccionado:function(e){e&&(this.registro.paciente_id="",this.registro.paciente_nombre="",this.registro.paciente_id=e.id,this.registro.paciente_type=e.tipo,this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_fecha_nacimiento=e.fecha_nacimiento,this.registro.paciente_sexo=e.sexo,this.registro.paciente_correo=e.correo,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_direccion=[e.direccion,e.direccion_numeracion].filter(Boolean).join(" "),this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza=e.numero_poliza,"M"===this.registro.paciente_sexo&&(this.registro.embarazada=""),this.cargarDuenoResponsableVista(e.tipo,e),this.cargarRaza(e.tipo,e.id))},cargarRaza:function(e,t){var a=this;"App\\Models\\PacienteAnimal"===e&&axios.get("/api/pacientes/animales/".concat(t)).then((function(e){var t=e.data.data;a.registro.paciente_taxonomia="".concat(t.raza.padre.nombre," - ").concat(t.raza.nombre)})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores("¡Error al buscar raza!",t)}))},cargarDuenoResponsableVista:function(e,t){"App\\Models\\PacienteHumano"!==e&&(this.registro.paciente_dueno_responsable=[t.apellidos,t.nombres].filter(Boolean).join(" "))},cargarDuenoResponsable:function(e,t){this.registro.paciente_dueno_responsable="","App\\Models\\PacienteAnimal"===e&&(this.registro.paciente_dueno_responsable=[t.apellidos_dueno,t.nombres_dueno].filter(Boolean).join(" ")),"App\\Models\\SujetoObjeto"===e&&(this.registro.paciente_dueno_responsable=[t.apellidos_responsable,t.nombres_responsable].filter(Boolean).join(" "))},seleccionarPacienteHumano:function(e){this.paciente_type="humano",this.registro.paciente_id=e.id,this.registro.paciente_type="App\\Models\\PacienteHumano",this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_fecha_nacimiento=e.fecha_nacimiento,this.registro.paciente_sexo=e.sexo,this.registro.paciente_correo=e.correo,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_direccion=[e.direccion,e.direccion_numeracion].filter(Boolean).join(" "),this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza=e.numero_poliza,this.registro.paciente_dueno_responsable="","M"===this.registro.paciente_sexo&&(this.registro.embarazada="")},seleccionarPacienteAnimal:function(e){this.paciente_type="animal",this.registro.paciente_id=e.id,this.registro.paciente_type="App\\Models\\PacienteAnimal",this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_taxonomia="".concat(e.raza.padre.nombre," - ").concat(e.raza.nombre),this.registro.paciente_fecha_nacimiento=e.fecha_nacimiento,this.registro.paciente_sexo=e.sexo,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_correo=e.correo,this.registro.paciente_direccion=e.direccion,this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza="",this.cargarDuenoResponsable(this.registro.paciente_type,e),"M"===this.registro.paciente_sexo&&(this.registro.embarazada="")},seleccionarSujetoObjeto:function(e){this.paciente_type="objeto",this.registro.paciente_id=e.id,this.registro.paciente_type="App\\Models\\SujetoObjeto",this.registro.paciente_nombre=e.descripcion,this.registro.paciente_fecha_nacimiento=null,this.registro.paciente_sexo=null,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.embarazada="",this.registro.paciente_correo=e.correo,this.registro.paciente_direccion=e.direccion,this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza="",this.cargarDuenoResponsable(this.registro.paciente_type,e)},abrirModalCrearPaciente:function(){var e={pacienteType:"",esCrearPaciente:!0,numeroIdentificacion:this.registro.paciente_identificacion};$("#gestionarPacienteModal").modal({backdrop:"static"},e)},abrirModalEditarPaciente:function(){var e={pacienteType:this.obtenerPacienteType(this.registro.paciente_type),esCrearPaciente:!1,numeroIdentificacion:this.registro.paciente_identificacion,pacienteId:this.registro.paciente_id};$("#gestionarPacienteModal").modal({backdrop:"static"},e)},obtenerPacienteType:function(e){var t="";switch(e){case"App\\Models\\PacienteHumano":t="humano";break;case"App\\Models\\PacienteAnimal":t="animal";break;case"App\\Models\\SujetoObjeto":t="objeto"}return t},pacienteHumanoGuardado:function(e){var t=e.esCreado?"creado":"actualizado";this.mostrarExito("¡Éxito!",'Paciente "'.concat(e.nombre_paciente,'" ').concat(t," y seleccionado.")),this.seleccionarPacienteHumano(e)},pacienteAnimalGuardado:function(e){var t=e.esCreado?"creado":"actualizado";this.mostrarExito("¡Éxito!",'Paciente "'.concat(e.nombre_paciente,'" ').concat(t," y seleccionado.")),this.seleccionarPacienteAnimal(e)},sujetoObjetoGuardado:function(e){var t=e.esCreado?"creado":"actualizado";this.mostrarExito("¡Éxito!",'Objeto "'.concat(e.descripcion,'" ').concat(t," y seleccionado.")),this.seleccionarSujetoObjeto(e)},autocompletarMedico:function(){var e=this;this.ocultarMensajes(),this.registro.medico_id="",this.registro.medico_nombre&&(this.registro.medico_nombre=this.registro.medico_nombre.trim(),this.cargandoMedico=!0,axios.get("/api/medicos?cadenaBusqueda="+this.registro.medico_nombre).then((function(t){var a=t.data.data;if(0===a.length)return e.abrirModalGestionarMedico(),e.cadenaBusqueda=e.registro.medico_nombre,void(e.registro.medico_nombre="");if(a.length>1){var r={cadenaBusqueda:e.registro.medico_nombre};return $("#modalBuscarMedico").modal({},r),void(e.registro.medico_nombre="")}e.registro.medico_id=a[0].id,e.registro.medico_nombre=a[0].nombre_completo,e.mostrarExito("Médico seleccionado")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar médico",a)})).then((function(){return e.cargandoMedico=!1})))},verificarMedico:function(){""===this.registro.medico_nombre&&(this.registro.medico_id="")},abrirModalGestionarMedico:function(){this.cargandoMedico||$("#modalGestionarMedico").modal({backdrop:"static"})},buscarMedico:function(){$("#modalBuscarMedico").modal("show")},medicoCreado:function(e){this.registro.medico_id=e.id,this.registro.medico_nombre=e.nombre_completo,this.mostrarExito('Médico "'.concat(e.nombre_completo,'" creado y seleccionado'))},medicoSeleccionado:function(e){this.registro.medico_id=e.id,this.registro.medico_nombre=e.nombre_completo,this.mostrarExito("Médico seleccionado")},cargarSubempresa:function(e){if(this.errorEnTarifas=!1,!this.empresa)return this.examenes=[],this.subempresas=[],void(this.registro.subempresa_id="");e&&(this.cargandoExamenes=!0),this.ocultarMensajes(),this.porcentaje_descuento=0,this.cambio_precio=this.empresa.cambio_precio,this.permitir_descuento=this.empresa.permitir_descuento,this.subempresas=this.empresa.subempresas;var t=this.obtenerSubempresaMatriz();t?this.registro.subempresa_id=t.id:this.mostrarAdvertencia("¡Advertencia!","No existe una categoría predeterminada para este cliente."),this.cargarExamenes(!1,!0)},obtenerEmpresa:function(e){return this.empresas.find((function(t){return e==t.id}))},obtenerSubempresaMatriz:function(){return this.empresa.subempresas.find((function(e){return e.predeterminada}))},calcularPorcentajeDescuento:function(){this.registro.valor_descuento>0&&(this.porcentaje_descuento=100*this.registro.valor_descuento/(+this.registro.valor_descuento+ +this.registro.valor_total-+this.registro.valor_recargo),this.porcentaje_descuento=this.porcentaje_descuento.toFixed(2))},calcularPorcentajeRecargo:function(){if(this.registro.valor_recargo>0){var e=+this.registro.valor_total-+this.registro.valor_recargo;this.porcentajeRecargo=100*this.registro.valor_recargo/e,this.porcentajeRecargo=this.porcentajeRecargo.toFixed(2)}},validarValor:function(e){var t=this.detallesCotizaciones.indexOf(e);this.detallesCotizaciones[t].valor||(this.detallesCotizaciones[t].valor="0.00"),this.detallesCotizaciones[t].valor<0&&(this.detallesCotizaciones[t].valor="0.00"),this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null),this.porcentaje_descuento="0.00",this.registro.valor_descuento="0.00"},valorDetalleKeyTab:function(e){var t=this.detallesCotizaciones.indexOf(e);this.detallesCotizaciones[t].valor&&(this.detallesCotizaciones[t].valor=Number(this.detallesCotizaciones[t].valor).toFixed(2))},porcentajeDescuentoKeyup:function(e){if(null==e||9!==e.keyCode){if(this.porcentaje_descuento<0&&(this.porcentaje_descuento=0),0===Number(this.porcentaje_descuento))return this.porcentaje_descuento=0,void(this.registro.valor_descuento=0);this.registro.valor_descuento=this.valorSubtotal*this.porcentaje_descuento/100,this.registro.valor_descuento=this.registro.valor_descuento.toFixed(2),this.porcentaje_descuento=Number(this.porcentaje_descuento).toFixed(2),this.descuentoPorPorcentaje=!0,this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null)}},valorDescuentoKeyup:function(e){if(null==e||9!==e.keyCode){if(0===this.registro.valor_descuento)return this.porcentaje_descuento=0,void(this.registro.valor_descuento=0);this.registro.valor_descuento<0&&(this.registro.valor_descuento=0),Number(this.registro.valor_descuento)>Number(this.valorSubtotal)&&(this.registro.valor_descuento=this.valorSubtotal),this.porcentaje_descuento=100*this.registro.valor_descuento/this.valorSubtotal,this.porcentaje_descuento=this.porcentaje_descuento.toFixed(2),this.descuentoPorPorcentaje=!1,this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null)}},formatearValorDescuento:function(){this.registro.valor_descuento>0&&(this.registro.valor_descuento=Number(this.registro.valor_descuento).toFixed(2))},formatearPorcentajeDescuento:function(){this.porcentaje_descuento&&(this.porcentaje_descuento=Number(this.porcentaje_descuento).toFixed(2))},valorDomicilioKeyup:function(e){null!=e&&9===e.keyCode||this.registro.valor_domicilio<0&&(this.registro.valor_domicilio=0)},formatearValorDomicilio:function(){this.registro.valor_domicilio>0&&(this.registro.valor_domicilio=Number(this.registro.valor_domicilio).toFixed(2))},valorRecargoKeyup:function(e){if(null==e||9!==e.keyCode){if(0===this.registro.valor_recargo)return this.porcentajeRecargo=0,void(this.registro.valor_recargo=0);this.registro.valor_recargo<0&&(this.registro.valor_recargo=0),0!==Number(this.valorSubtotal)?(this.porcentajeRecargo=100*this.registro.valor_recargo/(this.valorSubtotal-this.registro.valor_descuento),this.porcentajeRecargo=this.porcentajeRecargo.toFixed(2),this.recargoPorPorcentaje=!1):this.porcentajeRecargo=0}},formatearValorRecargo:function(){this.registro.valor_recargo>0&&(this.registro.valor_recargo=Number(this.registro.valor_recargo).toFixed(2))},porcentajeRecargoKeyup:function(e){null!=e&&9===e.keyCode||(this.porcentajeRecargo<0&&(this.porcentajeRecargo=0),this.registro.valor_recargo=(this.valorSubtotal-this.registro.valor_descuento)*this.porcentajeRecargo/100,this.registro.valor_recargo>0?this.registro.valor_recargo=Number(this.registro.valor_recargo).toFixed(2):this.registro.valor_recargo=0,e&&(this.recargoPorPorcentaje=!0))},formatearPorcentajeRecargo:function(){this.porcentajeRecargo>0&&(this.porcentajeRecargo=Number(this.porcentajeRecargo).toFixed(2))},regresar:function(){window.history.back()},focusSiguiente:function(e){$("#".concat(e)).focus()},tituloCondicionesPreanaliticas:function(e){return e.condiciones_preanaliticas?e.condiciones_preanaliticas.replace(/\n/g,"<br />"):""},siguienteExamen:function(e){this.indiceExamen=e+1,$("#examen-"+this.indiceExamen).focus()},anteriorExamen:function(e){this.indiceExamen=e-1,0!==e?$("#examen-"+this.indiceExamen).focus():$("#buscarExamen").focus()},mouseSobreExamen:function(){this.indiceExamen=null}},u="focusSiguiente",m=function(e){$("#".concat(e)).focus()},u in d?Object.defineProperty(d,u,{value:m,enumerable:!0,configurable:!0,writable:!0}):d[u]=m,d),computed:{examenesFiltrados:function(){var e=this;return 0===this.examenes.length?this.examenes:this.examenes.filter((function(t){var a=(0,i.G5)(e.cadenaBusquedaExamenes),r=new RegExp(removeDiacritics(a),"i"),o=r.test(t.examen.codigo+" ")||r.test(t.examen.referencia_auxiliar)||r.test(t.examen.referencia_auxiliar_2)||r.test(removeDiacritics(t.examen.nombre)),s=$.grep(e.detallesCotizaciones,(function(e){return e.examen_id===t.examen.id}));return o&&0===s.length}))},detallesCotizacionesFiltrados:function(){var e=this;return this.detallesCotizaciones.length>0?this.detallesCotizaciones.filter((function(t){var a=(0,i.G5)(e.cadenaBusquedaDetalles),r=new RegExp(removeDiacritics(a),"i");return r.test(t.examen.codigo)||r.test(removeDiacritics(t.examen.nombre))})):this.detallesCotizaciones},valorSubtotal:function(){var e=0;return this.detallesCotizaciones.length>0&&(e=this.detallesCotizaciones.reduce((function(e,t){return+e+ +t.valor}),0)),e.toFixed(2)},valorTotalCalculado:function(){return this.registro.valor_total=this.valorSubtotal-this.registro.valor_descuento+ +this.registro.valor_recargo+ +this.registro.valor_domicilio,this.registro.valor_total=this.registro.valor_total.toFixed(2),this.registro.valor_total},etiquetaDatosPaciente:function(){var e="";switch(this.registro.paciente_type){case"App\\Models\\PacienteHumano":default:e="Datos del Paciente";break;case"App\\Models\\PacienteAnimal":e="Datos del Paciente Animal";break;case"App\\Models\\SujetoObjeto":e="Datos del Objeto"}return e},esHumano:function(){return"App\\Models\\PacienteHumano"===this.registro.paciente_type},esAnimal:function(){return"App\\Models\\PacienteAnimal"===this.registro.paciente_type},esObjeto:function(){return"App\\Models\\SujetoObjeto"===this.registro.paciente_type}}};var f=a(3379),v=a.n(f),h=a(3921),g={insert:"head",singleton:!1};v()(h.Z,g);h.Z.locals;const b=(0,a(1900).Z)(p,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear Cotización":"Editar Cotización No. ")+"\n        "),t("strong",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.id,expression:"id !== '0'"}]},[e._v("\n          "+e._s(e.registro.id)+"\n        ")])]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{id:"0"===e.id?"crearCotizacion":"actualizarCotizacion",type:"submit",disabled:e.errorEnTarifas||e.errorEnCotizacion}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",["0"!==e.id?t("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:!e.permisos.imprimirCotizaciones},on:{click:e.imprimirPdfAlEditar}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Imprimir\n            ")]):e._e()]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("fieldset",{attrs:{disabled:""}},[t("div",{staticClass:"form-group"},["0"===e.id?t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label",class:{obligatorio:"App\\Models\\PacienteAnimal"!==e.registro.paciente_type},attrs:{for:"identificacion"}},[e._v("\n            Identificación paciente")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.paciente_identificacion,expression:"registro.paciente_identificacion"}],staticClass:"form-control input-sm",attrs:{id:"identificacion",type:"text",maxlength:"25",autocomplete:"off",disabled:"0"!==e.id,required:"App\\Models\\PacienteAnimal"!==e.registro.paciente_type},domProps:{value:e.registro.paciente_identificacion},on:{blur:e.autocompletarPaciente,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("crearPaciente"))},input:function(t){t.target.composing||e.$set(e.registro,"paciente_identificacion",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default hidden-md hidden-lg",attrs:{type:"button","data-toggle":"tooltip",title:"Autocompletar",disabled:"0"!==e.id},on:{click:e.autocompletarPaciente}},[t("i",{staticClass:"fas fa-user-check fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{id:"crearPaciente",type:"button",title:"Crear Paciente",disabled:"0"!==e.id},on:{click:e.abrirModalCrearPaciente}},[t("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Editar Paciente",disabled:"0"!==e.id||!e.registro.paciente_id},on:{click:e.abrirModalEditarPaciente}},[t("i",{staticClass:"fas fa-pencil-alt",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar Paciente",disabled:"0"!==e.id},on:{click:e.abrirPacienteSinBusqueda}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]):e._e(),e._v(" "),t("div",{class:"0"===e.id?"col-sm-9":"col-sm-12"},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_type,expression:"registro.paciente_type"}],staticClass:"control-label",attrs:{for:"paciente_nombre"}},[e._v("\n            "+e._s(e.etiquetaDatosPaciente)+"\n          ")]),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoPaciente,expression:"cargandoPaciente"}],staticClass:"fas fa-spinner fa-spin fa-fw",staticStyle:{"margin-top":"36px"},attrs:{"aria-hidden":"true",title:"Obteniendo datos de persona"}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_nombre,expression:"registro.paciente_nombre"}],attrs:{id:"paciente_nombre"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.esHumano,expression:"esHumano"}],staticClass:"fas fa-user fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.esAnimal,expression:"esAnimal"}],staticClass:"fas fa-paw fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.esObjeto,expression:"esObjeto"}],staticClass:"fas fa-flask fa-lg"}),e._v(" "),t("span",{staticClass:"paciente"},[e._v(e._s(e.registro.paciente_nombre))]),e._v("\n             \n            "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.esAnimal&&e.registro.paciente_taxonomia,expression:"esAnimal && registro.paciente_taxonomia"}],staticClass:"no-salto-linea",attrs:{title:"Raza"}},[t("i",{staticClass:"fas fa-sitemap fa-lg"}),e._v("\n              "+e._s(e.registro.paciente_taxonomia)+"\n               \n            ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.id,expression:"id !== '0'"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"far fa-id-card fa-lg"}),e._v("\n              "+e._s(e.registro.paciente_identificacion)+"\n               \n            ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.esHumano||e.esAnimal,expression:"esHumano || esAnimal"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-birthday-cake fa-lg"}),e._v("\n              "+e._s(e.registro.paciente_fecha_nacimiento)+" ("+e._s(e.obtenerEdad(e.registro.paciente_fecha_nacimiento))+")\n               \n            ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_sexo,expression:"registro.paciente_sexo"}],staticClass:"no-salto-linea"},[t("i",{directives:[{name:"show",rawName:"v-show",value:"M"===e.registro.paciente_sexo,expression:"registro.paciente_sexo === 'M'"}],staticClass:"fas fa-mars fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:"F"===e.registro.paciente_sexo,expression:"registro.paciente_sexo === 'F'"}],staticClass:"fas fa-venus fa-lg"}),e._v("\n              "+e._s("M"===e.registro.paciente_sexo?"Masculino":"Femenino")+"\n               \n            ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_numero_poliza,expression:"registro.paciente_numero_poliza"}],staticClass:"no-salto-linea",attrs:{title:"Número de poliza"}},[t("i",{staticClass:"fas fa-user-shield fa-lg",attrs:{title:"Número de poliza"}}),e._v("\n              "+e._s(e.registro.paciente_numero_poliza)+"\n               \n            ")]),e._v(" "),(e.esAnimal||e.esObjeto)&&e.registro.paciente_dueno_responsable?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-user-tie fa-lg",attrs:{title:"Dueño"}}),e._v("\n              "+e._s(e.registro.paciente_dueno_responsable)+"\n               \n            ")]):e._e(),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_telefono,expression:"registro.paciente_telefono"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-mobile-alt fa-lg"}),e._v("\n              "+e._s(e.registro.paciente_telefono)+"\n               \n            ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_correo,expression:"registro.paciente_correo"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-envelope fa-lg"}),e._v("\n              "+e._s(e.registro.paciente_correo)+"\n               \n            ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_direccion,expression:"registro.paciente_direccion"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-map-marked-alt fa-lg"}),e._v("\n              "+e._s(e.registro.paciente_direccion)+"\n               \n            ")])])])]),e._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"empresa"}},[e._v("Cliente")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.empresa,expression:"empresa"}],staticClass:"form-control input-sm",attrs:{id:"empresa",name:"empresa",disabled:!e.permisos.cambiarEmpresas,required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.empresa=t.target.multiple?a:a[0]},function(t){return e.cargarSubempresa(!0)}]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.empresas,(function(a){return t("option",{domProps:{value:a}},[e._v("\n              "+e._s(a.nombre)+"\n              "),"N"===a.estado?t("div",[e._v("\n                (Inactiva)\n              ")]):e._e()])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.subempresa_id,expression:"registro.subempresa_id"}],staticClass:"form-control input-sm",attrs:{id:"subempresa_id",name:"subempresa_id",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"subempresa_id",t.target.multiple?a:a[0])},function(t){return e.cargarExamenes(!0,!0)}]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n              "+e._s(a.nombre)+"\n            ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label",attrs:{for:"medico_nombre"}},[e._v("\n            Médico\n            "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoMedico,expression:"cargandoMedico"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true",title:"Cargando médico"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.registro.medico_id,expression:"registro.medico_id"}],staticClass:"fas fa-check-circle",attrs:{"data-toggle":"tooltip",title:"Médico seleccionado"}})]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.medico_nombre,expression:"registro.medico_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"medico_nombre",maxlength:"15",placeholder:"Buscar médico",autocomplete:"off"},domProps:{value:e.registro.medico_nombre},on:{blur:e.autocompletarMedico,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("crearMedico"))},input:function(t){t.target.composing||e.$set(e.registro,"medico_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{id:"crearMedico",type:"button",title:"Crear"},on:{click:e.abrirModalGestionarMedico}},[t("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Búsqueda"},on:{click:e.buscarMedico}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fecha"}},[e._v("Fecha cotización")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha,expression:"registro.fecha"}],staticClass:"form-control input-sm cursor-menu",attrs:{id:"fecha","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es",placeholder:"aaaa-mm-dd",required:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"fecha"}},[e._v("Fecha de turno")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha_turno,expression:"registro.fecha_turno"}],staticClass:"form-control input-sm cursor-menu",attrs:{id:"fecha_turno","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-start-date":"0d",placeholder:"aaaa-mm-dd"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label",attrs:{for:"plan_salud_id"}},[e._v("Plan salud")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.plan_salud_id,expression:"registro.plan_salud_id"}],staticClass:"form-control input-sm",attrs:{id:"plan_salud_id",name:"plan_salud_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"plan_salud_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.planesSalud,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n            ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("label",{staticClass:"control-label",attrs:{for:"comentario"}},[e._v("Comentario")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.comentario,expression:"registro.comentario"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",id:"comentario",name:"comentario"},domProps:{value:e.registro.comentario},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"comentario",t.target.value)}}})])])]),e._v(" "),t("fieldset",{staticStyle:{"margin-top":"10px"},attrs:{disabled:""}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.errorEnTarifas,expression:"!errorEnTarifas"}],staticClass:"row"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e.cargandoExamenes?e._e():t("div",{staticClass:"col-md-4"},[t("div",{staticStyle:{height:"340px",overflow:"auto","margin-bottom":"12px"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("td",{staticClass:"text-left sticky-top",staticStyle:{"padding-left":"0"},attrs:{colspan:"2"}},[t("div",{staticClass:"col-xs-6",staticStyle:{"padding-left":"0"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusquedaExamenes,expression:"cadenaBusquedaExamenes"}],ref:"buscarExamen",staticClass:"form-control input-sm",attrs:{type:"text",id:"buscarExamen",placeholder:"Buscar examen",autocomplete:"off"},domProps:{value:e.cadenaBusquedaExamenes},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.siguienteExamen(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.autocompletarExamen.apply(null,arguments))}],input:function(t){t.target.composing||(e.cadenaBusquedaExamenes=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-xs-6 pull-right",staticStyle:{"padding-right":"0"}},[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"perfiles",tabindex:-1,disabled:0===this.grupos.length,placeholder:"Perfil",options:e.grupos,label:"nombre",clearable:!1,reduce:function(e){return e.id},loading:e.cargandoPerfiles},on:{input:e.cargarExamenesPorGrupo},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}],null,!1,2737643764),model:{value:e.grupoId,callback:function(t){e.grupoId=t},expression:"grupoId"}})],1)])])]),e._v(" "),t("tbody",[e._l(e.examenesFiltrados,(function(a,r){return[t("tr",{class:{"hover-examen":r===e.indiceExamen},on:{mouseover:e.mouseSobreExamen}},[t("td",{staticClass:"col-xs-11 col-sm-11 text-left cortar-texto"},[t("div",{attrs:{title:a.examen.nombre}},[e._v("\n                      "+e._s(a.examen.codigo)+" - "+e._s(a.examen.nombre)+"\n                    ")])]),e._v(" "),t("td",{staticClass:"col-sm-1 text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{id:"examen-"+r,type:"button",title:"Agregar examen"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.anteriorExamen(r))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.siguienteExamen(r))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.stopPropagation()}],click:function(t){return e.agregarExamen(a)}}},[t("i",{staticClass:"fas fa-plus"})])])])]}))],2)])])]),e._v(" "),e.cargandoExamenes?e._e():t("div",{staticClass:"col-md-6"},[t("div",{staticStyle:{height:"340px",overflow:"auto"},attrs:{id:"examenes-seleccioandos"}},[0===e.detallesCotizaciones.length?t("div",{staticClass:"text-center",staticStyle:{"padding-top":"30px"}},[e._v("\n              No existen exámenes seleccionados\n            ")]):e._e(),e._v(" "),t("table",{directives:[{name:"show",rawName:"v-show",value:e.detallesCotizaciones.length>0,expression:"detallesCotizaciones.length > 0"}],staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("td",{staticClass:"sticky-top",staticStyle:{"padding-left":"0"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusquedaDetalles,expression:"cadenaBusquedaDetalles"}],staticClass:"form-control input-sm col-sm-3",attrs:{type:"text",placeholder:"Buscar examen seleccionado"},domProps:{value:e.cadenaBusquedaDetalles},on:{input:function(t){t.target.composing||(e.cadenaBusquedaDetalles=t.target.value)}}})]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center sticky-top"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center sticky-top"},[t("button",{directives:[{name:"show",rawName:"v-show",value:e.detallesCotizaciones.length>0,expression:"detallesCotizaciones.length > 0"}],staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Eliminar todos los exámenes"},on:{click:e.eliminarDetalles}},[t("i",{staticClass:"fas fa-trash",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("tbody",[0===e.detallesCotizaciones.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"4"}},[e._v("No existen exámenes seleccionados")])]):e._e(),e._v(" "),e._l(e.detallesCotizacionesFiltrados,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v("\n                  "+e._s(a.examen.codigo)+" - "+e._s(a.examen.nombre)+"\n                  "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.examen.condiciones_preanaliticas,expression:"detalle.examen.condiciones_preanaliticas"}],staticClass:"fas fa-exclamation-circle fa-sm",staticStyle:{"padding-left":"4px"},attrs:{"data-toggle":"popover","data-html":"true","data-placement":"top",title:"Condiciones preanalíticas","data-content":e.tituloCondicionesPreanaliticas(a.examen)}})]),e._v(" "),t("td",{staticClass:"text-right centrado-vertical"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.valor,expression:"detalle.valor"}],staticClass:"form-control input-sm currency text-right",attrs:{type:"number",min:"0",step:"0.01",disabled:!e.cambio_precio},domProps:{value:a.valor},on:{keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.valorDetalleKeyTab(a)}],keyup:function(t){return e.validarValor(a)},input:function(t){t.target.composing||e.$set(a,"valor",t.target.value)}}})]),e._v(" "),t("td",{staticClass:"text-center centrado-vertical"},[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Eliminar examen"},on:{click:function(t){return e.eliminarDetalle(a)}}},[t("i",{staticClass:"fas fa-trash",attrs:{"aria-hidden":"true"}})])])])])}))],2)])])]),e._v(" "),e.cargandoExamenes?e._e():t("div",{staticClass:"col-md-2"},[t("div",{staticClass:"form-group"},[e._m(2),e._v(" "),e._m(3),e._v(" "),t("div",{staticClass:"col-md-6 text-right"},[t("div",{staticClass:"text-right valor",attrs:{id:"subtotal"}},[e._v("\n                "+e._s(e._f("moneda")(e.valorSubtotal))+"\n              ")])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(4),e._v(" "),t("div",{staticClass:"col-md-6 text-right"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.porcentaje_descuento,expression:"porcentaje_descuento",modifiers:{number:!0}}],staticClass:"form-control input-sm text-right",attrs:{id:"porcentaje_descuento",type:"number",step:"0.01",min:"0",max:"100",disabled:!e.permitir_descuento||0===e.detallesCotizaciones.length},domProps:{value:e.porcentaje_descuento},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("valor_descuento"))},keyup:e.porcentajeDescuentoKeyup,blur:[e.formatearPorcentajeDescuento,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(e.porcentaje_descuento=e._n(t.target.value))}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(5),e._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.valor_descuento,expression:"registro.valor_descuento"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"valor_descuento",type:"number",step:"0.01",min:"0",disabled:!e.permitir_descuento||0===e.detallesCotizaciones.length},domProps:{value:e.registro.valor_descuento},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("porcentaje_recargo"))},keyup:e.valorDescuentoKeyup,blur:e.formatearValorDescuento,input:function(t){t.target.composing||e.$set(e.registro,"valor_descuento",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(6),e._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.porcentajeRecargo,expression:"porcentajeRecargo"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"porcentaje_recargo",type:"number",step:"0.01",min:"0",disabled:!e.permitir_descuento||0===e.detallesCotizaciones.length},domProps:{value:e.porcentajeRecargo},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("valor_recargo"))},keyup:e.porcentajeRecargoKeyup,blur:e.formatearPorcentajeRecargo,input:function(t){t.target.composing||(e.porcentajeRecargo=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(7),e._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.valor_recargo,expression:"registro.valor_recargo"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"valor_recargo",type:"number",step:"0.01",min:"0",disabled:!e.permitir_descuento||0===e.detallesCotizaciones.length},domProps:{value:e.registro.valor_recargo},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("valor_domicilio"))},keyup:e.valorRecargoKeyup,blur:e.formatearValorRecargo,input:function(t){t.target.composing||e.$set(e.registro,"valor_recargo",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(8),e._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.valor_domicilio,expression:"registro.valor_domicilio"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"valor_domicilio",type:"number",step:"0.01",min:"0",disabled:0===e.detallesCotizaciones.length},domProps:{value:e.registro.valor_domicilio},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},keyup:e.valorDomicilioKeyup,blur:e.formatearValorDomicilio,input:function(t){t.target.composing||e.$set(e.registro,"valor_domicilio",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(9),e._v(" "),t("div",{staticClass:"col-md-7"},[t("output",{staticClass:"text-right valor-total",attrs:{id:"valor_total"}},[e._v(e._s(e.$cliente.moneda)+" "+e._s(e.valorTotalCalculado)+"\n              ")])])])]),e._v(" "),e.cargandoExamenes?t("div",{staticClass:"col-md-12",attrs:{id:"cargandoExamenes"}},[e._m(10)]):e._e()])]),e._v(" "),t("hr",{directives:[{name:"show",rawName:"v-show",value:e.examenes.length>0||e.cargandoExamenes,expression:"examenes.length > 0 || cargandoExamenes"}]})],1),e._v(" "),t("gestionar-paciente-modal",{attrs:{"id-sistema-externo":e.$usuario.sistemaHisId},on:{"paciente-humano-guardado":e.pacienteHumanoGuardado,"paciente-animal-guardado":e.pacienteAnimalGuardado,"sujeto-objeto-guardado":e.sujetoObjetoGuardado}}),e._v(" "),t("buscar-paciente-modal",{on:{"paciente-seleccionado":e.pacienteSeleccionado}}),e._v(" "),t("gestionar-medico-modal",{on:{"medico-creado":e.medicoCreado}}),e._v(" "),t("buscar-medico-modal",{on:{"medico-seleccionado":e.medicoSeleccionado}}),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-md-10"},[e("legend",{staticClass:"obligatorio"},[this._v("Exámenes")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 hidden-xs hidden-sm"},[e("legend",{staticClass:"legend"},[this._v("Totales")])])},function(){var e=this._self._c;return e("div",{staticClass:"hidden-md hidden-lg",staticStyle:{"padding-left":"10px","margin-top":"15px"}},[e("legend",{staticClass:"legend"},[this._v("\n                Totales\n              ")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"control-label text-left",attrs:{for:"subtotal"}},[this._v("Subtotal")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"control-label text-left no-salto-linea",attrs:{for:"porcentaje_descuento"}},[this._v("% Descuento")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"control-label text-left",attrs:{for:"valor_descuento"}},[this._v("Descuento")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"control-label text-left no-salto-linea",attrs:{for:"porcentaje_recargo"}},[this._v("% Recargo")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"control-label text-left",attrs:{for:"valor_recargo"}},[this._v("Recargo")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"control-label text-left",attrs:{for:"valor_domicilio"}},[this._v("Domicilio")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-5"},[e("label",{staticClass:"control-label text-left no-salto-linea",attrs:{for:"valor_total"}},[this._v("Valor Total")])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-body text-center"},[e("h4",[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n            ")])])}],!1,null,"57b5155c",null).exports},2851:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{cargando:!1,count:0,filtros:{cadenaBusqueda:"",page:1},cotizaciones:[],permisos:""}},created:function(){},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.permisos=this.datos.permisos,this.datos.cadenaBusqueda&&(this.filtros.cadenaBusqueda=this.datos.cadenaBusqueda),this.cargarCotizaciones(1)},limpiarFormulario:function(){this.filtros.cadenaBusqueda=""},cargarCotizaciones:function(e){var t=this;this.cargando=!0,this.filtros.page=e,axios.get("/api/cotizaciones",{params:this.filtros}).then((function(e){var a=e.data;t.count=a.last_page,t.cotizaciones=a.data,t.cargando=!1})).catch((function(e){t.cargando=!1;var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al cargar cotizaciones!",a)}))},editarCotizacion:function(e){window.location.href="/cotizaciones/"+e.id+"/edit"},crearOrden:function(e){window.location.href="/ordenes/create?cotizacionId="+e.id},eliminarCotizacion:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/cotizaciones/".concat(e.id)).then((function(){t.cargarDatos(),t.mostrarExito('¡Cotización "'.concat(e.id,'" eliminada exitosamente!'))})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar cotización!",a)}))},eliminarTodos:function(){var e=this;confirm("¿Está seguro que desea eliminar todas las cotizaciones existentes?")&&axios.get("/api/cotizaciones/deleteAll").then((function(){e.cargarDatos(),e.mostrarExito("¡Se han eliminado todas las cotizaciones exitosamente!")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al eliminar todas las cotizaciones!",a)}))},buscarCotizaciones:function(){this.cargarCotizaciones(1)},imprimirPdf:function(e){window.open("/cotizaciones/"+e+"/pdf","_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")}},computed:{}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Cotizaciones\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarCotizaciones.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarCotizaciones}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[t("a",{class:"btn btn-primary"+(e.permisos.crearCotizaciones?"":" disabled"),attrs:{href:"/cotizaciones/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n              ")])])]),e._v(" "),t("li",[t("a",{class:"btn btn-default"+(e.permisos.eliminarCotizaciones?"":" disabled"),on:{click:e.eliminarTodos}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar todo\n            ")])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.cotizaciones.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.cotizaciones,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.id))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(e._f("fecha")(a.fecha,"YYYY-MM-DD")))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(a.fecha_turno))]),e._v(" "),t("td",{staticClass:"text-left"},[t("div",[t("small",[e._v("\n                  "+e._s(a.paciente.numero_identificacion)+"\n                ")])]),e._v("\n              "+e._s(a.paciente.nombre_paciente)+"\n            ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.$cliente.moneda)+e._s(a.valor_total.toFixed(2))+"\n            ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Editar",disabled:!e.permisos.editarCotizaciones},on:{click:function(t){return e.editarCotizacion(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Ir a Crear orden",disabled:!e.permisos.crearOrdenes},on:{click:function(t){return e.crearOrden(a)}}},[t("i",{staticClass:"fas fa-file-medical-alt fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Imprimir Cotización",disabled:!e.permisos.imprimirCotizaciones},on:{click:function(t){return e.imprimirPdf(a.id)}}},[t("i",{staticClass:"fas fa-print fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button",title:"Eliminar",disabled:!e.permisos.eliminarCotizaciones},on:{click:function(t){return e.eliminarCotizacion(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})])])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.cotizaciones.length,tipo:"cotizaciones"}}),e._v(" "),!e.cargando&&e.cotizaciones.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.count))]),e._v(" "),e.count>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.count,"container-class":"pagination","click-handler":e.cargarCotizaciones,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.filtros.page,callback:function(t){e.$set(e.filtros,"page",t)},expression:"filtros.page"}}):e._e()],1):e._e()],1)],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha Turno")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"})])])}],!1,null,null,null).exports},5630:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(6663);const o={mixins:[r.tA.reactiveProp],extends:r.x1,data:function(){return{options:{legend:{display:!1},maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}},mounted:function(){this.renderChart(this.chartData,this.options)}};var i=a(1900);const s=(0,i.Z)(o,undefined,undefined,!1,null,null,null).exports;var n=a(4590);const c={components:{GraficoPagos:s},data:function(){return{SISTEMAS_EXTERNOS:n.Q0,cargando:!1,datosGraficoPagos:{},error:!1,facturas:[],pagina:1,numeroPaginas:1,opciones:{legend:{display:!1},layout:{padding:{left:30}},maintainAspectRatio:!1}}},mounted:function(){this.cargarFacturas()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cambiarPaginaAntiguos:function(){this.pagina!==this.numeroPaginas&&(this.pagina++,this.cargarFacturas())},cambiarPaginaNuevos:function(){1!==this.pagina&&(this.pagina--,this.cargarFacturas())},cargarFacturas:function(){var e=this;this.cargando=!0,this.error=!1,axios.get("/api/pagos",{params:{pagina:this.pagina}}).then((function(t){var a=t.data;e.facturas=a.data,e.numeroPaginas=a.meta.last_page,e.totalFacturas=a.meta.total,e.desde=a.meta.from,e.hasta=a.meta.to,e.prepararDatosGraficoPagos()})).catch((function(t){e.error=!0})).then((function(t){e.cargando=!1}))},prepararDatosGraficoPagos:function(){var e=this.facturas.map((function(e){return e.fecha_emision})).reverse(),t=this.facturas.map((function(e){return e.totales.importe_total})).reverse();this.datosGraficoPagos={labels:e,datasets:[{label:"Valor total",data:t,backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]}}}};const l=(0,i.Z)(c,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),e.facturas.length>0?t("div",{staticClass:"well well-sm",staticStyle:{"text-align":"right"}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n      Registros: "+e._s(e.desde)+" - "+e._s(e.hasta)+" / "+e._s(e.totalFacturas)+"\n    ")]),e._v(" "),t("div",{staticClass:"btn-group text-right"},[e.pagina>1?t("a",{staticClass:"btn btn-default",on:{click:e.cambiarPaginaNuevos}},[t("i",{staticClass:"fas fa-angle-double-left",attrs:{"aria-hidden":"true"}}),e._v("\n        Nuevos\n      ")]):e._e(),e._v(" "),e.pagina<e.numeroPaginas?t("a",{staticClass:"btn btn-default",on:{click:e.cambiarPaginaAntiguos}},[e._v("\n        Antiguos\n        "),t("i",{staticClass:"fas fa-angle-double-right",attrs:{"aria-hidden":"true"}})]):e._e()])]):e._e(),e._v(" "),e.error||e.cargando||0!==e.facturas.length?e._e():t("div",{staticClass:"alert alert-info"},[e._v("\n    No existen registros de facturación para este laboratorio.\n  ")]),e._v(" "),e.cargando?t("div",{staticClass:"cargando"},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Cargando...\n  ")]):e._e(),e._v(" "),e.error?t("div",{staticClass:"alert alert-danger"},[e._v("\n    Error: No es posible realizar la consulta de los registros.\n  ")]):e._e(),e._v(" "),!e.cargando&&e.facturas.length>1?t("div",{staticStyle:{margin:"auto",width:"100%"}},[t("grafico-pagos",{attrs:{"chart-data":e.datosGraficoPagos,styles:{height:"200px"}}})],1):e._e(),e._v(" "),t("br"),e._v(" "),!e.cargando&&e.facturas.length>0?t("table",{staticClass:"table table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",e._l(e.facturas,(function(a){return t("tr",[t("td",[e._v(e._s(a.numero))]),e._v(" "),t("td",[e._v(e._s(a.fecha_emision))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n        "+e._s(e._f("numero")(a.totales.total_sin_impuestos))+"\n      ")]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n        "+e._s(e._f("numero")(a.totales.impuestos[0].valor))+"\n      ")]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n        "+e._s(e._f("numero")(a.totales.descuento))+"\n      ")]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n        "+e._s(e._f("numero")(a.totales.importe_total))+"\n      ")]),e._v(" "),t("td",{staticClass:"text-center"},[a.proveedor===e.SISTEMAS_EXTERNOS.CASTOR?t("a",{attrs:{href:"/api/facturas/".concat(a.numero,"/pdf?sideralsoft=1&numero=").concat(a.numero,"&claveAcceso=").concat(a.clave_acceso)}},[t("i",{staticClass:"far fa-file-pdf",attrs:{"aria-hidden":"true"}})]):e._e(),e._v(" "),a.proveedor===e.SISTEMAS_EXTERNOS.CONTIFICO&&a.url_ride?t("a",{attrs:{target:"_blank",href:a.url_ride}},[t("i",{staticClass:"far fa-file-pdf",attrs:{"aria-hidden":"true"}})]):e._e()])])})),0)]):e._e(),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-md-1",attrs:{rowspan:"2"}},[e._v("Factura")]),e._v(" "),t("th",{staticClass:"col-md-1",attrs:{rowspan:"2"}},[e._v("Emisión")]),e._v(" "),t("th",{staticClass:"text-center",attrs:{colspan:"4"}},[e._v("Valores")]),e._v(" "),t("th",{staticClass:"col-md-1 text-center",attrs:{rowspan:"2"}},[e._v("Descargar")])]),e._v(" "),t("tr",[t("th",{staticClass:"col-md-1 text-right"},[e._v("Sub total")]),e._v(" "),t("th",{staticClass:"col-md-1 text-right"},[e._v("Impuesto")]),e._v(" "),t("th",{staticClass:"col-md-1 text-right"},[e._v("Descuento")]),e._v(" "),t("th",{staticClass:"col-md-1 text-right"},[e._v("Total")])])])}],!1,null,null,null).exports},8754:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{},data:function(){return{}},props:["suscripcion_cliente","total","mes","anio","servicios_disponibles"],mounted:function(){},methods:{}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 text-right"}),e._v(" "),t("div",{staticClass:"col-md-9"},[t("h2",[e._v("Servicios suscritos: "),t("span",{staticClass:"pago"},[e._v("$ "+e._s(Number.parseFloat(e.total).toFixed(2)))])]),e._v(" "),t("div",{staticClass:"help-block"},[e._v("Resumen de consumo mensual ("+e._s(e.anio)+"-"+e._s(e.mes)+")")])])]),e._v(" "),e._l(e.suscripcion_cliente,(function(a){return t("div",{staticClass:"suscripcion"},[t("div",{staticClass:"form-group row",class:["Plan"===a.tipo?"plan":""]},[t("div",{staticClass:"col-md-3 text-right"},[t("h4",[e._v("\n            "+e._s(a.nombre)+"\n            "),"Inactivo"===a.estado?t("span",{staticClass:"badge badge-secondary"},[e._v("Inactivo")]):e._e()])]),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"fecha-contratacion"},[e._v("\n            Contratado desde "+e._s(a.fecha_inicio)+" hasta\n            "),""!==a.fecha_fin?t("span",[e._v(e._s(a.fecha_fin))]):t("span",[e._v("la actualidad")])]),e._v(" "),e._l(a.consumos,(function(a){return t("div",[t("div",{staticClass:"col-md-10 consumo"},[t("span",{staticClass:"cosumo"},[e._v("Consumo de "+e._s(a.consumo)+" ("+e._s(a.descripcion_metrica)+")")]),e._v(" "),t("span",{staticClass:"precio"},[e._v("a $"+e._s(Number.parseFloat(a.precio).toFixed(4)))])]),e._v(" "),t("div",{staticClass:"col-md-2 text-right pago"},[e._v("\n              $ "+e._s(Number.parseFloat(a.pago).toFixed(4))+"\n            ")])])}))],2)])])})),e._v(" "),e._m(0),e._v(" "),e._l(e.servicios_disponibles,(function(a){return t("div",{},[t("hr"),e._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-md-3 text-right"},[t("h4",[e._v("\n            "+e._s(a.nombre)+"\n          ")])]),e._v(" "),t("div",{staticClass:"col-md-7"},[t("p",[e._v(e._s(a.descripcion))])]),e._v(" "),t("div",{staticClass:"col-md-2 text-center"})])])}))],2)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 text-right"}),e._v(" "),t("div",{staticClass:"col-md-9"},[t("h3",[e._v("Otros servicios disponibles"),t("span",{})])])])}],!1,null,null,null).exports},4709:(e,t,a)=>{"use strict";a.d(t,{Z:()=>x});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={props:{id:{type:String,default:"modalRecibo"},top:{type:Number,default:0},destino:{type:Object,default:function(){return{}}}},data:function(){return{cargandoOrdenes:!1,cargarOrdenesAnteriores:!1,tipoFormasPago:r.xe,ordenes:[],tareas:[],valorTotalDia:null,valorTotalAbono:null,saldo:null,deudaTotal:null,idsOrdenes:[],ordenesAnteriores:!1,registro:{destino_ruta_id:"",fecha:moment().format("YYYY-MM-DD"),numero:"",concepto:"",observacion:"",extras:[],detalles:[],estado:r.T7.GENERADO,tareas:[],ruta_id:""}}},mounted:function(){var e=this;$("#".concat(this.id)).on("shown.bs.modal",(function(t){t.target.id===e.id&&(e.ordenes=[],e.tareas=[],e.idsOrdenes=[],e.cargarTareas())})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&e.limpiar()}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarTareas:function(){var e=this;this.cargandoOrdenes=!0;var t={estadoTarea:r.Qc.PENDIENTE,idOrden:!0,idDestino:this.destino.destino_id};axios.get("/api/destinos/".concat(this.destino.id,"/tareas"),{params:t}).then((function(t){var a=t.data.data;e.tareas=a.tareas,e.idsOrdenes=a.tareas.filter((function(e){return e.orden_id})).map((function(e){return e.orden_id})),e.deudaTotal=a.deudaTotal,e.cargarOrdenes()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar las tareas del destino",a)}))},cargarOrdenes:function(){var e=this;if(_.isEmpty(this.idsOrdenes))return this.destinos=[],this.ordenes=[],this.tareas=[],void(this.cargandoOrdenes=!1);var t={ordenesIds:this.idsOrdenes,incluir:"paciente,subempresa.empresa",adicional:"valorTotalAbonos"};this.cargarOrdenesAnteriores&&(t.destinoId=this.destino.destino_id,t.ordenesIds=[],t.estado="V"),axios.get("/api/ordenes/buscar",{params:t}).then((function(t){var a=t.data.data;e.ordenes=a.map((function(t){return n(n({},t),{},{tarea_id:e.tareas.filter((function(e){return e.orden_id===t.id})).map((function(e){return e.id}))[0],seleccionado:!1})})),e.cargarOrdenesAnteriores||e.calcularValores()})).catch((function(t){e.cargandoOrdenes=!1;var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar órdenes",a)})).then((function(){return e.cargandoOrdenes=!1}))},agregarFormaPago:function(){this.registro.detalles.push({forma_pago:"",valor:""})},eliminarFormaPago:function(e){var t=this.registro.detalles.findIndex((function(t){return t.forma_pago===e.forma_pago}));this.registro.detalles.splice(t,1)},seleccionarOrden:function(e){if(e.seleccionado){var t=this.registro.extras.indexOf(e.id);if(this.registro.extras.splice(t,1),e.tarea_id){var a=this.registro.tareas.findIndex((function(t){return t.orden_id===e.id}));this.registro.tareas.splice(a,1)}}else this.registro.extras.includes(e.id)||(this.registro.extras.push(e.id),e.tarea_id&&this.registro.tareas.push({id:e.tarea_id,orden_id:e.id}));e.seleccionado=!e.seleccionado},guardarRecibo:function(){var e=this;this.alternarBotonesSubmit(),this.registro.destino_ruta_id=this.destino.id,this.registro.ruta_id=this.destino.ruta_id,axios.post("/api/recibos",this.registro).then((function(){e.$emit("destinos-ordenes-seleccionados","Registro actualizado"),$("#".concat(e.id)).modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar cumplimiento de ruta de ordenes",a)})).then((function(){return e.alternarBotonesSubmit()}))},agregarOrdenesAnteriores:function(e){e.target.checked?(this.cargarOrdenesAnteriores=!0,this.ordenesAnteriores=!0):(this.cargarOrdenesAnteriores=!1,this.ordenesAnteriores=!1),this.registro.extras=[],this.registro.tareas=[],this.cargarOrdenes()},calcularValores:function(){this.valorTotalAbono=this.ordenes.reduce((function(e,t){return e+parseFloat(t.valor_total_abonos)}),0),this.valorTotalDia=this.ordenes.reduce((function(e,t){return e+parseFloat(t.valor_total)}),0),this.saldo=this.deudaTotal-this.valorTotalDia},limpiar:function(){this.registro.destino_ruta_id="",this.registro.numero="",this.registro.concepto="",this.registro.observacion="",this.registro.extras=[],this.registro.detalles=[],this.registro.tareas=[],this.ordenesAnteriores=!1,this.cargarOrdenesAnteriores=!1,this.ordenes=[],this.tareas=[],this.valorTotalDia=null,this.valorTotalAbono=null,this.deudaTotal=null,this.saldo=null}},computed:{estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""},tipoFormaPagoFiltradas:function(){var e=this;return function(t){var a=_.map(e.registro.detalles,"forma_pago").filter((function(e){return e!==t}));return Object.entries(e.tipoFormasPago).map((function(e){var t=o(e,2);t[0];return t[1]})).filter((function(e){return!a.includes(e)}))}}}};var d=a(1900);const u=(0,d.Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade modal-nivel-multiple",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardarRecibo.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Recibo")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 col-md-3"},[t("h4",[t("span",{staticClass:"label",class:{"label-danger":e.valorTotalDia>0,"label-default":0===e.valorTotalDia}},[e._v("\n                  Deuda total del día: "+e._s(e.$cliente.moneda)+e._s(e._f("numero")(e.valorTotalDia))+"\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-6 col-md-3"},[t("h4",[t("span",{staticClass:"label",class:{"label-danger":e.valorTotalDia>0,"label-default":0===e.valorTotalDia}},[e._v("\n                  Deuda de días anteriores: "+e._s(e.$cliente.moneda)+e._s(e._f("numero")(e.saldo))+"\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-6 col-md-3"},[t("h4",[t("span",{staticClass:"label",class:{"label-danger":e.valorTotalDia>0,"label-default":0===e.valorTotalDia}},[e._v("\n                  Deuda total: "+e._s(e.$cliente.moneda)+e._s(e._f("numero")(e.deudaTotal))+"\n                ")])])])])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"numero"}},[e._v("Número")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.numero,expression:"registro.numero"}],staticClass:"form-control input-sm",attrs:{id:"numero",name:"numero",type:"text",maxlength:"",required:""},domProps:{value:e.registro.numero},on:{input:function(t){t.target.composing||e.$set(e.registro,"numero",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-10 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"concepto"}},[e._v("Concepto")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.concepto,expression:"registro.concepto"}],staticClass:"form-control input-sm",attrs:{id:"concepto",name:"concepto",type:"text",maxlength:"",required:""},domProps:{value:e.registro.concepto},on:{input:function(t){t.target.composing||e.$set(e.registro,"concepto",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"observacion"}},[e._v("Observación")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.observacion,expression:"registro.observacion"}],staticClass:"form-control input-sm input-sm",attrs:{name:"observacion",rows:"1",autocomplete:"off"},domProps:{value:e.registro.observacion},on:{input:function(t){t.target.composing||e.$set(e.registro,"observacion",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("h4",{staticClass:"page-header",staticStyle:{margin:"6px 18px"}},[e._v("\n              Agregar forma de pago\n              "),t("a",{staticClass:"btn btn-xs btn-primary",on:{click:e.agregarFormaPago}},[t("i",{staticClass:"fas fa-plus fa-fw"})])])]),e._v(" "),0===e.registro.detalles.length?t("div",{staticClass:"text-center text-muted"},[e._v("\n            Agregue formas de pago\n          ")]):e._e(),e._v(" "),e.registro.detalles.length>0?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("table",{staticClass:"table table-condensed"},[e._m(1),e._v(" "),t("tbody",e._l(e.registro.detalles,(function(a){return t("tr",[t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:a.forma_pago,expression:"formaPago.forma_pago"}],staticClass:"form-control input-sm",attrs:{id:"forma_pago",name:"forma_pago",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(a,"forma_pago",t.target.multiple?r:r[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.tipoFormaPagoFiltradas(a.forma_pago),(function(a){return t("option",{domProps:{value:a}},[e._v(e._s(e._f("formaPago")(a))+"\n                      ")])}))],2)]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.valor,expression:"formaPago.valor"}],staticClass:"form-control input-sm",attrs:{id:"valor",name:"valor",type:"number",step:"0.01",min:"0.01",required:""},domProps:{value:a.valor},on:{input:function(t){t.target.composing||e.$set(a,"valor",t.target.value)}}})]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-danger",attrs:{type:"button",title:"Eliminar forma de pago"},on:{click:function(t){return e.eliminarFormaPago(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})])])])})),0)])])]):e._e(),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-12"},[t("legend",{staticClass:"legend"},[e._v("\n                Órdenes\n                "),t("span",{staticClass:"pull-right puntero"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ordenesAnteriores,expression:"ordenesAnteriores"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.ordenesAnteriores)?e._i(e.ordenesAnteriores,null)>-1:e.ordenesAnteriores},on:{click:e.agregarOrdenesAnteriores,change:function(t){var a=e.ordenesAnteriores,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.ordenesAnteriores=a.concat([null])):i>-1&&(e.ordenesAnteriores=a.slice(0,i).concat(a.slice(i+1)))}else e.ordenesAnteriores=o}}}),e._v(" "),t("span",{staticStyle:{"vertical-align":"middle","font-size":"12px","font-weight":"normal"}},[e._v("Agregar órdenes con\n                      saldo pendiente\n                    ")])])])])])]),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-12"},[!e.cargandoOrdenes&&e.ordenes.length>0?t("div",{staticStyle:{height:"210px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(2),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",{staticClass:"puntero",on:{click:function(t){return e.seleccionarOrden(a)}}},[t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.seleccionado,expression:"orden.seleccionado"}],staticClass:"puntero",attrs:{type:"checkbox",title:"Seleccionar orden"},domProps:{checked:Array.isArray(a.seleccionado)?e._i(a.seleccionado,null)>-1:a.seleccionado},on:{change:function(t){var r=a.seleccionado,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"seleccionado",r.concat([null])):s>-1&&e.$set(a,"seleccionado",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"seleccionado",i)}}})]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_orden,"YYYY-MM-DD HH:mm"))}}),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.paciente.nombre_paciente)+"\n                        "),e.idsOrdenes.includes(a.id)&&e.cargarOrdenesAnteriores?t("span",{staticClass:"label label-danger"},[e._v("En ruta\n                        ")]):e._e()]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(a.valor_total.toFixed(2)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(a.valor_total_abonos.toFixed(2)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n                        "+e._s((a.valor_total.toFixed(2)-a.valor_total_abonos.toFixed(2)).toFixed(2))+"\n                      ")])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoOrdenes,cantidad:e.ordenes.length,alto:"210px",tipo:"órdenes"}})],1)])],1),e._v(" "),e._m(3)])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",staticStyle:{"margin-left":"10px"},attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Forma de pago")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1"})])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th"),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Abono")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Saldo")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Guardar")])])}],!1,null,null,null).exports;var m=a(6486),p=a.n(m);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g={props:{id:{type:String,default:"modalTareas"},top:{type:Number,default:0},destino:{type:Object,default:function(){return{}}}},data:function(){return{cargandoTareas:!1,tareas:[],destinosTareas:[]}},mounted:function(){var e=this;$("#".concat(this.id)).on("shown.bs.modal",(function(t){t.target.id===e.id&&(e.tareas=[],e.cargarTareas())})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.tareas=[])}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarTareas:function(){var e=this;this.cargandoTareas=!0,axios.get("/api/destinos/".concat(this.destino.id,"/tareas")).then((function(t){var a=t.data.data;e.tareas=a.tareas.map((function(e){return v(v({},e),{},{habilitado:!0,noHabilitado:!0,editar:!1,habilitarCampo:[r.Qc.NO_CUMPLIDO,r.Qc.CUMPLIDO].includes(e.estado)})})),e.cargarDestinoTareas()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar las tareas del destino",a)})).then((function(){return e.cargandoTareas=!1}))},cargarDestinoTareas:function(){var e=this;axios.get("/api/destinos-tareas",{params:{excluirDestinoTipo:!0}}).then((function(t){var a=t.data.data;e.destinosTareas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar las tareas",a)})).then((function(){return e.cargandoDestinosTareas=!1}))},actualizarTarea:function(){var e=this;this.alternarBotonesSubmit(),axios.patch("/api/destinos/".concat(this.destino.id,"/tareas"),{tareas:this.tareas}).then((function(){e.$emit("destinos-tareas-seleccionados","Registro actualizado"),$("#".concat(e.id)).modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar cumplimiento de ruta de tareas",a)})).then((function(){return e.alternarBotonesSubmit()}))},cumplirTarea:function(e){e.habilitado=!1,e.noHabilitado=!0,e.estado=r.Qc.CUMPLIDO},noCumplirTarea:function(e){e.habilitado=!0,e.noHabilitado=!1,e.estado=r.Qc.NO_CUMPLIDO},agregarTarea:function(){this.tareas.push({destino_ruta_id:this.destino.id,destino_tarea_id:"",estado:r.Qc.PENDIENTE,habilitado:!0,noHabilitado:!0,habilitarCampo:!1,editar:!0,destino_tarea:[],observacion_mensajero:"",id:""})},eliminarDestinoTarea:function(e){var t=this.tareas.findIndex((function(t){return t.destino_tarea_id===e.destino_tarea_id}));this.tareas.splice(t,1)}},computed:{estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""},tareasFiltradas:function(){var e=this;return function(t){var a=p().map(e.tareas,"destino_tarea_id").filter((function(e){return e!==t}));return e.destinosTareas.filter((function(e){return!a.includes(e.id)}))}}}};const b={props:["datos"],components:{ReciboModal:u,TareasModal:(0,d.Z)(g,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade modal-nivel-multiple",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("form",{on:{submit:function(t){return t.preventDefault(),e.actualizarTarea.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[!e.cargandoTareas&&e.tareas.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-3 text-left"},[e._v("Tarea")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-left"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-left"},[e._v("Observación")]),e._v(" "),t("th",{staticClass:"col-sm-3"},[e._v("Observación mensajero")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-right"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",title:"Agregar tarea"},on:{click:function(t){return e.agregarTarea()}}},[t("i",{staticClass:"fas fa-plus fa-fw"})])])])]),e._v(" "),t("tbody",e._l(e.tareas,(function(a){return t("tr",[a.editar?[t("td",{staticClass:"text-left"},[t("select",{directives:[{name:"model",rawName:"v-model",value:a.destino_tarea_id,expression:"tarea.destino_tarea_id"}],staticClass:"form-control input-sm",attrs:{required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(a,"destino_tarea_id",t.target.multiple?r:r[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.tareasFiltradas(a.destino_tarea_id),(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                            "+e._s(a.nombre)+"\n                          ")])}))],2)]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(e._f("estadoDestinoRutaTarea")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-left"}),e._v(" "),t("td",{staticClass:"text-left"},[a.habilitarCampo?t("div",[e._v(e._s(a.observacion_mensajero))]):t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.observacion_mensajero,expression:"tarea.observacion_mensajero"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",name:"observacion_tarea"},domProps:{value:a.observacion_mensajero},on:{input:function(t){t.target.composing||e.$set(a,"observacion_mensajero",t.target.value)}}},[e._v(e._s(a.observacion_mensajero)+"\n                      ")])]),e._v(" "),t("td",{staticClass:"text-right"},[a.habilitarCampo?e._e():t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Tarea cumplida",disabled:!a.habilitado},on:{click:function(t){return e.cumplirTarea(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"})]),e._v(" "),a.habilitarCampo?e._e():t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Tarea no cumplida",disabled:!a.noHabilitado},on:{click:function(t){return e.noCumplirTarea(a)}}},[t("i",{staticClass:"fas fa-times fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-danger",attrs:{type:"button",title:"Eliminar tarea"},on:{click:function(t){return e.eliminarDestinoTarea(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})])])]:[t("td",{staticClass:"text-left"},[e._v(e._s(a.destino_tarea.nombre)+"\n                        "),a.orden?t("strong",[e._v("\n                          "+e._s(a.orden.numero_orden)+"\n                        ")]):e._e()]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(e._f("estadoDestinoRutaTarea")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.observacion_tarea))]),e._v(" "),t("td",{staticClass:"text-left"},[a.habilitarCampo?t("div",[e._v(e._s(a.observacion_mensajero))]):t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.observacion_mensajero,expression:"tarea.observacion_mensajero"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",name:"observacion_tarea"},domProps:{value:a.observacion_mensajero},on:{input:function(t){t.target.composing||e.$set(a,"observacion_mensajero",t.target.value)}}},[e._v(e._s(a.observacion_mensajero)+"\n                      ")])]),e._v(" "),t("td",{staticClass:"text-right"},[a.habilitarCampo?e._e():t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Tarea cumplida",disabled:!a.habilitado},on:{click:function(t){return e.cumplirTarea(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"})]),e._v(" "),a.habilitarCampo?e._e():t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Tarea no cumplida",disabled:!a.noHabilitado},on:{click:function(t){return e.noCumplirTarea(a)}}},[t("i",{staticClass:"fas fa-times fa-fw"})])])]],2)})),0)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoTareas,cantidad:e.tareas.length,alto:"210px",tipo:"tareas"}})],1)])],1),e._v(" "),e._m(1)])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Tareas")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Guardar")])])}],!1,null,null,null).exports,BuscarReciboModal:a(9652).Z},data:function(){return{cargandoDestinosRuta:!1,destinos:[],rutaId:0,destinoSeleccionado:{}}},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.cargarDestinosRuta()},cargarDestinosRuta:function(){var e=this;this.cargandoDestinosRuta=!0,this.destinos=[],axios.get("/api/rutas/cumplimiento/".concat(this.datos.ruta.id,"/edit")).then((function(t){var a=t.data.data;e.destinos=a.destinos,e.datos.ruta.estado=a.estadoRuta.estado,e.cargandoDestinosRuta=!1})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar los destinos de ruta",a),e.cargandoDestinosRuta=!1,e.destinos=[]}))},abrirCrearRecibo:function(e){this.destinoSeleccionado=e,$("#modalRecibo").modal({backdrop:"static"})},destinosOrdenesSeleccionados:function(){this.cargarDatos()},abrirCumplirTarea:function(e){this.destinoSeleccionado=e,$("#modalTareas").modal({backdrop:"static"})},destinosTareasSeleccionados:function(){this.cargarDatos()},abrirVerRecibo:function(e){this.destinoSeleccionado=e,$("#modalBuscarRecibo").modal({backdrop:"static"})},regresar:function(){window.location.href="/rutas"}}};const x=(0,d.Z)(b,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Cumplimiento de ruta No. "+e._s(e.datos.ruta.id)+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Sector")]),e._v(" "),t("output",[e._v(e._s(e.datos.ruta.sector.nombre))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha")]),e._v(" "),t("output",[e._v(e._s(e.datos.ruta.fecha))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Jornada")]),e._v(" "),t("output",[e._v(e._s(e.datos.ruta.jornada.nombre))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Mensajero")]),e._v(" "),t("output",[e._v(e._s(e.datos.ruta.mensajero.usuario.nombre_completo))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("output",[e._v(e._s(e._f("estadoRuta")(e.datos.ruta.estado)))])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("legend",[e._v("\n          Clientes\n        ")]),e._v(" "),!e.cargandoDestinosRuta&&e.destinos.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.destinos,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.direccion))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.telefono))]),e._v(" "),t("td",{staticClass:"text-center"},[a.url_ubicacion?t("a",{attrs:{href:a.url_ubicacion,target:"_blank"}},[e._v("Ver ubicación")]):e._e()]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Cumplir tarea"},on:{click:function(t){return e.abrirCumplirTarea(a)}}},[t("i",{staticClass:"fas fa-file-signature"}),e._v(" Tareas\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Ver recibo"},on:{click:function(t){return e.abrirVerRecibo(a)}}},[t("i",{staticClass:"fas fa-search"}),e._v("Ver recibo\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Crear recibo"},on:{click:function(t){return e.abrirCrearRecibo(a)}}},[t("i",{staticClass:"fas fa-file-alt"}),e._v(" Generar recibo\n                  ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoDestinosRuta,cantidad:e.destinos.length,alto:"120px",tipo:"clientes"}})],1)])],1),e._v(" "),t("recibo-modal",{attrs:{destino:e.destinoSeleccionado},on:{"destinos-ordenes-seleccionados":e.destinosOrdenesSeleccionados}}),e._v(" "),t("buscar-recibo-modal",{attrs:{destinoRutaId:e.destinoSeleccionado.id}}),e._v(" "),t("tareas-modal",{attrs:{destino:e.destinoSeleccionado},on:{"destinos-tareas-seleccionados":e.destinosTareasSeleccionados}}),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-2 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-left"},[e._v("Dirección")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Teléfono")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("URL ubicación")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"})])])}],!1,null,null,null).exports},1113:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],data:function(){return{registro:{nombre:""}}},mounted:function(){this.cargarDatos()},methods:{cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/destinos-tareas/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar tareas de destinos",a)})).then((function(){return e.$refs.cargando.alternar()})))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/destinos-tareas",a="post";"0"!==this.id&&(t="/api/destinos-tareas/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar tarea de destino",a)}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/destinos-tareas"},regresar:function(){window.history.back()}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear destino de tarea":"Editar destino de tarea")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"100",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},2978:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{permisos:{},cargando:!1,cadenaBusqueda:"",destinosTareas:[],paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0}}},mounted:function(){this.cargarDatos()},methods:{buscarDestinosTareas:function(){this.paginacion.paginaActual=1,this.cargarDestinosTareas()},cargarDestinosTareas:function(){var e=this;this.cargando=!0,this.destinosTareas=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginacion.paginaActual};axios.get("/api/destinos-tareas",{params:t}).then((function(t){var a=t.data.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total,e.destinosTareas=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar tareas de destinos",a)})).finally((function(){return e.cargando=!1}))},cargarDatos:function(){this.permisos=this.datos.permisos,this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginacion.paginaActual=1,this.cargarDestinosTareas()},editarDestinoTarea:function(e){window.location.href="/destinos-tareas/"+e.id+"/edit"},desactivarDestinoTarea:function(e){var t=this,a="A"===e.estado?"I":"A";axios.patch("/api/destinos-tareas/".concat(e.id,"/estado/").concat(a)).then((function(){t.cargarDestinosTareas(),t.$refs.alerta.ocultarAlertas(),t.mostrarExito("Examen <strong>"+e.nombre+"</strong> actualizado exitosamente")})).catch((function(e){t.destinosTareas=[];var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cambiar el estado de tarea de destino",a)}))},eliminarDestinoTarea:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/destinos-tareas/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("Tarea de destino eliminado exitosamente")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al eliminar tarea de destino",a)}))},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginacion.paginaActual=1,this.cargarDestinosTareas()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Tareas de destinos\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarDestinosTareas.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarDestinosTareas}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[e.$can("crear-destinos-tareas")?t("a",{staticClass:"btn btn-primary",attrs:{href:"/destinos-tareas/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")]):e._e()])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.destinosTareas.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.destinosTareas,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.nombre)+"\n            "),"I"===a.estado?t("span",{staticClass:"label label-danger"},[e._v("Desactivado")]):e._e()]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-destinos-tareas")},on:{click:function(t){return e.editarDestinoTarea(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),a.tipo?e._e():t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-destinos-tareas")},on:{click:function(t){return e.desactivarDestinoTarea(a)}}},[t("i",{staticClass:"fas fa-lock fa-fw"}),e._v(" "),"A"===a.estado?[e._v("\n                Desactivar\n              ")]:[e._v("\n                Activar\n              ")]],2),e._v(" "),a.tipo?e._e():t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.$can("eliminar-destinos-tareas")},on:{click:function(t){return e.eliminarDestinoTarea(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.destinosTareas.length,tipo:"destinos tareas"}}),e._v(" "),!e.cargando&&e.destinosTareas.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarDestinosTareas,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-md-3 text-center"})])])}],!1,null,null,null).exports},2823:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:["id"],data:function(){return{registro:{nombre:"",direccion:"",telefono:"",url_ubicacion:"",sector_id:"",categorias:[],empresa_id:""},sectores:[],empresas:[],subempresas:[],ingresoCategoria:!1}},mounted:function(){this.cargarDatos()},methods:{cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/destinos/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a,e.registro.empresa_id&&e.cargarCategorias()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar el destino",a)})).then((function(){return e.$refs.cargando.alternar()}))),axios.get("/api/catalogos",{params:{catalogo:r.oH.CLIENTES}}).then((function(t){var a=t.data.data;e.empresas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar clientes",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.SECTORES}}).then((function(t){var a=t.data.data;e.sectores=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar sectores",a)}))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/destinos",a="post";"0"!==this.id&&(t="/api/destinos/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar el destino",a)}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/destinos"},regresar:function(){window.location.href="/destinos"},seleccionarEmpresa:function(e){this.registro.direccion=e.direccion,this.registro.telefono=e.telefono_adicional,this.registro.nombre=e.nombre,this.registro.categorias=[],this.cargarCategorias()},despliegueCategoria:function(){this.ingresoCategoria=!1,this.registro.empresa_id&&(this.ingresoCategoria=!0)},cargarCategorias:function(){var e=this;axios.get("/api/empresas/"+this.registro.empresa_id+"/subempresas").then((function(t){e.subempresas=t.data.data.filter((function(t){return[e.registro.id,null].includes(t.destino_id)})),e.ingresoCategoria=!0})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar categorías",a)}))},abrirBuscarCategorias:function(){$("#modalBuscarCategorias").modal()},agregarCategoria:function(e){this.registro.categorias.some((function(t){return t.id===e.id}))||this.registro.categorias.push(e)},eliminarSubempresa:function(e){var t=this.registro.categorias.indexOf(e);this.registro.categorias.splice(t,1)}},computed:{subempresasFiltradas:function(){var e=_.map(this.registro.categorias,"id");return this.subempresas.filter((function(t){return!e.includes(t.id)}))},subempresasOrdenados:function(){return _.orderBy(this.registro.categorias,"nombre")}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear destino":"Editar destino")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"100",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",placeholder:"Seleccione...",options:e.empresas,label:"nombre",reduce:function(e){return e.id}},on:{"option:selected":e.seleccionarEmpresa,input:e.despliegueCategoria},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.registro.empresa_id,callback:function(t){e.$set(e.registro,"empresa_id",t)},expression:"registro.empresa_id"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-8 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"direccion"}},[e._v("Dirección")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.direccion,expression:"registro.direccion"}],staticClass:"form-control input-sm",attrs:{id:"direccion",name:"direccion",type:"text",maxlength:"200",required:""},domProps:{value:e.registro.direccion},on:{input:function(t){t.target.composing||e.$set(e.registro,"direccion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sector_id"}},[e._v("Sector")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"sector_id",placeholder:"Seleccione...",options:e.sectores,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.registro.sector_id,callback:function(t){e.$set(e.registro,"sector_id",t)},expression:"registro.sector_id"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"url_ubicacion"}},[e._v("URL ubicación")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.url_ubicacion,expression:"registro.url_ubicacion"}],staticClass:"form-control input-sm",attrs:{id:"url_ubicacion",name:"url_ubicacion",type:"url",maxlength:"150"},domProps:{value:e.registro.url_ubicacion},on:{input:function(t){t.target.composing||e.$set(e.registro,"url_ubicacion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"telefono"}},[e._v("Teléfono")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.telefono,expression:"registro.telefono"}],staticClass:"form-control input-sm",attrs:{id:"telefono",name:"telefono",type:"text",maxlength:"30",required:""},domProps:{value:e.registro.telefono},on:{input:function(t){t.target.composing||e.$set(e.registro,"telefono",t.target.value)}}})])]),e._v(" "),e.ingresoCategoria?t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row"},[e._m(0),e._v(" "),t("div",{staticClass:"col-sm-4 text-right",staticStyle:{"padding-top":"25px"}},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:e.abrirBuscarCategorias}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v("Agregar\n            ")])])]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[0===e.subempresasOrdenados.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("\n              No existen registros\n            ")])]):e._e(),e._v(" "),e._l(e.subempresasOrdenados,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(t){return e.eliminarSubempresa(a)}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Eliminar\n              ")])])])}))],2)])])]):e._e()],1),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalBuscarCategorias",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(2),e._v(" "),t("alerta",{ref:"alertaBuscarCategorias"}),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(3),e._v(" "),t("tbody",[0===e.subempresasFiltradas.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("\n                  No existen registros\n                ")])]):e._e(),e._v(" "),e._l(e.subempresasFiltradas,(function(a){return[t("tr",[t("td",[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Agregar"},on:{click:function(t){return e.agregarCategoria(a)}}},[t("i",{staticClass:"fas fa-plus"})])])])]}))],2)])])])],1)])]),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-sm-8"},[e("h3",{staticClass:"obligatorio"},[this._v("Categorías")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-4 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Categorías")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-5 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-1"})])])}],!1,null,null,null).exports},6413:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{permisos:{},cargando:!1,cadenaBusqueda:"",destinos:[],paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0}}},mounted:function(){this.cargarDatos()},methods:{buscarDestinos:function(){this.paginacion.paginaActual=1,this.cargarDestinos()},cargarDestinos:function(){var e=this;this.cargando=!0,this.destinos=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginacion.paginaActual};axios.get("/api/destinos",{params:t}).then((function(t){var a=t.data.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total,e.destinos=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar el destino",a)})).finally((function(){return e.cargando=!1}))},cargarDatos:function(){this.permisos=this.datos.permisos,this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginacion.paginaActual=1,this.cargarDestinos()},editarDestino:function(e){window.location.href="/destinos/"+e.id+"/edit"},desactivarDestino:function(e){var t=this,a="A"===e.estado?"I":"A";axios.patch("/api/destinos/".concat(e.id,"/estado/").concat(a)).then((function(){t.cargarDestinos(),t.$refs.alerta.ocultarAlertas(),t.mostrarExito("Examen <strong>"+e.nombre+"</strong> actualizado exitosamente")})).catch((function(e){t.destinos=[];var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cambiar de estado al destino",a)}))},eliminarDestino:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/destinos/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("Destino eliminado exitosamente")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al eliminar el destino",a)}))},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginacion.paginaActual=1,this.cargarDestinos()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Destinos\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarDestinos.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarDestinos}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[e.$can("crear-destinos")?t("a",{staticClass:"btn btn-primary",attrs:{href:"/destinos/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")]):e._e()])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.destinos.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.destinos,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.nombre)+"\n            "),"I"===a.estado?t("span",{staticClass:"label label-danger"},[e._v("Desactivado")]):e._e()]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.direccion)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.telefono)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-left"},[a.sector?[e._v("\n              "+e._s(a.sector.nombre)+"\n            ")]:e._e()],2),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-destinos")},on:{click:function(t){return e.editarDestino(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-destinos")},on:{click:function(t){return e.desactivarDestino(a)}}},[t("i",{staticClass:"fas fa-lock fa-fw"}),e._v(" "),"A"===a.estado?[e._v("\n                Desactivar\n              ")]:[e._v("\n                Activar\n              ")]],2),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.$can("eliminar-destinos")},on:{click:function(t){return e.eliminarDestino(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.destinos.length,tipo:"destinos"}}),e._v(" "),!e.cargando&&e.destinos.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarDestinos,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Dirección")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Teléfono")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Sector")]),e._v(" "),t("th",{staticClass:"col-md-3 text-center"})])])}],!1,null,null,null).exports},9157:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(7974),o=a(2328),i=a(755),s=a(4590);const n={components:{HoraModal:i.Z},props:{id:{type:String}},data:function(){return{procesando:!1,numeroOrden:"",nombreMuestra:"",hora:"",flebotomistas:[],registro:{id:"",fecha:"",estado:"",estadoOriginal:"",pendiente:!1,rechazada:!1,externa:!1,flebotomista_id:"",observacion:null,motivos_rechazo:[]},motivosRechazo:[{id:1,nombre:"Identificación inadecuada"},{id:2,nombre:"Contenedor inapropiado"},{id:3,nombre:"Temperatura inadecuada"},{id:4,nombre:"Información insuficiente"},{id:5,nombre:"Volumen incorrecto"},{id:6,nombre:"Muestra derramada"},{id:7,nombre:"Toma incorrecta"},{id:8,nombre:"Muestra contaminada"},{id:9,nombre:"Hemolisis"},{id:10,nombre:"Muestra coagulada"},{id:11,nombre:"Muestra lipémica"}]}},mounted:function(){var e=this;$("#".concat(this.id)).on("shown.bs.modal",(function(t){t.target.id===e.id&&($("#".concat(e.id,"Observacion")).focus(),e.cargarFlebotomistas())})),$("#".concat(this.id)).on("show.bs.modal",(function(t){if(t.target.id===e.id){var a=$(t.relatedTarget).data("muestra");e.nombreMuestra=a.nombre,e.numeroOrden=$(t.relatedTarget).data("numeroOrden"),e.registro.id=a.pivot.id,e.registro.estado=a.pivot.estado,e.registro.pendiente=a.pivot.estado===s.zm.PENDIENTE,e.registro.externa=a.pivot.externa,e.registro.rechazada=a.pivot.rechazada,e.registro.observacion=a.pivot.observacion,e.registro.motivos_rechazo=a.pivot.motivos_rechazo?a.pivot.motivos_rechazo:[],e.registro.flebotomista_id=a.pivot.flebotomista_id,e.registro.fecha=e.fechaALocal(a.pivot.fecha,"YYYY-MM-DD"),e.hora=e.fechaALocal(a.pivot.fecha,"HH:mm:ss"),e.procesando=!1}})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&e.limpiar()}))},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},limpiar:function(){this.nombreMuestra="",this.numeroOrden="",this.hora="",this.registro.id="",this.registro.fecha="",this.registro.flebotomista_id="",this.registro.observacion=null,this.registro.estado="",this.registro.externa=!1,this.registro.rechazada=!1,this.registro.motivos_rechazo=null},horaSeleccionada:function(e){this.hora=e},guardar:function(){var e=this;if(this.registro.rechazada&&0===this.registro.motivos_rechazo.length)this.mostrarError("Debe seleccionar al menos un motivo de rechazo");else{this.procesando=!0;var t=_.cloneDeep(this.registro);"RECIBIDA"===t.estado?t.fecha=this.fechaAUTC("".concat(t.fecha," ").concat(this.hora)):t.fecha="",t.motivos_rechazo=t.rechazada?t.motivos_rechazo:null,axios.patch("/api/detalles-orden/muestras/".concat(t.id),t).then((function(){e.$emit("muestra-editada",e.nombreMuestra),$("#".concat(e.id)).modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError(a),e.procesando=!1}))}},claseEstado:function(e){return{"label-default":"PENDIENTE"===e,"label-primary":"RECIBIDA"===e,"label-success":"PROCESADA"===e}},cambioPendiente:function(e){this.registro.estado=e.target.checked?s.zm.PENDIENTE:s.zm.RECIBIDA,this.registro.externa=!1,this.registro.estado!==this.registro.estadoOriginal&&(this.registro.observacion="",this.registro.fecha=moment().format("YYYY-MM-DD"),this.hora=moment().format("HH:mm:ss")),e.target.checked&&(this.registro.fecha="",this.registro.flebotomista_id="",this.hora="")},cambioRechazada:function(e){e.target.checked||(this.registro.motivos_rechazo=[])},cargarFlebotomistas:function(){var e=this;_.isEmpty(this.flebotomistas)&&axios.get("/api/catalogos",{params:{catalogo:s.oH.FLEBOTOMISTAS}}).then((function(t){var a=t.data.data;e.flebotomistas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Flebotomistas",a)}))}},computed:{esPendiente:function(){return this.registro.estado===s.zm.PENDIENTE},esRecibida:function(){return this.registro.estado===s.zm.RECIBIDA},esProcesada:function(){return this.registro.estado===s.zm.PROCESADA},titulo:function(){return this.esRecibida?"Recibir":this.esProcesada?"Ver":"Borrar"}}};var c=a(1900);const l=(0,c.Z)(n,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v(e._s(e.titulo)+" muestra")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Orden No.")]),e._v(" "),t("output",[e._v(e._s(e.numeroOrden))])]),e._v(" "),t("div",{staticClass:"col-sm-7 form-group"},[t("label",{staticClass:"control-label"},[e._v("Muestra")]),e._v(" "),t("output",[e._v(e._s(e.nombreMuestra))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group text-right"},[t("label",{staticClass:"control-label text-right"},[e._v("Estado")]),e._v(" "),t("div",{staticClass:"text-right"},[t("span",{staticClass:"label",class:e.claseEstado(e.registro.estado)},[e._v("\n                    "+e._s(e._f("estadoMuestra")(e.registro.estado))+"\n                  ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Pendiente")]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.pendiente,expression:"registro.pendiente"}],attrs:{type:"checkbox",disabled:e.esProcesada},domProps:{checked:Array.isArray(e.registro.pendiente)?e._i(e.registro.pendiente,null)>-1:e.registro.pendiente},on:{click:e.cambioPendiente,change:function(t){var a=e.registro.pendiente,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"pendiente",a.concat([null])):i>-1&&e.$set(e.registro,"pendiente",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"pendiente",o)}}})])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Rechazada")]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.rechazada,expression:"registro.rechazada"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.registro.rechazada)?e._i(e.registro.rechazada,null)>-1:e.registro.rechazada},on:{click:e.cambioRechazada,change:function(t){var a=e.registro.rechazada,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"rechazada",a.concat([null])):i>-1&&e.$set(e.registro,"rechazada",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"rechazada",o)}}})])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Externa")]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.externa,expression:"registro.externa"}],attrs:{type:"checkbox",disabled:e.esPendiente},domProps:{checked:Array.isArray(e.registro.externa)?e._i(e.registro.externa,null)>-1:e.registro.externa},on:{change:function(t){var a=e.registro.externa,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"externa",a.concat([null])):i>-1&&e.$set(e.registro,"externa",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"externa",o)}}})])])]),e._v(" "),e.esPendiente?e._e():t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha recepción")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha,expression:"registro.fecha"}],staticClass:"form-control",attrs:{placeholder:"aaaa-mm-dd",required:"","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",disabled:e.esProcesada}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#".concat(e.id,"Hora"),title:"Definir hora",disabled:e.esProcesada}},[t("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),e.esPendiente?e._e():t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Hora")]),e._v(" "),t("output",[e._v("\n                  "+e._s(e.hora)+"\n                ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",[e._v("Flebotomista")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",staticStyle:{"font-weight":"400 !important"},attrs:{disabled:e.esProcesada,placeholder:"Seleccione...",label:"nombres",options:e.flebotomistas,reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(t){var a=t.nombres,r=t.apellidos;return[e._v("\n                    "+e._s(a)+" "+e._s(r)+"\n                  ")]}},{key:"option",fn:function(t){var a=t.nombres,r=t.apellidos;return[e._v("\n                    "+e._s(a)+" "+e._s(r)+"\n                  ")]}}]),model:{value:e.registro.flebotomista_id,callback:function(t){e.$set(e.registro,"flebotomista_id",t)},expression:"registro.flebotomista_id"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.esPendiente}},[e._v("Observación")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.observacion,expression:"registro.observacion"}],staticClass:"form-control textarea",attrs:{rows:"2",id:"".concat(e.id,"Observacion"),required:e.esPendiente},domProps:{value:e.registro.observacion},on:{input:function(t){t.target.composing||e.$set(e.registro,"observacion",t.target.value)}}})]),e._v(" "),e.registro.rechazada?t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label obligatorio"},[e._v("Motivos rechazo")]),e._v(" "),e._l(e.motivosRechazo,(function(a){return t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.motivos_rechazo,expression:"registro.motivos_rechazo"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.registro.motivos_rechazo)?e._i(e.registro.motivos_rechazo,a)>-1:e.registro.motivos_rechazo},on:{change:function(t){var r=e.registro.motivos_rechazo,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a,n=e._i(r,s);o.checked?n<0&&e.$set(e.registro,"motivos_rechazo",r.concat([s])):n>-1&&e.$set(e.registro,"motivos_rechazo",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.registro,"motivos_rechazo",i)}}}),e._v(" "+e._s(a.nombre)+"\n                  ")])])}))],2):e._e()])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.procesando}},[e._v("Guardar")])])])])])]),e._v(" "),t("hora-modal",{attrs:{id:"".concat(e.id,"Hora"),hora:e.hora,top:10},on:{"hora-seleccionada":e.horaSeleccionada}})],1)}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports,d={components:{Liston:o.Z,EditarMuestraModal:l},props:["datos"],data:function(){return{cargando:!1,filtros:{fecha:moment().format("YYYY-MM-DD"),cadenaBusqueda:"",estado:""},ordenes:[],datosBorrar:{}}},mounted:function(){this.cargarDatos(),this.buscarOrdenes()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.datos.cadenaBusqueda&&(this.filtros.cadenaBusqueda=this.datos.cadenaBusqueda)},borrarFormulario:function(){this.filtros.cadenaBusqueda="",this.filtros.fecha=""},buscarOrdenes:function(){var e=this;this.ordenes=[],this.cargando=!0,axios.get("/api/detalles-orden/muestras",{params:this.filtros}).then((function(t){var a=t.data.data;e.ordenes=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.cargando=!1}))},claseEstado:function(e){return{"label-default":"PENDIENTE"===e,"label-primary":"RECIBIDA"===e,"label-success":"PROCESADA"===e}},abrirModalEditarMuestra:function(e,t){var a=(0,r.MD)({muestra:t,"numero-orden":e.numero_orden});$("#modalEditarMuestra").modal({},a)},muestraEditada:function(e){this.buscarOrdenes(),this.mostrarExito("Muestra <strong>".concat(e,"</strong> guardada"))}},computed:{etiquetaSeleccionados:function(){return this.cantidadMuestras>1?"muestras":"muestra"},cantidadMuestras:function(){return this.ordenes.reduce((function(e,t){return e+t.detalles_ordenes.reduce((function(e,t){return e+t.muestras.length}),0)}),0)}}};const u=(0,c.Z)(d,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Muestras\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha,expression:"filtros.fecha"}],staticClass:"form-control",attrs:{placeholder:"aaaa-mm-dd","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked"}}),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Número de orden...",name:"cadenaBusqueda",autofocus:"",required:""},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarOrdenes.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarOrdenes}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.borrarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("span",{directives:[{name:"show",rawName:"v-show",value:e.cantidadMuestras>0,expression:"cantidadMuestras > 0"}],staticClass:"badge",staticStyle:{"margin-top":"15px"},attrs:{id:"contadorOrdenes"}},[e._v("\n              "+e._s(e.cantidadMuestras)+" "+e._s(e.etiquetaSeleccionados)+"\n            ")])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.ordenes.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[e._l(a.detalles_ordenes,(function(r){return[e._l(r.muestras,(function(o){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n                  "+e._s(a.paciente.nombre_paciente)+"\n                ")]),e._v(" "),t("td",{staticClass:"text-left"},[t("small",[e._v(e._s(r.examen.nombre))]),e._v(" "),t("div",[e._v("\n                    "+e._s(o.nombre)+"\n                  ")])]),e._v(" "),t("td",{staticClass:"text-center"},[t("span",{staticClass:"label",class:e.claseEstado(o.pivot.estado)},[e._v("\n                    "+e._s(e._f("estadoMuestra")(o.pivot.estado))+"\n                  ")])]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n                  "+e._s(o.pivot.rechazada?"✔":"-")+"\n                ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n                  "+e._s(o.pivot.externa?"✔":"-")+"\n                ")]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(o.pivot.fecha,"YYYY-MM-DD </br> HH:mm"))}}),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){return e.abrirModalEditarMuestra(a,o)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n                  ")])])])]}))]}))]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.ordenes.length,tipo:"muestras"}})],1),e._v(" "),t("editar-muestra-modal",{attrs:{id:"modalEditarMuestra"},on:{"muestra-editada":e.muestraEditada}})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Orden No.")]),e._v(" "),t("th",{staticClass:"col-sm-3"},[e._v("Paciente")]),e._v(" "),t("th",[e._v("Muestra")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Rechazada")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Externa")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha recepción")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"})])])}],!1,null,null,null).exports},9667:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(2534),o=a(9107),i=a(9676),s=a(4590);const n={components:{BuscarExamenModal:o.Z,BuscarPacienteModal:i.Z,SelectMedico:r.Z},props:["datos"],data:function(){return{generandoArchivo:!1,cadenaBusqueda:"",filtros:{fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),usuario_id:"",sucursal_id:"",empresa_id:"",subempresa_id:"",medico_id:"",tipo_atencion_id:"",plan_salud_id:"",sala_id:"",paciente_id:"",paciente_type:"",paciente_nombre:"",seccion_id:"",sin_examenes:"",examenes_con_precios:!1,solo_anuladas:!1,facturadas:"",mostrar_cliente_categoria:!1,ordenes_saldo:"",estado_examenes:"",tipo_fecha:"POR_ORDEN",examen_id:"",numero_poliza:"",agrupar_por_medicos:!1,mostrar_observaciones_orden:!1,mostrar_observaciones_laboratorista:!1,grupo_id:"",separadorLista:";",formato:"XLSX"},auxiliar:{usuario_nombre:"",examen_codigo:""},usuarios:[],sucursales:[],empresas:[],empresa:"",subempresas:[],tiposAtenciones:[],planesSalud:[],salas:[],secciones:[],grupos:[],separadoresListas:[{id:";",nombre:"Punto y coma (;)"},{id:",",nombre:"Coma (,)"}]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/detalle-ordenes").then((function(t){var a=t.data.data;e.sucursales=a.sucursales,e.usuarios=a.usuarios,e.empresas=a.empresas,e.salas=a.salas,e.tiposAtenciones=a.tiposAtenciones,e.planesSalud=a.planesSalud,e.grupos=a.grupos,e.datos.permisos.cambiarSucursal||(e.filtros.sucursal_id=e.datos.sucursalActivaId),e.datos.permisos.cambiarEmpresas||(e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar filtros",a)})).then((function(){return e.$refs.cargando.alternar()})),axios.get("/api/catalogos",{params:{catalogo:s.oH.SECCIONES}}).then((function(t){var a=t.data;e.secciones=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Secciones",a)}))},borrarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.usuario_id="",this.auxiliar.usuario_nombre="",this.filtros.subempresa_id="",this.filtros.medico_id="",this.filtros.sala_id="",this.filtros.tipo_atencion_id="",this.filtros.plan_salud_id="",this.filtros.sin_examenes="",this.filtros.facturadas="",this.filtros.mostrar_cliente_categoria=!1,this.filtros.examen_id="",this.auxiliar.examen_codigo="",this.filtros.ordenes_saldo="",this.filtros.tipo_fecha="POR_ORDEN",this.filtros.numero_poliza="",this.filtros.estado_examenes="",this.filtros.mostrar_observaciones_laboratorista=!1,this.filtros.mostrar_observaciones_orden=!1,this.filtros.solo_anuladas=!1,this.filtros.examenes_con_precios=!1,this.filtros.agrupar_por_medicos=!1,this.filtros.seccion_id="",this.filtros.grupo_id="",this.datos.permisos.cambiarSucursal&&(this.filtros.sucursal_id=""),this.datos.permisos.cambiarEmpresas&&(this.empresa="",this.filtros.empresa_id="")},abrirBusquedaUsuario:function(){this.cadenaBusqueda="",$("#busquedaUsuario").modal()},seleccionarUsuario:function(e){this.filtros.usuario_id=e.id,this.auxiliar.usuario_nombre=e.nombre_usuario,$("#busquedaUsuario").modal("hide")},limpiarUsuario:function(){this.filtros.usuario_id="",this.auxiliar.usuario_nombre=""},limpiarCadenaBusqueda:function(){this.cadenaBusqueda=""},examenSeleccionado:function(e){this.filtros.examen_id=e.id,this.auxiliar.examen_codigo=e.codigo},generarPdf:function(){var e=this.validarFechas(e);if(e=this.validarRangoFechas(e)){var t=this.obtenerParametrosUrl(this.filtros);window.open("detalle-ordenes/pdf".concat(t),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")}},generarExcel:function(){this.llamarApiGenerarExcel("excel")},generarExcelPorExamen:function(){this.llamarApiGenerarExcel("excel-por-examen")},generarExcelPorExamenMatriz:function(){this.llamarApiGenerarExcel("excel-por-examen-matriz")},generarExcelPorExamenPlanilla:function(){this.llamarApiGenerarExcel("excel-por-examen-planilla")},generarExcelPorExamenPlanillaRclinic:function(){this.llamarApiGenerarExcel("excel-por-examen-planilla-rclinic")},llamarApiGenerarExcel:function(e){var t=this;this.generandoArchivo=!0;var a=this.validarFechas(a);if(a=this.validarRangoFechas(a)){var r=this.obtenerParametrosUrl(this.filtros);axios.get("/detalle-ordenes/".concat(e).concat(r),{responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=document.getElementById("link-descargas");r.href=window.URL.createObjectURL(a),r.download=t.split("filename=")[1],r.click()})).catch((function(e){var a=e.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=t.procesarErrorResponse(o);t.mostrarErrores("Error al generar archivo",i)})).then((function(){return t.generandoArchivo=!1}))}},validarFechas:function(e){var t=new RegExp("([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))");return(e=t.test(this.filtros.fecha_desde))?(e=t.test(this.filtros.fecha_hasta))||(this.mostrarErrores("¡Error!",' La "Fecha Hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores("¡Error!",'La "Fecha Desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e)},validarRangoFechas:function(e){var t=moment(this.filtros.fecha_hasta,"YYYY-MM-DD"),a=moment(this.filtros.fecha_desde,"YYYY-MM-DD"),r=t.diff(a,"months",!0),o=this.filtros.sin_examenes?12:3;return r>o&&(this.mostrarErrores("¡Error!",'El rango entre la "Fecha Desde" y "Fecha Hasta" supera los '.concat(o," meses.")),e=!1),r<0&&(this.mostrarErrores("¡Error!",' La "Fecha Desde" no debe ser mayor que la "Fecha Hasta".'),e=!1),e},borrarFiltroExamen:function(){this.filtros.examen_id="",this.auxiliar.examen_codigo=""},borrarFiltroPaciente:function(){this.filtros.paciente_id="",this.filtros.paciente_type="",this.filtros.paciente_nombre=""},cambiarEmpresa:function(){this.filtros.subempresa_id="",this.empresa?(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas):(this.filtros.empresa_id="",this.subempresas="")},cambioSinExamenes:function(){this.filtros.sin_examenes||(this.filtros.examenes_con_precios=this.filtros.sin_examenes)},cambioExamenesConPrecios:function(){this.filtros.examenes_con_precios||(this.filtros.sin_examenes=this.filtros.examenes_con_precios)},pacienteSeleccionado:function(e){this.filtros.paciente_id=e.id,this.filtros.paciente_type=e.tipo,this.filtros.paciente_nombre=e.nombre_paciente},cambiarSeccion:function(){this.filtros.examen_id="",this.auxiliar.examen_codigo="",this.filtros.grupo_id=""},cambiarGrupo:function(){this.filtros.examen_id="",this.auxiliar.examen_codigo="",this.filtros.seccion_id=""},cambioSeparadorLista:function(e){e.target.value&&localStorage.setItem("separador-lista",e.target.value)}},computed:{usuariosFiltrados:function(){if(!_.isEmpty(this.usuarios)){var e=new RegExp(removeDiacritics(this.cadenaBusqueda),"i");return this.usuarios.filter((function(t){return e.test(removeDiacritics(t.nombre_usuario))||e.test(removeDiacritics(t.nombre_completo))}))}return this.usuarios}}};const c=(0,a(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Detalle de Órdenes\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{type:"button",disabled:e.generandoArchivo,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoArchivo,expression:"!generandoArchivo"}],staticClass:"fas fa-print fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.generandoArchivo,expression:"generandoArchivo"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Generar informe "),t("span",{staticClass:"caret"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu",staticStyle:{"margin-top":"-4px","margin-right":"1px"}},[t("li",{directives:[{name:"show",rawName:"v-show",value:!e.filtros.agrupar_por_medicos,expression:"!filtros.agrupar_por_medicos"}]},[t("a",{attrs:{id:"generarInformeDetalleOrdenesPDF",href:"#"},on:{click:e.generarPdf}},[t("i",{staticClass:"far fa-file-pdf fa-lg",attrs:{"aria-hidden":"true"}}),e._v(" PDF")])]),e._v(" "),t("li",[t("a",{attrs:{id:"generarInformeDetalleOrdenesExcel",href:"#"},on:{click:e.generarExcel}},[t("i",{staticClass:"far fa-file-excel fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  Excel\n                  "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:!e.filtros.agrupar_por_medicos,expression:"!filtros.agrupar_por_medicos"}]},[t("a",{attrs:{id:"generarInformeDetalleOrdenesExcelPorExamen",href:"#"},on:{click:e.generarExcelPorExamen}},[t("i",{staticClass:"far fa-file-excel fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  Excel por examen\n                  "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:!e.filtros.agrupar_por_medicos,expression:"!filtros.agrupar_por_medicos"}]},[t("a",{attrs:{href:"#"},on:{click:e.generarExcelPorExamenMatriz}},[t("i",{staticClass:"far fa-file-excel fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  Excel por examen matriz\n                  "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:!e.filtros.agrupar_por_medicos,expression:"!filtros.agrupar_por_medicos"}]},[t("a",{attrs:{id:"generarInformeDetalleOrdenesExcelPorExamenPlanilla",href:"#"},on:{click:e.generarExcelPorExamenPlanilla}},[t("i",{staticClass:"far fa-file-excel fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  Excel por examen planilla\n                ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:!e.filtros.agrupar_por_medicos,expression:"!filtros.agrupar_por_medicos"}]},[t("a",{attrs:{href:"#"},on:{click:e.generarExcelPorExamenPlanillaRclinic}},[t("i",{staticClass:"far fa-file-excel fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  Excel por examen planilla RClinic\n                ")])])])])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[e._v("\n            Borrar filtros\n          ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio no-salto-linea",attrs:{for:"tipo_fecha"}},[e._v("Tipo de fecha")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_fecha,expression:"filtros.tipo_fecha"}],staticClass:"form-control input-sm",attrs:{id:"tipo_fecha",name:"tipo_fecha",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_fecha",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"POR_ORDEN"}},[e._v("Por fecha de orden")]),e._v(" "),t("option",{attrs:{value:"POR_ABONO"}},[e._v("Por fecha de pago")]),e._v(" "),t("option",{attrs:{value:"POR_CREACION_ORDEN"}},[e._v("Por fecha de creación")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}})])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",placeholder:"Todos",label:"nombre",disabled:!e.datos.permisos.cambiarEmpresas,options:e.empresas},on:{input:e.cambiarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresa_id,expression:"filtros.subempresa_id"}],staticClass:"form-control input-sm",attrs:{name:"subempresa_id",id:"subempresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresa_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n              "+e._s(a.nombre)+"\n            ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.datos.permisos.cambiarSucursal},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n            ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico_id"}},[e._v("Médico")]),e._v(" "),t("select-medico",{attrs:{id:"medico_id",catalogo:"MEDICOS",etiqueta:"nombre_completo"},model:{value:e.filtros.medico_id,callback:function(t){e.$set(e.filtros,"medico_id",t)},expression:"filtros.medico_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario"}},[e._v("Usuario")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.auxiliar.usuario_nombre,expression:"auxiliar.usuario_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"usuario",maxlength:"15",disabled:""},domProps:{value:e.auxiliar.usuario_nombre},on:{input:function(t){t.target.composing||e.$set(e.auxiliar,"usuario_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarUsuario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBusquedaUsuario}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sala_id"}},[e._v("Servicio")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sala_id,expression:"filtros.sala_id"}],staticClass:"form-control input-sm",attrs:{name:"sala_id",id:"sala_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sala_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.salas,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"plan_salud_id"}},[e._v("Plan salud")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.plan_salud_id,expression:"filtros.plan_salud_id"}],staticClass:"form-control input-sm",attrs:{id:"plan_salud_id",name:"plan_salud_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"plan_salud_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.planesSalud,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n            ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_atencion_id,expression:"filtros.tipo_atencion_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",name:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_atencion_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposAtenciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n            ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"paciente"}},[e._v("Paciente")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.paciente_nombre,expression:"filtros.paciente_nombre"}],staticClass:"form-control input-sm",attrs:{id:"paciente",type:"text",disabled:""},domProps:{value:e.filtros.paciente_nombre},on:{input:function(t){t.target.composing||e.$set(e.filtros,"paciente_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroPaciente}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),e._m(1)])])]),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.auxiliar.examen_codigo,expression:"auxiliar.examen_codigo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",maxlength:"15",disabled:""},domProps:{value:e.auxiliar.examen_codigo},on:{input:function(t){t.target.composing||e.$set(e.auxiliar,"examen_codigo",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),e._m(2)])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_poliza"}},[e._v("Número póliza")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numero_poliza,expression:"filtros.numero_poliza"}],staticClass:"form-control input-sm",attrs:{id:"numero_poliza",type:"text"},domProps:{value:e.filtros.numero_poliza},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numero_poliza",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Todos",options:e.secciones,label:"nombre",reduce:function(e){return e.id}},on:{input:e.cambiarSeccion},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.seccion_id,callback:function(t){e.$set(e.filtros,"seccion_id",t)},expression:"filtros.seccion_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"grupo_id"}},[e._v("Grupo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.grupo_id,expression:"filtros.grupo_id"}],staticClass:"form-control input-sm",attrs:{name:"grupo_id",id:"grupo_id"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"grupo_id",t.target.multiple?a:a[0])},e.cambiarGrupo]}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.grupos,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"estado_examenes"}},[e._v("Estado exámenes")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado_examenes,expression:"filtros.estado_examenes"}],staticClass:"form-control input-sm",attrs:{id:"estado_examenes",name:"estado_examenes"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado_examenes",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),t("option",{attrs:{value:"PROCESADOS"}},[e._v("Procesados")]),e._v(" "),t("option",{attrs:{value:"NO_PROCESADOS"}},[e._v("No procesados")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"ordenes_saldo"}},[e._v("Órdenes saldo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.ordenes_saldo,expression:"filtros.ordenes_saldo"}],staticClass:"form-control input-sm",attrs:{id:"ordenes_saldo",name:"ordenes_saldo"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"ordenes_saldo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),t("option",{attrs:{value:"con_saldo"}},[e._v("Con saldo")]),e._v(" "),t("option",{attrs:{value:"sin_saldo"}},[e._v("Sin saldo")])])]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.facturadas,expression:"filtros.facturadas"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.facturadas)?e._i(e.filtros.facturadas,"")>-1:e.filtros.facturadas},on:{change:function(t){var a=e.filtros.facturadas,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"facturadas",a.concat([""])):i>-1&&e.$set(e.filtros,"facturadas",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"facturadas",o)}}}),e._v("\n              Órdenes facturadas\n            ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.solo_anuladas,expression:"filtros.solo_anuladas"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.solo_anuladas)?e._i(e.filtros.solo_anuladas,"")>-1:e.filtros.solo_anuladas},on:{change:function(t){var a=e.filtros.solo_anuladas,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"solo_anuladas",a.concat([""])):i>-1&&e.$set(e.filtros,"solo_anuladas",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"solo_anuladas",o)}}}),e._v("\n              Sólo anuladas\n            ")])])])])])]),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(3),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-3 col-sm-3 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"separadorLista"}},[e._v("Separador de lista")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.separadorLista,expression:"filtros.separadorLista"}],staticClass:"form-control input-sm",attrs:{id:"separadorLista",name:"separadorLista",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"separadorLista",t.target.multiple?a:a[0])},e.cambioSeparadorLista]}},e._l(e.separadoresListas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n              "+e._s(a.nombre)+"\n            ")])})),0)]),e._v(" "),t("div",{staticClass:"col-xs-3 col-sm-3 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"formato"}},[e._v("Formato")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.formato,expression:"filtros.formato"}],staticClass:"form-control input-sm",attrs:{id:"formato",name:"formato",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"formato",t.target.multiple?a:a[0])},e.cambioSeparadorLista]}},[t("option",{attrs:{value:"XLSX"}},[e._v("XLSX")]),e._v(" "),t("option",{attrs:{value:"CSV"}},[e._v("CSV")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.mostrar_cliente_categoria,expression:"filtros.mostrar_cliente_categoria"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.mostrar_cliente_categoria)?e._i(e.filtros.mostrar_cliente_categoria,"")>-1:e.filtros.mostrar_cliente_categoria},on:{change:function(t){var a=e.filtros.mostrar_cliente_categoria,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"mostrar_cliente_categoria",a.concat([""])):i>-1&&e.$set(e.filtros,"mostrar_cliente_categoria",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"mostrar_cliente_categoria",o)}}}),e._v("\n              Mostrar Cliente y Categoría\n            ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.mostrar_observaciones_orden,expression:"filtros.mostrar_observaciones_orden"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.mostrar_observaciones_orden)?e._i(e.filtros.mostrar_observaciones_orden,"")>-1:e.filtros.mostrar_observaciones_orden},on:{change:function(t){var a=e.filtros.mostrar_observaciones_orden,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"mostrar_observaciones_orden",a.concat([""])):i>-1&&e.$set(e.filtros,"mostrar_observaciones_orden",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"mostrar_observaciones_orden",o)}}}),e._v("\n              Mostrar Observaciones orden\n            ")])])]),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.mostrar_observaciones_laboratorista,expression:"filtros.mostrar_observaciones_laboratorista"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.mostrar_observaciones_laboratorista)?e._i(e.filtros.mostrar_observaciones_laboratorista,"")>-1:e.filtros.mostrar_observaciones_laboratorista},on:{change:function(t){var a=e.filtros.mostrar_observaciones_laboratorista,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"mostrar_observaciones_laboratorista",a.concat([""])):i>-1&&e.$set(e.filtros,"mostrar_observaciones_laboratorista",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"mostrar_observaciones_laboratorista",o)}}}),e._v("\n              Mostrar Observaciones laboratorista\n            ")])])]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.agrupar_por_medicos,expression:"filtros.agrupar_por_medicos"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.agrupar_por_medicos)?e._i(e.filtros.agrupar_por_medicos,"")>-1:e.filtros.agrupar_por_medicos},on:{change:function(t){var a=e.filtros.agrupar_por_medicos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"agrupar_por_medicos",a.concat([""])):i>-1&&e.$set(e.filtros,"agrupar_por_medicos",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"agrupar_por_medicos",o)}}}),e._v("\n              Agrupar por médico\n            ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sin_examenes,expression:"filtros.sin_examenes"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.sin_examenes)?e._i(e.filtros.sin_examenes,"")>-1:e.filtros.sin_examenes},on:{click:e.cambioSinExamenes,change:function(t){var a=e.filtros.sin_examenes,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"sin_examenes",a.concat([""])):i>-1&&e.$set(e.filtros,"sin_examenes",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"sin_examenes",o)}}}),e._v("\n              Sin exámenes\n            ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examenes_con_precios,expression:"filtros.examenes_con_precios"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.examenes_con_precios)?e._i(e.filtros.examenes_con_precios,"")>-1:e.filtros.examenes_con_precios},on:{click:e.cambioExamenesConPrecios,change:function(t){var a=e.filtros.examenes_con_precios,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"examenes_con_precios",a.concat([""])):i>-1&&e.$set(e.filtros,"examenes_con_precios",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"examenes_con_precios",o)}}}),e._v("\n              Exámenes con precios\n            ")])])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"busquedaUsuario",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(4),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(5),e._v(" "),t("tbody",[e._l(e.usuariosFiltrados,(function(a){return[t("tr",[t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.nombre_usuario))]),e._v(" "),t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.nombre_completo))]),e._v(" "),t("td",{staticClass:"centrado-vertical text-right"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Seleccionar usuario"},on:{click:function(t){return e.seleccionarUsuario(a)}}},[t("i",{staticClass:"fas fa-check"})])])])]}))],2)])])])])])]),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.examenSeleccionado}}),e._v(" "),t("buscar-paciente-modal",{on:{"paciente-seleccionado":e.pacienteSeleccionado}}),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarPaciente",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Opciones")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Usuarios")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-4 text-center"},[e._v("Usuario")]),e._v(" "),t("th",{staticClass:"col-sm-7 text-center"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])}],!1,null,null,null).exports},1317:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(8064),o=a(2387);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c={components:{UbicacionGeograficaEC:r.Z,UbicacionGeograficaPE:o.Z},props:{id:{type:String,required:!0},membretes:{type:Array,default:function(){return[]}},firmas:{type:Array,default:function(){return[]}},sucursales:{type:Array,default:function(){return[]}},datos:{type:Object,default:function(){return{}}}},data:function(){return{procesando:{guardar:!1},registro:{ubicacion_ciudad_id:null,membrete_id:null,firma_id:null,sucursal_id:null,ruc:"",nombre:"",razon_social:"",direccion:"",telefono_facturas:"",telefono_adicional:"",correo_portal:"",correo_facturas:"",estado:"",permitir_descuento:!1,cambio_precio:!1,cama:!1,sala:!1,empresa:!1,subempresa:!1,sucursal:!1,mostrar_tipo_paciente:!1,mostrar_sala:!1,mostrar_numero_orden_externa:!1,fecha_impresion:!1,precios:!1,portal_mostrar_ordenes_impagas:!1,mostrar_ordenes_impagas:!1,imprimir_resultados_ordenes_impagas:!1,imprimir_encabezado_consulta_resultados:!1,margenes_sin_encabezado_portal:null,descargar_resultados_con_validacion_completa:!1,posicion_datos_paciente:"IZQUIERDA",pedidos:!1,mostrar_detalle_examenes:!1,pedidos_precios:!1,portal_estado_cuenta:!1,margen_izquierdo_datos_paciente:0,mostrar_referencia_auxiliar_pdf_resultados:!1,facturar_al_cliente:!1,imprimir_tipo_atencion_pdf_resultados:!1,mostrar_valores_orden_en_reportes:!0,imprimir_medico:!0,imprimir_edad:!0,saldo:null},registroAuxiliar:{nivel2:"",nivel3:""},ubicacionesNivel2:[],key:0}},created:function(){this.registro.margenes_sin_encabezado_portal=this.inicializarMargenesSinEncabezadoPortal()},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e){this.$refs.alerta.mostrarAlerta("success",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.cargarUbicaciones(),"0"!==this.id&&(this.procesando.guardar=!0,axios.get("/api/clientes/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;a.imprimir_encabezado_consulta_resultados||(a.margenes_sin_encabezado_portal=e.inicializarMargenesSinEncabezadoPortal()),e.registro=a,e.registro.ubicacion_ciudad&&(e.registroAuxiliar.nivel2=_.get(e.registro.ubicacion_ciudad,"padre.padre_id"),e.registroAuxiliar.nivel3=_.get(e.registro.ubicacion_ciudad,"padre_id"),e.key++)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar cliente",a)})).then((function(){return e.procesando.guardar=!1})))},cargarCookies:function(){var e=localStorage.getItem("clientes-nivel2");e&&!this.registroAuxiliar.nivel2&&(this.registroAuxiliar.nivel2=parseInt(e));var t=localStorage.getItem("clientes-nivel3");t&&!this.registroAuxiliar.nivel3&&(this.registroAuxiliar.nivel3=parseInt(t)),this.key++},inicializarMargenesSinEncabezadoPortal:function(){return{inferior:"altura_pie_pagina_1",superior:"tipo_espacio_0",izquierdo:"1",derecho:"1"}},cargarUbicaciones:function(){var e=this;axios.get("/api/ubicaciones",{params:{padreCodigo:this.$cliente.pais}}).then((function(t){var a=t.data.data;e.ubicacionesNivel2=a,e.cargarCookies()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar ubicaciones",a)}))},guardar:function(){var e=this;this.procesando.guardar=!0;var t=_.cloneDeep(this.registro);0===t.margen_izquierdo_datos_paciente&&(t.margen_izquierdo_datos_paciente=null),t.imprimir_encabezado_consulta_resultados&&(t.margenes_sin_encabezado_portal=null),"0"===this.id?axios.post("/api/clientes",t).then((function(t){var a=t.data.data;e.mostrarExito("Cliente creado"),window.location.href="/clientes/".concat(a.id,"/categorias?nuevo=true")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al crear cliente",a)})).then((function(){return e.procesando.guardar=!1})):axios.patch("/api/clientes/"+this.id,t).then((function(){e.mostrarExito("Cliente actualizado"),window.location.href=e.datos.urlPrevio})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al actualizar cliente",a)})).then((function(){return e.procesando.guardar=!1}))},cambioImprimirEncabezadoConsultaResultados:function(e){e.target.checked?this.registro.margenes_sin_encabezado_portal=null:this.registro.margenes_sin_encabezado_portal=this.inicializarMargenesSinEncabezadoPortal()}},computed:{propsComponente:function(){var e={ref:"ubicacionGeografica".concat(this.$cliente.pais)};switch(this.$cliente.pais){case"EC":e=s(s({},e),{},{provincias:this.ubicacionesNivel2,parroquiaId:this.registro.ubicacion_ciudad_id});break;case"PE":e=s(s({},e),{},{departamentos:this.ubicacionesNivel2,departamentoId:this.registroAuxiliar.nivel2,provinciaId:this.registroAuxiliar.nivel3,distritoId:this.registro.ubicacion_ciudad_id})}return e}}};const l=(0,a(1900).Z)(c,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear cliente":"Editar cliente")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.procesando.guardar}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.guardar,expression:"!procesando.guardar"}],staticClass:"fas fa-save fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.guardar,expression:"procesando.guardar"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n               Guardar\n            ")])]),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:e.datos.urlPrevio}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),e._m(0),e._v(" "),t("div",{staticClass:"tab-content"},[t("div",{staticClass:"tab-pane fade in active",attrs:{id:"datos-generales"}},[t("div",{staticClass:"form-group row"},[e._m(1),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombre",name:"nombre",placeholder:"Coca-Cola",maxlength:"70",autocomplete:"off",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(2),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.razon_social,expression:"registro.razon_social"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"razon_social",placeholder:"The Coca-Cola Company",name:"razon_social",maxlength:"300",autocomplete:"off",required:""},domProps:{value:e.registro.razon_social},on:{input:function(t){t.target.composing||e.$set(e.registro,"razon_social",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(3),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.ruc,expression:"registro.ruc"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"ruc",name:"ruc",placeholder:"1234567891001",maxlength:"13",autocomplete:"off"},domProps:{value:e.registro.ruc},on:{input:function(t){t.target.composing||e.$set(e.registro,"ruc",t.target.value)}}})])]),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(4),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.direccion,expression:"registro.direccion"}],staticClass:"form-control input-sm input-sm",staticStyle:{resize:"none"},attrs:{name:"direccion",rows:"2",placeholder:"Av. Avenida Principal, #123 y cl. Calle Secundaria",autocomplete:"off"},domProps:{value:e.registro.direccion},on:{input:function(t){t.target.composing||e.$set(e.registro,"direccion",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(5),e._v(" "),t("div",{staticClass:"col-sm-9",staticStyle:{"padding-left":"0","padding-right":"0"}},[t("UbicacionGeografica".concat(e.$cliente.pais),e._b({key:e.key,tag:"component",attrs:{cookie:"clientes","provincia-id":e.registroAuxiliar.nivel2,"canton-id":e.registroAuxiliar.nivel3},on:{"update:provinciaId":function(t){return e.$set(e.registroAuxiliar,"nivel2",t)},"update:provincia-id":function(t){return e.$set(e.registroAuxiliar,"nivel2",t)}},model:{value:e.registro.ubicacion_ciudad_id,callback:function(t){e.$set(e.registro,"ubicacion_ciudad_id",t)},expression:"registro.ubicacion_ciudad_id"}},"component",e.propsComponente,!1))],1)]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(6),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.correo_facturas,expression:"registro.correo_facturas"}],staticClass:"form-control input-sm",attrs:{id:"correo_facturas",name:"correo_facturas",type:"email",maxlength:"100",placeholder:"contacto@empresa.com",autocomplete:"off"},domProps:{value:e.registro.correo_facturas},on:{input:function(t){t.target.composing||e.$set(e.registro,"correo_facturas",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(7),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.correo_portal,expression:"registro.correo_portal"}],staticClass:"form-control input-sm",attrs:{id:"correo_portal",name:"correo_portal",type:"email",maxlength:"100",placeholder:"contacto@empresa.com",autocomplete:"off"},domProps:{value:e.registro.correo_portal},on:{input:function(t){t.target.composing||e.$set(e.registro,"correo_portal",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(8),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.telefono_facturas,expression:"registro.telefono_facturas"}],staticClass:"form-control input-sm",attrs:{id:"telefono_facturas",type:"tel",maxlength:"30",autocomplete:"off",placeholder:"+593 912323456",name:"telefono_facturas"},domProps:{value:e.registro.telefono_facturas},on:{input:function(t){t.target.composing||e.$set(e.registro,"telefono_facturas",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(9),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.telefono_adicional,expression:"registro.telefono_adicional"}],staticClass:"form-control input-sm",attrs:{id:"telefono_adicional",type:"tel",maxlength:"30",autocomplete:"off",placeholder:"+593 912323456",name:"telefono_adicional"},domProps:{value:e.registro.telefono_adicional},on:{input:function(t){t.target.composing||e.$set(e.registro,"telefono_adicional",t.target.value)}}})])]),e._v(" "),e.$can("definir-saldo-empresas")?t("div",[t("hr"),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(10),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.saldo,expression:"registro.saldo"}],staticClass:"form-control input-sm",attrs:{id:"saldo",type:"number",min:"0",step:"0.01"},domProps:{value:e.registro.saldo},on:{input:function(t){t.target.composing||e.$set(e.registro,"saldo",t.target.value)}}})])])]):e._e(),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(11),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.membrete_id,expression:"registro.membrete_id"}],staticClass:"form-control input-sm",attrs:{name:"membrete_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"membrete_id",t.target.multiple?a:a[0])}}},[t("option",{domProps:{value:null}},[e._v("Utilizar membrete de sucursal de laboratorio")]),e._v(" "),e._l(e.membretes,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),e._m(12)]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(13),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.firma_id,expression:"registro.firma_id"}],staticClass:"form-control input-sm",attrs:{name:"firma_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"firma_id",t.target.multiple?a:a[0])}}},[t("option",{domProps:{value:null}},[e._v("Utilizar firma de sucursal de laboratorio")]),e._v(" "),e._l(e.firmas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),e._m(14)])]),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"comportamiento"}},[t("div",{staticClass:"form-group row"},[e._m(15),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"imprimir_resultados_ordenes_impagas"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_resultados_ordenes_impagas,expression:"registro.imprimir_resultados_ordenes_impagas"}],attrs:{type:"checkbox",id:"imprimir_resultados_ordenes_impagas",name:"imprimir_resultados_ordenes_impagas"},domProps:{checked:Array.isArray(e.registro.imprimir_resultados_ordenes_impagas)?e._i(e.registro.imprimir_resultados_ordenes_impagas,null)>-1:e.registro.imprimir_resultados_ordenes_impagas},on:{change:function(t){var a=e.registro.imprimir_resultados_ordenes_impagas,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_resultados_ordenes_impagas",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_resultados_ordenes_impagas",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_resultados_ordenes_impagas",o)}}}),e._v("\n                Permitir la impresión de resultados para las órdenes no pagadas\n              ")])]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"mostrar_ordenes_impagas"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_ordenes_impagas,expression:"registro.mostrar_ordenes_impagas"}],attrs:{type:"checkbox",id:"mostrar_ordenes_impagas",name:"mostrar_ordenes_impagas"},domProps:{checked:Array.isArray(e.registro.mostrar_ordenes_impagas)?e._i(e.registro.mostrar_ordenes_impagas,null)>-1:e.registro.mostrar_ordenes_impagas},on:{change:function(t){var a=e.registro.mostrar_ordenes_impagas,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_ordenes_impagas",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_ordenes_impagas",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_ordenes_impagas",o)}}}),e._v("\n                Permitir el envío de resultados para las órdenes no pagadas\n              ")])]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"permitir_descuento"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.permitir_descuento,expression:"registro.permitir_descuento"}],attrs:{type:"checkbox",id:"permitir_descuento",name:"permitir_descuento"},domProps:{checked:Array.isArray(e.registro.permitir_descuento)?e._i(e.registro.permitir_descuento,null)>-1:e.registro.permitir_descuento},on:{change:function(t){var a=e.registro.permitir_descuento,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"permitir_descuento",a.concat([null])):i>-1&&e.$set(e.registro,"permitir_descuento",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"permitir_descuento",o)}}}),e._v("\n                Permitir realizar descuentos durante la recepción (creación de órdenes)\n              ")])]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"cambio_precio"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.cambio_precio,expression:"registro.cambio_precio"}],attrs:{type:"checkbox",id:"cambio_precio",name:"cambio_precio"},domProps:{checked:Array.isArray(e.registro.cambio_precio)?e._i(e.registro.cambio_precio,null)>-1:e.registro.cambio_precio},on:{change:function(t){var a=e.registro.cambio_precio,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"cambio_precio",a.concat([null])):i>-1&&e.$set(e.registro,"cambio_precio",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"cambio_precio",o)}}}),e._v("\n                Permitir cambiar el precio de los exámenes durante la recepción (creación de\n                órdenes)\n              ")])])])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(16),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"precios"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.precios,expression:"registro.precios"}],attrs:{type:"checkbox",id:"precios",name:"precios"},domProps:{checked:Array.isArray(e.registro.precios)?e._i(e.registro.precios,null)>-1:e.registro.precios},on:{change:function(t){var a=e.registro.precios,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"precios",a.concat([null])):i>-1&&e.$set(e.registro,"precios",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"precios",o)}}}),e._v("\n                Mostrar los precios en el recibo\n              ")])]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"mostrar_detalle_examenes"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_detalle_examenes,expression:"registro.mostrar_detalle_examenes"}],attrs:{type:"checkbox",id:"mostrar_detalle_examenes",name:"mostrar_detalle_examenes"},domProps:{checked:Array.isArray(e.registro.mostrar_detalle_examenes)?e._i(e.registro.mostrar_detalle_examenes,null)>-1:e.registro.mostrar_detalle_examenes},on:{change:function(t){var a=e.registro.mostrar_detalle_examenes,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_detalle_examenes",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_detalle_examenes",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_detalle_examenes",o)}}}),e._v("\n                Detallar cada examen de la orden\n              ")])])])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(17),e._v(" "),t("div",{staticClass:"col-sm-6"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"mostrar_valores_orden_en_reportes"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_valores_orden_en_reportes,expression:"registro.mostrar_valores_orden_en_reportes"}],attrs:{type:"checkbox",id:"mostrar_valores_orden_en_reportes",name:"mostrar_valores_orden_en_reportes"},domProps:{checked:Array.isArray(e.registro.mostrar_valores_orden_en_reportes)?e._i(e.registro.mostrar_valores_orden_en_reportes,null)>-1:e.registro.mostrar_valores_orden_en_reportes},on:{change:function(t){var a=e.registro.mostrar_valores_orden_en_reportes,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_valores_orden_en_reportes",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_valores_orden_en_reportes",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_valores_orden_en_reportes",o)}}}),e._v("\n                Mostrar los valores de la orden en pantalla\n              ")])]),e._v("\n\n            Imprimir datos del paciente en el lado:\n            "),t("label",{staticClass:"radio-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.posicion_datos_paciente,expression:"registro.posicion_datos_paciente"}],attrs:{name:"posicion_datos_paciente",type:"radio",value:"IZQUIERDA"},domProps:{checked:e._q(e.registro.posicion_datos_paciente,"IZQUIERDA")},on:{change:function(t){return e.$set(e.registro,"posicion_datos_paciente","IZQUIERDA")}}}),e._v("\n              izquierdo\n            ")]),e._v(" "),t("label",{staticClass:"radio-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.posicion_datos_paciente,expression:"registro.posicion_datos_paciente"}],attrs:{name:"posicion_datos_paciente",type:"radio",value:"DERECHA"},domProps:{checked:e._q(e.registro.posicion_datos_paciente,"DERECHA")},on:{change:function(t){return e.$set(e.registro,"posicion_datos_paciente","DERECHA")}}}),e._v("\n              derecho\n            ")]),e._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-sm-7"},[e._v("\n                Aplicar margen izquierdo de:\n                "),t("span",{attrs:{id:"margen_izquierdo_datos_paciente_out"}},[e._v("\n                  "+e._s(e.registro.margen_izquierdo_datos_paciente?e.registro.margen_izquierdo_datos_paciente:"-")+"\n                ")]),e._v("\n                cm"),t("br"),e._v("\n                -3\n                "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.margen_izquierdo_datos_paciente,expression:"registro.margen_izquierdo_datos_paciente"}],staticClass:"span2",staticStyle:{width:"60%",display:"inline-block"},attrs:{id:"margen_izquierdo_datos_paciente",type:"range",max:"12",min:"-3",name:"margen_izquierdo_datos_paciente"},domProps:{value:e.registro.margen_izquierdo_datos_paciente},on:{__r:function(t){return e.$set(e.registro,"margen_izquierdo_datos_paciente",t.target.value)}}}),e._v("\n                12\n              ")])])])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(18),e._v(" "),t("div",{staticClass:"col-sm-5"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"facturar_al_cliente"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.facturar_al_cliente,expression:"registro.facturar_al_cliente"}],staticClass:"md-check",attrs:{id:"facturar_al_cliente",type:"checkbox",name:"facturar_al_cliente"},domProps:{checked:Array.isArray(e.registro.facturar_al_cliente)?e._i(e.registro.facturar_al_cliente,null)>-1:e.registro.facturar_al_cliente},on:{change:function(t){var a=e.registro.facturar_al_cliente,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"facturar_al_cliente",a.concat([null])):i>-1&&e.$set(e.registro,"facturar_al_cliente",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"facturar_al_cliente",o)}}}),e._v("\n                Emitir factura de la orden a nombre del paciente\n              ")])])])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(19),e._v(" "),t("div",{staticClass:"col-sm-9"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"pedidos"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.pedidos,expression:"registro.pedidos"}],staticClass:"md-check",attrs:{type:"checkbox",id:"pedidos",name:"pedidos"},domProps:{checked:Array.isArray(e.registro.pedidos)?e._i(e.registro.pedidos,null)>-1:e.registro.pedidos},on:{change:function(t){var a=e.registro.pedidos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"pedidos",a.concat([null])):i>-1&&e.$set(e.registro,"pedidos",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"pedidos",o)}}}),e._v("\n                Permitir solicitar pedido\n              ")])]),e._v(" "),e.$can("ver-rutas")?t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"solicitudes_visitas"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.solicitudes_visitas,expression:"registro.solicitudes_visitas"}],staticClass:"md-check",attrs:{type:"checkbox",id:"solicitudes_visitas",name:"solicitudes_visitas"},domProps:{checked:Array.isArray(e.registro.solicitudes_visitas)?e._i(e.registro.solicitudes_visitas,null)>-1:e.registro.solicitudes_visitas},on:{change:function(t){var a=e.registro.solicitudes_visitas,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"solicitudes_visitas",a.concat([null])):i>-1&&e.$set(e.registro,"solicitudes_visitas",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"solicitudes_visitas",o)}}}),e._v("\n                Permitir creación de solicitudes de visitas\n              ")])]):e._e(),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"pedidos_precios"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.pedidos_precios,expression:"registro.pedidos_precios"}],staticClass:"md-check",attrs:{id:"pedidos_precios",type:"checkbox",name:"pedidos_precios",value:"1"},domProps:{checked:Array.isArray(e.registro.pedidos_precios)?e._i(e.registro.pedidos_precios,"1")>-1:e.registro.pedidos_precios},on:{change:function(t){var a=e.registro.pedidos_precios,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"1");r.checked?i<0&&e.$set(e.registro,"pedidos_precios",a.concat(["1"])):i>-1&&e.$set(e.registro,"pedidos_precios",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"pedidos_precios",o)}}}),e._v("\n                Permitir visualizar los precios de convenio\n              ")])]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"portal_estado_cuenta"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.portal_estado_cuenta,expression:"registro.portal_estado_cuenta"}],staticClass:"md-check",attrs:{type:"checkbox",id:"portal_estado_cuenta",name:"portal_estado_cuenta"},domProps:{checked:Array.isArray(e.registro.portal_estado_cuenta)?e._i(e.registro.portal_estado_cuenta,null)>-1:e.registro.portal_estado_cuenta},on:{change:function(t){var a=e.registro.portal_estado_cuenta,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"portal_estado_cuenta",a.concat([null])):i>-1&&e.$set(e.registro,"portal_estado_cuenta",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"portal_estado_cuenta",o)}}}),e._v("\n                Permitir visualizar el estado de cuenta\n              ")])]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"portal_mostrar_ordenes_impagas"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.portal_mostrar_ordenes_impagas,expression:"registro.portal_mostrar_ordenes_impagas"}],attrs:{type:"checkbox",id:"portal_mostrar_ordenes_impagas",name:"portal_mostrar_ordenes_impagas"},domProps:{checked:Array.isArray(e.registro.portal_mostrar_ordenes_impagas)?e._i(e.registro.portal_mostrar_ordenes_impagas,null)>-1:e.registro.portal_mostrar_ordenes_impagas},on:{change:function(t){var a=e.registro.portal_mostrar_ordenes_impagas,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"portal_mostrar_ordenes_impagas",a.concat([null])):i>-1&&e.$set(e.registro,"portal_mostrar_ordenes_impagas",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"portal_mostrar_ordenes_impagas",o)}}}),e._v("\n                Mostrar resultados de órdenes impagas\n              ")])]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"descargar_resultados_con_validacion_completa"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.descargar_resultados_con_validacion_completa,expression:"registro.descargar_resultados_con_validacion_completa"}],attrs:{type:"checkbox",id:"descargar_resultados_con_validacion_completa",name:"descargar_resultados_con_validacion_completa"},domProps:{checked:Array.isArray(e.registro.descargar_resultados_con_validacion_completa)?e._i(e.registro.descargar_resultados_con_validacion_completa,null)>-1:e.registro.descargar_resultados_con_validacion_completa},on:{change:function(t){var a=e.registro.descargar_resultados_con_validacion_completa,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"descargar_resultados_con_validacion_completa",a.concat([null])):i>-1&&e.$set(e.registro,"descargar_resultados_con_validacion_completa",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"descargar_resultados_con_validacion_completa",o)}}}),e._v("\n                Descargar resultados con validación completa\n              ")])]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"imprimir_encabezado_consulta_resultados"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_encabezado_consulta_resultados,expression:"registro.imprimir_encabezado_consulta_resultados"}],staticClass:"md-check",attrs:{type:"checkbox",id:"imprimir_encabezado_consulta_resultados",name:"imprimir_encabezado_consulta_resultados"},domProps:{checked:Array.isArray(e.registro.imprimir_encabezado_consulta_resultados)?e._i(e.registro.imprimir_encabezado_consulta_resultados,null)>-1:e.registro.imprimir_encabezado_consulta_resultados},on:{change:[function(t){var a=e.registro.imprimir_encabezado_consulta_resultados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_encabezado_consulta_resultados",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_encabezado_consulta_resultados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_encabezado_consulta_resultados",o)},e.cambioImprimirEncabezadoConsultaResultados]}}),e._v("\n                Imprimir encabezado\n              ")])]),e._v(" "),e.registro.imprimir_encabezado_consulta_resultados?e._e():t("div",{staticClass:"form-group row",attrs:{id:"margenes"}},[e._m(20),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label",attrs:{for:"margenes_sin_encabezado_portal_superior"}},[e._v("Superior")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margenes_sin_encabezado_portal.superior,expression:"registro.margenes_sin_encabezado_portal.superior"}],staticClass:"form-control input-sm",attrs:{id:"margenes_sin_encabezado_portal_superior",name:"margenes_sin_encabezado_portal_superior",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro.margenes_sin_encabezado_portal,"superior",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"tipo_espacio_0"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_1"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_2"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_3"}},[e._v("3.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_4"}},[e._v("4.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_5"}},[e._v("4.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_6"}},[e._v("5.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_7"}},[e._v("5.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_8"}},[e._v("6.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_9"}},[e._v("6.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_10"}},[e._v("7.0 cm")])])]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label",attrs:{for:"margenes_sin_encabezado_portal_inferior"}},[e._v("Inferior")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margenes_sin_encabezado_portal.inferior,expression:"registro.margenes_sin_encabezado_portal.inferior"}],staticClass:"form-control input-sm",attrs:{id:"margenes_sin_encabezado_portal_inferior",name:"margenes_sin_encabezado_portal_inferior",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro.margenes_sin_encabezado_portal,"inferior",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"altura_pie_pagina_1"}},[e._v("1.0 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_2"}},[e._v("1.5 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_3"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_4"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_5"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_6"}},[e._v("3.5 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_7"}},[e._v("4.0 cm")])])])]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label",attrs:{for:"margenes_sin_encabezado_portal_izquierdo"}},[e._v("Izquierda")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margenes_sin_encabezado_portal.izquierdo,expression:"registro.margenes_sin_encabezado_portal.izquierdo"}],staticClass:"form-control input-sm",attrs:{id:"margenes_sin_encabezado_portal_izquierdo",name:"margenes_sin_encabezado_portal_izquierdo",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro.margenes_sin_encabezado_portal,"izquierdo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"0"}},[e._v("0 cm")]),e._v(" "),t("option",{attrs:{value:"0.5"}},[e._v("0.5 cm")]),e._v(" "),t("option",{attrs:{value:"1"}},[e._v("1.0 cm")]),e._v(" "),t("option",{attrs:{value:"1.5"}},[e._v("1.5 cm")]),e._v(" "),t("option",{attrs:{value:"2"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"2.5"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"3"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"3.5"}},[e._v("3.5 cm")])])])]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label",attrs:{for:"margenes_sin_encabezado_portal_derecho"}},[e._v("Derecho")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margenes_sin_encabezado_portal.derecho,expression:"registro.margenes_sin_encabezado_portal.derecho"}],staticClass:"form-control input-sm",attrs:{id:"margenes_sin_encabezado_portal_derecho",name:"margenes_sin_encabezado_portal_derecho",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro.margenes_sin_encabezado_portal,"derecho",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"0"}},[e._v("0 cm")]),e._v(" "),t("option",{attrs:{value:"0.5"}},[e._v("0.5 cm")]),e._v(" "),t("option",{attrs:{value:"1"}},[e._v("1.0 cm")]),e._v(" "),t("option",{attrs:{value:"1.5"}},[e._v("1.5 cm")]),e._v(" "),t("option",{attrs:{value:"2"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"2.5"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"3"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"3.5"}},[e._v("3.5 cm")])])])])]),e._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-sm-6"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal por defecto")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.sucursal_id,expression:"registro.sucursal_id"}],staticClass:"form-control input-sm",attrs:{id:"sucursal_id",name:"sucursal_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{domProps:{value:null}},[e._v("Seleccione...")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                      "+e._s(a.nombre)+"\n                    ")])}))],2)])])])])]),e._v(" "),t("div",{staticClass:"form-group row"},[e._m(21),e._v(" "),t("div",{staticClass:"col-sm-5"},[t("table",{staticClass:"table text-center"},[e._m(22),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"empresa"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.empresa,expression:"registro.empresa"}],attrs:{type:"checkbox",id:"empresa",name:"empresa"},domProps:{checked:Array.isArray(e.registro.empresa)?e._i(e.registro.empresa,null)>-1:e.registro.empresa},on:{change:function(t){var a=e.registro.empresa,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"empresa",a.concat([null])):i>-1&&e.$set(e.registro,"empresa",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"empresa",o)}}}),e._v("\n                      Cliente\n                    ")])])]),e._v(" "),e._m(23),e._v(" "),e._m(24),e._v(" "),e._m(25),e._v(" "),e._m(26)]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"subempresa"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.subempresa,expression:"registro.subempresa"}],attrs:{type:"checkbox",id:"subempresa",name:"subempresa"},domProps:{checked:Array.isArray(e.registro.subempresa)?e._i(e.registro.subempresa,null)>-1:e.registro.subempresa},on:{change:function(t){var a=e.registro.subempresa,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"subempresa",a.concat([null])):i>-1&&e.$set(e.registro,"subempresa",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"subempresa",o)}}}),e._v("\n                      Categoría\n                    ")])])]),e._v(" "),e._m(27),e._v(" "),e._m(28),e._v(" "),e._m(29),e._v(" "),e._m(30)]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"sucursal"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.sucursal,expression:"registro.sucursal"}],staticClass:"md-check",attrs:{type:"checkbox",id:"sucursal",name:"sucursal",value:"1"},domProps:{checked:Array.isArray(e.registro.sucursal)?e._i(e.registro.sucursal,"1")>-1:e.registro.sucursal},on:{change:function(t){var a=e.registro.sucursal,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"1");r.checked?i<0&&e.$set(e.registro,"sucursal",a.concat(["1"])):i>-1&&e.$set(e.registro,"sucursal",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"sucursal",o)}}}),e._v("\n                      Sucursal\n                    ")])])]),e._v(" "),e._m(31),e._v(" "),e._m(32),e._v(" "),e._m(33),e._v(" "),e._m(34)]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"fecha_impresion"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.fecha_impresion,expression:"registro.fecha_impresion"}],attrs:{type:"checkbox",id:"fecha_impresion",name:"fecha_impresion",value:"1"},domProps:{checked:Array.isArray(e.registro.fecha_impresion)?e._i(e.registro.fecha_impresion,"1")>-1:e.registro.fecha_impresion},on:{change:function(t){var a=e.registro.fecha_impresion,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"1");r.checked?i<0&&e.$set(e.registro,"fecha_impresion",a.concat(["1"])):i>-1&&e.$set(e.registro,"fecha_impresion",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"fecha_impresion",o)}}}),e._v("\n                      Fecha de impresión\n                    ")])])]),e._v(" "),e._m(35),e._v(" "),e._m(36),e._v(" "),e._m(37),e._v(" "),e._m(38)]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"sala"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.sala,expression:"registro.sala"}],staticClass:"md-check",attrs:{type:"checkbox",id:"sala",name:"sala"},domProps:{checked:Array.isArray(e.registro.sala)?e._i(e.registro.sala,null)>-1:e.registro.sala},on:{change:function(t){var a=e.registro.sala,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"sala",a.concat([null])):i>-1&&e.$set(e.registro,"sala",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"sala",o)}}}),e._v("\n                      Servicio\n                    ")])])]),e._v(" "),e._m(39),e._v(" "),e._m(40),e._v(" "),t("td"),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"mostrar_sala"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_sala,expression:"registro.mostrar_sala"}],staticClass:"md-check",attrs:{type:"checkbox",id:"mostrar_sala",name:"mostrar_sala"},domProps:{checked:Array.isArray(e.registro.mostrar_sala)?e._i(e.registro.mostrar_sala,null)>-1:e.registro.mostrar_sala},on:{change:function(t){var a=e.registro.mostrar_sala,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_sala",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_sala",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_sala",o)}}}),e._v("\n                      Sala\n                    ")])])]),e._v(" "),e._m(41),e._v(" "),e._m(42),e._v(" "),t("td"),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"cama"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.cama,expression:"registro.cama"}],staticClass:"md-check",attrs:{type:"checkbox",id:"cama",name:"cama"},domProps:{checked:Array.isArray(e.registro.cama)?e._i(e.registro.cama,null)>-1:e.registro.cama},on:{change:function(t){var a=e.registro.cama,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"cama",a.concat([null])):i>-1&&e.$set(e.registro,"cama",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"cama",o)}}}),e._v("\n                      Cama\n                    ")])])]),e._v(" "),e._m(43),e._v(" "),e._m(44),e._v(" "),t("td"),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"mostrar_tipo_paciente"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_tipo_paciente,expression:"registro.mostrar_tipo_paciente"}],staticClass:"md-check",attrs:{type:"checkbox",id:"mostrar_tipo_paciente",name:"mostrar_tipo_paciente"},domProps:{checked:Array.isArray(e.registro.mostrar_tipo_paciente)?e._i(e.registro.mostrar_tipo_paciente,null)>-1:e.registro.mostrar_tipo_paciente},on:{change:function(t){var a=e.registro.mostrar_tipo_paciente,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_tipo_paciente",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_tipo_paciente",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_tipo_paciente",o)}}}),e._v("\n                      Tipo paciente\n                    ")])])]),e._v(" "),e._m(45),e._v(" "),t("td"),e._v(" "),t("td"),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"mostrar_numero_orden_externa"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_numero_orden_externa,expression:"registro.mostrar_numero_orden_externa"}],staticClass:"md-check",attrs:{type:"checkbox",id:"mostrar_numero_orden_externa",name:"mostrar_numero_orden_externa"},domProps:{checked:Array.isArray(e.registro.mostrar_numero_orden_externa)?e._i(e.registro.mostrar_numero_orden_externa,null)>-1:e.registro.mostrar_numero_orden_externa},on:{change:function(t){var a=e.registro.mostrar_numero_orden_externa,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_numero_orden_externa",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_numero_orden_externa",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_numero_orden_externa",o)}}}),e._v("\n                      Referencia\n                    ")])])]),e._v(" "),e._m(46),e._v(" "),t("td"),e._v(" "),t("td"),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"mostrar_referencia_auxiliar_pdf_resultados"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.mostrar_referencia_auxiliar_pdf_resultados,expression:"registro.mostrar_referencia_auxiliar_pdf_resultados"}],attrs:{type:"checkbox",id:"mostrar_referencia_auxiliar_pdf_resultados",name:"mostrar_referencia_auxiliar_pdf_resultados"},domProps:{checked:Array.isArray(e.registro.mostrar_referencia_auxiliar_pdf_resultados)?e._i(e.registro.mostrar_referencia_auxiliar_pdf_resultados,null)>-1:e.registro.mostrar_referencia_auxiliar_pdf_resultados},on:{change:function(t){var a=e.registro.mostrar_referencia_auxiliar_pdf_resultados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"mostrar_referencia_auxiliar_pdf_resultados",a.concat([null])):i>-1&&e.$set(e.registro,"mostrar_referencia_auxiliar_pdf_resultados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"mostrar_referencia_auxiliar_pdf_resultados",o)}}}),e._v("\n                      Referencia auxiliar examen\n                    ")])])]),e._v(" "),e._m(47),e._v(" "),t("td"),e._v(" "),t("td"),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"imprimir_tipo_atencion_pdf_resultados"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_tipo_atencion_pdf_resultados,expression:"registro.imprimir_tipo_atencion_pdf_resultados"}],attrs:{type:"checkbox",id:"imprimir_tipo_atencion_pdf_resultados",name:"imprimir_tipo_atencion_pdf_resultados"},domProps:{checked:Array.isArray(e.registro.imprimir_tipo_atencion_pdf_resultados)?e._i(e.registro.imprimir_tipo_atencion_pdf_resultados,null)>-1:e.registro.imprimir_tipo_atencion_pdf_resultados},on:{change:function(t){var a=e.registro.imprimir_tipo_atencion_pdf_resultados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_tipo_atencion_pdf_resultados",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_tipo_atencion_pdf_resultados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_tipo_atencion_pdf_resultados",o)}}}),e._v("\n                      Tipo atención\n                    ")])])]),e._v(" "),e._m(48),e._v(" "),t("td"),e._v(" "),t("td"),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"imprimir_medico"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_medico,expression:"registro.imprimir_medico"}],attrs:{type:"checkbox",id:"imprimir_medico",name:"imprimir_medico"},domProps:{checked:Array.isArray(e.registro.imprimir_medico)?e._i(e.registro.imprimir_medico,null)>-1:e.registro.imprimir_medico},on:{change:function(t){var a=e.registro.imprimir_medico,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_medico",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_medico",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_medico",o)}}}),e._v("\n                      Médico\n                    ")])])]),e._v(" "),e._m(49),e._v(" "),e._m(50),e._v(" "),t("td"),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",{staticClass:"text-left"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"imprimir_edad"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_edad,expression:"registro.imprimir_edad"}],attrs:{type:"checkbox",id:"imprimir_edad",name:"imprimir_edad"},domProps:{checked:Array.isArray(e.registro.imprimir_edad)?e._i(e.registro.imprimir_edad,null)>-1:e.registro.imprimir_edad},on:{change:function(t){var a=e.registro.imprimir_edad,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_edad",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_edad",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_edad",o)}}}),e._v("\n                      Edad\n                    ")])])]),e._v(" "),e._m(51),e._v(" "),e._m(52),e._v(" "),t("td"),e._v(" "),t("td")])])])])])])],1)],1)}),[function(){var e=this,t=e._self._c;return t("ul",{staticClass:"nav nav-tabs"},[t("li",{staticClass:"active"},[t("a",{attrs:{"data-toggle":"tab",href:"#datos-generales"}},[e._v("Datos generales")])]),e._v(" "),t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#comportamiento"}},[e._v("Comportamiento")])])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva obligatorio",attrs:{for:"nombre"}},[this._v("Nombre")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva obligatorio",attrs:{for:"razon_social"}},[this._v("\n              Razón social")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva",attrs:{for:"ruc"}},[this._v("RUC")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva",attrs:{for:"direccion"}},[this._v("Dirección")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva",attrs:{for:"ubicacion_ciudad_id"}},[this._v("Ubicación")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva",attrs:{for:"correo_facturas"}},[this._v("Correo electrónico facturas")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva",attrs:{for:"correo_portal"}},[this._v("Correo electrónico portal")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva",attrs:{for:"telefono_facturas"}},[this._v("Teléfono facturas")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva",attrs:{for:"telefono_adicional"}},[this._v("Teléfono adicional")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva"},[this._v("Saldo")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva"},[this._v("Membrete personalizado")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-2"},[e("a",{staticClass:"btn btn-default btn-sm",attrs:{href:"/membretes/create"}},[this._v("Cancelar y crear membrete")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva"},[this._v("Firma en resultados y validación ")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-2"},[e("a",{staticClass:"btn btn-default btn-sm",attrs:{href:"/firmas/create"}},[this._v("Cancelar y crear firma")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva"},[this._v("Órdenes de laboratorio")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva"},[this._v("Recibos de órdenes de laboratorio")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva"},[this._v("Reporte de resultados")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva"},[this._v("Facturación")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva"},[this._v("Portal de consulta de resultados")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-12"},[e("label",[this._v("Área de impresión")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-3"},[e("label",{staticClass:"etiqueta-responsiva"},[this._v("Impresión de campos especiales")])])},function(){var e=this,t=e._self._c;return t("tr",[t("td",{staticClass:"text-right"},[e._v("Afecta a:")]),e._v(" "),t("td",[e._v("Resultado")]),e._v(" "),t("td",[e._v("Recibo")]),e._v(" "),t("td",[e._v("Pedido")]),e._v(" "),t("td",[e._v("Cotización")])])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("td",[e("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null).exports},5538:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(4590),o=a(2328),i=a(2534),s=a(9107);const n={components:{Liston:o.Z,SelectMedico:i.Z,BuscarExamenModal:s.Z},props:["datos"],data:function(){return{generandoArchivo:!1,cadenaBusqueda:"",filtros:{fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),usuario_id:"",usuario_nombre:"",sucursal_id:"",empresa_id:"",subempresa_id:"",medico_id:"",tipo_atencion_id:"",tipo_paciente_id:"",plan_salud_id:"",sala_id:"",examen_id:"",examen_codigo:"",tabla:"ordenes"},usuarios:[],sucursales:[],empresas:[],empresa:"",subempresas:[],tiposAtenciones:[],tiposPacientes:[],planesSalud:[],salas:[]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/catalogos",{params:{catalogo:r.oH.CLIENTES}}).then((function(t){var a=t.data.data;e.empresas=a,e.datos.permisos.cambiarEmpresas||(e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Clientes!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.SUCURSALES}}).then((function(t){var a=t.data.data;e.sucursales=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Sucursales!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.SERVICIO}}).then((function(t){var a=t.data.data;e.salas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Servicios!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.TIPO_ATENCION}}).then((function(t){var a=t.data.data;e.tiposAtenciones=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Tipos Atención!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.PLAN_SALUD}}).then((function(t){var a=t.data.data;e.planesSalud=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Planes Salud!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.USUARIOS}}).then((function(t){var a=t.data.data;e.usuarios=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Tipos Usuarios!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.TIPOS_PACIENTES}}).then((function(t){var a=t.data.data;e.tiposPacientes=a}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Tipos Pacientes")})),this.datos.permisos.cambiarSucursal||(this.filtros.sucursal_id=this.datos.sucursalActivaId),this.$refs.cargando.alternar()},borrarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.usuario_id="",this.filtros.usuario_nombre="",this.filtros.subempresa_id="",this.filtros.medico_id="",this.filtros.sala_id="",this.filtros.tipo_atencion_id="",this.filtros.plan_salud_id="",this.filtros.examen_id="",this.filtros.examen_codigo="",this.filtros.mostrar_cliente_categoria=!1,this.filtros.tabla="ordenes",this.datos.permisos.cambiarSucursal&&(this.filtros.sucursal_id=""),this.datos.permisos.cambiarEmpresas&&(this.empresa="",this.filtros.empresa_id="")},abrirBusquedaUsuario:function(){this.cadenaBusqueda="",$("#busquedaUsuario").modal()},seleccionarUsuario:function(e){this.filtros.usuario_id=e.id,this.filtros.usuario_nombre=e.nombre_usuario,$("#busquedaUsuario").modal("hide")},limpiarUsuario:function(){this.filtros.usuario_id="",this.filtros.usuario_nombre=""},limpiarCadenaBusqueda:function(){this.cadenaBusqueda=""},generarExcel:function(){var e=this,t=this.validarFechas(t);(t=this.validarRangoFechas(t))&&(this.generandoArchivo=!0,axios.get("/epi/excel",{responseType:"arraybuffer",params:this.filtros}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=document.getElementById("link-descargas");r.href=window.URL.createObjectURL(a),r.download=t.split("filename=")[1],r.click()})).catch((function(t){var a=t.response,r=String.fromCharCode.apply(null,new Uint8Array(a.data)),o=JSON.parse(r),i=o.errors?o.errors:o.message;i=i||"Error al generar informe con formato Excel.",e.mostrarErrores("¡Error!",i)})).then((function(){return e.generandoArchivo=!1})))},validarFechas:function(e){var t=new RegExp("([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))");return(e=t.test(this.filtros.fecha_desde))?(e=t.test(this.filtros.fecha_hasta))||(this.mostrarErrores("¡Error!",' La "Fecha Hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores("¡Error!",'La "Fecha Desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e)},validarRangoFechas:function(e){var t=moment(this.filtros.fecha_hasta,"YYYY-MM-DD"),a=moment(this.filtros.fecha_desde,"YYYY-MM-DD"),r=t.diff(a,"months");return r>2&&(this.mostrarErrores("¡Error!",'El rango entre la "Fecha Desde" y "Fecha Hasta" supera los 2 meses.'),e=!1),r<0&&(this.mostrarErrores("¡Error!",'El campo "Fecha hasta" debe ser una fecha posterior a "Fecha desde".'),e=!1),e},borrarFiltroExamen:function(){this.filtros.examen_id="",this.filtros.examen_codigo=""},aumentarSeparador:function(e){return e+=e?"&":"?"},cambiarEmpresa:function(){this.filtros.subempresa_id="",""!==this.empresa?(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas):(this.filtros.empresa_id="",this.subempresas="")},pedidosSeleccionado:function(){this.filtros.plan_salud_id="",this.filtros.tipo_paciente_id=""},examenSeleccionado:function(e){this.filtros.examen_id=e.id,this.filtros.examen_codigo=e.codigo}},computed:{usuariosFiltrados:function(){if(!_.isEmpty(this.usuarios)){var e=new RegExp(removeDiacritics(this.cadenaBusqueda),"i");return this.usuarios.filter((function(t){return e.test(removeDiacritics(t.nombre_usuario))||e.test(removeDiacritics(t.nombre_completo))}))}return this.usuarios}}};const c=(0,a(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("liston"),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      EPI\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{id:"generarInformeEpi",type:"button",disabled:e.generandoArchivo},on:{click:e.generarExcel}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoArchivo,expression:"!generandoArchivo"}],staticClass:"fas fa-print fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.generandoArchivo,expression:"generandoArchivo"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n             Generar informe\n          ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[e._v("\n            Borrar filtros\n          ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}})])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.empresa,expression:"empresa"}],staticClass:"form-control input-sm",attrs:{name:"empresa_id",id:"empresa_id",disabled:!e.datos.permisos.cambiarEmpresas},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.empresa=t.target.multiple?a:a[0]},e.cambiarEmpresa]}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.empresas,(function(a){return t("option",{domProps:{value:a}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresa_id,expression:"filtros.subempresa_id"}],staticClass:"form-control input-sm",attrs:{name:"subempresa_id",id:"subempresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresa_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.datos.permisos.cambiarSucursal},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico_id"}},[e._v("Médico")]),e._v(" "),t("select-medico",{attrs:{id:"medico_id",catalogo:"MEDICOS",etiqueta:"nombre_completo"},model:{value:e.filtros.medico_id,callback:function(t){e.$set(e.filtros,"medico_id",t)},expression:"filtros.medico_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sala_id"}},[e._v("Servicio")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sala_id,expression:"filtros.sala_id"}],staticClass:"form-control input-sm",attrs:{name:"sala_id",id:"sala_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sala_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.salas,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_atencion_id,expression:"filtros.tipo_atencion_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",name:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_atencion_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposAtenciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),"ordenes"===e.filtros.tabla?t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"plan_salud_id"}},[e._v("Plan salud")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.plan_salud_id,expression:"filtros.plan_salud_id"}],staticClass:"form-control input-sm",attrs:{id:"plan_salud_id",name:"plan_salud_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"plan_salud_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.planesSalud,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]):e._e(),e._v(" "),"ordenes"===e.filtros.tabla?t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_paciente_id"}},[e._v("\n              Tipo paciente\n            ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_paciente_id,expression:"filtros.tipo_paciente_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_paciente_id",name:"tipo_paciente_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_paciente_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposPacientes,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]):e._e()])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario"}},[e._v("Usuario")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.usuario_nombre,expression:"filtros.usuario_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"usuario",maxlength:"15",disabled:"true"},domProps:{value:e.filtros.usuario_nombre},on:{input:function(t){t.target.composing||e.$set(e.filtros,"usuario_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarUsuario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBusquedaUsuario}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examen_codigo,expression:"filtros.examen_codigo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",maxlength:"15",disabled:"true"},domProps:{value:e.filtros.examen_codigo},on:{input:function(t){t.target.composing||e.$set(e.filtros,"examen_codigo",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),e._m(1)])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tabla,expression:"filtros.tabla"}],attrs:{type:"radio",name:"tabla",id:"tablaOrdenes",value:"ordenes"},domProps:{checked:e._q(e.filtros.tabla,"ordenes")},on:{change:function(t){return e.$set(e.filtros,"tabla","ordenes")}}}),e._v("\n                Órdenes\n              ")])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tabla,expression:"filtros.tabla"}],attrs:{type:"radio",name:"tabla",id:"tablaPedidos",value:"pedidos"},domProps:{checked:e._q(e.filtros.tabla,"pedidos")},on:{change:[function(t){return e.$set(e.filtros,"tabla","pedidos")},e.pedidosSeleccionado]}}),e._v("\n                Pedidos\n              ")])])])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"busquedaUsuario",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(2),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(3),e._v(" "),t("tbody",[e._l(e.usuariosFiltrados,(function(a){return[t("tr",[t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.nombre_usuario))]),e._v(" "),t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.nombre_completo))]),e._v(" "),t("td",{staticClass:"centrado-vertical text-right"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Seleccionar usuario"},on:{click:function(t){return e.seleccionarUsuario(a)}}},[t("i",{staticClass:"fas fa-check"})])])])]}))],2)])])])])])]),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.examenSeleccionado}}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Usuarios")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-4 text-center"},[e._v("Usuario")]),e._v(" "),t("th",{staticClass:"col-sm-7 text-center"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])}],!1,null,null,null).exports},757:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],data:function(){return{registro:{nombre:""}}},mounted:function(){this.cargarDatos()},methods:{cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/especialidades/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar las especialidades",a)})).then((function(){return e.$refs.cargando.alternar()})))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/especialidades",a="post";"0"!==this.id&&(t="/api/especialidades/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar la especialidad",a)}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/especialidades"},regresar:function(){window.history.back()}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear especialidad":"Editar especialidad")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombres"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},3837:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{cargando:!1,cadenaBusqueda:"",especialidades:[],paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0}}},mounted:function(){this.cargarDatos()},methods:{buscarEspecialidades:function(){this.paginacion.paginaActual=1,this.cargarEspecialidades()},cargarEspecialidades:function(){var e=this;this.cargando=!0,this.especialidades=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginacion.paginaActual};axios.get("/api/especialidades",{params:t}).then((function(t){var a=t.data.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total,e.especialidades=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar las especialidades",a)})).finally((function(){return e.cargando=!1}))},cargarDatos:function(){this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginacion.paginaActual=1,this.cargarEspecialidades()},editarEspecialidad:function(e){window.location.href="/especialidades/"+e.id+"/edit"},eliminarEspecialidad:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/especialidades/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("Especialidad eliminada exitosamente")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al eliminar la especialidad",a)}))},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginacion.paginaActual=1,this.cargarEspecialidades()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Especialidades\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarEspecialidades.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarEspecialidades}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[e.$can("crear-especialidades")?t("a",{staticClass:"btn btn-primary",attrs:{href:"/especialidades/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")]):e._e()])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.especialidades.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.especialidades,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.nombre)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-especialidades")},on:{click:function(t){return e.editarEspecialidad(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.$can("eliminar-especialidades")},on:{click:function(t){return e.eliminarEspecialidad(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.especialidades.length,tipo:"especialidades"}}),e._v(" "),!e.cargando&&e.especialidades.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarEspecialidades,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-md-3 text-center"})])])}],!1,null,null,null).exports},6475:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(2534),o=a(9107),i=a(755),s=a(9794);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d={components:{SelectMedico:r.Z,BuscarExamenModal:o.Z,HoraModal:i.Z,BuscarUsuarioModal:s.Z},props:["datos"],data:function(){return{procesando:{informe:!1},filtros:{fecha_orden_desde:moment().format("YYYY-MM-DD"),fecha_orden_hasta:moment().format("YYYY-MM-DD"),fecha_validacion_desde:"",fecha_validacion_hasta:"",estado:"",hora_orden_desde:"00:00:00",hora_orden_hasta:"23:59:59",hora_validacion_desde:"00:00:00",hora_validacion_hasta:"23:59:59",grupo_id:"",seccion_id:"",plan_salud_id:"",sucursal_id:"",sala_id:"",empresa_id:"",subempresa_id:"",examen_id:"",examen_codigo:"",tipo_atencion_id:"",medico_id:"",laboratorio_id:"",usuario_valida_id:""},auxiliar:{usuario_valida_nombre:""},opciones:{mostrar_sucursal:!1,mostrar_equipo:!1,matriz_por:""},grupos:[],secciones:[],planesSalud:[],sucursales:[],salas:[],empresas:[],empresa:"",subempresas:[],tiposAtenciones:[],laboratorios:[]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/informes/estadisticos").then((function(t){e.tiposAtenciones=t.data.data.tiposAtenciones,e.laboratorios=t.data.data.laboratorios,e.planesSalud=t.data.data.planesSalud,e.sucursales=t.data.data.sucursales,e.secciones=t.data.data.secciones,e.empresas=t.data.data.empresas,e.grupos=t.data.data.grupos,e.salas=t.data.data.salas,e.filtros.estado="",e.datos.permisos.cambiarSucursal||(e.filtros.sucursal_id=e.datos.sucursalActivaId),e.datos.permisos.cambiarEmpresas||(e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al inicializar los filtros",a)})).then((function(){return e.$refs.cargando.alternar()}))},limpiarFiltros:function(){this.filtros.fecha_orden_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_orden_hasta=moment().format("YYYY-MM-DD"),this.filtros.fecha_validacion_desde="",this.filtros.fecha_validacion_hasta="",this.filtros.estado="",this.filtros.hora_orden_desde="00:00:00",this.filtros.hora_orden_hasta="23:59:59",this.filtros.hora_validacion_desde="00:00:00",this.filtros.hora_validacion_hasta="23:59:59",this.filtros.grupo_id="",this.filtros.seccion_id="",this.filtros.plan_salud_id="",this.filtros.sala_id="",this.filtros.subempresa_id="",this.filtros.examen_id="",this.filtros.examen_codigo="",this.filtros.tipo_atencion_id="",this.filtros.medico_id="",this.filtros.laboratorio_id="",this.filtros.usuario_valida_id="",this.auxiliar.usuario_valida_nombre="",this.opciones.matriz_por="",this.opciones.mostrar_sucursal=!1,this.opciones.mostrar_equipo=!1,this.datos.permisos.cambiarSucursal&&(this.filtros.sucursal_id=""),this.datos.permisos.cambiarEmpresas&&(this.empresa="",this.filtros.empresa_id="")},cambiarGrupo:function(){this.filtros.examen_id="",this.filtros.seccion_id=""},cambiarSeccion:function(){this.filtros.grupo_id="",this.filtros.examen_id=""},abrirBusquedaExamen:function(){$("#buscarExamen").modal()},examenSeleccionado:function(e){this.filtros.examen_id=e.id,this.filtros.examen_codigo=e.codigo,this.filtros.grupo_id="",this.filtros.seccion_id=""},limpiarExamen:function(){this.filtros.examen_id="",this.filtros.examen_codigo=""},generarPdf:function(){var e=this.validarHorasMinutos();if(e=this.validarFechas(e),e=this.validarRangoFechas(e)){var t=c(c({},this.filtros),this.opciones);t.mostrar_sucursal=t.mostrar_sucursal?1:null,t.mostrar_equipo=t.mostrar_equipo?1:null,t=this.obtenerParametrosUrl(t),window.open("/informes/estadisticos/pdf".concat(t),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")}},generarExcel:function(){var e=this.validarHorasMinutos();e=this.validarFechas(e),(e=this.validarRangoFechas(e))&&this.generarExcelRecurso("excel")},generarExcelPorMartiz:function(){var e=this.validarHorasMinutos();e=this.validarFechas(e),(e=this.validarRangoFechas(e))&&this.generarExcelRecurso("excel-por-matriz")},generarExcelRecurso:function(e){var t=this;this.procesando.informe=!0;var a=c(c({},this.filtros),this.opciones);a=this.obtenerParametrosUrl(a),axios.get("/informes/estadisticos/".concat(e).concat(a),{responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=decodeURIComponent(e.headers["content-type"]),r=t.split("filename=")[1],o=new Blob([e.data],{type:a}),i=document.getElementById("link-descargas");i.href=window.URL.createObjectURL(o),i.download=r,i.click()})).catch((function(e){var a=e.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=t.procesarErrorResponse(o);t.mostrarErrores("Error al generar archivo",i)})).then((function(){return t.procesando.informe=!1}))},horaSeleccionada:function(e,t){this.filtros[t]=e},validarFechas:function(e){var t=new RegExp("([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))");return this.filtros.fecha_orden_desde||this.filtros.fecha_orden_hasta||this.filtros.fecha_validacion_desde&&this.filtros.fecha_validacion_hasta?this.filtros.fecha_validacion_desde||this.filtros.fecha_validacion_hasta||this.filtros.fecha_orden_desde&&this.filtros.fecha_orden_hasta?(e=!this.filtros.fecha_orden_desde||t.test(this.filtros.fecha_orden_desde))?(e=!this.filtros.fecha_orden_hasta||t.test(this.filtros.fecha_orden_hasta))?(e=!this.filtros.fecha_validacion_desde||t.test(this.filtros.fecha_validacion_desde))?(e=!this.filtros.fecha_validacion_hasta||t.test(this.filtros.fecha_validacion_hasta))||(this.mostrarErrores('La "Fecha validación hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores('La "Fecha validación desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores('La "Fecha orden hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores('La "Fecha orden desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores('Las "Fecha validación desde" y "Fecha validación hasta" están vacías'),!1):(this.mostrarErrores('Las "Fecha orden desde" y "Fecha orden hasta" están vacías'),!1)},validarRangoFechas:function(e){var t=moment(this.filtros.fecha_orden_hasta+" "+this.filtros.hora_orden_hasta,"YYYY-MM-DD HH:mm:ss"),a=moment(this.filtros.fecha_orden_desde+" "+this.filtros.hora_orden_desde,"YYYY-MM-DD HH:mm:ss"),r=moment(this.filtros.fecha_validacion_hasta+" "+this.filtros.hora_validacion_hasta,"YYYY-MM-DD HH:mm:ss"),o=moment(this.filtros.fecha_validacion_desde+" "+this.filtros.hora_validacion_desde,"YYYY-MM-DD HH:mm:ss"),i=t.diff(a,"days",!0),s=r.diff(o,"days",!0);return i<0&&(this.mostrarErrores('La "Fecha orden desde" no debe ser mayor que la "Fecha orden hasta".'),e=!1),s<0&&(this.mostrarErrores('La "Fecha validación desde" no debe ser mayor que la "Fecha validación hasta".'),e=!1),e},cambiarEmpresa:function(){this.filtros.subempresa_id="",""!==this.empresa?(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas):(this.filtros.empresa_id="",this.subempresas="")},validarHorasMinutos:function(){return this.filtros.hora_orden_desde>"23:59:59"?(this.mostrarErrores("El campo Hora Desde no debe ser mayor que 23"),!1):this.filtros.hora_orden_desde<"00:00:00"?(this.mostrarErrores("El campo Hora Desde no debe ser menor que 0"),!1):this.filtros.hora_orden_hasta>"23:59:59"?(this.mostrarErrores("El campo Hora Hasta no debe ser mayor que 23"),!1):this.filtros.hora_orden_hasta<"00:00:00"?(this.mostrarErrores("El campo Hora Hasta no debe ser menor que 0"),!1):this.filtros.hora_validacion_desde>"23:59:59"?(this.mostrarErrores("El campo Hora Desde no debe ser mayor que 23"),!1):this.filtros.hora_validacion_desde<"00:00:00"?(this.mostrarErrores("El campo Hora Desde no debe ser menor que 0"),!1):this.filtros.hora_validacion_hasta>"23:59:59"?(this.mostrarErrores("El campo Hora Hasta no debe ser mayor que 23"),!1):!(this.filtros.hora_validacion_hasta<"00:00:00")||(this.mostrarErrores("El campo Hora Hasta no debe ser menor que 0"),!1)},cambioMatrizPor:function(e){e.target.value&&(this.opciones.mostrar_sucursal=!1,this.opciones.mostrar_equipo=!1)},limpiarUsuarioValida:function(){this.filtros.usuario_valida_id="",this.auxiliar.usuario_valida_nombre=""},abrirBusquedaUsuarioValida:function(){$("#buscarUsuario").modal()},usuarioSeleccionado:function(e){this.filtros.usuario_valida_id=e.id,this.auxiliar.usuario_valida_nombre=e.nombre_usuario}}};const u=(0,a(1900).Z)(d,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Estadísticos\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{type:"button",disabled:e.procesando.informe,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.informe,expression:"!procesando.informe"}],staticClass:"fas fa-print fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.informe,expression:"procesando.informe"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Generar informe "),t("span",{staticClass:"caret"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu"},[t("li",[t("a",{directives:[{name:"show",rawName:"v-show",value:!(e.opciones.matriz_por||e.opciones.mostrar_sucursal||e.opciones.mostrar_equipo),expression:"!(opciones.matriz_por || opciones.mostrar_sucursal ||  opciones.mostrar_equipo)"}],attrs:{href:"#"},on:{click:e.generarPdf}},[t("i",{staticClass:"far fa-file-pdf fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  PDF\n                ")])]),e._v(" "),t("li",[t("a",{directives:[{name:"show",rawName:"v-show",value:!e.opciones.matriz_por,expression:"!opciones.matriz_por"}],attrs:{id:"generarInformeDetalleOrdenesExcel",href:"#"},on:{click:e.generarExcel}},[t("i",{staticClass:"far fa-file-excel fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  Excel\n                ")])]),e._v(" "),t("li",[t("a",{directives:[{name:"show",rawName:"v-show",value:e.opciones.matriz_por,expression:"opciones.matriz_por"}],attrs:{id:"generarInformeDetalleOrdenesExcelPorExamen",href:"#"},on:{click:e.generarExcelPorMartiz}},[t("i",{staticClass:"far fa-file-excel fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  Excel por matriz\n                ")])])])])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n            Borrar filtros\n          ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"fecha_orden_desde"}},[e._v("Fecha orden desde")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_orden_desde,expression:"filtros.fecha_orden_desde"}],staticClass:"form-control input-sm",attrs:{id:"fecha_orden_desde","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",autocomplete:"off"}}),e._v(" "),e._m(1)])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"fecha_orden_hasta"}},[e._v("Fecha orden hasta")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_orden_hasta,expression:"filtros.fecha_orden_hasta"}],staticClass:"form-control input-sm",attrs:{id:"fecha_orden_hasta","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",autocomplete:"off"}}),e._v(" "),e._m(2)])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"fecha_validacion_desde"}},[e._v("Fecha validación desde")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_validacion_desde,expression:"filtros.fecha_validacion_desde"}],staticClass:"form-control input-sm",attrs:{id:"fecha_validacion_desde","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",autocomplete:"off"}}),e._v(" "),e._m(3)])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"fecha_validacion_hasta"}},[e._v("Fecha validación hasta")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_validacion_hasta,expression:"filtros.fecha_validacion_hasta"}],staticClass:"form-control input-sm",attrs:{id:"fecha_validacion_hasta","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",autocomplete:"off"}}),e._v(" "),e._m(4)])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.datos.permisos.cambiarSucursal},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.empresa,expression:"empresa"}],staticClass:"form-control input-sm",attrs:{name:"empresa_id",id:"empresa_id",disabled:!e.datos.permisos.cambiarEmpresas},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.empresa=t.target.multiple?a:a[0]},function(t){return e.cambiarEmpresa()}]}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.empresas,(function(a){return t("option",{domProps:{value:a}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresa_id,expression:"filtros.subempresa_id"}],staticClass:"form-control input-sm",attrs:{name:"subempresa_id",id:"subempresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresa_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sala_id"}},[e._v("Servicio")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sala_id,expression:"filtros.sala_id"}],staticClass:"form-control input-sm",attrs:{name:"sala_id",id:"sala_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sala_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.salas,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"grupo_id"}},[e._v("Grupo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.grupo_id,expression:"filtros.grupo_id"}],staticClass:"form-control input-sm",attrs:{name:"grupo_id",id:"grupo_id"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"grupo_id",t.target.multiple?a:a[0])},function(t){return e.cambiarGrupo()}]}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.grupos,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Todos",options:e.secciones,label:"nombre",reduce:function(e){return e.id}},on:{input:e.cambiarSeccion},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.seccion_id,callback:function(t){e.$set(e.filtros,"seccion_id",t)},expression:"filtros.seccion_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"plan_salud_id"}},[e._v("Plan salud")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.plan_salud_id,expression:"filtros.plan_salud_id"}],staticClass:"form-control input-sm",attrs:{id:"plan_salud_id",name:"plan_salud_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"plan_salud_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.planesSalud,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_atencion_id,expression:"filtros.tipo_atencion_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",name:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_atencion_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposAtenciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{attrs:{for:"estado"}},[e._v("Estado exámenes")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control input-sm",attrs:{id:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),t("option",{attrs:{value:"CON_RESULTADOS"}},[e._v("Con resultados")]),e._v(" "),t("option",{attrs:{value:"SIN_RESULTADOS"}},[e._v("Sin resultados")])])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examen_codigo,expression:"filtros.examen_codigo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",maxlength:"15",disabled:""},domProps:{value:e.filtros.examen_codigo},on:{input:function(t){t.target.composing||e.$set(e.filtros,"examen_codigo",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBusquedaExamen}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico_id"}},[e._v("Médico")]),e._v(" "),t("select-medico",{attrs:{id:"medico_id",catalogo:"MEDICOS",etiqueta:"nombre_completo"},model:{value:e.filtros.medico_id,callback:function(t){e.$set(e.filtros,"medico_id",t)},expression:"filtros.medico_id"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"laboratorio_id"}},[e._v("Laboratorio remisión")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.laboratorio_id,expression:"filtros.laboratorio_id"}],staticClass:"form-control input-sm",attrs:{id:"laboratorio_id",name:"laboratorio_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"laboratorio_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.laboratorios,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario_valida"}},[e._v("Usuario valida")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.auxiliar.usuario_valida_nombre,expression:"auxiliar.usuario_valida_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"usuario_valida",maxlength:"15",disabled:""},domProps:{value:e.auxiliar.usuario_valida_nombre},on:{input:function(t){t.target.composing||e.$set(e.auxiliar,"usuario_valida_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarUsuarioValida}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBusquedaUsuarioValida}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])])])])])]),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(5),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"matriz_por"}},[e._v("Matriz por")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.opciones.matriz_por,expression:"opciones.matriz_por"}],staticClass:"form-control input-sm",attrs:{id:"matriz_por"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.opciones,"matriz_por",t.target.multiple?a:a[0])},e.cambioMatrizPor]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"TIPOS_ATENCIONES"}},[e._v("Tipo atención")]),e._v(" "),t("option",{attrs:{value:"SUCURSALES"}},[e._v("Sucursal")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.mostrar_sucursal,expression:"opciones.mostrar_sucursal"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.opciones.mostrar_sucursal)?e._i(e.opciones.mostrar_sucursal,"")>-1:e.opciones.mostrar_sucursal},on:{change:function(t){var a=e.opciones.mostrar_sucursal,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.opciones,"mostrar_sucursal",a.concat([""])):i>-1&&e.$set(e.opciones,"mostrar_sucursal",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"mostrar_sucursal",o)}}}),e._v("\n              Mostrar sucursal\n            ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.mostrar_equipo,expression:"opciones.mostrar_equipo"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.opciones.mostrar_equipo)?e._i(e.opciones.mostrar_equipo,"")>-1:e.opciones.mostrar_equipo},on:{change:function(t){var a=e.opciones.mostrar_equipo,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.opciones,"mostrar_equipo",a.concat([""])):i>-1&&e.$set(e.opciones,"mostrar_equipo",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"mostrar_equipo",o)}}}),e._v("\n              Mostrar equipo\n            ")])])])])])]),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.examenSeleccionado}}),e._v(" "),t("hora-modal",{attrs:{id:"horaOrdenDesdeModal",hora:e.filtros.hora_orden_desde},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"hora_orden_desde")}}}),e._v(" "),t("hora-modal",{attrs:{id:"horaOrdenHastaModal",hora:e.filtros.hora_orden_hasta},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"hora_orden_hasta")}}}),e._v(" "),t("hora-modal",{attrs:{id:"horaValidacionDesdeModal",hora:e.filtros.hora_validacion_desde},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"hora_validacion_desde")}}}),e._v(" "),t("hora-modal",{attrs:{id:"horaValidacionHastaModal",hora:e.filtros.hora_validacion_hasta},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"hora_validacion_hasta")}}}),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}}),e._v(" "),t("buscar-usuario-modal",{on:{"usuario-seleccionado":e.usuarioSeleccionado}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaOrdenDesdeModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaOrdenHastaModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaValidacionDesdeModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaValidacionHastaModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Opciones")])])}],!1,null,null,null).exports},4707:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(4590);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const n={props:["id","datos"],data:function(){return{registro:{codigo:"",nombre:"",muestras:[],tiempo_proceso:"",numero_etiquetas:"",ordenamiento:"",nivel_complejidad:"",abreviatura:"",referencia_auxiliar:"",referencia_auxiliar_2:"",condiciones_preanaliticas:"",se_remite:!1,acreditado:!1,resultado_confidencial:!1,microbiologia:!1,imprimir_firma_validador:!1,enviar_fecha_orden:!1,no_procesar_crear:!1,tarifas:[],sistemas_externos:[],laboratorios:[],documentos:[]},tipoDocumentos:Object.entries(r.Ah),tarifas:[],sistemasExternos:[],laboratorios:[],documentos:[],muestras:[]}},mounted:function(){this.cargarDatos()},methods:{cargarDatos:function(){var e=this;"0"!==this.id?(this.$refs.cargando.alternar(),axios.get("/api/examenes/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro.id=a.id,e.registro.codigo=a.codigo,e.registro.nombre=a.nombre,e.registro.tiempo_proceso=a.tiempo_proceso,e.registro.numero_etiquetas=a.numero_etiquetas,e.registro.ordenamiento=a.ordenamiento,e.registro.nivel_complejidad=a.nivel_complejidad,e.registro.abreviatura=a.abreviatura,e.registro.referencia_auxiliar=a.referencia_auxiliar,e.registro.referencia_auxiliar_2=a.referencia_auxiliar_2,e.registro.condiciones_preanaliticas=a.condiciones_preanaliticas,e.registro.se_remite=a.se_remite,e.registro.acreditado=a.acreditado,e.registro.resultado_confidencial=a.resultado_confidencial,e.registro.no_procesar_crear=a.no_procesar_crear,e.registro.microbiologia=a.microbiologia,e.registro.enviar_fecha_orden=a.enviar_fecha_orden,e.registro.imprimir_firma_validador=!!a.extras&&a.extras.imprimir_firma_validador,e.tarifas=a.tarifas,e.sistemasExternos=a.sistemas_externos,e.laboratorios=a.laboratorios,e.cargarTarifas(),e.cargarSistemasExternos(),e.cargarLaboratorios(),e.cargarTipoDocumento(a.documentos),e.cargarMuestras(a.muestras)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar el examen",a)})).then((function(){return e.$refs.cargando.alternar()}))):(this.cargarTarifas(),this.cargarSistemasExternos(),this.cargarLaboratorios(),this.cargarTipoDocumento())},cargarTarifas:function(){var e=this;axios.get("/api/catalogos",{params:{catalogo:r.oH.TARIFAS}}).then((function(t){var a=t.data.data.map((function(t){var a=e.tarifas.find((function(e){return e.id===t.id}));return i(i({},t),{},{valor:a?a.pivot.valor:""})}));e.registro.tarifas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar tarifas",a)}))},cargarSistemasExternos:function(){var e=this;axios.get("/api/catalogos",{params:{catalogo:r.oH.SISTEMAS_EXTERNOS}}).then((function(t){var a=t.data.data.map((function(t){var a=e.sistemasExternos.find((function(e){return e.id===t.id}));return i(i({},t),{},{codigo:a?a.pivot.codigo_examen:""})}));e.registro.sistemas_externos=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar sistemas externos",a)}))},cargarLaboratorios:function(){var e=this;axios.get("/api/catalogos",{params:{catalogo:r.oH.LABORATORIOS}}).then((function(t){var a=t.data.data.map((function(t){var a=e.laboratorios.find((function(e){return e.id===t.id}));return i(i({},t),{},{remite:!!a})}));e.registro.laboratorios=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar laboratorios",a)}))},cargarTipoDocumento:function(e){var t=this;this.tipoDocumentos.forEach((function(e){e[0]!==r.Ah.CERTIFICADO_ASISTENCIA&&t.documentos.push({id:e[0]})})),e&&(this.registro.documentos=e),this.documentos.sort()},cargarMuestras:function(e){var t=this;e.forEach((function(e){t.muestras.push(e.id)})),this.registro.muestras=this.muestras},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/examenes",a="post";"0"!==this.id&&(t="/api/examenes/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar el examen",a)}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},regresar:function(){this.datos.urlPrevio?window.location.href=this.datos.urlPrevio:window.location.href="/examenes"},redireccionar:function(){this.datos.urlPrevio?window.location.href=this.datos.urlPrevio:window.location.href="/examenes"}}};const c=(0,a(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear examen":"Editar examen")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"codigo"}},[e._v("Código")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.codigo,expression:"registro.codigo"}],staticClass:"form-control input-sm",attrs:{id:"codigo",name:"codigo",type:"text",maxlength:"7",required:"",autofocus:""},domProps:{value:e.registro.codigo},on:{input:function(t){t.target.composing||e.$set(e.registro,"codigo",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-5 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"60",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-4 form-group"},[t("label",{staticClass:"obligatorio no-salto-linea",attrs:{for:"tiempo_proceso"}},[e._v("Tiempo proceso")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.tiempo_proceso,expression:"registro.tiempo_proceso"}],staticClass:"form-control input-sm",attrs:{id:"tiempo_proceso",name:"tiempo_proceso",type:"number",min:"0",required:""},domProps:{value:e.registro.tiempo_proceso},on:{input:function(t){t.target.composing||e.$set(e.registro,"tiempo_proceso",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-addon"},[e._v("horas")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-2 form-group"},[t("label",{staticClass:"obligatorio no-salto-linea",attrs:{for:"numero_etiquetas"}},[e._v("No. de etiquetas")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.numero_etiquetas,expression:"registro.numero_etiquetas"}],staticClass:"form-control input-sm",attrs:{id:"numero_etiquetas",name:"numero_etiquetas",type:"number",min:"0",max:"20",step:"1",required:""},domProps:{value:e.registro.numero_etiquetas},on:{input:function(t){t.target.composing||e.$set(e.registro,"numero_etiquetas",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",{attrs:{for:"ordenamiento"}},[e._v("Ordenamiento")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.ordenamiento,expression:"registro.ordenamiento"}],staticClass:"form-control input-sm",attrs:{id:"ordenamiento",name:"ordenamiento",type:"number",min:"0",max:"10000",step:"1"},domProps:{value:e.registro.ordenamiento},on:{input:function(t){t.target.composing||e.$set(e.registro,"ordenamiento",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",{attrs:{for:"nivel_complejidad"}},[e._v("Nivel de complejidad")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nivel_complejidad,expression:"registro.nivel_complejidad"}],staticClass:"form-control input-sm",attrs:{id:"nivel_complejidad",name:"nivel_complejidad",type:"number",min:"0",step:"1"},domProps:{value:e.registro.nivel_complejidad},on:{input:function(t){t.target.composing||e.$set(e.registro,"nivel_complejidad",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",{attrs:{for:"abreviatura"}},[e._v("Abreviatura")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.abreviatura,expression:"registro.abreviatura"}],staticClass:"form-control input-sm",attrs:{id:"abreviatura",name:"abreviatura",type:"text",maxlength:"15"},domProps:{value:e.registro.abreviatura},on:{input:function(t){t.target.composing||e.$set(e.registro,"abreviatura",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",{attrs:{for:"referencia_auxiliar"}},[e._v("Referencia auxiliar")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.referencia_auxiliar,expression:"registro.referencia_auxiliar"}],staticClass:"form-control input-sm",attrs:{id:"referencia_auxiliar",name:"referencia_auxiliar",type:"text",maxlength:"8"},domProps:{value:e.registro.referencia_auxiliar},on:{input:function(t){t.target.composing||e.$set(e.registro,"referencia_auxiliar",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",{attrs:{for:"referencia_auxiliar_2"}},[e._v("Referencia auxiliar 2")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.referencia_auxiliar_2,expression:"registro.referencia_auxiliar_2"}],staticClass:"form-control input-sm",attrs:{id:"referencia_auxiliar_2",name:"referencia_auxiliar_2",type:"text",maxlength:"8"},domProps:{value:e.registro.referencia_auxiliar_2},on:{input:function(t){t.target.composing||e.$set(e.registro,"referencia_auxiliar_2",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4 form-group"},[t("label",{attrs:{for:"condiciones_preanaliticas"}},[e._v("Condiciones preanalíticas")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.condiciones_preanaliticas,expression:"registro.condiciones_preanaliticas"}],staticClass:"form-control input-sm",staticStyle:{resize:"vertical"},attrs:{id:"condiciones_preanaliticas",name:"condiciones_preanaliticas",rows:"1",autocomplete:"off"},domProps:{value:e.registro.condiciones_preanaliticas},on:{input:function(t){t.target.composing||e.$set(e.registro,"condiciones_preanaliticas",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-4 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"muestras"}},[e._v("Muestras")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.muestras.length>0,expression:"registro.muestras.length > 0"}],staticClass:"badge"},[e._v("\n          "+e._s(e.registro.muestras.length)+"\n        ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{multiple:"",id:"muestras",placeholder:"Seleccione...",options:e.datos.muestras,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(t){var a=t.color_tapa_tubo,r=t.nombre;return[e._v("\n            "+e._s(r)+" "+e._s(a?" (".concat(a,")"):"")+"\n          ")]}},{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.registro.muestras.length}},"input",r,!1),o))]}},{key:"option",fn:function(t){var a=t.color_tapa_tubo,r=t.nombre;return[e._v("\n            "+e._s(r)+" "+e._s(a?" (".concat(a,")"):"")+"\n          ")]}}]),model:{value:e.registro.muestras,callback:function(t){e.$set(e.registro,"muestras",t)},expression:"registro.muestras"}})],1),e._v(" "),t("div",{staticClass:"col-md-4 form-group"},[t("label",{attrs:{for:"documentos"}},[e._v("Documentos")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.documentos.length>0,expression:"registro.documentos.length > 0"}],staticClass:"badge"},[e._v("\n          "+e._s(e.registro.documentos.length)+"\n        ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"documentos",multiple:"",placeholder:"Seleccione...",options:e.documentos,label:"id",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(t){var a=t.id;return[e._v("\n            "+e._s(e._f("tipoDocumento")(a))+"\n          ")]}},{key:"option",fn:function(t){var a=t.id;return[e._v("\n            "+e._s(e._f("tipoDocumento")(a))+"\n          ")]}}]),model:{value:e.registro.documentos,callback:function(t){e.$set(e.registro,"documentos",t)},expression:"registro.documentos"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-1 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"microbiologia"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.microbiologia,expression:"registro.microbiologia"}],attrs:{id:"microbiologia",name:"microbiologia",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.microbiologia)?e._i(e.registro.microbiologia,null)>-1:e.registro.microbiologia},on:{change:function(t){var a=e.registro.microbiologia,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"microbiologia",a.concat([null])):i>-1&&e.$set(e.registro,"microbiologia",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"microbiologia",o)}}}),e._v("\n            Microbiología\n          ")])])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"imprimir_firma_validador"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_firma_validador,expression:"registro.imprimir_firma_validador"}],attrs:{id:"imprimir_firma_validador",name:"imprimir_firma_validador",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.imprimir_firma_validador)?e._i(e.registro.imprimir_firma_validador,null)>-1:e.registro.imprimir_firma_validador},on:{change:function(t){var a=e.registro.imprimir_firma_validador,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_firma_validador",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_firma_validador",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_firma_validador",o)}}}),e._v("\n            Imprimir firma validador\n          ")])])]),e._v(" "),t("div",{staticClass:"col-md-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"enviar_fecha_orden"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.enviar_fecha_orden,expression:"registro.enviar_fecha_orden"}],attrs:{id:"enviar_fecha_orden",name:"enviar_fecha_orden",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.enviar_fecha_orden)?e._i(e.registro.enviar_fecha_orden,null)>-1:e.registro.enviar_fecha_orden},on:{change:function(t){var a=e.registro.enviar_fecha_orden,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"enviar_fecha_orden",a.concat([null])):i>-1&&e.$set(e.registro,"enviar_fecha_orden",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"enviar_fecha_orden",o)}}}),e._v("\n            Enviar fecha orden "),t("br"),e._v(" (Aplica solo para integración con sistemas externos)\n          ")])])]),e._v(" "),t("div",{staticClass:"col-md-1 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"se_remite"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.se_remite,expression:"registro.se_remite"}],attrs:{id:"se_remite",name:"se_remite",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.se_remite)?e._i(e.registro.se_remite,null)>-1:e.registro.se_remite},on:{change:function(t){var a=e.registro.se_remite,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"se_remite",a.concat([null])):i>-1&&e.$set(e.registro,"se_remite",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"se_remite",o)}}}),e._v("\n            Se remite\n          ")])])]),e._v(" "),t("div",{staticClass:"col-md-1 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"acreditado"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.acreditado,expression:"registro.acreditado"}],attrs:{id:"acreditado",name:"acreditado",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.acreditado)?e._i(e.registro.acreditado,null)>-1:e.registro.acreditado},on:{change:function(t){var a=e.registro.acreditado,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"acreditado",a.concat([null])):i>-1&&e.$set(e.registro,"acreditado",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"acreditado",o)}}}),e._v("\n            Acreditado\n          ")])])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"resultado_confidencial"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.resultado_confidencial,expression:"registro.resultado_confidencial"}],attrs:{id:"resultado_confidencial",name:"resultado_confidencial",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.resultado_confidencial)?e._i(e.registro.resultado_confidencial,null)>-1:e.registro.resultado_confidencial},on:{change:function(t){var a=e.registro.resultado_confidencial,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"resultado_confidencial",a.concat([null])):i>-1&&e.$set(e.registro,"resultado_confidencial",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"resultado_confidencial",o)}}}),e._v("\n            Resultado confidencial\n          ")])])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"no_procesar_crear"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.no_procesar_crear,expression:"registro.no_procesar_crear"}],attrs:{id:"no_procesar_crear",name:"no_procesar_crear",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.no_procesar_crear)?e._i(e.registro.no_procesar_crear,null)>-1:e.registro.no_procesar_crear},on:{change:function(t){var a=e.registro.no_procesar_crear,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"no_procesar_crear",a.concat([null])):i>-1&&e.$set(e.registro,"no_procesar_crear",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"no_procesar_crear",o)}}}),e._v('\n            Registrar como "No procesado" al crear\n          ')])])])]),e._v(" "),t("div",{staticClass:"row"},[e.registro.tarifas?t("div",{staticClass:"col-md-4"},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.registro.tarifas,(function(a){return[t("tr",[t("td",{staticClass:"text-left",staticStyle:{"vertical-align":"middle"}},[e._v(e._s(a.nombre))]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.valor,expression:"tarifa.valor"}],staticClass:"form-control input-sm text-right",attrs:{type:"number",min:"0",step:"0.01"},domProps:{value:a.valor},on:{input:function(t){t.target.composing||e.$set(a,"valor",t.target.value)}}})])])]}))],2)])]):e._e(),e._v(" "),e.registro.sistemas_externos?t("div",{staticClass:"col-md-4"},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[e._l(e.registro.sistemas_externos,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.codigo,expression:"sistema.codigo"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"15"},domProps:{value:a.codigo},on:{input:function(t){t.target.composing||e.$set(a,"codigo",t.target.value)}}})])])]}))],2)])]):e._e(),e._v(" "),t("div",{staticClass:"col-md-4"},[e.registro.laboratorios&&e.registro.se_remite?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed",attrs:{id:"laboratorios"}},[e._m(2),e._v(" "),t("tbody",[e._l(e.registro.laboratorios,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.remite,expression:"laboratorio.remite"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.remite)?e._i(a.remite,null)>-1:a.remite},on:{change:function(t){var r=a.remite,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"remite",r.concat([null])):s>-1&&e.$set(a,"remite",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"remite",i)}}})])])]}))],2)]):e._e()])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-9 text-left"},[e._v("Tarifa")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Valor")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-8 text-left"},[e._v("Sistema externo")]),e._v(" "),t("th",{staticClass:"col-sm-4 text-center"},[e._v("Código")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-9 text-left"},[e._v("Laboratorio")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Se remite")])])])}],!1,null,null,null).exports},4156:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});const r={props:{},data:function(){return{cargando:{muestras:!1,guardar:!1},examen:{id:"",nombre:""},muestras:[],muestraSeleccionada:null,muestrasSeleccionadas:[]}},mounted:function(){var e=this;$("#modalExamenMuestra").on("show.bs.modal",(function(t){"modalExamenMuestra"===t.target.id&&(e.$refs.alerta.ocultarAlertas(),e.examen.id=$(t.relatedTarget).data("id-examen"),e.examen.nombre=$(t.relatedTarget).data("nombre-examen"),e.cargarDatos())})),$("#modalExamenMuestra").on("hide.bs.modal",(function(){e.limpiar()}))},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cargarDatos:function(){var e=this;axios.get("/api/muestras").then((function(t){var a=t.data.data;e.muestras=a})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar muestras"),e.mostrarError(a)})),axios.get("/api/examenes/".concat(this.examen.id,"/muestras")).then((function(t){var a=t.data.data;e.muestrasSeleccionadas=a.map((function(e){return e.muestra}))})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar muestras seleccionadas"),e.mostrarError(a)}))},guardar:function(){var e=this;if(_.isEmpty(this.muestrasSeleccionadas))this.mostrarError("Debe seleccionar al menos una muestra");else{this.cargando.guardar=!0;var t={ids:this.muestrasSeleccionadas.map((function(e){return e.id}))};axios.post("/api/examenes/".concat(this.examen.id,"/muestras"),t).then((function(t){t.data.data;e.mostrarExito("Muestras guardadas")})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al guardar muestras"),e.mostrarError(a)})).then((function(){return e.cargando.guardar=!1}))}},limpiar:function(){this.examen.id="",this.examen.nombre="",this.muestras=[],this.muestraSeleccionada=null,this.muestrasSeleccionadas=[]},eliminarMuestras:function(){this.muestrasSeleccionadas=[]},eliminarMuestra:function(e){this.muestrasSeleccionadas.splice(e,1)},seleccionarMuestra:function(e){this.muestrasSeleccionadas.push(e),this.muestraSeleccionada=null}},computed:{muestrasFiltradas:function(){var e=this;return this.muestras.filter((function(t){return 0===e.muestrasSeleccionadas.filter((function(e){return e.id===t.id})).length}))}}};var o=a(1900);const i=(0,o.Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalExamenMuestra",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Muestras de "+e._s(e.examen.nombre))])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label"},[e._v("Muestras disponibles")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"muestras",placeholder:"Buscar muestra...",options:e.muestrasFiltradas,label:"nombre"},on:{input:e.seleccionarMuestra},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.muestraSeleccionada,callback:function(t){e.muestraSeleccionada=t},expression:"muestraSeleccionada"}})],1),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("div",{staticStyle:{height:"240px",overflow:"auto","margin-bottom":"12px"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"text-left sticky-top"},[e._v("\n                      Muestras seleccionadas\n                      "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.muestrasSeleccionadas.length>0,expression:"muestrasSeleccionadas.length > 0"}],staticClass:"badge cursor-menu",attrs:{title:"Total","data-toggle":"tooltip","data-placement":"bottom"}},[e._v("\n                        "+e._s(e.muestrasSeleccionadas.length)+"\n                      ")])]),e._v(" "),t("th",{staticClass:"text-center sticky-top"},[t("button",{directives:[{name:"show",rawName:"v-show",value:e.muestrasSeleccionadas.length>0,expression:"muestrasSeleccionadas.length>0"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Eliminar muestra"},on:{click:e.eliminarMuestras}},[t("i",{staticClass:"fas fa-trash fa-fw",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("tbody",[e._l(e.muestrasSeleccionadas,(function(a,r){return[t("tr",[t("td",{staticClass:"col-xs-11 col-sm-11 col-md-11 text-left cortar-texto"},[t("div",{attrs:{title:a.nombre}},[e._v("\n                          "+e._s(a.nombre)+"\n                        ")])]),e._v(" "),t("td",{staticClass:"col-xs-1 col-sm-1 col-md-1 text-center"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Eliminar muestra"},on:{click:function(t){return e.eliminarMuestra(r)}}},[t("i",{staticClass:"fas fa-trash fa-fw",attrs:{"aria-hidden":"true"}})])])])]}))],2)])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.muestrasSeleccionadas.length>1,expression:"muestrasSeleccionadas.length>1"}],staticClass:"col-sm-12 text-danger"},[t("strong",[e._v("IMPORTANTE:")]),e._v(" "),t("div",[e._v("\n                Cuando existe más de 1 muestra se requiere asociar a cada parámetro de la plantilla.\n              ")])])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{disabled:e.muestrasSeleccionadas.length<1||e.cargando.guardar,type:"submit"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando.guardar,expression:"cargando.guardar"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargando.guardar,expression:"!cargando.guardar"}],staticClass:"fas fa-save fa-fw"}),e._v("\n            Guardar\n          ")])])])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports;var s=a(4590);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d={components:{ExamenMuestraModal:i},props:["datos"],data:function(){return{procesando:{cargarExamenes:!1,cargarSecciones:!1},count:0,celdaActiva:null,filtros:{cadenaBusqueda:"",seccionId:"",ordenar:"nombre"},examenes:[],secciones:[],paginacion:{paginaActual:1,totalRegistros:0,totalPaginas:0}}},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this.cargarFiltros();this.cargarExamenes(e)},limpiarFormulario:function(){this.filtros.cadenaBusqueda="",this.filtros.seccionId="",this.buscarExamenes()},cargarFiltros:function(){var e=this.datos.parametros;this.filtros.cadenaBusqueda=e.cadenaBusquedaCompleta?e.cadenaBusquedaCompleta:"",this.paginacion.paginaActual=e.page?Number(e.page):1,this.filtros.ordenar=e.ordenar?e.ordenar:this.filtros.ordenar;var t=e.seccionId?parseInt(e.seccionId):"";return t&&this.cargarSecciones(t),{seccionId:t}},cargarExamenes:function(e){var t=this;this.procesando.cargarExamenes=!0;var a={cadenaBusquedaCompleta:this.filtros.cadenaBusqueda?this.filtros.cadenaBusqueda:null,seccionId:this.filtros.seccionId?this.filtros.seccionId:_.get(e,"seccionId",null),page:this.paginacion.paginaActual,ordenar:this.filtros.ordenar,tamano:20};this.actualizarUrl(a),axios.get("/api/examenes",{params:a}).then((function(e){var a=e.data.data;t.paginacion.totalPaginas=a.last_page,t.paginacion.totalRegistros=a.total,t.examenes=a.data.map((function(e){return c(c({},e),{},{editar:!1})}))})).catch((function(e){t.examenes=[];var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al listar examenes",a)})).then((function(){return t.procesando.cargarExamenes=!1}))},editarExamen:function(e){window.location.href="/examenes/"+e.id+"/edit"},verPlantillas:function(e){window.location.href="/examenes/"+e.id+"/plantillas"},desactivarExamen:function(e){var t=this,a="A"===e.estado?"I":"A";axios.patch("/api/examenes/".concat(e.id,"/estado/").concat(a)).then((function(){t.cargarExamenes(),t.$refs.alerta.ocultarAlertas(),t.mostrarExito("Examen <strong>"+e.nombre+"</strong> actualizado exitosamente")})).catch((function(e){t.examenes=[];var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cambiar de estado examen",a)}))},eliminarExamen:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/examenes/"+e.id).then((function(){t.cargarExamenes(),t.mostrarExito("Examen <strong>"+e.nombre+"</strong> eliminado exitosamente")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al eliminar examen",a)}))},buscarExamenes:function(){this.paginacion.paginaActual=1,this.cargarExamenes()},cargarSecciones:function(e){var t=this;_.isEmpty(this.secciones)&&(this.procesando.cargarSecciones=!0,axios.get("/api/catalogos",{params:{catalogo:s.oH.SECCIONES}}).then((function(a){var r=a.data.data;t.secciones=r,e&&(t.filtros.seccionId=e)})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar Secciones",a)})).then((function(){return t.procesando.cargarSecciones=!1})))},alternarOrdenarOrden:function(){this.examenes=[],this.filtros.ordenar="-ordenamiento"===this.filtros.ordenar?"ordenamiento":"-ordenamiento",this.cargarExamenes()},alternarOrdenarNombre:function(){this.examenes=[],this.filtros.ordenar="-nombre"===this.filtros.ordenar?"nombre":"-nombre",this.cargarExamenes()},cambiarCelda:function(e){var t=parseInt(e.target.tabIndex),a=e.shiftKey?--t:++t;this.celdaActiva.editar=!1,$("#".concat(a)).click()},editar:function(e,t){this.$can("editar-examenes")&&(this.celdaActiva&&(this.celdaActiva.editar=!1),this.celdaActiva=t,this.celdaActiva.editar=!0,this.$nextTick((function(t){var a=e.currentTarget?e.currentTarget:e.target;window.setTimeout((function(e){return $("#".concat(a.id," > :first-child")).focus()}),0)})))},guardarValor:function(e,t){var a=this,r=t.ordenamiento;t.ordenamiento=e.target.value;var o=t.ordenamiento?t.ordenamiento:"-1";axios.patch("/api/examenes/".concat(t.id,"/orden/").concat(o)).then((function(){t.ordenamiento=e.target.value,a.$refs.alerta.ocultarAlertas(),a.mostrarExito("Orden guardado")})).catch((function(e){t.ordenamiento=r;var o=a.procesarErrorResponse(e);a.mostrarErrores("Error al guardar orden",o)})).then((function(e){t.editar=!1}))}}};const u=(0,o.Z)(d,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Examenes\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",{staticClass:"vs-personalizado"},[t("v-select",{staticClass:"form-control v-select-navbar",attrs:{placeholder:"Sección",options:e.secciones,label:"nombre",clearable:!1,reduce:function(e){return e.id},loading:e.procesando.cargarSecciones},on:{open:e.cargarSecciones},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.filtros.seccionId,callback:function(t){e.$set(e.filtros,"seccionId",t)},expression:"filtros.seccionId"}})],1),e._v(" "),t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarExamenes.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarExamenes}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[e.$can("crear-examenes")?t("a",{staticClass:"btn btn-primary",attrs:{href:"/examenes/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n              ")]):e._e()])])])]},proxy:!0},{key:"ayuda",fn:function(){return[t("a",{attrs:{href:"#",target:"_blank",onClick:"window.open('/ayuda/examenes/index.html','ventana_ayuda','width=438,height=700,location=no,menubar=no,resizable=0,status=no,top=0,right=0');"}},[t("i",{staticClass:"fas fa-book fa-fw text-gris"}),e._v(" Documentación\n        ")])]},proxy:!0}])}),e._v(" "),!e.procesando.cargarExamenes&&e.examenes.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1"},[e._v("Código")]),e._v(" "),t("th",[e._v("\n            Nombre\n            "),t("i",{staticClass:"fas fa-sm puntero",class:{"fa-sort":e.filtros.ordenar.includes("ordenamiento"),"fa-sort-up":"nombre"===e.filtros.ordenar,"fa-sort-down":"-nombre"===e.filtros.ordenar},on:{click:e.alternarOrdenarNombre}})]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("\n            Orden\n            "),t("i",{staticClass:"fas fa-sm puntero",class:{"fa-sort":e.filtros.ordenar.includes("nombre"),"fa-sort-up":"ordenamiento"===e.filtros.ordenar,"fa-sort-down":"-ordenamiento"===e.filtros.ordenar},on:{click:e.alternarOrdenarOrden}})]),e._v(" "),t("th",{staticClass:"col-sm-5"})])]),e._v(" "),t("tbody",[e._l(e.examenes,(function(a,r){return[t("tr",[t("td",[e._v(e._s(a.codigo))]),e._v(" "),t("td",[e._v("\n              "+e._s(a.nombre)+"\n              "),"I"===a.estado?t("span",{staticClass:"label label-danger"},[e._v("Desactivado")]):e._e()]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{attrs:{role:"button",id:"".concat(r+e.examenes.length+100)},on:{click:function(t){return e.editar(t,a)}}},[a.editar?e._e():t("span",[e._v("\n                  "+e._s(a.ordenamiento||"-")+"\n                ")]),e._v(" "),a.editar?t("input",{staticClass:"form-control input-xs text-right",attrs:{type:"number",min:"0",max:"10000",step:"1",tabindex:r+e.examenes.length+100},domProps:{value:a.ordenamiento},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.cambiarCelda.apply(null,arguments)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.cambiarCelda.apply(null,arguments)},blur:function(t){return e.guardarValor(t,a)}}}):e._e()])]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-examenes")},on:{click:function(t){return e.editarExamen(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n              ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("ver-plantillas")},on:{click:function(t){return e.verPlantillas(a)}}},[t("i",{staticClass:"fas fa-bars fa-fw"}),e._v("Plantillas\n              ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button","data-toggle":"modal","data-backdrop":"static","data-target":"#modalExamenMuestra",disabled:!e.$can("editar-examenes"),"data-id-examen":a.id,"data-nombre-examen":a.nombre}},[t("i",{staticClass:"fas fa-vial fa-fw"}),e._v("Muestras\n              ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-examenes")},on:{click:function(t){return e.desactivarExamen(a)}}},[t("i",{staticClass:"fas fa-lock fa-fw"}),e._v(" "),"A"===a.estado?[e._v("\n                  Desactivar\n                ")]:[e._v("\n                  Activar\n                ")]],2),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.$can("eliminar-examenes")},on:{click:function(t){return e.eliminarExamen(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n              ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.cargarExamenes,cantidad:e.examenes.length,tipo:"exámenes"}}),e._v(" "),!e.procesando.cargarExamenes&&e.examenes.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"page-range":7,"container-class":"pagination","click-handler":e.cargarExamenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1),e._v(" "),t("examen-muestra-modal")],1)}),[],!1,null,null,null).exports},1412:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(4590),o=a(9676),i=a(2047);const s={components:{Modal:a(1430).Z},data:function(){return{cargando:!1,empresaId:"",empresas:[]}},mounted:function(){var e=this;$("#modalBuscarEmpresa").on("hide.bs.modal",(function(t){"modalBuscarEmpresa"===t.target.id&&(e.empresaId="")})),$("#modalBuscarEmpresa").on("show.bs.modal",(function(t){"modalBuscarEmpresa"===t.target.id&&e.cargarEmpresas()})),$("#modalBuscarEmpresa").on("shown.bs.modal",(function(){return $("#cadenaBusquedaMedico").focus()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarEmpresas:function(){var e=this;_.isEmpty(this.empresas)&&(this.cargando=!0,axios.get("/api/clientes").then((function(t){var a=t.data;e.empresas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Clientes",a)})).then((function(){return e.cargando=!1})))},seleccionarEmpresa:function(){var e=this,t=this.empresas.find((function(t){return t.id===e.empresaId}));this.$emit("empresa-seleccionada",t),$("#modalBuscarEmpresa").modal("hide")}}};var n=a(1900);const c=(0,n.Z)(s,(function(){var e=this,t=e._self._c;return t("modal",{attrs:{id:"modalBuscarEmpresa"},scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("Buscar cliente")]},proxy:!0},{key:"cuerpo",fn:function(){return[t("div",{staticClass:"row",staticStyle:{height:"250px"}},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label"},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{placeholder:"Seleccione...",options:e.empresas,label:"nombre",loading:e.cargando,reduce:function(e){return e.id}},on:{"option:selected":e.seleccionarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(t){var a=t.ruc,r=t.nombre;return[e._v("\n            "+e._s(r)+" "+e._s(a?" - ".concat(a):"")+"\n          ")]}},{key:"option",fn:function(t){var a=t.ruc,r=t.nombre;return[e._v("\n            "+e._s(r)+" "+e._s(a?" - ".concat(a):"")+"\n          ")]}},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.empresaId,callback:function(t){e.empresaId=t},expression:"empresaId"}})],1)])]},proxy:!0},{key:"pie",fn:function(){return[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")])]},proxy:!0}])},[t("alerta",{ref:"alerta"})],1)}),[],!1,null,null,null).exports,l={components:{BuscarPacienteModal:o.Z,BuscarOrdenesModal:i.Z,BuscarEmpresaModal:c},props:["sistemasExternos","idSistemaFactura","datosOrden"],data:function(){return{procesando:{deshabilitarFacturacion:!1,cargarOrdenes:!1,cargarComentario:!1},prefijo:"",nombreImpuesto:"",porcentajeImpuesto:"",consumidorFinal:!1,proforma:!1,enviarSri:!1,ordenes:[],registro:{id:"",sistema_factura_id:null,tipo:"FACTURA",fecha_vencimiento:"",identificacion:"",tipo_identificacion:"",razon_social:"",telefono:"",direccion:"",comentario:"",correo:"",prefijo:"",numero:"",cantidad_ordenes:0,total_sin_impuestos:0,descuento:0,valor_recargo:0,valor_domicilio:0,cantidad_domicilio:0,impuesto:0,porcentaje_impuesto:0,importe_total:0,orden:{numero_orden:"",fecha_orden:"",subempresa:null,sucursal:null},idsOrdenes:[],pagos:[]},datosPagos:{pagos:[]},paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0}}},created:function(){this.registro.sistema_factura_id=this.idSistemaFactura},mounted:function(){this.enviarSri="true"===localStorage.getItem("enviar-sri"),this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/facturas/create").then((function(t){var a=t.data.data;e.registro.prefijo=a.prefijo,e.prefijo=a.prefijo,e.nombreImpuesto=a.nombreImpuesto,e.porcentajeImpuesto=a.porcentajeImpuesto,e.datosOrden.desdeOrdenes?(e.registro.idsOrdenes.push(e.datosOrden.ordenId),e.calcularValoresOrdenes(!1),e.verificarFactura()):e.$refs.cargando.alternar()})).catch((function(t){e.$refs.cargando.alternar();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al obtener datos para facturar",a)}))},guardar:function(){var e=this,t=this.cargarRegistro();"CED"===t.tipo_identificacion&&t.identificacion.length<10?this.mostrarErrores('El campo "Identificación" debe ser al menos 10 caracteres'):_.isEmpty(this.ordenes)?this.mostrarErrores("Debe agregar por lo menos una orden a la factura"):(this.procesando.deshabilitarFacturacion=!0,this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),this.proforma&&(t.tipo="PROFORMA",t.prefijo=""),this.proforma||(t.tipo="FACTURA"),t.enviarSri=this.enviarSri,t.orden.numero_orden=this.ordenes[0].numero_orden,t.orden.fecha_orden=this.ordenes[0].fecha_orden,t.orden.subempresa=this.ordenes[0].subempresa,t.orden.sucursal=this.ordenes[0].sucursal,axios.post("/api/facturas",t).then((function(a){var r=a.data.data;if(e.limpiar(),e.esManual&&e.descargarFactura(r.id),e.datosOrden.desdeOrdenes){var o="/facturas?numero=".concat(r.numero_completo,"&tipo=").concat(t.tipo);return r.envioSri&&(o+="&sri=".concat(r.envioSri)),window.location.href=o,!1}if(e.proforma)e.mostrarExito("Proforma No. <strong>".concat(r.numero_completo,"</strong> creada"));else{var i=["Factura No. <strong>".concat(r.numero_completo,"</strong> creada")];e.mostrarExito(i),"Ok"===r.envioSri&&e.mostrarExito("Enviada a SRI"),"Ok"!==r.envioSri&&null!==r.envioSri&&void 0!==r.envioSri&&e.mostrarAdvertencia(r.envioSri)}})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(t){!1!==t&&(e.procesando.deshabilitarFacturacion=!1,e.$refs.cargando.alternar(),e.alternarBotonesSubmit())})))},limpiar:function(){this.proforma=!1,this.registro.id="",this.registro.tipo="FACTURA",this.registro.identificacion="",this.registro.tipo_identificacion="",this.registro.razon_social="",this.registro.telefono="",this.registro.direccion="",this.registro.correo="",this.registro.prefijo=this.prefijo,this.registro.numero="",this.registro.cantidad_ordenes=0,this.registro.total_sin_impuestos=0,this.registro.descuento=0,this.registro.valor_recargo=0,this.registro.valor_domicilio=0,this.registro.cantidad_domicilio=0,this.registro.impuesto=0,this.registro.porcentaje_impuesto=0,this.registro.importe_total=0,this.registro.idsOrdenes=[],this.registro.orden.numero_orden="",this.registro.orden.fecha_orden="",this.registro.pagos=[],this.registro.comentario="",this.registro.fecha_vencimiento="",this.registro.orden.numero_orden=null,this.registro.orden.fecha_orden=null,this.registro.orden.subempresa=null,this.registro.orden.sucursal=null,this.datosPagos.pagos=[],this.ordenes=[],this.paginacion.totalPaginas=0,this.consumidorFinal=!1},limpiarYCalcularValores:function(){this.limpiar(),this.procesando.deshabilitarFacturacion=!1,this.datosOrden.desdeOrdenes&&(this.registro.idsOrdenes.push(this.datosOrden.ordenId),this.calcularValoresOrdenes())},calcularValoresOrdenes:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(_.isEmpty(this.registro.idsOrdenes))return this.registro.cantidad_ordenes=0,this.registro.total_sin_impuestos=0,this.registro.descuento=0,this.registro.valor_recargo=0,this.registro.valor_domicilio=0,this.registro.cantidad_domicilio=0,this.registro.impuesto=0,this.paginacion.totalPaginas=0,this.ordenes=[],this.datosPagos.pagos=[],void(this.procesando.cargarOrdenes=!1);var a={idsOrdenes:this.registro.idsOrdenes,porcentaje_impuesto:this.porcentajeImpuesto,driverSistemaFacturas:this.sistemaFacturas.driver};t&&this.$refs.cargando.alternar(),axios.post("/api/facturas/calcular-valores",a).then((function(t){var a=t.data.data;e.registro.cantidad_ordenes=Number(a.cantidad_ordenes),e.registro.total_sin_impuestos=Number(a.total_sin_impuestos),e.registro.descuento=Number(a.descuento),e.registro.valor_recargo=Number(a.valor_recargo),e.registro.valor_domicilio=Number(a.valor_domicilio),e.registro.cantidad_domicilio=Number(a.cantidad_domicilio),e.registro.impuesto=Number(a.impuesto)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){e.paginacion.paginaActual=0,e.cargarOrdenes(),e.$refs.cargando.alternar()}))},verificarFactura:function(){var e=this;if(!_.isEmpty(this.registro.idsOrdenes)){var t={idsOrdenes:this.registro.idsOrdenes};this.$refs.alerta.ocultarAlertas();var a=this.registro.sistema_factura_id?this.registro.sistema_factura_id:"MANUAL";axios.get("/api/sistema-externo/".concat(a,"/facturas/verificar"),{params:t}).then((function(){return e.procesando.deshabilitarFacturacion=!1})).catch((function(t){e.procesando.deshabilitarFacturacion=!0;var a=e.procesarErrorResponse(t);e.mostrarErrores(a)}))}},eliminarOrden:function(e){var t=this.registro.idsOrdenes.indexOf(e.id);this.registro.idsOrdenes.splice(t,1),this.calcularValoresOrdenes(),this.mostrarInformativo("Orden No. ".concat(e.numero_orden," eliminada de la factura"))},eliminarOrdenes:function(){this.registro.cantidad_ordenes=0,this.registro.total_sin_impuestos=0,this.registro.descuento=0,this.registro.valor_recargo=0,this.registro.valor_domicilio=0,this.registro.cantidad_domicilio=0,this.registro.impuesto=0,this.datosPagos.pagos=[],this.datosOrden.desdeOrdenes?(this.ordenes.splice(1),this.registro.idsOrdenes.splice(1),this.calcularValoresOrdenes(),this.mostrarInformativo("Se han eliminado todas las órdenes, excepto la orden seleccionada")):(this.ordenes=[],this.registro.idsOrdenes=[],this.mostrarInformativo("Se han eliminado todas las órdenes"))},cargarRegistro:function(){var e=_.cloneDeep(this.registro);return e.porcentaje_impuesto=this.porcentajeImpuesto,e.importe_total=this.total.toFixed(2),e.pagos=this.datosPagos.pagos,e.identificacion=this.registro.identificacion.trim(),e},cargarOrdenes:function(){var e=this;this.procesando.cargarOrdenes=!0;var t={ordenesIds:this.registro.idsOrdenes,incluir:"paciente,sucursal",page:this.paginacion.paginaActual};1===t.ordenesIds.length&&(t.incluir="paciente,sucursal,subempresa.empresa"),axios.get("/api/ordenes/buscar",{params:t}).then((function(t){var a=t.data.data;if(e.paginacion.totalPaginas=a.last_page,e.ordenes=a.data,1===e.registro.idsOrdenes.length&&!e.consumidorFinal){var r=e.ordenes[0].subempresa.empresa,o=e.ordenes[0].paciente;o.tipo=e.ordenes[0].paciente_type,r.facturar_al_cliente?e.pacienteSeleccionado(o,!1):(e.registro.tipo_identificacion="RUC",e.registro.identificacion=r.ruc,e.registro.razon_social=r.razon_social,e.registro.telefono=r.telefono_facturas,e.registro.direccion=r.direccion,e.registro.correo=r.correo_facturas)}e.esManual?e.procesando.cargarOrdenes=!1:axios.get("/api/abonos-ordenes/por-forma-pago",{params:{ordenes:e.registro.idsOrdenes}}).then((function(t){var a=t.data.data;e.datosPagos.pagos=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar formas de pago",a)})).then((function(){return e.procesando.cargarOrdenes=!1})),e.obtenerComentario()})).catch((function(t){e.procesando.cargarOrdenes=!1;var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al buscar órdenes!",a)}))},obtenerComentario:function(){var e=this;if(this.registro.comentario="",!this.esManual){var t={driverSistemaFacturas:this.sistemaFacturas.driver,idsOrdenes:this.registro.idsOrdenes};this.procesando.cargarComentario=!0,axios.get("/api/ordenes-comentario",{params:t}).then((function(t){var a=t.data;e.registro.comentario=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarAdvertencia("Error al cargar comentario",a)})).then((function(){return e.procesando.cargarComentario=!1}))}},empresaSeleccionada:function(e){this.registro.tipo_identificacion="RUC",this.registro.identificacion=e.ruc,this.registro.razon_social=e.razon_social,this.registro.telefono=e.telefono_facturas,this.registro.direccion=e.direccion,this.registro.correo=e.correo_facturas,this.mostrarExito("Cliente seleccionado")},descargarFactura:function(e){window.open("/api/facturas/".concat(e,"/pdf"),"popUpWindow","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},pacienteSeleccionado:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&("App\\Models\\PacienteHumano"===e.tipo&&(this.registro.tipo_identificacion=e.tipo_identificacion,"OTRO"===this.registro.tipo_identificacion&&(this.registro.tipo_identificacion=""),this.registro.identificacion=e.numero_identificacion,this.registro.razon_social=e.nombre_paciente,this.registro.correo=e.correo),"App\\Models\\PacienteAnimal"===e.tipo&&(this.registro.identificacion="",this.registro.tipo_identificacion="",this.registro.razon_social=t?[e.nombres,e.apellidos].filter(Boolean).join(" "):e.nombre_responsable),"App\\Models\\SujetoObjeto"===e.tipo&&(this.registro.identificacion="",this.registro.tipo_identificacion="",this.registro.razon_social=t?[e.nombres,e.apellidos].filter(Boolean).join(" "):e.nombre_responsable),this.registro.correo=e.correo,this.registro.telefono||(this.registro.telefono=e.telefono_celular),this.registro.direccion||(this.registro.direccion=e.direccion))},puedeEliminarOrden:function(e){return!(this.datosOrden.desdeOrdenes&&this.datosOrden.ordenId==e.id)},esConsumidorFinal:function(){this.consumidorFinal?(this.registro.tipo_identificacion="",this.registro.identificacion="",this.registro.razon_social=""):(this.registro.tipo_identificacion="CF",this.registro.identificacion="9999999999999",this.registro.razon_social="Consumidor final",this.registro.telefono="",this.registro.direccion="",this.registro.correo="")},ordenesSeleccionadas:function(e){this.registro.idsOrdenes=e.ordenesIds,this.calcularValoresOrdenes(),this.verificarFactura()},pagosGuardados:function(e){this.datosPagos.pagos=e,this.mostrarExito("Formas de pago guardadas")},borrarComentario:function(){this.registro.comentario=""},cambioProforma:function(){this.enviarSri=!1},cambioSistemaFactura:function(){this.registro.comentario="",this.calcularValoresOrdenes(!0),this.verificarFactura()},cambioEnviarSri:function(e){localStorage.setItem("enviar-sri",e.target.checked.toString())}},computed:{cantidadOrdenes:function(){return this.registro.idsOrdenes.length},total:function(){return this.registro.total_sin_impuestos+this.registro.impuesto},minlength:function(){var e=4;return"RUC"===this.registro.tipo_identificacion&&(e=13),"CED"===this.registro.tipo_identificacion&&(e=10),e},maxlength:function(){var e=15;return"RUC"===this.registro.tipo_identificacion&&(e=13),"CED"===this.registro.tipo_identificacion&&(e=10),e},etiquetaSeleccionados:function(){return this.ordenes.length>1?"seleccionadas":"seleccionada"},observacionesOrdenes:function(){return this.registro.idsOrdenes.length>0&&this.ordenes.length>0?this.ordenes[0].observaciones_orden:""},sistemaFacturas:function(){var e=this;return this.sistemasExternos.find((function(t){return t.id===e.registro.sistema_factura_id}))},requeridos:function(){return this.sistemaFacturas&&this.sistemaFacturas.extras&&this.sistemaFacturas.extras.requeridos?this.sistemaFacturas.extras.requeridos.split(","):[]},esManual:function(){return this.sistemaFacturas.driver===r.Q0.MANUAL},manejaPagos:function(){return[r.Q0.CASTOR,r.Q0.ACATHA].includes(this.sistemaFacturas.driver)},esContifico:function(){return this.sistemaFacturas.driver===r.Q0.CONTIFICO},puedeGuardar:function(){return this.procesando.deshabilitarFacturacion||this.procesando.cargarOrdenes||this.procesando.cargarComentario}}};const d=(0,n.Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Facturar\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.puedeGuardar},on:{click:function(t){e.registro.tipo_factura="POR_EXAMENES"}}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Generar\n            ")])]),e._v(" "),e.esManual?e._e():t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.puedeGuardar},on:{click:function(t){e.registro.tipo_factura="SIN_DETALLE"}}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Generar sin detalle\n            ")])]),e._v(" "),e.manejaPagos?t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal",disabled:e.procesando.deshabilitarFacturacion||0===e.ordenes.length,"data-target":"#gestionarPagos"}},[t("i",{staticClass:"fas fa-money-check-alt"}),e._v(" Formas de pago\n            ")])]):e._e(),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarYCalcularValores}},[e._v("Limpiar")])]),e._v(" "),t("li",[e.datosOrden.desdeOrdenes?t("a",{staticClass:"btn btn-default",attrs:{href:e.datosOrden.urlAnterior}},[e._v("\n              Regresar\n            ")]):e._e()])])]},proxy:!0}])}),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio no-salto-linea",attrs:{for:"sistema_factura_id"}},[e._v("Sistema")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.sistema_factura_id,expression:"registro.sistema_factura_id"}],staticClass:"form-control input-sm",attrs:{id:"sistema_factura_id",name:"sistema_factura_id"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"sistema_factura_id",t.target.multiple?a:a[0])},e.cambioSistemaFactura]}},e._l(e.sistemasExternos,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n              "+e._s(a.nombre)+"\n            ")])})),0)]),e._v(" "),e.proforma?e._e():t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.esManual},attrs:{for:"prefijo"}},[e._v("Prefijo")]),e._v(" "),e.esManual?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.prefijo,expression:"registro.prefijo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"prefijo",maxlength:"7",required:""},domProps:{value:e.registro.prefijo},on:{input:function(t){t.target.composing||e.$set(e.registro,"prefijo",t.target.value)}}}):e._e(),e._v(" "),e.esManual?e._e():t("output",[e._v("\n            "+e._s(e.registro.prefijo)+"\n          ")])]),e._v(" "),e.esManual&&!e.proforma?t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"numero"}},[e._v("No.")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.numero,expression:"registro.numero"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"numero",maxlength:"15",required:e.esManual},domProps:{value:e.registro.numero},on:{input:function(t){t.target.composing||e.$set(e.registro,"numero",t.target.value)}}})]):e._e(),e._v(" "),t("div",{staticClass:"col-sm-2 pull-right"},[t("label",{staticClass:"control-label",class:{obligatorio:e.requeridos.includes("fecha_vencimiento")},attrs:{for:"fecha_vencimiento"}},[e._v("\n            Fecha vencimiento\n          ")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha_vencimiento,expression:"registro.fecha_vencimiento"}],staticClass:"form-control input-sm",attrs:{id:"fecha_vencimiento","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",required:e.requeridos.includes("fecha_vencimiento")},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group pull-right"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.consumidorFinal,expression:"consumidorFinal"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.consumidorFinal)?e._i(e.consumidorFinal,"")>-1:e.consumidorFinal},on:{click:e.esConsumidorFinal,change:function(t){var a=e.consumidorFinal,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&(e.consumidorFinal=a.concat([""])):i>-1&&(e.consumidorFinal=a.slice(0,i).concat(a.slice(i+1)))}else e.consumidorFinal=o}}}),e._v("\n              Consumidor final\n            ")])])]),e._v(" "),e.esContifico?t("div",{staticClass:"col-sm-2 pull-right"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.proforma,expression:"proforma"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.proforma)?e._i(e.proforma,"")>-1:e.proforma},on:{change:[function(t){var a=e.proforma,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&(e.proforma=a.concat([""])):i>-1&&(e.proforma=a.slice(0,i).concat(a.slice(i+1)))}else e.proforma=o},e.cambioProforma]}}),e._v("\n              Proforma\n            ")])])]):e._e(),e._v(" "),e.esContifico&&!e.proforma?t("div",{staticClass:"col-sm-2 pull-right"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.enviarSri,expression:"enviarSri"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.enviarSri)?e._i(e.enviarSri,"")>-1:e.enviarSri},on:{click:e.cambioEnviarSri,change:function(t){var a=e.enviarSri,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&(e.enviarSri=a.concat([""])):i>-1&&(e.enviarSri=a.slice(0,i).concat(a.slice(i+1)))}else e.enviarSri=o}}}),e._v("\n              Enviar a SRI\n            ")])])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"tipo_identificacion"}},[e._v("Tipo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tipo_identificacion,expression:"registro.tipo_identificacion"}],staticClass:"form-control input-sm",attrs:{id:"tipo_identificacion",disabled:e.consumidorFinal,name:"tipo_identificacion",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tipo_identificacion",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"CED"}},[e._v("Cédula")]),e._v(" "),t("option",{attrs:{value:"PAS"}},[e._v("Pasaporte")]),e._v(" "),t("option",{attrs:{value:"RUC"}},[e._v("RUC")]),e._v(" "),t("option",{directives:[{name:"show",rawName:"v-show",value:e.consumidorFinal,expression:"consumidorFinal"}],attrs:{value:"CF"}},[e._v("Consumidor final")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"identificacion"}},[e._v("Identificación")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.identificacion,expression:"registro.identificacion"}],staticClass:"form-control input-sm",attrs:{id:"identificacion",type:"text",maxlength:e.maxlength,minlength:e.minlength,autocomplete:"off",disabled:e.consumidorFinal,required:""},domProps:{value:e.registro.identificacion},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"identificacion",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarPaciente",disabled:e.procesando.deshabilitarFacturacion||e.consumidorFinal,title:"Pacientes"}},[t("i",{staticClass:"fas fa-users",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-backdrop":"static","data-target":"#modalBuscarEmpresa",title:"Clientes",disabled:e.procesando.deshabilitarFacturacion||e.consumidorFinal}},[t("i",{staticClass:"fas fa-building",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"razon_social"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.razon_social,expression:"registro.razon_social"}],staticClass:"form-control input-sm",attrs:{id:"razon_social",type:"text",maxlength:"300",disabled:e.consumidorFinal,autocomplete:"off",required:""},domProps:{value:e.registro.razon_social},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"razon_social",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.requeridos.includes("telefono")},attrs:{for:"telefono"}},[e._v("\n            Teléfono\n          ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.telefono,expression:"registro.telefono"}],staticClass:"form-control input-sm",attrs:{id:"telefono",type:"text",maxlength:"30",disabled:e.consumidorFinal,autocomplete:"off",required:e.requeridos.includes("telefono")},domProps:{value:e.registro.telefono},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"telefono",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.requeridos.includes("direccion")},attrs:{for:"direccion"}},[e._v("\n            Dirección\n          ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.direccion,expression:"registro.direccion"}],staticClass:"form-control input-sm",attrs:{id:"direccion",maxlength:"200",type:"text",disabled:e.consumidorFinal,autocomplete:"off",required:e.requeridos.includes("direccion")},domProps:{value:e.registro.direccion},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"direccion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.requeridos.includes("correo")},attrs:{for:"correo"}},[e._v("\n            Correo electrónico\n          ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.correo,expression:"registro.correo"}],staticClass:"form-control input-sm",attrs:{id:"correo",name:"correo",type:"email",disabled:e.consumidorFinal,maxlength:"100",autocomplete:"off",required:e.requeridos.includes("correo")},domProps:{value:e.registro.correo},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"correo",t.target.value)}}})]),e._v(" "),e.esManual?e._e():t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"comentario"}},[e._v("\n            Comentario\n          ")]),e._v(" "),e.procesando.cargarComentario?t("i",{staticClass:"fa fa-spinner fa-spin"}):t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Borrar comentario"},on:{click:e.borrarComentario}},[t("i",{staticClass:"fas fa-trash"})]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.comentario,expression:"registro.comentario"}],staticClass:"form-control input-sm resize-vertical",attrs:{id:"comentario",maxlength:"3000",rows:"2",autocomplete:"off"},domProps:{value:e.registro.comentario},on:{input:function(t){t.target.composing||e.$set(e.registro,"comentario",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.observacionesOrdenes,expression:"observacionesOrdenes"}],staticClass:"control-label"},[e._v("Observaciones orden")]),e._v(" "),t("div",[t("div",{staticStyle:{"max-width":"90%",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",float:"left"}},[e._v("\n              "+e._s(e.observacionesOrdenes)+"\n            ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.observacionesOrdenes,expression:"observacionesOrdenes"}],staticClass:"btn btn-xs btn-default",staticStyle:{"margin-left":"4px"},attrs:{type:"button","data-toggle":"modal","data-target":"#modalObservaciones"}},[t("i",{staticClass:"fas fa-eye"})])])]),e._v(" "),t("div",{staticClass:"col-sm-1 col-md-offset-1 form-group text-right"},[t("label",{staticClass:"control-label"},[e._v("Domicilio")]),e._v(" "),t("div",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("moneda")(e.registro.valor_domicilio))+"\n          ")])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group text-right"},[t("label",{staticClass:"control-label"},[e._v("Descuento")]),e._v(" "),t("div",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("moneda")(e.registro.descuento))+"\n          ")])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group text-right"},[t("label",{staticClass:"control-label"},[e._v("Subtotal")]),e._v(" "),t("div",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("moneda")(e.registro.total_sin_impuestos))+"\n          ")])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group no-salto-linea text-right"},[t("label",{staticClass:"control-label"},[e._v(e._s(e.nombreImpuesto)+" ("+e._s(e.porcentajeImpuesto)+"%)")]),e._v(" "),t("div",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("moneda")(e.registro.impuesto))+"\n          ")])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group text-right"},[t("label",{staticClass:"control-label"},[e._v("Total")]),e._v(" "),t("div",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("moneda")(e.total))+"\n          ")])])]),e._v(" "),t("div",[t("legend",{staticClass:"obligatorio"},[e._v("\n          Órdenes\n          "),t("div",{staticClass:"pull-right"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.cantidadOrdenes>0,expression:"cantidadOrdenes > 0"}],staticClass:"badge",attrs:{id:"contadorExamenes"}},[e._v("\n              "+e._s(e.cantidadOrdenes)+"\n              "+e._s(e.etiquetaSeleccionados)+"\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal",disabled:e.procesando.deshabilitarFacturacion,title:"Agregar órdenes","data-target":"#modalBuscarOrdenes"}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v(" Agregar\n            ")])])])]),e._v(" "),!e.procesando.cargarOrdenes&&e.ordenes.length>0?t("div",{staticStyle:{height:"390px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Sucursal")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Descuento")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar todo",disabled:0===e.ordenes.length||e.procesando.deshabilitarFacturacion||1===e.ordenes.length&&this.datosOrden.desdeOrdenes},on:{click:e.eliminarOrdenes}},[t("i",{staticClass:"fas fa-trash"})])])])]),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.sucursal.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(e._f("fecha")(a.fecha_orden,"YYYY-MM-DD"))+"\n              ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoOrden")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n                "+e._s(e._f("moneda")(a.valor_descuento?a.valor_descuento:"0.00"))+"\n              ")]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.valor_total)))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar",disabled:!e.puedeEliminarOrden(a)||e.procesando.deshabilitarFacturacion},on:{click:function(t){return e.eliminarOrden(a)}}},[t("i",{staticClass:"fas fa-trash"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.cargarOrdenes,cantidad:e.ordenes.length,tipo:"órdenes"}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.cargarOrdenes&&e.ordenes.length>0&&e.paginacion.totalPaginas>1,expression:"!procesando.cargarOrdenes && ordenes.length > 0 && paginacion.totalPaginas>1"}],staticClass:"paginacion alto-paginacion"},[t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"page-range":5,"container-class":"pagination","click-handler":e.cargarOrdenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}})],1)],1)],1),e._v(" "),t("buscar-ordenes-modal",{attrs:{"ordenes-ids":e.registro.idsOrdenes,"sistema-factura-id":e.registro.sistema_factura_id,"mostrar-filtros":["sucursal","cliente","categoria","fechaDesde","fechaHasta","medico","paciente","numeroOrden","numeroOrdenFinal"]},on:{"ordenes-seleccionadas":e.ordenesSeleccionadas}}),e._v(" "),t("buscar-paciente-modal",{on:{"paciente-seleccionado":e.pacienteSeleccionado}}),e._v(" "),t("clientes-gestionar-pagos-modal",{attrs:{ordenes:e.registro.idsOrdenes,valor:e.total.toFixed(2),datosPagos:e.datosPagos},on:{"pagos-guardados":e.pagosGuardados}}),e._v(" "),t("buscar-empresa-modal",{on:{"empresa-seleccionada":e.empresaSeleccionada}}),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalObservaciones",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-justify"},[e._v(e._s(a.observaciones_orden))])])]}))],2)])])])])])],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Observaciones Órdenes")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Observación")])])])}],!1,null,null,null).exports},9254:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:["ordenes","valor","datosPagos"],data:function(){return{pago:{formaPago:r.xe.EFECTIVO,valor:""},pagos:[],formasPago:r.xe}},created:function(){},mounted:function(){var e=this;$("#gestionarPagos").on("show.bs.modal",(function(t){"gestionarPagos"===t.target.id&&e.cargarPagos()})),$("#gestionarPagos").on("hide.bs.modal",(function(t){"gestionarPagos"===t.target.id&&(e.limpiarPago(),e.pagos=[])}))},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},ocultarMensajes:function(){this.$refs.alerta.ocultarAlertas()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},agregarPago:function(){if(this.nuevoSaldoCalculado<0)this.mostrarErrores("¡No puede tener un saldo negativo!");else{var e={forma_pago:this.pago.formaPago,valor:Number(this.pago.valor).toFixed(2)},t=!0;this.pagos.forEach((function(a,r){a.forma_pago===e.forma_pago&&(a.valor=Number(a.valor)+Number(e.valor),a.valor=a.valor.toFixed(2),t=!1)})),t&&this.pagos.push(e),this.limpiarPago(),this.mostrarExito("Forma de pago agregada")}},cargarPagos:function(){this.pagos=[],_.isEmpty(this.datosPagos.pagos)?_.isEmpty(this.ordenes)&&this.mostrarErrores("¡Error!","No se han seleccionado órdenes"):this.pagos=this.datosPagos.pagos},limpiarPago:function(){this.pago.formaPago="EF",this.pago.valor=""},completarPago:function(){this.pago.valor=this.totalSaldoCalculado},eliminarPago:function(e){var t=this.pagos.indexOf(e);this.pagos.splice(t,1),this.mostrarExito("Forma de pago eliminada")},guardar:function(){this.$emit("pagos-guardados",this.pagos),$("#gestionarPagos").modal("hide")}},computed:{habilitarAgregar:function(){return 0===this.pago.valor.length||""===this.pago.valor||this.pago.valor<=0||this.nuevoSaldoCalculado<0},totalSaldoCalculado:function(){var e=this.valor-Number(this.totalPagosCalculado);return e.toFixed(2)},totalPagosCalculado:function(){var e=this.pagos.reduce((function(e,t){return+e+ +t.valor}),0);return e.toFixed(2)},nuevoSaldoCalculado:function(){var e=this.valor-Number(this.totalPagosCalculado)-this.pago.valor;return e<0&&(e=0),e.toFixed(2)}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"gestionarPagos",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"valor"}},[e._v("Valor total")]),e._v(" "),t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-addon"},[e._v("$")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.valor,expression:"valor"}],staticClass:"form-control input-sm currency text-right",attrs:{type:"number",id:"valor",min:"0",readonly:""},domProps:{value:e.valor},on:{input:function(t){t.target.composing||(e.valor=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"total_pagos"}},[e._v("Total pagos")]),e._v(" "),t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-addon"},[e._v("$")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.totalPagosCalculado,expression:"totalPagosCalculado"}],staticClass:"form-control input-sm currency text-right",attrs:{type:"number",id:"total_pagos",min:"0",readonly:""},domProps:{value:e.totalPagosCalculado},on:{input:function(t){t.target.composing||(e.totalPagosCalculado=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"total_saldo"}},[e._v("Total saldo")]),e._v(" "),t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-addon"},[e._v("$")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.totalSaldoCalculado,expression:"totalSaldoCalculado"}],staticClass:"form-control input-sm currency text-right",attrs:{type:"number",id:"total_saldo",readonly:"",min:"0.01"},domProps:{value:e.totalSaldoCalculado},on:{input:function(t){t.target.composing||(e.totalSaldoCalculado=t.target.value)}}})])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Forma pago")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.pago.formaPago,expression:"pago.formaPago"}],staticClass:"form-control input-sm",attrs:{name:"forma_pago"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.pago,"formaPago",t.target.multiple?a:a[0])}}},e._l(e.formasPago,(function(a){return t("option",{domProps:{value:a}},[e._v("\n                    "+e._s(e._f("formaPago")(a))+"\n                  ")])})),0)]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"valor_pago"}},[e._v("Valor")]),e._v(" "),t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-addon"},[e._v("$")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.pago.valor,expression:"pago.valor"}],staticClass:"form-control input-sm currency text-right",attrs:{type:"number",step:"0.01",id:"valor_pago",min:"0"},domProps:{value:e.pago.valor},on:{input:function(t){t.target.composing||e.$set(e.pago,"valor",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:e.completarPago}},[t("i",{staticClass:"fas fa-arrow-circle-down fa-fw"})])])])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group margen-superior-boton"},[t("button",{staticClass:"btn btn-primary btn-sm pull-right",attrs:{type:"button",disabled:e.habilitarAgregar},on:{click:e.agregarPago}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v("\n                  Agregar\n                ")])])]),e._v(" "),t("div",{staticStyle:{height:"250px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),e._m(2),e._v(" "),t("tbody",[0===e.pagos.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("\n                    No existen formas de pago registradas\n                  ")])]):e._e(),e._v(" "),e._l(e.pagos,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(e._f("formaPago")(a.forma_pago)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.valor))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarPago(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})])])])]}))],2)])])],1),e._v(" "),e._m(3)])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Formas de pago")])])},function(){var e=this._self._c;return e("caption",[e("legend",[this._v("\n                    Formas de pago registradas\n                  ")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-5 text-center"},[e._v("Forma pago")]),e._v(" "),t("th",{staticClass:"col-sm-5 text-center"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v("Guardar\n            ")])])}],!1,null,null,null).exports},6328:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(4590),o=a(7974);const i={data:function(){return{cargandoOrdenes:!1,paginacion:{totalPaginas:0,totalRegistros:0,paginaActual:1},factura:{},ordenes:[],formasPago:[]}},mounted:function(){var e=this;$("#modalVerFactura").on("show.bs.modal",(function(t){"modalVerFactura"===t.target.id&&(e.factura=$(t.relatedTarget).data("factura"),e.cargarDatos())})),$("#modalVerFactura").on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.cargarFactura(),this.paginacion.paginaActual=1,this.cargarOrdenes()},limpiar:function(){this.factura={},this.ordenes=[]},cargarFactura:function(){var e=this;axios.get("/api/facturas/".concat(this.factura.id),{params:{incluir:["usuarioEmite:id,nombre_usuario","usuarioAnula:id,nombre_usuario"]}}).then((function(t){var a=t.data.data;e.factura=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar órdenes",a)})).then((function(){return e.cargandoOrdenes=!1}))},cargarOrdenes:function(){var e=this;this.cargandoOrdenes=!0;var t={page:this.paginacion.paginaActual};axios.get("/api/facturas/".concat(this.factura.id,"/ordenes"),{params:t}).then((function(t){var a=t.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total;var r=a.data;r.forEach((function(t){Vue.set(t,"saldo",e.calcularSaldo(t))})),e.ordenes=r})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar órdenes",a)})).then((function(){return e.cargandoOrdenes=!1}))},calcularSaldo:function(e){var t=e.valor_total-e.valor_total_abonos;return Math.round(100*(t+Number.EPSILON))/100},abrirModalFormasPago:function(e){this.formasPago=e.abonos.map((function(e){return e.forma_pago})),this.formasPago=_.uniq(this.formasPago),$("#modalVerFormasPago").modal("toggle")}}};var s=a(1900);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const l={components:{VerFacturaModal:(0,s.Z)(i,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"modalVerFactura",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Factura No. "+e._s(e.factura.numero_completo)+" ")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Teléfono")]),e._v(" "),t("div",[e._v(e._s(e.factura.telefono?e.factura.telefono:"-"))])]),e._v(" "),t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label"},[e._v("Correo")]),e._v(" "),t("div",[e._v(e._s(e.factura.correo?e.factura.correo:"-"))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label"},[e._v("Dirección")]),e._v(" "),t("div",[e._v(e._s(e.factura.direccion?e.factura.direccion:"-"))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Usuario emite")]),e._v(" "),t("div",[e._v(e._s(e.factura&&e.factura.usuario_emite?e.factura.usuario_emite.nombre_usuario:""))])]),e._v(" "),e.factura&&e.factura.usuario_anula?t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Usuario anula")]),e._v(" "),t("div",[e._v(e._s(e.factura.usuario_anula.nombre_usuario))])]):e._e()]),e._v(" "),e.cargandoOrdenes?e._e():t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Sucursal")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-left"},[e._v("\n                  Paciente\n                  "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.paginacion.totalRegistros>0,expression:"paginacion.totalRegistros > 0"}],staticClass:"badge cursor-menu",attrs:{title:"Cantidad órdenes","data-toggle":"tooltip","data-placement":"bottom"}},[e._v("\n                    "+e._s(e.paginacion.totalRegistros)+"\n                  ")])]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Descuento")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Abono")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Saldo")]),e._v(" "),t("th",{staticClass:"col-sm-1"})])]),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.sucursal.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v("\n                    "+e._s(e._f("fecha")(a.fecha_orden,"YYYY-MM-DD"))+"\n                  ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoOrden")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n                    "+e._s(a.valor_descuento?a.valor_descuento.toFixed(2):"0.00")+"\n                  ")]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(a.valor_total.toFixed(2)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(a.valor_total_abonos.toFixed(2)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(a.saldo.toFixed(2)))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{directives:[{name:"show",rawName:"v-show",value:a.abonos.length>0,expression:"orden.abonos.length>0"}],staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Ver formas de pago","data-id-orden":a.id},on:{click:function(t){return e.abrirModalFormasPago(a)}}},[t("i",{staticClass:"fas fa-money-check-alt fa-fw"})])])])]}))],2)])]),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoOrdenes,cantidad:e.ordenes.length,tipo:"órdenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.ordenes.length>0,expression:"ordenes.length > 0"}],staticClass:"pull-left"},[e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-range":6,"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarOrdenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",class:{"pull-left":e.paginacion.totalPaginas>1},attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n            Cerrar\n          ")])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalVerFormasPago",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",staticStyle:{top:"10px"}},[e._m(1),e._v(" "),t("div",{staticClass:"modal-body"},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(2),e._v(" "),t("tbody",[e._l(e.formasPago,(function(a){return[t("tr",[t("td",[e._v(e._s(e._f("formaPago")(a)))])])]}))],2)])]),e._v(" "),e._m(3)])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×\n            ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Formas de pago")])])},function(){var e=this._self._c;return e("thead",[e("tr",[e("th",[this._v("Forma pago")])])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n            Cerrar\n          ")])])}],!1,null,null,null).exports},props:["empresas","sucursales","datos","parametros"],data:function(){return{cargandoFacturas:!1,nombreImpuesto:"",facturas:[],ordenes:[],count:0,totalRegistros:0,filtros:{empresaId:"",subempresaId:"",sucursalId:"",fechaInicio:moment().format("YYYY-MM-DD"),fechaFin:moment().format("YYYY-MM-DD"),numeroOrden:"",numeroFactura:"",estadoFactura:"",razonSocial:"",page:""},pagina:1}},created:function(){this.parametros.prefijo&&this.parametros.numeroFactura&&(this.filtros.numeroFactura=this.parametros.prefijo+"-"+this.parametros.numeroFactura),this.parametros.numeroFactura&&(this.filtros.numeroFactura=this.parametros.numeroFactura),this.parametros.numeroOrden&&(this.filtros.numeroOrden=this.parametros.numeroOrden),(this.parametros.numeroFactura||this.filtros.numeroOrden)&&(this.filtros.fechaInicio="",this.filtros.fechaFin="")},mounted:function(){if($("body").tooltip({selector:'[rel="tooltip"]',container:"body"}),$('[rel="tooltip"]').tooltip({trigger:"hover"}),this.parametros.numero){if("PROFORMA"===this.parametros.tipo)this.mostrarExito("Proforma No. <strong>".concat(this.parametros.numero,"</strong> creada"));else{var e=["Factura No. <strong>".concat(this.parametros.numero,"</strong> creada")];"Ok"===this.parametros.sri&&(e.push("Enviada a SRI"),this.mostrarExito(e)),"Ok"!==this.parametros.sri&&"null"!==this.parametros.sri&&""!==this.parametros.sri&&(this.mostrarAdvertencia(this.parametros.sri),this.mostrarExito(e)),"null"!==this.parametros.sri&&""!==this.parametros.sri||this.mostrarExito(e)}this.parametros.numero="",this.parametros.sri="",this.parametros.tipo="",this.actualizarUrl({numero:"",tipo:"",sri:""})}var t=this.sucursales.find((function(e){return e.predeterminada}));this.filtros.sucursalId=t?t.id:"",this.filtros.empresaId=1===this.empresas.length?this.empresas[0].id:"",this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},cargarDatos:function(){this.cargarFacturas(1)},limpiarFormulario:function(){this.filtros.empresaId="",this.filtros.subempresaId="",this.filtros.sucursalId="",this.filtros.medicoId="",this.filtros.fechaInicio=moment().format("YYYY-MM-DD"),this.filtros.fechaFin=moment().format("YYYY-MM-DD"),this.filtros.numeroOrden="",this.filtros.numeroFactura="",this.filtros.estadoFactura="",this.filtros.razonSocial="",this.facturas=[],this.count=0},cargarEstadosCastorPorRuc:function(e){var t=this;Object.entries(e).forEach((function(e){var a=n(e,2),r=a[0],o=a[1];return t.cargarEstadosCastor(r,o)}))},cargarEstadosCastor:function(e,t){var a=this,r=t.map((function(e){return e.numero_externo})),o="".concat(this.datos.castorApiUrl,"/emisores/").concat(t[0].ruc_emisor,"/facturas?filtrar[clave_acceso]=").concat(r.join());axios.get(o,{headers:{Authorization:"Bearer ".concat(t[0].sistema_factura.extras.api_token)}}).then((function(e){var t=e.data.data;a.facturas.forEach((function(e){var a=t.find((function(t){return t.clave_acceso===e.numero_externo}));if(a){e.estadoSistemaFactura=a.estado;var r=a.errores_sri;_.isEmpty(r)||(e.errores="".concat(r.mensaje.mensaje," ").concat(r.mensaje.informacionAdicional))}}))})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores("¡Error al cargar estado desde Cástor!",t)}))},obtenerEstadoNombre:function(e){var t="";switch(e){case"E":t="Emitida";break;case"N":t="Anulada"}return t},buscar:function(){this.cargarFacturas(1)},cargarFacturas:function(e){var t=this;this.cargandoFacturas=!0,this.filtros.page=e,this.pagina=e,axios.get("/api/facturas",{params:this.filtros}).then((function(e){var a=e.data;t.count=a.last_page,t.totalRegistros=a.total;var o=a.data;if(0===o.length)return t.cargandoFacturas=!1,void(t.facturas=[]);var i=[];o=o.map((function(e){if(e.sistema_factura&&e.sistema_factura.driver===r.Q0.CASTOR&&e.ruc_emisor){var a=e.sistema_factura.id+"-"+e.ruc_emisor;i[a]||(i[a]=[]),i[a].push(e)}return{tipo:e.tipo,cantidad_ordenes:e.cantidad_ordenes,sistema_factura:e.sistema_factura,numero_externo:e.numero_externo,correo:e.correo,descuento:e.descuento,direccion:e.direccion,estado:e.estado,estadoNombre:t.obtenerEstadoNombre(e.estado),estadoSistemaFactura:"",fecha_emision:e.fecha_emision,id:e.id,identificacion:e.identificacion,importe_total:e.importe_total,impuesto:e.impuesto,numero:e.numero,numero_completo:e.numero_completo,porcentaje_impuesto:e.porcentaje_impuesto,prefijo:e.prefijo,razon_social:e.razon_social,telefono:e.telefono,tipo_identificacion:e.tipo_identificacion,total_sin_impuestos:e.total_sin_impuestos,usuario_anula:e.usuario_anula,usuario_emite:e.usuario_emite,ruc_emisor:e.ruc_emisor,errores:""}})),t.facturas=o,t.cargarEstadosCastorPorRuc(i)})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al listar facturas!",a)})).then((function(){return t.cargandoFacturas=!1}))},anular:function(e){var t=this;confirm("Existe(n) ".concat(e.cantidad_ordenes," orden(es) vinculada(s). ¿Está seguro de proceder con la anulación?"))&&axios.delete("/api/facturas/".concat(e.id)).then((function(){if(t.cargarFacturas(t.filtros.page),e.sistema_factura&&e.sistema_factura.driver===r.Q0.CONTIFICO){var a=["Factura No. ".concat(e.numero," anulada en Orión"),"Requiere ser anulada en Contífico"];t.mostrarExito(a)}else t.mostrarExito("Factura No. ".concat(e.numero," anulada"))})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores(a)}))},descargarPdfFactura:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;if(e.sistema_factura)if(_.get(e,"sistema_factura.driver","")!==r.Q0.CASTOR){var i=null,s=null;"i"===o.target.localName&&(s=o.target.parentNode,i=o.target),"a"===o.target.localName&&(s=o.target,i=o.target.childNodes[0]),"button"===o.target.localName&&(s=o.target,i=o.target.childNodes[0]),this.cambiarEstadoBoton(s,i),axios.get("/api/facturas/".concat(e.id,"/pdf")).then((function(e){var a=e.data;a.url?window.open(a.url,"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no"):t.mostrarErrores("Factura no tiene documento PDF")})).catch((function(a){var r=t.procesarErrorResponse(a);t.mostrarErrores("Error al buscar documento en "+e.sistema_factura.nombre,r)})).then((function(){return t.cambiarEstadoBoton(s,i)}))}else window.open("/api/facturas/".concat(e.id,"/pdf"),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no");else window.open("/api/facturas/"+e.id+"/pdf?incluirExamenes="+(a?"1":"0"),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},cambiarEstadoBoton:function(e,t){e.classList.contains("disabled")?(e.classList.remove("disabled"),t.classList.add("far","fa-file-pdf"),t.classList.remove("fas","fa-spinner","fa-spin")):(e.classList.add("disabled"),t.classList.remove("far","fa-file-pdf"),t.classList.add("fas","fa-spinner","fa-spin"))},abrirModalVerFactura:function(e){var t=(0,o.MD)({factura:e});$("#modalVerFactura").modal({},t)},puedeDescargarPdf:function(e){return!(!e.sistema_factura||e.sistema_factura.driver!==r.Q0.CASTOR)&&e.estadoNombre.includes("NO AUTORIZADO")}},computed:{subempresas:function(){var e=this;return this.filtros.empresaId?this.empresas.find((function(t){return t.id===e.filtros.empresaId})).subempresas:(this.filtros.subempresaId="",[])},puedeBuscar:function(){return this.filtros.empresaId||this.filtros.subempresaId||this.filtros.fechaInicio||this.filtros.fechaFin||this.filtros.sucursalId||this.filtros.numeroFactura||this.filtros.numeroOrden||this.filtros.razonSocial||this.filtros.estadoFactura}}},d=l;const u=(0,s.Z)(d,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.buscar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Facturas emitidas\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.buscar}},[t("i",{staticClass:"fas fa-search fa-fw"}),e._v(" Buscar\n            ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFormulario}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro",attrs:{id:"panelFiltros"}},[e._m(0),e._v(" "),t("div",{staticClass:"panel-collapse collapse in",attrs:{id:"collapseFiltros"}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaInicio,expression:"filtros.fechaInicio"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaFin,expression:"filtros.fechaFin"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}})])]),e._v(" "),t("div",{staticClass:"col-sm-3 col-md-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresas"}},[e._v("Cliente")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.empresaId,expression:"filtros.empresaId"}],staticClass:"form-control input-sm",attrs:{id:"empresas"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"empresaId",t.target.multiple?a:a[0])}}},[e.$can("cambiar-empresas")?t("option",{attrs:{value:""}},[e._v("Seleccione...")]):e._e(),e._v(" "),e._l(e.empresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 col-md-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresas"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresaId,expression:"filtros.subempresaId"}],staticClass:"form-control input-sm",attrs:{id:"subempresas"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresaId",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 col-md-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursales"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursalId,expression:"filtros.sucursalId"}],staticClass:"form-control input-sm",attrs:{id:"sucursales",name:"sucursales"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursalId",t.target.multiple?a:a[0])}}},[e.$can("cambiar-sucursal")?t("option",{attrs:{value:""}},[e._v("Seleccione...")]):e._e(),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numeroOrden"}},[e._v("No. Orden")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroOrden,expression:"filtros.numeroOrden"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"numeroOrden",maxlength:"20"},domProps:{value:e.filtros.numeroOrden},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numeroOrden",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numeroFactura"}},[e._v("No. Factura")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroFactura,expression:"filtros.numeroFactura"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"numeroFactura",maxlength:"25"},domProps:{value:e.filtros.numeroFactura},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numeroFactura",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"nombreFactura"}},[e._v("Nombre / Razón social")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.razonSocial,expression:"filtros.razonSocial"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombreFactura",maxlength:"200"},domProps:{value:e.filtros.razonSocial},on:{input:function(t){t.target.composing||e.$set(e.filtros,"razonSocial",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"estado"}},[e._v("Estado")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estadoFactura,expression:"filtros.estadoFactura"}],staticClass:"form-control input-sm",attrs:{name:"estado",id:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estadoFactura",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"E"}},[e._v("Emitida")]),e._v(" "),t("option",{attrs:{value:"N"}},[e._v("Anulada")])])])])])])]),e._v(" "),!e.cargandoFacturas&&e.facturas.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[e._l(e.facturas,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[t("small",[a.sistema_factura?[e._v("\n                  "+e._s(a.sistema_factura.nombre)+"\n                ")]:[e._v("\n                  Manual\n                ")]],2),e._v(" "),t("div",[e._v("\n                "+e._s(e._f("tipoFactura")(a.tipo))+"\n              ")])]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_completo))]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_emision,"YYYY-MM-DD </br> HH:mm"))}})]),e._v(" "),t("td",{staticClass:"text-left"},[t("small",[e._v(" "+e._s(a.identificacion))]),e._v(" "),t("div",[e._v("\n                "+e._s(a.razon_social)+"\n              ")])]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n              "+e._s(a.estadoNombre)+"\n              "),t("div",{staticClass:"no-salto-linea"},[e._v("\n                "+e._s(a.estadoSistemaFactura)+"\n                "),t("span",{staticStyle:{"font-size":"0.5rem"}},[a.errores?t("i",{staticClass:"fas fa-exclamation fa-3x text-danger",attrs:{rel:"tooltip","data-html":"true",title:"<strong>Cástor:</strong> ".concat(a.errores)}}):a.estadoSistemaFactura?t("i",{staticClass:"fas fa-asterisk fa-lg",attrs:{rel:"tooltip",title:"Estado en Cástor"}}):e._e()])])]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.descuento)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.importe_total)))]),e._v(" "),t("td",{staticClass:"text-right"},[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[e.$can("imprimir-facturas")&&"N"!==a.estado?t("button",{staticClass:"btn btn-default btn-sm",attrs:{rel:"tooltip",type:"button",title:e.puedeDescargarPdf(a)?"":"PDF Factura",disabled:e.puedeDescargarPdf(a)},on:{click:function(t){return e.descargarPdfFactura(a,!1,t)}}},[t("i",{staticClass:"far fa-file-pdf fa-fw"})]):e._e(),e._v(" "),a.sistema_factura||e.datos.facturaDoble||"N"===a.estado||!e.$can("imprimir-facturas")?e._e():t("button",{staticClass:"btn btn-default btn-sm",attrs:{rel:"tooltip",type:"button",title:"PDF Factura con exámenes",disabled:e.puedeDescargarPdf(a)},on:{click:function(t){return e.descargarPdfFactura(a,!0)}}},[t("i",{staticClass:"fas fa-file-alt"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{rel:"tooltip",type:"button",title:"Ver factura"},on:{click:function(t){return e.abrirModalVerFactura(a)}}},[t("i",{staticClass:"fas fa-eye fa-fw"})]),e._v(" "),"N"!==a.estado&&e.$can("anular-facturas")?t("button",{staticClass:"btn btn-danger btn-sm",attrs:{rel:"tooltip",type:"button",title:"Anular"},on:{click:function(t){return e.anular(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})]):e._e()])])])]}))],2)]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoFacturas,cantidad:e.facturas.length,tipo:"facturas"}}),e._v(" "),!e.cargandoFacturas&&e.facturas.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros)+"\n      ")]),e._v(" "),e.count>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.count,"page-range":5,"container-class":"pagination","click-handler":e.cargarFacturas,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.pagina,callback:function(t){e.pagina=t},expression:"pagina"}}):e._e()],1):e._e()],1),e._v(" "),t("ver-factura-modal")],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading puntero",attrs:{"data-toggle":"collapse","data-target":"#collapseFiltros"}},[e("h4",{staticClass:"panel-title"},[e("a",{attrs:{href:"#"}},[this._v("\n            Filtros\n          ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Tipo")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Razón social")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Descuento")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Total")]),e._v(" "),t("th",{staticClass:"col-sm-2"})])])}],!1,null,null,null).exports},3815:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});a(2155);var r=a(1272),o=a.n(r),i=a(5234),s=a.n(i);a(2194);const n={components:{ckeditor:o().component},data:function(){return{registro:{id:0,nombre:"",referencia_auxiliar:"",descripcion:"",imagen:"",dimensiones:"",tamano:"",resolucion:600},editor:s(),editorConfig:{language:"es",toolbar:["bold","italic","link","|","bulletedList","numberedList","|","undo","redo"]},imagen:"",imagenOriginal:"",imagenCortada:""}},props:["id","permisos","urlStorage"],mounted:function(){$("img").hide(),this.cargarDatos(),$("#nombre").focus()},methods:{actualizarVistaPrevia:function(){this.registro.imagen="",this.imagenCortada=this.$refs.cropper.getCroppedCanvas({fillColor:"white"}).toDataURL("image/jpeg")},cargarDatos:function(){var e=this;this.definirResolucionInicial(),"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/firmas/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a,e.definirResolucionInicial(),e.registro.descripcion||(e.registro.descripcion=""),e.registro.imagen&&(e.$refs.cropper.replace("".concat(e.urlStorage).concat(e.registro.imagen)),$("img").show())})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar membretes!",a)})).then((function(){return e.$refs.cargando.alternar()})))},enviarFormulario:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$refs.cargando.alternar(),this.alternarBotonesSubmit();var a=new FormData;a.append("nombre",this.registro.nombre),a.append("referencia_auxiliar",this.registro.referencia_auxiliar),a.append("descripcion",this.registro.descripcion?this.registro.descripcion:""),a.append("resolucion",this.registro.resolucion),a.append("imagen",this.registro.imagen),t&&a.append("datosImagen",t),"0"===this.id?axios.post("/api/firmas",a).then((function(){e.regresar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar firma!",a)})):(a.append("_method","PATCH"),axios.post("/api/firmas/".concat(this.id),a).then((function(){e.regresar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al actualizar firma!",a)})))},guardar:function(){var e=this,t=this.$refs.cropper.getCroppedCanvas({imageSmoothingEnabled:!1,fillColor:"white"});t?t.toBlob((function(t){e.enviarFormulario(t)}),"image/jpeg"):this.enviarFormulario()},imagenSeleccionada:function(e){var t=this;this.registro.imagen="",this.registro.dimensiones="",this.registro.tamano="",$("img").show();var a=e.target.files[0];if(this.imagen=a,a)if(a.type.includes("image/"))if("function"==typeof FileReader){var r=new FileReader;r.onload=function(e){t.imagenOriginal=e.target.result,t.$refs.cropper.replace(e.target.result),t.cargarAnchoYAltoImagen(e.target.result)},r.readAsDataURL(a)}else alert("Lo sentimos, su navegador no soporta esta función");else alert("Por favor seleccione una imagen");else alert("Por favor seleccione una imagen")},cargarAnchoYAltoImagen:function(e){var t=this,a=new Image;a.src=e,a.onload=function(e){if(e.path[0]){var a=e.path[0];t.registro.dimensiones="".concat(a.width," x ").concat(a.height)}}},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarAdvertenciaRaza:function(e,t){this.$refs.alertaAgregarRaza.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},regresar:function(){window.location.href="/firmas"},eliminarImagen:function(){this.imagen="",this.registro.imagen="",this.registro.dimensiones="",this.registro.tamano="",this.imagenOriginal="",this.imagenCortada="",this.$refs.cropper.destroy()},definirResolucionInicial:function(){Vue.set(this.registro,"resolucion",600)}},computed:{resolucionMinima:function(){return 200},resolucionMedia:function(){return 400},resolucionMaxima:function(){return 600}}},c=n;var l=a(3379),d=a.n(l),u=a(2874),m={insert:"head",singleton:!1};d()(u.Z,m);u.Z.locals;const p=(0,a(1900).Z)(c,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{ref:"formulario",staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear":"Editar")+" Firma\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{directives:[{name:"show",rawName:"v-show",value:"0"===e.id&&e.permisos.crearFirmas||"0"!==e.id&&e.permisos.editarFirmas,expression:"(id === '0' && permisos.crearFirmas) || (id !== '0' && permisos.editarFirmas)"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("fieldset",[t("div",{staticClass:"form-group"},[e._m(0),e._v(" "),t("div",{staticClass:"col-md-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombre",name:"nombre",maxlength:"100",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(1),e._v(" "),t("div",{staticClass:"col-md-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.referencia_auxiliar,expression:"registro.referencia_auxiliar"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"referencia-auxiliar",name:"referencia-auxiliar",maxlength:"8"},domProps:{value:e.registro.referencia_auxiliar},on:{input:function(t){t.target.composing||e.$set(e.registro,"referencia_auxiliar",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(2),e._v(" "),t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-5"},[t("div",{staticClass:"imagen-original"},[t("vue-cropper",{ref:"cropper",attrs:{alt:"Por favor seleccione una imagen",src:e.imagenOriginal,containerStyle:{height:"100%",width:"100%"},cropBoxResizable:!0,autoCropArea:1,cropend:e.actualizarVistaPrevia,ready:e.actualizarVistaPrevia,zoom:e.actualizarVistaPrevia}})],1)]),e._v(" "),t("div",{staticClass:"col-md-3"},[t("div",{staticClass:"col-sm-12"},[t("label",{staticClass:"btn btn-default"},[e._v("\n                  Seleccionar firma"),t("input",{staticClass:"sfo",attrs:{type:"file",name:"firma",accept:"image/*"},on:{change:e.imagenSeleccionada}})])]),e._v(" "),t("div",{staticClass:"col-sm-12",staticStyle:{"margin-top":"5px"}},[t("button",{staticClass:"btn btn-danger",attrs:{type:"button",title:"Eliminar imagen firma"},on:{click:e.eliminarImagen}},[t("i",{staticClass:"fas fa-trash"})])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.registro.dimensiones,expression:"registro.dimensiones"}],staticClass:"control-label"},[e._v("\n                  Dimensiones (Px)\n                ")]),e._v(" "),t("output",{directives:[{name:"show",rawName:"v-show",value:e.registro.dimensiones,expression:"registro.dimensiones"}],staticStyle:{"padding-top":"0","margin-top":"0"}},[e._v("\n                  "+e._s(e.registro.dimensiones)+"\n                ")])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.registro.tamano,expression:"registro.tamano"}],staticClass:"control-label"},[e._v("\n                  Tamaño\n                ")]),e._v(" "),t("output",{directives:[{name:"show",rawName:"v-show",value:e.registro.tamano,expression:"registro.tamano"}],staticStyle:{"padding-top":"0","margin-top":"0"}},[e._v("\n                  "+e._s(e.registro.tamano)+"\n                ")])])])])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(3),e._v(" "),t("div",{staticClass:"col-md-8"},[t("div",{staticClass:"vista-previa"},[t("img",{attrs:{src:e.imagenCortada,alt:"Vista previa"}})])])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(4),e._v(" "),t("div",{staticClass:"col-md-8"},[t("output",[e._v("\n            "+e._s(e.registro.resolucion)+"\n          ")]),e._v("\n          "+e._s(e.resolucionMinima)+"\n          "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.resolucion,expression:"registro.resolucion"}],staticClass:"span2",staticStyle:{width:"60%",display:"inline-block"},attrs:{id:"margen_izquierdo_datos_paciente",type:"range",min:e.resolucionMinima,max:e.resolucionMaxima,name:"margen_izquierdo_datos_paciente"},domProps:{value:e.registro.resolucion},on:{__r:function(t){return e.$set(e.registro,"resolucion",t.target.value)}}}),e._v("\n          "+e._s(e.resolucionMaxima)+"\n          "),t("div",{staticStyle:{"margin-top":"2px"}},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(t){e.registro.resolucion=e.resolucionMinima}}},[e._v("\n              "+e._s(e.resolucionMinima)+"\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(t){e.registro.resolucion=e.resolucionMedia}}},[e._v("\n              "+e._s(e.resolucionMedia)+"\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(t){e.registro.resolucion=e.resolucionMaxima}}},[e._v("\n              "+e._s(e.resolucionMaxima)+"\n            ")])])])]),e._v(" "),e._m(5),e._v(" "),t("div",{staticClass:"form-group"},[e._m(6),e._v(" "),t("div",{staticClass:"col-md-6 col-sm-9 editor"},[t("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.registro.descripcion,callback:function(t){e.$set(e.registro,"descripcion",t)},expression:"registro.descripcion"}})],1)])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[this._v("Nombre")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",{staticClass:"control-label",attrs:{for:"referencia-auxiliar"}},[this._v("Referencia auxiliar")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",{staticClass:"control-label"},[this._v("Firma")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",{staticClass:"control-label"},[this._v("Vista previa")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",{staticClass:"control-label",attrs:{for:"resolucion"}},[this._v("Resolución máxima")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-3"}),e._v(" "),t("div",{staticClass:"col-sm-9 col-md-9 help-block"},[t("em",[e._v("Nota:")]),e._v(" "),t("ul",[t("li",[e._v("\n              Si la resolución de la imagen es inferior, se conservará la resolución de la imagen cargada\n            ")]),e._v(" "),t("li",[e._v("A mayor resolución más lenta se hace la generación de PDFs.")])])])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 text-right"},[e("label",{staticClass:"control-label"},[this._v("Pie de firma")])])}],!1,null,"5d24444a",null).exports},8037:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["permisos"],data:function(){return{cargando:!1,count:0,cadenaBusqueda:"",firmas:[]}},created:function(){},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.cargarFirmas()},limpiarFormulario:function(){this.cadenaBusqueda=""},cargarFirmas:function(){var e=this;this.cargando=!0,axios.get("/api/firmas",{params:{cadenaBusqueda:this.cadenaBusqueda}}).then((function(t){var a=t.data.data;e.firmas=a,e.cargando=!1})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar firmas!",a)})).then((function(){return e.cargando=!1}))},editarFirma:function(e){window.location.href="/firmas/"+e.id+"/edit"},eliminarFirma:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/firmas/".concat(e.id)).then((function(){t.cargarDatos(),t.mostrarExito('¡Firma "'+e.nombre+'" eliminada exitosamente!')})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar firma!",a)}))},buscarFirmas:function(){this.cargarFirmas()}},computed:{}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Firmas\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarFirmas.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarFirmas}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[t("a",{class:"btn btn-primary"+(e.permisos.crearFirmas?"":" disabled"),attrs:{href:"/firmas/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n              ")])])])])]},proxy:!0}])}),e._v(" "),e.cargando?e._e():t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[0===e.firmas.length?t("tr",[t("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"4"}},[e._v("No existen resultados")])]):e._e(),e._v(" "),e._l(e.firmas,(function(a){return[t("tr",[t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.dimensiones))]),e._v(" "),t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.tamano))]),e._v(" "),t("td",{staticClass:"text-right centrado-vertical col-md-2"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Editar",disabled:!e.permisos.editarFirmas},on:{click:function(t){return e.editarFirma(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n              ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar",disabled:!e.permisos.eliminarFirmas},on:{click:function(t){return e.eliminarFirma(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n              ")])])])]}))],2)])]),e._v(" "),e.cargando?t("div",{staticClass:"panel-body text-center"},[e._m(1)]):e._e()],1)],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Dimensiones (Px)")]),e._v(" "),t("th",{staticClass:"col-sm-1"},[e._v("Tamaño")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this._self._c;return e("h4",[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n      ")])}],!1,null,null,null).exports},1853:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],data:function(){return{registro:{nombres:"",apellidos:""}}},mounted:function(){this.cargarDatos()},methods:{cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/flebotomistas/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar el flebotomista",a)})).then((function(){return e.$refs.cargando.alternar()})))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/flebotomistas",a="post";"0"!==this.id&&(t="/api/flebotomistas/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar el flebotomista",a)}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/flebotomistas"},regresar:function(){window.history.back()}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear flebotomista":"Editar flebotomista")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombres"}},[e._v("Nombres")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombres,expression:"registro.nombres"}],staticClass:"form-control input-sm",attrs:{id:"nombres",name:"nombres",type:"text",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.registro.nombres},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombres",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"apellidos"}},[e._v("Apellidos")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.apellidos,expression:"registro.apellidos"}],staticClass:"form-control input-sm",attrs:{id:"apellidos",name:"apellidos",type:"text",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.registro.apellidos},on:{input:function(t){t.target.composing||e.$set(e.registro,"apellidos",t.target.value)}}})])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},9237:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{cargando:!1,cadenaBusqueda:"",flebotomistas:[],paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0}}},mounted:function(){this.cargarDatos()},methods:{buscarFlebotomistas:function(){this.paginacion.paginaActual=1,this.cargarFlebotomistas()},cargarFlebotomistas:function(){var e=this;this.cargando=!0,this.flebotomistas=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginacion.paginaActual};axios.get("/api/flebotomistas",{params:t}).then((function(t){var a=t.data.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total,e.flebotomistas=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar los flebotomistas",a)})).finally((function(){return e.cargando=!1}))},cargarDatos:function(){this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginacion.paginaActual=1,this.cargarFlebotomistas()},editarFlebotomista:function(e){window.location.href="/flebotomistas/"+e.id+"/edit"},eliminarFlebotomista:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/flebotomistas/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("Flebotomista eliminado exitosamente")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al eliminar el flebotomista",a)}))},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginacion.paginaActual=1,this.cargarFlebotomistas()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Flebotomistas\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarFlebotomistas.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarFlebotomistas}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[e.$can("crear-flebotomistas")?t("a",{staticClass:"btn btn-primary",attrs:{href:"/flebotomistas/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")]):e._e()])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.flebotomistas.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.flebotomistas,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.nombres)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.apellidos)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-flebotomistas")},on:{click:function(t){return e.editarFlebotomista(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.$can("eliminar-flebotomistas")},on:{click:function(t){return e.eliminarFlebotomista(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.flebotomistas.length,tipo:"flebotomistas"}}),e._v(" "),!e.cargando&&e.flebotomistas.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarFlebotomistas,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Apellido")]),e._v(" "),t("th",{staticClass:"col-md-3 text-center"})])])}],!1,null,null,null).exports},1571:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],data:function(){return{registro:{tipo:"",fecha:moment().format("YYYY-MM-DD"),descripcion:"",valor:""}}},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),"0"===this.id&&axios.post("/api/flujos-cajas",this.registro).then((function(){e.limpiarFlujoCaja(),e.$emit("flujo-caja-creado","Registro agregado")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError(a)})).then((function(){e.$refs.cargando.alternar(),e.alternarBotonesSubmit()}))},redireccionar:function(){window.location.href="/flujos-cajas"},regresar:function(){window.history.back()},limpiarFlujoCaja:function(){this.registro.tipo="",this.registro.fecha=moment().format("YYYY-MM-DD"),this.registro.descripcion="",this.registro.valor=""}},computed:{}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"tipo"}},[e._v("Tipo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tipo,expression:"registro.tipo"}],staticClass:"form-control input-sm",attrs:{id:"tipo",name:"tipo",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tipo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"E"}},[e._v("Egreso")]),e._v(" "),t("option",{attrs:{value:"I"}},[e._v("Ingreso")])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio no-salto-linea",attrs:{for:"fecha"}},[e._v("Fecha")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha,expression:"registro.fecha"}],staticClass:"form-control input-sm",attrs:{id:"fecha","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",required:""}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"descripcion"}},[e._v("Descripción")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.descripcion,expression:"registro.descripcion"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"descripcion",maxlength:"50",required:""},domProps:{value:e.registro.descripcion},on:{input:function(t){t.target.composing||e.$set(e.registro,"descripcion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"valor"}},[e._v("Valor")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.valor,expression:"registro.valor"}],staticClass:"form-control input-sm",attrs:{type:"number",id:"valor",min:"0",step:"0.01"},domProps:{value:e.registro.valor},on:{input:function(t){t.target.composing||e.$set(e.registro,"valor",t.target.value)}}})]),e._v(" "),e._m(0)])])])],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 form-group margen-superior-boton"},[e("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-plus fa-fw"}),this._v(" Agregar\n          ")])])}],!1,null,null,null).exports},4408:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{Liston:a(2328).Z},data:function(){return{cargandoFlujosCajas:!1,flujosCajas:[],flujoCaja:{},count:0,filtros:{fechaDesde:"",fechaHasta:"",tipo:"",page:""},pagina:1}},mounted:function(){this.cargarDatos(),$("#anular").on("shown.bs.modal",(function(){$("#motivo_anula").focus()}))},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarErroresAnular:function(e,t){this.$refs.alertaAnular.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.cargarFlujosCajas(0,!1)},borrarFiltros:function(){this.filtros.fechaDesde="",this.filtros.fechaHasta="",this.filtros.tipo="",this.filtros.descripcion="",this.flujosCajas=[],this.count=0,this.cargarDatos()},buscar:function(){this.cargarFlujosCajas(0,!0)},cargarFlujosCajas:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.cargandoFlujosCajas=!0,this.filtros.page=e,this.pagina=e,this.flujosCajas=[],axios.get("/api/flujos-cajas",{params:this.filtros}).then((function(e){var r=e.data;t.count=r.last_page;var o=r.data;if(0===o.length&&a)return t.mostrarInformativo("No existen registros con los criterios especificados"),void(t.cargandoFlujosCajas=!1);t.flujosCajas=o,t.cargandoFlujosCajas=!1})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al listar flujo de caja!",a),t.cargandoFlujosCajas=!1,t.flujosCajas=[]}))},seleccionarFlujoCaja:function(e){this.flujoCaja={},this.flujoCaja=e},anular:function(){var e=this;confirm("¿Está seguro de proceder con la anulación?")&&axios.delete("/api/flujos-cajas/".concat(this.flujoCaja.id,"?motivo=").concat(this.flujoCaja.motivo_anula)).then((function(){$("#anular").modal("toggle"),e.cargarFlujosCajas(e.filtros.page),e.mostrarExito("Registro con valor <strong>"+e.flujoCaja.valor+"</strong> anulado"),e.flujoCaja=""})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErroresAnular("¡Error al anular flujo de caja!",a)}))},etiquetaTipo:function(e){var t="";return"I"===e&&(t="Ingreso"),"E"===e&&(t="Egreso"),t},etiquetaEstado:function(e){var t="";return"A"===e&&(t="Activo"),"N"===e&&(t="Anulado"),t},etiquetaAnular:function(e){return"A"===e.estado?"Anular":"Ver anulación"},flujoCajaCreado:function(e){this.buscar(),this.mostrarExito(e)},nombreUsuarioAnula:function(){var e="";return this.flujoCaja&&this.flujoCaja.usuario_anula&&(e=this.flujoCaja.usuario_anula.nombres+" "+this.flujoCaja.usuario_anula.apellidos),e}},computed:{esAnulado:function(){return"N"===this.flujoCaja.estado}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("liston"),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Ingresos y egresos\n    ")]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel-group",attrs:{id:"accordion"}},[e.$can("crear-flujos-cajas")?t("div",{staticClass:"panel panel-gris",attrs:{id:"panelNuevo"}},[e._m(0),e._v(" "),t("div",{staticClass:"panel-collapse collapse in",attrs:{id:"collapseNuevo"}},[t("div",{staticClass:"panel-body"},[t("clientes-flujos-cajas-formulario",{attrs:{id:"0"},on:{"flujo-caja-creado":e.flujoCajaCreado}})],1)])]):e._e(),e._v(" "),t("div",{staticClass:"panel panel-oscuro",attrs:{id:"panelFiltros"}},[e._m(1),e._v(" "),t("div",{staticClass:"panel-collapse collapse in",attrs:{id:"collapseFiltros"}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaDesde,expression:"filtros.fechaDesde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaHasta,expression:"filtros.fechaHasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd"}})])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"filtros_descripcion"}},[e._v("Descripción")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.descripcion,expression:"filtros.descripcion"}],staticClass:"form-control input-sm",attrs:{id:"filtros_descripcion",maxlength:"15"},domProps:{value:e.filtros.descripcion},on:{input:function(t){t.target.composing||e.$set(e.filtros,"descripcion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo"}},[e._v("Tipo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo,expression:"filtros.tipo"}],staticClass:"form-control input-sm",attrs:{id:"tipo"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"E"}},[e._v("Egreso")]),e._v(" "),t("option",{attrs:{value:"I"}},[e._v("Ingreso")])])]),e._v(" "),t("div",{staticClass:"col-md-4 margen-superior-boton"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:e.buscar}},[t("i",{staticClass:"fas fa-search fa-fw"}),e._v(" Buscar\n              ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.borrarFiltros}},[e._v("\n                Borrar filtros\n              ")])])])])])])]),e._v(" "),e.cargandoFlujosCajas?e._e():t("div",[t("table",{directives:[{name:"show",rawName:"v-show",value:e.flujosCajas.length>0,expression:"flujosCajas.length > 0"}],staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(2),e._v(" "),t("tbody",[e._l(e.flujosCajas,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(e.etiquetaTipo(a.tipo)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.fecha)))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.descripcion))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.etiquetaEstado(a.estado)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.usuario_ingresa.nombre_usuario))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(a.valor))]),e._v(" "),t("td",{staticClass:"col-sm-1 text-center"},[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[e.$can("anular-flujos-cajas")?t("a",{class:{"btn btn-xs":!0,"btn-danger":"A"===a.estado,"btn-default":"N"===a.estado},attrs:{title:e.etiquetaAnular(a),"data-toggle":"modal","data-backdrop":"static","data-target":"#anular"},on:{click:function(t){return t.preventDefault(),e.seleccionarFlujoCaja(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})]):e._e()])])])]}))],2)]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})]),e._v(" "),e.cargandoFlujosCajas?t("div",{staticClass:"panel-body text-center"},[e._m(3)]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.flujosCajas.length>0,expression:"flujosCajas.length > 0"}],staticClass:"clearfix text-center paginacion"},[t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.count,"container-class":"pagination","click-handler":e.cargarFlujosCajas,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.pagina,callback:function(t){e.pagina=t},expression:"pagina"}})],1),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"anular",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.anular.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(4),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v(e._s(e.etiquetaAnular(this.flujoCaja)))])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alertaAnular"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_"}},[e._v("Tipo")]),e._v(" "),t("output",{attrs:{id:"tipo_"}},[e._v(e._s(e.etiquetaTipo(e.flujoCaja.tipo)))])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha")]),e._v(" "),t("output",[e._v(e._s(e._f("fecha")(e.flujoCaja.fecha)))])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.esAnulado,expression:"esAnulado"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("output",[e._v("Anulado")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Valor")]),e._v(" "),t("output",[e._v(e._s(e.flujoCaja.valor))])]),e._v(" "),t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label"},[e._v("Descripción")]),e._v(" "),t("output",[e._v(e._s(e.flujoCaja.descripcion))])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.esAnulado,expression:"esAnulado"}],staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario_anula"}},[e._v("Usuario anula")]),e._v(" "),t("output",{attrs:{id:"usuario_anula"}},[e._v(e._s(e.nombreUsuarioAnula()))])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.esAnulado,expression:"esAnulado"}],staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_anula"}},[e._v("Fecha anula")]),e._v(" "),t("output",{attrs:{id:"fecha_anula"}},[e._v(e._s(e.flujoCaja.fecha_anula))])]),e._v(" "),t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:!e.esAnulado}},[e._v("Motivo anula")]),e._v(" "),e.esAnulado?e._e():t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.flujoCaja.motivo_anula,expression:"flujoCaja.motivo_anula"}],staticClass:"form-control input-sm textarea",attrs:{id:"motivo_anula",name:"motivo_anula",rows:"3",required:""},domProps:{value:e.flujoCaja.motivo_anula},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.stopPropagation()},input:function(t){t.target.composing||e.$set(e.flujoCaja,"motivo_anula",t.target.value)}}}),e._v(" "),e.esAnulado?t("div",[e._v(e._s(e.flujoCaja.motivo_anula))]):e._e()])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:!e.esAnulado,expression:"!esAnulado"}],staticClass:"btn btn-danger btn-sm",attrs:{type:"submit"}},[e._v("Anular")])])])])])])],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading puntero",attrs:{"data-toggle":"collapse","data-target":"#collapseNuevo"}},[e("div",{staticClass:"panel-title"},[e("a",{attrs:{href:"#"}},[this._v("\n            Agregar registro\n          ")])])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading puntero",attrs:{"data-toggle":"collapse","data-target":"#collapseFiltros"}},[e("div",{staticClass:"panel-title"},[e("a",{attrs:{href:"#"}},[this._v("\n            Filtros de búsqueda\n          ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Tipo")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Descripción")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Usuario ingresa")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this._self._c;return e("h4",[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n    ")])},function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports},2696:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{BuscarUsuarioModal:a(9794).Z},props:["datos"],data:function(){return{filtros:{fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),usuario_id:"",usuario_nombre:"",sucursal_id:"",empresa_id:"",subempresa_id:""},sucursales:[],empresas:[],empresa:"",subempresas:[]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/flujos-cajas/informe").then((function(t){var a=t.data.data;e.usuarios=a.usuarios,e.sucursales=a.sucursales,e.empresas=a.empresas,e.$can("cambiar-sucursal")||(e.filtros.sucursal_id=e.$usuario.sucursalId),e.$can("cambiar-empresas")||(e.filtros.empresa_id=e.$usuario.empresaId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al inicializar los filtros!",a)})).then((function(){return e.$refs.cargando.alternar()}))},limpiarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.usuario_id="",this.filtros.usuario_nombre="",this.filtros.subempresa_id="",this.filtros.detalles=!1,this.$can("cambiar-sucursal")&&(this.filtros.sucursal_id=""),this.$can("cambiar-empresas")&&(this.empresa="",this.filtros.empresa_id="")},abrirBusquedaUsuario:function(){$("#buscarUsuario").modal()},usuarioSeleccionado:function(e){this.filtros.usuario_id=e.id,this.filtros.usuario_nombre=e.nombre_usuario},generar:function(){if(this.validarFechas()){var e=this.obtenerParametrosUrl(this.filtros);window.open("/flujos-cajas/pdf"+e,"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")}},validarFechas:function(){var e=new RegExp("([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))"),t=e.test(this.filtros.fecha_desde);return t?(t=e.test(this.filtros.fecha_hasta))||(this.mostrarErrores("¡Error!",'La "Fecha Hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),t):(this.mostrarErrores("¡Error!",'La "Fecha Desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),t)},cambiarEmpresa:function(){this.filtros.subempresa_id="",""!==this.empresa?(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas):(this.filtros.empresa_id="",this.subempresas="")},limpiarUsuario:function(){this.filtros.usuario_id="",this.filtros.usuario_nombre=""}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Flujo de Caja\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{id:"generarInformeFlujoCaja",type:"button"},on:{click:e.generar}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Generar informe\n          ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n            Borrar filtros\n          ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}})])]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.empresa,expression:"empresa"}],staticClass:"form-control input-sm",attrs:{name:"empresa_id",id:"empresa_id",disabled:!e.$can("cambiar-empresas")},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.empresa=t.target.multiple?a:a[0]},e.cambiarEmpresa]}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.empresas,(function(a){return t("option",{domProps:{value:a}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresa_id,expression:"filtros.subempresa_id"}],staticClass:"form-control input-sm",attrs:{name:"subempresa_id",id:"subempresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresa_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.$can("cambiar-sucursal")},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"usuario"}},[e._v("Usuario")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.usuario_nombre,expression:"filtros.usuario_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"usuario",maxlength:"15",disabled:"true"},domProps:{value:e.filtros.usuario_nombre},on:{input:function(t){t.target.composing||e.$set(e.filtros,"usuario_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBusquedaUsuario}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarUsuario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])])])])])]),e._v(" "),t("buscar-usuario-modal",{on:{"usuario-seleccionado":e.usuarioSeleccionado}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])}],!1,null,null,null).exports},9211:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],components:{BuscarExamenModal:a(9107).Z},data:function(){return{sin_examenes:!1,registro:{tipo_grupo:""},detallesGrupo:[],detallesGrupoEliminar:[],tiposGrupos:[{id:"P",nombre:"Perfil"},{id:"C",nombre:"Consolidado de Resultados"},{id:"L",nombre:"Lista de Trabajo"}]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/grupos/"+this.id+"/edit").then((function(t){e.registro=t.data.data,e.cargarDetallesGrupo()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar grupos",a)})).then((function(){return e.$refs.cargando.alternar()})))},cargarDetallesGrupo:function(){this.detallesGrupo=this.registro.detalles_grupos.map((function(e){return{id_detalle:e.id,id:e.examen_id,codigo:e.examen.codigo,nombre:e.examen.nombre}}))},examenSeleccionado:function(e){e.esNuevo=!0,this.detallesGrupo.push(e)},eliminarDetalleGrupo:function(e){var t=this.detallesGrupo.indexOf(e);this.detallesGrupo.splice(t,1),e.esNuevo||this.detallesGrupoEliminar.push(e)},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),this.registro.detallesGrupo=this.detallesGrupo,"0"===this.id?axios.post("/api/grupos",this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.alternarBotonesSubmit(),e.$refs.cargando.alternar();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar",a)})):(this.registro.detallesGrupoEliminar=this.detallesGrupoEliminar,axios.patch("/api/grupos/"+this.id,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.alternarBotonesSubmit(),e.$refs.cargando.alternar();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar",a)})))},redireccionar:function(){window.location.href="/grupos"}},computed:{detallesGrupoOrdenados:function(){return _.orderBy(this.detallesGrupo,"nombre")},examenesIds:function(){return _.map(this.detallesGrupo,"id")}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear":"Editar")+" Grupo de Exámenes\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"/grupos"}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombre",name:"nombre",maxlength:"25",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"tipo_grupo"}},[e._v("Tipo de Grupo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tipo_grupo,expression:"registro.tipo_grupo"}],staticClass:"form-control input-sm",attrs:{id:"tipo_grupo",name:"tipo_grupo",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tipo_grupo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.tiposGrupos,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n            "+e._s(a.nombre)+"\n          ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[e._m(0),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[0===e.detallesGrupoOrdenados.length?[e._m(2)]:e._e(),e._v(" "),e._l(e.detallesGrupoOrdenados,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.codigo))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(t){return e.eliminarDetalleGrupo(a)}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Eliminar\n              ")])])])}))],2)])])])],1),e._v(" "),t("buscar-examen-modal",{attrs:{"seleccion-multiple":!0,"excluir-ids":e.examenesIds},on:{"examen-seleccionado":e.examenSeleccionado}}),e._v("`\n\n  "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8"},[t("h3",[e._v("Exámenes")])]),e._v(" "),t("div",{staticClass:"col-sm-4 text-right",staticStyle:{"padding-top":"25px"}},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen","data-backdrop":"static"}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v("Agregar\n            ")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-left"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this._self._c;return e("tr",[e("td",{attrs:{colspan:"3"}},[this._v("No existen examenes seleccionados")])])}],!1,null,null,null).exports},4536:(e,t,a)=>{"use strict";a.d(t,{Z:()=>A});const r={props:{printServer:{type:Object,default:function(){return{}}}},data:function(){return{procesando:{impresoras:!1,servidorLocal:!1},impresorasEtiquetas:[]}},mounted:function(){var e=this;$("#modalConfigs").on("show.bs.modal",(function(t){"modalConfigs"===t.target.id&&e.cargarDatos()})),$("#modalConfigs").on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},cargarDatos:function(){this.cargarImpresoras()},limpiar:function(){this.impresorasEtiquetas=[]},cargarImpresoras:function(){var e=this;this.impresorasEtiquetas=[],this.printServer.urlApiLocal?(this.procesando.impresoras=!0,axios.get("".concat(this.printServer.urlApiLocal,"/api/impresoras")).then((function(t){var a=t.data;e.impresorasEtiquetas=e.exlcuirImpresorasFaxXpsOtras(a,!0),e.printServer.etiquetas.impresora=e.buscarImpresora("etiquetas",e.printServer.etiquetas.impresora)})).catch((function(t){var a=e.procesarErroresOrionPrintServer(t);console.error("No se pudo cargar impresoras de este terminal",a)})).then((function(){e.procesando.impresoras=!1}))):console.error("No existe url de Orión Print Server")},validarServidorLocal:function(){var e=this;this.procesando.servidorLocal=!0,axios.get("".concat(this.printServer.urlApiLocal,"/api/estado")).then((function(){e.printServer.encendido=!0,e.cargarImpresoras()})).catch((function(){e.printServer.encendido=!1,e.impresorasEtiquetas=[]})).then((function(){return e.procesando.servidorLocal=!1}))},exlcuirImpresorasFaxXpsOtras:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=["anydesk","fax","onenote","xps","pdf"];return t||(a.push("zebra"),a.push("zdesigner")),e.filter((function(e){return void 0===a.find((function(t){return e.toLowerCase().includes(t.toLowerCase())}))}))},procesarErroresOrionPrintServer:function(e){return void 0===e.response?"El servidor de impresión se encuentra apagado":this.procesarErrorResponse(e)},cambioImprimirEtiquetas:function(e){localStorage.setItem("imprimir-etiquetas-iess",e.target.checked.toString())},impresoraEtiquetasSeleccionada:function(e){localStorage.setItem("impresora-etiquetas",e.target.value)},cambioIncluirMuestrasPendiente:function(){localStorage.setItem("incluir-muestras-pendientes",event.target.checked.toString())},buscarImpresora:function(e,t){if(!t)return"";var a=null;return"etiquetas"===e&&(a=this.impresorasEtiquetas.find((function(e){return e===t}))),a||(this.mostrarAdvertencia("Impresora de ".concat(e," <strong>").concat(t,"</strong> no encontrada")),"")}}};var o=a(1900);const i=(0,o.Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalConfigs",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{attrs:{method:"POST"}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),[t("legend",[e._v("Etiquetas")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",[e._v("\n                      Impresora\n                      "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.impresoras,expression:"procesando.impresoras"}],staticClass:"fas fa-spinner fa-spin fa-fw"})]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.printServer.etiquetas.impresora,expression:"printServer.etiquetas.impresora"}],staticClass:"form-control input-sm",attrs:{name:"impresora",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.printServer.etiquetas,"impresora",t.target.multiple?a:a[0])},e.impresoraEtiquetasSeleccionada]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.impresorasEtiquetas,(function(a){return t("option",{domProps:{value:a}},[e._v("\n                        "+e._s(a)+"\n                      ")])}))],2)])])]),e._v(" "),t("div",{staticClass:"col-sm-7 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.printServer.etiquetas.imprimir,expression:"printServer.etiquetas.imprimir"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.printServer.etiquetas.imprimir)?e._i(e.printServer.etiquetas.imprimir,null)>-1:e.printServer.etiquetas.imprimir},on:{click:e.cambioImprimirEtiquetas,change:function(t){var a=e.printServer.etiquetas.imprimir,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.printServer.etiquetas,"imprimir",a.concat([null])):i>-1&&e.$set(e.printServer.etiquetas,"imprimir",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.printServer.etiquetas,"imprimir",o)}}}),e._v("\n                        Imprimir directo\n                      ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.printServer.etiquetas.incluirMuestrasPendientes,expression:"printServer.etiquetas.incluirMuestrasPendientes"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.printServer.etiquetas.incluirMuestrasPendientes)?e._i(e.printServer.etiquetas.incluirMuestrasPendientes,null)>-1:e.printServer.etiquetas.incluirMuestrasPendientes},on:{click:e.cambioIncluirMuestrasPendiente,change:function(t){var a=e.printServer.etiquetas.incluirMuestrasPendientes,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.printServer.etiquetas,"incluirMuestrasPendientes",a.concat([null])):i>-1&&e.$set(e.printServer.etiquetas,"incluirMuestrasPendientes",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.printServer.etiquetas,"incluirMuestrasPendientes",o)}}}),e._v("\n                        Incluir etiquetas de muestras pendientes\n                      ")])])])])])])]],2),e._v(" "),e._m(1)])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Configuraciones")])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Cerrar")])])}],!1,null,null,null).exports;var s=a(6570),n=a(4590),c=a(1758);function l(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const u={components:{DatosOrden:s.Z,VerCoberturaMspModal:c.Z},props:{id:{type:Number,required:!0},orden:{type:Object,required:!0,default:function(){return{}}},muestras:{type:Array,default:function(){return[]}},printServer:{type:Object,default:function(){return{}}},procesando:{type:Boolean,required:!0},mostrarDatos:{type:Boolean,default:!1},mostrarMuestra:{type:Boolean,default:!0},sistemaExternoId:{type:Number,required:!0},mostrarBotonCrear:{type:Boolean,default:!0}},data:function(){return{seleccionadosTodos:!1,idDetallesOrdenSeleccionados:[]}},created:function(){var e=this;this.idDetallesOrdenSeleccionados=this.orden.detallesOrdenes.filter((function(e){return e.habilitado})).map((function(e){return e.examen_id})),this.mostrarDatos&&this.mostrarBotonCrear&&this.$nextTick((function(){return e.$refs.botonGuardar.focus()}))},methods:{alternarSeleccion:function(){this.seleccionadosTodos?this.idDetallesOrdenSeleccionados=this.orden.detallesOrdenes.filter((function(e){return e.habilitado})).map((function(e){return e.examen_id})):this.idDetallesOrdenSeleccionados=[]},seleccionarDetalleOrden:function(e){var t=this;if(e.habilitado)if(this.$nextTick((function(){return t.$refs.botonGuardar.focus()})),this.idDetallesOrdenSeleccionados.includes(e.examen_id)){var a=this.idDetallesOrdenSeleccionados.indexOf(e.examen_id);this.idDetallesOrdenSeleccionados.splice(a,1)}else this.idDetallesOrdenSeleccionados.push(e.examen_id)},guardar:function(){var e=this;this.orden.tiene_microbiologia=this.verificarTieneMicrobiologia(this.orden.detallesOrdenes),this.orden.detallesOrdenes=this.orden.detallesOrdenes.filter((function(t){return e.idDetallesOrdenSeleccionados.includes(t.examen_id)})),this.$emit("guardar",this.orden),this.idDetallesOrdenSeleccionados=[]},verificarTieneMicrobiologia:function(e){var t,a=!1,r=l(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.examen&&o.examen.microbiologia){a=!0;break}}}catch(e){r.e(e)}finally{r.f()}return a},seleccionarMuestraPendiente:function(e,t){var a=this;this.$nextTick((function(){return a.$refs.botonGuardar.focus()})),t.target.checked?this.orden.detallesOrdenes.forEach((function(a){a.muestras.filter((function(t){return t.muestra_id===e.muestra_id&&t.estado===n.zm.RECIBIDA})).forEach((function(e){e.estado=n.zm.PENDIENTE,e.pendiente=t.target.checked}))})):e.estado=n.zm.RECIBIDA},abrirModalEditarPaciente:function(){var e={pacienteType:this.obtenerPacienteType(this.orden.paciente_type),esCrearPaciente:!1,numeroIdentificacion:this.orden.paciente.numero_identificacion,pacienteId:this.orden.paciente_id};$("#gestionarPacienteModal").modal({backdrop:"static"},e)},obtenerPacienteType:function(e){var t="";switch(e){case n.sM.HUMANO:t="humano";break;case n.sM.ANIMAL:t="animal";break;case n.sM.OBJETO:t="objeto"}return t},abrirCoberturaMspPaciente:function(){$("#modalCoberturaMsp").modal({backdrop:"static"})}},computed:{cantidadExamenesNovedades:function(){return this.orden.detallesOrdenes.filter((function(e){return 0===e.muestras.length||!e.valor})).length}},watch:{idDetallesOrdenSeleccionados:function(e){this.seleccionadosTodos=e.length>0&&e.length===this.orden.detallesOrdenes.filter((function(e){return e.habilitado})).length}}};const m=(0,o.Z)(u,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"panel panel-gris",attrs:{id:"panelOrden".concat(e.id)}},[t("div",{staticClass:"panel-heading",class:{collapsed:!e.mostrarDatos,puntero:!e.mostrarDatos,emergencia:e.orden.tipo_atencion&&e.orden.tipo_atencion.urgente||e.orden.servicio&&e.orden.servicio.urgente},staticStyle:{position:"sticky !important",top:"10px","z-index":"10"},attrs:{"data-toggle":e.mostrarDatos?"":"collapse","data-target":"#colapsableOrden".concat(e.id)}},[t("div",{staticClass:"panel-title"},[t("a",[t("datos-orden",{attrs:{"mostrar-numero-orden-externa":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-edad":!0,"mostrar-poliza":!1,"mostrar-telefono":!0,"mostrar-correo":!1,"mostrar-direccion":!1,"mostrar-fecha-cita":!0,"mostrar-historia-clinica":!0,orden:e.orden}}),e._v(" "),t("span",{attrs:{title:"Exámenes",rel:"tooltip"}},[t("strong",[e._v("E:")]),e._v(" "+e._s(e.idDetallesOrdenSeleccionados.length)+"/"+e._s(e.orden.detallesOrdenes.length)+"\n          ")]),e._v(" "),e.cantidadExamenesNovedades>0?t("span",{staticClass:"text-warning",attrs:{title:"Exámenes con novedades",rel:"tooltip"}},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.cantidadExamenesNovedades)+"\n          ")]):e._e()],1),e._v(" "),e.$can("editar-ordenes")?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",rel:"tooltip",title:"Editar datos de paciente seleccionado"},on:{click:e.abrirModalEditarPaciente}},[t("i",{staticClass:"fas fa-pencil-alt fa-fw"})]):e._e(),e._v(" "),"App\\Models\\PacienteHumano"===e.orden.paciente_type?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Cobertura MSP","data-toggle":"tooltip"},on:{click:e.abrirCoberturaMspPaciente}},[t("img",{attrs:{id:"logo_msp",src:"/img/msp.ico",alt:""}})]):e._e()])]),e._v(" "),t("div",{staticClass:"panel-collapse collapse",class:{in:e.mostrarDatos},attrs:{id:"colapsableOrden".concat(e.id)}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"categoria"}},[e._v("Categoría")]),e._v(" "),t("div",{attrs:{id:"categoria"}},[e._v(e._s(e.orden.categoria.nombre))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"servicio"}},[e._v("\n              Servicio\n              "),t("a",{directives:[{name:"show",rawName:"v-show",value:!e.orden.servicio,expression:"!orden.servicio"}],staticClass:"puntero",attrs:{href:"/servicios"}},[t("i",{staticClass:"fas fa-database text-gris",attrs:{rel:"tooltip",title:"Catálogo Servicios"}})])]),e._v(" "),t("div",{class:{"no-salto-linea":!e.orden.servicio},attrs:{id:"servicio"}},[e.orden.servicio?[e._v("\n                "+e._s(e.orden.servicio.nombre)+"\n                "),e.orden.servicio.urgente?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",attrs:{rel:"tooltip",title:"urgente"}}):e._e()]:e.orden.sala_id_externo?[t("div",{staticClass:"text-danger"},[e._v("\n                  Sin homologar "),t("strong",[e._v(e._s(e.orden.sala_id_externo))])])]:e._e()],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipoAtencion"}},[e._v("\n              Tipo atención\n              "),t("a",{directives:[{name:"show",rawName:"v-show",value:!e.orden.tipoAtencion,expression:"!orden.tipoAtencion"}],staticClass:"puntero",attrs:{href:"/tipos-atenciones"}},[t("i",{staticClass:"fas fa-database text-gris",attrs:{rel:"tooltip",title:"Catálogo Tipos Atenciones"}})])]),e._v(" "),t("div",{class:{"no-salto-linea":!e.orden.tipoAtencion},attrs:{id:"tipoAtencion"}},[e.orden.tipoAtencion?[e._v("\n                "+e._s(e.orden.tipoAtencion.nombre)+"\n              ")]:e.orden.tipo_atencion_id_externo?[t("div",{staticClass:"text-danger"},[e._v("\n                  Sin homologar "),t("strong",[e._v(e._s(e.orden.tipo_atencion_id_externo))])])]:e._e()],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipoPaciente"}},[e._v("\n              Tipo paciente\n              "),t("a",{directives:[{name:"show",rawName:"v-show",value:!e.orden.tipoPaciente,expression:"!orden.tipoPaciente"}],staticClass:"puntero",attrs:{href:"/tipos-pacientes"}},[t("i",{staticClass:"fas fa-database text-gris",attrs:{rel:"tooltip",title:"Catálogo Tipos Pacientes"}})])]),e._v(" "),t("div",{class:{"no-salto-linea":!e.orden.tipoPaciente},attrs:{id:"tipoPaciente"}},[e.orden.tipoPaciente?[e._v("\n                "+e._s(e.orden.tipoPaciente.nombre)+"\n              ")]:e.orden.tipo_paciente_id_externo?[t("div",{staticClass:"text-danger"},[e._v("\n                  Sin homologar "),t("strong",[e._v(e._s(e.orden.tipo_paciente_id_externo))])])]:e._e()],2)]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico"}},[e._v("Médico")]),e._v(" "),t("div",{attrs:{id:"medico"}},[e._v(e._s(e.orden.medico.nombres)+" "+e._s(e.orden.medico.apellidos))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"observaciones_orden"}},[e._v("Observaciones recibo")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.orden.observaciones_orden,expression:"orden.observaciones_orden"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",id:"observaciones_orden",name:"observaciones_orden"},domProps:{value:e.orden.observaciones_orden},on:{input:function(t){t.target.composing||e.$set(e.orden,"observaciones_orden",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"observaciones_hoja_trabajo"}},[e._v("Observaciones laboratorista")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.orden.observaciones_hoja_trabajo,expression:"orden.observaciones_hoja_trabajo"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",id:"observaciones_hoja_trabajo",name:"observaciones_hoja_trabajo"},domProps:{value:e.orden.observaciones_hoja_trabajo},on:{input:function(t){t.target.composing||e.$set(e.orden,"observaciones_hoja_trabajo",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_pedido"}},[e._v("Fecha pedido")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.orden.fecha_pedido,expression:"orden.fecha_pedido"}],staticClass:"form-control input-sm",attrs:{id:"fecha_pedido","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es",placeholder:"aaaa-mm-dd"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})])]),e._v(" "),t("h3",[e._v("\n          Exámenes\n          "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.orden.detallesOrdenes.length>0,expression:"orden.detallesOrdenes.length > 0"}],staticClass:"badge cursor-menu",attrs:{title:"Seleccionados",rel:"tooltip"}},[e._v("\n            "+e._s(e.idDetallesOrdenSeleccionados.length)+" / "+e._s(e.orden.detallesOrdenes.length)+"\n          ")])]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.seleccionadosTodos,expression:"seleccionadosTodos"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.seleccionadosTodos)?e._i(e.seleccionadosTodos,null)>-1:e.seleccionadosTodos},on:{change:[function(t){var a=e.seleccionadosTodos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.seleccionadosTodos=a.concat([null])):i>-1&&(e.seleccionadosTodos=a.slice(0,i).concat(a.slice(i+1)))}else e.seleccionadosTodos=o},e.alternarSeleccion]}})]),e._v(" "),t("th",{staticClass:"col-sm-1 text-left"},[e._v("\n              Código AS400\n            ")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("\n              Examen\n            ")]),e._v(" "),e.mostrarMuestra?t("th",{staticClass:"col-sm-1 text-center"},[e._v("\n              Pendiente\n            ")]):e._e(),e._v(" "),e.mostrarMuestra?t("th",{staticClass:"col-sm-3 text-left"},[e._v("\n              Muestra\n            ")]):e._e()])]),e._v(" "),t("tbody",[e._l(e.orden.detallesOrdenes,(function(a){return[0===a.muestras.length?t("tr",[t("td"),e._v(" "),t("td",{attrs:{colspan:"4"}},[t("div",{staticClass:"text-danger"},[e._v("\n                  Sin homologar "),t("strong",[e._v(e._s(a.id_externo))])])])]):e._e(),e._v(" "),e._l(a.muestras,(function(r,o){return t("tr",[0===o?t("td",{staticClass:"text-center",attrs:{rowspan:a.muestras.length},on:{click:function(t){return e.seleccionarDetalleOrden(a)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.idDetallesOrdenSeleccionados,expression:"idDetallesOrdenSeleccionados"}],attrs:{type:"checkbox",disabled:!a.habilitado},domProps:{value:a.examen_id,checked:Array.isArray(e.idDetallesOrdenSeleccionados)?e._i(e.idDetallesOrdenSeleccionados,a.examen_id)>-1:e.idDetallesOrdenSeleccionados},on:{change:function(t){var r=e.idDetallesOrdenSeleccionados,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.examen_id,n=e._i(r,s);o.checked?n<0&&(e.idDetallesOrdenSeleccionados=r.concat([s])):n>-1&&(e.idDetallesOrdenSeleccionados=r.slice(0,n).concat(r.slice(n+1)))}else e.idDetallesOrdenSeleccionados=i}}})]):e._e(),e._v(" "),0===o?t("td",{staticClass:"text-left",attrs:{rowspan:a.muestras.length},on:{click:function(t){return e.seleccionarDetalleOrden(a)}}},[e._v("\n                "+e._s(a.id_externo?a.id_externo:"-")+"\n              ")]):e._e(),e._v(" "),0===o?t("td",{staticClass:"text-left",attrs:{rowspan:a.muestras.length},on:{click:function(t){return e.seleccionarDetalleOrden(a)}}},[a.examen?[e._v("\n                  "+e._s(a.examen.codigo)+" - "+e._s(a.examen.nombre)+"\n                ")]:e._e(),e._v(" "),a.examen&&!a.valor?[t("a",{attrs:{href:"/examenes/".concat(a.examen.id,"/edit"),target:"_blank"}},[t("strong",{staticClass:"text-danger"},[e._v("(No tiene tarifa)")])])]:e._e(),e._v(" "),a.examen&&a.examen.microbiologia?[t("strong",{staticClass:"text-danger"},[e._v("\n                    Microbiología\n                  ")])]:e._e(),e._v("\n                 \n                "),t("small",{staticClass:"text-muted"},[t("em",[e._v(e._s(a.dias_ultimo_examen))])])],2):e._e(),e._v(" "),e.mostrarMuestra?t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.pendiente,expression:"muestra.pendiente"}],attrs:{type:"checkbox",disabled:!a.habilitado},domProps:{value:!0,checked:Array.isArray(r.pendiente)?e._i(r.pendiente,!0)>-1:r.pendiente},on:{click:function(t){return e.seleccionarMuestraPendiente(r,t)},change:function(t){var a=r.pendiente,o=t.target,i=!!o.checked;if(Array.isArray(a)){var s=e._i(a,true);o.checked?s<0&&e.$set(r,"pendiente",a.concat([true])):s>-1&&e.$set(r,"pendiente",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(r,"pendiente",i)}}})]):e._e(),e._v(" "),e.mostrarMuestra?t("td",{staticClass:"text-left"},[t("v-select",{staticClass:"form-control input-sm",staticStyle:{"font-weight":"400 !important"},attrs:{placeholder:"Seleccione...",disabled:!a.habilitado||r.pendiente,options:e.muestras,label:"nombre",clearable:!1,reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!0),model:{value:r.muestra_id,callback:function(t){e.$set(r,"muestra_id",t)},expression:"muestra.muestra_id"}})],1):e._e()])}))]}))],2)])]),e._v(" "),e.mostrarBotonCrear||e.printServer.encendido?t("div",{staticClass:"panel-footer"},[e.mostrarBotonCrear?t("button",{ref:"botonGuardar",staticClass:"btn btn-primary",attrs:{type:"button",disabled:0===e.idDetallesOrdenSeleccionados.length||e.procesando},on:{click:e.guardar}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-save fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n           Crear en Orión\n        ")]):e._e(),e._v(" "),e.printServer.encendido?t("div",{staticClass:"checkbox",staticStyle:{display:"inline","padding-left":"10px"}},[t("label",{attrs:{title:e.printServer.etiquetas.impresora}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.printServer.etiquetas.imprimir,expression:"printServer.etiquetas.imprimir"}],staticStyle:{float:"inherit"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.printServer.etiquetas.imprimir)?e._i(e.printServer.etiquetas.imprimir,null)>-1:e.printServer.etiquetas.imprimir},on:{change:[function(t){var a=e.printServer.etiquetas.imprimir,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.printServer.etiquetas,"imprimir",a.concat([null])):i>-1&&e.$set(e.printServer.etiquetas,"imprimir",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.printServer.etiquetas,"imprimir",o)},function(t){return e.$emit("cambio-imprimir-etiquetas",t)}]}}),e._v("\n            Imprimir etiquetas\n          ")])]):e._e()]):e._e()])]),e._v(" "),t("ver-cobertura-msp-modal",{attrs:{"identificacion-paciente":e.orden.paciente.numero_identificacion,"fecha-nacimiento":e.orden.paciente.fecha_nacimiento}})],1)}),[],!1,null,null,null).exports;const p={components:{Orden:m},props:{muestras:{type:Array},printServer:{type:Object,default:function(){return{}}}},data:function(){return{procesando:{guardar:!1},orden:null}},mounted:function(){var e=this;$("#modalOrdenExiste").on("show.bs.modal",(function(t){"modalOrdenExiste"===t.target.id&&(e.orden=$(t.relatedTarget).data("orden"))})),$("#modalOrdenExiste").on("shown.bs.modal",(function(){return e.$refs.botonGuardar.focus()})),$("#modalOrdenExiste").on("hide.bs.modal",(function(t){"modalOrdenExiste"===t.target.id&&(e.orden=null)}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},guardarOrdenNueva:function(){var e=this;this.orden.id="",this.orden.numero_orden="",this.orden.no_verificar_orden_existente=!0,this.orden.tiene_microbiologia=this.$refs.orden.verificarTieneMicrobiologia(this.orden.detallesOrdenes),this.orden.detallesOrdenes=this.orden.detallesOrdenes.filter((function(t){return e.$refs.orden.idDetallesOrdenSeleccionados.includes(t.examen_id)})),this.$emit("guardar",this.orden),this.$refs.orden.idDetallesOrdenSeleccionados=[],$("#modalOrdenExiste").modal("toggle")},guardarOrdenExistente:function(){var e=this;this.orden.tiene_microbiologia=this.$refs.orden.verificarTieneMicrobiologia(this.orden.detallesOrdenes),this.orden.detallesOrdenes=this.orden.detallesOrdenes.filter((function(t){return e.$refs.orden.idDetallesOrdenSeleccionados.includes(t.examen_id)})),this.$emit("guardar-orden-existente",this.orden),this.$refs.orden.idDetallesOrdenSeleccionados=[],$("#modalOrdenExiste").modal("toggle")},cambioImprimirEtiquetas:function(e){this.$emit("cambio-imprimir-etiquetas",e)}}};const f=(0,o.Z)(p,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"modalOrdenExiste",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Orden existente No. "+e._s(e.orden?e.orden.numero_orden:""))])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),e.orden?t("orden",{ref:"orden",attrs:{id:e.orden.id,orden:e.orden,muestras:e.muestras,procesando:e.procesando.guardar,"sistema-externo-id":e.orden.sistema_externo_id,"print-server":e.printServer,"mostrar-boton-crear":!1,"mostrar-datos":!0},on:{"cambio-imprimir-etiquetas":e.cambioImprimirEtiquetas}}):e._e()],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.guardarOrdenNueva}},[e._v("Crear nueva orden")]),e._v(" "),t("button",{ref:"botonGuardar",staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:e.guardarOrdenExistente}},[e._v("\n            Agregar exámenes a orden existente de Orión No. "+e._s(e.orden?e.orden.numero_orden:"")+"\n          ")])])])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports;var v=a(7974);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function g(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const E={components:{ConfigsModal:i,OrdenExisteModal:f,Orden:m,GestionarPacienteModal:a(2979).Z},props:["datos"],data:function(){return{procesando:{busqueda:!1,guardar:!1,ultimoExamen:!1},filtros:{sistemaExternoId:null,numeroOrdenIess:"",identificacionPaciente:""},ordenes:[],esCita:!1,orden:null,sistemasExternos:[],muestras:[],opciones:[],printServer:{urlApiLocal:"",encendido:!1,etiquetas:{imprimir:!1,incluirMuestrasPendientes:!1,impresora:"",alto:"",ancho:""}}}},created:function(){this.sistemasExternos=this.datos.sistemasExternos;var e=localStorage.getItem("sistema-externo-iess-id");e&&(this.filtros.sistemaExternoId=parseInt(e)),!this.filtros.sistemaExternoId&&this.sistemasExternos.length>0&&(this.filtros.sistemaExternoId=this.sistemasExternos[0].id,localStorage.setItem("sistema-externo-iess-id",this.filtros.sistemaExternoId)),this.$usuario.sistemaHisId&&(this.filtros.sistemaExternoId=parseInt(this.$usuario.sistemaHisId)),this.configurarOpciones(),this.verificarOrionPrintServer(),this.escucharEventoServidorLocal()},mounted:function(){$("#numero_orden_iess").focus(),$("body").tooltip({selector:'[rel="tooltip"]',container:"body",trigger:"hover"}),this.datos.parametros.numeroOrdenIess&&(this.filtros.numeroOrdenIess=this.datos.parametros.numeroOrdenIess,this.buscar(!0)),this.cargarMuestras()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){this.datos.urlPrevio&&this.datos.urlPrevio.includes("/ordenes")?window.location.href=this.datos.urlPrevio:window.location.href="/ordenes"},configurarOpciones:function(){this.opciones=this.datos.opciones,this.printServer.urlApiLocal="https://".concat(this.opciones.dominioServidorLocal,":").concat(this.opciones.puertoServidorLocal),this.printServer.etiquetas.alto=this.opciones.etiquetaAlto,this.printServer.etiquetas.ancho=this.opciones.etiquetaAncho},cargarMuestras:function(){var e=this;axios.get("/api/muestras").then((function(t){var a=t.data.data;e.muestras=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar muestras",a)}))},borrarFiltros:function(){this.filtros.numeroOrdenIess="",this.filtros.identificacionPaciente="",this.ordenes=[],$("#numero_orden_iess").focus()},buscar:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.ordenes=[],this.esCita=t;var a={esCita:t?1:0,sistemaExternoId:this.filtros.sistemaExternoId,numeroOrdenIess:this.filtros.numeroOrdenIess.trim(),identificacionPaciente:this.filtros.identificacionPaciente.trim()};this.$refs.alerta.ocultarAlertas(),a.esCita||a.numeroOrdenIess?!a.esCita||a.numeroOrdenIess||a.identificacionPaciente?(this.procesando.busqueda=!0,axios.get("/api/iess/ordenes",{params:a}).then((function(t){var a=t.data;a.data.forEach((function(e){e.detallesOrdenes=e.detallesOrdenes.map((function(e){return e.muestras=e.muestras.map((function(e){return C(C({},e),{},{pendiente:!1})})),C(C({},e),{},{habilitado:e.examen_id&&e.valor,dias_ultimo_examen:null})}))})),e.ordenes=a.data,e.cargarUltimoDetalleOrden(e.ordenes),_.isEmpty(a.errores)||e.mostrarErrores(a.errores)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.procesando.busqueda=!1}))):this.mostrarErrores("Filtro <strong>Orden No.</strong> o <strong>Identificación paciente</strong> es requerido"):this.mostrarErrores("Filtro <strong>Orden No.</strong> de IESS es requerido")},cargarUltimoDetalleOrden:function(e){var t,a=this,r=g(e);try{var o=function(){var e=t.value,r={numeroIdentificacion:e.paciente.numero_identificacion,idsExamenes:e.detallesOrdenes.filter((function(e){return e.examen_id})).map((function(e){return e.examen_id}))};if(_.isEmpty(r.idsExamenes))return{v:void 0};a.procesando.ultimoExamen=!0,axios.get("/api/detalles-ordenes/ultimo",{params:r}).then((function(t){var a=t.data.data;e.detallesOrdenes.forEach((function(e){a.forEach((function(t){t.examen_id===e.examen_id&&(e.dias_ultimo_examen=moment(t.created_at).fromNow())}))}))})).then((function(){a.procesando.ultimoExamen=!1}))};for(r.s();!(t=r.n()).done;){var i=o();if("object"===h(i))return i.v}}catch(e){r.e(e)}finally{r.f()}},guardar:function(e){var t=this;this.ordenes=[],this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),this.procesando.guardar=!0,this.$refs.alerta.ocultarAlertas(),e.sistema_externo=this.sistemaExterno,axios.post("/api/iess/ordenes",e).then((function(a){var r=a.data.data;t.borrarFiltros(),t.procesarRespuesta(e,r)})).catch((function(a){if(a&&a.response&&a.response.data&&a.response.data.ordenExiste){var r=a.response.data.data;e.id=r.id,e.numero_orden=r.numeroOrden,e.detallesOrdenes=e.detallesOrdenes.filter((function(e){return r.idsExamenes.includes(e.examen_id)}));var o=(0,v.MD)({orden:e});$("#modalOrdenExiste").modal({},o)}else{var i=t.procesarErrorResponse(a);t.mostrarErrores(i)}})).then((function(){t.procesando.guardar=!1,t.$refs.cargando.alternar(),t.alternarBotonesSubmit()}))},guardarOrdenExistente:function(e){var t=this;this.ordenes=[],this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),this.procesando.guardar=!0,this.$refs.alerta.ocultarAlertas(),e.sistema_externo=this.sistemaExterno,axios.patch("/api/iess/ordenes/".concat(e.id),e).then((function(a){var r=a.data.data;t.borrarFiltros(),t.procesarRespuesta(e,r,!0)})).catch((function(a){if(a&&a.response&&a.response.data&&a.response.data.ordenExiste){var r=a.response.data.data;e.id=r.id,e.numero_orden=r.numeroOrden,e.detallesOrdenes=e.detallesOrdenes.filter((function(e){return r.idsExamenes.includes(e.examen_id)}));var o=(0,v.MD)({orden:e});$("#modalOrdenExiste").modal({},o)}else{var i=t.procesarErrorResponse(a);t.mostrarErrores(i)}})).then((function(){t.procesando.guardar=!1,t.$refs.cargando.alternar(),t.alternarBotonesSubmit()}))},procesarRespuesta:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.yaDescargados>0&&this.mostrarAdvertencia(t.mensajesDescargados),t.errores>0&&(this.mostrarErrores("Exámenes no descargados de IESS AS400: ".concat(t.errores," de ").concat(t.total)),t.mensajes.unshift("Orden no descargada de <strong>IESS AS400</strong>"),this.mostrarErrores(t.mensajes)),t.descargadosDeIess>0&&t.descargadosDeIess>=t.total){var r=[];r.push("Orden descargada de <strong>IESS AS400</strong>"),r.push("Exámenes descargados: ".concat(t.descargadosDeIess," de ").concat(t.total)),this.mostrarExito(r)}else t.descargadosDeIess>0&&t.descargadosDeIess<t.total&&(this.mostrarErrores("Orden no descargada de <strong>IESS AS400</strong>"),this.mostrarAdvertencia("Exámenes descargados de IESS AS400: ".concat(t.descargadosDeIess," de ").concat(t.total)));var o=this.obtenerNumeroHistoriaClinica(e,this.filtros.sistemaExternoId),i=['Orden <a href="/ordenes?cadenaBusqueda='.concat(t.numero_orden,'">').concat(t.numero_orden,"</a> creada en <strong>Orión</strong>"),"Orden AS400 ".concat(e.numero_orden_externa),"HC AS400 ".concat(o)];a&&(i=["Se agregaron los examenes seleccionados a la orden",'Orden <a href="/ordenes?cadenaBusqueda='.concat(t.numero_orden,'">').concat(t.numero_orden,"</a> actualizada en <strong>Orión</strong>"),"Orden AS400 ".concat(e.numero_orden_externa),"HC AS400 ".concat(o)]),this.mostrarExito(i),this.imprimirEtiquetas(t.id_orden,t.ids_detalles_ordenes),this.datos.parametros.numeroOrdenIess&&this.actualizarUrl(),this.esCita?setTimeout((function(){return $("#cita_numero_orden_iess").focus()}),700):setTimeout((function(){return $("#numero_orden_iess").focus()}),700)},verificarOrionPrintServer:function(){var e=this;axios.get("".concat(this.printServer.urlApiLocal,"/api/estado")).then((function(){e.printServer.encendido=!0,e.printServer.etiquetas.imprimir="true"===localStorage.getItem("imprimir-etiquetas-iess"),e.printServer.etiquetas.impresora=localStorage.getItem("impresora-etiquetas"),e.printServer.etiquetas.incluirMuestrasPendientes="true"===localStorage.getItem("incluir-muestras-pendientes")})).catch((function(){return console.info("Print Server no encontrado")}))},escucharEventoServidorLocal:function(){var e=this;this.$root.$on("servidor-local-estado",(function(t){t?(e.printServer.encendido=!0,e.printServer.etiquetas.imprimir="true"===localStorage.getItem("imprimir-etiquetas-iess"),e.printServer.etiquetas.impresora=localStorage.getItem("impresora-etiquetas")):(e.printServer.encendido=!1,e.printServer.etiquetas.imprimir=!1,e.printServer.etiquetas.impresora="")}))},cambioImprimirEtiquetas:function(e){localStorage.setItem("imprimir-etiquetas-iess",e.target.checked.toString()),e.target.checked&&!this.printServer.etiquetas.impresora&&$("#modalConfigs").modal()},imprimirEtiquetas:function(e,t){var a=this;if(this.printServer.encendido&&this.printServer.etiquetas.imprimir){var r={incluirMuestrasPendientes:this.printServer.etiquetas.incluirMuestrasPendientes?"1":null};r=this.obtenerParametrosUrl(r),_.isEmpty(t)||(r="?detallesOrdenIds[]="+t.join("&detallesOrdenIds[]=")),axios.get("/ordenes/".concat(e,"/pdf-etiquetas").concat(r),{responseType:"blob"}).then((function(e){return a.enviarAOrionPrintServer(e)})).catch((function(e){var t=a.procesarErrorResponse(e);t.unshift("Error al generar PDF etiquetas"),a.mostrarErrores(t)}))}},enviarAOrionPrintServer:function(e){var t=this,a={nombreImpresora:this.printServer.etiquetas.impresora,alto:this.printServer.etiquetas.alto,ancho:this.printServer.etiquetas.ancho},r=this.obtenerNombreArchivo(e),o=new FormData;o.append("archivo",e.data,r),o.append("parametros",JSON.stringify(a)),axios.post("".concat(this.printServer.urlApiLocal,"/api/imprimir/etiquetas?etiqueta"),o).then((function(){var e=["Etiquetas enviadas a imprimir","Impresora: "+t.printServer.etiquetas.impresora];t.mostrarExito(e)})).catch((function(e){var a=t.procesarErrorResponse(e);a.unshift("Error al generar PDF etiquetas"),t.mostrarErrores(a)}))},obtenerNombreArchivo:function(e){var t=e.headers["content-disposition"];return t.substring(t.indexOf('"')+1,t.lastIndexOf('"'))},cambioSistemaExternoId:function(e){localStorage.setItem("sistema-externo-iess-id",e.target.value)},abrirModalConfiguraciones:function(){$("#modalConfigs").modal("show")},pacienteHumanoGuardado:function(e){this.ordenes.filter((function(t){return t.paciente_id===e.id})).forEach((function(t){t.paciente=e})),this.mostrarExito("Paciente guardado")}},computed:{sistemaExterno:function(){var e=this;return this.filtros.sistemaExternoId?this.sistemasExternos.find((function(t){return t.id===e.filtros.sistemaExternoId})):null},nombreUnidadMedica:function(){return this.sistemaExterno&&this.sistemaExterno?"".concat(this.sistemaExterno.nombre," - ").concat(this.sistemaExterno.extras.codigo_unidad_medica):""}}};const A=(0,o.Z)(E,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta",attrs:{timeout:2e4}}),e._v(" "),t("cargando-modal",{ref:"cargando"},[e._v("\n    Por favor espere...\n    "),t("br"),e._v(" "),t("strong",[e._v("IESS AS400")]),e._v(" se encuentra procesando la descarga.\n    "),t("br"),e._v("\n    Esto puede tomar unos segundos.\n  ")]),e._v(" "),t("form",[t("navbar",{attrs:{"mostrar-servidor-local":!0,"mostrar-configuraciones":!0},on:{"click-configuraciones":e.abrirModalConfiguraciones},scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Órdenes IESS AS400\n      ")]},proxy:!0},{key:"opciones",fn:function(){},proxy:!0}])}),e._v(" "),t("ul",{staticClass:"nav nav-tabs"},[t("li",{class:{active:!e.datos.parametros.numeroOrdenIess}},[t("a",{attrs:{"data-toggle":"tab",href:"#ordenes"},on:{click:e.borrarFiltros}},[e._v("Órdenes")])]),e._v(" "),t("li",{class:{active:e.datos.parametros.numeroOrdenIess}},[t("a",{attrs:{"data-toggle":"tab",href:"#citas"},on:{click:e.borrarFiltros}},[e._v("Citas")])])]),e._v(" "),t("div",{staticClass:"tab-content",staticStyle:{"margin-bottom":"15px"}},[t("div",{staticClass:"tab-pane fade",class:{"in active":!e.datos.parametros.numeroOrdenIess},attrs:{id:"ordenes"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"unidad_medica"}},[e._v("Unidad médica")]),e._v(" "),e.$can("cambiar-sistema-externo")?t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sistemaExternoId,expression:"filtros.sistemaExternoId"}],staticClass:"form-control input-sm",attrs:{id:"unidad_medica",name:"unidad_medica",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sistemaExternoId",t.target.multiple?a:a[0])},e.cambioSistemaExternoId]}},[t("option",{domProps:{value:null}},[e._v("Seleccione...")]),e._v(" "),e._l(e.sistemasExternos,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+" - "+e._s(a.extras.codigo_unidad_medica)+"\n              ")])}))],2):e._e(),e._v(" "),e.$can("cambiar-sistema-externo")?e._e():t("div",[e._v("\n              "+e._s(e.nombreUnidadMedica)+"\n            ")])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group no-salto-linea"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"numero_orden_iess"}},[e._v("Orden No.")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroOrdenIess,expression:"filtros.numeroOrdenIess"}],staticClass:"form-control input-sm",attrs:{id:"numero_orden_iess",maxlength:"20",autocomplete:"off",required:""},domProps:{value:e.filtros.numeroOrdenIess},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscar(!1))},input:function(t){t.target.composing||e.$set(e.filtros,"numeroOrdenIess",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_orden_iess"}},[e._v("Usuario AS400")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.$usuario.referenciaAuxiliar?e.$usuario.referenciaAuxiliar:"-")+"\n            ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("button",{ref:"botonBuscar",staticClass:"btn btn-sm btn-primary",attrs:{type:"button",disabled:e.procesando.busqueda},on:{click:function(t){return e.buscar(!1)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.busqueda,expression:"procesando.busqueda"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.busqueda,expression:"!procesando.busqueda"}],staticClass:"fas fa-search fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Buscar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[t("i",{attrs:{"aria-hidden":"true"}}),e._v("Borrar filtros\n            ")])])])]),e._v(" "),t("div",{staticClass:"tab-pane fade",class:{"in active":e.datos.parametros.numeroOrdenIess},attrs:{id:"citas"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"cita_unidad_medica"}},[e._v("Unidad médica")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sistemaExternoId,expression:"filtros.sistemaExternoId"}],staticClass:"form-control input-sm",attrs:{id:"cita_unidad_medica",name:"cita_unidad_medica",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sistemaExternoId",t.target.multiple?a:a[0])},e.cambioSistemaExternoId]}},[t("option",{domProps:{value:null}},[e._v("Seleccione...")]),e._v(" "),e._l(e.sistemasExternos,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+" - "+e._s(a.extras.codigo_unidad_medica)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group no-salto-linea"},[t("label",{staticClass:"control-label",attrs:{for:"cita_numero_orden_iess"}},[e._v("Orden No.")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroOrdenIess,expression:"filtros.numeroOrdenIess"}],staticClass:"form-control input-sm",attrs:{id:"cita_numero_orden_iess",maxlength:"20",autocomplete:"off"},domProps:{value:e.filtros.numeroOrdenIess},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscar(!0))},input:function(t){t.target.composing||e.$set(e.filtros,"numeroOrdenIess",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group no-salto-linea"},[t("label",{staticClass:"control-label",attrs:{for:"identificacion_paciente"}},[e._v("Identificación paciente")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.identificacionPaciente,expression:"filtros.identificacionPaciente"}],staticClass:"form-control input-sm",attrs:{id:"identificacion_paciente",maxlength:"20",autocomplete:"off"},domProps:{value:e.filtros.identificacionPaciente},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscar(!0))},input:function(t){t.target.composing||e.$set(e.filtros,"identificacionPaciente",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("button",{ref:"botonBuscar",staticClass:"btn btn-sm btn-primary",attrs:{type:"button",disabled:e.procesando.busqueda},on:{click:function(t){return e.buscar(!0)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.busqueda,expression:"procesando.busqueda"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.busqueda,expression:"!procesando.busqueda"}],staticClass:"fas fa-search fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Buscar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[t("i",{attrs:{"aria-hidden":"true"}}),e._v("Borrar filtros\n            ")])])])])]),e._v(" "),e._l(e.ordenes,(function(a,r){return[t("orden",{attrs:{id:r,orden:a,muestras:e.muestras,procesando:e.procesando.guardar,"mostrar-datos":1===e.ordenes.length,"sistema-externo-id":e.filtros.sistemaExternoId,"print-server":e.printServer},on:{guardar:e.guardar,"cambio-imprimir-etiquetas":e.cambioImprimirEtiquetas}})]})),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.busqueda,cantidad:e.ordenes.length,tipo:"registros"}})],2),e._v(" "),t("configs-modal",{attrs:{"print-server":e.printServer}}),e._v(" "),t("orden-existe-modal",{attrs:{"print-server":e.printServer,muestras:e.muestras},on:{guardar:e.guardar,"guardar-orden-existente":e.guardarOrdenExistente,"cambio-imprimir-etiquetas":e.cambioImprimirEtiquetas}}),e._v(" "),t("gestionar-paciente-modal",{attrs:{"id-sistema-externo":this.filtros.sistemaExternoId},on:{"paciente-humano-guardado":e.pacienteHumanoGuardado}})],1)}),[],!1,null,null,null).exports},4429:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(2244);a(4197);function o(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,n=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){c=!0,s=e},f:function(){try{n||null==a.return||a.return()}finally{if(c)throw s}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={components:{DatosOrden:a(6570).Z,CalendarView:r.CalendarView,CalendarViewHeader:r.CalendarViewHeader},props:["datos"],data:function(){return{procesando:{busqueda:!1,calendario:!1,guardar:!1},sistemasExternos:[],fechaCita:"",filtros:{sistemaExternoId:null,numeroOrdenIess:""},calendario:{fecha:new Date,eventos:[],key:0},seleccionadosTodos:!1,idDetallesPedidoSeleccionados:[],pedido:null}},created:function(){this.sistemasExternos=this.datos.sistemasExternos;var e=localStorage.getItem("sistema-externo-iess-id");e&&(this.filtros.sistemaExternoId=e),!this.filtros.sistemaExternoId&&this.sistemasExternos.length>0&&(this.filtros.sistemaExternoId=this.sistemasExternos[0].id,localStorage.setItem("sistema-externo-iess-id",this.filtros.sistemaExternoId)),this.$usuario.sistemaHisId&&(this.filtros.sistemaExternoId=parseInt(this.$usuario.sistemaHisId))},mounted:function(){$("#numero_orden_iess").focus()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},borrarFiltros:function(){this.filtros.numeroOrdenIess="",this.fechaCita="",this.pedido=null,this.idDetallesPedidoSeleccionados=[],this.seleccionadosTodos=!1,$("#numero_orden_iess").focus()},buscar:function(){var e=this;this.$refs.alerta.ocultarAlertas(),this.pedido=null;var t=this.filtros;t.numeroOrdenIess?(this.procesando.busqueda=!0,axios.get("/api/iess/pedidos",{params:t}).then((function(t){var a=t.data.data;a.detallesPedidos=a.detallesPedidos.map((function(e){return n(n({},e),{},{habilitado:null!==e.examen_id})})),e.pedido=a,1===a.otros_pedidos&&e.mostrarAdvertencia("Existe ".concat(a.otros_pedidos," cita con el mismo número de orden AS400")),a.otros_pedidos>1&&e.mostrarAdvertencia("Existen ".concat(a.otros_pedidos," citas con el mismo número de orden AS400")),e.idDetallesPedidoSeleccionados=e.pedido.detallesPedidos.filter((function(e){return e.habilitado})).map((function(e){return e.examen_id})),e.$nextTick((function(){return e.$refs.botonGuardar.focus()}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.procesando.busqueda=!1}))):this.mostrarErrores("Filtro <strong>Orden No.</strong> de IESS es requerido")},guardar:function(){var e=this;if(this.fechaCita){this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),this.procesando.guardar=!0;var t=_.cloneDeep(this.pedido);this.pedido=null,t.fecha_cita=this.fechaCita,t.embarazada=!1,t.detallesPedidos=t.detallesPedidos.filter((function(t){return e.idDetallesPedidoSeleccionados.includes(t.examen_id)})),this.idDetallesPedidoSeleccionados=[],this.$refs.alerta.ocultarAlertas(),axios.post("/api/iess/pedidos",t).then((function(a){var r=a.data.data;e.actualizarCalendario(),e.borrarFiltros();var o=e.obtenerNumeroHistoriaClinica(t,e.filtros.sistemaExternoId),i=['Pedido <a href="/pedidos?cadenaBusqueda='.concat(r.id_pedido,'">').concat(r.id_pedido,"</a> agendado en <strong>Orión</strong>"),"Orden AS400 <strong>".concat(t.numero_pedido_externo,"</strong>"),"HC AS400 ".concat(o)];e.mostrarExito(i),$("#numero_orden_iess").focus()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){e.procesando.guardar=!1,e.$refs.cargando.alternar(),e.alternarBotonesSubmit()}))}else this.mostrarErrores("Fecha de cita sin definir")},alternarSeleccion:function(){this.seleccionadosTodos?this.idDetallesPedidoSeleccionados=this.pedido.detallesPedidos.filter((function(e){return e.habilitado})).map((function(e){return e.examen_id})):this.idDetallesPedidoSeleccionados=[]},seleccionarDetallePedido:function(e){if(e.habilitado)if(this.idDetallesPedidoSeleccionados.includes(e.examen_id)){var t=this.idDetallesPedidoSeleccionados.indexOf(e.examen_id);this.idDetallesPedidoSeleccionados.splice(t,1)}else this.idDetallesPedidoSeleccionados.push(e.examen_id)},cambioSistemaExternoId:function(e){localStorage.setItem("sistema-externo-iess-id",e.target.value)},cambioPeriodo:function(e){var t=this;this.calendario.eventos=[];var a={fechaDesde:moment(e.displayFirstDate).format("YYYY-MM-DD"),fechaHasta:moment(e.displayLastDate).format("YYYY-MM-DD")};this.procesando.calendario=!0,axios.get("/api/pedidos-dia",{params:a}).then((function(e){var a,r=1,i=o(e.data.data);try{for(i.s();!(a=i.n()).done;){var s=a.value,n={id:r,startDate:s.fecha_cita,endDate:s.fecha_cita,title:s.cantidad,classes:["pedidos","puntero"]};t.calendario.eventos.push(n),r++}}catch(e){i.e(e)}finally{i.f()}})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar pedidos en calendario",a)})).then((function(){return t.procesando.calendario=!1}))},defineFechaCalendario:function(e){this.calendario.fecha=e},seleccionaFecha:function(e){this.fechaCita=moment(e).format("YYYY-MM-DD")},actualizarCalendario:function(){this.calendario.key++},seleccionaItem:function(e){var t=moment(e.startDate).format("YYYY-MM-DD");window.open("/pedidos?fechaCita=".concat(t,"&estado=G&page=1"),"_blank").focus()}},computed:{fechaCitaFormateada:function(){return this.fechaCita?moment(this.fechaCita).format("YYYY-MMM-DD"):"-"},nombreUnidadMedica:function(){var e=this;if(this.filtros.sistemaExternoId){var t=this.sistemasExternos.find((function(t){return t.id===e.filtros.sistemaExternoId}));return t?t.nombre:""}return""},numeroHistoriaClinica:function(){return this.obtenerNumeroHistoriaClinica(this.pedido,this.filtros.sistemaExternoId)},cantidadExamenesNovedades:function(){return this.pedido.detallesPedidos.filter((function(e){return!e.examen})).length}},watch:{idDetallesPedidoSeleccionados:function(e){this.seleccionadosTodos=e.length>0&&e.length===this.pedido.detallesPedidos.filter((function(e){return e.habilitado})).length}}};const d=(0,a(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta",attrs:{timeout:2e4}}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Citas IESS AS400\n      ")]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel-group",attrs:{id:"accordion"}},[t("div",{staticClass:"panel panel-oscuro",attrs:{id:"panelFiltros"}},[e._m(0),e._v(" "),t("div",{staticClass:"panel-collapse collapse in",attrs:{id:"colapsableFiltros"}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"col-sm-8 form-group"},[t("calendar-view",{key:e.calendario.key,staticClass:"calendario",attrs:{"show-date":e.calendario.fecha,items:e.calendario.eventos,"starting-day-of-week":1,locale:"es-EC","month-name-format":"long","weekday-name-format":"narrow","current-period-label":"Hoy","time-format-options":{hour:"numeric",minute:"numeric",hour12:!1},"period-changed-callback":e.cambioPeriodo},on:{"click-date":e.seleccionaFecha,"click-item":e.seleccionaItem},scopedSlots:e._u([{key:"header",fn:function(a){return t("calendar-view-header",{attrs:{"header-props":a.headerProps},on:{input:e.defineFechaCalendario}})}}])})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"unidad_medica"}},[e._v("Unidad médica")]),e._v(" "),e.$can("cambiar-sistema-externo")?t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sistemaExternoId,expression:"filtros.sistemaExternoId"}],staticClass:"form-control input-sm",attrs:{id:"unidad_medica",name:"unidad_medica",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sistemaExternoId",t.target.multiple?a:a[0])},e.cambioSistemaExternoId]}},[t("option",{domProps:{value:null}},[e._v("Seleccione...")]),e._v(" "),e._l(e.sistemasExternos,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                    "+e._s(a.nombre)+" - "+e._s(a.extras.codigo_unidad_medica)+"\n                  ")])}))],2):e._e(),e._v(" "),e.$can("cambiar-sistema-externo")?e._e():t("div",[e._v("\n                  "+e._s(e.nombreUnidadMedica)+"\n                ")])]),e._v(" "),t("div",{staticClass:"col-sm-12 form-group no-salto-linea"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"numero_orden_iess"}},[e._v("Orden No.")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroOrdenIess,expression:"filtros.numeroOrdenIess"}],staticClass:"form-control input-sm",attrs:{id:"numero_orden_iess",maxlength:"20",autocomplete:"off",required:""},domProps:{value:e.filtros.numeroOrdenIess},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscar.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"numeroOrdenIess",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_orden_iess"}},[e._v("Usuario AS400")]),e._v(" "),t("div",[e._v("\n                  "+e._s(e.$usuario.referenciaAuxiliar?e.$usuario.referenciaAuxiliar:"-")+"\n                ")])]),e._v(" "),t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label no-salto-linea"},[e._v("Fecha cita")]),e._v(" "),t("div",[e._v(e._s(e.fechaCitaFormateada))])])])]),e._v(" "),t("div",{staticClass:"panel-footer"},[t("button",{ref:"botonBuscar",staticClass:"btn btn-sm btn-primary",attrs:{type:"button",disabled:e.procesando.busqueda},on:{click:e.buscar}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.busqueda,expression:"procesando.busqueda"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.busqueda,expression:"!procesando.busqueda"}],staticClass:"fas fa-search fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Buscar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[t("i",{attrs:{"aria-hidden":"true"}}),e._v("Borrar filtros\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{title:"Actualizar calendario",type:"button"},on:{click:e.actualizarCalendario}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.calendario,expression:"!procesando.calendario"}],staticClass:"fas fa-sync"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.calendario,expression:"procesando.calendario"}],staticClass:"fas fa-spinner fa-spin"})])])])]),e._v(" "),e.pedido?t("div",{staticClass:"panel panel-gris",attrs:{id:"panelOrden"}},[t("div",{staticClass:"panel-heading puntero",class:{emergencia:e.pedido.tipo_atencion&&e.pedido.tipo_atencion.urgente||e.pedido.servicio&&e.pedido.servicio.urgente},staticStyle:{position:"sticky !important",top:"10px","z-index":"10"},attrs:{"data-toggle":"collapse","data-target":"#colapsableOrden"}},[t("div",{staticClass:"panel-title"},[t("a",[t("datos-orden",{attrs:{"mostrar-numero-orden-externa":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-edad":!0,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,orden:e.pedido}}),e._v(" "),t("span",{attrs:{title:"Exámenes","data-toggle":"tooltip"}},[t("strong",[e._v("E:")]),e._v(" "+e._s(e.idDetallesPedidoSeleccionados.length)+"/"+e._s(e.pedido.detallesPedidos.length)+"\n              ")]),e._v(" "),e.cantidadExamenesNovedades>0?t("span",{staticClass:"text-warning",attrs:{title:"Exámenes con novedades","data-toggle":"tooltip"}},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.cantidadExamenesNovedades)+"\n              ")]):e._e()],1)])]),e._v(" "),t("div",{staticClass:"panel-collapse collapse in",attrs:{id:"colapsableOrden"}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label no-salto-linea"},[e._v("Orden No.")]),e._v(" "),t("div",[e._v(e._s(e.pedido.numero_pedido_externo))])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label"},[e._v("HC")]),e._v(" "),t("div",[e._v(e._s(e.numeroHistoriaClinica))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"categoria"}},[e._v("Categoría")]),e._v(" "),t("div",{attrs:{id:"categoria"}},[e._v(e._s(e.pedido.categoria.nombre))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"servicio"}},[e._v("\n                  Servicio\n                  "),t("a",{directives:[{name:"show",rawName:"v-show",value:!e.pedido.servicio,expression:"!pedido.servicio"}],staticClass:"puntero",attrs:{href:"/servicios"}},[t("i",{staticClass:"fas fa-database text-gris",attrs:{rel:"tooltip",title:"Catálogo Servicios"}})])]),e._v(" "),t("div",{class:{"no-salto-linea":!e.pedido.servicio},attrs:{id:"servicio"}},[e.pedido.servicio?[e._v("\n                    "+e._s(e.pedido.servicio.nombre)+"\n                    "),e.pedido.servicio.urgente?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",attrs:{rel:"tooltip",title:"urgente"}}):e._e()]:e.pedido.sala_id_externo?[t("div",{staticClass:"text-danger"},[e._v("\n                      Sin homologar "),t("strong",[e._v(e._s(e.pedido.sala_id_externo))])])]:e._e()],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipoAtencion"}},[e._v("\n                  Tipo atención\n                  "),t("a",{directives:[{name:"show",rawName:"v-show",value:!e.pedido.tipoAtencion,expression:"!pedido.tipoAtencion"}],staticClass:"puntero",attrs:{href:"/tipos-atenciones"}},[t("i",{staticClass:"fas fa-database text-gris",attrs:{rel:"tooltip",title:"Catálogo Tipos Atenciones"}})])]),e._v(" "),t("div",{class:{"no-salto-linea":!e.pedido.tipoAtencion},attrs:{id:"tipoAtencion"}},[e.pedido.tipoAtencion?[e._v("\n                    "+e._s(e.pedido.tipoAtencion.nombre)+"\n                  ")]:e.pedido.tipo_atencion_id_externo?[t("div",{staticClass:"text-danger"},[e._v("\n                      Sin homologar "),t("strong",[e._v(e._s(e.pedido.tipo_atencion_id_externo))])])]:e._e()],2)]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico"}},[e._v("Médico")]),e._v(" "),t("div",{attrs:{id:"medico"}},[e._v(e._s(e.pedido.medico.nombres)+" "+e._s(e.pedido.medico.apellidos))])])]),e._v(" "),t("h3",[e._v("\n              Exámenes\n              "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.pedido.detallesPedidos.length>0,expression:"pedido.detallesPedidos.length > 0"}],staticClass:"badge cursor-menu",attrs:{title:"Seleccionados",rel:"tooltip"}},[e._v("\n                "+e._s(e.idDetallesPedidoSeleccionados.length)+" / "+e._s(e.pedido.detallesPedidos.length)+"\n              ")])]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.seleccionadosTodos,expression:"seleccionadosTodos"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.seleccionadosTodos)?e._i(e.seleccionadosTodos,null)>-1:e.seleccionadosTodos},on:{change:[function(t){var a=e.seleccionadosTodos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.seleccionadosTodos=a.concat([null])):i>-1&&(e.seleccionadosTodos=a.slice(0,i).concat(a.slice(i+1)))}else e.seleccionadosTodos=o},e.alternarSeleccion]}})]),e._v(" "),t("th",{staticClass:"col-sm-1 text-left"},[e._v("\n                  Código AS400\n                ")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("\n                  Examen\n                ")])])]),e._v(" "),t("tbody",[e._l(e.pedido.detallesPedidos,(function(a){return[a.examen?t("tr",[t("td",{staticClass:"text-center",on:{click:function(t){return e.seleccionarDetallePedido(a)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.idDetallesPedidoSeleccionados,expression:"idDetallesPedidoSeleccionados"}],attrs:{type:"checkbox",disabled:!a.habilitado},domProps:{value:a.examen_id,checked:Array.isArray(e.idDetallesPedidoSeleccionados)?e._i(e.idDetallesPedidoSeleccionados,a.examen_id)>-1:e.idDetallesPedidoSeleccionados},on:{change:function(t){var r=e.idDetallesPedidoSeleccionados,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.examen_id,n=e._i(r,s);o.checked?n<0&&(e.idDetallesPedidoSeleccionados=r.concat([s])):n>-1&&(e.idDetallesPedidoSeleccionados=r.slice(0,n).concat(r.slice(n+1)))}else e.idDetallesPedidoSeleccionados=i}}})]),e._v(" "),t("td",{staticClass:"text-left",on:{click:function(t){return e.seleccionarDetallePedido(a)}}},[e._v("\n                    "+e._s(a.id_externo?a.id_externo:"-")+"\n                  ")]),e._v(" "),t("td",{staticClass:"text-left",on:{click:function(t){return e.seleccionarDetallePedido(a)}}},[e._v("\n                    "+e._s(a.examen.codigo)+" - "+e._s(a.examen.nombre)+"\n                  ")])]):t("tr",[t("td"),e._v(" "),t("td",{attrs:{colspan:"4"}},[t("div",{staticClass:"text-danger"},[e._v("\n                      Sin homologar "),t("strong",[e._v(e._s(a.id_externo))])])])])]}))],2)])]),e._v(" "),t("div",{staticClass:"panel-footer"},[t("button",{ref:"botonGuardar",staticClass:"btn btn-primary",attrs:{type:"submit",disabled:0===e.idDetallesPedidoSeleccionados.length||e.procesando.guardar}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.guardar,expression:"procesando.guardar"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.guardar,expression:"!procesando.guardar"}],staticClass:"fas fa-save fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Agendar\n            ")])])])]):e._e()])],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading puntero",attrs:{"data-toggle":"collapse","data-target":"#colapsableFiltros"}},[e("div",{staticClass:"panel-title"},[e("a",[this._v("\n              Filtros IESS AS400\n            ")])])])}],!1,null,null,null).exports},5838:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s={data:function(){return{procesando:!1,opciones:{separadorLista:";"},filtros:{tipo_informe:"",tipo_paciente:"HUMANO"},separadoresListas:[{id:";",nombre:"Punto y coma (;)"},{id:",",nombre:"Coma (,)"}],catalogos:[{id:"CLIENTES",nombre:"Clientes"},{id:"PACIENTES",nombre:"Pacientes"}],tiposPacientes:[{id:"ANIMAL",nombre:"Animal"},{id:"HUMANO",nombre:"Humano"},{id:"OBJETO",nombre:"Objeto"}]}},mounted:function(){this.cargarOpciones()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarOpciones:function(){this.opciones.separadorLista=localStorage.getItem("separador-lista")?localStorage.getItem("separador-lista"):this.opciones.separadorLista},generarCsv:function(){var e=this;this.procesando=!0;var t=o(o({},this.filtros),this.opciones);t=this.obtenerParametrosUrl(t),axios.get("/informes/catalogos/csv".concat(t),{responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=new Blob([e.data],{type:"application/csv"}),r=document.getElementById("link-descargas");r.href=window.URL.createObjectURL(a),r.download=t.split("filename=")[1],r.click()})).catch((function(t){var a=t.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=e.procesarErrorResponse(o);e.mostrarErrores("Error al generar archivo",i)})).then((function(){return e.procesando=!1}))},cambioSeparadorLista:function(e){e.target.value&&localStorage.setItem("separador-lista",e.target.value)},tipoSeleccionado:function(){this.filtros.tipo_paciente="HUMANO"}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generarCsv.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Catálogos\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{id:"generarInformeAuditorias",type:"submit",disabled:e.procesando}},[e.procesando?[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" Procesando...\n              ")]:[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Generar informe\n              ")]],2)])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-3 col-sm-3 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"tipo"}},[e._v("Tipo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_informe,expression:"filtros.tipo_informe"}],staticClass:"form-control input-sm",attrs:{id:"tipo",name:"tipo",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_informe",t.target.multiple?a:a[0])},e.tipoSeleccionado]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.catalogos,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),"PACIENTES"===e.filtros.tipo_informe?t("div",{staticClass:"col-xs-3 col-sm-3 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"tipo_paciente"}},[e._v("Tipo de paciente")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_paciente,expression:"filtros.tipo_paciente"}],staticClass:"form-control input-sm",attrs:{id:"tipo_paciente",name:"tipo_paciente",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_paciente",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.tiposPacientes,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)]):e._e()])])])]),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(1),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-3 col-sm-3 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"separadorLista"}},[e._v("Separador de lista")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.opciones.separadorLista,expression:"opciones.separadorLista"}],staticClass:"form-control input-sm",attrs:{id:"separadorLista",name:"separadorLista",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.opciones,"separadorLista",t.target.multiple?a:a[0])},e.cambioSeparadorLista]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.separadoresListas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)])])])]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Opciones")])])}],!1,null,null,null).exports},2063:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const s={data:function(){return{agrupaciones:["Cliente","Servicio","Tipo de atención"],generandoExcel:!1,filtros:{agrupado_por:"CLIENTE",fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),sucursal_id:"",empresa_id:"",subempresa_id:"",estado:""},sucursales:[],empresas:[],empresa:"",subempresas:[]}},mounted:function(){this.cargarCatalogos()},methods:{cambiarEmpresa:function(){this.filtros.subempresa_id="",this.filtros.empresa_id="",this.subempresas="",this.empresa&&(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas)},cargarCatalogos:function(){var e=this;axios.all([axios.get("/api/catalogos",{params:{catalogo:r.oH.SUCURSALES}}),axios.get("/api/catalogos",{params:{catalogo:r.oH.CLIENTES}})]).then((function(t){var a=o(t,2),r=a[0],i=a[1];e.sucursales=r.data.data,e.empresas=i.data.data,e.$can("cambiar-sucursal")||(e.filtros.sucursal_id=e.datos.sucursalActivaId,e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("¡Error al cargar catálogos!",a)}))},esRangoValido:function(e,t){var a=t.diff(e,"months",!0);return a>1?(this.mostrarError('El rango entre la "Fecha desde" y "Fecha hasta" supera los '.concat(1," meses")),!1):!(a<0)||(this.mostrarError(' La "Fecha desde" no debe ser mayor que la "Fecha hasta"'),!1)},generarExcel:function(){var e=this,t=moment(this.filtros.fecha_desde,"YYYY-MM-DD",!0),a=moment(this.filtros.fecha_hasta,"YYYY-MM-DD",!0);this.generandoExcel=!0,t.isValid()?a.isValid()?this.esRangoValido(t,a)&&axios.get("/informes/estadistico-procedencia/excel",{params:this.filtros,responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=decodeURIComponent(e.headers["content-type"]),r=t.split("filename=")[1],o=new Blob([e.data],{type:a}),i=document.getElementById("link-descargas");i.href=window.URL.createObjectURL(o),i.download=r,i.click()})).catch((function(t){var a=t.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=e.procesarErrorResponse(o);e.mostrarErrores("¡Error al generar archivo!",i)})).finally((function(){return e.generandoExcel=!1})):this.mostrarError('La "Fecha hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'):this.mostrarError('La "Fecha desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".')},limpiarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.subempresa_id="",this.$can("cambiar-sucursal")&&(this.filtros.sucursal_id="",this.empresa="",this.filtros.empresa_id="")},mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generarExcel.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Estadístico por procedencia\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.generandoExcel}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.generandoExcel,expression:"generandoExcel"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoExcel,expression:"!generandoExcel"}],staticClass:"fas fa-file-excel fa-fw"}),e._v("\n                 Generar Excel\n              ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}})])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"agrupado_por"}},[e._v("Agrupado por")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.agrupado_por,expression:"filtros.agrupado_por"}],staticClass:"form-control input-sm",attrs:{id:"agrupado_por"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"agrupado_por",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"CLIENTE"}},[e._v("Cliente")]),e._v(" "),t("option",{attrs:{value:"SERVICIO"}},[e._v("Servicio")]),e._v(" "),t("option",{attrs:{value:"TIPO_ATENCION"}},[e._v("Tipo atención")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",placeholder:"Todos",label:"nombre",disabled:!e.$can("cambiar-empresas"),options:e.empresas},on:{input:e.cambiarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresa_id,expression:"filtros.subempresa_id"}],staticClass:"form-control input-sm",attrs:{name:"subempresa_id",id:"subempresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresa_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.$can("cambiar-sucursal")},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"estado"}},[e._v("Estado")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control input-sm",attrs:{id:"estado",name:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),t("option",{attrs:{value:"PROCESADOS"}},[e._v("Procesados")]),e._v(" "),t("option",{attrs:{value:"NO_PROCESADOS"}},[e._v("No procesados")])])])])]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})])],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])}],!1,null,null,null).exports},1653:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const s={data:function(){return{generandoExcel:!1,filtros:{fecha_hasta:moment().format("YYYY-MM-DD"),empresa_id:"",subempresa_id:"",sucursal_id:""},sucursales:[],empresas:[],empresa:"",subempresas:[]}},mounted:function(){this.cargarCatalogos()},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cambiarEmpresa:function(){this.filtros.subempresa_id="",this.filtros.empresa_id="",this.subempresas=[],this.empresa&&(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas)},cargarCatalogos:function(){var e=this;axios.all([axios.get("/api/catalogos",{params:{catalogo:r.oH.SUCURSALES}}),axios.get("/api/catalogos",{params:{catalogo:r.oH.CLIENTES}})]).then((function(t){var a=o(t,2),r=a[0],i=a[1];e.sucursales=r.data.data,e.empresas=i.data.data,e.$can("cambiar-sucursal")||(e.filtros.sucursal_id=e.datos.sucursalActivaId,e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("Error al cargar catálogos",a)}))},generarExcel:function(){var e=this,t=moment(this.filtros.fecha_hasta,"YYYY-MM-DD",!0);this.generandoExcel=!0,t.isValid()?axios.get("/informes/estado-cuenta/excel",{params:this.filtros,responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=decodeURIComponent(e.headers["content-type"]),r=t.split("filename=")[1],o=new Blob([e.data],{type:a}),i=document.getElementById("link-descargas");i.href=window.URL.createObjectURL(o),i.download=r,i.click()})).catch((function(t){var a=t.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=e.procesarErrorResponse(o);e.mostrarError("Error al generar archivo",i)})).finally((function(){return e.generandoExcel=!1})):this.mostrarError('La "Fecha corte" está vacía o no tiene el formato requerido "aaaa-mm-dd".')},limpiarFiltros:function(){this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.subempresa_id="",this.$can("cambiar-sucursal")&&(this.filtros.sucursal_id="",this.empresa="",this.filtros.empresa_id="")}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generarExcel.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Estado de cuenta\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("boton",{staticClass:"btn btn-primary",attrs:{type:"submit",procesando:e.generandoExcel}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoExcel,expression:"!generandoExcel"}],staticClass:"fas fa-file-excel fa-fw"}),e._v("\n               Generar Excel\n            ")])],1),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaHasta"}},[e._v("Fecha corte")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",placeholder:"Todos",label:"nombre",disabled:!e.$can("cambiar-empresas"),options:e.empresas},on:{input:e.cambiarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresa_id,expression:"filtros.subempresa_id"}],staticClass:"form-control input-sm",attrs:{name:"subempresa_id",id:"subempresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresa_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.$can("cambiar-sucursal")},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)])])]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})])],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])}],!1,null,null,null).exports},299:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const s={data:function(){return{generandoExcel:!1,filtros:{fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),ruta_id:"",sector_id:"",jornada_id:"",mensajero_id:"",estado:""},sectores:[],jornadas:[],mensajeros:[],estados:r.rP}},mounted:function(){this.cargarCatalogos()},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarCatalogos:function(){var e=this;axios.all([axios.get("/api/catalogos",{params:{catalogo:r.oH.SECTORES}}),axios.get("/api/catalogos",{params:{catalogo:r.oH.JORNADAS}}),axios.get("/api/catalogos",{params:{catalogo:r.oH.MENSAJEROS}})]).then((function(t){var a=o(t,3),r=a[0],i=a[1],s=a[2];e.sectores=r.data.data,e.jornadas=i.data.data,e.mensajeros=s.data.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("Error al cargar catálogos",a)}))},esRangoValido:function(e,t){var a=t.diff(e,"months",!0);return a>3?(this.mostrarError('El rango entre la "Fecha desde" y "Fecha hasta" supera los '.concat(3," meses")),!1):!(a<0)||(this.mostrarError(' La "Fecha desde" no debe ser mayor que la "Fecha hasta"'),!1)},generarExcel:function(){var e=this,t=moment(this.filtros.fecha_desde,"YYYY-MM-DD",!0),a=moment(this.filtros.fecha_hasta,"YYYY-MM-DD",!0);this.generandoExcel=!0,t.isValid()?a.isValid()?this.esRangoValido(t,a)&&axios.get("/informes/estado-tarea-ruta/excel",{params:this.filtros,responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=decodeURIComponent(e.headers["content-type"]),r=t.split("filename=")[1],o=new Blob([e.data],{type:a}),i=document.getElementById("link-descargas");i.href=window.URL.createObjectURL(o),i.download=r,i.click()})).catch((function(t){var a=t.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=e.procesarErrorResponse(o);e.mostrarErrores("Error al generar archivo",i)})).finally((function(){return e.generandoExcel=!1})):this.mostrarError('La "Fecha hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'):this.mostrarError('La "Fecha desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".')},limpiarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.ruta_id="",this.filtros.sector_id="",this.filtros.jornada_id="",this.filtros.mensajero_id="",this.filtros.estado=""}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generarExcel.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Estado de tareas en ruta\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("boton",{staticClass:"btn btn-primary",attrs:{type:"submit",procesando:e.generandoExcel}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoExcel,expression:"!generandoExcel"}],staticClass:"fas fa-file-excel fa-fw"}),e._v("\n               Generar Excel\n            ")])],1),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}})])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("No. de ruta")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.ruta_id,expression:"filtros.ruta_id"}],staticClass:"form-control input-sm",attrs:{id:"ruta_id",name:"ruta_id",type:"text",placeholder:"Buscar por número de ruta",autocomplete:"off"},domProps:{value:e.filtros.ruta_id},on:{input:function(t){t.target.composing||e.$set(e.filtros,"ruta_id",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sector_id"}},[e._v("Sector")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sector_id,expression:"filtros.sector_id"}],staticClass:"form-control input-sm",attrs:{name:"sector_id",id:"sector_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sector_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sectores,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"jornada_id"}},[e._v("Jornada")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.jornada_id,expression:"filtros.jornada_id"}],staticClass:"form-control input-sm",attrs:{name:"jornada_id",id:"jornada_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"jornada_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.jornadas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"mensajero_id"}},[e._v("Mensajero")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"mensajero_id",name:"mensajero_id",placeholder:"Todos",options:e.mensajeros,reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(t){var a=t.usuario;return[e._v("\n                "+e._s(a.nombre_completo)+"\n              ")]}},{key:"option",fn:function(t){var a=t.usuario;return[e._v("\n                "+e._s(a.nombre_completo)+"\n              ")]}}]),model:{value:e.filtros.mensajero_id,callback:function(t){e.$set(e.filtros,"mensajero_id",t)},expression:"filtros.mensajero_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"estado"}},[e._v("Estado")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control input-sm",attrs:{name:"estado",id:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.estados,(function(a){return t("option",{domProps:{value:a}},[e._v("\n                "+e._s(e._f("estadoRuta")(a))+"\n              ")])}))],2)])])]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})])],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])}],!1,null,null,null).exports},5470:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(9794),o=a(9107),i=a(9676),s=a(4590);const n={components:{BuscarUsuarioModal:r.Z,BuscarPacienteModal:i.Z,BuscarExamenModal:o.Z},props:["datos"],data:function(){return{generandoArchivo:!1,filtros:{fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),usuario_id:"",sucursal_id:"",empresa_id:"",subempresa_id:"",medico_id:"",tipo_atencion_id:"",plan_salud_id:"",sala_id:"",paciente_id:"",paciente_type:"",examen_id:""},auxiliar:{usuario_nombre:"",paciente_nombre:"",examen_codigo:""},usuarios:[],sucursales:[],empresas:[],empresa:"",subempresas:[],tiposAtenciones:[],planesSalud:[],salas:[]}},mounted:function(){this.cargarCatalogos()},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarCatalogos:function(){var e=this;axios.get("/api/catalogos",{params:{catalogo:s.oH.SUCURSALES}}).then((function(t){var a=t.data.data;e.sucursales=a,e.$can("cambiar-sucursal")||(e.filtros.sucursal_id=e.datos.sucursalActivaId)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("¡Error al cargar Sucursales!",a)})),axios.get("/api/catalogos",{params:{catalogo:s.oH.CLIENTES}}).then((function(t){var a=t.data.data;e.empresas=a,e.$can("cambiar-empresas")||(e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("¡Error al cargar Clientes!",a)})),axios.get("/api/catalogos",{params:{catalogo:s.oH.SERVICIO}}).then((function(t){var a=t.data.data;e.salas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("¡Error al cargar Servicios!",a)})),axios.get("/api/catalogos",{params:{catalogo:s.oH.TIPO_ATENCION}}).then((function(t){var a=t.data.data;e.tiposAtenciones=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("¡Error al cargar Tipos Atención!",a)}))},limpiarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.usuario_id="",this.auxiliar.usuario_nombre="",this.filtros.subempresa_id="",this.filtros.medico_id="",this.filtros.sala_id="",this.filtros.tipo_atencion_id="",this.filtros.examen_id="",this.auxiliar.examen_codigo="",this.auxiliar.paciente_nombre="",this.$can("cambiar-sucursal")&&(this.filtros.sucursal_id=""),this.$can("cambiar-empresas")&&(this.empresa="",this.filtros.empresa_id="")},abrirBuscarUsuario:function(){$("#buscarUsuario").modal()},usuarioSeleccionado:function(e){this.filtros.usuario_id=e.id,this.auxiliar.usuario_nombre=e.nombre_usuario,$("#buscarUsuario").modal("hide")},limpiarUsuario:function(){this.filtros.usuario_id="",this.auxiliar.usuario_nombre=""},generarPdf:function(){var e=moment(this.filtros.fecha_desde,"YYYY-MM-DD",!0),t=moment(this.filtros.fecha_hasta,"YYYY-MM-DD",!0);if(e.isValid())if(t.isValid()){if(this.esRangoValido(e,t)){var a=this.obtenerParametrosUrl(this.filtros);window.open("/informes/pedidos/pdf".concat(a),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")}}else this.mostrarError('La "Fecha hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".');else this.mostrarError('La "Fecha desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".')},esRangoValido:function(e,t){var a=t.diff(e,"months",!0);return a>3?(this.mostrarError('El rango entre la "Fecha desde" y "Fecha hasta" supera los '.concat(3," meses")),!1):!(a<0)||(this.mostrarError(' La "Fecha desde" no debe ser mayor que la "Fecha hasta"'),!1)},borrarFiltroExamen:function(){this.filtros.examen_id="",this.auxiliar.examen_codigo=""},borrarFiltroPaciente:function(){this.filtros.paciente_id="",this.filtros.paciente_type="",this.auxiliar.paciente_nombre=""},cambiarEmpresa:function(){this.filtros.subempresa_id="",this.empresa?(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas):(this.filtros.empresa_id="",this.subempresas="")},pacienteSeleccionado:function(e){this.filtros.paciente_id=e.id,this.filtros.paciente_type=e.tipo,this.auxiliar.paciente_nombre=e.nombre_paciente},examenSeleccionado:function(e){this.filtros.examen_id=e.id,this.auxiliar.examen_codigo=e.codigo}}};const c=(0,a(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generarPdf.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Informe de pedidos\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.generandoArchivo}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.generandoArchivo,expression:"generandoArchivo"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoArchivo,expression:"!generandoArchivo"}],staticClass:"fas fa-print fa-fw"}),e._v("\n                 Generar informe\n              ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}})])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",placeholder:"Todos",label:"nombre",disabled:!e.$can("cambiar-empresas"),options:e.empresas},on:{input:e.cambiarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresa_id,expression:"filtros.subempresa_id"}],staticClass:"form-control input-sm",attrs:{name:"subempresa_id",id:"subempresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresa_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.$can("cambiar-sucursal")},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sala_id"}},[e._v("Servicio")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"servicio_id",placeholder:"Todos",options:e.salas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.sala_id,callback:function(t){e.$set(e.filtros,"sala_id",t)},expression:"filtros.sala_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_atencion_id,expression:"filtros.tipo_atencion_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",name:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_atencion_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposAtenciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario"}},[e._v("Usuario")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.auxiliar.usuario_nombre,expression:"auxiliar.usuario_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"usuario",maxlength:"15",disabled:""},domProps:{value:e.auxiliar.usuario_nombre},on:{input:function(t){t.target.composing||e.$set(e.auxiliar,"usuario_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarUsuario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBuscarUsuario}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.auxiliar.examen_codigo,expression:"auxiliar.examen_codigo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",maxlength:"15",disabled:""},domProps:{value:e.auxiliar.examen_codigo},on:{input:function(t){t.target.composing||e.$set(e.auxiliar,"examen_codigo",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),e._m(1)])])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"paciente"}},[e._v("Paciente")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.auxiliar.paciente_nombre,expression:"auxiliar.paciente_nombre"}],staticClass:"form-control input-sm",attrs:{id:"paciente",type:"text",disabled:""},domProps:{value:e.auxiliar.paciente_nombre},on:{input:function(t){t.target.composing||e.$set(e.auxiliar,"paciente_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroPaciente}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),e._m(2)])])])])])]),e._v(" "),t("buscar-paciente-modal",{on:{"paciente-seleccionado":e.pacienteSeleccionado}}),e._v(" "),t("buscar-usuario-modal",{on:{"usuario-seleccionado":e.usuarioSeleccionado}}),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.examenSeleccionado}})],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarPaciente",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null).exports},5956:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(9107),o=a(4590),i=a(755),s=a(381),n=a.n(s);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const d={components:{BuscarExamenModal:r.Z,HoraModal:i.Z},data:function(){return{codigoExamen:"",empresa:"",empresas:[],generandoExcel:!1,filtros:{fecha_orden_desde:n()().format("YYYY-MM-DD"),fecha_orden_hasta:n()().format("YYYY-MM-DD"),fecha_remision_desde:"",fecha_remision_hasta:"",laboratorio_id:"",sucursal_id:"",empresa_id:"",subempresa_id:"",seccion_id:"",examen_id:""},laboratorios:[],secciones:[],sucursales:[],subempresas:[]}},mounted:function(){this.cargarCatalogos()},methods:{abrirBusquedaExamen:function(){$("#buscarExamen").modal()},borrarFiltroExamen:function(){this.filtros.examen_id="",this.codigoExamen=""},cambiarEmpresa:function(){this.filtros.subempresa_id="",this.filtros.empresa_id="",this.subempresas=[],this.empresa&&(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas)},cambiarExamen:function(e){this.codigoExamen=e.codigo,this.filtros.examen_id=e.id,this.filtros.seccion_id=""},cambiarSeccion:function(){this.codigoExamen="",this.filtros.examen_id=""},cargarCatalogos:function(){var e=this;axios.all([axios.get("/api/catalogos",{params:{catalogo:o.oH.LABORATORIOS}}),axios.get("/api/catalogos",{params:{catalogo:o.oH.SUCURSALES}}),axios.get("/api/catalogos",{params:{catalogo:o.oH.CLIENTES}}),axios.get("/api/catalogos",{params:{catalogo:o.oH.SECCIONES}})]).then((function(t){var a=c(t,4),r=a[0],o=a[1],i=a[2],s=a[3];e.laboratorios=r.data.data,e.sucursales=o.data.data,e.empresas=i.data.data,e.secciones=s.data.data,e.$can("cambiar-sucursal")||(e.filtros.sucursal_id=e.datos.sucursalActivaId,e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar catálogos!",a)}))},generarExcel:function(){var e=this,t=this.validarFechas();(t=this.validarRangoFechas(t))&&(this.generandoExcel=!0,axios.get("/informes/remisiones/excel",{params:this.filtros,responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=decodeURIComponent(e.headers["content-type"]),r=t.split("filename=")[1],o=new Blob([e.data],{type:a}),i=document.getElementById("link-descargas");i.href=window.URL.createObjectURL(o),i.download=r,i.click()})).catch((function(t){var a=t.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=e.procesarErrorResponse(o);e.mostrarErrores("¡Error al generar archivo!",i)})).finally((function(){return e.generandoExcel=!1})))},limpiarFiltros:function(){this.codigoExamen="",this.filtros.fecha_orden_desde=n()().format("YYYY-MM-DD"),this.filtros.fecha_orden_hasta=n()().format("YYYY-MM-DD"),this.filtros.fecha_remision_desde="",this.filtros.fecha_remision_hasta="",this.filtros.laboratorio_id="",this.filtros.subempresa_id="",this.filtros.seccion_id="",this.filtros.examen_id="",this.$can("cambiar-sucursal")&&(this.filtros.sucursal_id="",this.empresa="",this.filtros.empresa_id="")},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},validarFechas:function(){var e,t=new RegExp("([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))");return this.filtros.fecha_orden_desde||this.filtros.fecha_orden_hasta||this.filtros.fecha_remision_desde&&this.filtros.fecha_remision_hasta?this.filtros.fecha_remision_desde||this.filtros.fecha_remision_hasta||this.filtros.fecha_orden_desde&&this.filtros.fecha_orden_hasta?(e=!this.filtros.fecha_orden_desde||t.test(this.filtros.fecha_orden_desde))?(e=!this.filtros.fecha_orden_hasta||t.test(this.filtros.fecha_orden_hasta))?(e=!this.filtros.fecha_remision_desde||t.test(this.filtros.fecha_remision_desde))?(e=!this.filtros.fecha_remision_hasta||t.test(this.filtros.fecha_remision_hasta))||(this.mostrarErrores('La "Fecha remisión hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores('La "Fecha remisión desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores('La "Fecha orden hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores('La "Fecha orden desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores('Las "Fecha remisión desde" y "Fecha remisión hasta" están vacías'),!1):(this.mostrarErrores('Las "Fecha orden desde" y "Fecha orden hasta" están vacías'),!1)},validarRangoFechas:function(e){var t=n()(this.filtros.fecha_orden_hasta,"YYYY-MM-DD"),a=n()(this.filtros.fecha_orden_desde,"YYYY-MM-DD"),r=n()(this.filtros.fecha_remision_hasta,"YYYY-MM-DD"),o=n()(this.filtros.fecha_remision_desde,"YYYY-MM-DD"),i=t.diff(a,"days",!0),s=r.diff(o,"days",!0);return i<0&&(this.mostrarErrores('La "Fecha orden desde" no debe ser mayor que la "Fecha orden hasta".'),e=!1),s<0&&(this.mostrarErrores('La "Fecha remisión desde" no debe ser mayor que la "Fecha remisión hasta".'),e=!1),e}}};const u=(0,a(1900).Z)(d,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generarExcel.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Remisiones\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.generandoExcel}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.generandoExcel,expression:"generandoExcel"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoExcel,expression:"!generandoExcel"}],staticClass:"fas fa-file-excel fa-fw"}),e._v("\n                 Generar Excel\n              ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_orden_desde"}},[e._v("Fecha orden")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_orden_desde,expression:"filtros.fecha_orden_desde"}],staticClass:"form-control input-sm",attrs:{id:"fecha_orden_desde","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",autocomplete:"off"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_orden_hasta,expression:"filtros.fecha_orden_hasta"}],staticClass:"form-control input-sm",attrs:{id:"fecha_orden_hasta","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",autocomplete:"off"}})])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_remision_desde"}},[e._v("Fecha remisión")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_remision_desde,expression:"filtros.fecha_remision_desde"}],staticClass:"form-control input-sm",attrs:{id:"fecha_remision_desde","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",autocomplete:"off"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_remision_hasta,expression:"filtros.fecha_remision_hasta"}],staticClass:"form-control input-sm",attrs:{id:"fecha_remision_hasta","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",autocomplete:"off"}})])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"agrupado_por"}},[e._v("Laboratorio")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"laboratorio_id",placeholder:"Todos",label:"nombre",reduce:function(e){return e.id},options:e.laboratorios},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.laboratorio_id,callback:function(t){e.$set(e.filtros,"laboratorio_id",t)},expression:"filtros.laboratorio_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.$can("cambiar-sucursal")},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",placeholder:"Todos",label:"nombre",disabled:!e.$can("cambiar-empresas"),options:e.empresas},on:{input:e.cambiarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresa_id,expression:"filtros.subempresa_id"}],staticClass:"form-control input-sm",attrs:{name:"subempresa_id",id:"subempresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresa_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Todos",options:e.secciones,label:"nombre",reduce:function(e){return e.id}},on:{input:e.cambiarSeccion},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.seccion_id,callback:function(t){e.$set(e.filtros,"seccion_id",t)},expression:"filtros.seccion_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.codigoExamen,expression:"codigoExamen"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",maxlength:"15",disabled:""},domProps:{value:e.codigoExamen},on:{input:function(t){t.target.composing||(e.codigoExamen=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),e._m(1)])])])])]),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.cambiarExamen}}),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})],1)],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null).exports},2028:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],components:{BuscarExamenModal:a(9107).Z},data:function(){return{sin_examenes:!1,registro:{id:"",nombre:"",examenes:[]},examenes:[]}},mounted:function(){this.cargarDatos(),$("#busquedaExamen").on("shown.bs.modal",(function(e){"busquedaExamen"===e.target.id&&$("#cadenaBusqueda").focus()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/laboratorios/".concat(this.id,"/examenes")).then((function(t){var a=t.data.data;e.registro.id=a.id,e.registro.nombre=a.nombre,e.examenes=a.examenes})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar exámenes",a)})).then((function(){return e.$refs.cargando.alternar()}))},examenSeleccionado:function(e){e.esNuevo=!0,this.examenes.push(e)},eliminarExamen:function(e){var t=this.examenes.indexOf(e);this.examenes.splice(t,1)},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),this.registro.examenes=this.examenes.map((function(t){return{laboratorio_id:e.id,examen_id:t.id}})),axios.patch("/api/laboratorios/".concat(this.id,"/examenes"),this.registro).then((function(){e.redireccionar()})).catch((function(t){e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar!",a)}))},redireccionar:function(){window.location.href="/laboratorios"}},computed:{etiquetaSeleccionados:function(){return this.examenesOrdenados.length>1?"exámenes":"examen"},examenesOrdenados:function(){return _.orderBy(this.examenes,"nombre")},examenesIds:function(){return _.map(this.examenes,"id")}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Asociar exámenes\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"/laboratorios"}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Laboratorio")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.registro.nombre)+"\n        ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row"},[e._m(0),e._v(" "),t("div",{staticClass:"col-sm-4 text-right",staticStyle:{"padding-top":"25px"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.examenesOrdenados.length>0,expression:"examenesOrdenados.length > 0"}],staticClass:"badge"},[e._v("\n              "+e._s(e.examenesOrdenados.length)+" "+e._s(e.etiquetaSeleccionados)+"\n            ")]),e._v(" "),e._m(1)])]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(2),e._v(" "),t("tbody",[0===e.examenesOrdenados.length?[e._m(3)]:e._e(),e._v(" "),e._l(e.examenesOrdenados,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.codigo))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(t){return e.eliminarExamen(a)}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Eliminar\n              ")])])])}))],2)])])])],1),e._v(" "),t("buscar-examen-modal",{attrs:{"seleccion-multiple":!0,"excluir-ids":e.examenesIds,"se-remite":!0},on:{"examen-seleccionado":e.examenSeleccionado}}),e._v("`\n\n  "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-sm-8"},[e("h3",[this._v("Exámenes")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen","data-backdrop":"static"}},[e("i",{staticClass:"fas fa-plus fa-fw"}),this._v("Agregar\n            ")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-left"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this._self._c;return e("tr",[e("td",{attrs:{colspan:"3"}},[this._v("No existen examenes seleccionados")])])}],!1,null,null,null).exports},8912:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],data:function(){return{registro:{nombre:"",ruc:"",direccion:"",telefono:""}}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e,t){this.$refs.alerta.mostrarAlerta("info",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},ocultarMensajes:function(){this.$refs.alerta.ocultarAlertas()},cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/laboratorios/"+this.id+"/edit").then((function(t){e.registro=t.data.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error",a)})).then((function(){return e.$refs.cargando.alternar()})))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),"0"===this.id?axios.post("/api/laboratorios",this.registro).then((function(){e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error",a)})).then((function(){e.alternarBotonesSubmit(),e.$refs.cargando.alternar()})):axios.patch("/api/laboratorios/"+this.id,this.registro).then((function(){e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error",a)})).then((function(){e.alternarBotonesSubmit(),e.$refs.cargando.alternar()}))},redireccionar:function(){window.location.href="/laboratorios"},regresar:function(){window.history.back()}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear Laboratorio":"Editar Laboratorio No. ")+"\n        "),t("strong",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.id,expression:"id !== '0'"}]},[e._v(e._s(e.registro.id))])]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombre",maxlength:"50"},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"ruc"}},[e._v("RUC")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.ruc,expression:"registro.ruc"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"ruc",maxlength:"13"},domProps:{value:e.registro.ruc},on:{input:function(t){t.target.composing||e.$set(e.registro,"ruc",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefono"}},[e._v("Teléfono")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.telefono,expression:"registro.telefono"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"telefono",maxlength:"15"},domProps:{value:e.registro.telefono},on:{input:function(t){t.target.composing||e.$set(e.registro,"telefono",t.target.value)}}})]),e._v(" "),e.registro.sistema_externo?t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefono"}},[e._v("Sistema externo")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.registro.sistema_externo?e.registro.sistema_externo.nombre:"")+"\n        ")])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"direccion"}},[e._v("Dirección")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.direccion,expression:"registro.direccion"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"direccion",maxlength:"200"},domProps:{value:e.registro.direccion},on:{input:function(t){t.target.composing||e.$set(e.registro,"direccion",t.target.value)}}})])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},9777:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{cargando:!1,count:0,filtros:{cadenaBusqueda:"",page:1},laboratorios:[]}},created:function(){},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.datos.cadenaBusqueda&&(this.filtros.cadenaBusqueda=this.datos.cadenaBusqueda),this.cargarLaboratorios(1)},limpiarFormulario:function(){this.filtros.cadenaBusqueda=""},cargarLaboratorios:function(e){var t=this;this.cargando=!0,this.filtros.page=e,axios.get("/api/laboratorios",{params:this.filtros}).then((function(e){var a=e.data.data;t.count=a.last_page,t.laboratorios=a.data})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error",a)})).then((function(){return t.cargando=!1}))},editarLaboratorios:function(e){window.location.href="/laboratorios/"+e.id+"/edit"},asociarExamenesLaboratorios:function(e){window.location.href="/laboratorios/"+e.id+"/examenes"},eliminarLaboratorio:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/laboratorios/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito('Laboratorio "'+e.nombre+'" eliminado exitosamente')})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error",a)}))},buscarLaboratorios:function(){this.cargarLaboratorios(1)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Laboratorios\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarLaboratorios.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarLaboratorios}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[t("a",{class:"btn btn-primary"+(e.$can("crear-laboratorios")?"":" disabled"),attrs:{href:"/laboratorios/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n              ")])])])])]},proxy:!0}])}),e._v(" "),e.cargando?e._e():t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[0===e.laboratorios.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"4"}},[e._v("\n            No existen registros\n          ")])]):e._e(),e._v(" "),e._l(e.laboratorios,(function(a){return[t("tr",[t("td",[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.ruc))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.telefono))]),e._v(" "),t("td",{staticClass:"text-right"},[e.$can("editar-laboratorios")?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.editarLaboratorios(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n              ")]):e._e(),e._v(" "),e.$can("asociar-examenes-laboratorios")?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.asociarExamenesLaboratorios(a)}}},[t("i",{staticClass:"fas fa-link fa-fw"}),e._v(" Asociar exámenes\n              ")]):e._e(),e._v(" "),e.$can("eliminar-laboratorios")?t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(t){return e.eliminarLaboratorio(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n              ")]):e._e()])])]}))],2)])]),e._v(" "),e.cargando?t("div",{staticClass:"panel-body text-center"},[e._m(1)]):e._e(),e._v(" "),t("div",{staticClass:"clearfix text-center paginacion barra_paginacion"},[t("paginate",{attrs:{"page-count":e.count,"container-class":"pagination","click-handler":e.cargarLaboratorios,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.filtros.page,callback:function(t){e.$set(e.filtros,"page",t)},expression:"filtros.page"}})],1)],1)],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Ruc")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Teléfono")]),e._v(" "),t("th",{staticClass:"col-sm-5"})])])},function(){var e=this._self._c;return e("h4",[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n      ")])}],!1,null,null,null).exports},9122:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(9107);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const n={components:{HoraModal:a(755).Z,BuscarExamenModal:r.Z},data:function(){return{filtros:{tipo_fecha:"POR_RECEPCION_MUESTRA",fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),estado:"",hora_desde:"00:00:00",hora_hasta:"23:59:59",grupo_id:"",seccion_id:"",sucursal_id:"",sala_id:"",empresa_id:"",subempresa_id:"",examen_id:"",examen_codigo:"",tipo_atencion_id:""},opciones:{imprimir_parametros:!1,imprimir_compacto:!1,imprimir_resultados:!1,mostrar_sucursal:!1,mostrar_cliente:!1,orientacion:"HORIZONTAL"},grupos:[],secciones:[],sucursales:[],salas:[],empresas:[],subempresas:[],empresa:"",tiposAtenciones:[],estados:[{id:"G",nombre:"Generado"},{id:"R",nombre:"Reportado"},{id:"L",nombre:"Preliminar"},{id:"P",nombre:"Pendiente"},{id:"V",nombre:"Validado"}]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/lista-trabajo").then((function(t){var a=t.data.data;e.tiposAtenciones=a.tiposAtenciones,e.sucursales=a.sucursales,e.secciones=a.secciones,e.empresas=a.empresas,e.grupos=a.grupos,e.salas=a.salas,e.filtros.estado="",e.$can("cambiar-sucursal")||(e.filtros.sucursal_id=e.$usuario.sucursalId),e.$can("cambiar-empresas")||(e.filtros.empresa_id=e.$usuario.empresaId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas),e.$refs.cargando.alternar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar catálogos!",a)}))},limpiarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.tipo_fecha="POR_RECEPCION_MUESTRA",this.filtros.estado="",this.filtros.hora_desde="00:00:00",this.filtros.hora_hasta="23:59:59",this.filtros.grupo_id="",this.filtros.seccion_id="",this.filtros.sala_id="",this.filtros.examen_id="",this.filtros.examen_codigo="",this.filtros.tipo_atencion_id="",this.opciones.imprimir_parametros=!1,this.opciones.imprimir_compacto=!1,this.opciones.imprimir_resultados=!1,this.opciones.mostrar_sucursal=!1,this.opciones.mostrar_cliente=!1,this.opciones.orientacion="HORIZONTAL",this.$can("cambiar-sucursal")&&(this.filtros.sucursal_id=""),this.$can("cambiar-empresas")&&(this.empresa="",this.filtros.empresa_id=""),this.filtros.subempresa_id=""},cambiarGrupo:function(){this.filtros.examen_id="",this.filtros.examen_codigo="",this.filtros.seccion_id=""},cambiarSeccion:function(){this.filtros.grupo_id="",this.filtros.examen_id="",this.filtros.examen_codigo=""},abrirBusquedaExamen:function(){$("#buscarExamen").modal()},examenSeleccionado:function(e){this.filtros.examen_id=e.id,this.filtros.examen_codigo=e.codigo,this.filtros.grupo_id="",this.filtros.seccion_id=""},limpiarExamen:function(){this.filtros.examen_id="",this.filtros.examen_codigo=""},generar:function(){var e=this.validarFechas(e);if(e=this.validarRangoFechas(e),e=this.validarCamposRequeridos(e)){var t=i(i({},this.filtros),this.opciones);t.imprimir_parametros=t.imprimir_parametros?1:null,t.imprimir_compacto=t.imprimir_compacto?1:null,t.imprimir_resultados=t.imprimir_resultados?1:null,t.mostrar_sucursal=t.mostrar_sucursal?1:null,t.mostrar_cliente=t.mostrar_cliente?1:null,t=this.obtenerParametrosUrl(t),window.open("lista-trabajo/pdf"+t,"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")}},validarFechas:function(e){var t=new RegExp("([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))");return(e=t.test(this.filtros.fecha_desde))?(e=t.test(this.filtros.fecha_hasta))||(this.mostrarErrores('La "Fecha Hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores("¡Error!",'La "Fecha Desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e)},validarCamposRequeridos:function(e){return this.opciones.imprimir_resultados?this.filtros.seccion_id||this.filtros.examen_id||this.filtros.grupo_id?e:(this.mostrarErrores('Es requerido escoger una "Sección" o un "Examen" o un "Grupo".'),!1):e},validarRangoFechas:function(e){var t=moment(this.filtros.fecha_hasta+" "+this.filtros.hora_hasta,"YYYY-MM-DD HH:mm:ss"),a=moment(this.filtros.fecha_desde+" "+this.filtros.hora_desde,"YYYY-MM-DD HH:mm:ss"),r=t.diff(a,"days",!0);return r>15&&(this.mostrarErrores('El rango entre la "Fecha Desde" y "Fecha Hasta" supera los 15 días.'),e=!1),r<0&&(this.mostrarErrores('La "Fecha Desde" no debe ser mayor que la "Fecha Hasta".'),e=!1),e},cambiarEmpresa:function(){this.filtros.subempresa_id="",this.empresa?(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas):(this.filtros.empresa_id="",this.subempresas="")},cambioImprimirResultados:function(){this.opciones.imprimir_compacto=!1,this.opciones.imprimir_parametros=!1},cambioImprimirCuadricula:function(){this.opciones.imprimir_resultados=!1},horaSeleccionada:function(e,t){this.filtros[t]=e}}};const c=(0,a(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Lista de Trabajo\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{id:"generarInformeListaTrabajo",type:"submit"}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Generar informe\n            ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",[e._v("Formato")]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.imprimir_parametros,expression:"opciones.imprimir_parametros"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.imprimir_parametros)?e._i(e.opciones.imprimir_parametros,null)>-1:e.opciones.imprimir_parametros},on:{change:[function(t){var a=e.opciones.imprimir_parametros,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"imprimir_parametros",a.concat([null])):i>-1&&e.$set(e.opciones,"imprimir_parametros",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"imprimir_parametros",o)},e.cambioImprimirCuadricula]}}),e._v("\n                  Imprimir en cuadrícula\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.imprimir_compacto,expression:"opciones.imprimir_compacto"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.imprimir_compacto)?e._i(e.opciones.imprimir_compacto,null)>-1:e.opciones.imprimir_compacto},on:{change:[function(t){var a=e.opciones.imprimir_compacto,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"imprimir_compacto",a.concat([null])):i>-1&&e.$set(e.opciones,"imprimir_compacto",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"imprimir_compacto",o)},e.cambioImprimirCuadricula]}}),e._v("\n                  Imprimir compacto\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.imprimir_resultados,expression:"opciones.imprimir_resultados"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.imprimir_resultados)?e._i(e.opciones.imprimir_resultados,null)>-1:e.opciones.imprimir_resultados},on:{click:e.cambioImprimirResultados,change:function(t){var a=e.opciones.imprimir_resultados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"imprimir_resultados",a.concat([null])):i>-1&&e.$set(e.opciones,"imprimir_resultados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"imprimir_resultados",o)}}}),e._v("\n                  Imprimir resultados\n                ")])])])]),e._v(" "),e.opciones.imprimir_resultados?e._e():t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",[e._v("Orientación")]),e._v(" "),t("div",[t("label",{staticClass:"radio-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.orientacion,expression:"opciones.orientacion"}],attrs:{type:"radio",name:"orientacion",id:"orientacion1",value:"HORIZONTAL"},domProps:{checked:e._q(e.opciones.orientacion,"HORIZONTAL")},on:{change:function(t){return e.$set(e.opciones,"orientacion","HORIZONTAL")}}}),e._v(" Horizontal\n                ")]),e._v(" "),t("label",{staticClass:"radio-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.orientacion,expression:"opciones.orientacion"}],attrs:{type:"radio",name:"orientacion",id:"orientacion2",value:"VERTICAL"},domProps:{checked:e._q(e.opciones.orientacion,"VERTICAL")},on:{change:function(t){return e.$set(e.opciones,"orientacion","VERTICAL")}}}),e._v(" Vertical\n                ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",[e._v("Mostrar")]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.mostrar_sucursal,expression:"opciones.mostrar_sucursal"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.opciones.mostrar_sucursal)?e._i(e.opciones.mostrar_sucursal,"")>-1:e.opciones.mostrar_sucursal},on:{change:function(t){var a=e.opciones.mostrar_sucursal,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.opciones,"mostrar_sucursal",a.concat([""])):i>-1&&e.$set(e.opciones,"mostrar_sucursal",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"mostrar_sucursal",o)}}}),e._v("\n                  Sucursal\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.mostrar_cliente,expression:"opciones.mostrar_cliente"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.opciones.mostrar_cliente)?e._i(e.opciones.mostrar_cliente,"")>-1:e.opciones.mostrar_cliente},on:{change:function(t){var a=e.opciones.mostrar_cliente,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.opciones,"mostrar_cliente",a.concat([""])):i>-1&&e.$set(e.opciones,"mostrar_cliente",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"mostrar_cliente",o)}}}),e._v("\n                  Cliente\n                ")])])])])])])]),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(1),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"tipo_fecha"}},[e._v("Tipo de fecha")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_fecha,expression:"filtros.tipo_fecha"}],staticClass:"form-control input-sm",attrs:{id:"tipo_fecha",name:"tipo_fecha",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_fecha",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"POR_ORDEN"}},[e._v("Por fecha de orden")]),e._v(" "),t("option",{attrs:{value:"POR_RECEPCION_MUESTRA"}},[e._v("Por fecha de recepcion de la muestra")])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio no-salto-linea",attrs:{for:"fecha_desde"}},[e._v("\n                Fecha desde\n                "),t("small",{staticStyle:{"font-weight":"normal"}},[e._v(e._s(e.filtros.hora_desde))])]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fecha_desde","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",required:""}}),e._v(" "),e._m(2)])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio no-salto-linea",attrs:{for:"fecha_hasta"}},[e._v("\n                Fecha hasta\n                "),t("small",{staticStyle:{"font-weight":"normal"}},[e._v(e._s(e.filtros.hora_hasta))])]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{id:"fecha_hasta","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}}),e._v(" "),e._m(3)])])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("\n                Cliente\n              ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",disabled:!e.$can("cambiar-empresas"),placeholder:"Todos",options:e.empresas,label:"nombre"},on:{"option:selected":e.cambiarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"subempresa_id",placeholder:"Todos",options:e.subempresas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.subempresa_id,callback:function(t){e.$set(e.filtros,"subempresa_id",t)},expression:"filtros.subempresa_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"sucursal_id",placeholder:"Seleccione...",disabled:!e.$can("cambiar-sucursal"),options:e.sucursales,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.sucursal_id,callback:function(t){e.$set(e.filtros,"sucursal_id",t)},expression:"filtros.sucursal_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"servicio_id"}},[e._v("Servicio")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"servicio_id",placeholder:"Seleccione...",options:e.salas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.sala_id,callback:function(t){e.$set(e.filtros,"sala_id",t)},expression:"filtros.sala_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_atencion_id,expression:"filtros.tipo_atencion_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",name:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_atencion_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposAtenciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n                ")])}))],2)])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Todos",options:e.secciones,label:"nombre",reduce:function(e){return e.id}},on:{input:e.cambiarSeccion},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.seccion_id,callback:function(t){e.$set(e.filtros,"seccion_id",t)},expression:"filtros.seccion_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examen_codigo,expression:"filtros.examen_codigo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",maxlength:"15",disabled:""},domProps:{value:e.filtros.examen_codigo},on:{input:function(t){t.target.composing||e.$set(e.filtros,"examen_codigo",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBusquedaExamen}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"grupo_id"}},[e._v("Grupo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.grupo_id,expression:"filtros.grupo_id"}],staticClass:"form-control input-sm",attrs:{name:"grupo_id",id:"grupo_id"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"grupo_id",t.target.multiple?a:a[0])},e.cambiarGrupo]}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.grupos,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]),e._v(" "),e.opciones.imprimir_resultados?e._e():t("div",{staticClass:"col-sm-2 form-group"},[t("label",{attrs:{for:"estado"}},[e._v("Estado exámenes")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control input-sm",attrs:{id:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),t("option",{attrs:{value:"G"}},[e._v("Generado")]),e._v(" "),t("option",{attrs:{value:"R"}},[e._v("Reportado")]),e._v(" "),t("option",{attrs:{value:"L"}},[e._v("Preliminar")]),e._v(" "),t("option",{attrs:{value:"V"}},[e._v("Validado")]),e._v(" "),t("option",{attrs:{value:"X"}},[e._v("No procesado")]),e._v(" "),e._m(4)])])])])])])],1),e._v(" "),t("hora-modal",{attrs:{id:"horaDesdeModal",hora:e.filtros.hora_desde},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"hora_desde")}}}),e._v(" "),t("hora-modal",{attrs:{id:"horaHastaModal",hora:e.filtros.hora_hasta},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"hora_hasta")}}}),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.examenSeleccionado}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Opciones")])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaDesdeModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaHastaModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this,t=e._self._c;return t("optgroup",{attrs:{label:"Por agrupación"}},[t("option",{attrs:{value:"CON_RESULTADOS"}},[e._v("Con resultados")]),e._v(" "),t("option",{attrs:{value:"PENDIENTES_VALIDAR"}},[e._v("Pendientes de validar")])])}],!1,null,null,null).exports},688:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(4590),o=a(2534),i=a(9107);const s={components:{SelectMedico:o.Z,BuscarExamenModal:i.Z},props:["datos"],data:function(){return{generandoExel:!1,cadenaBusqueda:"",filtros:{fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),usuario_id:"",usuario_nombre:"",sucursal_id:"",empresa_id:"",subempresa_id:"",medico_id:"",tipo_atencion_id:"",plan_salud_id:"",servicio_id:"",examen_id:"",examen_codigo:"",tipo_paciente_id:"",seccion_id:"",tipo:"examenes",por_determinacion:!1,embarazada:!1},usuarios:[],sucursales:[],empresas:[],empresa:"",subempresas:[],tiposAtenciones:[],planesSalud:[],servicios:[],secciones:[],tiposPacientes:[]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/catalogos",{params:{catalogo:r.oH.SUCURSALES}}).then((function(t){e.sucursales=t.data.data}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Sucursales")})),axios.get("/api/catalogos",{params:{catalogo:r.oH.CLIENTES}}).then((function(t){e.empresas=t.data.data,e.datos.permisos.cambiarEmpresas||(e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Clientes")})),axios.get("/api/catalogos",{params:{catalogo:r.oH.MUESTRAS}}).then((function(t){e.muestras=t.data.data}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Muestras")})),axios.get("/api/catalogos",{params:{catalogo:r.oH.SERVICIO}}).then((function(t){e.servicios=t.data.data}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Muestras")})),axios.get("/api/catalogos",{params:{catalogo:r.oH.TIPO_ATENCION}}).then((function(t){e.tiposAtenciones=t.data.data}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Tipos Muestras")})),axios.get("/api/catalogos",{params:{catalogo:r.oH.PLAN_SALUD}}).then((function(t){e.planesSalud=t.data.data}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Planes de Salud")})),axios.get("/api/catalogos",{params:{catalogo:r.oH.USUARIOS}}).then((function(t){e.usuarios=t.data.data}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Tipos Usuarios")})),axios.get("/api/catalogos",{params:{catalogo:r.oH.TIPOS_PACIENTES}}).then((function(t){var a=t.data.data;e.tiposPacientes=a}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Tipos Pacientes")})),axios.get("/api/catalogos",{params:{catalogo:r.oH.SECCIONES}}).then((function(t){e.secciones=t.data.data}),(function(t){console.error(t.response.data.errors),e.mostrarErrores("Error al cargar Secciones")})),this.datos.permisos.cambiarSucursal||(this.filtros.sucursal_id=this.datos.sucursalActivaId),this.$refs.cargando.alternar()},limpiarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.usuario_id="",this.filtros.usuario_nombre="",this.filtros.subempresa_id="",this.filtros.medico_id="",this.filtros.servicio_id="",this.filtros.tipo_atencion_id="",this.filtros.plan_salud_id="",this.filtros.examen_id="",this.filtros.seccion_id="",this.filtros.examen_codigo="",this.filtros.tipo="examenes",this.filtros.por_determinacion=!1,this.filtros.embarazada=!1,this.datos.permisos.cambiarSucursal&&(this.filtros.sucursal_id=""),this.datos.permisos.cambiarEmpresas&&(this.empresa="",this.filtros.empresa_id="")},abrirBusquedaUsuario:function(){this.cadenaBusqueda="",$("#busquedaUsuario").modal()},seleccionarUsuario:function(e){this.filtros.usuario_id=e.id,this.filtros.usuario_nombre=e.nombre_usuario,$("#busquedaUsuario").modal("hide")},limpiarUsuario:function(){this.filtros.usuario_id="",this.filtros.usuario_nombre=""},limpiarCadenaBusqueda:function(){this.cadenaBusqueda=""},generarExcel:function(){var e=this;this.generandoExel=!0;var t=this.validarRangoFechas(t);t&&axios.get("/matriz-msp/excel",{params:this.filtros,responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=document.getElementById("link-descargas");r.href=window.URL.createObjectURL(a),r.download=t.split("filename=")[1],r.click()})).catch((function(t){var a=t.response,r=String.fromCharCode.apply(null,new Uint8Array(a.data)),o=JSON.parse(r),i=o.errors?o.errors:o.message;i=i||"Error al generar informe con formato Excel.",e.mostrarErrores("¡Error!",i)})).then((function(){return e.generandoExel=!1}))},validarRangoFechas:function(){var e=moment(this.filtros.fecha_hasta,"YYYY-MM-DD"),t=moment(this.filtros.fecha_desde,"YYYY-MM-DD"),a=e.diff(t,"months",!0),r=!0;return a>3&&(this.mostrarErrores("¡Error!",' El rango entre la "Fecha Desde" y "Fecha Hasta" supera los 3 meses.'),r=!1),a<0&&(this.mostrarErrores("¡Error!",' La "Fecha Desde" no debe ser mayor que la "Fecha Hasta".'),r=!1),r},borrarFiltroExamen:function(){this.filtros.examen_id="",this.filtros.examen_codigo=""},cambiarEmpresa:function(){this.filtros.subempresa_id="",""!==this.empresa?(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas):(this.filtros.empresa_id="",this.subempresas="")},cambiarSeccion:function(){this.filtros.examen_id=""},examenSeleccionado:function(e){this.filtros.examen_id=e.id,this.filtros.examen_codigo=e.codigo}},computed:{usuariosFiltrados:function(){if(!_.isEmpty(this.usuarios)){var e=new RegExp(removeDiacritics(this.cadenaBusqueda),"i");return this.usuarios.filter((function(t){return e.test(removeDiacritics(t.nombre_usuario))||e.test(removeDiacritics(t.nombre_completo))}))}return this.usuarios}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Matríz MSP\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{id:"generarInformeMSP",type:"button","aria-expanded":"false",disabled:e.generandoExel},on:{click:e.generarExcel}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoExel,expression:"!generandoExel"}],staticClass:"fas fa-print fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.generandoExel,expression:"generandoExel"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Generar informe\n            ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n            Borrar filtros\n          ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}})])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.empresa,expression:"empresa"}],staticClass:"form-control input-sm",attrs:{name:"empresa_id",id:"empresa_id",disabled:!e.datos.permisos.cambiarEmpresas},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.empresa=t.target.multiple?a:a[0]},e.cambiarEmpresa]}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.empresas,(function(a){return t("option",{domProps:{value:a}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.subempresa_id,expression:"filtros.subempresa_id"}],staticClass:"form-control input-sm",attrs:{name:"subempresa_id",id:"subempresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"subempresa_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.subempresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.datos.permisos.cambiarSucursal},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"plan_salud_id"}},[e._v("Plan salud")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.plan_salud_id,expression:"filtros.plan_salud_id"}],staticClass:"form-control input-sm",attrs:{id:"plan_salud_id",name:"plan_salud_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"plan_salud_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.planesSalud,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n              ")])}))],2)])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico_id"}},[e._v("Médico")]),e._v(" "),t("select-medico",{attrs:{id:"medico_id",catalogo:"MEDICOS",etiqueta:"nombre_completo"},model:{value:e.filtros.medico_id,callback:function(t){e.$set(e.filtros,"medico_id",t)},expression:"filtros.medico_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_atencion_id,expression:"filtros.tipo_atencion_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",name:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_atencion_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposAtenciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"servicio_id"}},[e._v("Servicio")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.servicio_id,expression:"filtros.servicio_id"}],staticClass:"form-control input-sm",attrs:{name:"servicio_id",id:"servicio_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"servicio_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.servicios,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_paciente_id"}},[e._v("\n              Tipo paciente\n            ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_paciente_id,expression:"filtros.tipo_paciente_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_paciente_id",name:"tipo_paciente_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_paciente_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposPacientes,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Todos",options:e.secciones,label:"nombre",reduce:function(e){return e.id}},on:{input:e.cambiarSeccion},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.seccion_id,callback:function(t){e.$set(e.filtros,"seccion_id",t)},expression:"filtros.seccion_id"}})],1)])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario"}},[e._v("Usuario")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.usuario_nombre,expression:"filtros.usuario_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"usuario",maxlength:"15",disabled:"true"},domProps:{value:e.filtros.usuario_nombre},on:{input:function(t){t.target.composing||e.$set(e.filtros,"usuario_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBusquedaUsuario}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar Filtro"},on:{click:e.limpiarUsuario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examen_codigo,expression:"filtros.examen_codigo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",maxlength:"15",disabled:""},domProps:{value:e.filtros.examen_codigo},on:{input:function(t){t.target.composing||e.$set(e.filtros,"examen_codigo",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[e._m(1),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("div",{staticClass:"radio",staticStyle:{"padding-top":"25px"}},[t("label",{attrs:{for:"examenes"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo,expression:"filtros.tipo"}],attrs:{type:"radio",id:"examenes",value:"examenes"},domProps:{checked:e._q(e.filtros.tipo,"examenes")},on:{change:function(t){return e.$set(e.filtros,"tipo","examenes")}}}),e._v("\n                Exámenes\n              ")])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("div",{staticClass:"radio",staticStyle:{"padding-top":"25px"}},[t("label",{attrs:{for:"muestras"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo,expression:"filtros.tipo"}],attrs:{type:"radio",id:"muestras",value:"muestras"},domProps:{checked:e._q(e.filtros.tipo,"muestras")},on:{change:function(t){return e.$set(e.filtros,"tipo","muestras")}}}),e._v("\n                Muestras\n              ")])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("div",{staticClass:"radio",staticStyle:{"padding-top":"25px"}},[t("label",{attrs:{for:"secciones"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo,expression:"filtros.tipo"}],attrs:{type:"radio",id:"secciones",value:"secciones"},domProps:{checked:e._q(e.filtros.tipo,"secciones")},on:{change:function(t){return e.$set(e.filtros,"tipo","secciones")}}}),e._v("\n                Secciones\n              ")])])])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"por_determinacion"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.por_determinacion,expression:"filtros.por_determinacion"}],attrs:{type:"checkbox",id:"por_determinacion",value:"por_determinacion"},domProps:{checked:Array.isArray(e.filtros.por_determinacion)?e._i(e.filtros.por_determinacion,"por_determinacion")>-1:e.filtros.por_determinacion},on:{change:function(t){var a=e.filtros.por_determinacion,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i="por_determinacion",s=e._i(a,i);r.checked?s<0&&e.$set(e.filtros,"por_determinacion",a.concat([i])):s>-1&&e.$set(e.filtros,"por_determinacion",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(e.filtros,"por_determinacion",o)}}}),e._v("\n                Por determinación\n              ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"embarazada"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.embarazada,expression:"filtros.embarazada"}],attrs:{type:"checkbox",id:"embarazada",value:"embarazada"},domProps:{checked:Array.isArray(e.filtros.embarazada)?e._i(e.filtros.embarazada,"embarazada")>-1:e.filtros.embarazada},on:{change:function(t){var a=e.filtros.embarazada,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i="embarazada",s=e._i(a,i);r.checked?s<0&&e.$set(e.filtros,"embarazada",a.concat([i])):s>-1&&e.$set(e.filtros,"embarazada",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(e.filtros,"embarazada",o)}}}),e._v("\n                Paciente embarazada\n              ")])])])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"busquedaUsuario",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(2),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(3),e._v(" "),t("tbody",[e._l(e.usuariosFiltrados,(function(a){return[t("tr",[t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.nombre_usuario))]),e._v(" "),t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.nombre_completo))]),e._v(" "),t("td",{staticClass:"centrado-vertical text-right"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Seleccionar usuario"},on:{click:function(t){return e.seleccionarUsuario(a)}}},[t("i",{staticClass:"fas fa-check"})])])])]}))],2)])])])])])]),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.examenSeleccionado}}),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Usuarios")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-4 text-center"},[e._v("Usuario")]),e._v(" "),t("th",{staticClass:"col-sm-7 text-center"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])}],!1,null,null,null).exports},4693:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});a(2155);var r=a(1272),o=a.n(r),i=a(5234),s=a.n(i);a(2194);const n={components:{ckeditor:o().component},props:["id","permisos","urlStorage"],data:function(){return{componentKey:0,registro:{id:0,nombre:"",logo:"",dimensiones:"",tamano:"",contenido:"",distribucion:"LC",resolucion:900,margen_superior:"tipo_espacio_2",margen_inferior:"altura_pie_pagina_1",margen_izquierdo:"1.00",margen_derecho:"1.00"},editor:s(),editorConfig:{language:"es",toolbar:["heading","|","bold","italic","link","|","bulletedList","numberedList","|","undo","redo"]},logo:"",imagenOriginal:"",imagenCortada:""}},mounted:function(){$("img").hide(),this.cargarDatos(),$("#nombre").focus()},methods:{actualizarVistaPrevia:function(){this.registro.logo="",this.imagenCortada=this.$refs.cropper.getCroppedCanvas({fillColor:"white"}).toDataURL("image/jpeg"),this.imagenOriginal||(this.imagenOriginal=this.imagenCortada)},cargarDatos:function(){var e=this;this.definirResolucionInicial(),"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/membretes/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a,e.definirResolucionInicial(),e.registro.contenido||(e.registro.contenido=""),e.registro.logo&&("IM"!==e.registro.distribucion?(e.$refs.cropper.replace("".concat(e.urlStorage).concat(e.registro.logo)),$("img").show()):(e.forzarRenderizado(),setTimeout((function(){e.$refs.cropper.replace("".concat(e.urlStorage).concat(e.registro.logo)),$("img").show()}),500)))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar membrete!",a)})).then((function(){return e.$refs.cargando.alternar()})))},enviarFormulario:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$refs.cargando.alternar(),this.alternarBotonesSubmit();var a=new FormData;a.append("nombre",this.registro.nombre),a.append("distribucion",this.registro.distribucion),a.append("resolucion",this.registro.resolucion),a.append("contenido",this.registro.contenido),a.append("logo",this.registro.logo),a.append("margen_superior",this.registro.margen_superior),a.append("margen_inferior",this.registro.margen_inferior),a.append("margen_izquierdo",this.registro.margen_izquierdo),a.append("margen_derecho",this.registro.margen_derecho),t&&a.append("datosLogo",t),"0"===this.id?axios.post("/api/membretes",a).then((function(){e.regresar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar membrete!",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})):(a.append("_method","PATCH"),axios.post("/api/membretes/".concat(this.id),a).then((function(){e.regresar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar membrete!",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})))},guardar:function(){var e=this,t=this.$refs.cropper.getCroppedCanvas({imageSmoothingEnabled:!1,fillColor:"white"});t?t.toBlob((function(t){e.enviarFormulario(t)}),"image/jpeg"):this.enviarFormulario()},imagenSeleccionada:function(e){var t=this;this.registro.logo="",this.registro.dimensiones="",this.registro.tamano="",$("img").show();var a=e.target.files[0];if(this.logo=a,a.type.includes("image/"))if("function"==typeof FileReader){var r=new FileReader;r.onload=function(e){t.imagenOriginal=e.target.result,t.$refs.cropper.replace(e.target.result),t.cargarAnchoYAltoImagen(e.target.result)},r.readAsDataURL(a)}else alert("Lo sentimos, su navegador no soporta esta función");else alert("Por favor seleccione una imagen")},cargarAnchoYAltoImagen:function(e){var t=this,a=new Image;a.src=e,a.onload=function(e){if(e.path[0]){var a=e.path[0];t.registro.dimensiones="".concat(a.width," x ").concat(a.height)}}},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarAdvertenciaRaza:function(e,t){this.$refs.alertaAgregarRaza.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},regresar:function(){window.location.href="/membretes"},eliminarLogo:function(){this.logo="",this.registro.logo="",this.registro.dimensiones="",this.registro.tamano="",this.imagenOriginal="",this.imagenCortada="",this.$refs.cropper.destroy(),this.forzarRenderizado()},cambiar:function(){this.forzarRenderizado(),this.definirResolucionInicial()},forzarRenderizado:function(){this.componentKey+=1},definirResolucionInicial:function(){Vue.set(this.registro,"resolucion","IM"===this.registro.distribucion?2e3:900)}},computed:{resolucionMinima:function(){return"IM"===this.registro.distribucion?1e3:300},resolucionMedia:function(){return"IM"===this.registro.distribucion?1500:450},resolucionMaxima:function(){return"IM"===this.registro.distribucion?2e3:900}}},c=n;var l=a(3379),d=a.n(l),u=a(3271),m={insert:"head",singleton:!1};d()(u.Z,m);u.Z.locals;const p=(0,a(1900).Z)(c,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{ref:"formulario",staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear":"Editar")+" Membrete\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{directives:[{name:"show",rawName:"v-show",value:"0"===e.id&&e.permisos.crearMembretes||"0"!==e.id&&e.permisos.editarMembretes,expression:"(id === '0' && permisos.crearMembretes) || (id !== '0' && permisos.editarMembretes)"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("fieldset",[t("div",{staticClass:"form-group"},[e._m(0),e._v(" "),t("div",{staticClass:"col-md-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombre",name:"nombre",maxlength:"100",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})])])]),e._v(" "),t("fieldset",[e._m(1),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(2),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.distribucion,expression:"registro.distribucion"}],staticClass:"form-control input-sm",attrs:{id:"distribucion",name:"distribucion"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"distribucion",t.target.multiple?a:a[0])},e.cambiar]}},[t("option",{attrs:{value:"LC"}},[e._v("Logo - Contenido")]),e._v(" "),t("option",{attrs:{value:"CL"}},[e._v("Contenido - Logo")]),e._v(" "),t("option",{attrs:{value:"IM"}},[e._v("Sólo imagen")])])])])]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(3),e._v(" "),t("div",{staticClass:"col-md-10"},[t("div",{staticClass:"row"},[t("div",{class:{"col-md-5":"IM"!==this.registro.distribucion,"col-md-10":"IM"===this.registro.distribucion}},[t("div",{staticClass:"imagen-original"},[t("vue-cropper",{key:e.componentKey,ref:"cropper",attrs:{alt:"Por favor seleccione una imagen",src:e.imagenOriginal,containerStyle:{height:"100%",width:"100%"},cropBoxResizable:!0,aspectRatio:0,autoCropArea:1,cropend:e.actualizarVistaPrevia,ready:e.actualizarVistaPrevia,zoom:e.actualizarVistaPrevia}})],1)]),e._v(" "),t("div",{class:{"col-md-3":"IM"!==this.registro.distribucion,"col-md-2":"IM"===this.registro.distribucion}},[t("div",{staticClass:"col-sm-12"},[t("label",{staticClass:"btn btn-default",staticStyle:{width:"130px"}},[e._v("\n                    Seleccionar"),t("br"),e._v("\n                    logo\n                    "),t("input",{staticClass:"sfo",attrs:{type:"file",name:"logo",accept:"image/*"},on:{change:e.imagenSeleccionada}})])]),e._v(" "),t("div",{staticClass:"col-sm-12",staticStyle:{"margin-top":"5px"}},[t("button",{staticClass:"btn btn-danger",attrs:{type:"button",title:"Eliminar logo"},on:{click:e.eliminarLogo}},[t("i",{staticClass:"fas fa-trash"})])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.registro.dimensiones,expression:"registro.dimensiones"}],staticClass:"control-label"},[e._v("\n                    Dimensiones (Px)\n                  ")]),e._v(" "),t("output",{directives:[{name:"show",rawName:"v-show",value:e.registro.dimensiones,expression:"registro.dimensiones"}],staticStyle:{"padding-top":"0","margin-top":"0"}},[e._v("\n                    "+e._s(e.registro.dimensiones)+"\n                  ")])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.registro.tamano,expression:"registro.tamano"}],staticClass:"control-label"},[e._v("\n                    Tamaño\n                  ")]),e._v(" "),t("output",{directives:[{name:"show",rawName:"v-show",value:e.registro.tamano,expression:"registro.tamano"}],staticStyle:{"padding-top":"0","margin-top":"0"}},[e._v("\n                    "+e._s(e.registro.tamano)+"\n                  ")])])])])])])]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(4),e._v(" "),t("div",{class:{"col-md-4":"IM"!==this.registro.distribucion,"col-md-8":"IM"===this.registro.distribucion}},[t("div",{staticClass:"vista-previa"},[t("img",{attrs:{src:e.imagenCortada,alt:"Vista Previa"}})])])])]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(5),e._v(" "),t("div",{staticClass:"col-md-8"},[t("output",[e._v("\n              "+e._s(e.registro.resolucion)+"\n            ")]),e._v("\n            "+e._s(e.resolucionMinima)+"\n            "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.resolucion,expression:"registro.resolucion"}],staticClass:"span2",staticStyle:{width:"60%",display:"inline-block"},attrs:{id:"margen_izquierdo_datos_paciente",type:"range",min:e.resolucionMinima,max:e.resolucionMaxima,name:"margen_izquierdo_datos_paciente"},domProps:{value:e.registro.resolucion},on:{__r:function(t){return e.$set(e.registro,"resolucion",t.target.value)}}}),e._v("\n            "+e._s(e.resolucionMaxima)+"\n            "),t("div",{staticStyle:{"margin-top":"2px"}},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(t){e.registro.resolucion=e.resolucionMinima}}},[e._v("\n                "+e._s(e.resolucionMinima)+"\n              ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(t){e.registro.resolucion=e.resolucionMedia}}},[e._v("\n                "+e._s(e.resolucionMedia)+"\n              ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(t){e.registro.resolucion=e.resolucionMaxima}}},[e._v("\n                "+e._s(e.resolucionMaxima)+"\n              ")])])])]),e._v(" "),e._m(6)]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"IM"!==e.registro.distribucion,expression:"registro.distribucion !== 'IM'"}],staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(7),e._v(" "),t("div",{staticClass:"col-md-6 col-sm-9 editor"},[t("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.registro.contenido,callback:function(t){e.$set(e.registro,"contenido",t)},expression:"registro.contenido"}})],1)])])]),e._v(" "),t("fieldset",[e._m(8),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(9),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margen_superior,expression:"registro.margen_superior"}],staticClass:"form-control input-sm",attrs:{id:"margen_superior",name:"margen_superior",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"margen_superior",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"tipo_espacio_0"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_1"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_2"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_3"}},[e._v("3.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_4"}},[e._v("4.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_5"}},[e._v("4.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_6"}},[e._v("5.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_7"}},[e._v("5.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_8"}},[e._v("6.0 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_9"}},[e._v("6.5 cm")]),e._v(" "),t("option",{attrs:{value:"tipo_espacio_10"}},[e._v("7.0 cm")])])])])]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(10),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margen_inferior,expression:"registro.margen_inferior"}],staticClass:"form-control input-sm",attrs:{id:"margen_inferior",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"margen_inferior",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"altura_pie_pagina_1"}},[e._v("1.0 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_2"}},[e._v("1.5 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_3"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_4"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_5"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_6"}},[e._v("3.5 cm")]),e._v(" "),t("option",{attrs:{value:"altura_pie_pagina_7"}},[e._v("4.0 cm")])])])])]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(11),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margen_izquierdo,expression:"registro.margen_izquierdo"}],staticClass:"form-control input-sm",attrs:{id:"margen_izquierdo",name:"margen_izquierdo"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"margen_izquierdo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"0.00"}},[e._v("0 cm")]),e._v(" "),t("option",{attrs:{value:"0.50"}},[e._v("0.5 cm")]),e._v(" "),t("option",{attrs:{value:"1.00"}},[e._v("1.0 cm")]),e._v(" "),t("option",{attrs:{value:"1.50"}},[e._v("1.5 cm")]),e._v(" "),t("option",{attrs:{value:"2.00"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"2.50"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"3.00"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"3.50"}},[e._v("3.5 cm")])])])])]),e._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[e._m(12),e._v(" "),t("div",{staticClass:"col-md-2"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.margen_derecho,expression:"registro.margen_derecho"}],staticClass:"form-control input-sm",attrs:{id:"margen_derecho",name:"margen_derecho"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"margen_derecho",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"0.00"}},[e._v("0 cm")]),e._v(" "),t("option",{attrs:{value:"0.50"}},[e._v("0.5 cm")]),e._v(" "),t("option",{attrs:{value:"1.00"}},[e._v("1.0 cm")]),e._v(" "),t("option",{attrs:{value:"1.50"}},[e._v("1.5 cm")]),e._v(" "),t("option",{attrs:{value:"2.00"}},[e._v("2.0 cm")]),e._v(" "),t("option",{attrs:{value:"2.50"}},[e._v("2.5 cm")]),e._v(" "),t("option",{attrs:{value:"3.00"}},[e._v("3.0 cm")]),e._v(" "),t("option",{attrs:{value:"3.50"}},[e._v("3.5 cm")])])])])])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[this._v("Nombre")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-2 text-right"}),e._v(" "),t("div",{staticClass:"col-md-10"},[t("legend",{staticClass:"legend"},[e._v("Encabezado")])])])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label obligatorio",attrs:{for:"distribucion"}},[this._v("Distribución")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label"},[this._v("Logo")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label"},[this._v("Vista Previa")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label",attrs:{for:"resolucion"}},[this._v("Resolución máxima (Píxeles)")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-2"}),e._v(" "),t("div",{staticClass:"col-sm-10 col-md-10 help-block"},[t("em",[e._v("Nota:")]),e._v(" "),t("ul",[t("li",[e._v("\n                Resolución máxima recomendad 600px.\n              ")]),e._v(" "),t("li",[e._v("\n                Si la resolución de la imagen es inferior, se conservará la resolución de la imagen cargada\n              ")]),e._v(" "),t("li",[e._v("A mayor resolución más lenta se hace la generación de PDFs.")])])])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label",attrs:{for:"nombre"}},[this._v("Contenido")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-row"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-2 text-right"}),e._v(" "),t("div",{staticClass:"col-md-10"},[t("legend",{staticClass:"legend"},[e._v("Márgenes")])])])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label obligatorio",attrs:{for:"margen_superior"}},[this._v("Alto Encabezado")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label obligatorio",attrs:{for:"margen_inferior"}},[this._v("Alto Pie de Página")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label obligatorio",attrs:{for:"margen_izquierdo"}},[this._v("Margen Izquierdo")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-2 text-right"},[e("label",{staticClass:"control-label obligatorio",attrs:{for:"margen_derecho"}},[this._v("Margen Derecho")])])}],!1,null,"a05d841a",null).exports},6337:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["permisos"],data:function(){return{cargando:!1,count:0,cadenaBusqueda:"",membretes:[]}},created:function(){},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.cargarMembrete()},limpiarFormulario:function(){this.cadenaBusqueda=""},cargarMembrete:function(){var e=this;this.cargando=!0,axios.get("/api/membretes",{params:{cadenaBusqueda:this.cadenaBusqueda}}).then((function(t){var a=t.data.data;e.membretes=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar membretes!",a)})).then((function(){return e.cargando=!1}))},editarMembrete:function(e){window.location.href="/membretes/"+e.id+"/edit"},eliminarMembrete:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/membretes/".concat(e.id)).then((function(){t.cargarDatos(),t.mostrarExito('¡Membrete "'+e.nombre+'" eliminado exitosamente!')})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar firma!",a)}))},buscarMembretes:function(){this.cargarMembrete()}},computed:{}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Membretes\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarMembretes.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarMembretes}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[t("a",{class:"btn btn-primary"+(e.permisos.crearMembretes?"":" disabled"),attrs:{href:"/membretes/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n              ")])])])])]},proxy:!0}])}),e._v(" "),e.cargando?e._e():t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.membretes,(function(a){return[t("tr",[t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"centrado-vertical"},[e._v(e._s(e._f("distribucion")(a.distribucion)))]),e._v(" "),t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.dimensiones))]),e._v(" "),t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.tamano))]),e._v(" "),t("td",{staticClass:"text-right centrado-vertical col-md-2"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Editar",disabled:!e.permisos.editarMembretes},on:{click:function(t){return e.editarMembrete(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n              ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar",disabled:!e.permisos.eliminarMembretes},on:{click:function(t){return e.eliminarMembrete(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n              ")])])])]}))],2)])]),e._v(" "),e.cargando?t("div",{staticClass:"panel-body text-center"},[e._m(1)]):e._e()],1)],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Distribución")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Dimensiones (Px)")]),e._v(" "),t("th",{staticClass:"col-sm-1"},[e._v("Tamaño")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this._self._c;return e("h4",[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n      ")])}],!1,null,null,null).exports},9147:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:["id"],data:function(){return{registro:{tipo:"",placa:"",usuario_id:""},usuarios:[],validacionUsuario:!1}},mounted:function(){this.cargarDatos()},methods:{cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),this.validacionUsuario=!0,axios.get("/api/mensajeros/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar mensjaeros",a)})).then((function(){return e.$refs.cargando.alternar()}))),axios.get("/api/catalogos",{params:{catalogo:r.oH.USUARIOS}}).then((function(t){var a=t.data.data;e.validacionUsuario?e.usuarios=a:e.usuarios=a.filter((function(e){return"A"===e.estado}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar usuarios",a)}))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/mensajeros",a="post";"0"!==this.id&&(t="/api/mensajeros/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar el mensajero",a)}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/mensajeros"},regresar:function(){window.history.back()}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear mensajero":"Editar mensajero")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"sector_id"}},[e._v("Usuario")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"usuario_id",placeholder:"Seleccione...",options:e.usuarios,label:"nombre_completo",reduce:function(e){return e.id},selectable:function(e){return"A"===e.estado},required:""},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(a){var r=a.nombre_completo,o=a.estado;return[e._v("\n            "+e._s(r)+" "),"I"===o?t("span",{staticClass:"label label-danger",staticStyle:{"margin-left":"2px","margin-top":"-3px"}},[e._v("Inactivo")]):e._e()]}},{key:"option",fn:function(a){var r=a.nombre_completo,o=a.estado;return[e._v("\n            "+e._s(r)+" "),"I"===o?t("span",{staticClass:"label label-danger",staticStyle:{"margin-left":"2px"}},[e._v("Inactivo")]):e._e()]}}]),model:{value:e.registro.usuario_id,callback:function(t){e.$set(e.registro,"usuario_id",t)},expression:"registro.usuario_id"}})],1),e._v(" "),t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"direccion"}},[e._v("Tipo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tipo,expression:"registro.tipo"}],staticClass:"form-control input-sm",attrs:{id:"tipo",name:"tipo"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tipo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"Automóvil"}},[e._v("Automóvil")]),e._v(" "),t("option",{attrs:{value:"Camión"}},[e._v("Camión")]),e._v(" "),t("option",{attrs:{value:"Motocicleta"}},[e._v("Motocicleta")])])])]),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label",attrs:{for:"telefono"}},[e._v("Placa")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.placa,expression:"registro.placa"}],staticClass:"form-control input-sm",attrs:{id:"placa",name:"placa",type:"text",maxlength:"10"},domProps:{value:e.registro.placa},on:{input:function(t){t.target.composing||e.$set(e.registro,"placa",t.target.value)}}})])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},433:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{permisos:{},cargando:!1,cadenaBusqueda:"",mensajeros:[],paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0}}},mounted:function(){this.cargarDatos()},methods:{buscarMensajeros:function(){this.paginacion.paginaActual=1,this.cargarMensajeros()},cargarMensajeros:function(){var e=this;this.cargando=!0,this.mensajeros=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginacion.paginaActual};axios.get("/api/mensajeros",{params:t}).then((function(t){var a=t.data.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total,e.mensajeros=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar mensajeros",a)})).finally((function(){return e.cargando=!1}))},cargarDatos:function(){this.permisos=this.datos.permisos,this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginacion.paginaActual=1,this.cargarMensajeros()},editarMensajero:function(e){window.location.href="/mensajeros/"+e.id+"/edit"},desactivarMensajero:function(e){var t=this,a="A"===e.estado?"I":"A";axios.patch("/api/mensajeros/".concat(e.id,"/estado/").concat(a)).then((function(){t.cargarMensajeros(),t.$refs.alerta.ocultarAlertas(),t.mostrarExito("Mensajero <strong>"+e.usuario.nombre_completo+"</strong> actualizado exitosamente")})).catch((function(e){t.mensajeros=[];var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cambiar el estado del mensajero",a)}))},eliminarMensajero:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/mensajeros/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("Mensajero eliminado exitosamente")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al eliminar el mensajero",a)}))},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginacion.paginaActual=1,this.cargarMensajeros()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Mensajeros\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarMensajeros.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarMensajeros}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[e.$can("crear-mensajeros")?t("a",{staticClass:"btn btn-primary",attrs:{href:"/mensajeros/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")]):e._e()])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.mensajeros.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.mensajeros,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.usuario.nombre_completo)+"\n            "),"I"===a.estado?t("span",{staticClass:"label label-danger"},[e._v("Desactivado")]):e._e()]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.tipo)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.placa)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-mensajeros")},on:{click:function(t){return e.editarMensajero(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-mensajeros")},on:{click:function(t){return e.desactivarMensajero(a)}}},[t("i",{staticClass:"fas fa-lock fa-fw"}),e._v(" "),"A"===a.estado?[e._v("\n                Desactivar\n              ")]:[e._v("\n                Activar\n              ")]],2),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.$can("eliminar-mensajeros")},on:{click:function(t){return e.eliminarMensajero(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.mensajeros.length,tipo:"mensajeros"}}),e._v(" "),!e.cargando&&e.mensajeros.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarMensajeros,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Tipo")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Placa")]),e._v(" "),t("th",{staticClass:"col-md-3 text-center"})])])}],!1,null,null,null).exports},8602:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],data:function(){return{registro:{nombre:"",codigo:"",referencia_auxiliar:""}}},mounted:function(){this.cargarDatos()},methods:{cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/microorganismos/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar microorganismo!",a)})).then((function(){return e.$refs.cargando.alternar()})))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/microorganismos",a="post";"0"!==this.id&&(t="/api/microorganismos/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar microorganismo!",a)}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/microorganismos"},regresar:function(){window.history.back()}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear microorganismo":"Editar microorganismo")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"100",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"codigo"}},[e._v("Código")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.codigo,expression:"registro.codigo"}],staticClass:"form-control input-sm",attrs:{id:"codigo",name:"codigo",type:"text",maxlength:"5",required:""},domProps:{value:e.registro.codigo},on:{input:function(t){t.target.composing||e.$set(e.registro,"codigo",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label",attrs:{for:"referencia_auxiliar"}},[e._v("Referencia auxiliar")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.referencia_auxiliar,expression:"registro.referencia_auxiliar"}],staticClass:"form-control input-sm",attrs:{id:"referencia_auxiliar",name:"referencia_auxiliar",type:"text",maxlength:"60"},domProps:{value:e.registro.referencia_auxiliar},on:{input:function(t){t.target.composing||e.$set(e.registro,"referencia_auxiliar",t.target.value)}}})])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},5713:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{permisos:{},cargando:!1,paginaActual:1,totalRegistros:0,totalPaginas:0,cadenaBusqueda:"",microorganismos:[]}},mounted:function(){this.cargarDatos()},methods:{buscarMicroorganismos:function(){this.paginaActual=1,this.cargarMicroorganismos()},cargarMicroorganismos:function(){var e=this;this.cargando=!0,this.microorganismos=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginaActual};axios.get("/api/microorganismos",{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.microorganismos=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al listar microorganismos!",a)})).finally((function(){return e.cargando=!1}))},cargarDatos:function(){this.permisos=this.datos.permisos,this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginaActual=1,this.cargarMicroorganismos()},editarMicroorganismo:function(e){window.location.href="/microorganismos/"+e.id+"/edit"},eliminarMicroorganismo:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/microorganismos/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("¡Microorganismo eliminado exitosamente!")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar microorganismo!",a)}))},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginaActual=1,this.cargarMicroorganismos()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Microorganismos\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarMicroorganismos.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarMicroorganismos}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[t("a",{class:"btn btn-primary"+(e.permisos.crearMicroorganismos?"":" disabled"),attrs:{href:"/microorganismos/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")])])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.microorganismos.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.microorganismos,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left cortar-texto"},[e._v(e._s(a.codigo))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.permisos.editarMicroorganismos},on:{click:function(t){return e.editarMicroorganismo(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.permisos.eliminarMicroorganismos},on:{click:function(t){return e.eliminarMicroorganismo(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.microorganismos.length,tipo:"microorganismos"}}),e._v(" "),!e.cargando&&e.microorganismos.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarMicroorganismos,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-md-2 text-left"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-md-2 text-center"})])])}],!1,null,null,null).exports},2893:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:{id:{type:String,default:"buscarDocumentosModal"},tamanoPapelReporte:{required:!0},ordenId:{required:!0}},data:function(){return{cargando:!1,documentos:[],orden:{},detallesOrden:[]}},mounted:function(){var e=this;$("#buscarDocumentosModal").on("shown.bs.modal",(function(t){t.target.id===e.id&&e.ordenId&&e.cargarDocumentos(t.relatedTarget)})),$("#buscarDocumentosModal").on("hidden.bs.modal",(function(t){t.target.id===e.id&&e.ordenId&&(e.documentos=[])}))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDocumentos:function(e){var t=this;this.cargando=!0,this.orden=e.orden,axios.get("/api/ordenes/".concat(this.ordenId,"/documentos")).then((function(e){var a=e.data.data;t.documentos=a,t.documentos.push(r.Ah.CERTIFICADO_ASISTENCIA),t.documentos.sort()})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar los documentos",a),t.cargando=!1})).then((function(){return t.cargando=!1}))},cerrar:function(){this.orden=null,$("#buscarDocumentosModal").modal("hide")},abrirModalImprimir:function(e){var t=this;if(e===r.Ah.CERTIFICADO_EPIDEMIOLOGICO){axios.get("/api/ordenes/".concat(this.ordenId,"/detalles"),{params:{incluir:"examen,reportes.detallesReportes"}}).then((function(e){var a=e.data.data;t.detallesOrden=a,t.cargarModalCertificadoPcr()})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar el detalle de ordenes",a)}))}else{var a={registro:this.orden,tipoDocumento:e,tamanoPapel:this.tamanoPapelReporte};$("#modalImprimir").modal({backdrop:"static"},a),$("#buscarDocumentosModal").modal("hide")}},cargarModalCertificadoPcr:function(){var e={ordenId:this.ordenId?this.ordenId:"",detallesOrden:this.detallesOrden,destinatario:this.orden.paciente.correo};$("#modalCertificado").modal({backdrop:"static"},e),$("#buscarDocumentosModal").modal("hide")}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("\n            Documentos\n          ")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),!e.cargando&&e.documentos.length>0?t("div",{staticStyle:{height:"170px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("tbody",[e._l(e.documentos,(function(a){return[t("tr",[t("td",{staticClass:"col-sm-11 text-left"},[e._v(e._s(e._f("tipoDocumento")(a)))]),e._v(" "),t("td",{staticClass:"col-sm-1 text-right"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Generar documento"},on:{click:function(t){return e.abrirModalImprimir(a)}}},[t("i",{staticClass:"fas fa-file-export fa-fw"}),e._v("\n                      Generar\n                    ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.documentos.length,alto:"180px",tipo:"documentos"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")])])])])])])}),[],!1,null,null,null).exports},9107:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:{seleccionMultiple:{type:Boolean,default:!1},excluirIds:{type:Array,default:function(){return[]}},seRemite:{type:Boolean,default:!1}},data:function(){return{procesando:{cargarExamenes:!1,cargarSecciones:!1},filtros:{cadenaBusqueda:"",seccionId:""},examenes:[],secciones:[],paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0}}},mounted:function(){var e=this;$("#buscarExamen").on("hide.bs.modal",(function(t){"buscarExamen"===t.target.id&&(e.examenes=[],e.filtros.seccionId="",e.filtros.cadenaBusqueda="")})),$("#buscarExamen").on("show.bs.modal",(function(t){"buscarExamen"===t.target.id&&(e.examenes=[],e.filtros.seccionId="",e.filtros.cadenaBusqueda="",e.buscarExamenes())})),$("#buscarExamen").on("shown.bs.modal",(function(){return $("#cadenaBusquedaExamen").focus()}))},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.procesando.cargarExamenes=!0;var t={cadenaBusqueda:this.filtros.cadenaBusqueda,seccionId:this.filtros.seccionId,excluirIds:this.excluirIds,seRemite:this.seRemite,page:this.paginacion.paginaActual};axios.get("/api/examenes",{params:t}).then((function(t){var a=t.data.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total,e.examenes=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("Error al cargar exámenes",a)})).then((function(){return e.procesando.cargarExamenes=!1}))},buscarExamenes:function(){this.paginacion.paginaActual=1,this.cargarDatos()},borrarFiltros:function(){this.filtros.cadenaBusqueda="",this.filtros.seccionId="",this.buscarExamenes()},seleccionarExamen:function(e){this.$emit("examen-seleccionado",e),this.seleccionMultiple&&(this.excluirIds.push(e.id),this.buscarExamenes()),this.seleccionMultiple||$("#buscarExamen").modal("hide")},cargarSecciones:function(){var e=this;this.procesando.cargarSecciones=!0,axios.get("/api/catalogos",{params:{catalogo:r.oH.SECCIONES}}).then((function(t){var a=t.data;e.secciones=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Secciones",a)})).then((function(){return e.procesando.cargarSecciones=!1}))}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"buscarExamen",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Sección",options:e.secciones,label:"nombre",reduce:function(e){return e.id},loading:e.procesando.cargarSecciones},on:{open:e.cargarSecciones},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.filtros.seccionId,callback:function(t){e.$set(e.filtros,"seccionId",t)},expression:"filtros.seccionId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"cadenaBusquedaExamen",type:"text",placeholder:"Nombre ó codigo de examen"},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarExamenes.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.buscarExamenes}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),!e.procesando.cargarExamenes&&e.examenes.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[e._l(e.examenes,(function(a){return[t("tr",{staticClass:"puntero",on:{dblclick:function(t){return e.seleccionarExamen(a)}}},[t("td",[e._v(e._s(a.codigo))]),e._v(" "),t("td",[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:function(t){return e.seleccionarExamen(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.cargarExamenes,cantidad:e.examenes.length,tipo:"exámenes"}}),e._v(" "),e.examenes.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarDatos,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1)])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n          ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Exámenes")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-3"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-sm-8"},[e._v("Nombre")]),e._v(" "),t("th")])])}],!1,null,null,null).exports},6714:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{id:{type:String,default:"modalBuscarMedico"}},data:function(){return{cargando:!1,cadenaBusqueda:"",medicos:[],paginaActual:1,totalRegistros:0,totalPaginas:0}},mounted:function(){var e=this;this.atajoTecladoCadenaBusqueda("cadenaBusquedaMedico"),$("#"+this.id).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.medicos=[],e.cadenaBusqueda="",e.ocultarMensajesBuscarMedico())})),$("#"+this.id).on("show.bs.modal",(function(t){if(t.target.id===e.id){if(e.medicos=[],e.cadenaBusqueda="",e.ocultarMensajesBuscarMedico(),!(t.relatedTarget instanceof HTMLElement)&&t.relatedTarget){var a=t.relatedTarget;e.cadenaBusqueda=a.cadenaBusqueda}e.buscarMedicos()}})),$("#"+this.id).on("shown.bs.modal",(function(){return $("#cadenaBusquedaMedico").focus()}))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},buscarMedicos:function(){this.paginaActual=1,this.cargarMedicos()},cargarMedicos:function(){var e=this;this.cargando=!0;var t={page:this.paginaActual,cadenaBusqueda:this.cadenaBusqueda};axios.get("/api/medicos",{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.medicos=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar médicos!",a)})).then((function(){return e.cargando=!1}))},limpiarCadenaBusqueda:function(){this.cadenaBusqueda="",this.ocultarMensajesBuscarMedico(),this.paginaActual=1,this.cargarMedicos()},ocultarMensajesBuscarMedico:function(){this.$refs.alerta.ocultarAlertas()},seleccionarMedico:function(e){this.$emit("medico-seleccionado",e),$("#"+this.id).modal("hide")}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"cadenaBusquedaMedico",type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarMedicos.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.buscarMedicos}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),!e.cargando&&e.medicos.length>0?t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(1),e._v(" "),t("tbody",[e._l(e.medicos,(function(a){return[t("tr",{staticClass:"puntero",on:{dblclick:function(t){return e.seleccionarMedico(a)}}},[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre_completo))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.referencia_auxiliar?a.referencia_auxiliar:"-"))]),e._v(" "),t("td",{staticClass:"col-sm-1 text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Seleccionar médico"},on:{click:function(t){return e.seleccionarMedico(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.medicos.length,tipo:"médicos"}}),e._v(" "),!e.cargando&&e.medicos.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-range":4,"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarMedicos,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1)])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Médicos")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-5 text-left"},[e._v("Referencia A.")]),e._v(" "),t("th")])])}],!1,null,null,null).exports},2047:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(4590),o=a(2534),i=a(9676);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={components:{SelectMedico:o.Z,BuscarPacienteModal:i.Z},props:{id:{type:String,default:"modalBuscarOrdenes"},ordenesIds:{type:Array,default:function(){return[]}},top:{type:Number,default:0},sistemaFacturaId:{type:Number,default:void 0},mostrarFiltros:{type:Array,default:function(){return[]}},estado:{type:String,default:null},estadosDetalles:{type:Array,default:function(){return[]}},rangoDias:{type:Number,default:null},sectorId:{type:Number,default:void 0},ordenesIdsExcluir:{type:Array,default:function(){return[]}},opcion:{type:String,default:null},sucursalSeleccionada:{type:Boolean,default:!0}},data:function(){return{paginaActual:1,totalRegistros:0,totalPaginas:0,cantidadOrdenes:0,empresas:[],medicos:[],sucursales:[],muestras:[],cargandoOrdenes:!1,ordenesEncontradas:[],ordenesIdsSeleccionados:[],seleccionadoTodos:"",filtros:{sistemaFacturaId:"",empresaId:"",subempresaId:"",sucursalId:"",muestraId:"",medico:"",fechaDesde:"",fechaHasta:"",numeroOrden:"",numeroOrdenHasta:"",pacienteId:"",pacienteNombre:"",pacienteType:"",soloIds:"",ordenesIdsAExcluir:[]}}},mounted:function(){var e=this;$("#".concat(this.id)).on("show.bs.modal",(function(t){t.target.id===e.id&&(e.filtros.pacienteNombre="",e.filtros.sistemaFacturaId=e.sistemaFacturaId,e.cargarDatos())})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&e.limpiarFormulario()}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},ocultarMensajes:function(){this.$refs.alerta.ocultarAlertas()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;_.isEmpty(this.sucursales)&&this.mostrarFiltro("sucursal")?axios.get("/api/catalogos",{params:{catalogo:r.oH.SUCURSALES}}).then((function(t){e.sucursales=t.data.data,e.sucursalSeleccionada?e.filtros.sucursalId=e.$usuario.sucursalId:e.$can("cambiar-sucursal")||(e.filtros.sucursalId=e.$usuario.sucursalId)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar sucursales",a)})):this.sucursalSeleccionada?this.filtros.sucursalId=this.$usuario.sucursalId:this.$can("cambiar-sucursal")||(this.filtros.sucursalId=this.$usuario.sucursalId),_.isEmpty(this.empresas)&&this.mostrarFiltro("cliente")?axios.get("/api/catalogos",{params:{catalogo:r.oH.CLIENTES}}).then((function(t){e.empresas=t.data.data,e.$can("cambiar-empresas")||(e.filtros.empresaId=e.$usuario.empresaId)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Clientes!",a)})):this.$can("cambiar-empresas")||(this.filtros.empresaId=this.$usuario.empresaId),_.isEmpty(this.medicos)&&this.mostrarFiltro("medico")&&axios.get("/api/catalogos",{params:{catalogo:r.oH.MEDICOS}}).then((function(t){e.medicos=t.data.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Médicos!",a)})),_.isEmpty(this.muestras)&&this.mostrarFiltro("muestra")&&axios.get("/api/catalogos",{params:{catalogo:r.oH.MUESTRAS}}).then((function(t){e.muestras=t.data.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Muestras!",a)}))},agregar:function(){if(_.isEmpty(this.ordenesIdsSeleccionados))this.mostrarAdvertencia("¡No se ha seleccionado ningun registro!");else{var e=this.ordenesIds.concat(this.ordenesIdsSeleccionados);this.$emit("ordenes-seleccionadas",{ordenesIds:e}),$("#".concat(this.id)).modal("hide")}},seleccionarTodos:function(){var e=this;if(0!==this.ordenesEncontradas.length)if(this.seleccionadoTodos)this.ocultarMensajes(),this.ordenesEncontradas.forEach((function(e){return e.seleccionado=!1})),this.seleccionadoTodos=!1,this.ordenesIdsSeleccionados=[],this.cantidadOrdenes=this.ordenesIdsSeleccionados.length;else{var t=$.extend({},this.filtros);t.soloIds=1,t.sectorId=this.sectorId,t.opcion=this.opcion,t.estado=this.estado,t.estadosDetalles=this.estadosDetalles,this.cargandoOrdenes=!0,_.isEmpty(this.ordenesIdsExcluir)?t.ordenesIdsAExcluir=this.ordenesIds:t.ordenesIdsAExcluir=this.ordenesIds.concat(this.ordenesIdsExcluir),axios.get("/api/ordenes/buscar",{params:t}).then((function(t){var a=t.data.data;e.ordenesIdsSeleccionados=a.map((function(e){return e.id})),e.cantidadOrdenes=e.ordenesIdsSeleccionados.length,e.ordenesEncontradas.forEach((function(e){return e.seleccionado=!0})),e.seleccionadoTodos=!0})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al seleccionar todos",a)})).then((function(){return e.cargandoOrdenes=!1}))}},seleccionarOrden:function(e){if(e.seleccionado){var t=this.ordenesIdsSeleccionados.indexOf(e.id);this.ordenesIdsSeleccionados.splice(t,1),this.seleccionadoTodos=!1}else this.ordenesIdsSeleccionados.includes(e.id)||this.ordenesIdsSeleccionados.push(e.id);this.cantidadOrdenes=this.ordenesIdsSeleccionados.length,e.seleccionado=!e.seleccionado,this.cantidadOrdenes===this.totalRegistros&&(this.seleccionadoTodos=!0)},buscar:function(){if(this.rangoDias){var e=moment(this.filtros.fechaHasta).diff(this.filtros.fechaDesde,"days");if(isNaN(e)||e+1>this.rangoDias){var t=this.rangoDias>1?"días":"día";return void this.mostrarErrores("Rango de fechas superior a ".concat(this.rangoDias," ").concat(t))}}this.cantidadOrdenes=0,this.ordenesIdsSeleccionados=[],this.seleccionadoTodos=!1,this.filtros.numeroOrden||(this.filtros.numeroOrdenHasta=""),this.paginaActual=1,this.buscarOrdenes()},buscarOrdenes:function(){var e=this;this.cargandoOrdenes=!0;var t=n(n({},this.filtros),{},{page:this.paginaActual,incluir:"sucursal,paciente",estado:this.estado});_.isEmpty(this.ordenesIdsExcluir)?t.ordenesIdsAExcluir=this.ordenesIds:t.ordenesIdsAExcluir=this.ordenesIds.concat(this.ordenesIdsExcluir),t.pacienteNombre=null,t.soloIds="",t.sectorId=this.sectorId,t.opcion=this.opcion,null===t.sistemaFacturaId&&(t.sistemaFacturaId=0),axios.get("/api/ordenes/buscar",{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.ordenesEncontradas=a.data.map((function(t){return{id:t.id,numero_orden:t.numero_orden,fecha_orden:t.fecha_orden,estado:t.estado,valor_descuento:t.valor_descuento,valor_total:t.valor_total,seleccionado:e.ordenesIdsSeleccionados.includes(t.id),paciente:{tipo_identificacion:t.paciente.tipo_identificacion,numero_identificacion:t.paciente.numero_identificacion,nombre_paciente:t.paciente.nombre_paciente},sucursal:{nombre:t.sucursal.nombre},detalles:[]}})),e.seleccionadoTodos&&e.ordenesEncontradas.forEach((function(t){t.seleccionado=e.seleccionadoTodos}))})).catch((function(t){e.totalRegistros=0;var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar órdenes!",a)})).then((function(){return e.cargandoOrdenes=!1}))},limpiarFormulario:function(){this.$can("cambiar-sucursal")&&this.mostrarFiltro("sucursal")&&(this.filtros.sucursalId=""),this.$can("cambiar-empresas")&&(this.filtros.empresaId=""),this.filtros.subempresaId="",this.filtros.medicoId="",this.filtros.muestraId="",this.filtros.fechaDesde="",this.filtros.fechaHasta="",this.filtros.numeroOrden="",this.filtros.numeroOrdenHasta="",this.filtros.pacienteId="",this.filtros.pacienteNombre="",this.filtros.pacienteType="",this.ordenesEncontradas=[],this.seleccionadoTodos=!1,this.ordenesIdsSeleccionados=[],this.cantidadOrdenes=0,this.totalPaginas=0,this.totalRegistros=0,this.ocultarMensajes()},pacienteSeleccionado:function(e){e&&(this.filtros.pacienteId=e.id,this.filtros.pacienteNombre=e.nombre_paciente,this.filtros.pacienteType=e.tipo)},limpiarPaciente:function(){this.filtros.pacienteId="",this.filtros.pacienteNombre="",this.filtros.pacienteType=""},mostrarFiltro:function(e){return void 0!==this.mostrarFiltros.find((function(t){return t===e}))},cambioSucursal:function(){this.filtros.sucursalId||(this.filtros.numeroOrdenHasta="")}},computed:{subempresas:function(){var e=this;if(this.filtros.empresaId&&this.empresas.find((function(t){return t.id===e.filtros.empresaId}))){var t=this.empresas.find((function(t){return t.id===e.filtros.empresaId})).subempresas,a=t.find((function(e){return e.predeterminada}));return this.filtros.subempresaId=a?a.id:"",t}return this.filtros.subempresaId="",[]},puedeBuscar:function(){return this.filtros.empresaId||this.filtros.subempresaId||this.filtros.fechaDesde||this.filtros.fechaHasta||this.filtros.sucursalId||this.filtros.medicoId||this.filtros.muestraId||this.filtros.numeroOrden||this.filtros.pacienteId},puedeAgregar:function(){return this.ordenesIdsSeleccionados.length>0},etiquetaSeleccionados:function(){return this.ordenesIdsSeleccionados.length>1?"seleccionadas":"seleccionada"},etiquetaOrden:function(){return this.mostrarFiltro("orden")&&this.mostrarFiltro("ordenFinal")?"No. Orden desde":"No. Orden "},idBuscarPaciente:function(){return"".concat(this.id,"BuscarPaciente")},estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""}}};const d=(0,a(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("form",{on:{submit:function(t){return t.preventDefault(),e.agregar.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"".concat(this.id,"FechaDesde")}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[e.mostrarFiltro("fechaDesde")?t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaDesde,expression:"filtros.fechaDesde"}],staticClass:"form-control input-sm",attrs:{id:"".concat(this.id,"FechaDesde"),name:"fechaDesde",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}}):e._e(),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),e.mostrarFiltro("fechaHasta")?t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaHasta,expression:"filtros.fechaHasta"}],staticClass:"form-control input-sm",attrs:{id:"".concat(this.id,"FechaHasta"),name:"fechaHasta",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}}):e._e()])]),e._v(" "),e.mostrarFiltro("sucursal")?t("div",{staticClass:"col-md-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"".concat(this.id,"Sucursales")}},[e._v("Sucursal")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"".concat(this.id,"Sucursales"),placeholder:"Seleccione...",label:"nombre",options:e.sucursales,reduce:function(e){return e.id},disabled:!e.$can("cambiar-sucursal")},on:{input:e.cambioSucursal},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!1,2639475694),model:{value:e.filtros.sucursalId,callback:function(t){e.$set(e.filtros,"sucursalId",t)},expression:"filtros.sucursalId"}})],1):e._e(),e._v(" "),e.mostrarFiltro("cliente")?t("div",{staticClass:"col-md-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"".concat(this.id,"Empresas")}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"".concat(this.id,"Empresas"),placeholder:"Seleccione...",options:e.empresas,reduce:function(e){return e.id},disabled:!e.$can("cambiar-empresas"),label:"nombre"},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!1,2639475694),model:{value:e.filtros.empresaId,callback:function(t){e.$set(e.filtros,"empresaId",t)},expression:"filtros.empresaId"}})],1):e._e(),e._v(" "),e.mostrarFiltro("categoria")?t("div",{staticClass:"col-md-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"".concat(this.id,"Subempresas")}},[e._v("Categoría")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"".concat(this.id,"Subempresas"),placeholder:"Seleccione...",options:e.subempresas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!1,2639475694),model:{value:e.filtros.subempresaId,callback:function(t){e.$set(e.filtros,"subempresaId",t)},expression:"filtros.subempresaId"}})],1):e._e(),e._v(" "),e.mostrarFiltro("medico")?t("div",{staticClass:"col-md-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"".concat(this.id,"Medico")}},[e._v("Médico")]),e._v(" "),t("select-medico",{attrs:{id:"".concat(this.id,"Medico"),catalogo:"MEDICOS",etiqueta:"nombre_completo"},model:{value:e.filtros.medicoId,callback:function(t){e.$set(e.filtros,"medicoId",t)},expression:"filtros.medicoId"}})],1):e._e(),e._v(" "),e.mostrarFiltro("muestra")?t("div",{staticClass:"col-md-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"".concat(this.id,"Muestras")}},[e._v("Muestra")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"".concat(this.id,"Muestras"),placeholder:"Seleccione...",options:e.muestras,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!1,2639475694),model:{value:e.filtros.muestraId,callback:function(t){e.$set(e.filtros,"muestraId",t)},expression:"filtros.muestraId"}})],1):e._e(),e._v(" "),e.mostrarFiltro("paciente")?t("div",{staticClass:"col-md-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"".concat(this.id,"Paciente")}},[e._v("Paciente")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.pacienteNombre,expression:"filtros.pacienteNombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"".concat(this.id,"Paciente"),maxlength:"15",disabled:""},domProps:{value:e.filtros.pacienteNombre},on:{input:function(t){t.target.composing||e.$set(e.filtros,"pacienteNombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#".concat(e.idBuscarPaciente),title:"Buscar"}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarPaciente}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]):e._e(),e._v(" "),e.mostrarFiltro("numeroOrden")?t("div",{staticClass:"col-md-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"".concat(this.id,"NumeroOrden")}},[e._v(e._s(this.etiquetaOrden))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroOrden,expression:"filtros.numeroOrden"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"".concat(this.id,"NumeroOrden")},domProps:{value:e.filtros.numeroOrden},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numeroOrden",t.target.value)}}})]):e._e(),e._v(" "),e.mostrarFiltro("numeroOrdenFinal")?t("div",{staticClass:"col-md-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"".concat(this.id,"NumeroOrdenHasta")}},[e._v("No. Orden hasta")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroOrdenHasta,expression:"filtros.numeroOrdenHasta"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"".concat(this.id,"NumeroOrdenHasta"),disabled:!(e.filtros.numeroOrden&&e.filtros.sucursalId)},domProps:{value:e.filtros.numeroOrdenHasta},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numeroOrdenHasta",t.target.value)}}})]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-2 form-group pull-right text-right"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Borrar filtros"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times"})]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",disabled:!e.puedeBuscar},on:{click:e.buscar}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}}),e._v(" Buscar\n                ")])])]),e._v(" "),!e.cargandoOrdenes&&e.ordenesEncontradas.length>0?t("div",{staticStyle:{height:"270px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center puntero",on:{click:e.seleccionarTodos}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.seleccionadoTodos,expression:"seleccionadoTodos"}],staticClass:"puntero",attrs:{type:"checkbox",disabled:0===this.ordenesEncontradas.length,title:"Seleccionar todas las órdenes"},domProps:{checked:Array.isArray(e.seleccionadoTodos)?e._i(e.seleccionadoTodos,null)>-1:e.seleccionadoTodos},on:{change:function(t){var a=e.seleccionadoTodos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.seleccionadoTodos=a.concat([null])):i>-1&&(e.seleccionadoTodos=a.slice(0,i).concat(a.slice(i+1)))}else e.seleccionadoTodos=o}}})]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Sucursal")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Descuento")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor")])])]),e._v(" "),t("tbody",[e._l(e.ordenesEncontradas,(function(a){return[t("tr",{staticClass:"puntero",on:{click:function(t){return e.seleccionarOrden(a)}}},[t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.seleccionado,expression:"orden.seleccionado"}],staticClass:"puntero",attrs:{type:"checkbox",title:"Seleccionar orden"},domProps:{checked:Array.isArray(a.seleccionado)?e._i(a.seleccionado,null)>-1:a.seleccionado},on:{change:function(t){var r=a.seleccionado,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"seleccionado",r.concat([null])):s>-1&&e.$set(a,"seleccionado",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"seleccionado",i)}}})]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.sucursal.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_orden,"YYYY-MM-DD </br> HH:mm"))}}),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoOrden")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n                      "+e._s(e._f("moneda")(a.valor_descuento))+"\n                    ")]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.valor_total)))])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoOrdenes,cantidad:e.ordenesEncontradas.length,tipo:"órdenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.ordenesEncontradas.length>0,expression:"ordenesEncontradas.length > 0"}],staticClass:"pull-left"},[t("output",{staticClass:"pull-right",staticStyle:{"margin-left":"10px"}},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros)+"\n              ")]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-range":6,"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.buscarOrdenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.ordenesIdsSeleccionados.length>0,expression:"ordenesIdsSeleccionados.length > 0"}],staticClass:"badge",attrs:{id:"contadorOrdenes"}},[e._v("\n              "+e._s(e.ordenesIdsSeleccionados.length)+" "+e._s(e.etiquetaSeleccionados)+"\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:!e.puedeAgregar}},[e._v("\n               Agregar\n            ")])])])])])]),e._v(" "),t("buscar-paciente-modal",{attrs:{id:e.idBuscarPaciente,top:22},on:{"paciente-seleccionado":e.pacienteSeleccionado}})],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Buscar órdenes")])])}],!1,null,null,null).exports},9676:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{id:{type:String,default:"buscarPaciente"},top:{type:Number,default:0}},data:function(){return{cargandoPacientes:!1,cadenaBusqueda:"",pacientes:[],count:0,pagina:1,totalRegistros:0}},mounted:function(){var e=this;$("#"+this.id).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.pacientes=[],e.ocultarMensajesBusquedaPaciente())})),$("#"+this.id).on("show.bs.modal",(function(t){t.target.id===e.id&&(e.cadenaBusqueda=$(t.relatedTarget).data("cadenaBusqueda"),e.pacientes=[],e.ocultarMensajesBusquedaPaciente(),e.cargarPacientes(1))})),$("#".concat(this.id)).on("shown.bs.modal",(function(){return $("#".concat(e.id,"CadenaBusquedaPaciente")).focus()}))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},buscarPacientes:function(){this.cargarPacientes(1)},cargarPacientes:function(e){var t=this;this.cargandoPacientes=!0,this.pagina=e;var a={page:this.pagina,cadenaBusqueda:this.cadenaBusqueda};axios.get("/api/pacientes",{params:a}).then((function(e){var a=e.data.data;t.count=a.last_page,t.totalRegistros=a.total,t.pacientes=a.data})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al cargar pacientes!",a)})).then((function(){return t.cargandoPacientes=!1}))},limpiarCadenaBusqueda:function(){this.cadenaBusqueda="",this.ocultarMensajesBusquedaPaciente(),this.cargarPacientes(1)},ocultarMensajesBusquedaPaciente:function(){this.$refs.alerta.ocultarAlertas()},seleccionarPaciente:function(e){this.$emit("paciente-seleccionado",e),$("#"+this.id).modal("toggle")},nombrePaciente:function(e){var t=e.nombre_paciente;if(!e.tipo.includes("Humano")&&(e.nombres||e.apellidos)){var a=[e.apellidos,e.nombres].filter(Boolean).join(" ");a&&(t="".concat(t," (").concat(a,")"))}return t},historiaClinica:function(e){if(this.$usuario.sistemaHisId){var t={es_humano:e.es_humano,es_animal:e.es_animal,es_objeto:e.es_objeto,paciente:{historia_clinica:e.historia_clinica,numero_historia_clinica:e.numero_historia_clinica}};return this.obtenerNumeroHistoriaClinica(t,this.$usuario.sistemaHisId)}return e.numero_historia_clinica}},computed:{estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"".concat(e.id,"CadenaBusquedaPaciente"),type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarPacientes.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.buscarPacientes}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),!e.cargandoPacientes&&e.pacientes.length>0?t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(1),e._v(" "),t("tbody",[e._l(e.pacientes,(function(a){return[t("tr",{staticClass:"puntero",on:{dblclick:function(t){return e.seleccionarPaciente(a)}}},[t("td",{staticClass:"text-center"},[t("i",{directives:[{name:"show",rawName:"v-show",value:a.tipo.includes("Humano"),expression:"paciente.tipo.includes('Humano')"}],staticClass:"fas fa-user fa-lg",attrs:{title:"Humano","data-toggle":"tooltip"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.tipo.includes("Animal"),expression:"paciente.tipo.includes('Animal')"}],staticClass:"fas fa-paw fa-lg",attrs:{title:"Animal","data-toggle":"tooltip"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.tipo.includes("Objeto"),expression:"paciente.tipo.includes('Objeto')"}],staticClass:"fas fa-flask fa-lg",attrs:{title:"Objeto","data-toggle":"tooltip"}})]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_identificacion))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n                  "+e._s(e.nombrePaciente(a))+"\n                ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.historiaClinica(a)))]),e._v(" "),t("td",{staticClass:"col-sm-1 text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Seleccionar paciente"},on:{click:function(t){return e.seleccionarPaciente(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoPacientes,cantidad:e.pacientes.length,tipo:"pacientes"}}),e._v(" "),e.pacientes.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.count>1?t("paginate",{staticClass:"pull-right",attrs:{"page-range":4,"page-count":e.count,"container-class":"pagination","click-handler":e.cargarPacientes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.pagina,callback:function(t){e.pagina=t},expression:"pagina"}}):e._e()],1):e._e()],1)])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Pacientes")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"}),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Identificación")]),e._v(" "),t("th",{staticClass:"col-sm-6 text-left"},[e._v("Nombres")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("HC")]),e._v(" "),t("th")])])}],!1,null,null,null).exports},9652:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const r={props:{id:{type:String,default:"modalVerRecibo"},top:{type:Number,default:0},reciboId:{type:null|Number,default:null}},data:function(){return{cargandoRecibo:!1,registro:{numero:"",fecha:"",concepto:"",observacion:"",estado:"",detalle:{},extras:{},ordenes:{}}}},mounted:function(){var e=this;$("#".concat(this.id)).on("shown.bs.modal",(function(t){t.target.id===e.id&&(e.registro=[],e.cargarRecibo())})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.registro=[])}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarRecibo:function(){var e=this;this.cargandoRecibo=!0,axios.get("/api/recibos/".concat(this.reciboId)).then((function(t){var a=t.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar el recibo",a)})).finally((function(){return e.cargandoRecibo=!1}))}},computed:{estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""}}};var o=a(1900);const i=(0,o.Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade modal-nivel-multiple",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Recibo No. "),t("strong",[e._v(e._s(e.reciboId))])])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),e.cargandoRecibo?e._e():t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Número")]),e._v(" "),t("div",[e._v("\n                "+e._s(e.registro.numero)+"\n              ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha")]),e._v(" "),t("div",[e._v("\n                "+e._s(e.registro.fecha)+"\n              ")])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Concepto")]),e._v(" "),t("div",[e._v("\n                "+e._s(e.registro.concepto)+"\n              ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("div",[e._v("\n                "+e._s(e._f("estadoRecibo")(e.registro.estado))+"\n              ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label"},[e._v("Observación")]),e._v(" "),t("div",[e._v("\n                "+e._s(e.registro.observacion)+"\n              ")])])]),e._v(" "),t("legend",[e._v("Detalle")]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[e._l(e.registro.detalles,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(e._f("formaPago")(a.forma_pago)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.valor))])])]}))],2)]),e._v(" "),e.registro.extras?t("div",[t("legend",[e._v("Órdenes")]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(2),e._v(" "),t("tbody",[e._l(e.registro.ordenes,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(a.fecha_orden))]),e._v(" "),t("td",{staticClass:"text-left hidden-xs"},[t("small",{attrs:{title:"Cliente",rel:"tooltip"}},[e._v("\n                      "+e._s(a.subempresa.empresa.nombre)+"\n                      "+e._s(a.subempresa.empresa.nombre!==a.subempresa.nombre?"(".concat(a.subempresa.nombre,")"):"")+"\n                    ")])]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.valor_total)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.valor_total_abonos)))])])]}))],2)])]):e._e()]),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoRecibo,cantidad:e.registro.length,alto:"210px",tipo:"recibo"}})],1),e._v(" "),e._m(3)])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Forma de pago")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("valor")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Cliente")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Abono")])])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Cerrar")])])}],!1,null,null,null).exports,s={props:{id:{type:String,default:"modalBuscarRecibo"},top:{type:Number,default:0},seleccionable:{type:Boolean,default:!1},destinoRutaId:{type:null|Number,default:null},empresaId:{type:null|Number,default:null}},components:{VerReciboModal:i},data:function(){return{cargandoRecibos:!1,recibos:[],paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0},reciboId:""}},mounted:function(){var e=this;$("#".concat(this.id)).on("shown.bs.modal",(function(t){t.target.id===e.id&&(e.recibos=[],e.cargarRecibos())})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.recibos=[])}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarRecibos:function(){var e=this;this.cargandoRecibos=!0;var t={page:this.paginacion.paginaActual,destinoRutaId:this.destinoRutaId,empresaId:this.empresaId};axios.get("/api/recibos",{params:t}).then((function(t){var a=t.data.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total,e.recibos=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar los recibos",a)})).finally((function(){return e.cargandoRecibos=!1}))},selecionarRecibo:function(e){this.$emit("recibo-seleccionado",{recibo:e}),$("#".concat(this.id)).modal("hide")},verDetalleRecibo:function(e){this.reciboId=e.id,$("#modalVerRecibo").modal({backdrop:"static"})}},computed:{estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""}}};const n=(0,o.Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade modal-nivel-multiple",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),!e.cargandoRecibos&&e.recibos.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[e._l(e.recibos,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.numero))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.fecha))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.concepto))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.observacion))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(e._f("estadoRecibo")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-center"},[e.seleccionable&&"GENERADO"===a.estado?t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Seleccionar recibo"},on:{click:function(t){return e.selecionarRecibo(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"})]):e._e(),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Seleccionar recibo"},on:{click:function(t){return e.verDetalleRecibo(a)}}},[t("i",{staticClass:"fas fa-eye fa-fw"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoRecibos,cantidad:e.recibos.length,alto:"210px",tipo:"recibos"}}),e._v(" "),!e.cargandoRecibos&&e.recibos.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarRecibos,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1)])])]),e._v(" "),t("ver-recibo-modal",{attrs:{reciboId:e.reciboId,top:20}})],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Recibos")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Número")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-3"},[e._v("Concepto")]),e._v(" "),t("th",{},[e._v("Observación")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1"})])])}],!1,null,null,null).exports},9794:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:{id:{type:String,default:"buscarUsuario"}},data:function(){return{cargando:!1,cadenaBusqueda:"",usuarios:[]}},mounted:function(){var e=this;$("#"+this.id).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.usuarios=[],e.cadenaBusqueda="")})),$("#"+this.id).on("show.bs.modal",(function(t){t.target.id===e.id&&(e.usuarios=[],e.cadenaBusqueda="",e.cargarUsuarios())})),$("#".concat(this.id)).on("shown.bs.modal",(function(){return $("#cadenaBusquedaUsuario").focus()}))},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarUsuarios:function(){var e=this;this.cargando=!0,axios.get("/api/catalogos",{params:{catalogo:r.oH.USUARIOS,soloActivos:!0}}).then((function(t){var a=t.data;e.usuarios=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar Usuarios"),e.mostrarError(a)})).then((function(){return e.cargando=!1}))},limpiarCadenaBusqueda:function(){this.cadenaBusqueda=""},seleccionarUsuario:function(e){this.$emit("usuario-seleccionado",e),$("#"+this.id).modal("hide")}},computed:{usuariosFiltrados:function(){var e=this;return this.usuarios.length>0?this.usuarios.filter((function(t){var a=new RegExp(removeDiacritics(e.cadenaBusqueda),"i");return a.test(removeDiacritics(t.nombre_usuario))||a.test(removeDiacritics(t.nombre_completo))})):this.usuarios}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("alerta",{ref:"alerta"}),e._v(" "),e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"cadenaBusquedaUsuario",type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.cargando&&e.usuarios.length>0,expression:"!cargando && usuarios.length>0"}],staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[e._l(e.usuariosFiltrados,(function(a){return[t("tr",{staticClass:"puntero",on:{dblclick:function(t){return e.seleccionarUsuario(a)}}},[t("td",{staticClass:"text-center"},[e._v(e._s(a.nombre_usuario))]),e._v(" "),t("td",[e._v(e._s(a.nombre_completo))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:function(t){return e.seleccionarUsuario(a)}}},[t("i",{staticClass:"fas fa-check"})])])])]}))],2)])]),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.usuarios.length,tipo:"usuarios"}})],1)],1)])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n          ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Usuarios")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-3 text-center"},[e._v("Usuario")]),e._v(" "),t("th",{staticClass:"col-sm-7"},[e._v("Nombre")]),e._v(" "),t("th")])])}],!1,null,null,null).exports},2446:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const s={components:{DatosOrden:a(6570).Z},props:{actualizarDatos:{type:Boolean,default:!1}},data:function(){return{procesando:!1,esMedico:!1,formaEntrega:"",orden:{},destinatario:"",lang:"",whatsappDesktop:"",detallesOrdenes:[],detallesOrdenesSeleccionados:[],estadoEntrega:{destinatario:"",cantidad:0,minutos:0}}},mounted:function(){var e=this;$("#entregarResultadosModal").on("show.bs.modal",(function(t){e.formaEntrega=$(t.relatedTarget).data("forma-entrega"),e.orden=$(t.relatedTarget).data("orden"),e.destinatario=$(t.relatedTarget).data("destinatario");var a=$(t.relatedTarget).data("es-medico");e.esMedico=a||!1;var r=$(t.relatedTarget).data("detalles-ordenes");e.detallesOrdenes=r||[],e.verificarEntregaPorDestinatario(),e.esWhatsApp&&(e.whatsappDesktop="true"===localStorage.getItem("whatsapp-desktop"))})),$("#entregarResultadosModal").on("hide.bs.modal",(function(t){e.formaEntrega="",e.orden={},e.destinatario="",e.lang="",e.detallesOrdenes=[],e.detallesOrdenesSeleccionados=[],e.estadoEntrega.destinatario="",e.estadoEntrega.cantidad=0,e.estadoEntrega.minutos=0}))},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},enviar:function(){this.procesando=!0,this.motivoDestinatarioInvalido?this.mostrarErrores("Error",this.motivoDestinatarioInvalido):(this.esCorreo&&this.enviarCorreo(),this.esWhatsApp&&this.enviarWhatsApp())},enviarCorreo:function(){var e=this,t=this.lang?"lang=".concat(this.lang,"&"):"";axios.post("/api/entregas/resultados/".concat(this.orden.id,"/correo?").concat(t,"actualizarDatos=").concat(this.actualizarDatos,"&").concat(this.detallesOrdenesSeleccionadosParaEnviarQueryString)).then((function(t){var a=t.data.data;e.$emit("correo-electronico-enviado",a),$("#entregarResultadosModal").modal("toggle")})).catch((function(t){if(!t.response)return console.error("Error al enviar resultados",t.response),void e.mostrarErrores("Error al enviar resultados");var a=t.response.data;if("WARNING"===a.type)e.mostrarAdvertencia(a.messages);else{var r=e.procesarErrorResponse(t);e.mostrarErrores("Error al enviar resultados",r)}})).then((function(){return e.procesando=!1}))},enviarWhatsApp:function(){var e=this,t={lang:this.lang,telefonoCelular:this.destinatario};axios.get("/api/entregas/resultados/".concat(this.orden.id,"/whatsapp"),{params:t}).then((function(t){var a=t.data.data;if(e.whatsappDesktop)return window.location="whatsapp://send?phone=".concat(a.destinatario,"&text=").concat(a.textoMensaje),e.$emit("whatsapp-enviado",a.orden),void $("#entregarResultadosModal").modal("toggle");var r="https://wa.me/".concat(a.destinatario,"/?text=").concat(a.textoMensaje);window.open(r,"_blank","height=600,width=900,left=20,top=29,scrollbars=no,menubar=no"),e.$emit("whatsapp-enviado",a.orden),$("#entregarResultadosModal").modal("toggle")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al enviar WhatsApp",a)})).then((function(){return e.procesando=!1}))},verificarEntregaPorDestinatario:function(){var e=this;if(!this.esWhatsApp){var t={destinatario:this.destinatario,numeroOrden:this.orden.numero_orden};axios.get("/api/entregas/verificar",{params:t}).then((function(t){var a=t.data.data;e.estadoEntrega=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al verificar entregas",a)})).then((function(){}))}},langClick:function(e){this.lang===e.target.value&&(this.lang="")},cambioWhatsAppDesktop:function(e){e.target.checked?localStorage.setItem("whatsapp-desktop",e.target.checked):localStorage.removeItem("whatsapp-desktop")}},computed:{detallesOrdenesSeleccionadosParaEnviarQueryString:function(){return this.detallesOrdenesSeleccionados.length>0?"seleccionados[]="+this.detallesOrdenesSeleccionados.join("&seleccionados[]="):""},esCorreo:function(){return"CORREO"===this.formaEntrega},esWhatsApp:function(){return"WHATSAPP"===this.formaEntrega},titulo:function(){return this.esCorreo?"Entregar por correo electrónico":this.esMedico?"Entregar por WhatsApp a médico":"Entregar por WhatsApp a paciente"},deshabilitarEnvio:function(){return this.motivoDestinatarioInvalido||this.procesando||!this.destinatario||this.detallesOrdenes.length>0&&0===this.detallesOrdenesSeleccionados.length},motivoDestinatarioInvalido:function(){var e=this,t=Object.entries(r.CW).find((function(t){var a=o(t,2),r=a[0];a[1];return e.estadoEntrega.destinatario&&e.estadoEntrega.destinatario.toLowerCase().includes(r)}));return t&&t.length>1?t[1]:""}}};var n=a(3379),c=a.n(n),l=a(9971),d={insert:"head",singleton:!1};c()(l.Z,d);l.Z.locals;const u=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"entregarResultadosModal",tabindex:"-1",role:"dialog"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[e._v("\n          "+e._s(e.titulo)+"\n        ")]),e._v(" "),e.orden?t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-estado-orden":!0,"mostrar-fecha-orden":!1,"mostrar-nombre-usuario-ingresa":!1,"mostrar-identificacion":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-edad":!1,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,"mostrar-cliente":!1,"mostrar-tipo-atencion":!1,"mostrar-servicio":!1,"mostrar-medico":e.esMedico,orden:e.orden}}):e._e()],1),e._v(" "),t("div",{staticClass:"modal-body"},[e.esCorreo?[e._v("\n          Va a enviar los resultados al correo:\n        ")]:e._e(),e._v(" "),e.esWhatsApp?[e._v("\n          Va a enviar los resultados al número de celular:\n        ")]:e._e(),e._v(" "),t("br"),e._v(" "),t("strong",[e._v(e._s(e.destinatario))]),e._v(" "),e.esCorreo&&e.motivoDestinatarioInvalido?t("div",{staticStyle:{color:"darkred","font-size":"15px"}},[t("strong",[e._v(e._s(e.motivoDestinatarioInvalido))])]):e._e(),e._v(" "),t("br"),e._v(" "),t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],attrs:{name:"lang",type:"radio",value:"esEn"},domProps:{checked:e._q(e.lang,"esEn")},on:{click:e.langClick,change:function(t){e.lang="esEn"}}}),e._v("\n            Etiquetas en Español/Inglés\n          ")])]),e._v(" "),t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],attrs:{name:"lang",type:"radio",value:"en"},domProps:{checked:e._q(e.lang,"en")},on:{click:e.langClick,change:function(t){e.lang="en"}}}),e._v("\n            Etiquetas en Inglés\n          ")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrdenes.length>0,expression:"detallesOrdenes.length > 0"}]},[e._v("\n          Escoger exámenes:\n        ")]),e._v(" "),e._l(e.detallesOrdenes,(function(a){return t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.detallesOrdenesSeleccionados,expression:"detallesOrdenesSeleccionados"}],attrs:{type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(e.detallesOrdenesSeleccionados)?e._i(e.detallesOrdenesSeleccionados,a.id)>-1:e.detallesOrdenesSeleccionados},on:{change:function(t){var r=e.detallesOrdenesSeleccionados,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.id,n=e._i(r,s);o.checked?n<0&&(e.detallesOrdenesSeleccionados=r.concat([s])):n>-1&&(e.detallesOrdenesSeleccionados=r.slice(0,n).concat(r.slice(n+1)))}else e.detallesOrdenesSeleccionados=i}}}),e._v("\n            "+e._s(a.examen)+"\n          ")])])})),e._v("\n\n        ¿Está seguro?\n      ")],2),e._v(" "),t("div",{staticClass:"modal-footer"},[e.esWhatsApp?t("div",{staticClass:"checkbox",staticStyle:{float:"left"}},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.whatsappDesktop,expression:"whatsappDesktop"}],attrs:{name:"lang",type:"checkbox",value:"1"},domProps:{checked:Array.isArray(e.whatsappDesktop)?e._i(e.whatsappDesktop,"1")>-1:e.whatsappDesktop},on:{change:[function(t){var a=e.whatsappDesktop,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"1");r.checked?i<0&&(e.whatsappDesktop=a.concat(["1"])):i>-1&&(e.whatsappDesktop=a.slice(0,i).concat(a.slice(i+1)))}else e.whatsappDesktop=o},e.cambioWhatsAppDesktop]}}),e._v("\n            WhatsApp Desktop\n          ")])]):e._e(),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",id:"botonCancelar","data-dismiss":"modal",disabled:e.procesando}},[e._v("\n          Cancelar\n        ")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{id:e.esCorreo?"enviarCorreo":"enviarWhatsApp",type:"button",disabled:e.deshabilitarEnvio},on:{click:e.enviar}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fa-fw",class:{"fas fa-envelope":e.esCorreo,"fab fa-whatsapp":e.esWhatsApp}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n          Enviar\n        ")])])])])],1)}),[],!1,null,null,null).exports},9184:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{idSucursal:{type:String}},data:function(){return{procesando:{cargarSucursal:!1,guardar:!1},sucursal:{},examenes:[],examenesQr:[]}},mounted:function(){var e=this;$("#modalExamenQr").on("show.bs.modal",(function(t){"modalExamenQr"===t.target.id&&e.cargarDatos()})),$("#modalExamenQr").on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cargarDatos:function(){this.cargarExamenes(),this.cargarSucursal()},cargarExamenes:function(){var e=this;if(_.isEmpty(this.examenes)){axios.get("/api/examenes",{params:{filtros:{imprimirFirmaValidador:!0}}}).then((function(t){var a=t.data.data;e.examenes=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("Error al cargar exámenes",a)}))}},cargarSucursal:function(){var e=this;this.procesando.cargarSucursal=!0,axios.get("/api/sucursales/".concat(this.idSucursal,"/edit")).then((function(t){var a=t.data.data;e.sucursal=a,e.examenesQr=e.sucursal.extras&&e.sucursal.extras.examenesQr?e.sucursal.extras.examenesQr:[]})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("Error al cargar sucursal",a)})).then((function(){return e.procesando.cargarSucursal=!1}))},limpiar:function(){this.examenesQr=[]},agregar:function(){this.examenesQr.push({examen_id:null,url:null})},eliminar:function(e){this.examenesQr.splice(e,1)},examenQrSeleccionado:function(e){if(e.examen_id&&this.examenesQr.filter((function(t){return t.examen_id===e.examen_id})).length>1){var t=this.examenes.find((function(t){return t.id===e.examen_id})).nombre;e.examen_id=null,this.mostrarAdvertencia("Examen <strong>".concat(t,"</strong> ya está seleccionado"))}},guardar:function(){var e=this;this.sucursal.extras||(this.sucursal.extras={}),this.sucursal.extras.examenesQr=this.examenesQr,this.procesando.guardar=!0,axios.patch("/api/sucursales/".concat(this.sucursal.id),this.sucursal).then((function(t){var a=t.data.data;e.sucursal=a,e.mostrarExito("Guardado")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("Error al guardar",a)})).then((function(){return e.procesando.guardar=!1}))}},computed:{}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalExamenQr",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),e.procesando.cargarSucursal?e._e():t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-5"},[e._v("\n                Examen\n              ")]),e._v(" "),t("th",{staticClass:"col-sm-6 text-center"},[e._v("Url QR")]),e._v(" "),t("th",{staticClass:"col-sm-1"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Agregar examen",disabled:this.examenesQr.length===this.examenes.length},on:{click:e.agregar}},[t("i",{staticClass:"fas fa-plus fa-fw"})])])])]),e._v(" "),t("tbody",[e._l(e.examenesQr,(function(a,r){return[t("tr",[t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:a.examen_id,expression:"examenQr.examen_id"}],staticClass:"form-control input-sm",attrs:{required:""},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(a,"examen_id",t.target.multiple?r:r[0])},function(t){return e.examenQrSeleccionado(a)}]}},[t("option",{domProps:{value:null}},[e._v("Seleccione...")]),e._v(" "),e._l(e.examenes,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                      "+e._s(a.nombre)+"\n                    ")])}))],2)]),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.url,expression:"examenQr.url"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"500",required:""},domProps:{value:a.url},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(a,"url",t.target.value)}}})]),e._v(" "),t("td",[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Anular"},on:{click:function(t){return e.eliminar(r)}}},[t("i",{staticClass:"fas fa-fw fa-trash"})])])])]}))],2)]),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.cargarSucursal,cantidad:e.examenesQr.length,alto:"100"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:e.procesando.guardar}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.guardar,expression:"!procesando.guardar"}],staticClass:"fas fa-save fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.guardar,expression:"procesando.guardar"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n            Guardar\n          ")])])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Exámenes QR")])])}],!1,null,null,null).exports},8259:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{DatosOrden:a(6570).Z},props:{},data:function(){return{procesando:!1,cargando:!1,mostrarFiltros:!1,ordenId:"",orden:this.inicializarOrden(),detallesOrden:[],cadenaBusquedaNombre:[],seleccion:!1,detallesOrdenSeleccionados:[]}},mounted:function(){var e=this;$("#modalGestionarImpresion").on("show.bs.modal",(function(t){e.orden=$(t.relatedTarget).data("orden"),e.cargarDetallesOrden()})),$("#modalGestionarImpresion").on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},inicializarOrden:function(){return{numero_orden:"",estado:"",paciente_type:"",paciente:void 0}},limpiar:function(){this.ordenId="",this.orden=this.inicializarOrden()},cargarDetallesOrden:function(){var e=this;this.cargando=!0;return axios.get("/api/ordenes/".concat(this.orden.id,"/detalles"),{params:{incluir:"examen,impresoPor"}}).then((function(t){var a=t.data.data;e.detallesOrden=a,e.detallesOrdenSeleccionados=e.detallesOrden.filter((function(e){return e.fecha_imprime})).map((function(e){return e.id})),e.definirSeleccion(e.detallesOrdenSeleccionados)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar exámenes!",a)})).then((function(){return e.cargando=!1}))},guardar:function(){var e=this;this.procesando=!0;var t={detallesOrdenIds:this.detallesOrdenSeleccionados,actualizarNoImpresos:1};axios.post("/api/ordenes/".concat(this.orden.id,"/impresion"),t).then((function(t){var a=t.data.data;e.$emit("impresion-registrada",a),$("#modalGestionarImpresion").modal("toggle")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al registrar impresión de orden!",a)})).then((function(){return e.procesando=!1}))},alternarSeleccion:function(){var e=this;this.seleccion?this.detallesOrdenSeleccionados=this.detallesOrdenFiltrados.filter((function(e){return"L"===e.estado||"V"===e.estado})).map((function(t){return e.definirImpresion(t),t.id})):(this.detallesOrdenFiltrados.forEach((function(e){e.fecha_imprime="",e.impreso_por=null})),this.detallesOrdenSeleccionados=[])},borrarFiltros:function(){this.cadenaBusquedaNombre="",this.definirSeleccion(this.detallesOrdenSeleccionados)},toggleFiltros:function(){this.mostrarFiltros=!this.mostrarFiltros,this.cadenaBusquedaNombre=""},seleccionarDetalleOrden:function(e,t){this.detallesOrdenSeleccionados.includes(Number(t.target.value))?(e.fecha_imprime="",e.impreso_por=null):this.definirImpresion(e)},definirImpresion:function(e){["L","V"].includes(e.estado)&&!e.fecha_imprime&&(e.fecha_imprime=moment().format("YYYY-MM-DD"),e.impreso_por={nombre_usuario:this.$usuario.nombreUsuario})},definirSeleccion:function(e){var t=this.detallesOrdenParaImprimir.length;this.seleccion=0!==t&&e.length===t}},computed:{detallesOrdenFiltrados:function(){var e=this;return this.detallesOrden.length>0?this.detallesOrden.filter((function(t){var a=new RegExp(e.cadenaBusquedaNombre,"i");return a.test(t.examen.codigo)||a.test(t.examen.nombre)})):this.detallesOrden},detallesOrdenParaImprimir:function(){return this.detallesOrdenFiltrados.filter((function(e){return"L"===e.estado||"V"===e.estado}))},etiquetaImpresos:function(){return this.detallesOrdenSeleccionados.length>1?"impresos":"impreso"}},watch:{detallesOrdenSeleccionados:function(e){this.definirSeleccion(e)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalGestionarImpresion",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-3"},[t("label",[e._v("Orden No.")]),e._v(" "),t("div",[e._v("\n                "+e._s(e.orden.numero_orden)+"\n              ")])]),e._v(" "),t("div",{staticClass:"col-md-3"},[t("label",[e._v("Estado")]),e._v(" "),t("div",[t("orden-estado",{attrs:{estado:e.orden.estado}})],1)])]),e._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-12"},[t("label",[e._v("Datos paciente")]),e._v(" "),t("div",[t("datos-orden",{attrs:{"mostrar-fecha-nacimiento":!1,"mostrar-poliza":!1,"mostrar-direccion":!1,orden:e.orden}})],1)])]),e._v(" "),t("legend",[e._v("\n            Exámenes\n            "),t("div",{staticClass:"pull-right"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrdenSeleccionados.length>0,expression:"detallesOrdenSeleccionados.length > 0"}],staticClass:"badge"},[e._v("\n                "+e._s(e.detallesOrdenSeleccionados.length)+"\n                "+e._s(e.etiquetaImpresos)+"\n              ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.mostrarFiltros,expression:"mostrarFiltros"}],staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro",rel:"tooltip"},on:{click:e.borrarFiltros}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm",class:{"btn-default":e.mostrarFiltros,"btn-primary":!e.mostrarFiltros},attrs:{type:"button",title:"Filtros",rel:"tooltip"},on:{click:e.toggleFiltros}},[t("i",{staticClass:"fas fa-filter",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Actualizar",rel:"tooltip"},on:{click:e.cargarDetallesOrden}},[t("i",{staticClass:"fas fa-sync",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("table",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-md-6 text-left"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.mostrarFiltros,expression:"!mostrarFiltros"}],on:{dblclick:e.toggleFiltros}},[e._v("\n                  Nombre\n                ")]),e._v(" "),t("input",{directives:[{name:"show",rawName:"v-show",value:e.mostrarFiltros,expression:"mostrarFiltros"},{name:"model",rawName:"v-model",value:e.cadenaBusquedaNombre,expression:"cadenaBusquedaNombre"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Nombre..."},domProps:{value:e.cadenaBusquedaNombre},on:{dblclick:e.toggleFiltros,input:function(t){t.target.composing||(e.cadenaBusquedaNombre=t.target.value)}}})]),e._v(" "),t("th",{staticClass:"col-md-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-md-2 text-center"},[e._v("Fecha impresión")]),e._v(" "),t("th",{staticClass:"col-md-2 text-center"},[e._v("Impreso por")]),e._v(" "),t("th",{staticClass:"col-md-1 text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.seleccion,expression:"seleccion"}],attrs:{disabled:0===e.detallesOrdenParaImprimir.length,type:"checkbox"},domProps:{checked:Array.isArray(e.seleccion)?e._i(e.seleccion,null)>-1:e.seleccion},on:{change:[function(t){var a=e.seleccion,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.seleccion=a.concat([null])):i>-1&&(e.seleccion=a.slice(0,i).concat(a.slice(i+1)))}else e.seleccion=o},e.alternarSeleccion]}})])])]),e._v(" "),t("tbody",e._l(e.detallesOrdenFiltrados,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v("\n                "+e._s(a.examen.codigo)+" - "+e._s(a.examen.nombre)+"\n              ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoDetalleOrden")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(e._f("fecha")(a.fecha_imprime)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.impreso_por?a.impreso_por.nombre_usuario:""))]),e._v(" "),t("td",{staticClass:"text-center"},[["X","L","V"].includes(a.estado)?t("input",{directives:[{name:"model",rawName:"v-model",value:e.detallesOrdenSeleccionados,expression:"detallesOrdenSeleccionados"}],attrs:{type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(e.detallesOrdenSeleccionados)?e._i(e.detallesOrdenSeleccionados,a.id)>-1:e.detallesOrdenSeleccionados},on:{click:function(t){return e.seleccionarDetalleOrden(a,t)},change:function(t){var r=e.detallesOrdenSeleccionados,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.id,n=e._i(r,s);o.checked?n<0&&(e.detallesOrdenSeleccionados=r.concat([s])):n>-1&&(e.detallesOrdenSeleccionados=r.slice(0,n).concat(r.slice(n+1)))}else e.detallesOrdenSeleccionados=i}}}):e._e()])])})),0)]),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.detallesOrden.length,tipo:"exámenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:e.procesando||0===e.detallesOrdenParaImprimir.length}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-save fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n             Guardar\n          ")])])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Registrar impresión")])])}],!1,null,null,null).exports},7226:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(5269),o=a.n(r);a(4795);const i={components:{EmailDropdown:o()},props:["medico","especialidades"],data:function(){return{dominios:["gmail.com","hotmail.com","msn.com","outlook.com","yahoo.com"]}}};var s=a(1900);const n=(0,s.Z)(i,(function(){var e=this,t=e._self._c;return t("div",[t("fieldset",[t("legend",[e._v("Datos generales")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"medico_nombres"}},[e._v("Nombres")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.nombres,expression:"medico.nombres"}],staticClass:"form-control input-sm",attrs:{id:"medico_nombres",type:"text",name:"medico_nombres",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.medico.nombres},on:{input:function(t){t.target.composing||e.$set(e.medico,"nombres",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"medico_apellidos"}},[e._v("Apellidos")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.apellidos,expression:"medico.apellidos"}],staticClass:"form-control input-sm",attrs:{id:"medico_apellidos",type:"text",name:"medico_apellidos",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.medico.apellidos},on:{input:function(t){t.target.composing||e.$set(e.medico,"apellidos",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico_correo"}},[e._v("Correo")]),e._v(" "),t("EmailDropdown",{attrs:{id:"medico_correo",domains:[],defaultDomains:e.dominios,maxlength:"100",inputClasses:"form-control input-sm",maxSuggestions:5},model:{value:e.medico.correo,callback:function(t){e.$set(e.medico,"correo",t)},expression:"medico.correo"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico_numero_identificacion"}},[e._v("\n          Número identificación\n        ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.numero_identificacion,expression:"medico.numero_identificacion"}],staticClass:"form-control input-sm",attrs:{id:"medico_numero_identificacion",name:"medico_numero_identificacion",type:"text",maxlength:"15",autocomplete:"off"},domProps:{value:e.medico.numero_identificacion},on:{input:function(t){t.target.composing||e.$set(e.medico,"numero_identificacion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"referencia_auxiliar"}},[e._v("Referencia auxiliar")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.referencia_auxiliar,expression:"medico.referencia_auxiliar"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"referencia_auxiliar",name:"referencia_auxiliar",maxlength:"60"},domProps:{value:e.medico.referencia_auxiliar},on:{input:function(t){t.target.composing||e.$set(e.medico,"referencia_auxiliar",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Especialidad")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",placeholder:"Seleccione...",options:e.especialidades,reduce:function(e){return e.id},label:"nombre"},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.medico.especialidad_id,callback:function(t){e.$set(e.medico,"especialidad_id",t)},expression:"medico.especialidad_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"observaciones"}},[e._v("Datos adicionales")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.medico.referencia,expression:"medico.referencia"}],staticClass:"form-control input-sm",attrs:{id:"observaciones",name:"observaciones",rows:"1",autocomplete:"off"},domProps:{value:e.medico.referencia},on:{input:function(t){t.target.composing||e.$set(e.medico,"referencia",t.target.value)}}})])])]),e._v(" "),t("fieldset",[t("legend",[e._v("Dirección y teléfonos")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-10 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"calle_principal"}},[e._v("Dirección")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.calle_principal,expression:"medico.calle_principal"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"calle_principal",name:"calle_principal",maxlength:"100",autocomplete:"off"},domProps:{value:e.medico.calle_principal},on:{input:function(t){t.target.composing||e.$set(e.medico,"calle_principal",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_direccion"}},[e._v("Numeración")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.numero_direccion,expression:"medico.numero_direccion"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"numero_direccion",name:"numero_direccion",maxlength:"10",autocomplete:"off"},domProps:{value:e.medico.numero_direccion},on:{input:function(t){t.target.composing||e.$set(e.medico,"numero_direccion",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefono_celular"}},[e._v("Teléfono Celular")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.telefono_celular,expression:"medico.telefono_celular"}],staticClass:"form-control input-sm",attrs:{type:"tel",id:"telefono_celular",name:"telefono_celular",minlength:"10",maxlength:"30",autocomplete:"off"},domProps:{value:e.medico.telefono_celular},on:{input:function(t){t.target.composing||e.$set(e.medico,"telefono_celular",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefono_oficina"}},[e._v("Teléfono convencional")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.telefono_oficina,expression:"medico.telefono_oficina"}],staticClass:"form-control input-sm",attrs:{type:"tel",id:"telefono_oficina",name:"telefono_oficina",minlength:"7",maxlength:"30",autocomplete:"off"},domProps:{value:e.medico.telefono_oficina},on:{input:function(t){t.target.composing||e.$set(e.medico,"telefono_oficina",t.target.value)}}})])])]),e._v(" "),t("fieldset",[t("legend",[e._v("Portal")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"pedidos"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.pedidos,expression:"medico.pedidos"}],staticClass:"md-check",attrs:{type:"checkbox",id:"pedidos",name:"pedidos"},domProps:{checked:Array.isArray(e.medico.pedidos)?e._i(e.medico.pedidos,null)>-1:e.medico.pedidos},on:{change:function(t){var a=e.medico.pedidos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.medico,"pedidos",a.concat([null])):i>-1&&e.$set(e.medico,"pedidos",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.medico,"pedidos",o)}}}),e._v("\n            Permitir solicitar pedido\n          ")])])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("div",{staticClass:"checkbox"},[t("label",{attrs:{for:"portal_ordenes_todos"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.medico.portal_ordenes_todos,expression:"medico.portal_ordenes_todos"}],attrs:{type:"checkbox",id:"portal_ordenes_todos",name:"portal_ordenes_todos"},domProps:{checked:Array.isArray(e.medico.portal_ordenes_todos)?e._i(e.medico.portal_ordenes_todos,null)>-1:e.medico.portal_ordenes_todos},on:{change:function(t){var a=e.medico.portal_ordenes_todos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.medico,"portal_ordenes_todos",a.concat([null])):i>-1&&e.$set(e.medico,"portal_ordenes_todos",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.medico,"portal_ordenes_todos",o)}}}),e._v("\n            Permitir ver todas las órdenes\n          ")])])])])])])}),[],!1,null,null,null).exports;var c=a(4590);const l={components:{MedicoFormulario:n},data:function(){return{guardando:!1,medico:{tipo_identificacion:"",numero_identificacion:"",nombres:"",apellidos:"",correo:"",telefono_oficina:"",telefono_celular:"",telefono_adicional:"",calle_principal:"",calle_secundaria:"",numero_direccion:"",codigo_postal:"",referencia:"",ubicacion_direccion_id:"",referencia_auxiliar:"",pedidos:!1,portal_ordenes_todos:!1,especialidad_id:""},especialidades:[]}},mounted:function(){var e=this;$("#modalGestionarMedico").on("hide.bs.modal",(function(t){"modalGestionarMedico"===t.target.id&&e.limpiarVariables()})),$("#modalGestionarMedico").on("show.bs.modal",(function(t){"modalGestionarMedico"===t.target.id&&(e.cargarEspecialidades(),e.limpiarVariables())})),$("#modalGestionarMedico").on("shown.bs.modal",(function(){return $("#medico_nombres").focus()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},guardar:function(){var e=this;this.guardando=!0,this.alternarBotonesSubmit(),axios.post("/api/medicos",this.medico).then((function(t){var a=t.data.data;$("#modalGestionarMedico").modal("toggle"),e.$emit("medico-creado",a)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar médico!",a)})).then((function(){e.guardando=!1,e.alternarBotonesSubmit()}))},cargarEspecialidades:function(){var e=this;axios.get("/api/catalogos",{params:{catalogo:c.oH.ESPECIALIDADES}}).then((function(t){var a=t.data.data;e.especialidades=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar especialidades",a)}))},limpiarVariables:function(){this.medico.tipo_identificacion="",this.medico.numero_identificacion="",this.medico.nombres="",this.medico.apellidos="",this.medico.correo="",this.medico.telefono_oficina="",this.medico.telefono_celular="",this.medico.telefono_adicional="",this.medico.calle_principal="",this.medico.calle_secundaria="",this.medico.numero_direccion="",this.medico.codigo_postal="",this.medico.referencia="",this.medico.ubicacion_direccion_id="",this.medico.referencia_auxiliar="",this.medico.pedidos=!1,this.medico.portal_ordenes_todos=!1,this.medico.especialidad_id=""}}};const d=(0,s.Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalGestionarMedico",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",staticStyle:{float:"left","padding-right":"10px"}},[e._v("Crear Médico")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm pull-right",staticStyle:{"margin-left":"10px"},attrs:{type:"submit"}},[e.guardando?[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n              Procesando...\n            ")]:[t("i",{staticClass:"fas fa-save fa-fw"}),e._v("\n              Guardar\n            ")]],2),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm pull-right",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("medico-formulario",{attrs:{medico:e.medico,especialidades:e.especialidades},on:{"update:medico":function(t){e.medico=t}}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[e.guardando?[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n              Procesando...\n            ")]:[t("i",{staticClass:"fas fa-save fa-fw"}),e._v("\n              Guardar\n            ")]],2)])])])])])}),[],!1,null,null,null).exports},2979:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(6732),o=a(4590);const i={components:{HistoriasClinicasModal:r.Z},props:{idSistemaExterno:{type:Number},conSistemasExternos:{type:Boolean,default:!0}},data:function(){return{guardando:!1,sujetoType:"",pacienteIdentificacion:"",esCrear:!0,sistemasExternos:[],ubicacionesNivel2:[],pacienteHumano:{id:"",tipo_identificacion:"",numero_identificacion:"",sexo:"",nombres:"",apellidos:"",fecha_nacimiento:"",edad_calculado:"",correo:"",ubicacion_residencia_id:"",ubicacion_nacionalidad_id:"",autoidentificacion:"",condicion_sexual:"",telefono_convencional:"",telefono_celular:"",direccion:"",direccion_numeracion:"",historia_clinica:[],numero_historia_clinica:"",numero_poliza:"",datos_clinicos:"",ocupacion:"",barrio:"",instruccion:"",nivel1:"",nivel2:"",nivel3:"",nivel4:"",genero:""},pacienteAnimal:{id:"",tipo_identificacion:"",numero_identificacion:"",sexo:"",nombre:"",especie_id:"",raza_id:"",fecha_nacimiento:"",edad_calculado:"",correo_dueno:"",residencia_dueno_id:"",telefono_convencional_dueno:"",telefono_celular_dueno:"",direccion_dueno:"",numero_historia_clinica:"",nivel1:"",nivel2:"",nivel3:"",nivel4:"",esterilizado:!1},sujetoObjeto:{id:"",taxonomia_id:"",residencia_responsable_id:"",numero_identificacion:"",descripcion:"",sexo:"",nombres_responsable:"",apellidos_responsable:"",telefono_convencional_responsable:"",telefono_celular_responsable:"",direccion_responsable:"",correo_responsable:"",nivel1:"",nivel2:"",nivel3:"",nivel4:""},datosPacienteHumano:{cargandoPersona:!1,error:!1,exito:!1,advertencia:""},taxonomia:{nivel2:"",nivel3:""}}},mounted:function(){var e=this;$("#gestionarPacienteModal").on("hide.bs.modal",(function(t){"gestionarPacienteModal"===t.target.id&&(e.sujetoType="",e.limpiarPacienteHumano(),e.limpiarPacienteAnimal(),e.limpiarSujetoObjeto())})),$("#gestionarPacienteModal").on("show.bs.modal",(function(t){if("gestionarPacienteModal"===t.target.id){e.ocultarMensajes(),e.definirHistoriaClinicaHumano(),e.sujetoType="";var a=t.relatedTarget,r=a.pacienteType;e.pacienteIdentificacion=a.numeroIdentificacion?a.numeroIdentificacion:a.numeroIdentificacion.trim(),e.esCrear=a.esCrearPaciente,e.pacienteHumano.numero_identificacion=e.pacienteIdentificacion,e.pacienteHumano.tipo_identificacion="CED",e.pacienteAnimal.numero_identificacion=e.pacienteIdentificacion,e.sujetoObjeto.numero_identificacion=e.pacienteIdentificacion,e.esCrear?(e.cargarSistemasExternos(),e.cargarUbicaciones().then((function(){e.cargarUbicacionDesdeCookie(e.pacienteHumano),e.cargarUbicacionDesdeCookie(e.pacienteAnimal),e.cargarUbicacionDesdeCookie(e.sujetoObjeto)})),e.sujetoType=e.definirSujetoType()):e.cargarUbicaciones().then((function(){switch(r){case"humano":e.buscarPacienteHumano(a.pacienteId).then((function(){return e.sujetoType=r}));break;case"animal":e.buscarPacienteAnimal(a.pacienteId).then((function(){return e.sujetoType=r}));break;case"objeto":e.buscarSujetoObjeto(a.pacienteId).then((function(){return e.sujetoType=r}))}}))}}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},ocultarMensajes:function(){this.$refs.alerta.ocultarAlertas()},definirSujetoType:function(){switch(this.$cliente.tipo){case"Humano":default:return"humano";case"Veterinario":return"animal";case"Objeto":return"objeto"}},seleccionarPrimero:function(){"Humano"===this.$cliente.tipo&&this.seleccionarHumanos(),"Veterinario"===this.$cliente.tipo&&this.seleccionarAnimales(),"Objeto"===this.$cliente.tipo&&this.seleccionarObjetos()},seleccionarSegundo:function(){"Humano"===this.$cliente.tipo&&this.seleccionarAnimales(),"Veterinario"===this.$cliente.tipo&&this.seleccionarHumanos(),"Objeto"===this.$cliente.tipo&&this.seleccionarHumanos()},seleccionarTercero:function(){"Humano"===this.$cliente.tipo&&this.seleccionarObjetos(),"Veterinario"===this.$cliente.tipo&&this.seleccionarObjetos(),"Objeto"===this.$cliente.tipo&&this.seleccionarAnimales()},seleccionarHumanos:function(){this.sujetoType="humano",this.cargarUbicacionDesdeCookie(this.pacienteHumano),this.pacienteAnimal.id||(this.limpiarPacienteAnimal(),this.pacienteAnimal.numero_identificacion=this.pacienteIdentificacion),this.sujetoObjeto.id||(this.limpiarSujetoObjeto(),this.sujetoObjeto.numero_identificacion=this.pacienteIdentificacion)},seleccionarAnimales:function(){this.sujetoType="animal",this.cargarUbicacionDesdeCookie(this.pacienteAnimal),this.pacienteHumano.id||(this.limpiarPacienteHumano(),this.pacienteHumano.numero_identificacion=this.pacienteIdentificacion,this.pacienteHumano.tipo_identificacion="CED"),this.sujetoObjeto.id||(this.limpiarSujetoObjeto(),this.sujetoObjeto.numero_identificacion=this.pacienteIdentificacion)},seleccionarObjetos:function(){this.sujetoType="objeto",this.cargarUbicacionDesdeCookie(this.sujetoObjeto),this.pacienteHumano.id||(this.limpiarPacienteHumano(),this.pacienteHumano.numero_identificacion=this.pacienteIdentificacion,this.pacienteHumano.tipo_identificacion="CED"),this.pacienteAnimal.id||(this.limpiarPacienteAnimal(),this.pacienteAnimal.numero_identificacion=this.pacienteIdentificacion)},buscarPacienteHumano:function(e){var t=this;return axios.get("/api/pacientes/humanos/".concat(e,"/edit")).then((function(e){var a=e.data.data;a?(t.pacienteHumano.id=a.id,t.pacienteHumano.tipo_identificacion=a.tipo_identificacion,t.pacienteHumano.numero_identificacion=a.numero_identificacion,t.pacienteHumano.sexo=a.sexo,t.pacienteHumano.genero=a.genero,t.pacienteHumano.nombres=a.nombres,t.pacienteHumano.apellidos=a.apellidos,t.pacienteHumano.correo=a.correo,t.pacienteHumano.fecha_nacimiento=a.fecha_nacimiento,t.pacienteHumano.direccion=a.direccion,t.pacienteHumano.direccion_numeracion=a.direccion_numeracion,t.pacienteHumano.barrio=a.barrio,t.pacienteHumano.telefono_convencional=a.telefono_convencional,t.pacienteHumano.telefono_celular=a.telefono_celular,t.pacienteHumano.datos_clinicos=a.datos_clinicos,t.pacienteHumano.numero_poliza=a.numero_poliza,t.pacienteHumano.ocupacion=a.ocupacion,t.pacienteHumano.ubicacion_residencia_id=a.ubicacion_residencia_id?a.ubicacion_residencia_id:"",t.pacienteHumano.ubicacion_nacionalidad_id=a.ubicacion_nacionalidad_id?a.ubicacion_nacionalidad_id:"",t.pacienteHumano.instruccion=a.instruccion?a.instruccion:"",t.pacienteHumano.autoidentificacion=a.autoidentificacion?a.autoidentificacion:"",t.pacienteHumano.condicion_sexual=a.condicion_sexual?a.condicion_sexual:"",t.pacienteHumano.historia_clinica=a.historia_clinica,t.pacienteHumano.numero_historia_clinica=a.numero_historia_clinica,t.pacienteHumano.historia_clinica||(t.pacienteHumano.historia_clinica=[]),t.definirHistoriaClinicaHumano(),t.cargarUbicacionPaciente(t.pacienteHumano,a.ubicacion_residencia)):t.mostrarErrores("No se puede encontrar el paciente especificado.")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al buscar paciente humano",a)}))},buscarPacienteAnimal:function(e){var t=this;return axios.get("/api/pacientes/animales/".concat(e,"/edit")).then((function(e){var a=e.data.data;if(a.pacienteAnimal){var r=a.pacienteAnimal;t.pacienteAnimal.id=r.id,t.pacienteAnimal.numero_identificacion=r.numero_identificacion,t.pacienteAnimal.sexo=r.sexo,t.pacienteAnimal.nombre=r.nombre,t.pacienteAnimal.raza_id=r.raza_id,t.pacienteAnimal.fecha_nacimiento=r.fecha_nacimiento,t.pacienteAnimal.numero_historia_clinica=r.numero_historia_clinica,t.pacienteAnimal.nombres_dueno=r.nombres_dueno,t.pacienteAnimal.apellidos_dueno=r.apellidos_dueno,t.pacienteAnimal.correo_dueno=r.correo_dueno,t.pacienteAnimal.telefono_convencional_dueno=r.telefono_convencional_dueno,t.pacienteAnimal.telefono_celular_dueno=r.telefono_celular_dueno,t.pacienteAnimal.direccion_dueno=r.direccion,t.pacienteAnimal.residencia_dueno_id=r.residencia_dueno_id?r.residencia_dueno_id:"",t.pacienteAnimal.especie_id=r.raza.padre_id,t.pacienteAnimal.esterilizado=r.esterilizado,t.cargarUbicacionPaciente(t.pacienteAnimal,r.residencia_dueno)}else t.mostrarErrores("No se puede encontrar el paciente especificado.")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al buscar paciente animal",a)}))},buscarSujetoObjeto:function(e){var t=this;return axios.get("/api/sujetos/objetos/".concat(e,"/edit")).then((function(e){var a=e.data.data;a?(t.sujetoObjeto.id=a.id,t.sujetoObjeto.taxonomia_id=a.taxonomia_id,t.sujetoObjeto.residencia_responsable_id=a.residencia_responsable_id,t.sujetoObjeto.numero_identificacion=a.numero_identificacion,t.sujetoObjeto.descripcion=a.descripcion,t.sujetoObjeto.nombres_responsable=a.nombres_responsable,t.sujetoObjeto.apellidos_responsable=a.apellidos_responsable,t.sujetoObjeto.telefono_convencional_responsable=a.telefono_convencional_responsable,t.sujetoObjeto.telefono_celular_responsable=a.telefono_celular_responsable,t.sujetoObjeto.direccion_responsable=a.direccion_responsable,t.sujetoObjeto.correo_responsable=a.correo_responsable,t.sujetoObjeto.sexo=a.sexo?a.sexo:"",t.sujetoObjeto.residencia_responsable_id=a.residencia_responsable_id?a.residencia_responsable_id:"",t.cargarUbicacionPaciente(t.sujetoObjeto,a.residencia_responsable),t.cargarTaxonomia(a)):t.mostrarErrores("No se puede encontrar el objeto especificado.")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al buscar el objeto",a)}))},cargarUbicacionDesdeCookie:function(e){e.nivel2=localStorage.getItem("nivel2"),e.nivel3=localStorage.getItem("nivel3"),e.nivel2=e.nivel2?parseInt(e.nivel2):"",e.nivel3=e.nivel3?parseInt(e.nivel3):""},guardar:function(){switch(this.alternarBotonesSubmit(),this.guardando=!0,this.sujetoType){case"humano":this.guardarPacienteHumano();break;case"animal":this.guardarPacienteAnimal();break;case"objeto":this.guardarSujetoObjeto()}},guardarPacienteHumano:function(){var e=this;this.pacienteHumano.id?axios.patch("/api/pacientes/humanos/".concat(this.pacienteHumano.id),this.pacienteHumano).then((function(t){var a=t.data.data;a.creado=!1,e.$emit("paciente-humano-guardado",a),$("#gestionarPacienteModal").modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al actualizar paciente",a)})).then((function(){e.alternarBotonesSubmit(),e.guardando=!1})):axios.post("/api/pacientes/humanos",this.pacienteHumano).then((function(t){var a=t.data.data;a.creado=!0,e.$emit("paciente-humano-guardado",a),$("#gestionarPacienteModal").modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al crear paciente humano",a)})).then((function(){e.alternarBotonesSubmit(),e.guardando=!1}))},guardarPacienteAnimal:function(){var e=this;this.pacienteAnimal.id?axios.patch("/api/pacientes/animales/".concat(this.pacienteAnimal.id),this.pacienteAnimal).then((function(t){var a=t.data.data;a.creado=!1,e.$emit("paciente-animal-guardado",a),$("#gestionarPacienteModal").modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al actualizar paciente",a)})).then((function(){e.alternarBotonesSubmit(),e.guardando=!1})):axios.post("/api/pacientes/animales",this.pacienteAnimal).then((function(t){var a=t.data.data;a.creado=!0,e.$emit("paciente-animal-guardado",a),$("#gestionarPacienteModal").modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al crear paciente animal",a)})).then((function(){e.alternarBotonesSubmit(),e.guardando=!1}))},guardarSujetoObjeto:function(){var e=this;this.definirTaxonomia(),this.sujetoObjeto.id?axios.patch("/api/sujetos/objetos/".concat(this.sujetoObjeto.id),this.sujetoObjeto).then((function(t){var a=t.data.data;a.creado=!1,e.$emit("sujeto-objeto-guardado",a),$("#gestionarPacienteModal").modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al actualizar objeto",a)})).then((function(){e.alternarBotonesSubmit(),e.guardando=!1})):axios.post("/api/sujetos/objetos",this.sujetoObjeto).then((function(t){var a=t.data.data;a.creado=!0,e.$emit("sujeto-objeto-guardado",a),$("#gestionarPacienteModal").modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al crear objeto",a)})).then((function(){e.alternarBotonesSubmit(),e.guardando=!1}))},definirTaxonomia:function(){this.taxonomia.nivel2&&(this.sujetoObjeto.taxonomia_id=this.taxonomia.nivel2,this.taxonomia.nivel3&&(this.sujetoObjeto.taxonomia_id=this.taxonomia.nivel3))},limpiarPacienteHumano:function(){this.pacienteHumano.id="",this.pacienteHumano.edad_calculado="",this.pacienteHumano.tipo_identificacion="",this.pacienteHumano.numero_identificacion="",this.pacienteHumano.sexo="",this.pacienteHumano.nombres="",this.pacienteHumano.apellidos="",this.pacienteHumano.fecha_nacimiento="",this.pacienteHumano.correo="",this.pacienteHumano.ubicacion_residencia_id="",this.pacienteHumano.ubicacion_nacionalidad_id="",this.pacienteHumano.autoidentificacion="",this.pacienteHumano.condicion_sexual="",this.pacienteHumano.telefono_convencional="",this.pacienteHumano.telefono_celular="",this.pacienteHumano.direccion="",this.pacienteHumano.direccion_numeracion="",this.pacienteHumano.datos_clinicos="",this.pacienteHumano.numero_poliza="",this.pacienteHumano.instruccion="",this.pacienteHumano.barrio="",this.pacienteHumano.ocupacion="",this.pacienteHumano.nivel1="",this.pacienteHumano.nivel2="",this.pacienteHumano.nivel3="",this.pacienteHumano.nivel4="",this.pacienteHumano.historia_clinica=[],this.pacienteHumano.numero_historia_clinica="",this.pacienteHumano.genero="",this.definirHistoriaClinicaHumano(),$("#iconoExito").popover("hide"),$("#iconoAdvertencia").popover("hide"),$("#iconoError").popover("hide")},limpiarPacienteAnimal:function(){this.pacienteAnimal.id="",this.pacienteAnimal.edad_calculado="",this.pacienteAnimal.numero_identificacion="",this.pacienteAnimal.sexo="",this.pacienteAnimal.esterilizado=!1,this.pacienteAnimal.nombre="",this.pacienteAnimal.nombres_dueno="",this.pacienteAnimal.apellidos_dueno="",this.pacienteAnimal.especie_id="",this.pacienteAnimal.raza_id="",this.pacienteAnimal.fecha_nacimiento="",this.pacienteAnimal.correo="",this.pacienteAnimal.residencia_dueno_id="",this.pacienteAnimal.telefono_convencional="",this.pacienteAnimal.telefono_celular="",this.pacienteAnimal.direccion="",this.pacienteAnimal.nivel1="",this.pacienteAnimal.nivel2="",this.pacienteAnimal.nivel3="",this.pacienteAnimal.nivel4=""},limpiarSujetoObjeto:function(){this.sujetoObjeto.id="",this.sujetoObjeto.taxonomia_id="",this.sujetoObjeto.residencia_responsable_id="",this.sujetoObjeto.numero_identificacion="",this.sujetoObjeto.descripcion="",this.sujetoObjeto.sexo="",this.sujetoObjeto.nombres_responsable="",this.sujetoObjeto.apellidos_responsable="",this.sujetoObjeto.telefono_convencional_responsable="",this.sujetoObjeto.telefono_celular_responsable="",this.sujetoObjeto.direccion_responsable="",this.sujetoObjeto.correo_responsable="",this.sujetoObjeto.nivel1="",this.sujetoObjeto.nivel2="",this.sujetoObjeto.nivel3="",this.sujetoObjeto.nivel4="",this.taxonomia.nivel2="",this.taxonomia.nivel3=""},cargarTaxonomia:function(e){var t=e.taxonomia;t&&2===t.nivel&&(this.taxonomia.nivel2=t.id),t&&3===t.nivel&&(this.taxonomia.nivel3=t.id,this.taxonomia.nivel2=t.padre.id)},cargarUbicacionPaciente:function(e,t){t&&4===t.nivel&&(e.nivel4=t.id,e.nivel3=t.padre?t.padre.id:"",e.nivel2=t.padre.padre?t.padre.padre.id:"",e.nivel1=t.padre.padre?t.padre.padre.padre_id:""),t&&3===t.nivel&&(e.nivel3=t.id,e.nivel2=t.padre?t.padre.id:"",e.nivel1=t.padre.padre?t.padre.padre.id:""),t&&2===t.nivel&&(e.nivel2=t.id,e.nivel1=t.padre?t.padre.id:"")},definirHistoriaClinicaHumano:function(){var e=this;this.pacienteHumano.historia_clinica.find((function(t){return Number(t.id)===Number(e.$usuario.sistemaHisId)}))||this.pacienteHumano.historia_clinica.unshift({id:this.$usuario.sistemaHisId,numero:""})},cargarSistemasExternos:function(){var e=this;if(this.conSistemasExternos&&_.isEmpty(this.sistemasExternos)){var t={catalogo:o.oH.SISTEMAS_EXTERNOS,soloActivos:!0,tipo:"HIS"};axios.get("/api/catalogos",{params:t}).then((function(t){var a=t.data;e.sistemasExternos=a.data})).catch((function(t){e.procesarErrorResponse(t).push("Error al cargar Sistemas externos"),e.mostrarErrores("Error al cargar Sistemas externos")}))}},cargarUbicaciones:function(){var e=this;return _.isEmpty(this.ubicacionesNivel2)?axios.get("/api/ubicaciones",{params:{padreCodigo:this.$cliente.pais}}).then((function(t){var a=t.data.data;e.ubicacionesNivel2=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar ubicaciones",a)})):new Promise((function(e,t){e("Ok")}))}},computed:{componente:function(){var e="";switch(this.sujetoType){case"humano":e="ClientesPacienteHumano";break;case"animal":e="ClientesPacienteAnimal";break;case"objeto":e="ClientesSujetoObjeto"}return e},propsComponente:function(){var e={};switch(this.sujetoType){case"humano":e={ref:"pacienteHumano",paciente:this.pacienteHumano,datos:this.datosPacienteHumano,idSistemaExterno:this.idSistemaExterno,sistemasExternos:this.sistemasExternos,bloquearDatos:!this.esCrear};break;case"animal":e={paciente:this.pacienteAnimal};break;case"objeto":e={sujeto:this.sujetoObjeto,taxonomia:this.taxonomia}}return e},titulo:function(){var e=this.esCrear?"Crear":"Editar";switch(this.sujetoType){case"humano":case"animal":e="".concat(e," paciente");break;case"objeto":e="".concat(e," objeto")}return e},esPacienteHumano:function(){return"humano"===this.sujetoType},esPacienteAnimal:function(){return"animal"===this.sujetoType},esSujetoObjeto:function(){return"objeto"===this.sujetoType},activoPrimero:function(){var e="";return"Humano"===this.$cliente.tipo&&(e=this.esPacienteHumano),"Veterinario"===this.$cliente.tipo&&(e=this.esPacienteAnimal),"Objeto"===this.$cliente.tipo&&(e=this.esSujetoObjeto),e},activoSegundo:function(){return"Humano"===this.$cliente.tipo?this.esPacienteAnimal:"Veterinario"===this.$cliente.tipo||"Objeto"===this.$cliente.tipo?this.esPacienteHumano:void 0},activoTercero:function(){return"Humano"===this.$cliente.tipo||"Veterinario"===this.$cliente.tipo?this.esSujetoObjeto:"Objeto"===this.$cliente.tipo?this.esPacienteAnimal:void 0},etiquetaPrimero:function(){return"Humano"===this.$cliente.tipo?"Humano":"Veterinario"===this.$cliente.tipo?"Animal":"Objeto"===this.$cliente.tipo?"Objeto":void 0},etiquetaSegundo:function(){return"Humano"===this.$cliente.tipo?"Animal":"Veterinario"===this.$cliente.tipo||"Objeto"===this.$cliente.tipo?"Humano":void 0},etiquetaTercero:function(){return"Humano"===this.$cliente.tipo||"Veterinario"===this.$cliente.tipo?"Objeto":"Objeto"===this.$cliente.tipo?"Animal":void 0},colorFondo:function(){return"F"===this.pacienteHumano.sexo?"background-color: #FFF3F3":"M"===this.pacienteHumano.sexo?"background-color: #E0EDFF":void 0}}};const s=(0,a(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"gestionarPacienteModal",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.colorFondo},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",staticStyle:{float:"left","padding-right":"10px"}},[e._v(e._s(e.titulo))]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm pull-right",staticStyle:{"margin-left":"10px"},attrs:{type:"submit"}},[e.guardando?[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n                Procesando...\n              ")]:[t("i",{staticClass:"fas fa-save fa-fw"}),e._v("\n                Guardar\n              ")]],2),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm pull-right",attrs:{type:"button","data-dismiss":"modal"}},[e._v("\n              Cerrar\n            ")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.esCrear,expression:"esCrear"}],staticClass:"nav nav-tabs",attrs:{role:"tablist",id:"tiposPacientes"}},[t("li",{class:{active:e.activoPrimero},attrs:{role:"presentation"}},[t("a",{attrs:{href:"#"},on:{click:e.seleccionarPrimero}},[e._v(e._s(e.etiquetaPrimero))])]),e._v(" "),t("li",{class:{active:e.activoSegundo},attrs:{role:"presentation"}},[t("a",{attrs:{href:"#"},on:{click:e.seleccionarSegundo}},[e._v(e._s(e.etiquetaSegundo))])]),e._v(" "),t("li",{class:{active:e.activoTercero},attrs:{role:"presentation"}},[t("a",{attrs:{href:"#"},on:{click:e.seleccionarTercero}},[e._v(e._s(e.etiquetaTercero))])])]),e._v(" "),t("keep-alive",[t(e.componente,e._b({tag:"component",attrs:{ubicacionesNivel2:e.ubicacionesNivel2},on:{error:e.mostrarErrores,advertencia:e.mostrarAdvertencia}},"component",e.propsComponente,!1))],1),e._v(" "),t("cargando",{attrs:{cargando:""===e.sujetoType,cantidad:1}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[e.guardando?[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n                Procesando...\n              ")]:[t("i",{staticClass:"fas fa-save fa-fw"}),e._v("\n                Guardar\n              ")]],2)])])])])]),e._v(" "),t("historias-clinicas-modal",{attrs:{paciente:e.pacienteHumano}})],1)}),[],!1,null,null,null).exports},755:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const i={props:{id:{type:String,default:"modalHora"},hora:{type:String,required:!0},top:{type:Number,default:0}},data:function(){return{horas:0,minutos:0,segundos:0}},mounted:function(){var e=this;$("#".concat(this.id)).on("show.bs.modal",(function(t){t.target.id===e.id&&e.cargarDatos()})),$("#".concat(this.id)).on("shown.bs.modal",(function(){return $("#".concat(e.id,"Hora")).focus()})),$("#".concat(this.id)).on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{cargarDatos:function(){var e=this.hora;this.hora||(e=moment().format("HH:mm:ss"));var t=r(e.split(":"),3),a=t[0];this.horas=void 0===a?"00":a;var o=t[1];this.minutos=void 0===o?"00":o;var i=t[2];this.segundos=void 0===i?"00":i},limpiar:function(){this.horas="",this.minutos="",this.segundos=""},seleccionar:function(){var e,t=this.horas.toString().padStart(2,"0"),a=this.minutos.toString().padStart(2,"0"),r="".concat(t,":").concat(a,":").concat(null!==(e=this.segundos)&&void 0!==e?e:moment().format("ss"));this.$emit("hora-seleccionada",r),$("#".concat(this.id)).modal("hide")}},computed:{estiloTop:function(){return this.top?"top: ".concat(this.top,"px"):""}}};const s=(0,a(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.seleccionar.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"".concat(e.id,"Hora")}},[e._v("Hora")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.horas,expression:"horas"}],staticClass:"form-control",attrs:{id:"".concat(e.id,"Hora"),type:"number",min:"0",max:"23",step:"1",required:""},domProps:{value:e.horas},on:{input:function(t){t.target.composing||(e.horas=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"".concat(e.id,"Minuto")}},[e._v("Minuto")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.minutos,expression:"minutos"}],staticClass:"form-control",attrs:{id:"".concat(e.id,"Minuto"),type:"number",min:"0",max:"59",step:"1",required:""},domProps:{value:e.minutos},on:{input:function(t){t.target.composing||(e.minutos=t.target.value)}}})])]),e._v(" "),e._m(1)],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:!(e.horas&&e.minutos)}},[e._v("\n            Seleccionar\n          ")])])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Definir hora")])])},function(){var e=this._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("small",[this._v("*Usar formato horario de 24 horas")])])])}],!1,null,null,null).exports},7410:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var r=a(6570),o=a(6235),i=a(755),s=a(4590);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}const p={components:{DatosOrden:r.Z,DetalleOrdenEstado:o.Z,HoraModal:i.Z},props:{urlApiLocal:{type:String},mostrarIncluirMembrete:{type:Boolean,default:!1},mostrarIncluirFirma:{type:Boolean,default:!1},habilitarTooltip:{type:Boolean,default:!1}},data:function(){return{procesando:!1,cargandoSecciones:!1,cargandoDetallesOrden:!1,tipoDocumento:"",registro:{},detallesOrden:[],muestras:[],impresora:"PDF",impresoras:[],etiqueta:[],tamanoPapel:"",copias:1,secciones:[],carnetGrupoSanguineo:{detalleOrdenId:""},opciones:{lang:"",registrarImpresion:!1,seccionPorHoja:!1,incluirMembrete:!1,incluirFirma:!1,incluirReportados:!1,existenExamenesValidados:null,etiquetasDatosPaciente:0,etiquetasQr:0,incluirMuestrasPendientes:!1,ocultarTexto:!1,codigoBarras:"",ciudad:"",resumido:!1,excluirObservaciones:!1,horaIngreso:"",horaSalida:"",firmaUsuarioIngresa:!1},filtros:{tipo:"",seleccionadosTodosDetallesOrden:!1,seleccionadosTodosMuestras:!1,detallesOrdenIds:[],muestrasIds:[],seccionId:"",examenAcreditado:null}}},mounted:function(){var e=this;this.habilitarTooltip&&$("body").tooltip({selector:'[rel="tooltip"]',container:"body",trigger:"hover"}),$("#modalImprimir").on("show.bs.modal",(function(t){"modalImprimir"!==t.target.id||!t.relatedTarget||t.relatedTarget instanceof HTMLElement||e.cargarDatos(t.relatedTarget)})),$("#modalImprimir").on("hide.bs.modal",(function(t){"modalImprimir"===t.target.id&&e.limpiar()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},cargarDatos:function(e){if(e.registro){if(this.registro=e.registro,this.tipoDocumento=e.tipoDocumento,this.opciones.horaIngreso=this.fechaALocal(e.registro.fecha_orden,"HH:mm:ss"),this.cargarTipo(e),this.tamanoPapel=this.esRecibo?"a5":e.tamanoPapel,this.copias=1,this.opciones.existenExamenesValidados=e.existenExamenesValidados,this.esAsistencia){var t=localStorage.getItem("ciudad-certificado-asistencia");t&&(this.opciones.ciudad=t),this.opciones.firmaUsuarioIngresa="true"===localStorage.getItem("firma-usuario-ingresa-certificado-asistencia");var a=localStorage.getItem("tamano-papel-certificado-asistencia");a&&(this.tamanoPapel=a)}if(this.esRecibo){var r=localStorage.getItem("copias-recibo");r>0&&(this.copias=r)}this.esRemision&&(this.opciones.resumido="true"===localStorage.getItem("remision-resumido"),this.opciones.excluirObservaciones="true"===localStorage.getItem("remision-excluir-observaciones")),this.cargarImpresoras(),this.esEtiquetas&&this.cargarConfiguracionesEtiquetas()}},limpiar:function(){this.registro={},this.detallesOrden=[],this.muestras=[],this.opciones.registrarImpresion=!1,this.opciones.incluirReportados=!1,this.opciones.seccionPorHoja=!1,this.opciones.incluirMembrete=!1,this.opciones.incluirFirma=!1,this.opciones.lang="",this.opciones.etiquetasDatosPaciente=0,this.opciones.etiquetasQr=0,this.opciones.incluirMuestrasPendientes=!1,this.opciones.ciudad="",this.opciones.existenExamenesValidados=null,this.opciones.ocultarTexto=!1,this.opciones.horaSalida="",this.opciones.horaIngreso="",this.opciones.firmaUsuarioIngresa=!1,this.filtros.detallesOrdenIds=[],this.filtros.seccionId="",this.filtros.muestrasIds=[],this.filtros.examenAcreditado=null,this.secciones=[],this.cargandoSecciones=!1,this.procesando=!1,this.impresora="PDF",this.carnetGrupoSanguineo.detalleOrdenId=""},cargarTipo:function(e){var t=this;this.filtros.tipo="examenes",this.esResultados&&this.cargarDetallesOrden().then((function(){return t.seleccionarTodosDetallesOrden()})),this.esAsistencia&&this.cargarDetallesOrden(),this.esCarnetGrupoSanguineo&&this.cargarDetallesOrden().then((function(){var e=t.detallesOrden.filter((function(e){return e.examen.documentos.includes(s.Ah.CARNET_GRUPO_SANGUINEO)}));t.carnetGrupoSanguineo.detalleOrdenId=e[0].id})),this.esEtiquetas&&(this.filtros.tipo="muestras",this.cargarDetallesOrden().then((function(){_.isEmpty(e.muestrasIds)?t.seleccionarTodasLasMuestras():t.filtros.muestrasIds=e.muestrasIds})))},imprimir:function(){if(this.esEtiquetas){if(!this.etiqueta.alto||!this.etiqueta.ancho)return void this.mostrarErrores("Falta configuración de tamaño de etiqueta");if(_.isEmpty(this.filtros.detallesOrdenIds)&&_.isEmpty(this.filtros.muestrasIds)&&0===this.opciones.etiquetasDatosPaciente&&0===this.opciones.etiquetasQr)return void this.mostrarErrores("No existen etiquetas para imprimir")}this.procesando=!0,this.esImpresorsaPdf?this.imprimirEnImpresoraPDF():this.imprimirEnImpresoraDeComputadora()},imprimirEnImpresoraPDF:function(){var e=this,t=this.obtenerUrlPdf(),a=this.esEtiquetas?"height=400,width=700,left=20,top=20,,scrollbars=yes,menubar=no":null,r=window.open(t,"_blank",a);if(!this.opciones.registrarImpresion)return this.emitirResultadoDespuesDeImprimir(),void(this.procesando=!1);if(r){var o=this.registro.id;-1!==navigator.userAgent.indexOf("Firefox")?$(r).ready((function(){return e.obtenerCantidadDetallesOrdenImpresos(o)})):$(r).on("load",(function(){return e.obtenerCantidadDetallesOrdenImpresos(o)}))}$("#modalImprimir").modal("hide"),this.procesando=!1},imprimirEnImpresoraDeComputadora:function(){var e=this,t=[];Promise.resolve().then((function(){return e.descargarPdf()})).then((function(a){if(void 0!==a){var r=e.obtenerNombreArchivoDeHeader(a);return t=e.obtenerIdDetallesOrdenDeHeader(a),e.enviarAOrionPrintServer(r,a.data)}})).then((function(a){return void 0===a?"error":e.opciones.registrarImpresion&&!_.isEmpty(t)?e.registrarResultadosImpresos(t):"exito"})).then((function(t){if("object"===m(t)){var a=t.data.data,r=e.obtenerMensajePorCantidadDeExamenesImpresos(a.cantidadDetallesOrdenImpresos);e.emitirResultadoDespuesDeImprimir(r,a)}"exito"===t&&e.emitirResultadoDespuesDeImprimir(),e.procesando=!1}))},obtenerMensajePorCantidadDeExamenesImpresos:function(e){return"Existen ".concat(e,1!==e?" exámenes impresos":" examen impreso")},obtenerCantidadDetallesOrdenImpresos:function(e){var t=this;axios.get("/api/ordenes/".concat(e,"/impresion/resumen")).then((function(e){var a=e.data.data,r=t.obtenerMensajePorCantidadDeExamenesImpresos(a.cantidadDetallesOrdenImpresos);t.emitirResultadoDespuesDeImprimir(r,a),t.procesando=!1})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al otbener cantidad de exámenes impresos!",a)}))},registrarResultadosImpresos:function(e){var t=this,a={detallesOrdenIds:e};return axios.post("/api/ordenes/".concat(this.registro.id,"/impresion"),a).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al registrar impresión de orden!",a)}))},descargarPdf:function(){var e=this,t=this.obtenerUrlPdf();return axios.get(t,{responseType:"blob",headers:{agent:"print"}}).catch((function(){e.mostrarErrores("Error al imprimir","No existen resultados con las opciones escogidas")}))},obtenerUrlPdf:function(){if(this.esRecibo)return"/ordenes/".concat(this.registro.id,"/recibo");if(this.esResultados){var e=this.opciones.incluirReportados?"vista-previa":"validado",t=this.obtenerParametros();return"/reportes/".concat(this.registro.id,"/pdf/").concat(e).concat(t)}if(this.esEtiquetas){var a=this.obtenerParametros();return"/ordenes/".concat(this.registro.id,"/pdf-etiquetas").concat(a)}if(this.esAsistencia){var r=this.obtenerParametros();return"/ordenes/".concat(this.registro.id,"/documentos/certificado-asistencia/pdf").concat(r)}if(this.esRemision){var o=this.obtenerParametros();return"/remisiones/".concat(this.registro.id,"/pdf").concat(o)}if(this.esConsentimientoInformado)return"/ordenes/".concat(this.registro.id,"/documentos/consentimiento-informado/pdf");if(this.esCarnetGrupoSanguineo){var i=this.obtenerParametros();return"/ordenes/".concat(this.registro.id,"/documentos/carnet-grupo-sanguineo/pdf").concat(i)}if(this.esPruebaPostprandial)return"/ordenes/".concat(this.registro.id,"/documentos/prueba-postprandial/pdf");if(this.esCurvaGlocosa)return"/ordenes/".concat(this.registro.id,"/documentos/curva-glucosa/pdf");if(this.esGestionMuestra)return"/ordenes/".concat(this.registro.id,"/documentos/gestion-muestra/pdf");if(this.esFlujoVaginal){var s=this.obtenerParametros();return"/ordenes/".concat(this.registro.id,"/documentos/citologia/pdf").concat(s)}if(this.esAntigenoChlamydiaTrachomatis){var n=this.obtenerParametros();return"/ordenes/".concat(this.registro.id,"/documentos/citologia/pdf").concat(n)}if(this.esCitologiaVaginal){var c=this.obtenerParametros();return"/ordenes/".concat(this.registro.id,"/documentos/citologia/pdf").concat(c)}if(this.esVirusPapilomaHumano){var l=this.obtenerParametros();return"/ordenes/".concat(this.registro.id,"/documentos/citologia/pdf").concat(l)}return"#"},obtenerParametros:function(){var e=this,t={membrete:this.opciones.incluirMembrete?"1":null,incluirFirma:this.opciones.incluirFirma?"1":null,resumido:this.opciones.resumido?"1":null,excluirObservaciones:this.opciones.excluirObservaciones?"1":null,lang:this.opciones.lang,registrarImpresion:this.opciones.registrarImpresion?"1":null,seccionPorHoja:this.opciones.seccionPorHoja?"1":null,etiquetasDatosPaciente:null,etiquetasQr:null,incluirMuestrasPendientes:null,ocultarTexto:this.opciones.ocultarTexto?this.opciones.ocultarTexto:null,codigoBarras:this.opciones.codigoBarras?this.opciones.codigoBarras:null,ciudad:this.opciones.ciudad?this.opciones.ciudad:null,seccionId:this.filtros.seccionId?this.filtros.seccionId:null,examenAcreditado:this.filtros.examenAcreditado?this.filtros.examenAcreditado:null,tamanoPapel:this.esAsistencia?this.tamanoPapel:null,detalleOrdenId:this.esCarnetGrupoSanguineo?this.carnetGrupoSanguineo.detalleOrdenId:null,horaIngreso:this.esAsistencia?this.opciones.horaIngreso:null,horaSalida:this.esAsistencia?this.opciones.horaSalida:null,firmaUsuarioIngresa:this.esAsistencia?this.opciones.firmaUsuarioIngresa:null,tipoDocumento:this.esFlujoVaginal||this.esAntigenoChlamydiaTrachomatis||this.esCitologiaVaginal||this.esVirusPapilomaHumano?this.tipoDocumento:null,detallesOrdenIds:null,sinEtiquetasMuestra:null};if(this.esEtiquetas&&(t.etiquetasDatosPaciente=this.opciones.etiquetasDatosPaciente,t.etiquetasQr=this.opciones.etiquetasQr,t.incluirMuestrasPendientes=this.opciones.incluirMuestrasPendientes?"1":"0","examenes"===this.filtros.tipo&&(t.sinEtiquetasMuestra=_.isEmpty(this.filtros.detallesOrdenIds)),"muestras"===this.filtros.tipo&&(t.sinEtiquetasMuestra=_.isEmpty(this.filtros.muestrasIds))),"examenes"===this.filtros.tipo&&(t.detallesOrdenIds=this.filtros.detallesOrdenIds),(this.esResultados||this.esAsistencia)&&(t.sinEtiquetasMuestra=_.isEmpty(this.filtros.detallesOrdenIds)),t=this.obtenerParametrosUrl(t),"muestras"===this.filtros.tipo&&!_.isEmpty(this.filtros.muestrasIds)){var a,r=[],o=d(this.filtros.muestrasIds);try{var i=function(){var t=a.value,o=e.muestras.find((function(e){return e.id===t}));o&&r.push("muestras[".concat(o.id,"]=").concat(o.numero_etiquetas))};for(o.s();!(a=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}t=(t?"".concat(t,"&"):"?")+r.join("&")}return t},enviarAOrionPrintServer:function(e,t){var a=this,r=new FormData;r.append("archivo",t,e);var o={nombreImpresora:this.impresora,tamanoPapel:this.tamanoPapel?this.tamanoPapel.toUpperCase():"",alto:"a4"===this.tamanoPapel?297:210,ancho:"a4"===this.tamanoPapel?210:148,copias:this.copias>0?this.copias:null};return this.esEtiquetas&&(o.tamanoPapel=null,o.alto=this.etiqueta.alto,o.ancho=this.etiqueta.ancho),r.append("parametros",JSON.stringify(o)),axios.post("".concat(this.urlApiLocal,"/api/imprimir/etiquetas"),r).catch((function(e){var t=a.procesarErroresOrionPrintServer(e);a.mostrarErrores("¡Error al imprimir!",t)}))},emitirResultadoDespuesDeImprimir:function(e,t){var a={mensajes:["".concat(this.tituloExitoImpresion," a imprimir"),"Impresora: ".concat(this.impresora)],actualizar:!!t,orden:t};e&&a.mensajes.push(e),this.$emit("documento-impreso",a),$("#modalImprimir").modal("hide")},cargarImpresoras:function(){var e=this;this.impresoras=["PDF"],this.urlApiLocal?axios.get("".concat(this.urlApiLocal,"/api/impresoras")).then((function(t){var a=t.data,r=e.exlcuirImpresorasFaxXpsOtras(a);e.impresoras=e.impresoras.concat(r)})).catch((function(t){var a=e.procesarErroresOrionPrintServer(t);console.error("¡No se pudo cargar impresoras de este terminal!",a)})).then((function(){return e.cargarImpresoraDesdeStorage()})):console.error("No existe url de Orión Print Server")},cargarConfiguracionesEtiquetas:function(){var e=this;axios.get("/api/etiquetas/configuraciones").then((function(t){var a=t.data.data;e.etiqueta=a})).catch((function(t){var a=e.procesarErroresOrionPrintServer(t);console.error("No se pudo cargar configuraciones de etiquetas",a)}))},exlcuirImpresorasFaxXpsOtras:function(e){var t=["anydesk","fax","onenote","xps","pdf"];return this.esEtiquetas||(t.push("zebra"),t.push("zdesigner")),e.filter((function(e){return void 0===t.find((function(t){return e.toLowerCase().includes(t.toLowerCase())}))}))},cargarImpresoraDesdeStorage:function(){var e=this.obtenerImpresoraDeStorage();if(e){var t=this.impresoras.find((function(t){return t===e}));t?this.impresora=t:console.error("No se encontró la impresora ".concat(e))}},impresoraSeleccionada:function(e){e.target.value&&(this.esRecibo&&localStorage.setItem("impresora-recibo",e.target.value),this.esResultados&&localStorage.setItem("impresora-resultados",e.target.value),this.esEtiquetas&&localStorage.setItem("impresora-etiquetas",e.target.value),this.esAsistencia&&localStorage.setItem("impresora-certificado-asistencia",e.target.value),this.esRemision&&localStorage.setItem("impresora-remision",e.target.value),this.esConsentimientoInformado&&localStorage.setItem("impresora-consentimiento-informado",e.target.value),this.esCarnetGrupoSanguineo&&localStorage.setItem("impresora-carnet-grupo-sanguineo",e.target.value),this.esPruebaPostprandial&&localStorage.setItem("impresora-prueba-postprandial",e.target.value),this.esCurvaGlocosa&&localStorage.setItem("impresora-curva-glucosa",e.target.value),this.esGestionMuestra&&localStorage.setItem("impresora-gestion-muestra",e.target.value),this.esFlujoVaginal&&localStorage.setItem("impresora-flujo-vaginal",e.target.value),this.esAntigenoChlamydiaTrachomatis&&localStorage.setItem("impresora-antigeno-chlamydia-trachomatis",e.target.value),this.esCitologiaVaginal&&localStorage.setItem("impresora-citologia-vaginal",e.target.value),this.esVirusPapilomaHumano&&localStorage.setItem("impresora-virus-papiloma-humano",e.target.value))},cambioResumido:function(e){localStorage.setItem("remision-resumido",e.target.checked)},cambioExcluirObservaciones:function(e){localStorage.setItem("remision-excluir-observaciones",e.target.checked)},obtenerNombreArchivoDeHeader:function(e){var t=e.headers["content-disposition"];return t.substring(t.indexOf('"')+1,t.lastIndexOf('"'))},obtenerIdDetallesOrdenDeHeader:function(e){var t=e.headers["content-ids"];return t?t.split(","):[]},obtenerImpresoraDeStorage:function(){return this.esRecibo?localStorage.getItem("impresora-recibo"):this.esResultados?localStorage.getItem("impresora-resultados"):this.esEtiquetas?localStorage.getItem("impresora-etiquetas"):this.esAsistencia?localStorage.getItem("impresora-certificado-asistencia"):this.esRemision?localStorage.getItem("impresora-remision"):this.esConsentimientoInformado?localStorage.getItem("impresora-consentimiento-informado"):this.esCarnetGrupoSanguineo?localStorage.getItem("impresora-carnet-grupo-sanguineo"):this.esPruebaPostprandial?localStorage.getItem("impresora-prueba-postprandial"):this.esCurvaGlocosa?localStorage.getItem("impresora-curva-glucosa"):this.esGestionMuestra?localStorage.getItem("impresora-gestion-muestra"):this.esFlujoVaginal?localStorage.getItem("impresora-flujo-vaginal"):this.esAntigenoChlamydiaTrachomatis?localStorage.getItem("impresora-antigeno-chlamydia-trachomatis"):this.esCitologiaVaginal?localStorage.getItem("impresora-citologia-vaginal"):this.esVirusPapilomaHumano?localStorage.getItem("impresora-virus-papiloma-humano"):""},seleccionarTipoFiltro:function(e){switch(this.filtros.tipo=e,this.filtros.detallesOrdenIds=[],this.filtros.muestrasIds=[],this.filtros.seccionId="",this.filtros.examenAcreditado=null,this.filtros.seleccionadosTodosDetallesOrden=!1,this.filtros.seleccionadosTodosMuestras=!1,e){case"examenes":this.seleccionarTodosDetallesOrden();break;case"muestras":this.seleccionarTodasLasMuestras();break;case"seccion":_.isEmpty(this.secciones)&&this.cargarSecciones()}},cargarDetallesOrden:function(){var e=this;return this.cargandoDetallesOrden=!0,axios.get("/api/ordenes/".concat(this.registro.id,"/detalles"),{params:{incluir:"examen,impresoPor,muestras"}}).then((function(t){var a=t.data.data;e.detallesOrden=a,e.cargarMuestras()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar exámenes",a)})).then((function(){return e.cargandoDetallesOrden=!1}))},cargarSecciones:function(){var e=this;this.cargandoSecciones=!0;var t={estadosResultados:this.opciones.incluirReportados?"R,L,V,X":"L,V,X"};axios.get("/api/ordenes/".concat(this.registro.id,"/secciones"),{params:t}).then((function(t){var a=t.data;e.secciones=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar secciones de orden",a)})).then((function(){return e.cargandoSecciones=!1}))},cambioIncluirReportados:function(e){if(e.target.checked&&(this.opciones.registrarImpresion=!1),!e.target.checked&&(!1===this.opciones.existenExamenesValidados&&(this.filtros.tipo="todos",this.filtros.detallesOrdenIds=[],this.filtros.seccionId="",this.filtros.examenAcreditado=null),"examenes"===this.filtros.tipo)){var t=this.detallesOrdenParaImprimir.map((function(e){return e.id})),a=this.filtros.detallesOrdenIds.filter((function(e){return!t.includes(e)}));this.filtros.detallesOrdenIds=this.filtros.detallesOrdenIds.filter((function(e){return!a.includes(e)}))}"V"!==this.registro.estado&&(this.secciones=[]),"seccion"===this.filtros.tipo&&"V"!==this.registro.estado&&(this.filtros.seccionId="",this.cargarSecciones())},procesarErroresOrionPrintServer:function(e){return void 0===e.response?"El servidor de impresión se encuentra apagado":this.procesarErrorResponse(e)},alternarSeleccionDetallesOrden:function(){this.filtros.detallesOrdenIds=[],this.filtros.seleccionadosTodosDetallesOrden&&this.seleccionarTodosDetallesOrden()},seleccionarTodosDetallesOrden:function(){var e=this;this.filtros.detallesOrdenIds=this.detallesOrdenParaImprimir.map((function(t){return!e.opciones.incluirMuestrasPendientes&&t.todasMuestrasPendientes?null:t.id})).filter((function(e){return null!==e}))},alternarSeleccionMuestras:function(){this.filtros.muestrasIds=[],this.filtros.seleccionadosTodosMuestras&&this.seleccionarTodasLasMuestras()},seleccionarTodasLasMuestras:function(){var e=this;this.filtros.muestrasIds=this.muestras.map((function(t){return!e.opciones.incluirMuestrasPendientes&&[s.zm.PENDIENTE].includes(t.pivot.estado)?null:t.id})).filter((function(e){return null!==e}))},seleccionarDetalleOrden:function(e){if(this.opciones.incluirMuestrasPendientes||!e.todasMuestrasPendientes)if(this.filtros.detallesOrdenIds.includes(e.id)){var t=this.filtros.detallesOrdenIds.indexOf(e.id);this.filtros.detallesOrdenIds.splice(t,1)}else this.filtros.detallesOrdenIds.push(e.id)},seleccionarMuestra:function(e){if(this.opciones.incluirMuestrasPendientes||![s.zm.PENDIENTE].includes(e.pivot.estado))if(this.filtros.muestrasIds.includes(e.id)){var t=this.filtros.muestrasIds.indexOf(e.id);this.filtros.muestrasIds.splice(t,1)}else this.filtros.muestrasIds.push(e.id)},langClick:function(e){this.opciones.lang===e.target.value&&(this.opciones.lang="")},cambioCiudad:function(){this.esAsistencia&&localStorage.setItem("ciudad-certificado-asistencia",this.opciones.ciudad)},cambioFirmaUsuarioIngresa:function(e){this.esAsistencia&&localStorage.setItem("firma-usuario-ingresa-certificado-asistencia",e.target.checked.toString())},cambioTamanoPapel:function(){this.esAsistencia&&localStorage.setItem("tamano-papel-certificado-asistencia",this.tamanoPapel)},cambioCopias:function(){this.copias>0&&localStorage.setItem("copias-recibo",this.copias)},cargarMuestras:function(){if(this.muestras=[],this.registro.id&&this.detallesOrden.length>0){var e=[];this.detallesOrden.forEach((function(t){t.muestras.forEach((function(a){var r=e[a.id];r||((r=a).numero_etiquetas=t.examen.numero_etiquetas,e[a.id]=r),t.examen.numero_etiquetas>r.numero_etiquetas&&(e[a.id].numero_etiquetas=t.examen.numero_etiquetas),a.pivot.estado===s.zm.RECIBIDA&&(e[a.id].pivot.estado=a.pivot.estado)}))})),this.muestras=e.filter((function(e){return e})).map((function(e){return e}))}},muestrasPendientesSeleccionado:function(e){e.target.checked||(this.filtros.detallesOrdenIds=[],this.filtros.muestrasIds=[])},cambioNumeroEtiqueta:function(e){e.numero_etiquetas>0||(this.filtros.muestrasIds=this.filtros.muestrasIds.filter((function(t){return t!==e.id})))},horaSeleccionada:function(e,t){this.opciones[t]=e},abrirModalHora:function(e){$("#".concat(e)).modal({backdrop:"static"})}},computed:{esImpresorsaPdf:function(){return"PDF"===this.impresora},esRecibo:function(){return"recibo"===this.tipoDocumento},esResultados:function(){return"resultados"===this.tipoDocumento},esAsistencia:function(){return this.tipoDocumento===s.Ah.CERTIFICADO_ASISTENCIA},esEtiquetas:function(){return"etiquetas"===this.tipoDocumento},esRemision:function(){return"remision"===this.tipoDocumento},esConsentimientoInformado:function(){return this.tipoDocumento===s.Ah.CONSENTIMIENTO_INFORMADO},esCarnetGrupoSanguineo:function(){return this.tipoDocumento===s.Ah.CARNET_GRUPO_SANGUINEO},esPruebaPostprandial:function(){return this.tipoDocumento===s.Ah.PRUEBA_POSTPRANDIAL},esCurvaGlocosa:function(){return this.tipoDocumento===s.Ah.CURVA_GLUCOSA},esGestionMuestra:function(){return this.tipoDocumento===s.Ah.GESTION_MUESTRA},esFlujoVaginal:function(){return this.tipoDocumento===s.Ah.FLUJO_VAGINAL},esAntigenoChlamydiaTrachomatis:function(){return this.tipoDocumento===s.Ah.ANTIGENO_CHLAMYDIA_TRACHOMATIS},esCitologiaVaginal:function(){return this.tipoDocumento===s.Ah.CITOLOGIA_VAGINAL},esVirusPapilomaHumano:function(){return this.tipoDocumento===s.Ah.VIRUS_PAPILOMA_HUMANO},titulo:function(){return this.esRecibo?"Imprimir recibo":this.esResultados?"Imprimir resultados":this.esEtiquetas?"Imprimir etiquetas":this.esAsistencia?"Imprimir certificado de asistencia":this.esRemision?"Imprimir remisión":this.esConsentimientoInformado?"Imprimir consentimiento informado":this.esCarnetGrupoSanguineo?"Imprimir carnet de grupo sanguíneo":this.esPruebaPostprandial?"Imprimir instructivo para toma de prueba postprandial":this.esCurvaGlocosa?"Imprimir instructivo para toma de curva de glucosa":this.esGestionMuestra?"Imprimir gestión de muestra":this.esFlujoVaginal?"Imprimir examen de flujo vaginal":this.esAntigenoChlamydiaTrachomatis?"Imprimir Chlamydia Trachimatis antígeno":this.esCitologiaVaginal?"Imprimir citología vaginal":this.esVirusPapilomaHumano?"Imprimir detección de virus del papiloma humano":"Imprimir documento no especificado"},tituloExitoImpresion:function(){return this.esRecibo?"Recibo enviado":this.esResultados?"Resultados enviados":this.esEtiquetas?"Etiquetas enviadas":"Documento enviado"},idImprimir:function(){return this.esRecibo?"imprimirRecibo":this.esResultados?"imprimirResultados":this.esEtiquetas?"imprimirEtiquetas":this.esAsistencia?"imprimirAsistencia":this.esRemision?"imprimirRemision":this.esConsentimientoInformado?"imprimirConsentimientoInformado":this.esCarnetGrupoSanguineo?"imprimirCarnetGrupoSanguineo":this.esPruebaPostprandial?"imprimirPruebaPostprandial":this.esCurvaGlocosa?"imprimirCurvaGlocosa":this.esGestionMuestra?"imprimirGestionMuestra":this.esFlujoVaginal?"imprimirExamenFlujoVaginal":this.esAntigenoChlamydiaTrachomatis?"imprimirChlamydiaTrachomatis":this.esCitologiaVaginal?"imprimirCitologiaVaginal":this.esVirusPapilomaHumano?"imprimirVirusPapilomaHumano":""},etiquetaImprimir:function(){var e="Imprimir";return this.opciones.incluirReportados&&(e="Vista previa"),this.opciones.incluirMembrete&&(e+=" con membrete"),e},detallesOrdenConMuestra:function(){if(this.detallesOrden.length>0){var e=[s.zm.PENDIENTE];return this.detallesOrden.map((function(t){return c(c({},t),{},{todasMuestrasPendientes:t.muestras.reduce((function(t,a){var r=a.pivot;return t&&e.includes(r.estado)}),!0),muestraPendiente:t.muestras.reduce((function(t,a){var r=a.pivot;return t||e.includes(r.estado)}),!1)})}))}return[]},detallesOrdenParaVistaPrevia:function(){return this.registro.id&&this.detallesOrden.length>0?this.detallesOrdenConMuestra.filter((function(e){return["R","X","L","V"].includes(e.estado)})):[]},detallesOrdenParaDefinitivo:function(){return this.registro.id&&this.detallesOrden.length>0?this.detallesOrdenConMuestra.filter((function(e){return["X","L","V"].includes(e.estado)})):[]},detallesOrdenParaImprimir:function(){return this.esResultados&&this.opciones.incluirReportados?this.detallesOrdenParaVistaPrevia:this.esResultados&&!this.opciones.incluirReportados?this.detallesOrdenParaDefinitivo:this.esEtiquetas||this.esAsistencia?this.detallesOrdenConMuestra:void 0},puedeImprimir:function(){return this.esResultados?!this.procesando&&this.impresora&&(!1!==this.opciones.existenExamenesValidados||this.opciones.incluirReportados)&&(this.opciones.incluirReportados||!this.tieneSaldoPendiente):!this.procesando&&this.impresora},tieneSaldoPendiente:function(){return!this.registro||!this.registro.subempresa||!this.registro.subempresa.empresa.imprimir_resultados_ordenes_impagas&&0!==this.registro.saldo}},watch:{"filtros.detallesOrdenIds":function(e){this.opciones.incluirMuestrasPendientes?this.filtros.seleccionadosTodosDetallesOrden=e.length>0&&e.length===this.detallesOrdenParaImprimir.length:this.filtros.seleccionadosTodosDetallesOrden=e.length>0&&e.length===this.detallesOrdenParaImprimir.filter((function(e){return!e.todasMuestrasPendientes})).length},"filtros.muestrasIds":function(e){var t=this;this.opciones.incluirMuestrasPendientes?this.filtros.seleccionadosTodosMuestras=e&&e.length>0&&e.length===this.muestras.length:this.filtros.seleccionadosTodosMuestras=e&&e.length>0&&e.length===this.muestras.filter((function(e){var a=e.pivot;return!t.opciones.incluirMuestrasPendientes&&![s.zm.PENDIENTE].includes(a.estado)})).length}}};var f=a(3379),v=a.n(f),h=a(8357),g={insert:"head",singleton:!1};v()(h.Z,g);h.Z.locals;const b=(0,a(1900).Z)(p,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"modalImprimir",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",class:{"modal-lg":e.esResultados||e.esEtiquetas||e.esAsistencia},attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.imprimir.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v(e._s(e.titulo))]),e._v(" "),e.esRemision?e._e():t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,"mostrar-saldo":e.esRecibo||e.esResultados,orden:e.registro}})],1),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[e.esResultados||e.esEtiquetas||e.esAsistencia?t("div",{staticClass:"col-md-8"},[t("div",{staticClass:"collapse in",staticStyle:{"padding-top":"5px"},attrs:{id:"resultados"}},[!1!==e.opciones.existenExamenesValidados||e.opciones.incluirReportados?t("div",{staticClass:"btn-group btn-toggle btn-group-sm"},[t("button",{staticClass:"btn btn-default btn-sm",class:{"btn-primary":"examenes"===e.filtros.tipo},attrs:{type:"button"},on:{click:function(t){return e.seleccionarTipoFiltro("examenes")}}},[e._v("\n                      Exámenes\n                    ")]),e._v(" "),e.esResultados?t("button",{staticClass:"btn btn-default btn-sm",class:{"btn-primary":"seccion"===e.filtros.tipo},attrs:{type:"button"},on:{click:function(t){return e.seleccionarTipoFiltro("seccion")}}},[e._v("\n                      Sección\n                    ")]):e._e(),e._v(" "),e.esResultados?t("button",{staticClass:"btn btn-default btn-sm",class:{"btn-primary":"examenAcreditado"===e.filtros.tipo},attrs:{type:"button"},on:{click:function(t){return e.seleccionarTipoFiltro("examenAcreditado")}}},[e._v("\n                      Acreditación\n                    ")]):e._e(),e._v(" "),e.esEtiquetas?t("button",{staticClass:"btn btn-default btn-sm",class:{"btn-primary":"muestras"===e.filtros.tipo},attrs:{type:"button"},on:{click:function(t){return e.seleccionarTipoFiltro("muestras")}}},[e._v("\n                      Muestras\n                    ")]):e._e()]):e._e(),e._v(" "),"examenes"===e.filtros.tipo?[t("div",{staticClass:"row",staticStyle:{"padding-top":"12px"}},[t("div",{staticClass:"col-md-12",staticStyle:{"max-height":"300px","overflow-y":"auto"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoDetallesOrden,expression:"cargandoDetallesOrden"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" "),e.cargandoDetallesOrden||0!==e.detallesOrdenParaImprimir.length?e._e():[e._v("\n                          No existen exámenes validados\n                        ")],e._v(" "),e.detallesOrdenParaImprimir.length>0?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.seleccionadosTodosDetallesOrden,expression:"filtros.seleccionadosTodosDetallesOrden"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.seleccionadosTodosDetallesOrden)?e._i(e.filtros.seleccionadosTodosDetallesOrden,null)>-1:e.filtros.seleccionadosTodosDetallesOrden},on:{change:[function(t){var a=e.filtros.seleccionadosTodosDetallesOrden,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"seleccionadosTodosDetallesOrden",a.concat([null])):i>-1&&e.$set(e.filtros,"seleccionadosTodosDetallesOrden",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"seleccionadosTodosDetallesOrden",o)},e.alternarSeleccionDetallesOrden]}})]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("\n                              Examen\n                              "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.filtros.detallesOrdenIds.length>0,expression:"filtros.detallesOrdenIds.length > 0"}],staticClass:"badge cursor-menu",attrs:{title:"Seleccionados",rel:"tooltip"}},[e._v("\n                                "+e._s(e.filtros.detallesOrdenIds.length)+"\n                              ")])]),e._v(" "),e.esEtiquetas?t("th",{staticClass:"col-sm-1 text-center"},[e._v("Muestra")]):e._e(),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),e.esResultados?t("th",{staticClass:"col-sm-1 text-left"},[e._v("Impreso")]):e._e()])]),e._v(" "),t("tbody",e._l(e.detallesOrdenParaImprimir,(function(a){return t("tr",{staticClass:"puntero",on:{click:function(t){return e.seleccionarDetalleOrden(a)}}},[t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.detallesOrdenIds,expression:"filtros.detallesOrdenIds"}],attrs:{type:"checkbox",disabled:!e.opciones.incluirMuestrasPendientes&&a.todasMuestrasPendientes},domProps:{value:a.id,checked:Array.isArray(e.filtros.detallesOrdenIds)?e._i(e.filtros.detallesOrdenIds,a.id)>-1:e.filtros.detallesOrdenIds},on:{change:function(t){var r=e.filtros.detallesOrdenIds,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.id,n=e._i(r,s);o.checked?n<0&&e.$set(e.filtros,"detallesOrdenIds",r.concat([s])):n>-1&&e.$set(e.filtros,"detallesOrdenIds",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.filtros,"detallesOrdenIds",i)}}})]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.examen.nombre))]),e._v(" "),e.esEtiquetas?t("td",{staticClass:"text-center"},["X"===a.estado?[e._v("\n                                No procesada\n                              ")]:1===a.muestras.length?[e._v("\n                                "+e._s(a.todasMuestrasPendientes?"Pendiente":"Recibida")+"\n                              ")]:[e._v("\n                                "+e._s(a.muestraPendiente?"Varias muestras":"Recibida")+"\n                              ")]],2):e._e(),e._v(" "),t("td",{staticClass:"text-center"},[t("detalle-orden-estado",{attrs:{estado:a.estado}})],1),e._v(" "),e.esResultados?t("td",{staticClass:"text-center"},[a.fecha_imprime?t("i",{staticClass:"fas fa-print",attrs:{rel:"tooltip","data-html":"true",title:"<strong>Impreso por:</strong> ".concat(a.impreso_por.nombre_usuario,"<br><strong>Fecha impreso:</strong> ").concat(a.fecha_imprime)}}):e._e(),e._v(" "),a.fecha_imprime?t("i",{staticClass:"icon-stack-2x fa fa-check text-gris"}):e._e()]):e._e()])})),0)]):e._e()],2)])]:e._e(),e._v(" "),"seccion"===e.filtros.tipo?[t("div",{staticClass:"row",staticStyle:{"padding-top":"15px","padding-bottom":"15px"}},[t("div",{staticClass:"col-md-10"},[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"filtrosSecciones",placeholder:"Seleccione...",options:e.secciones,loading:e.cargandoSecciones,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen exámenes validados")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}],null,!1,2217652673),model:{value:e.filtros.seccionId,callback:function(t){e.$set(e.filtros,"seccionId",t)},expression:"filtros.seccionId"}})],1)])]:e._e(),e._v(" "),"examenAcreditado"===e.filtros.tipo?[t("div",{staticClass:"row",staticStyle:{"padding-top":"15px"}},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examenAcreditado,expression:"filtros.examenAcreditado"}],attrs:{id:"acreditados",name:"acreditados",type:"radio"},domProps:{value:!0,checked:e._q(e.filtros.examenAcreditado,!0)},on:{change:function(t){return e.$set(e.filtros,"examenAcreditado",!0)}}}),e._v("\n                            Acreditados\n                          ")])])]),e._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examenAcreditado,expression:"filtros.examenAcreditado"}],attrs:{id:"noAcreditados",type:"radio",name:"acreditados"},domProps:{value:!1,checked:e._q(e.filtros.examenAcreditado,!1)},on:{change:function(t){return e.$set(e.filtros,"examenAcreditado",!1)}}}),e._v("\n                            No Acreditados\n                          ")])])])]),e._v(" "),t("br")]:e._e(),e._v(" "),"muestras"===e.filtros.tipo?[t("div",{staticClass:"row",staticStyle:{"padding-top":"12px"}},[t("div",{staticClass:"col-md-12"},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoDetallesOrden,expression:"cargandoDetallesOrden"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" "),e.muestras.length>0?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.seleccionadosTodosMuestras,expression:"filtros.seleccionadosTodosMuestras"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.seleccionadosTodosMuestras)?e._i(e.filtros.seleccionadosTodosMuestras,null)>-1:e.filtros.seleccionadosTodosMuestras},on:{change:[function(t){var a=e.filtros.seleccionadosTodosMuestras,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"seleccionadosTodosMuestras",a.concat([null])):i>-1&&e.$set(e.filtros,"seleccionadosTodosMuestras",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"seleccionadosTodosMuestras",o)},e.alternarSeleccionMuestras]}})]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("\n                              Muestra\n                              "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.filtros.muestrasIds.length>0,expression:"filtros.muestrasIds.length > 0"}],staticClass:"badge cursor-menu",attrs:{title:"Seleccionados",rel:"tooltip"}},[e._v("\n                                "+e._s(e.filtros.muestrasIds.length)+"\n                              ")])]),e._v(" "),t("th",{staticClass:"text-center"},[e._v("Etiquetas")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")])])]),e._v(" "),t("tbody",e._l(e.muestras,(function(a){return t("tr",{staticClass:"puntero"},[t("td",{staticClass:"col-sm-1 text-center",on:{click:function(t){return e.seleccionarMuestra(a)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.muestrasIds,expression:"filtros.muestrasIds"}],attrs:{type:"checkbox",disabled:!e.opciones.incluirMuestrasPendientes&&["PENDIENTE"].includes(a.pivot.estado)},domProps:{value:a.id,checked:Array.isArray(e.filtros.muestrasIds)?e._i(e.filtros.muestrasIds,a.id)>-1:e.filtros.muestrasIds},on:{change:function(t){var r=e.filtros.muestrasIds,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.id,n=e._i(r,s);o.checked?n<0&&e.$set(e.filtros,"muestrasIds",r.concat([s])):n>-1&&e.$set(e.filtros,"muestrasIds",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.filtros,"muestrasIds",i)}}})]),e._v(" "),t("td",{staticClass:"col-sm-7 text-left",on:{click:function(t){return e.seleccionarMuestra(a)}}},[e._v("\n                              "+e._s(a.nombre)+"\n                            ")]),e._v(" "),t("td",{staticClass:"col-sm-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.numero_etiquetas,expression:"muestra.numero_etiquetas"}],staticClass:"form-control input-xs text-right",attrs:{type:"number",min:"0",max:"20",step:"1"},domProps:{value:a.numero_etiquetas},on:{input:function(t){t.target.composing||e.$set(a,"numero_etiquetas",t.target.value)}}})]),e._v(" "),t("td",{staticClass:"col-sm-2 text-center",on:{click:function(t){return e.seleccionarMuestra(a)}}},[e._v("\n                              "+e._s(e._f("estadoMuestra")(a.pivot.estado))+"\n                            ")])])})),0)]):e._e()])]),e._v(" "),t("br")]:e._e()],2)]):e._e(),e._v(" "),t("div",{class:{"col-md-4":e.esResultados||e.esEtiquetas||e.esAsistencia,"col-md-12":e.esRecibo||e.esRemision||e.esConsentimientoInformado||e.esCarnetGrupoSanguineo||e.esPruebaPostprandial||e.esCurvaGlocosa||e.esGestionMuestra||e.esFlujoVaginal||e.esAntigenoChlamydiaTrachomatis||e.esCitologiaVaginal||e.esVirusPapilomaHumano}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{attrs:{for:"impresora"}},[e._v("\n                      Impresora\n                    ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.impresora,expression:"impresora"}],staticClass:"form-control input-sm",attrs:{id:"impresora",name:"impresora",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.impresora=t.target.multiple?a:a[0]},e.impresoraSeleccionada]}},e._l(e.impresoras,(function(a){return t("option",{domProps:{value:a}},[e._v("\n                        "+e._s(a)+"\n                      ")])})),0)])]),e._v(" "),t("div",{staticClass:"row"},[e.esEtiquetas||e.esRemision||e.esCarnetGrupoSanguineo||e.esPruebaPostprandial||e.esCurvaGlocosa||e.esGestionMuestra||e.esFlujoVaginal||e.esAntigenoChlamydiaTrachomatis||e.esCitologiaVaginal||e.esVirusPapilomaHumano?e._e():t("div",{staticClass:"col-md-12 form-group"},[t("label",{attrs:{for:"tamanoPapel"}},[e._v("Tamaño de papel")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.esAsistencia,expression:"!(esAsistencia)"}],staticClass:"text-uppercase"},[e._v("\n                      "+e._s(this.tamanoPapel?this.tamanoPapel:"")+"\n                    ")]),e._v(" "),t("select",{directives:[{name:"show",rawName:"v-show",value:e.esAsistencia,expression:"esAsistencia"},{name:"model",rawName:"v-model",value:e.tamanoPapel,expression:"tamanoPapel"}],staticClass:"form-control input-sm",attrs:{id:"tamanoPapel",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.tamanoPapel=t.target.multiple?a:a[0]},e.cambioTamanoPapel]}},[t("option",{attrs:{value:"a4"}},[e._v("A4")]),e._v(" "),t("option",{attrs:{value:"a5"}},[e._v("A5")])])]),e._v(" "),e.esEtiquetas||e.esImpresorsaPdf?e._e():t("div",{staticClass:"col-md-12 form-group"},[t("label",{attrs:{for:"copias"}},[e._v("Copias")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.copias,expression:"copias"}],staticClass:"form-control input-sm",attrs:{id:"copias",type:"number",min:"0",max:"10",step:"1"},domProps:{value:e.copias},on:{change:e.cambioCopias,input:function(t){t.target.composing||(e.copias=t.target.value)}}})]),e._v(" "),e.esEtiquetas?t("div",{staticClass:"col-md-12"},[t("label",{attrs:{for:"impresora"}},[e._v("Tamaño de etiqueta (mm)")])]):e._e(),e._v(" "),e.esEtiquetas?t("div",{staticClass:"col-md-12 form-group"},[t("strong",[e._v("Ancho:")]),e._v(" "+e._s(e.etiqueta.ancho)+" "),t("strong",[e._v("Alto:")]),e._v(" "+e._s(e.etiqueta.alto)+"\n                  ")]):e._e()]),e._v(" "),e.esAsistencia?[e._m(1),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{attrs:{for:"ciudad"}},[e._v("Ciudad")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.ciudad,expression:"opciones.ciudad"}],staticClass:"form-control input-sm",attrs:{id:"ciudad",type:"text"},domProps:{value:e.opciones.ciudad},on:{blur:e.cambioCiudad,input:function(t){t.target.composing||e.$set(e.opciones,"ciudad",t.target.value)}}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.mostrarIncluirMembrete,expression:"mostrarIncluirMembrete"}],staticClass:"col-md-12 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.incluirMembrete,expression:"opciones.incluirMembrete"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.incluirMembrete)?e._i(e.opciones.incluirMembrete,null)>-1:e.opciones.incluirMembrete},on:{change:function(t){var a=e.opciones.incluirMembrete,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"incluirMembrete",a.concat([null])):i>-1&&e.$set(e.opciones,"incluirMembrete",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"incluirMembrete",o)}}}),e._v("\n                          Incluir membrete\n                        ")])])]),e._v(" "),t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"horaIngreso"}},[e._v("\n                        Hora de ingreso\n                      ")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.horaIngreso,expression:"opciones.horaIngreso"}],staticClass:"form-control input-sm",attrs:{id:"horaIngreso",type:"text",autocomplete:"off",readonly:""},domProps:{value:e.opciones.horaIngreso},on:{click:function(t){return e.abrirModalHora("horaIngresoModal")},input:function(t){t.target.composing||e.$set(e.opciones,"horaIngreso",t.target.value)}}}),e._v(" "),e._m(2)])]),e._v(" "),t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"horaSalida"}},[e._v("\n                        Hora de salida\n                      ")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.horaSalida,expression:"opciones.horaSalida"}],staticClass:"form-control input-sm",attrs:{id:"horaSalida",type:"text",autocomplete:"off",readonly:""},domProps:{value:e.opciones.horaSalida},on:{click:function(t){return e.abrirModalHora("horaSalidaModal")},input:function(t){t.target.composing||e.$set(e.opciones,"horaSalida",t.target.value)}}}),e._v(" "),e._m(3)])]),e._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.firmaUsuarioIngresa,expression:"opciones.firmaUsuarioIngresa"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.firmaUsuarioIngresa)?e._i(e.opciones.firmaUsuarioIngresa,null)>-1:e.opciones.firmaUsuarioIngresa},on:{click:e.cambioFirmaUsuarioIngresa,change:function(t){var a=e.opciones.firmaUsuarioIngresa,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"firmaUsuarioIngresa",a.concat([null])):i>-1&&e.$set(e.opciones,"firmaUsuarioIngresa",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"firmaUsuarioIngresa",o)}}}),e._v("\n                          Firma de usuario que ingresó la orden\n                        ")])])])])]:e._e(),e._v(" "),e.esResultados?[e._m(4),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"checkbox",class:{disabled:e.opciones.incluirReportados}},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.registrarImpresion,expression:"opciones.registrarImpresion"}],attrs:{disabled:e.opciones.incluirReportados,type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.registrarImpresion)?e._i(e.opciones.registrarImpresion,null)>-1:e.opciones.registrarImpresion},on:{change:function(t){var a=e.opciones.registrarImpresion,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"registrarImpresion",a.concat([null])):i>-1&&e.$set(e.opciones,"registrarImpresion",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"registrarImpresion",o)}}}),e._v("\n                          Registrar impresión\n                        ")])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.mostrarIncluirMembrete,expression:"mostrarIncluirMembrete"}],staticClass:"col-md-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.incluirMembrete,expression:"opciones.incluirMembrete"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.incluirMembrete)?e._i(e.opciones.incluirMembrete,null)>-1:e.opciones.incluirMembrete},on:{change:function(t){var a=e.opciones.incluirMembrete,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"incluirMembrete",a.concat([null])):i>-1&&e.$set(e.opciones,"incluirMembrete",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"incluirMembrete",o)}}}),e._v("\n                          Incluir membrete\n                        ")])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.mostrarIncluirFirma,expression:"mostrarIncluirFirma"}],staticClass:"col-md-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.incluirFirma,expression:"opciones.incluirFirma"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.incluirFirma)?e._i(e.opciones.incluirFirma,null)>-1:e.opciones.incluirFirma},on:{change:function(t){var a=e.opciones.incluirFirma,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"incluirFirma",a.concat([null])):i>-1&&e.$set(e.opciones,"incluirFirma",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"incluirFirma",o)}}}),e._v("\n                          Incluir firma\n                        ")])])]),e._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.incluirReportados,expression:"opciones.incluirReportados"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.incluirReportados)?e._i(e.opciones.incluirReportados,null)>-1:e.opciones.incluirReportados},on:{change:[function(t){var a=e.opciones.incluirReportados,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"incluirReportados",a.concat([null])):i>-1&&e.$set(e.opciones,"incluirReportados",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"incluirReportados",o)},e.cambioIncluirReportados]}}),e._v("\n                          Vista previa con exámenes reportados\n                        ")])])]),e._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.seccionPorHoja,expression:"opciones.seccionPorHoja"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.seccionPorHoja)?e._i(e.opciones.seccionPorHoja,null)>-1:e.opciones.seccionPorHoja},on:{change:function(t){var a=e.opciones.seccionPorHoja,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"seccionPorHoja",a.concat([null])):i>-1&&e.$set(e.opciones,"seccionPorHoja",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"seccionPorHoja",o)}}}),e._v("\n                          Una sección en cada hoja\n                        ")])])]),e._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.lang,expression:"opciones.lang"}],attrs:{name:"lang",type:"radio",value:"esEn"},domProps:{checked:e._q(e.opciones.lang,"esEn")},on:{click:e.langClick,change:function(t){return e.$set(e.opciones,"lang","esEn")}}}),e._v("\n                          Etiquetas en Español/Inglés\n                        ")])])]),e._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.lang,expression:"opciones.lang"}],attrs:{name:"lang",type:"radio",value:"en"},domProps:{checked:e._q(e.opciones.lang,"en")},on:{click:e.langClick,change:function(t){return e.$set(e.opciones,"lang","en")}}}),e._v("\n                          Etiquetas en Inglés\n                        ")])])])])]:e._e(),e._v(" "),e.esEtiquetas?[e._m(5),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("div",{staticClass:"row"},[e._m(6),e._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.etiquetasDatosPaciente,expression:"opciones.etiquetasDatosPaciente"}],staticClass:"form-control input-xs text-right",attrs:{type:"number",min:"0",max:"10",step:"1"},domProps:{value:e.opciones.etiquetasDatosPaciente},on:{input:function(t){t.target.composing||e.$set(e.opciones,"etiquetasDatosPaciente",t.target.value)}}})])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("div",{staticClass:"row"},[e._m(7),e._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.etiquetasQr,expression:"opciones.etiquetasQr"}],staticClass:"form-control input-xs text-right",attrs:{type:"number",min:"0",max:"10",step:"1"},domProps:{value:e.opciones.etiquetasQr},on:{input:function(t){t.target.composing||e.$set(e.opciones,"etiquetasQr",t.target.value)}}})])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.incluirMuestrasPendientes,expression:"opciones.incluirMuestrasPendientes"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.incluirMuestrasPendientes)?e._i(e.opciones.incluirMuestrasPendientes,null)>-1:e.opciones.incluirMuestrasPendientes},on:{click:e.muestrasPendientesSeleccionado,change:function(t){var a=e.opciones.incluirMuestrasPendientes,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"incluirMuestrasPendientes",a.concat([null])):i>-1&&e.$set(e.opciones,"incluirMuestrasPendientes",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"incluirMuestrasPendientes",o)}}}),e._v("\n                          Incluir muestras pendientes\n                        ")])])])]),e._v(" "),"master"===e.$usuario.nombreUsuario?t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.ocultarTexto,expression:"opciones.ocultarTexto"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.ocultarTexto)?e._i(e.opciones.ocultarTexto,null)>-1:e.opciones.ocultarTexto},on:{change:function(t){var a=e.opciones.ocultarTexto,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"ocultarTexto",a.concat([null])):i>-1&&e.$set(e.opciones,"ocultarTexto",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"ocultarTexto",o)}}}),e._v("\n                          Ocultar texto\n                        ")])])])]):e._e(),e._v(" "),"master"===e.$usuario.nombreUsuario?t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("div",{staticClass:"row"},[e._m(8),e._v(" "),t("div",{staticClass:"col-md-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.codigoBarras,expression:"opciones.codigoBarras"}],staticClass:"form-control input-xs",attrs:{type:"text"},domProps:{value:e.opciones.codigoBarras},on:{input:function(t){t.target.composing||e.$set(e.opciones,"codigoBarras",t.target.value)}}})])])])]):e._e()]:e._e(),e._v(" "),e.esRemision?[e._m(9),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.resumido,expression:"opciones.resumido"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.resumido)?e._i(e.opciones.resumido,null)>-1:e.opciones.resumido},on:{change:[function(t){var a=e.opciones.resumido,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"resumido",a.concat([null])):i>-1&&e.$set(e.opciones,"resumido",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"resumido",o)},e.cambioResumido]}}),e._v("\n                          Resumido\n                        ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.excluirObservaciones,expression:"opciones.excluirObservaciones"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.opciones.excluirObservaciones)?e._i(e.opciones.excluirObservaciones,null)>-1:e.opciones.excluirObservaciones},on:{change:[function(t){var a=e.opciones.excluirObservaciones,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.opciones,"excluirObservaciones",a.concat([null])):i>-1&&e.$set(e.opciones,"excluirObservaciones",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"excluirObservaciones",o)},e.cambioExcluirObservaciones]}}),e._v("\n                          Sin observaciones\n                        ")])])])])]:e._e()],2)]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas",target:"_blank"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{id:e.idImprimir,type:"submit",disabled:!e.puedeImprimir}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-print fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n               "+e._s(e.etiquetaImprimir)+"\n            ")])])])])])]),e._v(" "),t("hora-modal",{attrs:{id:"horaIngresoModal",hora:e.opciones.horaIngreso},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"horaIngreso")}}}),e._v(" "),t("hora-modal",{attrs:{id:"horaSalidaModal",hora:e.opciones.horaSalida},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"horaSalida")}}})],1)}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this._self._c;return e("legend",{staticClass:"separador"},[e("h4",[e("a",{attrs:{href:"#opciones"}},[this._v("\n                        Configuración de impresión\n                      ")])])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaIngresoModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaSalidaModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("legend",{staticClass:"separador"},[e("h4",[e("a",{attrs:{href:"#opciones"}},[this._v("\n                        Configuración de impresión\n                      ")])])])},function(){var e=this._self._c;return e("legend",{staticClass:"separador"},[e("h4",[e("a",{attrs:{href:"#opciones"}},[this._v("\n                        Configuración de impresión\n                      ")])])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",[this._v("\n                            Datos de paciente\n                          ")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",{staticClass:"no-salto-linea"},[this._v("\n                            QR\n                          ")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",[this._v("\n                            Código\n                          ")])])},function(){var e=this._self._c;return e("legend",{staticClass:"separador"},[e("h4",[e("a",{attrs:{href:"#opciones"}},[this._v("\n                        Configuración de impresión\n                      ")])])])}],!1,null,"5f982fad",null).exports},2703:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(6570),o=a(4590);const i={data:function(){return{numeroOrden:"",muestra:{}}},mounted:function(){var e=this;$("#modalVerMuestra").on("show.bs.modal",(function(t){e.limpiar();var a=$(t.relatedTarget).data("idDetalleOrdenMuestra");e.numeroOrden=$(t.relatedTarget).data("numeroOrden"),e.cargarDetalleOrdenMuestra(a)})),$("#modalVerMuestra").on("hide.bs.modal",(function(){e.limpiar()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},limpiar:function(){this.muestra.nombre="",this.muestra.pivot={observacion:{}}},claseEstado:function(e){return{"label-default":"PENDIENTE"===e,"label-primary":"RECIBIDA"===e,"label-success":"PROCESADA"===e}},cargarDetalleOrdenMuestra:function(e){var t=this;axios.get("/api/detalles-orden/muestras/".concat(e)).then((function(e){var a=e.data.data;t.muestra=a})).catch((function(e){var a=t.procesarErrorResponse(e);a.push("Error al cargar muestra"),t.mostrarErrores(a)}))}},computed:{esRecibida:function(){return"RECIBIDA"===this.muestra.estado},tituloFecha:function(){return this.esRecibida?"recepción":"pendiente"}}};var s=a(1900);const n=(0,s.Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalVerMuestra",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content top-11"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Orden No.")]),e._v(" "),t("div",[e._v(e._s(e.numeroOrden))])]),e._v(" "),t("div",{staticClass:"col-sm-7 form-group"},[t("label",{staticClass:"control-label"},[e._v("Muestra")]),e._v(" "),t("div",[e._v(e._s(e.muestra&&e.muestra.muestra&&e.muestra.muestra.nombre))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("div",[t("span",{staticClass:"label",class:e.claseEstado(e.muestra.estado)},[e._v("\n                "+e._s(e._f("estadoMuestra")(e.muestra.estado))+"\n              ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Rechazada")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.muestra.rechazada?"✔":"-")+"\n            ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Externa")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.muestra.externa?"✔":"-")+"\n            ")])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha "+e._s(e.tituloFecha))]),e._v(" "),t("div",[e._v(e._s(e._f("fecha")(e.muestra.fecha,"YYYY-MM-DD HH:mm")))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Usuario")]),e._v(" "),t("div",[e._v(e._s(e.muestra.usuario&&e.muestra.usuario.nombre_usuario))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label"},[e._v("Observación")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.muestra.observacion?e.muestra.observacion:"-")+"\n            ")])]),e._v(" "),e.muestra.rechazada?t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label"},[e._v("Motivos rechazo")]),e._v(" "),t("ul",e._l(e.muestra.motivos_rechazo,(function(a){return t("li",[e._v(" "+e._s(a.nombre))])})),0),e._v(" "),e.muestra.motivos_rechazo?e._e():[e._v("-")]],2):e._e()])],1),e._v(" "),e._m(1)])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Ver muestra")])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Cerrar")])])}],!1,null,null,null).exports;var c=a(6235);const l={components:{DatosOrden:r.Z,VerMuestraModal:n,DetalleOrdenEstado:c.Z},props:{id:{type:String,default:"muestrasModal"},orden:{type:Object,default:function(){return{}}},detallesOrden:{type:Array,required:!0,default:function(){return[]}},guardarMuestras:{type:Boolean,default:!1},verMuestra:{type:Boolean,default:!0},flebotomistas:{type:Array,default:function(){return[]}}},data:function(){return{procesando:!1,cargando:{muestras:!1,detallesOrden:!1},flebotomistaId:"",pendiente:!1,muestras:[],idsMuestrasRecibidas:[]}},mounted:function(){var e=this;$("#".concat(this.id)).on("show.bs.modal",(function(t){t.target.id===e.id&&e.cargarDatos()})),$("#".concat(this.id)).on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.cargarMuestras(),this.cargarFlebotomistas()},cargarMuestras:function(){var e=this;_.isEmpty(this.muestras)&&(this.cargando.muestras=!0,axios.get("/api/muestras").then((function(t){var a=t.data.data;e.muestras=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar muestras",a)})).then((function(){return e.cargando.muestras=!1})))},cargarFlebotomistas:function(){var e=this;_.isEmpty(this.flebotomistas)&&axios.get("/api/catalogos",{params:{catalogo:o.oH.FLEBOTOMISTAS}}).then((function(t){t.data.data.forEach((function(t){return e.flebotomistas.push(t)}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Flebotomistas",a)}))},limpiar:function(){this.idsMuestrasRecibidas=[],this.flebotomistaId=""},guardar:function(){var e=this;this.guardarMuestras?(this.procesando=!0,axios.patch("/api/ordenes/".concat(this.orden.id,"/detalles/1"),{detallesOrden:this.detallesOrden}).then((function(){var t={idOrden:e.orden.id,idsMuestrasRecibidas:e.idsMuestrasRecibidas};e.$emit("muestras-guardadas",t),$("#".concat(e.id)).modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar exámenes",a)})).then((function(){return e.procesando=!1}))):(this.$emit("muestras-guardadas"),$("#".concat(this.id)).modal("hide"))},seleccionarMuestraPendiente:function(e,t){if(!t.target.checked)return e.estado=o.zm.RECIBIDA,void(this.idsMuestrasRecibidas.includes(e.muestra_id)||e.estado===e.estado_original||this.idsMuestrasRecibidas.push(e.muestra_id));this.detallesOrden.forEach((function(a){a.muestras.filter((function(t){return t.muestra_id===e.muestra_id&&t.estado===o.zm.RECIBIDA})).forEach((function(e){e.estado=o.zm.PENDIENTE,e.pendiente=t.target.checked,e.flebotomista_id=null}))}))},cambioMuestra:function(e){e.estado_original=""},aplicarFlebotomistaATodasLasMuestras:function(){var e=this;this.detallesOrden.forEach((function(t){return t.muestras.forEach((function(t){return t.flebotomista_id=e.flebotomistaId}))}))},aplicarPendienteATodasLasMuestras:function(e){this.detallesOrden.forEach((function(t){t.muestras.filter((function(e){return[o.zm.PENDIENTE,o.zm.RECIBIDA].includes(e.estado)})).forEach((function(t){t.estado=e.target.checked?o.zm.PENDIENTE:o.zm.RECIBIDA,t.pendiente=e.target.checked}))}))}},computed:{detallesOrdenOrdenados:function(){return _.sortBy(this.detallesOrden,["examen.nombre"])}}};const d=(0,s.Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e.$can("gestionar-muestras-ordenes")?t("button",{staticClass:"btn btn-primary btn-sm pull-right",staticStyle:{"margin-left":"10px"},attrs:{disabled:e.procesando||0===e.detallesOrden.length,type:"submit"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")]):e._e(),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm pull-right",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Muestras")]),e._v(" "),e.orden?t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-identificacion":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,orden:e.orden}}):e._e()],1),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3"},[t("label",{attrs:{for:""}},[e._v("Flebotomista")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{disabled:!e.$can("gestionar-muestras-ordenes"),placeholder:"Seleccione...",options:e.flebotomistas,"get-option-label":function(e){return"".concat(e.nombres," ").concat(e.apellidos)},reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.flebotomistaId,callback:function(t){e.flebotomistaId=t},expression:"flebotomistaId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3"},[e.$can("gestionar-muestras-ordenes")?t("button",{staticClass:"btn btn-default btn-sm margen-superior-boton",attrs:{type:"button"},on:{click:e.aplicarFlebotomistaATodasLasMuestras}},[e._v("\n                  Aplicar a todas las muestras\n                ")]):e._e()])]),e._v(" "),t("hr"),e._v(" "),!e.cargando.muestras&&e.detallesOrden.length>0?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-2"},[e._v("Examen")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Muestra")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Flebotomista")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("\n                  Pendiente\n                  "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.pendiente,expression:"pendiente"}],attrs:{type:"checkbox",disabled:!e.$can("gestionar-muestras-ordenes")},domProps:{checked:Array.isArray(e.pendiente)?e._i(e.pendiente,null)>-1:e.pendiente},on:{click:e.aplicarPendienteATodasLasMuestras,change:function(t){var a=e.pendiente,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.pendiente=a.concat([null])):i>-1&&(e.pendiente=a.slice(0,i).concat(a.slice(i+1)))}else e.pendiente=o}}})]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Rechazada")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Muestra externa")]),e._v(" "),e.verMuestra?t("th",{staticClass:"text-center col-sm-1"},[e._v("Fecha recepción")]):e._e(),e._v(" "),e.verMuestra?t("th",{staticClass:"text-center col-sm-1"}):e._e()])]),e._v(" "),t("tbody",[e._l(e.detallesOrdenOrdenados,(function(a){return e._l(a.muestras,(function(r,o){return t("tr",[0===o?t("td",{staticClass:"text-left",attrs:{rowspan:a.muestras.length}},[a.examen?[e._v("\n                      "+e._s(a.examen.codigo)),t("br"),e._v(e._s(a.examen.nombre)+"\n                    ")]:[e._v("\n                      "+e._s(a.nombre)+"\n                    ")],e._v(" "),t("detalle-orden-estado",{attrs:{estado:a.estado,abreviado:!0}})],2):e._e(),e._v(" "),t("td",{staticClass:"text-left"},[t("v-select",{staticClass:"form-control input-sm",staticStyle:{"font-weight":"400 !important"},attrs:{disabled:!e.$can("gestionar-muestras-ordenes")||["PROCESADA","NO_PROCESADA"].includes(r.estado),placeholder:"Seleccione...",options:e.muestras,label:"nombre",clearable:!1,reduce:function(e){return e.id}},on:{input:function(t){return e.cambioMuestra(r)}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!0),model:{value:r.muestra_id,callback:function(t){e.$set(r,"muestra_id",t)},expression:"muestra.muestra_id"}})],1),e._v(" "),t("td",{staticClass:"text-left"},[t("v-select",{staticClass:"form-control input-sm",staticStyle:{"font-weight":"400 !important"},attrs:{disabled:!e.$can("gestionar-muestras-ordenes"),placeholder:"Seleccione...",label:"nombres",options:e.flebotomistas,reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(t){var a=t.nombres,r=t.apellidos;return[e._v("\n                        "+e._s(a)+" "+e._s(r)+"\n                      ")]}},{key:"option",fn:function(t){var a=t.nombres,r=t.apellidos;return[e._v("\n                        "+e._s(a)+" "+e._s(r)+"\n                      ")]}}],null,!0),model:{value:r.flebotomista_id,callback:function(t){e.$set(r,"flebotomista_id",t)},expression:"muestra.flebotomista_id"}})],1),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n                    "+e._s(e._f("estadoMuestra")(r.estado))+"\n                  ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.pendiente,expression:"muestra.pendiente"}],attrs:{type:"checkbox",disabled:!e.$can("gestionar-muestras-ordenes")||["PROCESADA","NO_PROCESADA"].includes(r.estado)},domProps:{checked:Array.isArray(r.pendiente)?e._i(r.pendiente,null)>-1:r.pendiente},on:{click:function(t){return e.seleccionarMuestraPendiente(r,t)},change:function(t){var a=r.pendiente,o=t.target,i=!!o.checked;if(Array.isArray(a)){var s=e._i(a,null);o.checked?s<0&&e.$set(r,"pendiente",a.concat([null])):s>-1&&e.$set(r,"pendiente",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(r,"pendiente",i)}}})]),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.rechazada,expression:"muestra.rechazada"}],attrs:{type:"checkbox",disabled:!e.$can("gestionar-muestras-ordenes")},domProps:{checked:Array.isArray(r.rechazada)?e._i(r.rechazada,null)>-1:r.rechazada},on:{change:function(t){var a=r.rechazada,o=t.target,i=!!o.checked;if(Array.isArray(a)){var s=e._i(a,null);o.checked?s<0&&e.$set(r,"rechazada",a.concat([null])):s>-1&&e.$set(r,"rechazada",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(r,"rechazada",i)}}})]),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:r.externa,expression:"muestra.externa"}],attrs:{type:"checkbox",disabled:!e.$can("gestionar-muestras-ordenes")},domProps:{checked:Array.isArray(r.externa)?e._i(r.externa,null)>-1:r.externa},on:{change:function(t){var a=r.externa,o=t.target,i=!!o.checked;if(Array.isArray(a)){var s=e._i(a,null);o.checked?s<0&&e.$set(r,"externa",a.concat([null])):s>-1&&e.$set(r,"externa",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(r,"externa",i)}}})]),e._v(" "),e.verMuestra?t("td",{staticClass:"text-center"},[r.estado===r.estado_original?[t("div",{staticClass:"no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(r.fecha,"YYYY-MM-DD </br> HH:mm"))}})]:e._e()],2):e._e(),e._v(" "),e.verMuestra?t("td",{staticClass:"text-center"},[t("button",{directives:[{name:"show",rawName:"v-show",value:r.id,expression:"muestra.id"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button","data-toggle":"modal","data-target":"#modalVerMuestra","data-numero-orden":e.orden.numero_orden,"data-id-detalle-orden-muestra":r.id}},[t("i",{staticClass:"fas fa-eye fa-fw"})])]):e._e()])}))}))],2)]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando.muestras,cantidad:e.detallesOrden.length,tipo:"muestras"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),e.$can("gestionar-muestras-ordenes")?t("button",{staticClass:"btn btn-primary btn-sm",attrs:{disabled:e.procesando||0===e.detallesOrden.length,type:"submit"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")]):e._e()])])])])]),e._v(" "),t("ver-muestra-modal")],1)}),[],!1,null,null,null).exports},5480:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{DatosOrden:a(6570).Z},props:{id:{type:String,default:"modalResultados"},portal:{type:String,default:null,validator:function(e){return-1!==["empresas","medicos","pacientes"].indexOf(e)}},token:{type:String},top:{type:Number,default:0}},data:function(){return{cargando:!1,orden:null,lang:null}},mounted:function(){var e=this;$("#".concat(this.id)).on("show.bs.modal",(function(t){if(t.target.id===e.id){e.cargando=!0,e.orden=$(t.relatedTarget).data("orden");var a=$(t.relatedTarget).data("lang");e.lang=a||null;try{window.parent.document.getElementById("resultados").addEventListener("load",(function(t){e.cargando=!1}))}catch(t){e.cargando=!1}finally{e.cargando=!1}}})),$("#".concat(this.id)).on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{limpiar:function(){this.orden=null},actualizar:function(){this.cargando=!0,window.parent.document.getElementById("resultados").contentWindow.location.reload(!0)}},computed:{estiloTop:function(){return this.top?"top: ".concat(this.top,"px"):""},parametros:function(){var e={token:this.token,lang:this.lang};return this.obtenerParametrosUrl(e)},url:function(){return this.orden?"pacientes"===this.portal?"/consulta-resultados/reportes/".concat(this.orden.id,"/visual").concat(this.parametros):"empresas"===this.portal?"/consulta-resultados-empresas/reportes/".concat(this.orden.id,"/visual").concat(this.parametros):"medicos"===this.portal?"/consulta-resultados-medicos/reportes/".concat(this.orden.id,"/visual").concat(this.parametros):this.token?"/resultados/reportes/".concat(this.orden.id,"/visual").concat(this.parametros):"/reportes/".concat(this.orden.id,"/visual"):null}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Resultados")]),e._v(" "),e.orden?t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-estado-orden":!0,"mostrar-fecha-orden":!1,"mostrar-direccion":!1,orden:e.orden}}):e._e()],1),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("iframe",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],attrs:{id:"resultados",width:"100%",height:"600",src:e.url}}),e._v(" "),t("cargando",{attrs:{cargando:e.cargando}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[e.portal?e._e():t("button",{staticClass:"btn btn-sm btn-default",attrs:{title:"Actualizar",disabled:e.cargando},on:{click:e.actualizar}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],staticClass:"fas fa-sync"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando,expression:"cargando"}],staticClass:"fas fa-spinner fa-spin"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")])])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports},2534:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:{catalogo:{type:String,required:!0},placeholder:{type:String,default:"Todos"},etiqueta:{type:String},tamanoBusqueda:{type:Number,default:3},value:{required:!0}},data:function(){return{catalogos:[],sinResultados:!1,cargandoCatalogo:!1,opcion:null}},methods:{buscarCatalogo:function(e,t){this.catalogos=[],this.sinResultados=!1,!e||e.length<this.tamanoBusqueda||this.buscarCatalogoRetardo(e,t)},buscarCatalogoRetardo:_.debounce((function(e,t){var a=this;t(!0);var r={catalogo:this.catalogo,cadenaBusqueda:e};axios.get("/api/catalogos",{params:r}).then((function(e){var t=e.data.data;a.catalogos=t,0===t.length&&(a.sinResultados=!0)})).catch((function(e){var t=a.procesarErrorResponse(e);console.error("Error al cargar ".concat(a.nombreCatalogo,"s"),t)})).then((function(){return t(!1)}))}),350),seleccionarCatalogo:function(){var e=_.get(this.opcion,"id",null);this.$emit("input",e),this.$emit("change",e)},buscarCatalogoSeleccionado:function(e){var t=this;if(_.isEmpty(this.catalogos)){var a={catalogo:this.catalogo,ids:[e]};this.cargandoCatalogo=!0,axios.get("/api/catalogos",{params:a}).then((function(e){var a=e.data.data;t.catalogos=a,0===a.length?t.sinResultados=!0:t.opcion=t.catalogos[0]})).catch((function(e){var a=t.procesarErrorResponse(e);console.error("Error al cargar ".concat(t.nombreCatalogo,"s"),a)})).then((function(){return t.cargandoCatalogo=!1}))}}},computed:{nombreCatalogo:function(){switch(this.catalogo){case r.oH.MEDICOS:return"médico";case r.oH.EXAMENES:return"examen";default:return"catálogo"}}},watch:{value:function(e){e?this.buscarCatalogoSeleccionado(e):(this.opcion=null,this.catalogos=[])}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("v-select",{staticClass:"form-control input-sm",attrs:{placeholder:e.placeholder,filterable:!1,options:e.catalogos,label:e.etiqueta,value:e.value,loading:e.cargandoCatalogo},on:{search:e.buscarCatalogo,input:e.seleccionarCatalogo},scopedSlots:e._u([{key:"no-options",fn:function(){return[e.sinResultados?[t("strong",[e._v("No existen coincidencias")]),e._v(" "),t("br")]:e._e(),e._v("\n    Escriba para buscar el "+e._s(e.nombreCatalogo)+"\n  ")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.opcion,callback:function(t){e.opcion=t},expression:"opcion"}})}),[],!1,null,null,null).exports},2246:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(4590);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const n={props:{},data:function(){return{SISTEMAS_EXTERNOS:r.Q0,procesando:!1,termico:!1,examenesHomologados:0,idSistemaExterno:"",sistemaExterno:{id:null,codigo:null,nombre:"",tiene_api_token:!1,tiene_api_key:!1,extras:{}}}},mounted:function(){var e=this;$("#modalSistemaFacturas").on("show.bs.modal",(function(t){"modalSistemaFacturas"===t.target.id&&(e.idSistemaExterno=$(t.relatedTarget).data("idSistemaExterno"),e.cargarDatos())})),$("#modalSistemaFacturas").on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.idSistemaExterno&&axios.get("/api/sistemas-externos/".concat(this.idSistemaExterno)).then((function(t){var a=t.data.data;e.sistemaExterno=a,"TERMICO"===e.sistemaExterno.extras.formato&&(e.termico=!0)})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al cargar sistema de facturación"),e.mostrarErrores(a)}))},limpiar:function(){this.idSistemaExterno="",this.sistemaExterno.id=null,this.sistemaExterno.driver=null,this.sistemaExterno.nombre="",this.sistemaExterno.tiene_api_token=!1,this.sistemaExterno.tiene_api_key=!1,this.sistemaExterno.extras={},this.examenesHomologados=0},guardar:function(){var e=this;this.procesando=!0,this.idSistemaExterno?axios.patch("/api/sistemas-externos/".concat(this.sistemaExterno.id),this.sistemaExterno).then((function(t){var a=t.data.data;e.sistemaExterno=a,e.$emit("sistema-externo-facturas-guardado",null),e.mostrarExito("Configuración de <strong>".concat(e.sistemaExterno.nombre,"</strong> actualizada"))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar configuración de "+e.sistemaExterno.nombre,a)})).then((function(){return e.procesando=!1})):axios.post("/api/sistemas-externos",this.sistemaExterno).then((function(t){var a=t.data.data;e.sistemaExterno=a,e.idSistemaExterno=e.sistemaExterno.id,e.$emit("sistema-externo-facturas-guardado",null),e.mostrarExito("Configuración de <strong>".concat(e.sistemaExterno.nombre,"</strong> creada"))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar sistema de facturación",a)})).then((function(){return e.procesando=!1}))},cargarProductosContifico:function(e,t){var a=this;this.procesando=!0,this.examenesHomologados=0,this.mostrarInformativo("La sincronización con Contífico puede tardar más de 1 minuto");var r=this.obtenerIconoBoton(t),o=r.boton,s=r.icono;this.cambiarEstadoBoton(o,s);var n=i(i({},this.sistemaExterno),{},{tipoHomologacion:e});axios.post("/api/contifico/homologar",n).then((function(e){var t=e.data.data;"EXAMENES_LABORATORIO"===n.tipoHomologacion&&(a.sistemaExterno.extras.codigo_examenes_laboratorio=t.codigo_1,a.mostrarExito("Se ha registrado la homologación")),"SERVICIO_DOMICILIO"===n.tipoHomologacion&&(a.sistemaExterno.extras.codigo_servicio_domicilio=t.codigo_1,a.mostrarExito("Se ha registrado la homologación")),"TODOS"===n.tipoHomologacion&&(a.examenesHomologados=t.actualizados,t.actualizados>0&&a.mostrarExito("Se ha registrado la homologación de ".concat(t.actualizados," examen(es)")),_.isEmpty(t.errores)||a.mostrarErrores(t.errores))})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores(t)})).then((function(){a.cambiarEstadoBoton(o,s),a.procesando=!1}))},cambiarEstadoBoton:function(e,t){e.classList.contains("disabled")?(e.classList.remove("disabled"),t.classList.add("fa-cloud-download-alt"),t.classList.remove("fa-spinner","fa-spin")):(e.classList.add("disabled"),t.classList.remove("fa-cloud-download-alt"),t.classList.add("fa-spinner","fa-spin"))},cambiarSistemaFactura:function(){this.sistemaExterno.extras={},this.esCastor&&(this.sistemaExterno.nombre="Cástor"),this.esContifico&&(this.sistemaExterno.nombre="Contífico")},obtenerIconoBoton:function(e){var t={icono:null,boton:null};return"i"===e.target.localName&&(t.boton=e.target.parentNode,t.icono=e.target),"a"===e.target.localName&&(t.boton=e.target,t.icono=e.target.childNodes[0]),"button"===e.target.localName&&(t.boton=e.target,t.icono=e.target.childNodes[0]),t},cambioTermico:function(e){e.target.checked?this.sistemaExterno.extras.formato="TERMICO":this.sistemaExterno.extras.formato=null}},computed:{titulo:function(){return this.idSistemaExterno&&this.sistemaExterno?"Configurar "+this.sistemaExterno.nombre:"Crear"},esCastor:function(){return this.sistemaExterno.driver===r.Q0.CASTOR},esContifico:function(){return this.sistemaExterno.driver===r.Q0.CONTIFICO}}};const c=(0,a(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalSistemaFacturas",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v(e._s(e.titulo))])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),e.idSistemaExterno?e._e():[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label obligatorio"},[e._v("Sistema")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.sistemaExterno.driver,expression:"sistemaExterno.driver"}],staticClass:"form-control input-sm",attrs:{required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.sistemaExterno,"driver",t.target.multiple?a:a[0])},e.cambiarSistemaFactura]}},[t("option",{domProps:{value:null}},[e._v("Seleccione...")]),e._v(" "),t("option",{domProps:{value:e.SISTEMAS_EXTERNOS.CASTOR}},[e._v("Cástor")]),e._v(" "),t("option",{domProps:{value:e.SISTEMAS_EXTERNOS.CONTIFICO}},[e._v("Contífico")])])])])],e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sistemaExterno.nombre,expression:"sistemaExterno.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",type:"text",maxlength:"40",required:""},domProps:{value:e.sistemaExterno.nombre},on:{input:function(t){t.target.composing||e.$set(e.sistemaExterno,"nombre",t.target.value)}}})])]),e._v(" "),e.esCastor?[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.termico,expression:"termico"}],attrs:{type:"checkbox",value:"TERMICO"},domProps:{checked:Array.isArray(e.termico)?e._i(e.termico,"TERMICO")>-1:e.termico},on:{change:[function(t){var a=e.termico,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i="TERMICO",s=e._i(a,i);r.checked?s<0&&(e.termico=a.concat([i])):s>-1&&(e.termico=a.slice(0,s).concat(a.slice(s+1)))}else e.termico=o},e.cambioTermico]}}),e._v("\n                    Térmico\n                  ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"api_token_castor"}},[e._v("API Token")]),e._v(" "),t("div",{staticClass:"has-feedback"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sistemaExterno.extras.api_token,expression:"sistemaExterno.extras.api_token"}],staticClass:"form-control input-sm resize-vertical",attrs:{id:"api_token_castor",maxlength:"1800",rows:"5",required:!e.sistemaExterno.id&&!e.sistemaExterno.tiene_api_token},domProps:{value:e.sistemaExterno.extras.api_token},on:{input:function(t){t.target.composing||e.$set(e.sistemaExterno.extras,"api_token",t.target.value)}}}),e._v(" "),e.sistemaExterno.tiene_api_token?t("span",{staticClass:"glyphicon glyphicon-ok form-control-feedback text-success",attrs:{title:"Api key definido","aria-hidden":"true"}}):e._e()])])])]:e._e(),e._v(" "),e.esContifico?[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"api_token_contifico"}},[e._v("API Token")]),e._v(" "),t("div",{staticClass:"has-feedback"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sistemaExterno.extras.api_token,expression:"sistemaExterno.extras.api_token"}],staticClass:"form-control input-sm",attrs:{id:"api_token_contifico",type:"text",maxlength:"1800"},domProps:{value:e.sistemaExterno.extras.api_token},on:{input:function(t){t.target.composing||e.$set(e.sistemaExterno.extras,"api_token",t.target.value)}}}),e._v(" "),e.sistemaExterno.tiene_api_token?t("span",{staticClass:"glyphicon glyphicon-ok form-control-feedback text-success",attrs:{title:"Api key definido","aria-hidden":"true"}}):e._e()])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"api_key_contifico"}},[e._v("API Key")]),e._v(" "),t("div",{staticClass:"has-feedback"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sistemaExterno.extras.api_key,expression:"sistemaExterno.extras.api_key"}],staticClass:"form-control input-sm",attrs:{id:"api_key_contifico",type:"text",maxlength:"500",required:!e.sistemaExterno.id&&!e.sistemaExterno.tiene_api_key},domProps:{value:e.sistemaExterno.extras.api_key},on:{input:function(t){t.target.composing||e.$set(e.sistemaExterno.extras,"api_key",t.target.value)}}}),e._v(" "),e.sistemaExterno.tiene_api_key?t("span",{staticClass:"glyphicon glyphicon-ok form-control-feedback text-success",attrs:{title:"Api key definido","aria-hidden":"true"}}):e._e()])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"codigo_categoria"}},[e._v("Código categoría")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sistemaExterno.extras.codigo_categoria,expression:"sistemaExterno.extras.codigo_categoria"}],staticClass:"form-control input-sm",attrs:{id:"codigo_categoria",type:"text",maxlength:"500"},domProps:{value:e.sistemaExterno.extras.codigo_categoria},on:{input:function(t){t.target.composing||e.$set(e.sistemaExterno.extras,"codigo_categoria",t.target.value)}}}),e._v(" "),e._m(1)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"codigo_examenes_laboratorio"}},[e._v("\n                  Código exámenes de laboratorio\n                ")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sistemaExterno.extras.codigo_examenes_laboratorio,expression:"sistemaExterno.extras.codigo_examenes_laboratorio"}],staticClass:"form-control input-sm",attrs:{id:"codigo_examenes_laboratorio",type:"text",maxlength:"50"},domProps:{value:e.sistemaExterno.extras.codigo_examenes_laboratorio},on:{input:function(t){t.target.composing||e.$set(e.sistemaExterno.extras,"codigo_examenes_laboratorio",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{disabled:!this.sistemaExterno.id,type:"button"},on:{click:function(t){return e.cargarProductosContifico("EXAMENES_LABORATORIO",t)}}},[t("i",{staticClass:"fas fa-cloud-download-alt"}),e._v("\n                      Sincronizar\n                    ")])])]),e._v(" "),t("p",{staticClass:"help-block"},[t("small",[e._v("\n                    * Código de producto en Contífico al facturar sin detalles\n                    "),t("br"),e._v("\n                    * Debe existir un producto en Contífico con código EXALAB\n                    "),e.sistemaExterno.id?e._e():[t("br"),e._v('\n                      * Botón "Sincronizar" se habilita una vez guardada la configuración con el sistema de facturas\n                      Contífico\n                      seleccionado\n                    ')]],2)])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"codigo_servicio_domicilio"}},[e._v("Código servicio domicilio")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.sistemaExterno.extras.codigo_servicio_domicilio,expression:"sistemaExterno.extras.codigo_servicio_domicilio"}],staticClass:"form-control input-sm",attrs:{id:"codigo_servicio_domicilio",type:"text",maxlength:"50"},domProps:{value:e.sistemaExterno.extras.codigo_servicio_domicilio},on:{input:function(t){t.target.composing||e.$set(e.sistemaExterno.extras,"codigo_servicio_domicilio",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{disabled:!this.sistemaExterno.id,type:"button"},on:{click:function(t){return e.cargarProductosContifico("SERVICIO_DOMICILIO",t)}}},[t("i",{staticClass:"fas fa-cloud-download-alt"}),e._v("\n                      Sincronizar\n                    ")])])]),e._v(" "),t("p",{staticClass:"help-block"},[t("small",[e._v("\n                    * Código de producto en Contífico\n                    "),t("br"),e._v("\n                    * Debe existir un producto en Contífico con código SERDOM\n                    "),e.sistemaExterno.id?e._e():[t("br"),e._v('\n                      * Botón "Sincronizar" se habilita una vez guardada la configuración con el sistema de facturas\n                      Contífico\n                      seleccionado\n                    ')]],2)])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label"},[e._v("Homologar exámenes")]),t("br"),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{disabled:!this.sistemaExterno.id,type:"button"},on:{click:function(t){return e.cargarProductosContifico("TODOS",t)}}},[t("i",{staticClass:"fas fa-cloud-download-alt"}),e._v("\n                  Sincronizar\n                ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.examenesHomologados>0,expression:"examenesHomologados>0"}],staticStyle:{"padding-left":"5px"}},[t("i",{staticClass:"fas fa-check text-success"}),e._v("\n                  Exámenes homologados: "+e._s(e.examenesHomologados)+"\n                ")]),e._v(" "),t("p",{staticClass:"help-block"},[t("small",[e._v("\n                    * Se descargan códigos de productos de Contífico de los exámenes que contengan código Contífico\n                    registrado en Orión\n                    "),e.sistemaExterno.id?e._e():[t("br"),e._v('\n                      * Botón "Sincronizar" se habilita una vez guardada la configuración con el sistema de facturas\n                      Contífico\n                      seleccionado\n                    ')]],2)])])])]:e._e()],2),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal",disabled:e.procesando}},[e._v("\n            Cerrar\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:e.procesando}},[t("i",{staticClass:"fas fa-fw",class:{"fa-save":!e.procesando,"fa-spinner fa-spin":e.procesando}}),e._v("\n             Guardar\n          ")])])])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this._self._c;return e("p",{staticClass:"help-block"},[e("small",[this._v("\n                    * Para la creación de productos en Contífico desde Orión\n                  ")])])}],!1,null,null,null).exports},8728:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(6570),o=a(6235);const i={components:{DatosOrden:r.Z,DetalleOrdenEstado:o.Z},props:{descargar:{type:Boolean,default:!0},enviar:{type:Boolean,default:!0},esAdicional:{type:Boolean,default:!1},filtros:{type:Object,default:null}},data:function(){return{ordenId:null,cargando:!1,procesando:!1,orden:null,descargarSistemaExterno:!1,enviarSistemaExterno:!1}},mounted:function(){var e=this;$("#sistemaExternoResultadosModal").on("show.bs.modal",(function(t){"sistemaExternoResultadosModal"===t.target.id&&(e.ordenId=$(t.relatedTarget).data("orden-id"),e.cargarOrden())})),$("#sistemaExternoResultadosModal").on("hide.bs.modal",(function(t){"sistemaExternoResultadosModal"===t.target.id&&(e.emitirResultado(e.orden),e.orden=null,e.$refs.alerta.ocultarAlertas())}))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},emitirResultado:function(e){this.$emit("estado-sistema-externo-actualizado",e)},cargarOrden:function(){var e=this;if(this.ordenId){this.cargando=!0;var t={incluir:["paciente","sistemaExterno","detallesOrdenes.validadoPor","detallesOrdenes.examen"],filtros:this.filtros};axios.get("/api/ordenes/".concat(this.ordenId),{params:t}).then((function(t){var a=t.data.data;a.detalles_ordenes.forEach((function(e){e.descargar_sistema_externo=!1,e.enviar_sistema_externo=!1})),a.detalles_ordenes=_.orderBy(a.detalles_ordenes,"examen.nombre"),e.orden=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar orden",a)})).then((function(){return e.cargando=!1}))}else console.error("No existe orden id para cargar estado de sistemas externos")},descargarDeSistemaExterno:function(){var e=this;this.procesando=!0;var t=_.cloneDeep(this.orden);t.detalles_ordenes=this.detallesOrden.filter((function(e){return e.descargar_sistema_externo})),axios.patch("/api/iess/descargar/".concat(t.id),t).then((function(t){var a=t.data.data;if((a.descargadosDeIess>0||a.yaDescargados>0)&&e.cargarDetallesOrden(),a.yaDescargados>0&&e.mostrarAdvertencia(a.mensajesDescargados),a.errores>0&&(e.mostrarErrores("Exámenes no descargados de IESS AS400: ".concat(a.errores," de ").concat(a.total)),a.mensajes.unshift("Orden no descargada de <strong>IESS AS400</strong>"),e.mostrarErrores(a.mensajes)),a.descargadosDeIess>0&&a.descargadosDeIess>=a.total){var r=[];r.push("Orden descargada de <strong>IESS AS400</strong>"),r.push("Exámenes descargados: ".concat(a.descargadosDeIess," de ").concat(a.total)),e.mostrarExito(r)}else a.descargadosDeIess>0&&a.descargadosDeIess<a.total&&(e.mostrarErrores("Orden no descargada de <strong>IESS AS400</strong>"),e.mostrarAdvertencia("Exámenes descargados de IESS AS400: ".concat(a.descargadosDeIess," de ").concat(a.total)))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al descargar de ".concat(e.nombreSistemaExterno),a)})).then((function(){e.descargarSistemaExterno=!1,e.enviarSistemaExterno=!1,e.alternarDescargarSistemaExterno(),e.alternarEnviarSistemaExterno(),e.procesando=!1}))},enviarASistemaExterno:function(){var e=this;this.procesando=!0;var t={idsOrdenes:[this.orden.id],idsDetallesOrden:this.detallesOrden.filter((function(e){return e.enviar_sistema_externo})).map((function(e){return e.id}))};axios.post("/api/sistemas-externos/".concat(this.orden.sistema_externo_id,"/enviar"),t).then((function(t){var a=t.data.data;if(a.examenesProcesados>0&&e.cargarDetallesOrden(),a.erroresHomologacion.length>0&&e.mostrarAdvertencia(a.erroresHomologacion),a.examenesProcesados>0&&a.examenesProcesados>=a.totalExamenes){var r=["Resultados enviados a ".concat(e.orden.sistema_externo.nombre),"Exámenes enviados: ".concat(a.examenesProcesados,"/").concat(a.totalExamenes)];e.mostrarExito(r)}if(a.examenesProcesados>=0&&a.examenesProcesados<a.totalExamenes){var o=["No se enviaron algunos resultados a ".concat(e.orden.sistema_externo.nombre),"Exámenes enviados: ".concat(a.examenesProcesados,"/").concat(a.totalExamenes)];e.mostrarAdvertencia(o)}a.errores>0&&e.mostrarErrores(a.mensajes),a.examenesProcesados<1&&e.mostrarInformativo("No se envio ningun resultado")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al enviar resultados a ".concat(e.nombreSistemaExterno),a)})).then((function(){e.enviarSistemaExterno=!1,e.alternarEnviarSistemaExterno(),e.procesando=!1}))},cargarDetallesOrden:function(){var e=this;return this.cargando=!0,axios.get("/api/ordenes/".concat(this.orden.id,"/detalles"),{params:{incluir:"examen,validadoPor"}}).then((function(t){var a=t.data.data;a.forEach((function(e){e.descargar_sistema_externo=!1,e.enviar_sistema_externo=!1})),e.orden.detalles_ordenes=_.orderBy(a,"examen.nombre")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar exámenes!",a)})).then((function(){return e.cargando=!1}))},cerrar:function(){$("#sistemaExternoResultadosModal").modal("hide")},alternarDescargarSistemaExterno:function(){var e=this;this.detallesOrden.forEach((function(t){return t.descargar_sistema_externo=e.descargarSistemaExterno}))},alternarEnviarSistemaExterno:function(){var e=this;this.detallesOrden.filter((function(t){return e.estadosDetallesOrdenParaEnvio.includes(t.estado)})).forEach((function(t){return t.enviar_sistema_externo=e.enviarSistemaExterno}))},claseDescargadoSistemaExterno:function(e){return{"fa-check":e.descargado_sistema_externo,"fa-times":!1===e.descargado_sistema_externo,"fa-minus":null===e.descargado_sistema_externo}},tituloDescargadoSistemaExterno:function(e){return e.descargado_sistema_externo?"":!1===e.descargado_sistema_externo?"Se ha intentado descargar pero no se tuvo éxito":null===e.descargado_sistema_externo?"No se ha intentado descargar de ".concat(this.nombreSistemaExterno):void 0},claseEnviadoSistemaExternoAdicional:function(e){var t=_.get(e.extras,"enviado_sistema_externo_adicional");return{"fa-check":"EXITO"===t,"fa-times text-danger":"ERROR"===t,"fa-minus":"NO_ENVIADO"===t||void 0===t}},tituloEnviadoSistemaExternoAdicional:function(e){var t=_.get(e.extras,"enviado_sistema_externo_adicional");return"EXITO"===t?"Enviado":"ERROR"===t?_.get(e.extras,"mensaje_envio_adicional","Existe un error no definido al enviar resultados"):"NO_ENVIADO"===t||void 0===t?"No se ha enviado":void 0}},computed:{descargarResultados:function(){return this.sistemaExterno&&this.sistemaExterno.extras&&this.sistemaExterno.extras.descargar_resultados},verOEnviarResultados:function(){return _.get(this.sistemaExterno,"extras.enviar_resultados")||_.get(this.sistemaExterno,"extras.ver_resultados")},enviarResultados:function(){return _.get(this.sistemaExterno,"extras.enviar_resultados")},sistemaExterno:function(){return this.orden&&this.orden.sistema_externo?this.orden.sistema_externo:null},nombreSistemaExterno:function(){return this.sistemaExterno?this.sistemaExterno.nombre:""},nombreSistemaExternoAdicional:function(){return _.get(this.sistemaExterno,"extras.his_adicional.nombre")},numeroUnidadMedica:function(){return this.sistemaExterno&&this.sistemaExterno.extras?this.sistemaExterno.extras.codigo_unidad_medica:""},detallesOrden:function(){return this.orden?this.orden.detalles_ordenes:[]},descargados:function(){return this.orden?this.detallesOrden.reduce((function(e,t){return t.descargado_sistema_externo?e+1:e}),0):0},enviados:function(){return this.orden?this.detallesOrden.reduce((function(e,t){return t.enviado_sistema_externo?e+1:e}),0):0},existenExamenesParaDescargar:function(){return!!this.orden&&this.detallesOrden.reduce((function(e,t){return t.descargar_sistema_externo?e+1:e}),0)>0},estadosDetallesOrdenParaEnvio:function(){return this.orden?this.orden.sistema_externo.extras.enviar_preliminares?["X","L","V"]:["X","V"]:[]},existenExamenesParaEnviar:function(){var e=this;return!!this.orden&&this.detallesOrden.reduce((function(t,a){var r=a.estado,o=a.enviar_sistema_externo;return e.estadosDetallesOrdenParaEnvio.includes(r)&&o?t+1:t}),0)>0}},watch:{detallesOrden:{deep:!0,handler:function(e){var t=this;this.descargarSistemaExterno=e.filter((function(e){return e.descargar_sistema_externo})).length===this.detallesOrden.length;var a=e.filter((function(e){return e.enviar_sistema_externo})).length;this.enviarSistemaExterno=a>0&&a===this.detallesOrden.filter((function(e){var a=e.estado;return t.estadosDetallesOrdenParaEnvio.includes(a)})).length}}}};const s=(0,a(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade in",attrs:{id:"sistemaExternoResultadosModal",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("\n          Sistema externo: "+e._s(e.nombreSistemaExterno)+" "+e._s(e.numeroUnidadMedica?"- ".concat(e.numeroUnidadMedica):"")+"\n        ")]),e._v(" "),t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-numero-orden-externa":!0,"mostrar-historia-clinica":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,orden:e.orden}})],1),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta",attrs:{timeout:15e3}}),e._v(" "),e.detallesOrden.length>0&&!e.cargando?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"text-left",attrs:{rowspan:"2"}},[e._v("\n              Examen\n              "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrden.length>0,expression:"detallesOrden.length > 0"}],staticClass:"badge cursor-menu",attrs:{title:"Total","data-toggle":"tooltip","data-placement":"bottom"}},[e._v("\n                "+e._s(e.detallesOrden.length)+"\n              ")])]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center",attrs:{rowspan:"2"}},[e._v("Validado Por")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center",attrs:{rowspan:"2"}},[e._v("Estado")]),e._v(" "),e.descargarResultados?t("th",{staticClass:"text-center no-salto-linea",attrs:{colspan:e.descargar?3:2}},[e._v("\n              Descargado de "+e._s(e.nombreSistemaExterno)+"\n              "),t("span",{staticClass:"badge cursor-menu",attrs:{title:"Total","data-toggle":"tooltip","data-placement":"bottom"}},[e._v("\n                "+e._s(e.descargados)+"\n              ")])]):e._e(),e._v(" "),e.verOEnviarResultados?t("th",{staticClass:"text-center",attrs:{colspan:e.enviar?3:2}},[e._v("\n              Enviado a "+e._s(e.nombreSistemaExterno)+"\n              "),t("span",{staticClass:"badge cursor-menu",attrs:{title:"Total","data-toggle":"tooltip","data-placement":"bottom"}},[e._v("\n                "+e._s(e.enviados)+"\n              ")])]):e._e(),e._v(" "),e.esAdicional&&e.verOEnviarResultados?t("th",{staticClass:"text-center",attrs:{colspan:e.enviar?3:2}},[e._v("\n              Enviado a "+e._s(e.nombreSistemaExternoAdicional)+"\n              "),t("span",{staticClass:"badge cursor-menu",attrs:{title:"Total","data-toggle":"tooltip","data-placement":"bottom"}})]):e._e()]),e._v(" "),t("tr",[e.descargarResultados?t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]):e._e(),e._v(" "),e.descargarResultados?t("th",{staticClass:"col-sm-1 text-center"},[e._v("\n              Estado\n            ")]):e._e(),e._v(" "),e.descargarResultados&&e.descargar?t("th",{staticClass:"col-sm-1 text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.descargarSistemaExterno,expression:"descargarSistemaExterno"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.descargarSistemaExterno)?e._i(e.descargarSistemaExterno,null)>-1:e.descargarSistemaExterno},on:{change:[function(t){var a=e.descargarSistemaExterno,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.descargarSistemaExterno=a.concat([null])):i>-1&&(e.descargarSistemaExterno=a.slice(0,i).concat(a.slice(i+1)))}else e.descargarSistemaExterno=o},e.alternarDescargarSistemaExterno]}})]):e._e(),e._v(" "),e.verOEnviarResultados?t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]):e._e(),e._v(" "),e.verOEnviarResultados?t("th",{staticClass:"col-sm-1 text-center"},[e._v("\n              Estado\n            ")]):e._e(),e._v(" "),e.verOEnviarResultados&&e.enviar&&e.enviarResultados?t("th",{staticClass:"col-sm-1 text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.enviarSistemaExterno,expression:"enviarSistemaExterno"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.enviarSistemaExterno)?e._i(e.enviarSistemaExterno,null)>-1:e.enviarSistemaExterno},on:{change:[function(t){var a=e.enviarSistemaExterno,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.enviarSistemaExterno=a.concat([null])):i>-1&&(e.enviarSistemaExterno=a.slice(0,i).concat(a.slice(i+1)))}else e.enviarSistemaExterno=o},e.alternarEnviarSistemaExterno]}})]):e._e(),e._v(" "),e.esAdicional&&e.verOEnviarResultados?t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]):e._e(),e._v(" "),e.esAdicional&&e.verOEnviarResultados?t("th",{staticClass:"col-sm-1 text-center"},[e._v("\n              Estado\n            ")]):e._e()])]),e._v(" "),t("tbody",e._l(e.detallesOrden,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.examen.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n              "+e._s(a.validado_por?a.validado_por.nombre_usuario:"-")+"\n            ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("detalle-orden-estado",{attrs:{estado:a.estado}})],1),e._v(" "),e.descargarResultados?t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.created_at,"YYYY-MM-DD </br> HH:mm","-"))}})]):e._e(),e._v(" "),e.descargarResultados?t("td",{staticClass:"text-center"},[t("i",{staticClass:"fas",class:e.claseDescargadoSistemaExterno(a),attrs:{rel:"tooltip",title:e.tituloDescargadoSistemaExterno(a)}})]):e._e(),e._v(" "),e.descargarResultados&e.descargar?t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.descargar_sistema_externo,expression:"detalleOrden.descargar_sistema_externo"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.descargar_sistema_externo)?e._i(a.descargar_sistema_externo,null)>-1:a.descargar_sistema_externo},on:{change:function(t){var r=a.descargar_sistema_externo,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"descargar_sistema_externo",r.concat([null])):s>-1&&e.$set(a,"descargar_sistema_externo",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"descargar_sistema_externo",i)}}})]):e._e(),e._v(" "),e.verOEnviarResultados?t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_envia,"YYYY-MM-DD </br> HH:mm","-"))}})]):e._e(),e._v(" "),e.verOEnviarResultados?t("td",{staticClass:"text-center"},[t("i",{staticClass:"fas",class:{"fa-check":a.enviado_sistema_externo,"fa-times":!a.enviado_sistema_externo}})]):e._e(),e._v(" "),e.enviarResultados&e.enviar?t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.enviar_sistema_externo,expression:"detalleOrden.enviar_sistema_externo"}],attrs:{disabled:!e.estadosDetallesOrdenParaEnvio.includes(a.estado),type:"checkbox"},domProps:{checked:Array.isArray(a.enviar_sistema_externo)?e._i(a.enviar_sistema_externo,null)>-1:a.enviar_sistema_externo},on:{change:function(t){var r=a.enviar_sistema_externo,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"enviar_sistema_externo",r.concat([null])):s>-1&&e.$set(a,"enviar_sistema_externo",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"enviar_sistema_externo",i)}}})]):e._e(),e._v(" "),e.esAdicional&&e.verOEnviarResultados?t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea",domProps:{innerHTML:e._s(a.extras?e.$options.filters.fecha(a.extras.fecha_envia_adicional,"YYYY-MM-DD </br> HH:mm:ss","-"):"-")}})]):e._e(),e._v(" "),e.esAdicional&&e.verOEnviarResultados?t("td",{staticClass:"text-center"},[t("i",{staticClass:"fas",class:e.claseEnviadoSistemaExternoAdicional(a),attrs:{rel:"tooltip",title:e.tituloEnviadoSistemaExternoAdicional(a)}})]):e._e()])})),0)]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.detallesOrden.length,tipo:"éxamenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{title:"Actualizar",disabled:e.cargando},on:{click:e.cargarOrden}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],staticClass:"fas fa-sync"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando,expression:"cargando"}],staticClass:"fas fa-spinner fa-spin"})]),e._v(" "),e.descargarResultados&&e.descargar&&"N"!==e.orden.estado?t("button",{staticClass:"btn btn-sm btn-primary",attrs:{disabled:e.procesando||!e.existenExamenesParaDescargar},on:{click:e.descargarDeSistemaExterno}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-download"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin"}),e._v("\n          Descargar de "+e._s(e.nombreSistemaExterno)+"\n        ")]):e._e(),e._v(" "),e.verOEnviarResultados&&e.enviar&&"N"!==e.orden.estado?t("button",{staticClass:"btn btn-sm btn-primary",attrs:{disabled:e.procesando||!e.existenExamenesParaEnviar},on:{click:e.enviarASistemaExterno}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-upload"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin"}),e._v("\n          Enviar a "+e._s(e.nombreSistemaExterno)+"\n        ")]):e._e()])])])])}),[],!1,null,null,null).exports},8301:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{tipo:{type:String,required:!0}},data:function(){return{cargando:{registro:!1,reestablecerToken:!1,generarToken:!1,enviarToken:!1},registro:{id:"",nombre:"",correo:""},token:{id:"",correo:"",token:"",fechaCreacion:"",estado:"",url:""}}},mounted:function(){var e=this;$("body").tooltip({selector:'[data-toggle="tooltip"]',container:"body",trigger:"hover"}),$("#modalTokenPortal").on("show.bs.modal",(function(t){"modalTokenPortal"===t.target.id&&(e.$refs.alerta.ocultarAlertas(),e.registro.id=$(t.relatedTarget).data("id"),e.cargarDatos())})),$("#modalTokenPortal").on("hide.bs.modal",(function(){e.limpiar()}))},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cargarDatos:function(){var e=this;axios.get("/api/".concat(this.recurso,"/").concat(this.registro.id),{params:{incluir:"token"}}).then((function(t){var a=t.data.data;e.registro.nombre=e.esClientes?a.nombre:a.nombre_completo,e.registro.correo=e.esClientes?a.correo_portal:a.correo,e.esClientes&&e.definirToken(a.token_empresa),e.esMedicos&&e.definirToken(a.token_medico)})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar datos"),e.mostrarError(a)}))},enviarCorreoToken:function(){var e=this;this.deshabilitarBotones||(this.cargando.enviarToken=!0,axios.post("/api/".concat(this.recurso,"/").concat(this.token.correo,"/enviar")).then((function(t){var a=t.data.data;a.unshift("Correo enviado"),e.mostrarExito(a)})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar enviar correo"),e.mostrarError(a)})).then((function(){return e.cargando.enviarToken=!1})))},reestablecerToken:function(){var e=this;this.cargando.reestablecerToken=!0,axios.patch("/api/".concat(this.recurso,"/token/").concat(this.token.id)).then((function(t){var a=t.data.data;e.definirToken(a),e.mostrarExito("Token reestablecido")})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar reestablecer token"),e.mostrarError(a)})).then((function(){return e.cargando.reestablecerToken=!1}))},generarTokenYEnviar:function(){this.generarToken(!0)},generarToken:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cargando.generarToken=!0;var a={correo:this.registro.correo,enviarCorreo:t?1:null};axios.post("/api/".concat(this.recurso,"/token"),a).then((function(a){var r=a.data.data;e.esClientes&&(e.registro.nombre=r.empresa.nombre,e.registro.correo=r.empresa.correo_portal),e.esMedicos&&(e.registro.nombre=r.medico.nombre_completo,e.registro.correo=r.medico.correo),e.definirToken(r);var o=["Token generado"];t&&o.push("Correo enviado"),e.mostrarExito(o)})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar reestablecer token"),e.mostrarError(a)})).then((function(){return e.cargando.generarToken=!1}))},copiarURL:function(){this.copiarAPortaPapelesPorRef(this.$refs.url),this.mostrarExito("Copiado")},limpiar:function(){this.registro.id="",this.registro.nombre="",this.registro.correo="",this.token.id="",this.token.correo="",this.token.token="",this.token.fechaCreacion="",this.token.url=""},definirToken:function(e){if(e){this.token.id=e.id,this.token.correo=this.esClientes?e.empresa_correo:e.medico_correo,this.token.token=e.token,this.token.fechaCreacion=e.created_at,e.url&&(this.token.url=e.url);var t=moment(this.token.fechaCreacion),a=moment().diff(t,"days",!0),r=(a=a<0?-1*a:a)>=0?" días vigente":" días caducado";this.token.estado=a.toFixed(2)+r}}},computed:{esClientes:function(){return"CLIENTES"===this.tipo},esMedicos:function(){return"MEDICOS"===this.tipo},recurso:function(){return this.esClientes?"clientes":"medicos"},deshabilitarBotones:function(){return this.cargando.generarToken||this.cargando.reestablecerToken||this.cargando.enviarToken}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalTokenPortal",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Portal de "+e._s(e.registro.nombre))])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"correo"}},[e._v("Correo")]),e._v(" "),t("div",{attrs:{id:"correo"}},[e._v(e._s(e.registro.correo?e.registro.correo:"-"))])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"correo"}},[e._v("Fecha creación")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.cargando.reestablecerToken,expression:"cargando.reestablecerToken"}]},[t("i",{staticClass:"fas fa-spinner fa-spin"})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.cargando.reestablecerToken,expression:"!cargando.reestablecerToken"}]},[e._v("\n              "+e._s(e._f("fecha")(e.token.fechaCreacion,"YYYY-MM-DD HH:mm","-"))+"\n            ")])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"correo"}},[e._v("Estado")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.cargando.reestablecerToken||e.cargando.generarToken,expression:"cargando.reestablecerToken || cargando.generarToken"}]},[t("i",{staticClass:"fas fa-spinner fa-spin"})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.token.token&&!(e.cargando.reestablecerToken||e.cargando.generarToken),expression:"token.token && !(cargando.reestablecerToken || cargando.generarToken)"}]},[e._v("\n              "+e._s(e.token.estado)+"\n            ")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.token.token,expression:"!token.token"}]},[e._v("\n              -\n            ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"correo"}},[e._v("\n              URL\n            ")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8"},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando.generarToken,expression:"cargando.generarToken"}],staticClass:"fas fa-spinner fa-spin"}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.cargando.generarToken,expression:"!cargando.generarToken"}],ref:"url",staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[e._v("\n                  "+e._s(e.token.url?e.token.url:"-")+"\n                ")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.token.token&&!e.cargando.generarToken,expression:"token.token && !cargando.generarToken"}],staticClass:"col-sm-4",staticStyle:{"padding-left":"0"}},[t("a",{staticClass:"btn puntero",class:{disabled:e.deshabilitarBotones},staticStyle:{"padding-top":"0","padding-left":"0","padding-right":"0"},attrs:{"data-toggle":"tooltip",title:"Copiar a portapapeles"},on:{click:e.copiarURL}},[t("i",{staticClass:"far fa-copy fa-lg fa-fw text-gris"})]),e._v(" "),t("a",{staticClass:"btn puntero",class:{disabled:e.deshabilitarBotones},staticStyle:{"padding-top":"0","padding-left":"0","padding-right":"0"},attrs:{target:"_blank",href:e.token.url,"data-toggle":"tooltip",title:"Ir al portal"}},[t("i",{staticClass:"fas fa-external-link-square-alt fa-lg fa-fw text-gris"})]),e._v(" "),t("a",{staticClass:"btn puntero",class:{disabled:e.deshabilitarBotones},staticStyle:{"padding-top":"0","padding-left":"0","padding-right":"0"},attrs:{"data-toggle":"tooltip",title:"Enviar por correo electrónico"},on:{click:e.enviarCorreoToken}},[t("i",{staticClass:"fas fa-lg fa-fw text-gris",class:{"fa-envelope":!e.cargando.enviarToken,"fa-spinner fa-spin":e.cargando.enviarToken}})])])])])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.token.token,expression:"token.token"}],staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:e.deshabilitarBotones},on:{click:e.reestablecerToken}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando.reestablecerToken,expression:"cargando.reestablecerToken"}],staticClass:"fas fa-spinner fa-spin fa-lg fa-fw"}),e._v("\n          Reestablecer token existente\n        ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:e.deshabilitarBotones||!e.registro.correo},on:{click:function(t){return e.generarToken(!1)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando.generarToken,expression:"cargando.generarToken"}],staticClass:"fas fa-spinner fa-spin fa-lg fa-fw"}),e._v("\n          Generar nuevo token\n        ")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",disabled:e.deshabilitarBotones||!e.registro.correo},on:{click:e.generarTokenYEnviar}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando.generarToken,expression:"cargando.generarToken"}],staticClass:"fas fa-spinner fa-spin fa-lg fa-fw"}),e._v("\n          Generar nuevo token y enviar\n        ")])])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports},6914:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{Modal:a(1430).Z},props:{value:{type:Boolean,default:!1},detalleId:{type:Number,default:null}},data:function(){return{mostrar:!1}},computed:{url:function(){return this.detalleId?"/reportes/microbiologia/".concat(this.detalleId,"/visual"):null}},methods:{cerrar:function(){this.$emit("input",!1)}},watch:{mostrar:function(e){this.$emit("input",e)},value:function(e){this.mostrar=e}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("modal",{attrs:{id:"ultimoResultadoMicrobiologiaModal",tamano:"lg"},scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("Último resultado")]},proxy:!0},{key:"cuerpo",fn:function(){return[t("iframe",{attrs:{id:"ultimo-resultado-microbiologia",width:"100%",height:"400",src:e.url}})]},proxy:!0},{key:"pie",fn:function(){return[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")])]},proxy:!0}]),model:{value:e.mostrar,callback:function(t){e.mostrar=t},expression:"mostrar"}})}),[],!1,null,null,null).exports},5683:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={components:{DatosOrden:a(6570).Z},props:{ordenId:{required:!0},tipo:{type:String,required:!0,validator:function(e){return-1!==["ordenes","resultados"].indexOf(e)}}},data:function(){return{cargando:!1,paginaActual:1,totalPaginas:0,totalRegistros:0,orden:null,auditorias:[],ordenesPropiedadesExcluir:["detalle_orden_id","plantilla_id","muestra_id","orden_examen","orden_seccion","imprimir_solo_parametros"],catalogos:[{tipo:"PACIENTES",recurso:"pacientes",ids:[],datos:[]},{tipo:r.oH.DIAGNOSTICOS,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.PLAN_SALUD,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.EXAMENES,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.MEDICOS,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.TIPO_ATENCION,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.PLAN_SALUD,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.SERVICIO,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.TIPOS_PACIENTES,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.CATEGORIAS,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.USUARIOS,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.MUESTRAS,recurso:"catalogos",ids:[],datos:[]},{tipo:r.oH.LABORATORIOS,recurso:"catalogos",ids:[],datos:[]}],ordenes:{paciente_id:{catalogo:"PACIENTES"},paciente_type:{etiqueta:"Tipo"},plan_salud_id:{catalogo:r.oH.PLAN_SALUD},diagnostico_id:{etiqueta:"Diagnóstico",catalogo:r.oH.DIAGNOSTICOS},tipo_atencion_id:{etiqueta:"Tipo atención",catalogo:r.oH.TIPO_ATENCION},medico_id:{etiqueta:"Médico",catalogo:r.oH.MEDICOS},sala_id:{etiqueta:"Servicio",catalogo:r.oH.SERVICIO},tipo_paciente_id:{catalogo:r.oH.TIPOS_PACIENTES},laboratorio_id:{catalogo:r.oH.LABORATORIOS},subempresa_id:{etiqueta:"Categoría",catalogo:r.oH.CATEGORIAS},numero_sala:{etiqueta:"Sala"},numero_pedido:{etiqueta:"Número pedido"},fecha_orden:{filtro:"fecha"},fecha_pedido:{filtro:"fecha"},fecha_entrega_estimada:{etiqueta:"Fecha entrega",filtro:"fecha"},observaciones_orden:{etiqueta:"Observaciones recibo"},observaciones_hoja_trabajo:{etiqueta:"Observaciones laboratorista"},numero_orden_externa:{etiqueta:"Referencia"},estado:{filtro:"estadoOrden"},usuario_anula:{catalogo:r.oH.USUARIOS},valor_descuento:{filtro:"numero"},valor_recargo:{filtro:"numero"},valor_total:{filtro:"numero"}},detallesOrdenes:{usuario_entrega_id:{catalogo:r.oH.USUARIOS},usuario_reporta:{catalogo:r.oH.USUARIOS},usuario_imprime:{catalogo:r.oH.USUARIOS},usuario_valida:{catalogo:r.oH.USUARIOS},estado:{filtro:"estadoDetalleOrden"},descuento:{filtro:"numero"},valor_recargo:{filtro:"numero"},descargado_sistema_externo:{etiqueta:"Descargado de sistema externo"},enviado_sistema_externo:{etiqueta:"Enviado a sistema externo"}},abono:{forma_pago:{filtro:"formaPago"},numero_forma_pago:{etiqueta:"Número"}},detalleOrdenMuestra:{observacion:{etiqueta:"Observación"},estado:{filtro:"estadoMuestra"},fecha:{filtro:"fecha"}},reportes:{usuario_entrega_id:{catalogo:r.oH.USUARIOS},usuario_reporta:{catalogo:r.oH.USUARIOS},usuario_imprime:{catalogo:r.oH.USUARIOS},usuario_valida:{catalogo:r.oH.USUARIOS},estado:{filtro:"estadoDetalleOrden"},descuento:{filtro:"numero"},valor_recargo:{filtro:"numero"}}}},mounted:function(){var e=this;$("#verAuditoriasModal").on("shown.bs.modal",(function(t){"verAuditoriasModal"===t.target.id&&e.ordenId&&(e.cargarOrden(),e.cargarAuditorias())})),$("#verAuditoriasModal").on("hidden.bs.modal",(function(t){"verAuditoriasModal"===t.target.id&&e.ordenId&&(e.orden={},e.auditorias=[])}))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarOrden:function(){var e=this;axios.get("/api/ordenes/".concat(this.ordenId),{params:{incluir:["paciente"]}}).then((function(t){var a=t.data.data;e.orden=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar orden!",a)}))},cargarAuditorias:function(){var e=this;this.cargando=!0;var t={ordenId:this.ordenId,page:this.paginaActual};axios.get("/api/auditorias/".concat(this.tipo),{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.procesarAuditorias(a.data)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar auditorias!",a),e.cargando=!1}))},cerrar:function(){this.orden=null,this.auditorias=[],$("#verAuditoriasModal").modal("hide")},ucPrimero:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},convertirAEtiqueta:function(e,t){return e&&e.etiqueta?e.etiqueta:(t=t.replace("_id",""),(t=this.ucPrimero(t)).replaceAll("_"," "))},excluirPropiedad:function(e,t){return this.ordenesPropiedadesExcluir.includes(t)},obtenerPropiedad:function(e,t){var a=null;switch(e){case"App\\Models\\Orden":a=t in this.ordenes?this.ordenes[t]:null;break;case"App\\Models\\DetalleOrden":a=t in this.detallesOrdenes?this.detallesOrdenes[t]:null;break;case"App\\Models\\DetalleOrdenMuestra":a=t in this.detalleOrdenMuestra?this.detalleOrdenMuestra[t]:null;break;case"App\\Models\\Reporte":a=t in this.reportes?this.reportes[t]:null;break;case"App\\Models\\Abono":a=t in this.abono?this.abono[t]:null}return a},obtenerTextoConFiltro:function(e,t,a,r){return"valor_adicional"===a&&"E"===r?t:"valor_adicional"===a?t?"Archivo":"":e?"fecha"===e.filtro&&t?this.fechaALocal(t):e.filtro&&t?this.$options.filters[e.filtro](t):t:t},procesarAuditorias:function(e){var t=this;e.forEach((function(e){return e.cambios=t.procesarCambios(e)})),this.cargarCatalogos().then((function(){t.auditorias=e,t.cargando=!1}))},procesarCambios:function(e){var t=[];if(e.properties.examen_id&&this.agregarIdACatalogo(r.oH.EXAMENES,e.properties.examen_id),e.properties.muestra_id&&this.agregarIdACatalogo(r.oH.MUESTRAS,e.properties.muestra_id),_.isEmpty(e.properties)||void 0===e.properties.attributes){return t.push({clave:"",etiqueta:"",anterior:"",nuevo:""}),t}for(var a in e.properties.attributes)if(e.properties.attributes.hasOwnProperty(a)){var o=void 0,i=void 0;if("eliminar"===e.description?(o=e.properties.attributes[a],i=e.properties.old?e.properties.old[a]:null):(o=e.properties.old?e.properties.old[a]:null,i=e.properties.attributes[a]),(void 0!==o||void 0!==i)&&!this.excluirPropiedad(e.subject_type,a)){var s=this.obtenerPropiedad(e.subject_type,a);this.cargarCatalogo(s,o,i);var n={clave:a,catalogo:s&&s.catalogo?s.catalogo:"",etiqueta:this.convertirAEtiqueta(s,a),anterior:this.obtenerTextoConFiltro(s,o,a,e.properties.tipo_parametro),nuevo:this.obtenerTextoConFiltro(s,i,a,e.properties.tipo_parametro)};t.push(n)}}if(_.isEmpty(t)){t.push({clave:"",etiqueta:"",anterior:"",nuevo:""})}return t.sort((function(e,t){return e.etiqueta>t.etiqueta?1:-1}))},cargarCatalogo:function(e,t,a){if(e&&e.catalogo){if(t){var r=this.obtenerCatalogo(e.catalogo);r.ids.includes(t)||r.ids.push(t)}if(a){var o=this.obtenerCatalogo(e.catalogo);o.ids.includes(a)||o.ids.push(a)}}},cargarCatalogos:function(){var e=this,t=[];return this.catalogos.filter((function(e){return!_.isEmpty(e.ids)})).forEach((function(e){var a={catalogo:e.tipo,ids:e.ids};t.push(axios.get("/api/".concat(e.recurso),{params:a}))})),Promise.all(t).then((function(t){t.forEach((function(t){e.obtenerCatalogo(t.config.params.catalogo).datos=t.data.data}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar catálogos!",a)}))},obtenerResponsable:function(e){var t=null;switch(e.causer_type){case"App\\Models\\Usuario":t=e.causer.nombre_usuario;break;case"App\\Models\\Equipo":case"App\\Models\\SistemaExterno":t=e.causer.nombre}return t},obtenerObjeto:function(e){var t=null;switch(e.subject_type){case"App\\Models\\Orden":t="orden";break;case"App\\Models\\DetalleOrden":var a=this.obtenerTextoCatalogo(r.oH.EXAMENES,e.properties.examen_id);return"examen <i>".concat(a,"</i>");case"App\\Models\\DetalleOrdenMuestra":var o=this.obtenerTextoCatalogo(r.oH.MUESTRAS,e.properties.muestra_id);return"muestra <i>".concat(o,"</i>");case"App\\Models\\Reporte":t="reporte <i>".concat(e.properties.nombre_examen,"</i>");break;case"App\\Models\\DetalleReporte":t="resultado  <i>".concat(e.properties.nombre_parametro,"</i>");break;case"App\\Models\\Abono":t="<i>abono</i>"}return t},obtenerTextoCatalogo:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e||!t)return this.obtenerTexto(t);var i=this.buscarCatalogo(e,t,a,o);switch(e){case r.oH.EXAMENES:return i?i.nombre:"examen";case r.oH.MEDICOS:return i?i.nombre_completo:t;case r.oH.TIPO_ATENCION:return i?i.nombre:t;case r.oH.DIAGNOSTICOS:return i?i.codigo:t;case r.oH.SERVICIO:case r.oH.PLAN_SALUD:case r.oH.CATEGORIAS:case r.oH.TIPOS_PACIENTES:case r.oH.LABORATORIOS:case r.oH.MUESTRAS:return i?i.nombre:t;case r.oH.USUARIOS:return i?i.nombre_usuario:t;case"PACIENTES":return i?i.nombre_paciente:t;default:return t}},agregarIdACatalogo:function(e,t){var a=this.obtenerCatalogo(e);if(!a)return console.error("No existe tipo catálogo "+e),null;a.ids.push(t)},buscarCatalogo:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this.obtenerCatalogo(e);if(!o)return console.error("No existe tipo catálogo "+e),null;if("PACIENTES"===e){var i=this.obtenerPacienteType(a,r);return o.datos.find((function(e){return e.id===Number(t)&&e.tipo===i}))}return o.datos.find((function(e){return e.id===Number(t)}))},obtenerPacienteType:function(e,t){var a="";return e&&t.properties.attributes.paciente_type&&(a=t.properties.attributes.paciente_type),!e&&t.properties.old&&t.properties.old.paciente_type&&(a=t.properties.old.paciente_type),a||(a=this.orden.paciente_type),a},obtenerTexto:function(e){return!1===e?"No":!0===e?"Si":"App\\Models\\PacienteAnimal"===e?"Animal":"App\\Models\\PacienteHumano"===e?"Humano":e},obtenerCatalogo:function(e){return this.catalogos.find((function(t){return t.tipo===e}))}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade in",attrs:{id:"verAuditoriasModal",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title",staticStyle:{"margin-bottom":"4px"}},[e._v("\n            Auditoría\n          ")]),e._v(" "),t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,orden:e.orden}})],1),e._v(" "),t("div",{staticClass:"modal-body",staticStyle:{height:"70vh","overflow-y":"auto"}},[t("alerta",{ref:"alerta"}),e._v(" "),!e.cargando&&e.auditorias.length>0?t("table",{staticClass:"table table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.auditorias,(function(a){return e._l(a.cambios,(function(r,o){return t("tr",[0===o?t("td",{staticClass:"text-left",attrs:{rowspan:a.cambios.length}},[e._v("\n                  "+e._s(e.ucPrimero(a.description))+"\n                  "),t("span",{domProps:{innerHTML:e._s(e.obtenerObjeto(a))}})]):e._e(),e._v(" "),0===o?t("td",{staticClass:"text-center",attrs:{rowspan:a.cambios.length}},[e._v("\n                  "+e._s(e.obtenerResponsable(a))+"\n                ")]):e._e(),e._v(" "),0===o?t("td",{staticClass:"text-center",attrs:{rowspan:a.cambios.length},domProps:{innerHTML:e._s(e.$options.filters.fecha(a.created_at,"YYYY-MM-DD </br> HH:mm","-"))}}):e._e(),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(r.etiqueta))]),e._v(" "),t("td",{staticClass:"text-center",domProps:{innerHTML:e._s(e.obtenerTextoCatalogo(r.catalogo,r.anterior,!1,a))}}),e._v(" "),t("td",{staticClass:"text-center",domProps:{innerHTML:e._s(e.obtenerTextoCatalogo(r.catalogo,r.nuevo,!0,a))}})])}))}))],2)]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.auditorias.length,tipo:"auditorías"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[e.auditorias.length>0?t("div",{staticClass:"pull-left"},[t("output",{staticClass:"pull-right",staticStyle:{"margin-left":"10px"}},[t("strong",[e._v("Total:")]),e._v("\n              "+e._s(e.totalRegistros)+"\n            ")]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"page-range":8,"container-class":"pagination","click-handler":e.cargarAuditorias,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e(),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{title:"Actualizar",disabled:e.cargando},on:{click:e.cargarAuditorias}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],staticClass:"fas fa-sync"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando,expression:"cargando"}],staticClass:"fas fa-spinner fa-spin"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")])])])])])])}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-4 text-left",attrs:{rowspan:"2"}},[e._v("Evento")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center",attrs:{rowspan:"2"}},[e._v("Responsable")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center",attrs:{rowspan:"2"}},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("Cambios")])]),e._v(" "),t("tr",[t("th",{staticClass:"col-md-1 text-center"},[e._v("Campo")]),e._v(" "),t("th",{staticClass:"col-md-3 text-center"},[e._v("Anterior")]),e._v(" "),t("th",{staticClass:"col-md-3 text-center"},[e._v("Nuevo")])])])}],!1,null,null,null).exports},1758:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s={props:{id:{type:String,default:"modalCoberturaMsp"},identificacionPaciente:{type:String,required:!1},fechaNacimiento:{type:String,required:!1},fechaOrden:{type:String,required:!1}},data:function(){return{cargandoCoberturaMsp:!1,escala:"",fechaConsulta:moment().format("DD-MM-YYYY HH:mm"),fechaCobertura:moment().format("DD-MM-YYYY"),mensajeMSP:"",paciente:{nombres:"",apellidos:"",fecha_nacimiento:"",edad_calculado:"",segurosPrivados:[],segurosPublicos:[]}}},mounted:function(){var e=this;$("#".concat(this.id)).on("shown.bs.modal",(function(t){t.target.id===e.id&&(e.limpiar(),e.cargarCoberturaMsp())})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&e.limpiar()}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarCoberturaMsp:function(){var e=this;this.$refs.alerta.ocultarAlertas(),this.mensajeMSP="",this.cargandoCoberturaMsp=!0,axios.get("/api/identidad/".concat(this.identificacionPaciente)).then((function(t){var a=t.data.data;e.paciente.nombres=a.nombres,e.paciente.apellidos=a.apellidos,e.paciente.fecha_nacimiento=e.fechaNacimiento,e.paciente.segurosPrivados=a.segurosPrivados,e.paciente.segurosPublicos=a.segurosPublicos,""===a.nombres&&""===a.apellidos&&(e.mostrarInformativo("No se encontraron datos para la identificación especificada"),e.mensajeMSP="No se encontraron datos para la identificación especificada")})).catch((function(t){if(!axios.isCancel(t)){var a=e.procesarErrorResponse(t);e.mostrarErrores(a),e.mensajeMSP=a}})).then((function(t){return e.cargandoCoberturaMsp=!1}))},limpiar:function(){this.paciente.nombres="",this.paciente.apellidos="",this.paciente.fecha_nacimiento="",this.paciente.edad_calculado="",this.paciente.segurosPrivados=[],this.paciente.segurosPublicos=[],this.mensajeMSP="",this.escala=""},calcularBasadoEnFechaNacimiento:function(e){if(this.paciente.edad_calculado="",e&&10===e.length){var t=moment(),a=moment(e),r=t.diff(a,"days"),o=t.diff(a,"months"),i=t.diff(a,"years");i>0?(this.paciente.edad_calculado=i,this.escala="Años"):o>0?(this.paciente.edad_calculado=o,this.escala="Meses"):(this.paciente.edad_calculado=r,this.escala="Días")}},generarPdf:function(){this.fechaOrden&&(this.fechaCobertura=this.fechaOrden);var e=o(o({},this.paciente),{},{fechaConsulta:moment().format("YYYY-MM-DD HH:mm"),fechaCobertura:this.fechaCobertura}),t=this.obtenerParametrosUrl(e);window.open("/cobertura/".concat(this.identificacionPaciente,"/msp/pdf").concat(t),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")}},watch:{"paciente.fecha_nacimiento":function(e,t){this.calcularBasadoEnFechaNacimiento(e)}}};var n=a(3379),c=a.n(n),l=a(9283),d={insert:"head",singleton:!1};c()(l.Z,d);l.Z.locals;const u=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade modal-nivel-multiple",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),e.cargandoCoberturaMsp?e._e():t("div",[e.paciente.nombres.length>0?t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"label-success"},[e._v("\n                  "+e._s(e.paciente.apellidos)+" "+e._s(e.paciente.nombres)+"\n                ")])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"label-info"},[e._v("\n                  Fecha de consulta: "+e._s(e.fechaConsulta)+"\n                ")])])]),e._v(" "),t("h4",[e._v("IESS, ISSFA, ISSPOL")]),e._v(" "),t("table",[e._m(1),e._v(" "),t("tbody",[e._l(e.paciente.segurosPublicos,(function(a){return[t("tr",[e._l(a,(function(a){return[t("td",{staticClass:"text-center"},[e._v(e._s(a))])]}))],2)]}))],2)]),e._v(" "),t("h6",{staticClass:"nota"},[e._v("* La información Histórica reflejada corresponde a datos desde Junio 2010")])]):e._e(),e._v(" "),t("br"),e._v(" "),e.paciente.nombres.length>0&&e.paciente.segurosPrivados.length?t("div",[t("h4",[e._v("RED PRIVADA COMPLEMENTARIA")]),e._v(" "),t("table",[e._m(2),e._v(" "),t("tbody",[e._l(e.paciente.segurosPrivados,(function(a){return[t("tr",[e._l(a,(function(a){return[t("td",{staticClass:"text-center"},[e._v(e._s(a))])]})),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.identificacionPaciente))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.paciente.nombres))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.paciente.apellidos))])],2)]}))],2)]),e._v(" "),t("h6",{staticClass:"nota"},[e._v("* La información Histórica reflejada corresponde a datos desde Agosto 2017")])]):e.paciente.nombres.length>0?t("div",[t("h4",[e._v("RED PRIVADA COMPLEMENTARIA")]),e._v("\n            NO EXISTEN RESULTADOS PARA LOS PARÁMETROS INGRESADOS\n          ")]):e._e()]),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoCoberturaMsp,cantidad:e.paciente.nombres.length,alto:"210px",tipo:"recibo"},scopedSlots:e._u([{key:"cargando",fn:function(){return[e._v("Obteniendo datos desde MSP")]},proxy:!0},{key:"no-resultado",fn:function(){return[e._v(e._s(e.mensajeMSP))]},proxy:!0}])})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{title:"Actualizar",disabled:e.cargandoCoberturaMsp},on:{click:e.cargarCoberturaMsp}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargandoCoberturaMsp,expression:"!cargandoCoberturaMsp"}],staticClass:"fas fa-sync"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoCoberturaMsp,expression:"cargandoCoberturaMsp"}],staticClass:"fas fa-spinner fa-spin"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:!e.paciente.nombres.length>0},on:{click:e.generarPdf}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v("Imprimir\n        ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Cobertura MSP")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-2 text-center"},[e._v("Seguro")]),e._v(" "),t("th",{staticClass:"col-sm-4 text-center"},[e._v("Tipo de seguro")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Mensaje")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Registro de Cobertura de Atención de Salud")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-2 text-center"},[e._v("RUC de empresa")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Nombre del Financiador")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Identificación del Beneficiario")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Nombres del Beneficiario")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Apellidos del Beneficiario")])])])}],!1,null,"7e1dcd56",null).exports},9835:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={data:function(){return{detalleOrden:{}}},mounted:function(){var e=this;$("#modalVerMuestras").on("show.bs.modal",(function(t){e.detalleOrden=$(t.relatedTarget).data("detalleOrden")})),$("#modalVerMuestras").on("hide.bs.modal",(function(){return e.detalleOrden={}}))},methods:{},computed:{}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalVerMuestras",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",e._l(e.detalleOrden.muestras,(function(a,r){return t("tr",[0===r?t("td",{staticClass:"text-left",attrs:{rowspan:e.detalleOrden.muestras.length}},[e._v("\n              "+e._s(e.detalleOrden.nombre)+"\n            ")]):e._e(),e._v(" "),t("td",[e._v("\n              "+e._s(a.nombre)+"\n            ")]),e._v(" "),t("td",[e._v("\n              "+e._s(a.flebotomista?a.flebotomista.nombre_completo:"-")+"\n            ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n              "+e._s(e._f("estadoMuestra")(a.estado))+"\n            ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n              "+e._s(a.rechazada?"✔":"-")+"\n            ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n              "+e._s(a.externa?"✔":"-")+"\n            ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha,"YYYY-MM-DD </br> HH:mm"))}})]),e._v(" "),t("td",[e._v("\n              "+e._s(a.observacion?a.observacion:"-")+"\n            ")]),e._v(" "),t("td",[t("ul",e._l(a.motivos_rechazo,(function(a){return t("li",[e._v(" "+e._s(a.nombre))])})),0),e._v(" "),a.motivos_rechazo?e._e():[e._v("-")]],2)])})),0)])]),e._v(" "),e._m(2)])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"btn btn-default btn-sm pull-right",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Muestras")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Examen")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Muestra")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Flebotomista")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Rechazada")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Muestra externa")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Observacion")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Motivos rechazo")])])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Cerrar")])])}],!1,null,null,null).exports},6216:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],data:function(){return{cargando:!1,diagnosticos:[],cadenaBusqueda:"",paginaActual:1,totalPaginas:0,totalRegistros:0}},mounted:function(){var e=this;$("#".concat(this.id)).on("show.bs.modal",(function(t){if(t.target.id===e.id){if(!(t.relatedTarget instanceof HTMLElement)&&t.relatedTarget){var a=t.relatedTarget;e.cadenaBusqueda=a.cadenaBusqueda}e.buscarDiagnosticos()}})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.cadenaBusqueda="",e.diagnosticos=[])})),$("#".concat(this.id)).on("shown.bs.modal",(function(){return $("#cadenaBusquedaDiagnostico").focus()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.cargando=!0;var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginaActual};axios.get("/api/diagnosticos",{params:t}).then((function(t){var a=t.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.diagnosticos=a.data})).catch((function(t){e.diagnosticos=[];var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al listar diagnósticos!",a)})).then((function(){return e.cargando=!1}))},seleccionar:function(e){this.$emit("diagnostico-seleccionado",e),$("#".concat(this.id)).modal("hide")},borrar:function(){this.cadenaBusqueda="",this.buscarDiagnosticos()},buscarDiagnosticos:function(){this.paginaActual=1,this.cargarDatos()}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"cadenaBusquedaDiagnostico",type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarDiagnosticos.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.buscarDiagnosticos}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.borrar}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),!e.cargando&&e.diagnosticos.length>0?t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("br"),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(1),e._v(" "),t("tbody",[e._l(e.diagnosticos,(function(a){return[t("tr",{staticClass:"puntero",on:{dblclick:function(t){return e.seleccionar(a)}}},[t("td",{staticClass:"text-center centrado-vertical"},[e._v(e._s(a.codigo))]),e._v(" "),t("td",{staticClass:"centrado-vertical"},[e._v(e._s(a.concepto))]),e._v(" "),t("td",{staticClass:"col-sm-1 text-center centrado-vertical"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Seleccionar"},on:{click:function(t){return e.seleccionar(a)}}},[t("i",{staticClass:"fas fa-check"})])])])]}))],2)])]):e._e(),e._v(" "),!e.cargando&&e.diagnosticos.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarDatos,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.diagnosticos.length,tipo:"diagnósticos"}})],1)])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Diagnósticos")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-2 text-center"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-sm-10 text-left"},[e._v("Concepto")]),e._v(" "),t("th")])])}],!1,null,null,null).exports},592:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(4590),o=a(6486),i=a.n(o);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const c={components:{},props:{id:{type:String,default:""},editable:{type:Boolean,default:!1},sucursales:{type:Array,default:[]}},data:function(){return{codigoBusqueda:"",envioMuestra:{sucursal_origen_id:this.$usuario.sucursalId,sucursal_destino_id:"",detalles:[]},envioMuestraOriginal:{},procesando:{agregandoDetalleEnvioMuestra:!1,cargandoEnvioMuestra:!1,guardandoDetalleEnvioMuestra:!1}}},mounted:function(){this.focoCodigoBusqueda(),this.cargarEnvioMuestra(),this.envioMuestraOriginal=i().cloneDeep(this.envioMuestra),window.addEventListener("beforeunload",this.mensajeAdvertenciaCambios)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.mensajeAdvertenciaCambios)},methods:{agregarDetalleEnvioMuestraConRetraso:i().debounce((function(){var e=this,t=this.codigoBusqueda.trim().replace("'","-"),a=this.envioMuestra.detalles.find((function(e){return e.codigo_muestra===t}));this.codigoBusqueda="",t&&(a?this.mostrarErrores("La muestra ".concat(t," ya existe en el envío")):(this.procesando.agregandoDetalleEnvioMuestra=!0,axios.get("/api/muestras/envios/validar",{params:{codigo:t}}).then((function(t){var a=t.data.data;e.envioMuestra.detalles.push({orden_id:a.orden_id,nombre_muestra:a.nombre_muestra,codigo_muestra:a.codigo_muestra}),e.mostrarExito("Muestra <strong>".concat(a.codigo_muestra,"</strong> agregada exitosamente"))})).catch((function(){e.mostrarErrores("No se encontró la muestra en ninguna orden de la sucursal")})).finally((function(){e.procesando.agregandoDetalleEnvioMuestra=!1,e.focoCodigoBusqueda()}))))}),200),cargarEnvioMuestra:function(){var e=this;if(this.id){var t="/api/muestras/envios/".concat(this.id);this.editable&&(t+="/edit"),this.procesando.cargandoEnvioMuestra=!0,axios.get(t).then((function(t){var a=t.data.data;e.envioMuestra=a,e.envioMuestraOriginal=i().cloneDeep(e.envioMuestra)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).finally((function(){e.procesando.cargandoEnvioMuestra=!1,e.focoCodigoBusqueda()}))}},eliminarDetalleEnvioMuestra:function(e){confirm("¿Está seguro que desea eliminar la muestra del envío?")&&(this.envioMuestra.detalles=this.envioMuestra.detalles.filter((function(t){return t.codigo_muestra!==e.codigo_muestra})),this.mostrarExito("Muestra <strong>".concat(e.codigo_muestra,"</strong> eliminada exitosamente")))},guardarEnvioMuestra:function(){var e=this,t="/api/muestras/envios",a="post";this.id&&(t="/api/muestras/envios/".concat(this.id),a="patch"),this.procesando.guardandoDetalleEnvioMuestra=!0,axios[a](t,this.envioMuestra).then((function(){return e.regresar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar el envío de muestras!",a)})).finally((function(){return e.procesando.guardandoDetalleEnvioMuestra=!1}))},esGenerado:function(e){return e.estado===r.sk.GENERADO},focoCodigoBusqueda:function(){this.$nextTick((function(){$("#codigoBusqueda").focus()}))},mensajeAdvertenciaCambios:function(e){if(!this.procesando.guardandoDetalleEnvioMuestra&&this.existenCambios){var t="Hay cambios pendientes de guardar. Si deja esta página, los cambios se perderán.";return e.returnValue=t,t}},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},regresar:function(){window.location.href="/muestras/envios"}},computed:{detalles:function(){return i().orderBy(this.envioMuestra.detalles,(function(e){return+s(e.codigo_muestra.split("-"),1)[0]}),"desc")},existenCambios:function(){return JSON.stringify(this.envioMuestra)!==JSON.stringify(this.envioMuestraOriginal)},nombreSucursalDestino:function(){var e,t=this;return this.envioMuestra.sucursal_destino_id?null===(e=this.sucursales.find((function(e){return e.id===t.envioMuestra.sucursal_destino_id})))||void 0===e?void 0:e.nombre:""}}};const l=(0,a(1900).Z)(c,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e.editable?[e._v("\n        "+e._s(e.id?"Editar":"Crear")+" envío de muestra "+e._s(e.id?"#".concat(e.id):"")+"\n      ")]:[e._v("Envío de muestra #"+e._s(e.id))]]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[e.editable&&(e.$can("crear-envios-muestras")||e.$can("editar-envios-muestras"))?t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.guardarEnvioMuestra}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n          ")]):e._e()]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",[e._v("Sucursal de destino")]),e._v(" "),e.editable?t("div",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.envioMuestra.sucursal_destino_id,expression:"envioMuestra.sucursal_destino_id"}],staticClass:"form-control obligatorio",attrs:{required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.envioMuestra,"sucursal_destino_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v("\n            "+e._s(a.nombre)+"\n          ")])}))],2)]):t("div",[e._v(e._s(e.nombreSucursalDestino))])]),e._v(" "),e.id?t("div",{staticClass:"col-sm-2 form-group"},[t("label",[e._v("Estado")]),e._v(" "),t("div",[e._v("\n        "+e._s(e._f("estadoEnvioMuestra")(e.envioMuestra.estado))+"\n      ")])]):e._e(),e._v(" "),e.id?t("div",{staticClass:"col-sm-2 form-group"},[t("label",[e._v("Fecha de creación")]),e._v(" "),t("div",[e._v("\n        "+e._s(e._f("fecha")(e.envioMuestra.created_at))+"\n      ")])]):e._e()]),e._v(" "),e._m(0),e._v(" "),e.editable?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{attrs:{for:"codigoBusqueda"}},[e._v("Código de búsqueda")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.codigoBusqueda,expression:"codigoBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"codigoBusqueda",type:"text",minlength:"2",maxlength:"25",autocomplete:"off",disabled:e.procesando.agregandoDetalleEnvioMuestra},domProps:{value:e.codigoBusqueda},on:{input:[function(t){t.target.composing||(e.codigoBusqueda=t.target.value)},e.agregarDetalleEnvioMuestraConRetraso]}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm cursor-menu",attrs:{type:"button",title:"Agregar"}},[e.procesando.agregandoDetalleEnvioMuestra?t("i",{staticClass:"fas fa-spinner fa-spin",attrs:{"aria-hidden":"true"}}):e._e(),e._v(" "),e.procesando.agregandoDetalleEnvioMuestra?e._e():t("i",{staticClass:"fas fa-barcode",attrs:{"aria-hidden":"true"}})])])])])]):e._e(),e._v(" "),0!==e.envioMuestra.detalles.length||e.procesando.cargarEnvioMuestra?e._e():t("div",{staticClass:"flex items-center justify-center",staticStyle:{height:"120px"}},[e._v("\n    Agregue muestras al envío\n  ")]),e._v(" "),e.envioMuestra.detalles.length>0&&!e.procesando.cargarEnvioMuestra?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-5"},[e._v("\n        Muestra\n        "),t("span",{staticClass:"badge"},[e._v(e._s(e.envioMuestra.detalles.length))]),e._v(" "),e.existenCambios?t("span",{staticClass:"label label-danger"},[e._v("Hay cambios pendientes de guardar")]):e._e()]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha recepción")]),e._v(" "),e.editable?t("th",{staticClass:"col-sm-3"}):e._e()])]),e._v(" "),t("tbody",[e._l(e.detalles,(function(a){return[t("tr",[t("td",[e._v("\n          "+e._s(a.nombre_muestra)+"\n        ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n          "+e._s(a.codigo_muestra)+"\n        ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n          "+e._s(e._f("estadoDetalleEnvioMuestra")(a.estado))+"\n        ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n          "+e._s(e._f("fecha")(a.fecha_recepcion))+"\n        ")]),e._v(" "),e.editable?t("td",{staticClass:"text-right"},[e.$can("editar-envios-muestras")?t("a",{staticClass:"btn btn-danger btn-xs",class:{disabled:a.estado&&!e.esGenerado(a)},on:{click:function(t){return e.eliminarDetalleEnvioMuestra(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n          ")]):e._e()]):e._e()])]}))],2)]):e._e()],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("h3",[this._v("\n        Muestras\n      ")])])])}],!1,null,null,null).exports},8375:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(4590),o=a(582);const i={components:{Paginate:a.n(o)()},props:[],data:function(){return{cadenaBusqueda:"",cargando:!1,enviosMuestras:[],paginaActual:1,totalRegistros:0,totalPaginas:0}},mounted:function(){this.cargarEnviosMuestras()},methods:{anularEnvioMuestra:function(e){var t=this;confirm("¿Está seguro que desea anular el envío de muestra?")&&axios.delete("/api/muestras/envios/".concat(e.id)).then((function(){t.cargarEnviosMuestras(),t.mostrarExito("¡Envío de muestra anulado exitosamente!")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores(a)}))},borrarFormulario:function(){this.cadenaBusqueda=""},cargarEnviosMuestras:function(){var e=this;this.enviosMuestras=[],this.cargando=!0;var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginaActual};axios.get("/api/muestras/envios",{params:t}).then((function(t){var a=t.data;e.enviosMuestras=a.data,e.totalPaginas=a.last_page,e.totalRegistros=a.total})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).finally((function(){return e.cargando=!1}))},enviarEnvioMuestra:function(e){var t=this;confirm("¿Está seguro que desea actualizar el envío de muestra?")&&axios.patch("/api/muestras/envios/".concat(e.id,"/enviar")).then((function(){t.cargarEnviosMuestras(),t.mostrarExito("¡Envío de muestra actualizado exitosamente!")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores(a)}))},esAnulado:function(e){return e.estado===r.rE.ANULADO},esGenerado:function(e){return e.estado===r.rE.GENERADO},imprimitEnvioMuestra:function(e){window.open("/muestras/envios/".concat(e.id,"/pdf"),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)}},computed:{}};const s=(0,a(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Envíos de muestras\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:"",required:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.cargarEnviosMuestras.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.cargarEnviosMuestras}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.borrarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),e.$can("crear-envios-muestras")?t("li",[t("div",[t("a",{staticClass:"btn btn-primary",attrs:{href:"/muestras/envios/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n              ")])])]):e._e()])]},proxy:!0}])})],1),e._v(" "),!e.cargando&&e.enviosMuestras.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.enviosMuestras,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.id))]),e._v(" "),t("td",[e._v("\n            "+e._s(a.sucursal_destino.nombre)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n            "+e._s(a.detalles_count)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n            "+e._s(e._f("fecha")(a.created_at))+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v("\n            "+e._s(e._f("fecha")(a.fecha_envio))+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n            "+e._s(e._f("estadoEnvioMuestra")(a.estado))+"\n          ")]),e._v(" "),t("td",{staticClass:"text-right"},[e.$can("ver-envios-muestras")&&!e.esGenerado(a)?t("a",{staticClass:"btn btn-default btn-xs",attrs:{href:"/muestras/envios/".concat(a.id)}},[t("i",{staticClass:"fas fa-eye fa-fw"}),e._v(" Ver\n            ")]):e._e(),e._v(" "),e.$can("editar-envios-muestras")&&e.esGenerado(a)?t("a",{staticClass:"btn btn-default btn-xs",attrs:{href:"/muestras/envios/".concat(a.id,"/edit")}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]):e._e(),e._v(" "),e.$can("editar-envios-muestras")?t("a",{staticClass:"btn btn-default btn-xs",class:{disabled:!e.esGenerado(a)},on:{click:function(t){return e.enviarEnvioMuestra(a)}}},[t("i",{staticClass:"fas fa-paper-plane fa-fw"}),e._v(" Enviar\n            ")]):e._e(),e._v(" "),e.$can("ver-envios-muestras")?t("a",{staticClass:"btn btn-default btn-xs",class:{disabled:e.esAnulado(a)||e.esGenerado(a)},on:{click:function(t){return e.imprimitEnvioMuestra(a)}}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Imprimir\n            ")]):e._e(),e._v(" "),e.$can("anular-envios-muestras")?t("a",{staticClass:"btn btn-danger btn-xs",class:{disabled:!e.esGenerado(a)},on:{click:function(t){return e.anularEnvioMuestra(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Anular\n            ")]):e._e()])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.enviosMuestras.length,tipo:"muestras"}}),e._v(" "),!e.cargando&&e.enviosMuestras.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarEnviosMuestras,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-3"},[e._v("Destino")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Muestras")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha creación")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha envío")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-3"})])])}],!1,null,null,null).exports},6298:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(4590),o=a(6486),i=a.n(o);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const c={components:{},props:{id:{type:String,required:!0}},data:function(){return{procesando:{cargarEnvioMuestra:!1,recibirMuestra:!1},envioMuestra:{sucursal_origen:{},detalles:[]},codigoBusqueda:"",estado:"ENVIADO"}},mounted:function(){this.focoCodigoBusqueda(),this.cargarEnvioMuestra()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},focoCodigoBusqueda:function(){this.$nextTick((function(){$("#codigoBusqueda").focus()}))},recibirDebounce:i().debounce((function(){this.procesando.recibirMuestra=!0;var e=this.codigoBusqueda.trim().replace("'","-");this.procesarMuestra(r.sk.RECIBIDO,e)}),200),recibir:function(e){this.procesando.recibirMuestra=!0,this.procesarMuestra(r.sk.RECIBIDO,e.codigo_muestra)},rechazar:function(e){this.procesando.recibirMuestra=!0,this.procesarMuestra(r.sk.RECHAZADO,e.codigo_muestra)},procesarMuestra:function(e,t){var a=this,o={estado:e};if(!t)return this.codigoBusqueda="",this.focoCodigoBusqueda(),void(this.procesando.recibirMuestra=!1);axios.post("/api/muestras/recepciones/".concat(this.id,"/detalles/").concat(t),o).then((function(e){var t=e.data.data,o=a.envioMuestra.detalles.find((function(e){return e.id===t.id}));a.envioMuestra.estado=r.rE.RECIBIDO,o.estado=t.estado,o.fecha_recepcion=t.fecha_recepcion,o.estado===r.sk.RECIBIDO?a.mostrarExito("Muestra ".concat(o.codigo_muestra," ").concat(o.nombre_muestra," recibida")):a.mostrarExito("Muestra ".concat(o.codigo_muestra," ").concat(o.nombre_muestra," rechazada"))})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores(t)})).then((function(){a.codigoBusqueda="",a.focoCodigoBusqueda(),a.procesando.recibirMuestra=!1}))},cargarEnvioMuestra:function(){var e=this;this.procesando.cargarEnvioMuestra=!0,axios.get("/api/muestras/recepciones/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.envioMuestra=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){e.procesando.cargarEnvioMuestra=!1,e.focoCodigoBusqueda()}))},regresar:function(){window.location.href="/muestras/recepciones"}},computed:{detalles:function(){return i().orderBy(this.detallesFiltrados,(function(e){return+s(e.codigo_muestra.split("-"),1)[0]}),"asc")},detallesFiltrados:function(){var e=this;return this.estado?this.envioMuestra.detalles.filter((function(t){return t.estado===e.estado})):this.envioMuestra.detalles}}};const l=(0,a(1900).Z)(c,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Recepción de envío No. "+e._s(e.id)+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",[e._v("Sucursal de origen")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.envioMuestra.sucursal_origen.nombre?e.envioMuestra.sucursal_origen.nombre:"-")+"\n        ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",[e._v("Estado")]),e._v(" "),t("div",[e._v("\n          "+e._s(e._f("estadoEnvioMuestra")(e.envioMuestra.estado))+"\n        ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",[e._v("Fecha de creación")]),e._v(" "),t("div",[e._v("\n          "+e._s(e._f("fecha")(e.envioMuestra.created_at))+"\n        ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6"},[t("h3",[e._v("\n          Muestras\n          "),t("boton",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Actualizar",procesando:e.procesando.cargarEnvioMuestra,"mostrar-procesando":!1},on:{click:e.cargarEnvioMuestra}},[t("i",{staticClass:"fas fa-sync",attrs:{"aria-hidden":"true"}})])],1)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{attrs:{for:"codigoBusqueda"}},[e._v("Código de búsqueda")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.codigoBusqueda,expression:"codigoBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"codigoBusqueda",type:"text",minlength:"2",maxlength:"25",autocomplete:"off",disabled:e.procesando.recibirMuestra},domProps:{value:e.codigoBusqueda},on:{input:[function(t){t.target.composing||(e.codigoBusqueda=t.target.value)},e.recibirDebounce]}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm cursor-menu",attrs:{type:"button",title:"Recibir"}},[e.procesando.recibirMuestra?t("i",{staticClass:"fas fa-spinner fa-spin",attrs:{"aria-hidden":"true"}}):e._e(),e._v(" "),e.procesando.recibirMuestra?e._e():t("i",{staticClass:"fas fa-barcode",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-9 form-group"},[t("label",{attrs:{for:"codigoBusqueda"}},[e._v("Mostrar")]),e._v(" "),t("div",[t("label",{staticClass:"checkbox-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.estado,expression:"estado"}],attrs:{name:"estado",type:"radio",value:""},domProps:{checked:e._q(e.estado,"")},on:{click:e.focoCodigoBusqueda,change:function(t){e.estado=""}}}),e._v("\n            Todos\n          ")]),e._v(" "),t("label",{staticClass:"checkbox-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.estado,expression:"estado"}],attrs:{name:"estado",type:"radio",value:"ENVIADO"},domProps:{checked:e._q(e.estado,"ENVIADO")},on:{click:e.focoCodigoBusqueda,change:function(t){e.estado="ENVIADO"}}}),e._v("\n            Enviados\n          ")]),e._v(" "),t("label",{staticClass:"checkbox-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.estado,expression:"estado"}],attrs:{name:"estado",type:"radio",value:"RECIBIDO"},domProps:{checked:e._q(e.estado,"RECIBIDO")},on:{click:e.focoCodigoBusqueda,change:function(t){e.estado="RECIBIDO"}}}),e._v("\n            Recibidos\n          ")]),e._v(" "),t("label",{staticClass:"checkbox-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.estado,expression:"estado"}],attrs:{name:"estado",type:"radio",value:"RECHAZADO"},domProps:{checked:e._q(e.estado,"RECHAZADO")},on:{click:e.focoCodigoBusqueda,change:function(t){e.estado="RECHAZADO"}}}),e._v("\n            Rechazados\n          ")])])])]),e._v(" "),e.detallesFiltrados.length>0&&!e.procesando.cargarEnvioMuestra?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",[e._v("\n          Muestra\n          "),t("span",{staticClass:"badge"},[e._v(e._s(e.detallesFiltrados.length))])]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha recepción")]),e._v(" "),t("th",{staticClass:"col-sm-3"})])]),e._v(" "),t("tbody",[e._l(e.detalles,(function(a){return[t("tr",[t("td",[e._v("\n            "+e._s(a.nombre_muestra)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n            "+e._s(a.codigo_muestra)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n            "+e._s(e._f("estadoDetalleEnvioMuestra")(a.estado))+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_recepcion,"YYYY-MM-DD HH:mm","-"))}}),e._v(" "),t("td",{staticClass:"text-right"},["ENVIADO"===a.estado?t("boton",{staticClass:"btn btn-default",attrs:{procesando:e.procesando.recibirMuestra,"mostrar-procesando":!1,type:"button"},on:{click:function(t){return e.recibir(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"}),e._v(" "),t("span",{staticClass:"hidden-xs"},[e._v("Recibir")])]):e._e(),e._v(" "),"ENVIADO"===a.estado?t("boton",{staticClass:"btn btn-danger",attrs:{procesando:e.procesando.recibirMuestra,"mostrar-procesando":!1,type:"button"},on:{click:function(t){return e.rechazar(a)}}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v(" "),t("span",{staticClass:"hidden-xs"},[e._v("Rechazar")])]):e._e()],1)])]}))],2)]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.cargarEnvioMuestra,cantidad:e.detallesFiltrados.length,tipo:"muestras"}})],1)],1)}),[],!1,null,null,null).exports},5081:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(582);const o={components:{Paginate:a.n(r)()},props:[],data:function(){return{cargando:!1,filtros:{cadenaBusqueda:""},enviosMuestras:[],paginaActual:1,totalRegistros:0,totalPaginas:0}},mounted:function(){this.buscar()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},borrarFormulario:function(){this.filtros.cadenaBusqueda=""},buscar:function(){var e=this;this.enviosMuestras=[],this.cargando=!0;var t={cadenaBusqueda:this.filtros.cadenaBusqueda,page:this.paginaActual};axios.get("/api/muestras/recepciones",{params:t}).then((function(t){var a=t.data;e.enviosMuestras=a.data,e.totalPaginas=a.last_page,e.totalRegistros=a.total})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.cargando=!1}))}},computed:{}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Recepciones de muestras\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:"",required:""},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscar.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscar}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.borrarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])])])]},proxy:!0}])})],1),e._v(" "),!e.cargando&&e.enviosMuestras.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.enviosMuestras,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.id))]),e._v(" "),t("td",[e._v("\n            "+e._s(a.sucursal_origen.nombre)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n            "+e._s(e._f("fecha")(a.created_at))+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n            "+e._s(e._f("estadoEnvioMuestra")(a.estado))+"\n          ")]),e._v(" "),t("td",{staticClass:"text-right"},["ENVIADO"===a.estado||"RECIBIDO"===a.estado?t("a",{staticClass:"btn btn-default",attrs:{type:"button",href:"/muestras/recepciones/".concat(a.id,"/edit")}},[e._v("\n              Recibir\n            ")]):e._e()])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.enviosMuestras.length,tipo:"muestras"}}),e._v(" "),!e.cargando&&e.enviosMuestras.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.buscar,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",[e._v("Origen")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha creación")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1"})])])}],!1,null,null,null).exports},15:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={data:function(){return{procesando:!1,id:"",numero_orden:"",estado:"",motivo_anula:"",usuario_anula:"",fecha_anula:""}},mounted:function(){var e=this;$("#anularOrden").on("show.bs.modal",(function(t){e.id=$(t.relatedTarget).data("orden-id"),e.procesando=!0,axios.get("/api/ordenes/anuladas/".concat(e.id)).then((function(t){var a=t.data.data;e.numero_orden=a.numero_orden,e.estado=a.estado,e.motivo_anula=a.motivo_anula?a.motivo_anula:"",e.usuario_anula=a.usuario_anula?a.usuario_anula.nombre_completo:"",e.fecha_anula=a.fecha_anula})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al anular orden!",a)})).then((function(){return e.procesando=!1}))})),$("#anularOrden").on("shown.bs.modal",(function(){return $("#motivo_anula_orden").focus()})),$("#anularOrden").on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},limpiar:function(){this.id="",this.numero_orden="",this.estado="",this.motivo_anula="",this.usuario_anula="",this.fecha_anula=""},anular:function(){var e=this;this.procesando=!0,axios.delete("/api/ordenes/".concat(this.id,"?motivo=").concat(this.motivo_anula)).then((function(t){var a=t.data.data;e.$emit("orden-anulada",a),$("#anularOrden").modal("toggle")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al anular orden!",a)})).then((function(){return e.procesando=!1}))},revertirAnulacion:function(){var e=this;this.procesando=!0,axios.patch("/api/ordenes/".concat(this.id,"/revertir/anulacion"),{id:this.id}).then((function(t){var a=t.data.data;e.$emit("orden-revertida",a),$("#anularOrden").modal("toggle")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al revertir estado de orden!",a)})).then((function(){return e.procesando=!1}))}},computed:{esAnulada:function(){return"N"===this.estado}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"anularOrden",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.anular.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v(e._s(e.esAnulada?"Ver Anulación de Orden":"Anular Orden"))])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Orden No.")]),e._v(" "),t("div",[e._v(e._s(e.numero_orden))])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.esAnulada,expression:"esAnulada"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("orden-estado",{attrs:{estado:e.estado}})],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.esAnulada,expression:"esAnulada"}],staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Usuario")]),e._v(" "),t("div",[e._v(e._s(e.usuario_anula))])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.esAnulada,expression:"esAnulada"}],staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha Anulación")]),e._v(" "),t("div",[e._v(e._s(e._f("fecha")(e.fecha_anula)))])]),e._v(" "),t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:!e.esAnulada}},[e._v("Motivo")]),e._v(" "),e.esAnulada?e._e():t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.motivo_anula,expression:"motivo_anula"}],staticClass:"form-control input-sm textarea",attrs:{id:"motivo_anula_orden",name:"motivo_anula_orden",rows:"3",required:""},domProps:{value:e.motivo_anula},on:{input:function(t){t.target.composing||(e.motivo_anula=t.target.value)}}}),e._v(" "),e.esAnulada?t("div",[e._v(e._s(e.motivo_anula))]):e._e()])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),e.$can("revertir-anulacion-ordenes")?t("button",{directives:[{name:"show",rawName:"v-show",value:e.esAnulada,expression:"esAnulada"}],staticClass:"btn btn-primary btn-sm",attrs:{type:"button",disabled:e.procesando},on:{click:e.revertirAnulacion}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-undo fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n             Revertir Anulación\n          ")]):e._e(),e._v(" "),e.esAnulada?e._e():t("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"submit",disabled:e.procesando}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-trash fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n             Anular\n          ")])])])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports},4089:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});function r(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,n=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){c=!0,s=e},f:function(){try{n||null==a.return||a.return()}finally{if(c)throw s}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const i={components:{DatosOrden:a(6570).Z},props:["id","datos"],data:function(){return{permisos:{},procesando:!1,cadenaBusquedaDetalles:"",entregar_todos:!1,fecha_entrega:"",entregado_a:"",habilitarGuardar:!1,registro:{id:this.id,fecha_orden:"",estado:"",estado_nombre:"",numero_orden:"",paciente_id:"",empresa_id:"",empresa_nombre:"",empresa_estado:"",paciente:{}},detallesOrdenes:[]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},limpiarCadenaBusquedaDetalles:function(){this.cadenaBusquedaDetalles=""},alternarCamposFormulario:function(){"disabled"===$("fieldset").attr("disabled")?$("fieldset").removeAttr("disabled"):$("fieldset").attr("disabled","disabled")},redireccionar:function(){this.datos.urlPrevio&&this.datos.urlPrevio.includes("/ordenes")?window.location.href=this.datos.urlPrevio:window.location.href="/ordenes"},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),this.permisos=this.datos.permisos,axios.get("/api/entregas/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro=a,e.cargarOrden(),e.alternarCamposFormulario(),e.$refs.cargando.alternar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar entregas!",a)}))},cargarOrden:function(){var e=this;this.registro.empresa_nombre=this.registro.subempresa.nombre,this.registro.empresa_estado=this.registro.subempresa.empresa.estado,this.detallesOrdenes=this.registro.detalles_ordenes.map((function(t){return{id:t.id,examen_id:t.examen.id,examen_codigo:t.examen.codigo,examen_nombre:t.examen.nombre,estado:t.estado,fecha_entrega:e.fechaALocal(t.fecha_entrega),entregado_a:t.entregado_a,entregado_por:null!=t.entregado_por?t.entregado_por.nombre_usuario:"",entregado:!!t.fecha_entrega,modificado:!1}}));var t,a=r(this.registro.detalles_ordenes);try{for(a.s();!(t=a.n()).done;){var o=t.value;"L"!==o.estado&&"V"!==o.estado||(this.habilitarGuardar=!0)}}catch(e){a.e(e)}finally{a.f()}this.ordenarDetalles(this.detallesOrdenes)},ordenarDetalles:function(e){e.sort((function(e,t){return e.estado>t.estado?-1:e.estado<t.estado?1:0}))},entregarDetalle:function(e,t){var a=moment().format("HH:mm:ss"),r=this.fecha_entrega+" "+a;e.modificado=!e.modificado,t.target.checked?(e.fecha_entrega=r,e.entregado=!0,e.entregado_a=this.entregado_a):(e.fecha_entrega="",e.entregado_a="",e.entregado=!1,this.entregar_todos=!1)},entregarTodosDetalles:function(e){var t=moment().format("HH:mm:ss"),a=this.fecha_entrega+" "+t;if(e.target.checked){var o,i=r(this.detallesOrdenes);try{for(i.s();!(o=i.n()).done;){var s=o.value;!s.entregado&&["X","L","V"].includes(s.estado)&&(s.modificado=!0,s.fecha_entrega=a,s.entregado=!0,s.entregado_a=this.entregado_a)}}catch(e){i.e(e)}finally{i.f()}}else{var n,c=r(this.detallesOrdenes);try{for(c.s();!(n=c.n()).done;){var l=n.value;l.entregado&&["X","L","V"].includes(l.estado)&&(l.modificado=!1,l.fecha_entrega="",l.entregado_a="",l.entregado=!1)}}catch(e){c.e(e)}finally{c.f()}}},seleccionarPaciente:function(){this.entregado_a=this.registro.paciente.nombre_responsable},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.alternarCamposFormulario();var t=_.cloneDeep(this.registro);t.detallesOrdenes=this.detallesOrdenes.map((function(t){return t.fecha_entrega=e.fechaAUTC(t.fecha_entrega),t})),axios.patch("/api/entregas/"+this.id,t).then((function(){return e.redireccionar()})).catch((function(t){e.alternarBotonesSubmit(),e.alternarCamposFormulario();var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar entrega!",a)}))},revertirEntregas:function(){var e=this;this.procesando=!0,axios.delete("/api/entregas/".concat(this.id)).then((function(t){var a=t.data.data;e.registro=a,e.cargarOrden(),e.mostrarExito("Se han revertido las entregas")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al revertir entregas!",a)})).then((function(){return e.procesando=!1}))},completarFecha:function(){this.fecha_entrega=moment().format("YYYY-MM-DD")}},computed:{habilitarEntregarTodos:function(){return!(0!==this.fecha_entrega.length&&0!==this.entregado_a.length&&this.habilitarGuardar)},detallesOrdenesFiltrados:function(){var e=this;return this.detallesOrdenes.length>0?this.detallesOrdenes.filter((function(t){var a=new RegExp(e.cadenaBusquedaDetalles,"i");return a.test(t.examen_codigo)||a.test(t.examen_nombre)})):this.detallesOrdenes},existenEntregas:function(){var e=!1;return this.detallesOrdenes.length>0&&(e=this.detallesOrdenes.reduce((function(e,t){return e||t.modificado}),0)),e},existenEntregados:function(){return this.detallesOrdenes.reduce((function(e,t){return t.entregado?e+1:e+0}),0)>0}}};const s=(0,a(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Entrega física de resultados\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[e.habilitarGuardar?t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:!e.existenEntregas}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")]):e._e()]),e._v(" "),t("li",[e.permisos&&e.permisos.revertirEntregaOrdenes?t("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!e.existenEntregados},on:{click:e.revertirEntregas}},[t("i",{staticClass:"fas fa-fw",class:{"fa-undo":!e.procesando,"fa-spinner fa-spin":e.procesando}}),e._v("\n               Revertir entregas\n            ")]):e._e()]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"javascript:history.back()"}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("fieldset",{attrs:{disabled:""}},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-12"},[t("label",{staticClass:"control-label"},[e._v("\n            Datos del paciente\n          ")]),e._v(" "),t("datos-orden",{attrs:{"mostrar-sexo":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-fecha-nacimiento":!1,"mostrar-poliza":!1,"mostrar-direccion":!1,orden:e.registro}})],1),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"numero_orden"}},[e._v("Orden No.")]),e._v(" "),t("output",{attrs:{id:"numero_orden"}},[e._v(e._s(e.registro.numero_orden))])]),e._v(" "),t("div",{staticClass:"col-sm-1"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("orden-estado",{attrs:{estado:e.registro.estado}})],1),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_nombre"}},[e._v("Cliente")]),e._v(" "),t("output",{attrs:{id:"empresa_nombre"}},[e._v(e._s(e.registro.empresa_nombre))])])])]),e._v(" "),t("fieldset",{attrs:{disabled:""}},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_entrega"}},[e._v("Fecha entrega")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.fecha_entrega,expression:"fecha_entrega"}],staticClass:"form-control input-sm",attrs:{"data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-language":"es","data-date-autoclose":"true",id:"fecha_entrega",placeholder:"aaaa-mm-dd",disabled:!e.habilitarGuardar}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:!e.habilitarGuardar},on:{click:e.completarFecha}},[t("i",{staticClass:"fas fa-arrow-circle-down fa-fw"})])])])]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label",attrs:{for:"entregado_a"}},[e._v("Entregado a")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.entregado_a,expression:"entregado_a"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"entregado_a",maxlength:"50",disabled:!e.habilitarGuardar},domProps:{value:e.entregado_a},on:{input:function(t){t.target.composing||(e.entregado_a=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:!e.habilitarGuardar},on:{click:e.seleccionarPaciente}},[t("i",{staticClass:"fas fa-user-plus fa-fw"})])])])])])]),e._v(" "),t("fieldset",{attrs:{disabled:""}},[t("legend",{staticClass:"obligatorio"},[e._v("Exámenes")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusquedaDetalles,expression:"cadenaBusquedaDetalles"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusquedaDetalles},on:{input:function(t){t.target.composing||(e.cadenaBusquedaDetalles=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarCadenaBusquedaDetalles}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-4"},[e._v("Examen")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha entrega")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Entregado a")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Entregado por")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.entregar_todos,expression:"entregar_todos"}],attrs:{type:"checkbox",title:"Entregar todos",disabled:e.habilitarEntregarTodos},domProps:{checked:Array.isArray(e.entregar_todos)?e._i(e.entregar_todos,null)>-1:e.entregar_todos},on:{click:e.entregarTodosDetalles,change:function(t){var a=e.entregar_todos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.entregar_todos=a.concat([null])):i>-1&&(e.entregar_todos=a.slice(0,i).concat(a.slice(i+1)))}else e.entregar_todos=o}}})])])]),e._v(" "),t("tbody",e._l(e.detallesOrdenesFiltrados,(function(a){return t("tr",[t("td",[e._v(e._s(a.examen_codigo)+" - "+e._s(a.examen_nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoDetalleOrden")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.fecha_entrega))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.entregado_a))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.entregado_por))]),e._v(" "),t("td",{staticClass:"text-center"},["L"===a.estado||"V"===a.estado?t("input",{directives:[{name:"model",rawName:"v-model",value:a.entregado,expression:"detalle.entregado"}],attrs:{id:"entregar",type:"checkbox",disabled:e.habilitarEntregarTodos},domProps:{checked:Array.isArray(a.entregado)?e._i(a.entregado,null)>-1:a.entregado},on:{click:function(t){return e.entregarDetalle(a,t)},change:function(t){var r=a.entregado,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"entregado",r.concat([null])):s>-1&&e.$set(a,"entregado",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"entregado",i)}}}):e._e()])])})),0)])])],1)],1)}),[],!1,null,null,null).exports},1337:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const s={components:{BuscarOrdenesModal:a(2047).Z},props:[],data:function(){return{ordenes:[],muestras:[],muestraId:"",ordenesIds:[],cargandoOrdenes:!1,margen:!1,margenIzquierdo:"",conteo:0,pagina:1}},mounted:function(){var e=this;$("#etiquetas").on("show.bs.modal",(function(){e.cargarDatos()}))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;axios.get("/api/catalogos",{params:{catalogo:r.oH.MUESTRAS}}).then((function(t){e.muestras=t.data.data}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Muestras")}))},generarEtiquetas:function(){var e={margen:this.margen,muestraId:this.muestraId,margenIzquierdo:this.margenIzquierdo};e=this.construirParametros(e),window.open("/etiquetas/ordenes/".concat(this.ordenesIds,"/pdf").concat(e),"_blank","height=400,width=700,left=20,top=20,,scrollbars=yes,menubar=no")},construirParametros:function(e){var t=Object.entries(e).filter((function(e){var t=o(e,2);t[0];return t[1]})).map((function(e){var t=o(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})).join("&");return t?"?".concat(t):""},ordenesSeleccionadas:function(e){this.ordenesIds=e.ordenesIds,this.cargarOrdenes()},cargarOrdenes:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.cargandoOrdenes=!0;var a={ordenesIds:this.ordenesIds,incluir:"paciente,sucursal",page:t};axios.get("/api/ordenes/buscar",{params:a}).then((function(t){var a=t.data.data;e.conteo=a.last_page,e.ordenes=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al cargar órdenes"),e.mostrarErrores(a)})).then((function(){return e.cargandoOrdenes=!1}))},eliminarOrden:function(e){var t=this.ordenesIds.indexOf(e.id);this.ordenesIds.splice(t,1),_.isEmpty(this.ordenesIds)?(this.ordenes=[],this.ordenesIds=[]):this.cargarOrdenes(),this.mostrarInformativo('Orden No. "'+e.numero_orden+'" eliminada.')},eliminarOrdenes:function(){this.ordenes=[],this.ordenesIds=[]},cerrar:function(){this.ordenesIds=[],this.ordenes=[],this.conteo=0,this.pagina=1,$("#etiquetas").modal("hide")}},computed:{puedeImprimir:function(){return this.ordenes.length>0},esMaster:function(){return"master"===this.$usuario.nombreUsuario},etiquetaSeleccionados:function(){return this.ordenesIds.length>1?"órdenes seleccionadas":" orden seleccionada"}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"etiquetas",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.generarEtiquetas.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),e._m(0)]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[e._m(1),e._v(" "),t("div",{staticClass:"col-md-3 col-md-offset-6 form-group"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.ordenesIds.length>0,expression:"ordenesIds.length > 0"}],staticClass:"badge pull-right"},[e._v("\n                  "+e._s(e.ordenesIds.length)+" "+e._s(e.etiquetaSeleccionados)+"\n                ")])])]),e._v(" "),!e.cargandoOrdenes&&e.ordenes.length>0?t("div",{staticStyle:{height:"270px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-2 text-center"},[e._v("Sucursal")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar todo",disabled:0===e.ordenesIds.length},on:{click:e.eliminarOrdenes}},[t("i",{staticClass:"fas fa-trash"})])])])]),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.sucursal.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.fecha_orden)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoOrden")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarOrden(a)}}},[t("i",{staticClass:"fas fa-trash"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoOrdenes,cantidad:e.ordenes.length,tipo:"órdenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.ordenes.length>0,expression:"ordenes.length > 0"}],staticClass:"pull-left"},[e.conteo>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.conteo,"page-range":6,"container-class":"pagination","click-handler":e.cargarOrdenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.pagina,callback:function(t){e.pagina=t},expression:"pagina"}}):e._e()],1),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:!e.puedeImprimir}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Imprimir\n            ")]),e._v(" "),e.esMaster?t("div",{staticClass:"col-md-2 checkbox",staticStyle:{margin:"0"}},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.margen,expression:"margen"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.margen)?e._i(e.margen,null)>-1:e.margen},on:{change:function(t){var a=e.margen,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.margen=a.concat([null])):i>-1&&(e.margen=a.slice(0,i).concat(a.slice(i+1)))}else e.margen=o}}}),e._v("Margen\n              ")])]):e._e(),e._v(" "),t("div",{staticClass:"col-md-3 pull-right"},[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"muestras",placeholder:"Todas las muestras",options:e.muestras,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.muestraId,callback:function(t){e.muestraId=t},expression:"muestraId"}})],1),e._v(" "),e.esMaster?t("div",{staticClass:"col-sm-1"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.margenIzquierdo,expression:"margenIzquierdo"}],staticClass:"form-control input-sm",attrs:{type:"number",placeholder:"Margen izquierdo"},domProps:{value:e.margenIzquierdo},on:{input:function(t){t.target.composing||(e.margenIzquierdo=t.target.value)}}})]):e._e()])])])])]),e._v(" "),t("buscar-ordenes-modal",{attrs:{id:"buscarOrdenesEtiquetas","ordenes-ids":e.ordenesIds,top:11,"mostrar-filtros":["cliente","categoria","fechaDesde","fechaHasta","muestra","medico","paciente","numeroOrden","numeroOrdenFinal"]},on:{"ordenes-seleccionadas":e.ordenesSeleccionadas}})],1)}),[function(){var e=this,t=e._self._c;return t("h4",{staticClass:"modal-title"},[e._v("Imprimir etiquetas\n              "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 form-group"},[e("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarOrdenesEtiquetas"}},[e("i",{staticClass:"fas fa-search fa-fw"}),this._v(" Buscar órdenes\n                ")])])}],!1,null,null,null).exports},6226:(e,t,a)=>{"use strict";a.d(t,{Z:()=>N});var r=a(5683),o=a(8064),i=a(6714),s=a(7226),n=a(7410),c=a(755),l=a(2703),d=a(7974),u=a(4590),m=a(9676);const p={props:{printServer:{type:Object,default:function(){return{}}}},data:function(){return{procesando:{impresoras:!1,servidorLocal:!1},impresorasEtiquetas:[],impresorasRecibos:[]}},mounted:function(){var e=this;$("#modalConfigs").on("show.bs.modal",(function(t){"modalConfigs"===t.target.id&&e.cargarDatos()})),$("#modalConfigs").on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},cargarDatos:function(){this.cargarImpresoras()},limpiar:function(){this.impresorasRecibos=[],this.impresorasEtiquetas=[]},cargarImpresoras:function(){var e=this;this.impresorasRecibos=[],this.impresorasEtiquetas=[],this.printServer.urlApiLocal?(this.procesando.impresoras=!0,axios.get("".concat(this.printServer.urlApiLocal,"/api/impresoras")).then((function(t){var a=t.data;e.impresorasEtiquetas=e.exlcuirImpresorasFaxXpsOtras(a,!0),e.impresorasRecibos=e.exlcuirImpresorasFaxXpsOtras(a),e.printServer.etiquetas.impresora=e.buscarImpresora("etiquetas",e.printServer.etiquetas.impresora),e.printServer.recibo.impresora=e.buscarImpresora("recibo",e.printServer.recibo.impresora)})).catch((function(t){var a=e.procesarErroresOrionPrintServer(t);console.error("No se pudo cargar impresoras de este terminal",a)})).then((function(){e.procesando.impresoras=!1}))):console.error("No existe url de Orión Print Server")},validarServidorLocal:function(){var e=this;this.procesando.servidorLocal=!0,axios.get("".concat(this.printServer.urlApiLocal,"/api/estado")).then((function(){e.printServer.encendido=!0,e.cargarImpresoras()})).catch((function(){e.printServer.encendido=!1,e.impresorasRecibos=[],e.impresorasEtiquetas=[]})).then((function(){return e.procesando.servidorLocal=!1}))},exlcuirImpresorasFaxXpsOtras:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=["anydesk","fax","onenote","xps","pdf"];return t||(a.push("zebra"),a.push("zdesigner")),e.filter((function(e){return void 0===a.find((function(t){return e.toLowerCase().includes(t.toLowerCase())}))}))},procesarErroresOrionPrintServer:function(e){return void 0===e.response?"El servidor de impresión se encuentra apagado":this.procesarErrorResponse(e)},cambioImprimirRecibo:function(e){localStorage.setItem("imprimir-recibo",e.target.checked.toString())},cambioImprimirEtiquetas:function(e){localStorage.setItem("imprimir-etiquetas",e.target.checked.toString())},impresoraEtiquetasSeleccionada:function(e){localStorage.setItem("impresora-etiquetas",e.target.value)},impresoraReciboSeleccionada:function(e){localStorage.setItem("impresora-recibo",e.target.value)},cambioIncluirMuestrasPendiente:function(e){localStorage.setItem("incluir-muestras-pendientes",e.target.checked.toString())},buscarImpresora:function(e,t){if(!t)return"";var a=null;return"recibo"===e&&(a=this.impresorasRecibos.find((function(e){return e===t}))),"etiquetas"===e&&(a=this.impresorasEtiquetas.find((function(e){return e===t}))),a||(this.mostrarAdvertencia("Impresora de ".concat(e," <strong>").concat(t,"</strong> no encontrada")),"")}}};var f=a(1900);const v=(0,f.Z)(p,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalConfigs",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{attrs:{method:"POST"}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),e.printServer.encendido?[t("legend",[e._v("Etiquetas")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",[e._v("\n                      Impresora\n                      "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.impresoras,expression:"procesando.impresoras"}],staticClass:"fas fa-spinner fa-spin fa-fw"})]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.printServer.etiquetas.impresora,expression:"printServer.etiquetas.impresora"}],staticClass:"form-control input-sm",attrs:{name:"impresora",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.printServer.etiquetas,"impresora",t.target.multiple?a:a[0])},e.impresoraEtiquetasSeleccionada]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.impresorasEtiquetas,(function(a){return t("option",{domProps:{value:a}},[e._v("\n                        "+e._s(a)+"\n                      ")])}))],2)])])]),e._v(" "),t("div",{staticClass:"col-sm-7 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.printServer.etiquetas.imprimir,expression:"printServer.etiquetas.imprimir"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.printServer.etiquetas.imprimir)?e._i(e.printServer.etiquetas.imprimir,null)>-1:e.printServer.etiquetas.imprimir},on:{click:e.cambioImprimirEtiquetas,change:function(t){var a=e.printServer.etiquetas.imprimir,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.printServer.etiquetas,"imprimir",a.concat([null])):i>-1&&e.$set(e.printServer.etiquetas,"imprimir",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.printServer.etiquetas,"imprimir",o)}}}),e._v("\n                        Imprimir directo\n                      ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.printServer.etiquetas.incluirMuestrasPendientes,expression:"printServer.etiquetas.incluirMuestrasPendientes"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.printServer.etiquetas.incluirMuestrasPendientes)?e._i(e.printServer.etiquetas.incluirMuestrasPendientes,null)>-1:e.printServer.etiquetas.incluirMuestrasPendientes},on:{click:e.cambioIncluirMuestrasPendiente,change:function(t){var a=e.printServer.etiquetas.incluirMuestrasPendientes,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.printServer.etiquetas,"incluirMuestrasPendientes",a.concat([null])):i>-1&&e.$set(e.printServer.etiquetas,"incluirMuestrasPendientes",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.printServer.etiquetas,"incluirMuestrasPendientes",o)}}}),e._v("\n                        Incluir etiquetas de muestras pendientes\n                      ")])])])])])]),e._v(" "),t("legend",[e._v("Recibo")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",[e._v("\n                      Impresora\n                      "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.impresoras,expression:"procesando.impresoras"}],staticClass:"fas fa-spinner fa-spin fa-fw"})]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.printServer.recibo.impresora,expression:"printServer.recibo.impresora"}],staticClass:"form-control input-sm",attrs:{name:"impresora",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.printServer.recibo,"impresora",t.target.multiple?a:a[0])},e.impresoraReciboSeleccionada]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.impresorasRecibos,(function(a){return t("option",{domProps:{value:a}},[e._v("\n                        "+e._s(a)+"\n                      ")])}))],2)])])]),e._v(" "),t("div",{staticClass:"col-sm-7 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.printServer.recibo.imprimir,expression:"printServer.recibo.imprimir"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.printServer.recibo.imprimir)?e._i(e.printServer.recibo.imprimir,null)>-1:e.printServer.recibo.imprimir},on:{click:e.cambioImprimirRecibo,change:function(t){var a=e.printServer.recibo.imprimir,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.printServer.recibo,"imprimir",a.concat([null])):i>-1&&e.$set(e.printServer.recibo,"imprimir",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.printServer.recibo,"imprimir",o)}}}),e._v("\n                        Imprimir directo\n                      ")])])])])])])]:e._e()],2),e._v(" "),e._m(1)])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Configuraciones")])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Cerrar")])])}],!1,null,null,null).exports;var h=a(1769);const g={props:{id:{type:String,default:"modalBuscarFlebotomista"}},data:function(){return{cargando:!1,cadenaBusqueda:"",flebotomistas:[],paginaActual:1,totalRegistros:0,totalPaginas:0}},mounted:function(){var e=this;$("#"+this.id).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.flebotomistas=[],e.cadenaBusqueda="",e.ocultarAlertas())})),$("#"+this.id).on("show.bs.modal",(function(t){if(t.target.id===e.id){if(e.flebotomistas=[],e.cadenaBusqueda="",e.ocultarAlertas(),!(t.relatedTarget instanceof HTMLElement)&&t.relatedTarget){var a=t.relatedTarget;e.cadenaBusqueda=a.cadenaBusqueda}e.buscarFlebotomistas()}})),$("#"+this.id).on("shown.bs.modal",(function(){return $("#cadenaBusqueda").focus()}))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},buscarFlebotomistas:function(){this.paginaActual=1,this.cargarFlebotomistas()},cargarFlebotomistas:function(){var e=this;this.cargando=!0;var t={page:this.paginaActual,cadenaBusqueda:this.cadenaBusqueda};axios.get("/api/flebotomistas",{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.flebotomistas=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar flebotomistas",a)})).then((function(){return e.cargando=!1}))},limpiarCadenaBusqueda:function(){this.cadenaBusqueda="",this.ocultarAlertas(),this.paginaActual=1,this.cargarFlebotomistas()},ocultarAlertas:function(){this.$refs.alerta.ocultarAlertas()},seleccionarFlebotomista:function(e){this.$emit("flebotomista-seleccionado",e),$("#"+this.id).modal("hide")}}};const b=(0,f.Z)(g,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],ref:"cadenaBusqueda",staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarFlebotomistas.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.buscarFlebotomistas}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),!e.cargando&&e.flebotomistas.length>0?t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(1),e._v(" "),t("tbody",[e._l(e.flebotomistas,(function(a){return[t("tr",{staticClass:"puntero",on:{dblclick:function(t){return e.seleccionarFlebotomista(a)}}},[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre_completo))]),e._v(" "),t("td",{staticClass:"col-sm-1 text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Seleccionar flebotomistas"},on:{click:function(t){return e.seleccionarFlebotomista(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.flebotomistas.length,tipo:"flebotomistas"}}),e._v(" "),!e.cargando&&e.flebotomistas.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-range":4,"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarFlebotomistas,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1)])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Flebotomistas")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-6 text-left"},[e._v("Nombre")]),e._v(" "),t("th")])])}],!1,null,null,null).exports;const x={props:{flebotomista:{type:Object,required:!0,default:function(){return{}}}}};const C={components:{FlebotomistaFormulario:(0,f.Z)(x,(function(){var e=this,t=e._self._c;return t("div",[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"flebotomista_nombres"}},[e._v("Nombres")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.flebotomista.nombres,expression:"flebotomista.nombres"}],staticClass:"form-control input-sm",attrs:{id:"flebotomista_nombres",type:"text",name:"flebotomista_nombres",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.flebotomista.nombres},on:{input:function(t){t.target.composing||e.$set(e.flebotomista,"nombres",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"flebotomista_apellidos"}},[e._v("Apellidos")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.flebotomista.apellidos,expression:"flebotomista.apellidos"}],staticClass:"form-control input-sm",attrs:{id:"flebotomista_apellidos",type:"text",name:"flebotomista_apellidos",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.flebotomista.apellidos},on:{input:function(t){t.target.composing||e.$set(e.flebotomista,"apellidos",t.target.value)}}})])])])])}),[],!1,null,null,null).exports},data:function(){return{guardando:!1,flebotomista:{nombres:"",apellidos:""}}},mounted:function(){var e=this;$("#modalGestionarFlebotomista").on("hide.bs.modal",(function(t){"modalGestionarFlebotomista"===t.target.id&&e.limpiarVariables()})),$("#modalGestionarFlebotomista").on("show.bs.modal",(function(t){"modalGestionarFlebotomista"===t.target.id&&e.limpiarVariables()})),$("#modalGestionarFlebotomista").on("shown.bs.modal",(function(){return $("#flebotomista_nombres").focus()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},guardar:function(){var e=this;this.guardando=!0,this.alternarBotonesSubmit(),axios.post("/api/flebotomistas",this.flebotomista).then((function(t){var a=t.data.data;$("#modalGestionarFlebotomista").modal("toggle"),e.$emit("flebotomista-creado",a)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar flebotomista",a)})).then((function(){e.guardando=!1,e.alternarBotonesSubmit()}))},limpiarVariables:function(){this.flebotomista.nombres="",this.flebotomista.apellidos=""}}};const y=(0,f.Z)(C,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalGestionarFlebotomista",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",staticStyle:{float:"left","padding-right":"10px"}},[e._v("Crear Flebotomista")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm pull-right",staticStyle:{"margin-left":"10px"},attrs:{type:"submit"}},[e.guardando?[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n              Procesando...\n            ")]:[t("i",{staticClass:"fas fa-save fa-fw"}),e._v("\n              Guardar\n            ")]],2),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm pull-right",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("flebotomista-formulario",{attrs:{flebotomista:e.flebotomista},on:{"update:flebotomista":function(t){e.flebotomista=t}}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[e.guardando?[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n              Procesando...\n            ")]:[t("i",{staticClass:"fas fa-save fa-fw"}),e._v("\n              Guardar\n            ")]],2)])])])])])}),[],!1,null,null,null).exports;var E=a(2979),A=a(1758);const w={props:{id:{type:String,default:"modalVerMedico"},top:{type:Number,default:0},medicoId:{type:Number|String,default:""}},data:function(){return{medico:{},especialidad:{nombre:""}}},mounted:function(){var e=this;$("#".concat(this.id)).on("show.bs.modal",(function(t){t.target.id===e.id&&(e.limpiar(),e.cargarMedico())})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&e.limpiar()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},limpiar:function(){this.medico={},this.especialidad.nombre=""},cargarMedico:function(){var e=this;axios.get("/api/medicos/".concat(this.medicoId),{params:{incluir:"especialidad"}}).then((function(t){var a=t.data.data;e.medico=a,a.especialidad&&(e.especialidad.nombre=a.especialidad.nombre)})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar el médico"),e.mostrarErrores(a)}))}},computed:{estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""}}};const P=(0,f.Z)(w,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Nombre")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.medico.nombre_completo)+"\n            ")])]),e._v(" "),e.especialidad.nombre?t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Especialidad")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.especialidad.nombre)+"\n            ")])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[e.medico.correo?t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Correo electrónico")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.medico.correo)+"\n            ")])]):e._e(),e._v(" "),e.medico.numero_identificacion?t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Número de identificación")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.medico.numero_identificacion)+"\n            ")])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[e.medico.referencia_auxiliar?t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Referencia auxiliar ")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.medico.referencia_auxiliar)+"\n            ")])]):e._e(),e._v(" "),e.medico.referencia?t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Datos adicionales")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.medico.referencia)+"\n            ")])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[e.medico.calle_principal?t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label"},[e._v("Dirección")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.medico.calle_principal)+"\n            ")])]):e._e(),e._v(" "),e.medico.numero_direccion?t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Numeración")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.medico.numero_direccion)+"\n            ")])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[e.medico.telefono_celular?t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Teléfono celular")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.medico.telefono_celular)+"\n            ")])]):e._e(),e._v(" "),e.medico.telefono_oficina?t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Teléfono convencional")]),e._v(" "),t("div",[e._v("\n              "+e._s(e.medico.telefono_oficina)+"\n            ")])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[e.medico.pedidos?t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Puede solicitar pedido")])]):e._e(),e._v(" "),e.medico.portal_ordenes_todos?t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Puede ver todas las órdenes")])]):e._e()])],1),e._v(" "),e._m(1)])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Médico")])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Cerrar")])])}],!1,null,null,null).exports;function k(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const S={components:{UbicacionGeograficaEc:o.Z,VerAuditoriasModal:r.Z,BuscarMedicoModal:i.Z,GestionarMedicoModal:s.Z,ImprimirModal:n.Z,HoraModal:c.Z,MuestrasModal:l.Z,BuscarPacienteModal:m.Z,ConfigsModal:v,AbonosFormularioModal:h.Z,GestionarFlebotomistaModal:y,BuscarFlebotomistaModal:b,GestionarPacienteModal:E.Z,VerCoberturaMspModal:A.Z,VerMedicoModal:P},props:["id","datos"],data:function(){return{indiceExamen:null,config:{medicoObligatorio:!1,mostrarAdvertenciaAbonoIncompleto:!1},primerClickEpi:!1,errorEnTarifas:!1,facturas:{sistema:{},configs:{requeridos:{},acciones:{},mostrar:{}}},errorEnOrden:!1,procesando:{cargarFlebotomista:!1,cargarMedico:!1},cargandoPerfiles:!1,cargandoDiagnosticoEpi:!1,cargandoSubempresas:!1,cargandoPaciente:!1,cargandoExamenes:!1,cargandoEliminarExamen:[],cadenaBusqueda:"",cadenaBusquedaExamenes:"",cadenaBusquedaDetalles:"",respuesta:"",permisos:{},cotizacion:null,pedido:null,formasPago:u.xe,datosJM:{orden:null},subdominio:"",porcentajeRecargo:0,porcentaje_descuento:0,abono:{id:null,forma_pago:"",valor:0,extras:null,referencia:"",numero_forma_pago:"",cuenta_bancaria_id:""},cambio_precio:!0,empresaPorDefectoId:"",etiquetasDatosPaciente:0,mostrarPdfRecibo:!0,mostrarPdfEtiquetas:!0,descuentoPorPorcentaje:!1,recargoPorPorcentaje:!1,horaProcesamiento:"",horaEntrega:"",tieneFacturaEmitida:!1,usuarioIngresa:"",sistemaIngresa:"",registro:{id:this.id,soloGuardar:!1,fecha_orden:"",hora_orden:"",estado:"",numero_orden:"",numero_orden_externa:"",paciente_id:"",paciente_identificacion:"",paciente_historia_clinica:"",paciente_numero_historia_clinica:"",paciente_tipo:"",paciente_type:"",paciente_nombre:"",paciente_taxonomia:"",paciente_fecha_nacimiento:"",paciente_sexo:"",paciente_correo:"",paciente_direccion:"",paciente_telefono:"",paciente_numero_poliza:"",paciente_dueno_responsable:"",medico_id:"",sucursal_id:"",empresa_id:"",subempresa_id:"",numero_pedido:"",fecha_pedido:"",numero_sala:"",cama:"",extras:null,embarazada:!1,tipo_paciente_id:"",tipo_atencion_id:"",plan_salud_id:"",laboratorio_id:"",sala_id:"",sistema_externo_id:null,diagnostico_id:"",diagnostico_concepto:"",fecha_entrega_estimada:"",observaciones_orden:"",observaciones_hoja_trabajo:"",valor_descuento:0,valor_recargo:0,valor_domicilio:0,valor_total:"",abonos:[],temperatura:"",grupo:"",fecha_ultima_menstruacion:"",semanas_gestacion:"",fecha_procesamiento:"",variablesEpidemiologicas:{}},variablesEpidemiologicas:{id:"",cumple_definicion_caso:"",epi_1:"",fecha_inicio_sintomas:"",diagnostico_id:"",diagnostico_concepto:"",comorbilidad:"",antecedente_viaje:"",antecedente_infeccion:"",fecha_viaje:"",lugar_viaje:"",unidad_salud_notifica:"",unidad_salud_parroquia_id:"",semana_epidemiologica:""},detallesOrdenes:[],tiposPacientes:[],tiposAtenciones:[],planesSalud:[],laboratorios:[],salas:[],flebotomistas:[],empresas:[],subempresas:[],examenes:[],grupoId:"",grupos:[],detallesGrupos:[],key:0,ubicacionesNivel2:[],examenesSinTarifa:[],sexos:[{id:"A",nombre:"Ambos Sexos"},{id:"F",nombre:"Femenino"},{id:"M",nombre:"Masculino"}],datosGeneradorOrdenes:{cotizaciones:[],pedidos:[]},registroAuxiliar:{subempresaNombre:"",empresaNombre:"",provinciaId:"",cantonId:"",flebotomistaId:"",flebotomistaNombre:"",medicoNombre:"",medicoReferenciaAuxiliar:""},antecedentesInfeccion:[{id:"NUCLEO_FAMILIAR",nombre:"Núcleo familiar"},{id:"TRABAJO",nombre:"Trabajo"},{id:"TRANSPORTE",nombre:"Transporte"},{id:"OTRO_PAIS",nombre:"Otro país"},{id:"VIAJE_DOMESTICO",nombre:"Viaje doméstico"},{id:"CENTROS_CUIDADO",nombre:"Centros de cuidado"},{id:"CENTROS_PRIVACION_LIBERTAD",nombre:"Centros de privacion de libertad"},{id:"REUNION_MASIVA",nombre:"Reunión masiva"},{id:"REUNION_SOCIAL_CERRADA",nombre:"Reunión social cerrada"},{id:"INDETERMINADO",nombre:"Indeterminado"}],urlPrevio:"",mensajeGuardar:"",resumenPaciente:{saldo:null,cantidadOrdenes:null,keySaldo:0,keyCantidadOrdenes:0},printServer:{urlApiLocal:"",encendido:!1,etiquetas:{imprimir:!1,incluirMuestrasPendientes:!1,impresora:"",alto:"",ancho:""},recibo:{imprimir:!1,impresora:"",copias:1,alto:"",ancho:""}}}},mounted:function(){var e=this;$("body").tooltip({selector:'[data-toggle="tooltip"]',container:"body",trigger:"hover"}),$("body").popover({selector:'[data-toggle="popover"]',container:"body",trigger:"hover"}),$("#jmFacturaOrden").on("hide.bs.modal",(function(t){"jmFacturaOrden"===t.target.id&&e.cargarDesdeJM(e.datosJM.orden)})),this.cargarDatos(),this.atajosTeclado()},methods:{limpiarFormulario:function(){this.cadenaBusqueda="",this.cadenaBusquedaExamenes="",this.cadenaBusquedaDetalles="",this.soloGuardar=!1,this.abono.id=null,this.abono.forma_pago="EF",this.abono.extras=null,this.abono.valor="",this.abono.cuenta_bancaria_id="",this.abono.referencia="",this.abono.numero_forma_pago="",this.horaProcesamiento="",this.examenesSinTarifa=[],this.registro.id=this.id,this.registro.fecha_orden=moment().format("YYYY-MM-DD"),this.registro.estado="G",this.registro.numero_orden="",this.registro.numero_orden_externa="",this.registro.paciente_id="",this.registro.paciente_type="",this.registro.paciente_identificacion="",this.registro.paciente_nombre="",this.registro.paciente_taxonomia="",this.registro.paciente_fecha_nacimiento="",this.registro.paciente_sexo="",this.registro.paciente_correo="",this.registro.paciente_direccion="",this.registro.paciente_telefono="",this.registro.paciente_numero_poliza="",this.registro.paciente_dueno_responsable="",this.registro.paciente_historia_clinica="",this.registro.paciente_numero_historia_clinica="",this.registro.medico_id="",this.registro.sucursal_id="",this.registro.empresa_id="",this.registro.subempresa_id="",this.registro.numero_pedido="",this.registro.fecha_pedido="",this.registro.numero_sala="",this.registro.cama="",this.registro.extras=null,this.registro.embarazada=!1,this.registro.tipo_paciente_id="",this.registro.tipo_atencion_id="",this.registro.plan_salud_id="",this.registro.laboratorio_id="",this.registro.sala_id="",this.registro.diagnostico_id="",this.registro.sistema_externo_id=null,this.registro.diagnostico_concepto="",this.registro.fecha_entrega_estimada="",this.registro.fecha_procesamiento="",this.registro.observaciones_orden="",this.registro.observaciones_hoja_trabajo="",this.registro.valor_descuento=0,this.registro.valor_recargo=0,this.registro.valor_domicilio=0,this.porcentajeRecargo=0,this.porcentaje_descuento=0,this.registro.valor_total="",this.registro.temperatura="",this.registro.grupo="",this.registro.fecha_ultima_menstruacion="",this.registro.semanas_gestacion="",this.registro.subempresa={},this.registro.medico={},this.registro.diagnostico={},this.registro.detallesOrdenes=[],this.registro.abonos=[],this.registro.variablesEpidemiologicas={},this.detallesOrdenes=[],this.subempresas=[],this.examenes=[],this.cotizacion=null,this.pedido=null,this.datosJM.orden=null,this.registroAuxiliar.empresaNombre="",this.registroAuxiliar.subempresaNombre="",this.registroAuxiliar.provinciaId="",this.registroAuxiliar.cantonId="",this.registroAuxiliar.medicoNombre="",this.registroAuxiliar.medicoReferenciaAuxiliar="",this.variablesEpidemiologicas.id="",this.variablesEpidemiologicas.cumple_definicion_caso="",this.variablesEpidemiologicas.fecha_inicio_sintomas="",this.variablesEpidemiologicas.epi_1="",this.variablesEpidemiologicas.diagnostico_id="",this.variablesEpidemiologicas.diagnostico_concepto="",this.variablesEpidemiologicas.comorbilidad="",this.variablesEpidemiologicas.antecedente_viaje="",this.variablesEpidemiologicas.antecedente_infeccion="",this.variablesEpidemiologicas.fecha_viaje="",this.variablesEpidemiologicas.lugar_viaje="",this.variablesEpidemiologicas.unidad_salud_notifica="",this.variablesEpidemiologicas.unidad_salud_parroquia_id="",this.variablesEpidemiologicas.semana_epidemiologica="",this.resumenPaciente.saldo=null,this.resumenPaciente.cantidadOrdenes=null},limpiarCadenaBusqueda:function(){this.cadenaBusqueda=""},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e,t){this.$refs.alerta.mostrarAlerta("info",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},ocultarMensajes:function(){this.$refs.alerta.ocultarAlertas()},alternarCamposFormulario:function(){"disabled"===$("fieldset").attr("disabled")?$("fieldset").removeAttr("disabled"):$("fieldset").attr("disabled","disabled")},cargarDatos:function(){var e=this;this.examenesSinTarifa=[],this.cotizacion=this.datos.cotizacion,this.pedido=this.datos.pedido,this.permisos=this.datos.permisos,this.subdominio=this.datos.subdominio,this.errorEnOrden=!1,this.cargarDatosImpresion(this.datos.configuraciones),this.$refs.cargando.alternar(),"0"!==this.id?axios.get("/api/ordenes/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.editarOrden(a),e.alternarCamposFormulario()})).catch((function(t){e.errorEnOrden=!0;var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar orden",a)})).then((function(){return e.$refs.cargando.alternar()})):axios.get("/api/ordenes/create").then((function(t){var a=t.data.data;e.crearOrden(a),e.cargarCotizacion(),e.cargarPedido(),e.cotizacion||e.pedido||setTimeout((function(){return $("#identificacion").focus()}),1e3),e.alternarCamposFormulario()})).catch((function(t){e.errorEnOrden=!0;var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar orden",a)})).then((function(){return e.$refs.cargando.alternar()}))},cargarDatosImpresion:function(e){this.printServer.urlApiLocal="https://".concat(e.dominioServidorLocal,":").concat(e.puertoServidorLocal),this.etiquetasDatosPaciente=e.etiquetasDatosPaciente,this.mostrarPdfRecibo=e.mostrarPdfRecibo,this.mostrarPdfEtiquetas=e.mostrarPdfEtiquetas,this.printServer.etiquetas.alto="0"===this.id?e.alto:"",this.printServer.etiquetas.ancho="0"===this.id?e.ancho:"",this.config.medicoObligatorio=e.medicoObligatorio,this.config.mostrarAdvertenciaAbonoIncompleto=e.mostrarAdvertenciaAbonoIncompleto,this.verificarOrionPrintServer(e)},verificarOrionPrintServer:function(e){var t=this;axios.get("".concat(this.printServer.urlApiLocal,"/api/estado")).then((function(){var a=localStorage.getItem("impresora-etiquetas"),r=localStorage.getItem("imprimir-etiquetas");t.printServer.encendido=!0,"0"===t.id&&(t.printServer.etiquetas.imprimir=null!==r?"true"===r:e.imprimirEtiquetaDirecto),t.printServer.etiquetas.impresora=a||e.nombreImpresora,t.printServer.etiquetas.incluirMuestrasPendientes="true"===localStorage.getItem("incluir-muestras-pendientes"),t.printServer.recibo.imprimir="true"===localStorage.getItem("imprimir-recibo"),t.printServer.recibo.impresora=localStorage.getItem("impresora-recibo");var o=localStorage.getItem("copias-recibo");o>0&&(t.printServer.recibo.copias=o)})).catch((function(){return console.info("Print Server no encontrado")}))},cargarUbicaciones:function(){var e=this;axios.get("/api/ubicaciones",{params:{padreCodigo:this.$cliente.pais}}).then((function(t){var a=t.data.data;e.ubicacionesNivel2=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar ubicaciones",a)}))},cargarCatalogos:function(e){this.empresas=e.empresas,this.tiposAtenciones=e.tiposAtenciones,this.salas=e.salas,this.grupos=e.grupos,this.flebotomistas=e.flebotomistas},cargarCotizacion:function(){this.cotizacion&&(this.registro.observaciones_orden=this.cotizacion.comentario,this.registro.empresa_id=this.cotizacion.subempresa.empresa_id,this.registro.valor_descuento=this.cotizacion.valor_descuento,this.registro.valor_recargo=this.cotizacion.valor_recargo,this.registro.valor_domicilio=this.cotizacion.valor_domicilio,this.registro.subempresa_id=this.cotizacion.subempresa.id,this.registro.plan_salud_id=this.cotizacion.plan_salud_id?this.cotizacion.plan_salud_id:"",this.cargarSubempresa(this.registro.empresa_id,!0),this.cotizacion.medico&&(this.registro.medico_id=this.cotizacion.medico.id,this.registroAuxiliar.medicoNombre=this.cotizacion.medico.nombre_completo,this.registroAuxiliar.medicoReferenciaAuxiliar=this.cotizacion.medico.referencia_auxiliar),this.registro.paciente_id=this.cotizacion.paciente_id,this.registro.paciente_type=this.cotizacion.paciente_type,this.registro.paciente_identificacion=this.cotizacion.paciente.numero_identificacion,this.registro.paciente_historia_clinica=this.cotizacion.paciente.historia_clinica,this.registro.paciente_numero_historia_clinica=this.cotizacion.paciente.numero_historia_clinica,this.registro.paciente_sexo=this.cotizacion.paciente.sexo,(this.cotizacion.es_humano||this.cotizacion.es_animal)&&(this.registro.paciente_tipo=this.cotizacion.paciente.tipo_identificacion,this.registro.paciente_nombre=this.cotizacion.paciente.nombre_paciente,this.registro.paciente_fecha_nacimiento=this.cotizacion.paciente.fecha_nacimiento,this.registro.paciente_correo=this.cotizacion.paciente.correo),this.cotizacion.es_animal&&(this.registro.paciente_taxonomia="".concat(this.cotizacion.paciente.raza.padre.nombre," - ").concat(this.cotizacion.paciente.raza.nombre)),this.cotizacion.es_objeto&&(this.registro.paciente_nombre=this.cotizacion.paciente.descripcion,this.registro.paciente_correo=this.cotizacion.paciente.correo_responsable))},cargarPedido:function(){if(this.pedido){if(this.registro.sistema_externo_id=this.pedido.sistema_externo_id,this.registro.observaciones_orden=this.pedido.comentario,this.registro.cama=this.pedido.cama,this.registro.extras=this.pedido.extras,this.pedido.categoria&&(this.registro.empresa_id=this.pedido.categoria.empresa_id,this.registro.subempresa_id=this.pedido.categoria.id),this.pedido.variable_epidemiologica){var e=this.pedido.variable_epidemiologica;this.variablesEpidemiologicas.cumple_definicion_caso=e.cumple_definicion_caso,this.variablesEpidemiologicas.fecha_inicio_sintomas=e.fecha_inicio_sintomas,this.variablesEpidemiologicas.epi_1=e.epi_1,this.variablesEpidemiologicas.diagnostico_id=e.diagnostico_id,this.variablesEpidemiologicas.diagnostico_concepto=e.diagnostico?e.diagnostico.concepto:"",this.variablesEpidemiologicas.comorbilidad=e.comorbilidad,this.variablesEpidemiologicas.antecedente_viaje=e.antecedente_viaje?e.antecedente_viaje:"",this.variablesEpidemiologicas.antecedente_infeccion=e.antecedente_infeccion,this.variablesEpidemiologicas.fecha_viaje=e.fecha_viaje,this.variablesEpidemiologicas.lugar_viaje=e.lugar_viaje,this.variablesEpidemiologicas.unidad_salud_notifica=e.unidad_salud_notifica,this.variablesEpidemiologicas.unidad_salud_parroquia_id=e.unidad_salud_parroquia_id?e.unidad_salud_parroquia_id:"",this.variablesEpidemiologicas.semana_epidemiologica=e.semana_epidemiologica;var t=e.unidad_salud_parroquia;t&&(this.registroAuxiliar.provinciaId=t.padre?t.padre.padre_id:"",this.registroAuxiliar.cantonId=t.padre_id,this.key++)}this.registro.diagnostico_id=this.pedido.diagnostico?this.pedido.diagnostico_id:"",this.registro.diagnostico_concepto=this.pedido.diagnostico?this.pedido.diagnostico.concepto:"",this.cargarSubempresa(this.registro.empresa_id,!0),this.pedido.medico&&(this.registro.medico_id=this.pedido.medico.id,this.registroAuxiliar.medicoNombre=this.pedido.medico.nombre_completo,this.registroAuxiliar.medicoReferenciaAuxiliar=this.pedido.medico.referencia_auxiliar),this.registro.paciente_id=this.pedido.paciente_id,this.registro.paciente_type=this.pedido.paciente_type,this.registro.paciente_identificacion=this.pedido.paciente.numero_identificacion,this.registro.paciente_historia_clinica=this.pedido.paciente.historia_clinica,this.registro.paciente_numero_historia_clinica=this.pedido.paciente.numero_historia_clinica,this.registro.paciente_sexo=this.pedido.paciente.sexo,(this.pedido.es_humano||this.pedido.es_animal)&&(this.registro.paciente_tipo=this.pedido.paciente.tipo_identificacion,this.registro.paciente_nombre=this.pedido.paciente.nombre_paciente,this.registro.paciente_fecha_nacimiento=this.pedido.paciente.fecha_nacimiento,this.registro.paciente_correo=this.pedido.paciente.correo),this.pedido.es_animal&&(this.registro.paciente_taxonomia="".concat(this.pedido.paciente.raza.padre.nombre," - ").concat(this.pedido.paciente.raza.nombre)),this.pedido.es_objeto&&(this.registro.paciente_nombre=this.pedido.paciente.descripcion,this.registro.paciente_correo=this.pedido.paciente.correo_responsable),this.registro.tipo_atencion_id=this.pedido.tipo_atencion_id,this.registro.sala_id=this.pedido.servicio_id,this.registro.embarazada=this.pedido.embarazada,this.registro.semanas_gestacion=this.pedido.semanas_gestacion,this.registro.fecha_ultima_menstruacion=this.pedido.fecha_ultima_menstruacion,this.registro.temperatura=this.pedido.temperatura,this.registro.numero_orden_externa=this.pedido.numero_pedido_externo?this.pedido.numero_pedido_externo:this.pedido.id}},cargarDesdeJM:function(e){e&&(this.registro.empresa_id=e.cliente_id,this.registro.valor_descuento=e.valor_descuento,this.registro.subempresa_id=e.subempresa_id,this.cargarSubempresa(this.registro.empresa_id,!0),this.registro.paciente_identificacion=e.paciente.numero_identificacion,this.registro.paciente_nombre=e.paciente.nombre_paciente,this.registro.paciente_fecha_nacimiento=e.paciente.fecha_nacimiento,this.registro.paciente_sexo=e.paciente.sexo,this.registro.paciente_correo=e.paciente.correo,this.registro.paciente_type=e.paciente_type,this.registro.paciente_id=e.paciente_id,e.abonos&&e.abonos.length>0&&(this.abono.valor=e.abonos[0].valor,this.abono.forma_pago=e.abonos[0].forma_pago),this.mostrarInformativo('Orden cargada exitosamente con factura "'+e.numeroFactura+'".'))},crearOrden:function(e){this.cargarCatalogos(e),this.facturas.sistema=e.facturas.sistema,this.facturas.configs.requeridos=e.facturas.configs.requeridos?e.facturas.configs.requeridos:{},this.facturas.configs.acciones=e.facturas.configs.acciones?e.facturas.configs.acciones:{},this.facturas.configs.mostrar=e.facturas.configs.mostrar?e.facturas.configs.mostrar:{},this.errorEnTarifas=!1,this.registro.estado=u.Gm.GENERADO,this.registro.fecha_orden=moment().format("YYYY-MM-DD"),this.porcentaje_descuento=0,this.abono.id=null,this.abono.valor="",this.abono.cuenta_bancaria_id="",this.abono.referencia="",this.abono.numero_forma_pago="",this.abono.extras=null,this.abono.forma_pago="EF",e.empresaPorDefecto?(this.ocultarMensajes(),this.empresaPorDefectoId=e.empresaPorDefecto.id,this.registro.empresa_id=e.empresaPorDefecto.id,this.cambio_precio=e.empresaPorDefecto.cambio_precio,this.permisos.generarDescuentoPorEmpresa=this.permisos.generarDescuento&&e.empresaPorDefecto.permitir_descuento,null!=e.subempresas&&(this.subempresas=e.subempresas,e.subempresa&&(this.registro.subempresa_id=e.subempresa.id,e.subempresa.porcentaje_descuento&&(this.porcentaje_descuento=e.subempresa.porcentaje_descuento,this.descuentoPorPorcentaje=!0),e.subempresa.tarifa_venta_id?this.cotizacion||(this.examenes=e.examenesTarifa,_.isEmpty(this.examenes)&&(this.errorEnTarifas=!0,this.mostrarAdvertencia("No se han definido tarifas para los exámenes de la categoría seleccionada"))):(this.errorEnTarifas=!0,this.mostrarAdvertencia("No se ha definido tarifa para la categoría seleccionada"))))):(this.examenes=[],this.detallesOrdenes=[],this.subempresas=[],this.registro.subempresa_id="",this.mostrarAdvertencia("El cliente por defecto de la sucursal está inactivo"))},editarOrden:function(e){this.cargarCatalogos(e),this.porcentaje_descuento=0,this.subempresas=e.subempresas,this.examenes=e.examenesTarifa,this.urlPrevio=this.datos.urlPrevio;var t=e.orden;if(this.registro.id=t.id,this.registro.soloGuardar=!1,this.registro.fecha_orden=this.fechaALocal(t.fecha_orden,"YYYY-MM-DD"),this.registro.hora_orden=this.fechaALocal(t.fecha_orden,"HH:mm:ss"),this.registro.estado=t.estado,this.registro.numero_orden=t.numero_orden,this.registro.numero_orden_externa=t.numero_orden_externa,this.registro.sistema_externo_id=t.sistema_externo_id,this.registro.sucursal_id=t.sucursal_id,this.registro.paciente_id=t.paciente_id,this.registro.paciente_type=t.paciente_type,this.registro.paciente_identificacion=t.paciente.numero_identificacion,this.registro.paciente_historia_clinica=t.paciente.historia_clinica,this.registro.paciente_numero_historia_clinica=t.paciente.numero_historia_clinica,this.registro.paciente_sexo=t.paciente.sexo,this.registro.paciente_correo=t.paciente.correo,this.registro.paciente_direccion=t.paciente.direccion,this.registro.paciente_telefono=t.paciente.telefono_celular,t.es_humano&&(this.registro.paciente_tipo=t.paciente.tipo_identificacion,this.registro.paciente_nombre=t.paciente.nombre_paciente,this.registro.paciente_direccion=t.paciente.direccion_completa,this.registro.paciente_numero_poliza=t.paciente.numero_poliza,this.registro.paciente_fecha_nacimiento=t.paciente.fecha_nacimiento),t.es_animal){var a=t.paciente;this.registro.paciente_nombre=a.nombre_paciente,this.registro.paciente_taxonomia="".concat(a.raza.padre.nombre," - ").concat(a.raza.nombre),this.registro.paciente_fecha_nacimiento=a.fecha_nacimiento,this.cargarDuenoResponsable(t.paciente_type,a)}if(t.es_objeto&&(this.registro.paciente_nombre=t.paciente.descripcion,this.cargarDuenoResponsable(t.paciente_type,t.paciente)),this.registro.medico_id=t.medico_id?t.medico_id:"",this.registroAuxiliar.medicoNombre=t.medico?t.medico.nombre_completo:"",this.registroAuxiliar.medicoReferenciaAuxiliar=t.medico?t.medico.referencia_auxiliar:"",this.registro.empresa_id=t.subempresa.empresa_id,this.registro.subempresa_id=t.subempresa_id,this.registro.numero_pedido=t.numero_pedido,this.registro.fecha_pedido=t.fecha_pedido,this.registro.numero_sala=t.numero_sala,this.registro.cama=t.cama,this.registro.embarazada=t.embarazada,this.registro.tipo_paciente_id=t.tipo_paciente_id?t.tipo_paciente_id:"",this.registro.tipo_atencion_id=t.tipo_atencion_id?t.tipo_atencion_id:"",this.registro.plan_salud_id=t.plan_salud_id?t.plan_salud_id:"",this.registro.laboratorio_id=t.laboratorio_id?t.laboratorio_id:"",this.registro.sala_id=t.sala_id?t.sala_id:"",this.registro.diagnostico_id=t.diagnostico_id?t.diagnostico_id:"",this.registro.diagnostico_concepto=t.diagnostico?t.diagnostico.concepto:"",this.registro.observaciones_orden=t.observaciones_orden,this.registro.observaciones_hoja_trabajo=t.observaciones_hoja_trabajo,this.registro.valor_descuento=t.valor_descuento,this.registro.valor_recargo=t.valor_recargo,this.registro.valor_domicilio=t.valor_domicilio,this.registro.valor_total=t.valor_total,this.registro.temperatura=t.temperatura,this.registro.grupo=t.grupo,this.registro.semanas_gestacion=t.semanas_gestacion,this.registro.fecha_ultima_menstruacion=t.fecha_ultima_menstruacion,this.registro.extras=t.extras,this.registro.abonos=t.abonos,this.registro.fecha_procesamiento=this.fechaALocal(t.fecha_procesamiento,"YYYY-MM-DD"),this.horaProcesamiento=this.fechaALocal(t.fecha_procesamiento,"HH:mm:ss"),this.registro.fecha_entrega_estimada=this.fechaALocal(t.fecha_entrega_estimada,"YYYY-MM-DD"),this.horaEntrega=this.fechaALocal(t.fecha_entrega_estimada,"HH:mm:ss"),this.usuarioIngresa=t.usuario_ingresa?t.usuario_ingresa.nombre_usuario:"",this.sistemaIngresa=t.sistema_externo?t.sistema_externo.nombre:"",t.variable_epidemiologica){var r=t.variable_epidemiologica;this.variablesEpidemiologicas.id=r.id,this.variablesEpidemiologicas.cumple_definicion_caso=r.cumple_definicion_caso,this.variablesEpidemiologicas.fecha_inicio_sintomas=r.fecha_inicio_sintomas,this.variablesEpidemiologicas.epi_1=r.epi_1,this.variablesEpidemiologicas.diagnostico_id=r.diagnostico_id,this.variablesEpidemiologicas.diagnostico_concepto=r.diagnostico?r.diagnostico.concepto:"",this.variablesEpidemiologicas.comorbilidad=r.comorbilidad,this.variablesEpidemiologicas.antecedente_viaje=r.antecedente_viaje?r.antecedente_viaje:"",this.variablesEpidemiologicas.fecha_viaje=r.fecha_viaje,this.variablesEpidemiologicas.lugar_viaje=r.lugar_viaje,this.variablesEpidemiologicas.unidad_salud_notifica=r.unidad_salud_notifica,this.variablesEpidemiologicas.unidad_salud_parroquia_id=r.unidad_salud_parroquia_id?r.unidad_salud_parroquia_id:"",this.variablesEpidemiologicas.semana_epidemiologica=r.semana_epidemiologica,this.variablesEpidemiologicas.antecedente_infeccion=this.definirAntecedenteInfeccionEpi(r.antecedente_infeccion);var o=r.unidad_salud_parroquia;o&&(this.registroAuxiliar.provinciaId=o.padre?o.padre.padre_id:"",this.registroAuxiliar.cantonId=o.padre_id,this.key++)}"N"===t.subempresa.empresa.estado&&(this.errorEnOrden=!0,this.empresas.push(t.subempresa.empresa),this.mostrarErrores("El cliente está inactivo")),this.cambio_precio=t.subempresa.empresa.cambio_precio,this.permisos.generarDescuentoPorEmpresa=this.permisos.generarDescuento&&t.subempresa.empresa.permitir_descuento,this.registroAuxiliar.empresaNombre=t.subempresa.empresa.nombre,this.registroAuxiliar.subempresaNombre=t.subempresa.nombre,this.detallesOrdenes=t.detalles_ordenes.map((function(e){var t=e.detalle_orden_muestras.map((function(e){return{id:e.id,muestra_id:e.muestra_id,flebotomista_id:e.flebotomista_id,estado:e.estado,estado_original:e.estado,fecha:e.fecha,externa:e.externa,pendiente:e.estado===u.zm.PENDIENTE,rechazada:e.rechazada}}));return{id:e.id,examen_id:e.examen.id,examen:e.examen,muestras:t,valor:Number(e.valor).toFixed(2),fecha_entrega_estimada:e.fecha_entrega_estimada,tiempo_proceso:e.examen.tiempo_proceso,estado:e.estado,descargado_sistema_externo:e.descargado_sistema_externo,enviado_sistema_externo:e.enviado_sistema_externo,muestraPendiente:t.reduce((function(e,t){var a=t.estado;return e||a===u.zm.PENDIENTE}),!1)}})),this.calcularPorcentajeDescuento(),this.calcularPorcentajeRecargo(),this.sumarAbonos(),this.buscarSaldoPendientePaciente(this.registro.paciente_id,this.registro.paciente_type),this.subempresa="",this.diagnostico="",this.detalles_ordenes=[],this.tieneFacturaEmitida=!_.isEmpty(t.facturas),"N"!==this.registro.estado&&this.tieneFacturaEmitida&&this.mostrarInformativo("La orden tiene una factura emitida"),this.puedeModificar||this.alternarCamposFormulario()},definirAntecedenteInfeccionEpi:function(e){return e?(this.antecedentesInfeccion.find((function(t){return t.id===e}))||(this.antecedentesInfeccion.push({id:"OTRO",nombre:"(Obsoleto) ".concat(e)}),e="OTRO"),e):""},cargarExamenes:function(e,t){var a=this;if(this.examenes=[],this.errorEnTarifas=!1,""!==this.registro.subempresa_id&&this.registro.subempresa_id&&0!==this.subempresas.length){var r=this.subempresas.find((function(e){return e.id===a.registro.subempresa_id}));if(r){if(!r.tarifa_venta_id)return this.errorEnTarifas=!0,this.mostrarAdvertencia("No se ha definido tarifa para la categoría seleccionada"),void(e||(this.cargandoExamenes=!1));e&&(this.cargandoExamenes=!0),this.cotizacion||this.datosJM.orden||(r.porcentaje_descuento?(this.porcentaje_descuento=r.porcentaje_descuento,this.descuentoPorPorcentaje=!0):(this.porcentaje_descuento=0,this.registro.valor_descuento=0)),axios.get("/api/examenes-tarifas?tarifaId="+r.tarifa_venta_id).then((function(e){var r=e.data.data;if(a.examenes=r,a.cotizacion&&(a.detallesOrdenes=a.cotizacion.detalles_cotizaciones.map((function(e){var t=e.examen.examen_muestras.map((function(e){return{id:null,muestra_id:e.muestra_id,flebotomista_id:null,estado:u.zm.RECIBIDA,estado_original:"",fecha:"",externa:!1,pendiente:!1}}));return{examen_id:e.examen.id,examen:e.examen,muestras:t,valor:Number(e.valor).toFixed(2),fecha_entrega_estimada:"",tiempo_proceso:e.examen.tiempo_proceso,estado:u.RI.GENERADO,descuento:Number(e.descuento).toFixed(2),muestraPendiente:t.reduce((function(e,t){var a=t.estado;return e||a===u.zm.PENDIENTE}),!1)}})),a.calcularValorTotal(),a.calcularPorcentajeDescuento(),a.calcularPorcentajeRecargo()),a.pedido&&(a.detallesOrdenes=a.pedido.detalles_pedidos.map((function(e){var t=e.examen.examen_muestras.map((function(e){return{id:null,muestra_id:e.muestra_id,flebotomista_id:null,estado:u.zm.RECIBIDA,estado_original:"",fecha:"",externa:!1,pendiente:!1}}));return{examen_id:e.examen.id,examen:e.examen,muestras:t,valor:null,fecha_entrega_estimada:"",tiempo_proceso:e.examen.tiempo_proceso,estado:u.RI.GENERADO,descuento:null,muestraPendiente:t.reduce((function(e,t){var a=t.estado;return e||a===u.zm.PENDIENTE}),!1),extras:e.extras}})),a.calcularValorTotal(),a.calcularPorcentajeDescuento()),a.datosJM.orden&&(a.detallesOrdenes=a.datosJM.orden.detallesOrdenes.map((function(e){var t=a.examenes.find((function(t){return t.examen.id===e.examen_id})),r=t.examen.examen_muestras.map((function(e){return{id:null,muestra_id:e.muestra_id,flebotomista_id:null,estado:u.zm.RECIBIDA,estado_original:"",fecha:"",externa:!1,pendiente:!1}}));return{examen_id:e.examen_id,examen:_.omit(t.examen,"examen_muestras"),muestras:r,valor:Number(e.valor).toFixed(2),fecha_entrega_estimada:"",tiempo_proceso:e.tiempo_proceso,estado:u.RI.GENERADO,descuento:Number(e.descuento).toFixed(2),muestraPendiente:r.reduce((function(e,t){var a=t.estado;return e||a===u.zm.PENDIENTE}),!1)}})),a.calcularPorcentajeDescuento()),_.isEmpty(a.examenes))a.errorEnTarifas=!0,a.mostrarAdvertencia("No se han definido tarifas para ninguno de los exámenes de la categoría seleccionada.");else{a.examenesSinTarifa=[];var o=a.detallesOrdenes.filter((function(e){var t=a.examenes.find((function(t){return t.examen_id===e.examen_id}));return!t||a.datosJM.orden||a.cotizacion||(e.valor=Number(t.valor).toFixed(2)),void 0===t&&a.examenesSinTarifa.push(e),void 0!==t}));_.isEmpty(a.examenesSinTarifa)?(a.detallesOrdenes=o,a.porcentajeDescuentoKeyup(null)):(a.errorEnTarifas=!0,a.mostrarErrores("Existen exámenes que no tienen tarifa definida para la categoría seleccionada."))}t&&(a.cargandoExamenes=!1)})).catch((function(e){var r=a.procesarErrorResponse(e);a.mostrarErrores("Error al cargar exámenes",r),t&&(a.cargandoExamenes=!1)}))}else e||(this.cargandoExamenes=!1)}},cargarEmpresaPorDefecto:function(){null!=this.obtenerEmpresa(this.empresaPorDefectoId)?(this.registro.empresa_id=this.empresaPorDefectoId,this.cargarSubempresa(this.registro.empresa_id,!1)):(this.$refs.cargando.alternar(),this.mostrarAdvertencia('El cliente por defecto de la sucursal está "Inactivo".'))},sumarAbonos:function(){var e=this.registro.abonos.reduce((function(e,t){return 1*e+1*t.valor}),0);e=this.redondear2Decimales(e),this.abono.valor=e.toFixed(2)},seleccionarFormaPagoAbono:function(e){var t=this;this.abono.extras=null,this.abono.cuenta_bancaria_id="",this.abono.referencia="",this.abono.numero_forma_pago="",this.abono.forma_pago=e,[u.xe.CHEQUE].includes(e)&&(this.abono.extras={entidad_financiera_id:""}),[u.xe.TARJETA_CREDITO,u.xe.TARJETA_DEBITO].includes(e)&&(this.abono.extras={entidad_financiera_id:"",numero_lote:""}),this.$nextTick((function(){return t.esAbonoValido()}))},cargarExamenesPorGrupo:function(e){var t=this;this.grupoId="",this.ocultarMensajes(),""!==e&&(this.registro.subempresa_id?0!==this.examenes.length?(this.cargandoPerfiles=!0,axios.get("/api/detalles-grupos?cadenaBusqueda="+e).then((function(a){var r=a.data.data;if(t.detallesGrupos=r,0!==t.detallesGrupos.length){var o,i=0,s=k(t.examenes);try{var n=function(){var e,a=o.value,r=k(t.detallesGrupos);try{for(r.s();!(e=r.n()).done;){var s=e.value;if(a.examen_id===s.examen_id)0===t.detallesOrdenes.reduce((function(e,t){return t.examen_id===a.examen_id?e+=1:e}),0)&&(t.agregarExamen(a),i++)}}catch(e){r.e(e)}finally{r.f()}};for(s.s();!(o=s.n()).done;)n()}catch(e){s.e(e)}finally{s.f()}if(i>0){var c=t.grupos.find((function(t){return t.id===e}));t.mostrarExito("Examenes de perfil <strong>".concat(c.nombre,"</strong> agregados"))}}else t.mostrarAdvertencia("No existen exámenes definidos para este grupo")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar perfil",a)})).then((function(){return t.cargandoPerfiles=!1}))):this.mostrarAdvertencia('No existen "exámenes" disponibles'):this.mostrarAdvertencia('No se ha seleccionado una "Categoría"'))},autocompletarExamen:function(){1===this.examenesFiltrados.length&&this.agregarExamen(this.examenesFiltrados[0])},agregarExamen:function(e){var t=this;if(!this.tieneFacturaEmitida&&this.puedeModificar)if(this.ocultarMensajes(),""!==this.registro.fecha_orden){var a=this.datos.configuraciones.crearOrdenMuestraPendiente?u.zm.PENDIENTE:u.zm.RECIBIDA,r=e.examen.examen_muestras.map((function(e){return{id:null,muestra_id:e.muestra_id,flebotomista_id:t.registroAuxiliar.flebotomistaId?t.registroAuxiliar.flebotomistaId:null,estado:a,estado_original:"",fecha:"",externa:!1,pendiente:t.datos.configuraciones.crearOrdenMuestraPendiente}})),o={examen_id:e.examen.id,examen:_.omit(e.examen,"examen_muestras"),muestras:r,valor:Number(e.valor).toFixed(2),tiempo_proceso:e.examen.tiempo_proceso,fecha_entrega_estimada:"",estado:u.RI.GENERADO,descuento:0,muestraPendiente:r.reduce((function(e,t){var a=t.estado;return e||a===u.zm.PENDIENTE}),!1)};this.buscarSiExisteExamen(e.examen.id)||(this.$refs.buscarExamen.focus(),this.$refs.buscarExamen.select(),this.indiceExamen=null,this.detallesOrdenes.push(o),setTimeout((function(){var e=document.getElementById("examenes-seleccioandos");e.scrollTop=e.scrollHeight}),100),this.descuentoPorPorcentaje?this.porcentajeDescuentoKeyup(null):this.valorDescuentoKeyup(null),this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null))}else this.mostrarErrores('Campo "Fecha orden" no puede ser vacío')},buscarSiExisteExamen:function(e){return void 0!==this.detallesOrdenes.find((function(t){return t.examen_id===e}))},eliminarDetalle:function(e){var t=this;this.tieneFacturaEmitida||(e.estado===u.RI.GENERADO?e.id?(this.cargandoEliminarExamen=e.id,axios.get("/api/detalles-ordenes/".concat(e.id,"/remision")).then((function(a){var r=a.data.data;r?t.mostrarAdvertencia('Examen "'+e.examen.nombre+'" no se puede borrar porque esta vinculado en remisión No. "'+r+'".'):t.eliminarDetalleDelArreglo(e),t.cargandoEliminarExamen=""})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar examen!",a)})).then((function(){return t.cargandoEliminarExamen=""}))):this.eliminarDetalleDelArreglo(e):this.mostrarErrores('Detalle con estado "'+e.estado+'" por lo cual no puede ser eliminado'))},eliminarDetalleDelArreglo:function(e){var t=this.detallesOrdenes.indexOf(e);this.detallesOrdenes.splice(t,1),_.isEmpty(this.detallesOrdenes)?(this.porcentaje_descuento=0,this.registro.valor_descuento=0,this.porcentajeRecargo=0,this.registro.valor_recargo=0,this.registro.valor_domicilio=0,this.abono.forma_pago="EF",this.abono.valor="",this.abono.cuenta_bancaria_id="",this.abono.referencia="",this.abono.numero_forma_pago="",this.abono.extras=null):(this.descuentoPorPorcentaje?this.porcentajeDescuentoKeyup(null):this.valorDescuentoKeyup(null),this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null))},eliminarDetalles:function(){if(!this.tieneFacturaEmitida){var e,t=[],a=k(this.detallesOrdenes);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.estado!==u.RI.GENERADO&&t.push(r)}}catch(e){a.e(e)}finally{a.f()}this.detallesOrdenes=t,"0"===this.id&&(this.abono.valor="",this.abono.cuenta_bancaria_id="",this.abono.referencia="",this.abono.numero_forma_pago="",this.abono.extras=null),this.abono.forma_pago="EF",this.porcentaje_descuento=0,this.registro.valor_descuento=0,this.porcentajeRecargo=0,this.registro.valor_recargo=0,this.registro.valor_domicilio=0,this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null)}},postGuardar:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.respuesta=e,this.mostrarPdfRecibo&&this.imprimirReciboAlGuardar(this.respuesta.id),this.mostrarPdfEtiquetas&&this.imprimirEtiquetas(this.respuesta.id),this.printServer.encendido&&(this.printServer.etiquetas.imprimir||this.printServer.recibo.imprimir)&&t?this.imprimirDirectoEtiquetasYRecibo(this.respuesta.id):this.terminarGuardar()},terminarGuardar:function(e,t,a){this.registro.soloGuardar?this.redireccionar(a):($('.nav a[href="#datosGenerales"]').tab("show"),this.limpiarFormulario(),this.cargarEmpresaPorDefecto(),this.procesarMensaje(e,t),this.respuesta="",this.alternarBotonesSubmit(),this.$refs.cargando.alternar())},procesarMensaje:function(e,t){_.isEmpty(e)||(t?this.mostrarAdvertencia(e):this.mostrarExito(e))},armarAbonoInicial:function(e){return this.abono.valor>0&&e.abonos.push(this.abono),e},imprimirEtiquetas:function(e){var t,a=+this.etiquetasDatosPaciente+0,r=k(this.detallesOrdenes);try{for(r.s();!(t=r.n()).done;){a+=+t.value.examen.numero_etiquetas}}catch(e){r.e(e)}finally{r.f()}if(a>0){var o={incluirMuestrasPendientes:this.printServer.etiquetas.incluirMuestrasPendientes?"1":null};o=this.obtenerParametrosUrl(o),window.open("/ordenes/".concat(e,"/pdf-etiquetas").concat(o),"_blank","height=400,width=700,left=20,top=20,,scrollbars=yes,menubar=no")}else this.mostrarAdvertencia("No existen etiquetas configuradas")},imprimirDirectoEtiquetasYRecibo:function(e){var t=this,a=this.obtenerPromesasDeDescarga(e);Promise.allSettled(a).then((function(e){var a=t.obtenerPromesasDeImpresion(e);t.enviarAOrionPrintServer(a)})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al generar archivo",a)}))},obtenerPromesasDeDescarga:function(e){var t=[],a=this.printServer.recibo.impresora;if(this.printServer.etiquetas.imprimir&&this.printServer.etiquetas.alto){var r={incluirMuestrasPendientes:this.printServer.etiquetas.incluirMuestrasPendientes?"1":null};r=this.obtenerParametrosUrl(r),t.push(axios.get("/ordenes/".concat(e,"/pdf-etiquetas").concat(r),{responseType:"blob"}))}return this.printServer.recibo.imprimir&&a&&"PDF"!==a&&t.push(axios.get("/ordenes/".concat(e,"/recibo"),{responseType:"blob"})),this.printServer.recibo.imprimir&&!a&&this.mostrarErrores("No se definió impresora para recibo"),t},obtenerPromesasDeImpresion:function(e){var t=this,a=[];return e.forEach((function(e){var r=e.status,o=e.value,i=e.reason;if("fulfilled"===r&&o.config.url.includes("etiqueta")&&a.push(t.obtenerAxiosEtiquetas(o)),"fulfilled"===r&&o.config.url.includes("recibo")&&a.push(t.obtenerAxiosRecibo(o)),"rejected"===r){var s=t.procesarErrorResponse(i);t.mostrarAdvertencia("¡Error al enviar a imprimir!",s)}})),a},enviarAOrionPrintServer:function(e){var t=this;Promise.allSettled(e).then((function(e){var a=!1,r="";e.forEach((function(e){var o=e.status,i=e.value,s=e.reason;if("fulfilled"===o&&(i.config.url.includes("?etiqueta")&&(r="etiquetas=1",t.mostrarExito(["Etiquetas enviadas a imprimir","Impresora: "+t.printServer.etiquetas.impresora])),i.config.url.includes("?recibo")&&(r=r?"".concat(r,"&recibo=1"):"recibo=1",t.mostrarExito(["Recibo enviado a imprimir","Impresora: "+t.printServer.recibo.impresora]))),"rejected"===o){a=!0;var n=t.procesarErroresOrionPrintServer(s);s.config.url.includes("?etiqueta")&&(n.unshift("Error al imprimir etiquetas"),t.mostrarErrores(n)),s.config.url.includes("?recibo")&&(n.unshift("Error al imprimir recibo"),t.mostrarErrores(n))}})),t.terminarGuardar([],a,r)})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al enviar a imprimir!",a)}))},obtenerAxiosEtiquetas:function(e){var t={nombreImpresora:this.printServer.etiquetas.impresora,alto:this.printServer.etiquetas.alto,ancho:this.printServer.etiquetas.ancho},a=this.obtenerNombreArchivo(e),r=new FormData;return r.append("archivo",e.data,a),r.append("parametros",JSON.stringify(t)),axios.post("".concat(this.printServer.urlApiLocal,"/api/imprimir/etiquetas?etiqueta"),r)},obtenerAxiosRecibo:function(e){var t=this.obtenerNombreArchivo(e),a={nombreImpresora:this.printServer.recibo.impresora,tamanoPapel:"A5",alto:210,ancho:148,copias:this.printServer.recibo.copias},r=new FormData;return r.append("archivo",e.data,t),r.append("parametros",JSON.stringify(a)),axios.post("".concat(this.printServer.urlApiLocal,"/api/imprimir/etiquetas?recibo"),r)},procesarErroresOrionPrintServer:function(e){return void 0===e.response?["El servidor de impresión se encuentra apagado"]:this.procesarErrorResponse(e)},obtenerNombreArchivo:function(e){var t=e.headers["content-disposition"];return t.substring(t.indexOf('"')+1,t.lastIndexOf('"'))},guardar:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.saldoCalculado<0)this.mostrarErrores("El valor del saldo no puede ser negativo");else if(this.errorEnTarifas)this.mostrarErrores("Existen exámenes sin tarifas.");else if(""!==this.registro.diagnostico_id||""===this.registro.diagnostico_concepto){if("OTRO"===this.variablesEpidemiologicas.antecedente_infeccion)return $('.nav a[href="#variablesEpidemilogicas"]').tab("show"),void this.mostrarErrores('El campo "Lugar o antecedente probable de infección" está obsoleto.');if(this.registro.fecha_procesamiento&&!this.horaProcesamiento)return $('.nav a[href="#datosAdicionales"]').tab("show"),void this.mostrarErrores('Debe definir una hora para el campo "Fecha procesamiento"');if(this.registro.fecha_entrega_estimada&&!this.horaEntrega)return $('.nav a[href="#datosAdicionales"]').tab("show"),void this.mostrarErrores('Debe definir una hora para el campo "Fecha entrega"');if(!this.config.medicoObligatorio||this.registro.medico_id){if(this.config.mostrarAdvertenciaAbonoIncompleto&&!t&&$("#modalGuardar").modal("hide"),this.config.mostrarAdvertenciaAbonoIncompleto&&t){if(this.abono.valor<=0||!this.abono.valor)return this.mensajeGuardar="¿Está seguro de guardar sin abono?",void $("#modalGuardar").modal("show");if(this.saldoCalculado>0)return this.mensajeGuardar="¿Está seguro de guardar con abono incompleto?",void $("#modalGuardar").modal("show")}if(this.esAbonoValido()){this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var a=_.cloneDeep(this.registro);if(a=this.asignarRelacionesDeOrden(a),a=this.completarValores(a),a=this.definirHoraDeProcesamiento(a),a=this.definirHoraDeEntrega(a),"0"===this.id)a=this.definirHoraDeOrden(a),a=this.armarAbonoInicial(a),this.cotizacion&&(a.cotizacionId=this.cotizacion.id),this.pedido&&(a.pedido_id=this.pedido.id),a.estado=u.Gm.GENERADO,axios.post("/api/ordenes",a).then((function(t){var a=t.data.data;e.registro.soloGuardar||e.mostrarExito("Orden <strong>".concat(a.numero_orden,"</strong> creada")),e.postGuardar(a,!0)})).catch((function(t){$('.nav a[href="#datosGenerales"]').tab("show"),e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al crear orden",a)}));else{var r=this.fechaAUTC(a.fecha_orden+" "+a.hora_orden);a.fecha_orden=moment(r).format("YYYY-MM-DD"),a.hora_orden=moment(r).format("HH:mm:ss"),axios.patch("/api/ordenes/"+this.id,a).then((function(t){var a=t.data.data;return e.postGuardar(a)})).catch((function(t){$('.nav a[href="#datosGenerales"]').tab("show"),e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al actualizar orden",a)}))}}}else this.mostrarErrores("Médico no definido")}else this.mostrarErrores("No ha seleccionado un diagnóstico válido.")},completarValores:function(e){return e.valor_descuento||(e.valor_descuento=0),e.valor_recargo||(e.valor_recargo=0),e.valor_domicilio||(e.valor_domicilio=0),e.valor_total=Number(e.valor_total),e.detallesOrdenes.forEach((function(e){e.valor=Number(e.valor),delete e.estado})),e},definirHoraDeOrden:function(e){var t=moment().format("YYYY-MM-DD");return!this.registro.hora_orden&&e.fecha_orden>t&&(this.registro.hora_orden="00:00:00"),e},definirHoraDeEntrega:function(e){return e.fecha_entrega_estimada&&(e.fecha_entrega_estimada=e.fecha_entrega_estimada+" "+this.horaEntrega,e.fecha_entrega_estimada=this.fechaAUTC(e.fecha_entrega_estimada)),e},definirHoraDeProcesamiento:function(e){return e.fecha_procesamiento&&(e.fecha_procesamiento=e.fecha_procesamiento+" "+this.horaProcesamiento,e.fecha_procesamiento=this.fechaAUTC(e.fecha_procesamiento)),e},asignarRelacionesDeOrden:function(e){return e.detallesOrdenes=this.detallesOrdenes,e.variablesEpidemiologicas=this.variablesEpidemiologicas,e.variablesEpidemiologicas.epi_1=e.variablesEpidemiologicas.epi_1?e.variablesEpidemiologicas.epi_1:"",e.variablesEpidemiologicas.cumple_definicion_caso=e.variablesEpidemiologicas.cumple_definicion_caso?e.variablesEpidemiologicas.cumple_definicion_caso:"",e},abrirModalImprimir:function(e){var t={registro:this.registro,tipoDocumento:e,tamanoPapel:"a5"};$("#modalImprimir").modal({backdrop:"static"},t)},imprimirReciboAlGuardar:function(e){window.open("/ordenes/"+e+"/recibo","_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},redireccionar:function(e){var t="/ordenes";this.urlPrevio&&this.urlPrevio.includes("/ordenes")&&(t=this.urlPrevio),e&&(t=t.includes("?")?"".concat(t,"&").concat(e):"".concat(t,"?").concat(e)),window.location.href=t},limpiarPaciente:function(){this.registro.paciente_id="",this.registro.paciente_type="",this.registro.paciente_nombre="",this.registro.paciente_taxonomia="",this.registro.paciente_fecha_nacimiento="",this.registro.paciente_sexo="",this.registro.paciente_correo="",this.registro.paciente_direccion="",this.registro.paciente_telefono="",this.registro.paciente_numero_poliza="",this.registro.paciente_dueno_responsable=""},abrirAutocompletarPaciente:function(){var e=this;this.ocultarMensajes(),this.limpiarPaciente(),this.registro.paciente_identificacion?(this.registro.paciente_identificacion=this.registro.paciente_identificacion.trim(),this.cargandoPaciente=!0,axios.get("/api/pacientes?identificacion=".concat(this.registro.paciente_identificacion)).then((function(t){var a=t.data.data;1!==a.length?e.abrirModalCrearPaciente():e.pacienteSeleccionado(a[0])})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar paciente",a)})).then((function(){return e.cargandoPaciente=!1}))):this.abrirModalCrearPaciente()},autocompletarPaciente:function(){var e=this;this.ocultarMensajes(),this.limpiarPaciente(),this.registro.paciente_identificacion&&(this.registro.paciente_identificacion=this.registro.paciente_identificacion.trim(),this.cargandoPaciente=!0,axios.get("/api/pacientes?identificacion=".concat(this.registro.paciente_identificacion)).then((function(t){var a=t.data.data;if(0!==a.length)return a.length>1?(e.cadenaBusqueda=e.registro.paciente_identificacion,void e.abrirPaciente(!0)):void e.pacienteSeleccionado(a[0]);e.abrirModalCrearPaciente()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar paciente",a)})).then((function(){return e.cargandoPaciente=!1})))},buscarCotizaciones:function(e,t){var a=this;if("0"===this.id&&e){var r={pacienteId:e,pacienteType:t};axios.get("/api/cotizaciones",{params:r}).then((function(e){var t=e.data;_.isEmpty(t)||(a.datosGeneradorOrdenes.cotizaciones=t,$("#generadorOrdenes").modal("show"))})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores("Error al buscar cotizaciones",t)}))}},buscarPedidos:function(e,t){var a=this;if("0"===this.id&&e){var r={pacienteId:e,pacienteType:t,estado:"G"};axios.get("/api/pedidos",{params:r}).then((function(e){var t=e.data;_.isEmpty(t)||(a.datosGeneradorOrdenes.pedidos=t,$("#generadorOrdenes").modal("show"))})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores("Error al buscar pedidos",t)}))}},abrirPacienteSinBusqueda:function(){this.abrirPaciente(!1)},abrirPaciente:function(e){var t=e?this.cadenaBusqueda:"",a=(0,d.MD)({"cadena-busqueda":t});$("#buscarPaciente").modal({},a)},pacienteSeleccionado:function(e){e&&(this.registro.paciente_id="",this.registro.paciente_nombre="",this.registro.paciente_taxonomia="",this.registro.paciente_id=e.id,this.registro.paciente_type=e.tipo,this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_fecha_nacimiento=e.fecha_nacimiento,this.registro.paciente_sexo=e.sexo,this.registro.paciente_correo=e.correo,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_historia_clinica=e.historia_clinica,this.registro.paciente_numero_historia_clinica=e.numero_historia_clinica,this.registro.paciente_direccion=[e.direccion,e.direccion_numeracion].filter(Boolean).join(" "),this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza=e.numero_poliza,"M"===this.registro.paciente_sexo&&(this.registro.embarazada=!1,this.registro.semanas_gestacion="",this.registro.fecha_ultima_menstruacion=""),this.buscarSaldoPendientePaciente(e.id,e.tipo),this.cargarDuenoResponsableVista(e.tipo,e),this.cargarRaza(e.tipo,e.id),this.cotizacion||this.pedido||(this.buscarCotizaciones(this.registro.paciente_id,this.registro.paciente_type),this.buscarPedidos(this.registro.paciente_id,this.registro.paciente_type)))},cargarRaza:function(e,t){var a=this;"App\\Models\\PacienteAnimal"===e&&axios.get("/api/pacientes/animales/".concat(t)).then((function(e){var t=e.data.data;a.registro.paciente_taxonomia="".concat(t.raza.padre.nombre," - ").concat(t.raza.nombre)})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores("¡Error al buscar raza!",t)}))},cargarDuenoResponsableVista:function(e,t){"App\\Models\\PacienteHumano"!==e&&(this.registro.paciente_dueno_responsable=[t.apellidos,t.nombres].filter(Boolean).join(" "))},cargarDuenoResponsable:function(e,t){this.registro.paciente_dueno_responsable="","App\\Models\\PacienteAnimal"===e&&(this.registro.paciente_dueno_responsable=[t.apellidos_dueno,t.nombres_dueno].filter(Boolean).join(" ")),"App\\Models\\SujetoObjeto"===e&&(this.registro.paciente_dueno_responsable=[t.apellidos_responsable,t.nombres_responsable].filter(Boolean).join(" "))},seleccionarPacienteHumano:function(e){this.paciente_type="humano",this.registro.paciente_id=e.id,this.registro.paciente_type="App\\Models\\PacienteHumano",this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_fecha_nacimiento=e.fecha_nacimiento,this.registro.paciente_sexo=e.sexo,this.registro.paciente_correo=e.correo,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_historia_clinica=e.historia_clinica,this.registro.paciente_numero_historia_clinica=e.numero_historia_clinica,this.registro.paciente_direccion=[e.direccion,e.direccion_numeracion].filter(Boolean).join(" "),this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza=e.numero_poliza,this.registro.paciente_dueno_responsable="","M"===this.registro.paciente_sexo&&(this.registro.embarazada=!1,this.registro.semanas_gestacion="",this.registro.fecha_ultima_menstruacion="")},seleccionarPacienteAnimal:function(e){this.registro.paciente_dueno_responsable="",this.paciente_type="animal",this.registro.paciente_id=e.id,this.registro.paciente_type="App\\Models\\PacienteAnimal",this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_taxonomia="".concat(e.raza.padre.nombre," - ").concat(e.raza.nombre),this.registro.paciente_fecha_nacimiento=e.fecha_nacimiento,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_historia_clinica=e.historia_clinica,this.registro.paciente_numero_historia_clinica=e.numero_historia_clinica,this.registro.paciente_sexo=e.sexo,this.registro.paciente_correo=e.correo,this.registro.paciente_direccion=e.direccion,this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza="",this.cargarDuenoResponsable(this.registro.paciente_type,e),"M"===this.registro.paciente_sexo&&(this.registro.embarazada=!1,this.registro.semanas_gestacion="",this.registro.fecha_ultima_menstruacion="")},seleccionarSujetoObjeto:function(e){this.registro.paciente_dueno_responsable="",this.paciente_type="objeto",this.registro.paciente_id=e.id,this.registro.paciente_type="App\\Models\\SujetoObjeto",this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_fecha_nacimiento=null,this.registro.paciente_sexo=e.sexo,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_correo=e.correo,this.registro.paciente_direccion=e.direccion,this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza="",this.cargarDuenoResponsable(this.registro.paciente_type,e),"M"===this.registro.paciente_sexo&&(this.registro.embarazada=!1,this.registro.semanas_gestacion="",this.registro.fecha_ultima_menstruacion="")},abrirModalCrearPaciente:function(){var e={pacienteType:"",esCrearPaciente:!0,numeroIdentificacion:this.registro.paciente_identificacion};$("#gestionarPacienteModal").modal({backdrop:"static"},e)},abrirModalEditarPaciente:function(){var e={pacienteType:this.obtenerPacienteType(this.registro.paciente_type),esCrearPaciente:!1,numeroIdentificacion:this.registro.paciente_identificacion,pacienteId:this.registro.paciente_id};$("#gestionarPacienteModal").modal({backdrop:"static"},e)},obtenerPacienteType:function(e){var t="";switch(e){case"App\\Models\\PacienteHumano":t="humano";break;case"App\\Models\\PacienteAnimal":t="animal";break;case"App\\Models\\SujetoObjeto":t="objeto"}return t},pacienteHumanoGuardado:function(e){var t=e.creado?"creado":"actualizado";this.mostrarExito("Paciente <strong>".concat(e.nombre_paciente,"</strong> ").concat(t," y seleccionado")),this.seleccionarPacienteHumano(e)},pacienteAnimalGuardado:function(e){var t=e.creado?"creado":"actualizado";this.mostrarExito("Paciente <strong>".concat(e.nombre_paciente,"</strong> ").concat(t," y seleccionado")),this.seleccionarPacienteAnimal(e)},sujetoObjetoGuardado:function(e){var t=e.creado?"creado":"actualizado";this.mostrarExito("Objeto <strong>".concat(e.descripcion,"</strong> ").concat(t," y seleccionado")),this.seleccionarSujetoObjeto(e)},autocompletarMedico:function(){var e=this;if(this.ocultarMensajes(),this.registro.medico_id="",this.registroAuxiliar.medicoReferenciaAuxiliar="",this.registroAuxiliar.medicoNombre){this.registroAuxiliar.medicoNombre=this.registroAuxiliar.medicoNombre.trim(),this.procesando.cargarMedico=!0;var t=this.registroAuxiliar.medicoNombre.split(" "),a={cadenaBusqueda:t&&!_.isEmpty(t)?t[0]:this.registroAuxiliar.medicoNombre};axios.get("/api/medicos",{params:a}).then((function(t){var a=t.data.data;if(0===a.length)return $("#modalGestionarMedico").modal({backdrop:"static"}),e.cadenaBusqueda=e.registroAuxiliar.medicoNombre,void(e.registroAuxiliar.medicoNombre="");if(a.length>1){var r={cadenaBusqueda:e.registroAuxiliar.medicoNombre};return $("#modalBuscarMedico").modal({},r),void(e.registroAuxiliar.medicoNombre="")}e.registro.medico_id=a[0].id,e.registroAuxiliar.medicoNombre=a[0].nombre_completo,e.registroAuxiliar.medicoReferenciaAuxiliar=a[0].referencia_auxiliar,e.mostrarExito("Médico seleccionado")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar médico",a)})).then((function(){return e.procesando.cargarMedico=!1}))}},abrirModalGestionarMedico:function(){this.procesando.cargarMedico||$("#modalGestionarMedico").modal({backdrop:"static"})},buscarMedico:function(){$("#modalBuscarMedico").modal("show")},eliminarMedico:function(){this.registro.medico_id="",this.registroAuxiliar.medicoNombre="",this.registroAuxiliar.medicoReferenciaAuxiliar="",this.mostrarExito("Selección de médico removida")},verMedico:function(){$("#modalVerMedico").modal({backdrop:"static"})},medicoCreado:function(e){this.registro.medico_id=e.id,this.registroAuxiliar.medicoNombre=e.nombre_completo,this.registroAuxiliar.medicoReferenciaAuxiliar=e.referencia_auxiliar,this.mostrarExito("Médico <strong>".concat(e.nombre_completo,"</strong> creado y seleccionado"))},medicoSeleccionado:function(e){this.registro.medico_id=e.id,this.registroAuxiliar.medicoNombre=e.nombre_completo,this.registroAuxiliar.medicoReferenciaAuxiliar=e.referencia_auxiliar,this.mostrarExito("Médico seleccionado")},cargarSubempresa:function(e,t){var a=this;if(this.errorEnTarifas=!1,t&&(this.cargandoExamenes=!0),!e)return this.examenes=[],this.detallesOrdenes=[],this.subempresas=[],this.registro.subempresa_id="",void(this.cargandoExamenes=!1);var r=this.obtenerEmpresa(e);this.cambio_precio=r.cambio_precio,this.permisos.generarDescuentoPorEmpresa=this.permisos.generarDescuento&&r.permitir_descuento,this.permisos.generarDescuentoPorEmpresa||(this.porcentaje_descuento=0,this.registro.valor_descuento=0),this.cargandoSubempresas=!0,this.registro.subempresa_id="",axios.get("/api/empresas/".concat(e,"/subempresas")).then((function(e){var t=e.data.data;if(a.subempresas=t,a.pedido&&a.pedido.categoria)a.registro.subempresa_id=a.pedido.categoria.id,a.cargarExamenes(!1,!0);else if(a.cotizacion&&a.cotizacion.subempresa)a.registro.subempresa_id=a.cotizacion.subempresa.id,a.cargarExamenes(!1,!0);else{var r=a.subempresas.find((function(e){return e.predeterminada}));r?(a.registro.subempresa_id=r.id,a.cargarExamenes(!1,!0)):(a.registro.subempresa_id="",a.mostrarAdvertencia("No se ha definido una categoría predeterminada para este cliente."))}})).catch((function(e){var r=a.procesarErrorResponse(e);a.mostrarErrores("¡Error al cargar categorías!",r),t&&(a.cargandoExamenes=!1)})).then((function(){return a.cargandoSubempresas=!1}))},obtenerEmpresa:function(e){return this.empresas.find((function(t){return t.id===e}))},autocompletarDiagnostico:function(){this.ocultarMensajes(),_.isEmpty(this.registro.diagnostico_concepto)?this.registro.diagnostico_id="":this.procesarBuscarDiagnostico("buscarDiagnostico",this.registro)},verificarDiagnostico:function(){""===this.registro.diagnostico_concepto&&(this.registro.diagnostico_id="")},buscarDiagnostico:function(){this.ocultarMensajes(),$("#buscarDiagnostico").modal("show")},autocompletarDiagnosticoEpidemiologico:function(){this.ocultarMensajes(),_.isEmpty(this.variablesEpidemiologicas.diagnostico_concepto)?this.variablesEpidemiologicas.diagnostico_id="":this.procesarBuscarDiagnostico("buscarDiagnosticoEpidemiologico",this.registro)},verificarDiagnosticoEpidemiologico:function(){""===this.variablesEpidemiologicas.diagnostico_concepto&&(this.variablesEpidemiologicas.diagnostico_id="")},buscarDiagnosticoEpidemiologico:function(){this.ocultarMensajes(),$("#buscarDiagnosticoEpidemiologico").modal("show")},procesarBuscarDiagnostico:function(e,t){var a=this;t.diagnostico_id="",t.diagnostico_concepto=t.diagnostico_concepto.trim(),axios.get("/api/diagnosticos?cadenaBusqueda=".concat(t.diagnostico_concepto)).then((function(r){var o=r.data;if(0===o.length||o.length>1){var i={cadenaBusqueda:t.diagnostico_concepto};$("#".concat(e)).modal({},i)}else t.diagnostico_id=o[0].id,t.diagnostico_concepto=o[0].concepto,a.mostrarExito("Diagnóstico seleccionado")})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores("¡Error al buscar diagnósticos!",t)}))},diagnosticoSeleccionado:function(e){this.registro.diagnostico_id=e.id,this.registro.diagnostico_concepto=e.concepto},diagnosticoEpidemiologicoSeleccionado:function(e){this.variablesEpidemiologicas.diagnostico_id=e.id,this.variablesEpidemiologicas.diagnostico_concepto=e.concepto},validarAbono:function(){return this.abono.valor?0===this.abono.valor?(this.abono.cuenta_bancaria_id="",this.abono.referencia="",this.abono.numero_forma_pago="",this.abono.extras=null,void(this.abono.forma_pago="EF")):this.abono.valor<0?(this.abono.cuenta_bancaria_id="",this.abono.referencia="",this.abono.numero_forma_pago="",this.abono.extras=null,this.abono.forma_pago="EF",void(this.abono.valor="")):(Number(this.abono.valor)>Number(this.registro.valor_total)&&this.registro.valor_total>0&&(this.abono.valor=this.registro.valor_total),void(this.registro.valor_total<0&&(this.abono.valor="",this.abono.cuenta_bancaria_id="",this.abono.referencia="",this.abono.numero_forma_pago="",this.abono.forma_pago="EF"))):(this.abono.cuenta_bancaria_id="",this.abono.referencia="",this.abono.numero_forma_pago="",this.abono.extras=null,this.abono.forma_pago="EF",void(this.abono.valor=""))},calcularPorcentajeDescuento:function(){if(this.registro.valor_descuento>0){var e=+this.registro.valor_descuento+ +this.registro.valor_total-+this.registro.valor_recargo-+this.registro.valor_domicilio;this.porcentaje_descuento=100*this.registro.valor_descuento/e,this.porcentaje_descuento=this.redondear2Decimales(this.porcentaje_descuento),this.porcentaje_descuento=this.porcentaje_descuento.toFixed(2)}},calcularPorcentajeRecargo:function(){if(this.registro.valor_recargo>0){var e=+this.registro.valor_total-+this.registro.valor_recargo;this.porcentajeRecargo=100*this.registro.valor_recargo/e,this.porcentajeRecargo=this.redondear2Decimales(this.porcentajeRecargo),this.porcentajeRecargo=this.porcentajeRecargo.toFixed(2)}},cambioFechaOrden:function(){var e=this;if(this.detallesOrdenes.length>0){var t,a=k(this.detallesOrdenes);try{var r=function(){var a=t.value,r=e.examenes.find((function(e){return e.examen_id===a.examen_id}));a.tiempo_proceso=r.examen.tiempo_proceso,a.fecha_entrega_estimada="",a.muestras.forEach((function(e){return e.fecha=""}))};for(a.s();!(t=a.n()).done;)r()}catch(e){a.e(e)}finally{a.f()}}},validarValor:function(e){var t=this.detallesOrdenes.indexOf(e);this.detallesOrdenes[t].valor||(this.detallesOrdenes[t].valor="0.00"),this.detallesOrdenes[t].valor<0&&(this.detallesOrdenes[t].valor="0.00"),this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null),this.porcentaje_descuento="0.00",this.registro.valor_descuento="0.00"},formatearValorDetalle:function(e){e.valor=Number(e.valor).toFixed(2)},valorDetalleKeyTab:function(e){var t=this.detallesOrdenes.indexOf(e);this.detallesOrdenes[t].valor&&(this.detallesOrdenes[t].valor=Number(this.detallesOrdenes[t].valor).toFixed(2))},porcentajeDescuentoKeyup:function(e){if(null==e||9!==e.keyCode){if(this.porcentaje_descuento<0&&(this.porcentaje_descuento=0),0===Number(this.porcentaje_descuento))return this.porcentaje_descuento=0,void(this.registro.valor_descuento=0);var t=this.valorSubtotal*this.porcentaje_descuento/100,a=this.valorSubtotal-t-this.abono.valor;if(a<0){var r=this.valorSubtotal-this.abono.valor;this.registro.valor_descuento=r>0?r:0}else this.registro.valor_descuento=t;this.registro.valor_descuento=this.redondear2Decimales(this.registro.valor_descuento),this.registro.valor_descuento=this.registro.valor_descuento.toFixed(2);var o=100*this.registro.valor_descuento/this.valorSubtotal;if(a<0){if(o=this.redondear2Decimales(o),Number(o)<0)return void(this.porcentaje_descuento=0);this.porcentaje_descuento=o}this.descuentoPorPorcentaje=!0,this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null)}},formatearPorcentajeDescuento:function(){this.porcentaje_descuento&&(this.porcentaje_descuento=Number(this.porcentaje_descuento).toFixed(2))},valorDescuentoKeyup:function(e){if(null==e||9!==e.keyCode){if(0===this.registro.valor_descuento)return this.porcentaje_descuento=0,void(this.registro.valor_descuento=0);if(this.registro.valor_descuento<0&&(this.registro.valor_descuento=0),this.registro.valor_total<0)this.registro.valor_descuento=0;else{if(this.valorSubtotal-this.registro.valor_descuento-this.abono.valor<0){var t=this.valorSubtotal-this.abono.valor;if(t<0)return void(this.registro.valor_descuento=0);this.registro.valor_descuento=t}this.porcentaje_descuento=100*this.registro.valor_descuento/this.valorSubtotal,this.porcentaje_descuento=this.redondear2Decimales(this.porcentaje_descuento),this.porcentaje_descuento=this.porcentaje_descuento.toFixed(2),this.descuentoPorPorcentaje=!1,this.recargoPorPorcentaje?this.porcentajeRecargoKeyup(null):this.valorRecargoKeyup(null)}}},formatearValorDescuento:function(){this.registro.valor_descuento>0&&(this.registro.valor_descuento=Number(this.registro.valor_descuento).toFixed(2))},valorDomicilioKeyup:function(e){null!=e&&9===e.keyCode||this.registro.valor_domicilio<0&&(this.registro.valor_domicilio=0)},formatearValorDomicilio:function(){this.registro.valor_domicilio>0&&(this.registro.valor_domicilio=Number(this.registro.valor_domicilio).toFixed(2))},valorRecargoKeyup:function(e){if(null==e||9!==e.keyCode){if(0===this.registro.valor_recargo)return this.porcentajeRecargo=0,void(this.registro.valor_recargo=0);this.registro.valor_recargo<0&&(this.registro.valor_recargo=0),0!==Number(this.valorSubtotal)?(this.porcentajeRecargo=100*this.registro.valor_recargo/(this.valorSubtotal-this.registro.valor_descuento),this.porcentajeRecargo=this.redondear2Decimales(this.porcentajeRecargo),this.porcentajeRecargo=this.porcentajeRecargo.toFixed(2),this.recargoPorPorcentaje=!1):this.porcentajeRecargo=0}},formatearValorRecargo:function(){this.registro.valor_recargo>0&&(this.registro.valor_recargo=Number(this.registro.valor_recargo).toFixed(2))},porcentajeRecargoKeyup:function(e){null!=e&&9===e.keyCode||(this.porcentajeRecargo<0&&(this.porcentajeRecargo=0),this.registro.valor_recargo=(this.valorSubtotal-this.registro.valor_descuento)*this.porcentajeRecargo/100,this.registro.valor_recargo>0?(this.registro.valor_recargo=this.redondear2Decimales(this.registro.valor_recargo),this.registro.valor_recargo=Number(this.registro.valor_recargo).toFixed(2)):this.registro.valor_recargo=0,e&&(this.recargoPorPorcentaje=!0))},formatearPorcentajeRecargo:function(){this.porcentajeRecargo>0&&(this.porcentajeRecargo=Number(this.porcentajeRecargo).toFixed(2))},abonoKeyTab:function(){this.abono.valor&&(this.abono.valor=Number(this.abono.valor).toFixed(2))},regresar:function(){this.redireccionar()},abonarTodo:function(){this.abono.valor=this.registro.valor_total,this.esAbonoValido()},esAbonoValido:function(){var e=(0,d.dD)(this.facturas.configs,this.abono);return"abrirModal"===e?(this.abrirModalCrearAbono(),!1):e},cambioCumpleDefinicionCaso:function(){var e=this;this.variablesEpidemiologicas.cumple_definicion_caso&&(this.cargandoDiagnosticoEpi=!0,axios.get("/api/diagnosticos?codigo=U071").then((function(t){var a=t.data;1===a.length&&(e.variablesEpidemiologicas.diagnostico_id=a[0].id,e.variablesEpidemiologicas.diagnostico_concepto=a[0].concepto)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar diagnóstico",a)})).then((function(){return e.cargandoDiagnosticoEpi=!1})))},cambioEmbarazada:function(){this.registro.embarazada||(this.registro.semanas_gestacion="",this.registro.fecha_ultima_menstruacion="")},clickEpi1:function(){this.primerClickEpi||(this.cargarCookies(),this.cargarUbicaciones()),this.primerClickEpi=!0},cargarCookies:function(){var e=localStorage.getItem("unidadSaludNotifica");e&&!this.variablesEpidemiologicas.unidad_salud_notifica&&(this.variablesEpidemiologicas.unidad_salud_notifica=e);var t=localStorage.getItem("epi-nivel2");t&&!this.registroAuxiliar.provinciaId&&(this.registroAuxiliar.provinciaId=parseInt(t));var a=localStorage.getItem("epi-nivel3");a&&!this.registroAuxiliar.cantonId&&(this.registroAuxiliar.cantonId=parseInt(a)),this.key++},cambiarUnidadSaludNotifica:function(){this.variablesEpidemiologicas.unidad_salud_notifica&&localStorage.setItem("unidadSaludNotifica",this.variablesEpidemiologicas.unidad_salud_notifica)},provinciaIdEpiActualizada:function(e){this.registroAuxiliar.provinciaId=e},cantonIdEpiActualizado:function(e){this.registroAuxiliar.cantonId=e},elementosInvalidos:function(e){e.target.parentElement.classList.add("has-error"),$('.nav a[href="#datosGenerales"]').tab("show")},documentoImpreso:function(e){if(e)this.mostrarExito(e.mensajes);else{this.mostrarExito(["Impresión enviada"])}},horaFechaOrdenSeleccionada:function(e){this.registro.hora_orden=e},horaFechaProcesamientoSeleccionada:function(e){this.horaProcesamiento=e},horaFechaEntregaSeleccionada:function(e){this.horaEntrega=e},abonoCreado:function(e){this.abono.forma_pago=e.forma_pago,this.abono.valor=e.valor,this.abono.cuenta_bancaria_id=e.cuenta_bancaria_id,this.abono.numero_forma_pago=e.numero_forma_pago,this.abono.extras=e.extras,this.abono.referencia=e.referencia},buscarSaldoPendientePaciente:function(e,t){var a=this;if(e&&t&&this.datos.configuraciones.mostrarResumenPaciente){var r={pacienteType:t};axios.get("/api/pacientes/".concat(e,"/resumen"),{params:r}).then((function(e){var t=e.data.data;a.resumenPaciente.saldo=t.saldo,a.resumenPaciente.cantidadOrdenes=t.cantidad_ordenes,a.resumenPaciente.keySaldo++,a.resumenPaciente.keyCantidadOrdenes++,a.resumenPaciente.saldo>0&&a.mostrarAdvertencia("El paciente tiene un saldo pendiente de pago de "+a.$cliente.moneda+Number(a.resumenPaciente.saldo).toFixed(2))})).catch((function(e){var t=a.procesarErrorResponse(e);t.unshift("Error al calcular saldo de paciente"),a.mostrarErrores(t)}))}},focusSiguiente:function(e){$("#".concat(e)).focus()},tituloCondicionesPreanaliticas:function(e){return e.condiciones_preanaliticas?e.condiciones_preanaliticas.replace(/\n/g,"<br />"):""},abrirDatosAdicionales:function(){this.cargarCatalogosDatosAdicionales()},cargarCatalogosDatosAdicionales:function(){var e=this;_.isEmpty(this.laboratorios)&&axios.get("/api/catalogos",{params:{catalogo:u.oH.LABORATORIOS}}).then((function(t){var a=t.data.data;e.laboratorios=a})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al cargar Laboratorios"),e.mostrarErrores(a)})),_.isEmpty(this.tiposPacientes)&&axios.get("/api/catalogos",{params:{catalogo:u.oH.TIPOS_PACIENTES}}).then((function(t){var a=t.data.data;e.tiposPacientes=a})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al cargar Tipos de paciente"),e.mostrarErrores(a)})),_.isEmpty(this.planesSalud)&&axios.get("/api/catalogos",{params:{catalogo:u.oH.PLAN_SALUD}}).then((function(t){var a=t.data.data;e.planesSalud=a})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al cargar Planes de salud"),e.mostrarErrores(a)}))},muestrasGuardadas:function(){this.detallesOrdenes.forEach((function(e){e.muestraPendiente=e.muestras.reduce((function(e,t){var a=t.estado;return e||a===u.zm.PENDIENTE}),!1)}))},abrirModalCrearAbono:function(){var e=(0,d.MD)({abono:this.abono});$("#modalAbonoFormulario").modal({},e)},abrirModalMuestras:function(){"0"===this.id&&this.asignarFlebotomistaAMuestras(),$("#muestrasModal").modal({backdrop:"static"})},asignarFlebotomistaAMuestras:function(){var e=this;this.detallesOrdenes.forEach((function(t){t.muestras.filter((function(e){return e.estado===u.zm.RECIBIDA})).forEach((function(t){t.flebotomista_id=e.registroAuxiliar.flebotomistaId}))}))},autocompletarFlebotomista:function(){var e=this;if(this.ocultarMensajes(),this.registroAuxiliar.flebotomistaId="",this.registroAuxiliar.flebotomistaNombre){this.registroAuxiliar.flebotomistaNombre=this.registroAuxiliar.flebotomistaNombre.trim(),this.procesando.cargarFlebotomista=!0;var t=this.registroAuxiliar.flebotomistaNombre.split(" "),a={catalogo:u.oH.FLEBOTOMISTAS,cadenaBusqueda:t&&!_.isEmpty(t)?t[0]:this.registroAuxiliar.flebotomistaNombre};axios.get("/api/catalogos",{params:a}).then((function(t){var a=t.data.data;if(0===a.length)return e.abrirModalGestionarFlebotomista(),e.cadenaBusqueda=e.registroAuxiliar.flebotomistaNombre,void(e.registroAuxiliar.flebotomistaNombre="");if(a.length>1){var r={cadenaBusqueda:e.registroAuxiliar.flebotomistaNombre};return $("#modalBuscarFlebotomista").modal({},r),void(e.registroAuxiliar.flebotomistaNombre="")}e.registroAuxiliar.flebotomistaId=a[0].id,e.registroAuxiliar.flebotomistaNombre=a[0].nombre_completo,e.mostrarExito("Flebotomista seleccionado"),e.asignarFlebotomistaAMuestras()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar flebotomista",a)})).then((function(){return e.procesando.cargarFlebotomista=!1}))}},abrirModalGestionarFlebotomista:function(){this.procesando.cargarFlebotomista||$("#modalGestionarFlebotomista").modal({backdrop:"static"})},abrirModalBuscarFlebotomista:function(){$("#modalBuscarFlebotomista").modal("show")},flebotomistaCreado:function(e){this.registroAuxiliar.flebotomistaId=e.id,this.registroAuxiliar.flebotomistaNombre=e.nombre_completo,this.asignarFlebotomistaAMuestras(),this.mostrarExito("Flebotomista <strong>".concat(e.nombre_completo,"</strong> creado y seleccionado"))},flebotomistaSeleccionado:function(e){this.registroAuxiliar.flebotomistaId=e.id,this.registroAuxiliar.flebotomistaNombre=e.nombre_completo,this.mostrarExito("Flebotomista seleccionado"),this.asignarFlebotomistaAMuestras()},eliminarFlebotomista:function(){this.registroAuxiliar.flebotomistaId="",this.registroAuxiliar.flebotomistaNombre="",this.mostrarExito("Selección de flebotomista removida")},siguienteExamen:function(e){this.indiceExamen=e+1,$("#examen-"+this.indiceExamen).focus()},anteriorExamen:function(e){this.indiceExamen=e-1,0!==e?$("#examen-"+this.indiceExamen).focus():$("#buscarExamen").focus()},mouseSobreExamen:function(){this.indiceExamen=null},calcularValorTotal:function(){this.registro.valor_total=this.valorSubtotal-this.registro.valor_descuento+ +this.registro.valor_recargo+ +this.registro.valor_domicilio},abrirModalConfiguraciones:function(){$("#modalConfigs").modal("show")},atajosTeclado:function(){var e=this;document.addEventListener("keydown",(function(t){t.ctrlKey&&"s"===t.key.toLowerCase()&&(t.preventDefault(),e.$refs.guardar.click()),t.ctrlKey&&"e"===t.key.toLowerCase()&&(t.preventDefault(),$("#buscarExamen").focus())}))},abrirCoberturaMspPaciente:function(){$("#modalCoberturaMsp").modal({backdrop:"static"})}},computed:{titulo:function(){return"0"===this.id?"Crear Orden":this.puedeModificar?"Editar Orden No. ":"Orden No. "},puedeCambiarMedico:function(){return"0"===this.id||(!this.registro.sistema_externo_id||this.$can("cambiar-medico-sistema-externo-ordenes"))},examenesFiltrados:function(){var e=this;return 0===this.examenes.length?this.examenes:this.examenes.filter((function(t){var a=(0,d.G5)(e.cadenaBusquedaExamenes),r=new RegExp(removeDiacritics(a),"i"),o=r.test(t.examen.codigo+" ")||r.test(t.examen.referencia_auxiliar)||r.test(t.examen.referencia_auxiliar_2)||r.test(removeDiacritics(t.examen.nombre)),i=e.detallesOrdenes.filter((function(e){return e.examen_id===t.examen.id}));return o&&0===i.length}))},detallesOrdenesFiltrados:function(){var e=this;return this.detallesOrdenes.length>0?this.detallesOrdenes.filter((function(t){var a=(0,d.G5)(e.cadenaBusquedaDetalles),r=new RegExp(removeDiacritics(a),"i");return r.test(t.examen.codigo)||r.test(removeDiacritics(t.examen.nombre))})):[]},valorSubtotal:function(){var e=0;return this.detallesOrdenes.length>0&&(e=this.detallesOrdenes.reduce((function(e,t){return+e+ +t.valor}),0)),this.redondear2Decimales(e)},valorTotalCalculado:function(){return this.calcularValorTotal(),this.registro.valor_total=this.redondear2Decimales(this.registro.valor_total),this.registro.valor_total.toFixed(2)},valorDescuento:function(){return Number(this.registro.valor_descuento).toFixed(2)},valorRecargo:function(){return Number(this.registro.valor_recargo).toFixed(2)},valorDomicilio:function(){return Number(this.registro.valor_domicilio).toFixed(2)},saldoCalculado:function(){var e=this.registro.valor_total-this.abono.valor;return Number(e).toFixed(2)},etiquetaSeleccionados:function(){return this.detallesOrdenes.length>1?"exámenes":"examen"},etiquetaDatosPaciente:function(){var e="";switch(this.registro.paciente_type){case"App\\Models\\PacienteHumano":default:e="Datos del paciente";break;case"App\\Models\\PacienteAnimal":e="Datos del paciente animal";break;case"App\\Models\\SujetoObjeto":e="Datos del objeto"}return e},puedeModificar:function(){return"N"!==this.registro.estado},esHumano:function(){return"App\\Models\\PacienteHumano"===this.registro.paciente_type},esAnimal:function(){return"App\\Models\\PacienteAnimal"===this.registro.paciente_type},esObjeto:function(){return"App\\Models\\SujetoObjeto"===this.registro.paciente_type},numeroHistoriaClinica:function(){var e={es_humano:this.esHumano,es_animal:this.esAnimal,es_objeto:this.esObjeto,paciente:{historia_clinica:this.registro.paciente_historia_clinica,numero_historia_clinica:this.registro.paciente_numero_historia_clinica}},t="0"===this.id?this.$usuario.sistemaHisId:this.registro.sistema_externo_id?this.registro.sistema_externo_id:this.$usuario.sistemaHisId;return this.obtenerNumeroHistoriaClinica(e,t)}},watch:{"registro.fecha_orden":function(e,t){t&&e!==t&&this.cambioFechaOrden()}}};var I=a(3379),D=a.n(I),R=a(6796),M={insert:"head",singleton:!1};D()(R.Z,M);R.Z.locals;const N=(0,f.Z)(S,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{"!invalid":function(t){return e.elementosInvalidos.apply(null,arguments)},submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{attrs:{"mostrar-configuraciones":!0,"mostrar-servidor-local":!0},on:{"click-configuraciones":e.abrirModalConfiguraciones},scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s(e.titulo)+"\n        "),t("strong",[e._v(e._s(e.registro.numero_orden))])]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[e.puedeModificar?t("button",{ref:"guardar",staticClass:"btn btn-primary",attrs:{id:"0"===e.id?"crearOrden":"actualizarOrden",type:"submit",disabled:e.errorEnTarifas||e.errorEnOrden},on:{click:function(t){e.registro.soloGuardar=!0}}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")]):e._e()]),e._v(" "),t("li",{staticClass:"hidden-xs"},["0"===e.id&&e.puedeModificar?t("button",{staticClass:"btn btn-default",attrs:{id:"0"===e.id?"crearYNuevoOrden":"",type:"submit",disabled:e.errorEnTarifas||e.errorEnOrden},on:{click:function(t){e.registro.soloGuardar=!1}}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar y Nuevo\n            ")]):e._e()]),e._v(" "),t("li",["0"!==e.id&&"N"!==e.registro.estado?t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button",id:"dropdownMenu1","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[t("i",{staticClass:"fas fa-print"}),e._v(" Imprimir\n                "),t("span",{staticClass:"caret"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu",staticStyle:{"margin-top":"-4px"},attrs:{"aria-labelledby":"dropdownMenu1"}},[t("li",[t("a",{staticClass:"puntero",class:{disabled:e.errorEnOrden},attrs:{disabled:e.errorEnOrden},on:{click:function(t){return e.abrirModalImprimir("etiquetas")}}},[e._v("\n                    Etiquetas\n                  ")])]),e._v(" "),t("li",[t("a",{staticClass:"puntero",class:{disabled:e.errorEnOrden},attrs:{disabled:e.errorEnOrden},on:{click:function(t){return e.abrirModalImprimir("recibo")}}},[e._v("\n                    Recibo\n                  ")])]),e._v(" "),t("li",[t("a",{staticClass:"puntero",class:{disabled:e.errorEnOrden},attrs:{disabled:e.errorEnOrden},on:{click:function(t){return e.abrirModalImprimir("certificado-asistencia")}}},[e._v("\n                    Certificado\n                  ")])])])]):e._e()]),e._v(" "),"0"===e.id&&"unidice"===e.$cliente.subdominio?t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal","data-backdrop":"static","data-target":"#jmFacturaOrden"}},[t("i",{staticClass:"fas fa-download fa-fw"}),e._v(" Descargar factura\n            ")])]):e._e(),e._v(" "),t("li",["0"!==e.id?t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#verAuditoriasModal"}},[t("i",{staticClass:"fas fa-fingerprint"}),e._v("\n              Auditoría\n            ")]):e._e()]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{title:"Regresar"},on:{click:e.regresar}},[t("i",{staticClass:"fas fa-arrow-left"})])])])]},proxy:!0}])}),e._v(" "),t("ul",{staticClass:"nav nav-tabs"},[e._m(0),e._v(" "),t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#datosAdicionales"},on:{click:e.abrirDatosAdicionales}},[e._v("Datos adicionales")])]),e._v(" "),"EC"===e.$cliente.pais?t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#variablesEpidemilogicas"},on:{click:e.clickEpi1}},[e._v("\n          EPI 1\n        ")])]):e._e()]),e._v(" "),t("div",{staticClass:"tab-content"},[t("div",{staticClass:"tab-pane fade in active",attrs:{id:"datosGenerales"}},[t("fieldset",{attrs:{disabled:""}},[t("div",{staticClass:"row"},["0"===e.id?t("div",{staticClass:"col-sm-4 col-md-3 form-group"},[t("label",{staticClass:"control-label no-salto-linea",class:{obligatorio:"App\\Models\\PacienteAnimal"!==e.registro.paciente_type},attrs:{for:"identificacion"}},[e._v("\n                Identificación\n                "+e._s(e.esObjeto?"objeto":"paciente")+"\n              ")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.paciente_identificacion,expression:"registro.paciente_identificacion"}],staticClass:"form-control input-sm",attrs:{id:"identificacion",type:"text",maxlength:"25",autocomplete:"off",disabled:"0"!==e.id,required:"App\\Models\\PacienteAnimal"!==e.registro.paciente_type},domProps:{value:e.registro.paciente_identificacion},on:{blur:e.autocompletarPaciente,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("crearPaciente"))},input:function(t){t.target.composing||e.$set(e.registro,"paciente_identificacion",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default hidden-md hidden-lg",attrs:{type:"button","data-toggle":"tooltip",title:"Autocompletar",disabled:"0"!==e.id},on:{click:e.autocompletarPaciente}},[t("i",{staticClass:"fas fa-user-check fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{id:"crearPaciente",type:"button","data-toggle":"tooltip",title:"Crear",disabled:"0"!==e.id},on:{click:e.abrirAutocompletarPaciente}},[t("i",{staticClass:"fas fa-plus fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"tooltip",title:"0"===e.id&&e.registro.paciente_id?"Editar datos de paciente seleccionado":"",disabled:"0"!==e.id||!e.registro.paciente_id},on:{click:e.abrirModalEditarPaciente}},[t("i",{staticClass:"fas fa-pencil-alt fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"tooltip",title:"Cambiar a otro paciente",disabled:"0"!==e.id},on:{click:e.abrirPacienteSinBusqueda}},[t("i",{staticClass:"fas fa-search fa-fw",attrs:{"aria-hidden":"true"}})])])])]):e._e(),e._v(" "),t("div",{staticClass:"form-group",class:"0"===e.id?"col-sm-9":"col-sm-10"},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_type,expression:"registro.paciente_type"}],staticClass:"control-label",attrs:{for:"paciente_nombre"}},[e._v("\n                "+e._s(e.etiquetaDatosPaciente)+"\n              ")]),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoPaciente,expression:"cargandoPaciente"}],staticClass:"fas fa-spinner fa-spin fa-fw",staticStyle:{"margin-top":"36px"},attrs:{"aria-hidden":"true",title:"Obteniendo datos de persona"}}),e._v(" "),"0"!==e.id&&"N"!==e.registro.estado?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Editar datos de paciente seleccionado","data-toggle":"tooltip"},on:{click:e.abrirModalEditarPaciente}},[t("i",{staticClass:"fas fa-pencil-alt"})]):e._e(),e._v(" "),"0"!==e.id&&"N"!==e.registro.estado?t("button",{staticClass:"btn btn-xs btn-primary",attrs:{type:"button",title:"Cambiar a otro paciente","data-toggle":"tooltip"},on:{click:e.abrirPacienteSinBusqueda}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]):e._e(),e._v(" "),"App\\Models\\PacienteHumano"===e.registro.paciente_type&&"EC"===e.$cliente.pais?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Cobertura MSP","data-toggle":"tooltip"},on:{click:e.abrirCoberturaMspPaciente}},[t("img",{attrs:{id:"logo_msp",src:"/img/msp.ico"}})]):e._e(),e._v(" "),e.datos.configuraciones.mostrarResumenPaciente&&e.registro.paciente_type?[e._v("\n                 \n                "),0===e.resumenPaciente.saldo?t("i",{staticClass:"far fa-check-circle text-success",attrs:{"data-toggle":"tooltip",title:"Pago completo","aria-hidden":"true"}}):e.resumenPaciente.saldo>0?t("span",{key:"saldo-".concat(e.registro.paciente_id),staticClass:"text-danger",attrs:{"data-toggle":"tooltip",title:e.resumenPaciente.saldo?"Paciente debe ".concat(e.$cliente.moneda).concat(e.resumenPaciente.saldo.toFixed(2)):""}},[t("i",{staticClass:"fas fa-hand-holding-usd"}),e._v(" "),t("strong",[e._v("\n                    "+e._s(e.$cliente.moneda)+e._s(e.resumenPaciente.saldo.toFixed(2))+"\n                  ")])]):e._e()]:e._e(),e._v(" "),e.datos.configuraciones.mostrarResumenPaciente&&e.resumenPaciente.cantidadOrdenes>0&&e.registro.paciente_type?t("span",{key:"cantidad-ordenes-".concat(e.registro.paciente_id),staticClass:"puntero",attrs:{"data-toggle":"tooltip",title:e.resumenPaciente.cantidadOrdenes?"Órdenes anteriores del paciente: ".concat(e.resumenPaciente.cantidadOrdenes):""}},[e._v("\n\n                 \n\n                "),t("i",{staticClass:"fas fa-file-medical-alt",attrs:{"aria-hidden":"true"}}),e._v(" "),t("strong",[e._v("\n                  "+e._s(e.resumenPaciente.cantidadOrdenes)+"\n                ")])]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_nombre,expression:"registro.paciente_nombre"}],attrs:{id:"paciente_nombre"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.esHumano,expression:"esHumano"}],staticClass:"fas fa-user fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.esAnimal,expression:"esAnimal"}],staticClass:"fas fa-paw fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.esObjeto,expression:"esObjeto"}],staticClass:"fas fa-flask fa-lg"}),e._v(" "),t("span",{staticClass:"paciente"},[e._v(e._s(e.registro.paciente_nombre))]),e._v("\n                 \n                "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.esAnimal&&e.registro.paciente_taxonomia,expression:"esAnimal && registro.paciente_taxonomia"}],staticClass:"no-salto-linea",attrs:{title:"Raza"}},[t("i",{staticClass:"fas fa-sitemap fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_taxonomia)+"\n                   \n                ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.id,expression:"id !== '0'"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"far fa-id-card fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_identificacion)+"\n                   \n                ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.numeroHistoriaClinica,expression:"numeroHistoriaClinica"}],staticClass:"no-salto-linea"},[t("strong",[e._v("HC")]),e._v(" "+e._s(e.numeroHistoriaClinica)+"\n                   \n                ")]),e._v(" "),e.esHumano||e.esAnimal?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-birthday-cake fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_fecha_nacimiento)+" ("+e._s(e.obtenerEdad(e.registro.paciente_fecha_nacimiento))+")\n                   \n                ")]):e._e(),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_sexo,expression:"registro.paciente_sexo"}],staticClass:"no-salto-linea"},[t("i",{directives:[{name:"show",rawName:"v-show",value:"M"===e.registro.paciente_sexo,expression:"registro.paciente_sexo === 'M'"}],staticClass:"fas fa-mars fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:"F"===e.registro.paciente_sexo,expression:"registro.paciente_sexo === 'F'"}],staticClass:"fas fa-venus fa-lg"}),e._v(" "),e.esHumano?[e._v("\n                    "+e._s("M"===e.registro.paciente_sexo?"Masculino":"Femenino")+"\n                  ")]:e._e(),e._v(" "),e.esAnimal?[e._v("\n                    "+e._s("M"===e.registro.paciente_sexo?"Macho":"Hembra")+"\n                  ")]:e._e(),e._v("\n                   \n                ")],2),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_numero_poliza,expression:"registro.paciente_numero_poliza"}],staticClass:"no-salto-linea",attrs:{title:"Número de poliza"}},[t("i",{staticClass:"fas fa-user-shield fa-lg",attrs:{title:"Número de poliza"}}),e._v("\n                  "+e._s(e.registro.paciente_numero_poliza)+"\n                   \n                ")]),e._v(" "),(e.esAnimal||e.esObjeto)&&e.registro.paciente_dueno_responsable?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-user-tie fa-lg",attrs:{title:"Dueño"}}),e._v("\n                  "+e._s(e.registro.paciente_dueno_responsable)+"\n                   \n                ")]):e._e(),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_telefono,expression:"registro.paciente_telefono"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-mobile-alt fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_telefono)+"\n                   \n                ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_correo,expression:"registro.paciente_correo"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-envelope fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_correo)+"\n                   \n                ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_direccion,expression:"registro.paciente_direccion"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-map-marked-alt fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_direccion)+"\n                   \n                ")])])],2),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"0"!==this.id,expression:"this.id !== '0'"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"responsable_ingresa"}},[e._v(e._s(e.usuarioIngresa?"Usuario":"Sistema")+"\n                ingresa")]),e._v(" "),t("div",{attrs:{id:"responsable_ingresa"}},[e._v("\n                "+e._s(e.usuarioIngresa?e.usuarioIngresa:e.sistemaIngresa)+"\n              ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),e.tieneFacturaEmitida?e._e():t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",disabled:!e.permisos.cambiarEmpresas,placeholder:"Seleccione...",options:e.empresas,label:"nombre",reduce:function(e){return e.id}},on:{input:function(t){return e.cargarSubempresa(e.registro.empresa_id,!0)}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!1,2639475694),model:{value:e.registro.empresa_id,callback:function(t){e.$set(e.registro,"empresa_id",t)},expression:"registro.empresa_id"}}),e._v(" "),e.tieneFacturaEmitida?t("output",[e._v("\n                "+e._s(e.registroAuxiliar.empresaNombre)+"\n              ")]):e._e()],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio no-salto-linea",attrs:{for:"subempresa_id"}},[e._v("\n                Categoría\n              ")]),e._v(" "),e.tieneFacturaEmitida?e._e():t("v-select",{staticClass:"form-control input-sm",attrs:{id:"subempresa_id",placeholder:"Seleccione...",options:e.subempresas,loading:e.cargandoSubempresas,label:"nombre",reduce:function(e){return e.id},required:""},on:{input:function(t){return e.cargarExamenes(!0,!0)}},scopedSlots:e._u([{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.registro.subempresa_id}},"input",r,!1),o))]}},{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}],null,!1,2526628172),model:{value:e.registro.subempresa_id,callback:function(t){e.$set(e.registro,"subempresa_id",t)},expression:"registro.subempresa_id"}}),e._v(" "),e.tieneFacturaEmitida?t("output",[e._v("\n                "+e._s(e.registroAuxiliar.subempresaNombre)+"\n              ")]):e._e()],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.config.medicoObligatorio},attrs:{for:"medico_nombre"}},[e._v("\n                Médico\n                "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.cargarMedico,expression:"procesando.cargarMedico"}],staticClass:"fas fa-spinner fa-spin",attrs:{"aria-hidden":"true",title:"Cargando médico"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.registro.medico_id,expression:"registro.medico_id"}],staticClass:"fas fa-check-circle",attrs:{"data-toggle":"tooltip",title:"Médico seleccionado"}}),e._v(" "),e.puedeCambiarMedico?t("i",{directives:[{name:"show",rawName:"v-show",value:e.registro.medico_id,expression:"registro.medico_id"}],staticClass:"fas fa-trash puntero",attrs:{"data-toggle":"tooltip",title:"Quitar médico"},on:{click:e.eliminarMedico}}):e._e(),e._v(" "),t("span",[e._v("\n                 \n                "),e.puedeCambiarMedico?t("button",{directives:[{name:"show",rawName:"v-show",value:e.registro.medico_id,expression:"registro.medico_id"}],staticClass:"btn btn-xs btn-default fas fa-eye puntero",attrs:{type:"button",title:"Ver médico","data-toggle":"tooltip"},on:{click:e.verMedico}}):e._e()]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registroAuxiliar.medicoReferenciaAuxiliar,expression:"registroAuxiliar.medicoReferenciaAuxiliar"}],staticStyle:{"font-weight":"normal"},attrs:{title:"Referencia auxiliar","data-toggle":"tooltip"}},[e._v("\n                  "+e._s(e.registroAuxiliar.medicoReferenciaAuxiliar)+"\n                ")])]),e._v(" "),e.puedeCambiarMedico?t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registroAuxiliar.medicoNombre,expression:"registroAuxiliar.medicoNombre"}],staticClass:"form-control input-sm",attrs:{id:"medico_nombre",type:"text",maxlength:"15",placeholder:"Buscar médico",autocomplete:"off",required:e.config.medicoObligatorio},domProps:{value:e.registroAuxiliar.medicoNombre},on:{blur:e.autocompletarMedico,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("crearMedico"))},input:function(t){t.target.composing||e.$set(e.registroAuxiliar,"medicoNombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{directives:[{name:"show",rawName:"v-show",value:e.$can("crear-medicos"),expression:"$can('crear-medicos')"}],staticClass:"btn btn-sm btn-default",attrs:{id:"crearMedico",type:"button","data-toggle":"tooltip",title:"Crear médico"},on:{click:e.abrirModalGestionarMedico}},[t("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"tooltip",title:"Buscar médico"},on:{click:e.buscarMedico}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])]):t("div",[e._v("\n                "+e._s(e.registroAuxiliar.medicoNombre)+"\n              ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("\n                Tipo atención\n              ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{"input-id":"tipo_atencion_id",placeholder:"Seleccione...",options:e.tiposAtenciones,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n                  "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px","margin-top":"-3px"}}):e._e()]}},{key:"option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n                  "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px"}}):e._e()]}}]),model:{value:e.registro.tipo_atencion_id,callback:function(t){e.$set(e.registro,"tipo_atencion_id",t)},expression:"registro.tipo_atencion_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label no-salto-linea",class:{obligatorio:e.$can("crear-editar-fecha-orden")},attrs:{for:"fecha_orden"}},[e._v("Fecha orden")]),e._v(" "),e.$can("crear-editar-fecha-orden")?t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha_orden,expression:"registro.fecha_orden"}],staticClass:"form-control input-sm",attrs:{id:"fecha_orden","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",required:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}}),e._v(" "),e._m(1)]):t("div",[e._v("\n                "+e._s(e.registro.fecha_orden)+"\n              ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"observaciones_orden"}},[e._v("Observaciones recibo")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.observaciones_orden,expression:"registro.observaciones_orden"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",id:"observaciones_orden",name:"observaciones_orden"},domProps:{value:e.registro.observaciones_orden},on:{input:function(t){t.target.composing||e.$set(e.registro,"observaciones_orden",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"observaciones_hoja_trabajo"}},[e._v("Observaciones laboratorista")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.observaciones_hoja_trabajo,expression:"registro.observaciones_hoja_trabajo"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",id:"observaciones_hoja_trabajo",name:"observaciones_hoja_trabajo"},domProps:{value:e.registro.observaciones_hoja_trabajo},on:{input:function(t){t.target.composing||e.$set(e.registro,"observaciones_hoja_trabajo",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"servicio_id"}},[e._v("\n                Servicio\n              ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"servicio_id",placeholder:"Seleccione...",options:e.salas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n                  "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px","margin-top":"-3px"}}):e._e()]}},{key:"option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n                  "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px"}}):e._e()]}}]),model:{value:e.registro.sala_id,callback:function(t){e.$set(e.registro,"sala_id",t)},expression:"registro.sala_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_pedido"}},[e._v("Fecha pedido")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha_pedido,expression:"registro.fecha_pedido"}],staticClass:"form-control input-sm",attrs:{id:"fecha_pedido","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es",placeholder:"aaaa-mm-dd"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_orden_externa"}},[e._v("Referencia")]),e._v(" "),t("i",{staticClass:"fas fa-info-circle",attrs:{title:"Otros sistemas pueden depender de esta referencia","data-toggle":"tooltip"}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.numero_orden_externa,expression:"registro.numero_orden_externa"}],staticClass:"form-control input-sm",attrs:{id:"numero_orden_externa",type:"text",maxlength:"60",title:"Sistemas externos a Orión pueden depender de este número."},domProps:{value:e.registro.numero_orden_externa},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"numero_orden_externa",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico_nombre"}},[e._v("\n                Flebotomista\n                "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.cargarFlebotomista,expression:"procesando.cargarFlebotomista"}],staticClass:"fas fa-spinner fa-spin",attrs:{"aria-hidden":"true",title:"Cargando flebotomista"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.registroAuxiliar.flebotomistaId,expression:"registroAuxiliar.flebotomistaId"}],staticClass:"fas fa-check-circle",attrs:{"data-toggle":"tooltip",title:"Flebotomista seleccionado"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.registroAuxiliar.flebotomistaId,expression:"registroAuxiliar.flebotomistaId"}],staticClass:"fas fa-trash puntero",attrs:{"data-toggle":"tooltip",title:"Quitar flebotomista"},on:{click:e.eliminarFlebotomista}})]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registroAuxiliar.flebotomistaNombre,expression:"registroAuxiliar.flebotomistaNombre"}],staticClass:"form-control input-sm",attrs:{id:"flebotomista_id",type:"text",maxlength:"15",placeholder:"Buscar flebotomista",autocomplete:"off"},domProps:{value:e.registroAuxiliar.flebotomistaNombre},on:{blur:e.autocompletarFlebotomista,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("crearFlebotomista"))},input:function(t){t.target.composing||e.$set(e.registroAuxiliar,"flebotomistaNombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{id:"crearFlebotomista",type:"button","data-toggle":"tooltip",title:"Crear flebotomista"},on:{click:e.abrirModalGestionarFlebotomista}},[t("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"tooltip",title:"Buscar flebotomista"},on:{click:e.abrirModalBuscarFlebotomista}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_nombre&&"F"===e.registro.paciente_sexo&&"App\\Models\\SujetoObjeto"!==e.registro.paciente_type,expression:"registro.paciente_nombre && registro.paciente_sexo === 'F' && registro.paciente_type !== 'App\\\\Models\\\\SujetoObjeto'"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("F.U.M.")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha_ultima_menstruacion,expression:"registro.fecha_ultima_menstruacion"}],staticClass:"form-control input-sm",attrs:{id:"fum","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_nombre&&"F"===e.registro.paciente_sexo&&"App\\Models\\SujetoObjeto"!==e.registro.paciente_type,expression:"registro.paciente_nombre && registro.paciente_sexo === 'F' && registro.paciente_type !== 'App\\\\Models\\\\SujetoObjeto'"}],staticClass:"col-sm-2 form-group margen-superior-boton"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.embarazada,expression:"registro.embarazada"}],attrs:{type:"checkbox",value:"",disabled:"M"===e.registro.paciente_sexo},domProps:{checked:Array.isArray(e.registro.embarazada)?e._i(e.registro.embarazada,"")>-1:e.registro.embarazada},on:{change:[function(t){var a=e.registro.embarazada,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.registro,"embarazada",a.concat([""])):i>-1&&e.$set(e.registro,"embarazada",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"embarazada",o)},e.cambioEmbarazada]}}),e._v("\n                  Embarazada\n                ")])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_nombre&&"F"===e.registro.paciente_sexo&&e.registro.embarazada&&"App\\Models\\SujetoObjeto"!==e.registro.paciente_type,expression:"registro.paciente_nombre && registro.paciente_sexo === 'F' && registro.embarazada  && registro.paciente_type !== 'App\\\\Models\\\\SujetoObjeto'"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Semanas gestación")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.semanas_gestacion,expression:"registro.semanas_gestacion"}],staticClass:"form-control input-sm",attrs:{type:"number",step:"1",min:"0",max:"50"},domProps:{value:e.registro.semanas_gestacion},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"semanas_gestacion",t.target.value)}}})])])]),e._v(" "),t("fieldset",{staticStyle:{"margin-top":"10px"},attrs:{disabled:""}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.errorEnTarifas,expression:"!errorEnTarifas"}],staticClass:"row"},[t("div",{staticClass:"col-md-9"},[t("legend",{staticClass:"obligatorio"},[e._v("\n                Exámenes\n                "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrdenes.length>0,expression:"detallesOrdenes.length > 0"}],staticClass:"btn btn-default btn-sm pull-right",attrs:{type:"button"},on:{click:e.abrirModalMuestras}},[t("i",{staticClass:"fas fa-vial fa-xs"}),e._v("\n                  Muestras\n                ")])])]),e._v(" "),t("div",{staticClass:"col-md-3 hidden-xs hidden-sm"},[t("legend",{staticClass:"legend"},[e._v("\n                Totales\n                "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrdenes.length>0,expression:"detallesOrdenes.length > 0"}],staticClass:"badge pull-right"},[e._v("\n                  "+e._s(e.detallesOrdenes.length)+"\n                  "+e._s(e.etiquetaSeleccionados)+"\n                ")])])]),e._v(" "),e.cargandoExamenes?e._e():t("div",{staticClass:"col-md-4"},[t("div",{staticStyle:{height:"340px",overflow:"auto","margin-bottom":"12px"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("td",{staticClass:"text-left sticky-top",staticStyle:{"padding-left":"0"},attrs:{colspan:"2"}},[t("div",{staticClass:"col-xs-6",staticStyle:{"padding-left":"0"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusquedaExamenes,expression:"cadenaBusquedaExamenes"}],ref:"buscarExamen",staticClass:"form-control input-sm",attrs:{type:"text",id:"buscarExamen",placeholder:"Buscar examen",tabindex:"-1",autocomplete:"off",disabled:e.tieneFacturaEmitida},domProps:{value:e.cadenaBusquedaExamenes},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.siguienteExamen(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.autocompletarExamen.apply(null,arguments))}],input:function(t){t.target.composing||(e.cadenaBusquedaExamenes=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-xs-6 pull-right",staticStyle:{"padding-right":"0"}},[t("v-select",{staticClass:"form-control input-sm",attrs:{tabindex:-1,id:"perfiles",disabled:e.tieneFacturaEmitida||0===this.grupos.length,placeholder:"Perfil",options:e.grupos,label:"nombre",clearable:!1,reduce:function(e){return e.id},loading:e.cargandoPerfiles},on:{input:e.cargarExamenesPorGrupo},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}],null,!1,2737643764),model:{value:e.grupoId,callback:function(t){e.grupoId=t},expression:"grupoId"}})],1)])])]),e._v(" "),t("tbody",[0===e.examenesFiltrados.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"2"}},[t("output",{directives:[{name:"show",rawName:"v-show",value:""===e.registro.subempresa_id,expression:"registro.subempresa_id===''"}]},[e._v('\n                        No se ha seleccionado una "Categoría"\n                      ')]),e._v(" "),t("output",{directives:[{name:"show",rawName:"v-show",value:""!==e.registro.subempresa_id,expression:"registro.subempresa_id!==''"}]},[e._v("\n                        No existen exámenes disponibles para la categoría seleccionada\n                      ")])])]):e._e(),e._v(" "),e._l(e.examenesFiltrados,(function(a,r){return[t("tr",{class:{"hover-examen":r===e.indiceExamen},on:{mouseover:e.mouseSobreExamen}},[t("td",{staticClass:"col-xs-11 col-sm-11 col-md-11 text-left cortar-texto"},[t("div",{attrs:{title:a.examen.nombre}},[e._v("\n                          "+e._s(a.examen.codigo)+" - "+e._s(a.examen.nombre)+"\n                          "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.examen.se_remite,expression:"examenTarifa.examen.se_remite"}],staticClass:"fas fa-shipping-fast text-gris cursor-menu",attrs:{title:"Se remite","data-toggle":"tooltip"}})])]),e._v(" "),t("td",{staticClass:"col-xs-1 col-sm-1 col-md-1 text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{id:"examen-"+r,type:"button",title:"Agregar examen",disabled:e.tieneFacturaEmitida},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.anteriorExamen(r))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.siguienteExamen(r))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.stopPropagation()}],click:function(t){return e.agregarExamen(a)}}},[t("i",{staticClass:"fas fa-plus fa-fw"})])])])]}))],2)])])]),e._v(" "),e.cargandoExamenes?e._e():t("div",{staticClass:"col-md-5"},[t("div",{staticStyle:{height:"340px",overflow:"auto"},attrs:{id:"examenes-seleccioandos"}},[0===e.detallesOrdenes.length?t("div",{staticClass:"text-center",staticStyle:{"padding-top":"30px"}},[e._v("\n                  No existen exámenes seleccionados\n                ")]):e._e(),e._v(" "),t("table",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrdenes.length>0,expression:"detallesOrdenes.length > 0"}],staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("td",{staticClass:"sticky-top",staticStyle:{"padding-left":"0"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusquedaDetalles,expression:"cadenaBusquedaDetalles"}],staticClass:"form-control input-sm col-sm-3",attrs:{type:"text",placeholder:"Buscar examen seleccionado"},domProps:{value:e.cadenaBusquedaDetalles},on:{input:function(t){t.target.composing||(e.cadenaBusquedaDetalles=t.target.value)}}})]),e._v(" "),t("th",{staticClass:"col-xs-2 text-center sticky-top"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"text-center sticky-top"},[t("button",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrdenes.length>0,expression:"detallesOrdenes.length > 0"}],staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Eliminar todos los exámenes","data-toggle":"tooltip",disabled:e.tieneFacturaEmitida},on:{click:e.eliminarDetalles}},[t("i",{staticClass:"fas fa-trash fa-fw",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("tbody",e._l(e.detallesOrdenesFiltrados,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v("\n                      "+e._s(a.examen.codigo)+" - "+e._s(a.examen.nombre)+"\n\n                      "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.examen.se_remite,expression:"detalle.examen.se_remite"}],staticClass:"fas fa-shipping-fast text-gris cursor-menu",attrs:{title:"Se remite","data-toggle":"tooltip"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.examen.condiciones_preanaliticas,expression:"detalle.examen.condiciones_preanaliticas"}],staticClass:"fas fa-exclamation-circle fa-sm",staticStyle:{"padding-left":"4px"},attrs:{"data-toggle":"popover","data-html":"true","data-placement":"top",title:"Condiciones preanalíticas","data-content":e.tituloCondicionesPreanaliticas(a.examen)}}),e._v(" "),t("i",{staticClass:"fas fa-vial fa-xs puntero",staticStyle:{"padding-left":"4px"},attrs:{"data-toggle":"tooltip","data-placement":"top",title:a.muestraPendiente?"Muestra pendiente":"Muestra recibida"},on:{click:e.abrirModalMuestras}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.muestraPendiente,expression:"detalle.muestraPendiente"}],staticClass:"fas fa-times fa-sm icon-stack-2x text-danger",attrs:{"data-toggle":"tooltip",title:"Muestra pendiente"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!a.muestraPendiente,expression:"!detalle.muestraPendiente"}],staticClass:"fas fa-check fa-sm icon-stack-2x text-gris",attrs:{"data-toggle":"tooltip",title:"Muestra recibida"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.muestraPendiente&&a.muestras.length>1,expression:"!detalle.muestraPendiente && detalle.muestras.length>1"}],staticClass:"icon-stack-2x",staticStyle:{"padding-left":"1px","font-size":"0.8em"}},[e._v("\n                        "+e._s(a.muestras.length)+"\n                      ")]),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.id&&a.descargado_sistema_externo,expression:"detalle.id && detalle.descargado_sistema_externo"}],staticClass:"fas fa-download",attrs:{title:"Examen descargado de sistema externo","data-toggle":"tooltip"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.id&&a.enviado_sistema_externo,expression:"detalle.id && detalle.enviado_sistema_externo"}],staticClass:"fas fa-upload",attrs:{title:"Resultado enviado a sistema externo","data-toggle":"tooltip"}})]),e._v(" "),t("td",{staticClass:"text-right"},[e.cambio_precio&&!e.tieneFacturaEmitida?t("input",{directives:[{name:"model",rawName:"v-model",value:a.valor,expression:"detalle.valor"}],staticClass:"form-control input-sm currency text-right",attrs:{type:"number",min:"0",step:"0.01",disabled:!e.cambio_precio||e.tieneFacturaEmitida},domProps:{value:a.valor},on:{keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.valorDetalleKeyTab(a)}],keyup:function(t){return e.validarValor(a)},blur:function(t){return e.formatearValorDetalle(a)},input:function(t){t.target.composing||e.$set(a,"valor",t.target.value)}}}):e._e(),e._v(" "),!e.cambio_precio||e.tieneFacturaEmitida?[e._v("\n                        "+e._s(a.valor)+"\n                      ")]:e._e()],2),e._v(" "),t("td",{staticClass:"text-center centrado-vertical"},[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Eliminar examen",disabled:"G"!==a.estado||e.tieneFacturaEmitida||e.cargandoEliminarExamen===a.id},on:{click:function(t){return e.eliminarDetalle(a)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoEliminarExamen!==a.id,expression:"cargandoEliminarExamen !== detalle.id"}],staticClass:"fas fa-trash fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoEliminarExamen===a.id,expression:"cargandoEliminarExamen === detalle.id"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}})])])])])})),0)])])]),e._v(" "),e.cargandoExamenes?e._e():t("div",{staticClass:"form-horizontal col-md-3",attrs:{id:"totales"}},[t("div",{staticClass:"hidden-md hidden-lg",staticStyle:{"margin-top":"15px"}},[t("legend",{staticClass:"legend"},[e._v("\n                  Totales\n                  "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrdenes.length>0,expression:"detallesOrdenes.length > 0"}],staticClass:"badge pull-right"},[e._v("\n                    "+e._s(e.detallesOrdenes.length)+"\n                    "+e._s(e.etiquetaSeleccionados)+"\n                  ")])])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-xs-6 col-sm-6 col-md-6 control-label",staticStyle:{"text-align":"left"},attrs:{for:"valor_subtotal"}},[e._v("Subtotal")]),e._v(" "),t("div",{staticClass:"col-xs-6 col-sm-6 col-md-6 text-right",attrs:{id:"valor_subtotal"}},[e._v("\n                  "+e._s(e.$cliente.moneda)+e._s(e.valorSubtotal.toFixed(2))+"\n                ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-xs-6 col-sm-6 col-md-6 control-label",staticStyle:{"text-align":"left"},attrs:{for:"porcentaje_descuento"}},[e._v("\n                  % Descuento\n                ")]),e._v(" "),t("div",{staticClass:"col-md-6 text-right"},[!e.tieneFacturaEmitida&&e.permisos.generarDescuentoPorEmpresa?t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.porcentaje_descuento,expression:"porcentaje_descuento",modifiers:{number:!0}}],staticClass:"form-control input-sm text-right",attrs:{id:"porcentaje_descuento",type:"number",step:"0.01",min:"0",max:"100",disabled:0===e.detallesOrdenes.length},domProps:{value:e.porcentaje_descuento},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("valor_descuento"))},keyup:e.porcentajeDescuentoKeyup,blur:[e.formatearPorcentajeDescuento,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(e.porcentaje_descuento=e._n(t.target.value))}}}):[e._v("\n                    "+e._s(e.porcentaje_descuento)+"\n                  ")]],2)]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-xs-6 col-sm-6 col-md-6 control-label",staticStyle:{"text-align":"left"},attrs:{for:"valor_descuento"}},[e._v("Descuento")]),e._v(" "),t("div",{staticClass:"col-md-6 text-right"},[!e.tieneFacturaEmitida&&e.permisos.generarDescuentoPorEmpresa?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.valor_descuento,expression:"registro.valor_descuento"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"valor_descuento",type:"number",step:"0.01",min:"0",disabled:0===e.detallesOrdenes.length},domProps:{value:e.registro.valor_descuento},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("porcentaje_recargo"))},keyup:e.valorDescuentoKeyup,blur:e.formatearValorDescuento,input:function(t){t.target.composing||e.$set(e.registro,"valor_descuento",t.target.value)}}}):[e._v("\n                    "+e._s(e.$cliente.moneda)+e._s(e.valorDescuento)+"\n                  ")]],2)]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-xs-6 col-sm-6 col-md-6 control-label",staticStyle:{"text-align":"left"},attrs:{for:"porcentaje_recargo"}},[e._v("\n                  % Recargo\n                ")]),e._v(" "),t("div",{staticClass:"col-md-6 text-right"},[e.tieneFacturaEmitida?[e._v("\n                    "+e._s(e.porcentajeRecargo)+"\n                  ")]:t("input",{directives:[{name:"model",rawName:"v-model",value:e.porcentajeRecargo,expression:"porcentajeRecargo"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"porcentaje_recargo",type:"number",step:"0.01",min:"0",disabled:0===e.detallesOrdenes.length},domProps:{value:e.porcentajeRecargo},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("valor_recargo"))},keyup:e.porcentajeRecargoKeyup,blur:e.formatearPorcentajeRecargo,input:function(t){t.target.composing||(e.porcentajeRecargo=t.target.value)}}})],2)]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-xs-6 col-sm-6 col-md-6 control-label",staticStyle:{"text-align":"left"},attrs:{for:"valor_recargo"}},[e._v("\n                  Recargo\n                ")]),e._v(" "),t("div",{staticClass:"col-md-6 text-right"},[e.tieneFacturaEmitida?[e._v("\n                    "+e._s(e.$cliente.moneda)+e._s(e.valorRecargo)+"\n                  ")]:t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.valor_recargo,expression:"registro.valor_recargo"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"valor_recargo",type:"number",step:"0.01",min:"0",disabled:0===e.detallesOrdenes.length},domProps:{value:e.registro.valor_recargo},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("valor_domicilio"))},keyup:e.valorRecargoKeyup,blur:e.formatearValorRecargo,input:function(t){t.target.composing||e.$set(e.registro,"valor_recargo",t.target.value)}}})],2)]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-xs-6 col-sm-6 col-md-6 control-label",staticStyle:{"text-align":"left"},attrs:{for:"valor_domicilio"}},[e._v("Domicilio")]),e._v(" "),t("div",{staticClass:"col-md-6 text-right"},[e.tieneFacturaEmitida?[e._v("\n                    "+e._s(e.$cliente.moneda)+e._s(e.valorDomicilio)+"\n                  ")]:t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.valor_domicilio,expression:"registro.valor_domicilio"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"valor_domicilio",type:"number",step:"0.01",min:"0",disabled:0===e.detallesOrdenes.length},domProps:{value:e.registro.valor_domicilio},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("abono"))},keyup:e.valorDomicilioKeyup,blur:e.formatearValorDomicilio,input:function(t){t.target.composing||e.$set(e.registro,"valor_domicilio",t.target.value)}}})],2)]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"col-xs-5 col-sm-5 col-md-5 control-label",staticStyle:{"text-align":"left"},attrs:{for:"valor_total"}},[e._v("\n                  Valor total\n                ")]),e._v(" "),t("div",{staticClass:"col-xs-7 col-md-7 text-right valor-total",attrs:{id:"valor_total"}},[e._v("\n                  "+e._s(e._f("moneda")(e.valorTotalCalculado))+"\n                ")])]),e._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"col-md-12 control-label no-padding",staticStyle:{"text-align":"left"},attrs:{for:"abono",title:e.$options.filters.formaPago(e.abono.forma_pago)}},[t("span",{staticClass:"pull-left",staticStyle:{"margin-right":"2px"}},[e._v("\n                      Abono\n                    ")]),e._v(" "),"0"===e.id&&e.permisos.crearAbonos?t("button",{staticClass:"btn btn-default btn-xs pull-left",staticStyle:{"margin-right":"2px"},attrs:{disabled:!e.abono.valor,type:"button"},on:{click:e.abrirModalCrearAbono}},[t("i",{staticClass:"fa fa-plus"})]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"0"===e.id&&e.permisos.crearAbonos,expression:"id === '0' && permisos.crearAbonos"}],staticClass:"dropup pull-left"},[t("button",{staticClass:"btn btn-default btn-xs dropdown-toggle",attrs:{disabled:!e.abono.valor,type:"button","data-toggle":"dropdown"}},[e._v("\n                        "+e._s(e.abono.forma_pago)+"\n                        "),t("span",{staticClass:"caret"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu dropdown-menu-right"},e._l(e.formasPago,(function(a){return t("li",[t("a",{on:{click:function(t){return e.seleccionarFormaPagoAbono(a)}}},[e._v(e._s(e._f("formaPago")(a)))])])})),0)])])]),e._v(" "),t("div",{staticClass:"col-md-6 text-right"},["0"===e.id?t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Abonar todo",disabled:0===e.detallesOrdenes.length||e.saldoCalculado<=0||!e.$can("crear-abonos")},on:{click:e.abonarTodo}},[t("i",{staticClass:"fas fa-arrow-circle-down fa-fw"})])]),e._v(" "),"0"===e.id?t("input",{directives:[{name:"model",rawName:"v-model",value:e.abono.valor,expression:"abono.valor"}],staticClass:"form-control input-sm currency text-right",attrs:{id:"abono",type:"number",step:"0.01",min:"0",disabled:"0"!==e.id||!e.permisos.crearAbonos||0===e.detallesOrdenes.length},domProps:{value:e.abono.valor},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},keyup:e.validarAbono,blur:e.abonoKeyTab,input:function(t){t.target.composing||e.$set(e.abono,"valor",t.target.value)}}}):e._e()]):e._e(),e._v(" "),"0"!==e.id?t("div",{staticClass:"text-right"},[e._v(e._s(e.$cliente.moneda)+e._s(e.abono.valor))]):e._e()])]),e._v(" "),t("div",{staticClass:"form-group"},[e._m(2),e._v(" "),t("div",{staticClass:"col-xs-7 col-md-7"},[t("div",{staticClass:"text-right valor-total",attrs:{id:"saldo"}},[e._v(e._s(e.$cliente.moneda)+e._s(e.saldoCalculado)+"\n                  ")])])])]),e._v(" "),e.cargandoExamenes?t("div",{staticClass:"col-md-12",attrs:{id:"cargandoExamenes"}},[e._m(3)]):e._e()]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.errorEnTarifas,expression:"errorEnTarifas"}],staticClass:"row"},[e._m(4),e._v(" "),t("div",{staticClass:"col-md-6",staticStyle:{"padding-top":"10px"}},[t("div",{staticStyle:{height:"300px",overflow:"auto"}},[0===e.examenesSinTarifa.length?t("div",[e._v("\n                  No existen registros\n                ")]):e._e(),e._v(" "),t("ul",e._l(e.examenesSinTarifa,(function(a){return t("li",[e._v(" "+e._s(a.examen.codigo)+" - "+e._s(a.examen.nombre)+"\n                  ")])})),0)])])])]),e._v(" "),t("hr",{directives:[{name:"show",rawName:"v-show",value:e.examenes.length>0||e.cargandoExamenes,expression:"examenes.length > 0 || cargandoExamenes"}]})]),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"datosAdicionales"}},[t("fieldset",{attrs:{disabled:""}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_paciente_id"}},[e._v("\n                Tipo\n                "+e._s(e.esObjeto?"objeto":"paciente")+"\n              ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tipo_paciente_id,expression:"registro.tipo_paciente_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_paciente_id",name:"tipo_paciente_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tipo_paciente_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.tiposPacientes,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"plan_salud_id"}},[e._v("Plan salud")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.plan_salud_id,expression:"registro.plan_salud_id"}],staticClass:"form-control input-sm",attrs:{id:"plan_salud_id",name:"plan_salud_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"plan_salud_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.planesSalud,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sala"}},[e._v("Sala")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.numero_sala,expression:"registro.numero_sala"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"sala",maxlength:"6"},domProps:{value:e.registro.numero_sala},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"numero_sala",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"cama"}},[e._v("Cama")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.cama,expression:"registro.cama"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"cama",maxlength:"8"},domProps:{value:e.registro.cama},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"cama",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_pedido"}},[e._v("Número pedido")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.numero_pedido,expression:"registro.numero_pedido"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"numero_pedido",maxlength:"30"},domProps:{value:e.registro.numero_pedido},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"numero_pedido",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"laboratorio_id"}},[e._v("Laboratorio remisión")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.laboratorio_id,expression:"registro.laboratorio_id"}],staticClass:"form-control input-sm",attrs:{id:"laboratorio_id",name:"laboratorio_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"laboratorio_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.laboratorios,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"diagnostico_concepto"}},[e._v("Diagnóstico")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.diagnostico_concepto,expression:"registro.diagnostico_concepto"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"diagnostico_concepto",maxlength:"100",autocomplete:"off",placeholder:"Concepto"},domProps:{value:e.registro.diagnostico_concepto},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.autocompletarDiagnostico.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.autocompletarDiagnostico.apply(null,arguments))}],blur:e.verificarDiagnostico,input:function(t){t.target.composing||e.$set(e.registro,"diagnostico_concepto",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarDiagnostico}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"fecha_entrega_estimada"}},[e._v("Fecha entrega")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha_entrega_estimada,expression:"registro.fecha_entrega_estimada"}],staticClass:"form-control input-sm",attrs:{id:"fecha_entrega_estimada","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es",placeholder:"aaaa-mm-dd"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}}),e._v(" "),e._m(5)])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"fecha_procesamiento"}},[e._v("Fecha procesamiento")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha_procesamiento,expression:"registro.fecha_procesamiento"}],staticClass:"form-control input-sm",attrs:{id:"fecha_procesamiento","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es",placeholder:"aaaa-mm-dd"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}}),e._v(" "),e._m(6)])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Temperatura")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.temperatura,expression:"registro.temperatura"}],staticClass:"form-control input-sm",attrs:{type:"number",step:"0.01",min:"30",max:"50",maxlength:"6"},domProps:{value:e.registro.temperatura},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"temperatura",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Grupo")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.grupo,expression:"registro.grupo"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"50"},domProps:{value:e.registro.grupo},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"grupo",t.target.value)}}})])])])]),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"variablesEpidemilogicas"}},[t("fieldset",{attrs:{disabled:""}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.cumple_definicion_caso,expression:"variablesEpidemiologicas.cumple_definicion_caso"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.variablesEpidemiologicas.cumple_definicion_caso)?e._i(e.variablesEpidemiologicas.cumple_definicion_caso,"")>-1:e.variablesEpidemiologicas.cumple_definicion_caso},on:{change:[function(t){var a=e.variablesEpidemiologicas.cumple_definicion_caso,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.variablesEpidemiologicas,"cumple_definicion_caso",a.concat([""])):i>-1&&e.$set(e.variablesEpidemiologicas,"cumple_definicion_caso",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.variablesEpidemiologicas,"cumple_definicion_caso",o)},e.cambioCumpleDefinicionCaso]}}),e._v("\n                  Cumple definición de caso\n                ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n                Diagnóstico\n                "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoDiagnosticoEpi,expression:"cargandoDiagnosticoEpi"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{title:"Cargando"}})]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.diagnostico_concepto,expression:"variablesEpidemiologicas.diagnostico_concepto"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"255",autocomplete:"off",placeholder:"Concepto"},domProps:{value:e.variablesEpidemiologicas.diagnostico_concepto},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.autocompletarDiagnosticoEpidemiologico.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.autocompletarDiagnosticoEpidemiologico.apply(null,arguments))}],blur:e.verificarDiagnosticoEpidemiologico,input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"diagnostico_concepto",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarDiagnosticoEpidemiologico}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label no-salto-linea"},[e._v("Fecha inicio síntomas")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.variablesEpidemiologicas.fecha_inicio_sintomas,expression:"variablesEpidemiologicas.fecha_inicio_sintomas"}],staticClass:"form-control input-sm cursor-menu",attrs:{autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-end-date":"0d",placeholder:"aaaa-mm-dd"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group margen-superior-boton"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.epi_1,expression:"variablesEpidemiologicas.epi_1"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.variablesEpidemiologicas.epi_1)?e._i(e.variablesEpidemiologicas.epi_1,null)>-1:e.variablesEpidemiologicas.epi_1},on:{change:function(t){var a=e.variablesEpidemiologicas.epi_1,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.variablesEpidemiologicas,"epi_1",a.concat([null])):i>-1&&e.$set(e.variablesEpidemiologicas,"epi_1",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.variablesEpidemiologicas,"epi_1",o)}}}),e._v("\n                  EPI 1\n                ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Comorbilidad (Enfermedades preexistentes)")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.comorbilidad,expression:"variablesEpidemiologicas.comorbilidad"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",maxlength:"200"},domProps:{value:e.variablesEpidemiologicas.comorbilidad},on:{input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"comorbilidad",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Lugar o antecedente probable de infección")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.antecedente_infeccion,expression:"variablesEpidemiologicas.antecedente_infeccion"}],staticClass:"form-control input-sm",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.variablesEpidemiologicas,"antecedente_infeccion",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.antecedentesInfeccion,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Antecedente de viaje")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.antecedente_viaje,expression:"variablesEpidemiologicas.antecedente_viaje"}],staticClass:"form-control input-sm",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.variablesEpidemiologicas,"antecedente_viaje",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"DENTRO_PAIS"}},[e._v("Dentro del país")]),e._v(" "),t("option",{attrs:{value:"FUERA_PAIS"}},[e._v("Fuera del país")])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha viaje")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.variablesEpidemiologicas.fecha_viaje,expression:"variablesEpidemiologicas.fecha_viaje"}],staticClass:"form-control input-sm cursor-menu",attrs:{autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-end-date":"0d",placeholder:"aaaa-mm-dd"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})]),e._v(" "),t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label"},[e._v("Lugar de viaje")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.lugar_viaje,expression:"variablesEpidemiologicas.lugar_viaje"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"100"},domProps:{value:e.variablesEpidemiologicas.lugar_viaje},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"lugar_viaje",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Unidad de salud que notifica")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.unidad_salud_notifica,expression:"variablesEpidemiologicas.unidad_salud_notifica"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"150"},domProps:{value:e.variablesEpidemiologicas.unidad_salud_notifica},on:{change:e.cambiarUnidadSaludNotifica,keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"unidad_salud_notifica",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Semana epidemiológica")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.semana_epidemiologica,expression:"variablesEpidemiologicas.semana_epidemiologica"}],staticClass:"form-control input-sm",attrs:{type:"number",step:"1",min:"0",maxlength:"6"},domProps:{value:e.variablesEpidemiologicas.semana_epidemiologica},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"semana_epidemiologica",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("ubicacion-geografica-ec",{key:"ug-"+e.key,attrs:{provincias:e.ubicacionesNivel2,"provincia-id":e.registroAuxiliar.provinciaId,"canton-id":e.registroAuxiliar.cantonId,"parroquia-id":e.variablesEpidemiologicas.unidad_salud_parroquia_id,cookie:"epi"},on:{"update:provinciaId":function(t){return e.$set(e.registroAuxiliar,"provinciaId",t)},"update:provincia-id":function(t){return e.$set(e.registroAuxiliar,"provinciaId",t)},"provincia-id-actualizada":e.provinciaIdEpiActualizada,"canton-id-actualizado":e.cantonIdEpiActualizado},model:{value:e.variablesEpidemiologicas.unidad_salud_parroquia_id,callback:function(t){e.$set(e.variablesEpidemiologicas,"unidad_salud_parroquia_id",t)},expression:"variablesEpidemiologicas.unidad_salud_parroquia_id"}})],1)])])])],1),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalGuardar",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(7),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[e._v("\n              "+e._s(e.mensajeGuardar)+"\n            ")])])]),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit","data-dismiss":"modal"},on:{click:function(t){return e.guardar(!1)}}},[e._v("\n            Guardar de todos modos\n          ")])])])])]),e._v(" "),t("gestionar-paciente-modal",{attrs:{"id-sistema-externo":"0"===e.id?e.$usuario.sistemaHisId:e.registro.sistema_externo_id?e.registro.sistema_externo_id:e.$usuario.sistemaHisId},on:{"paciente-humano-guardado":e.pacienteHumanoGuardado,"paciente-animal-guardado":e.pacienteAnimalGuardado,"sujeto-objeto-guardado":e.sujetoObjetoGuardado}}),e._v(" "),t("buscar-paciente-modal",{on:{"paciente-seleccionado":e.pacienteSeleccionado}}),e._v(" "),t("gestionar-medico-modal",{on:{"medico-creado":e.medicoCreado}}),e._v(" "),t("buscar-medico-modal",{on:{"medico-seleccionado":e.medicoSeleccionado}}),e._v(" "),t("gestionar-flebotomista-modal",{on:{"flebotomista-creado":e.flebotomistaCreado}}),e._v(" "),t("buscar-flebotomista-modal",{on:{"flebotomista-seleccionado":e.flebotomistaSeleccionado}}),e._v(" "),t("clientes-generador-ordenes-modal",{attrs:{datos:e.datosGeneradorOrdenes},on:{"update:datos":function(t){e.datosGeneradorOrdenes=t}}}),e._v(" "),t("clientes-jm-factura-orden-modal",{attrs:{datos:e.datosJM},on:{"update:datos":function(t){e.datosJM=t}}}),e._v(" "),t("clientes-buscar-diagnostico-modal",{attrs:{id:"buscarDiagnostico"},on:{"diagnostico-seleccionado":e.diagnosticoSeleccionado}}),e._v(" "),t("clientes-buscar-diagnostico-modal",{attrs:{id:"buscarDiagnosticoEpidemiologico"},on:{"diagnostico-seleccionado":e.diagnosticoEpidemiologicoSeleccionado}}),e._v(" "),t("ver-auditorias-modal",{attrs:{"orden-id":e.id,tipo:"ordenes"}}),e._v(" "),t("imprimir-modal",{attrs:{"url-api-local":e.printServer.urlApiLocal},on:{"documento-impreso":e.documentoImpreso}}),e._v(" "),t("hora-modal",{attrs:{id:"horaFechaOrdenModal",hora:e.registro.hora_orden},on:{"hora-seleccionada":e.horaFechaOrdenSeleccionada}}),e._v(" "),t("hora-modal",{attrs:{id:"horaFechaProcesamientoModal",hora:e.horaProcesamiento},on:{"hora-seleccionada":e.horaFechaProcesamientoSeleccionada}}),e._v(" "),t("hora-modal",{attrs:{id:"horaFechaEntregaModal",hora:e.horaEntrega},on:{"hora-seleccionada":e.horaFechaEntregaSeleccionada}}),e._v(" "),t("abonos-formulario-modal",{attrs:{"sistema-factura":e.facturas.sistema,configs:e.facturas.configs},on:{"abono-creado":e.abonoCreado}}),e._v(" "),t("muestras-modal",{attrs:{"detalles-orden":e.detallesOrdenes,"ver-muestra":"0"!==e.id,flebotomistas:e.flebotomistas,"flebotomista-id":e.registroAuxiliar.flebotomistaId},on:{"muestras-guardadas":e.muestrasGuardadas}}),e._v(" "),t("configs-modal",{attrs:{"print-server":e.printServer}}),e._v(" "),t("ver-cobertura-msp-modal",{attrs:{"identificacion-paciente":e.registro.paciente_identificacion,"fecha-nacimiento":e.registro.paciente_fecha_nacimiento,"fecha-orden":e.registro.fecha_orden}}),e._v(" "),t("ver-medico-modal",{attrs:{"medico-id":e.registro.medico_id}}),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("li",{staticClass:"active"},[e("a",{attrs:{"data-toggle":"tab",href:"#datosGenerales"}},[this._v("Datos generales")])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaFechaOrdenModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"col-xs-5 col-md-5"},[e("label",{staticClass:"control-label text-left",attrs:{for:"saldo"}},[this._v("Saldo")])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-body text-center"},[e("h4",[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n                ")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-12"},[e("legend",[this._v("\n                Exámenes sin tarifa\n              ")])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaFechaEntregaModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaFechaProcesamientoModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Guardar orden")])])}],!1,null,"2d99ce70",null).exports},9668:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{cotizaciones:[],pedidos:[]}},mounted:function(){var e=this;$("#generadorOrdenes").on("hide.bs.modal",(function(t){"generadorOrdenes"===t.target.id&&e.borrarFormulario()})),$("#generadorOrdenes").on("show.bs.modal",(function(t){e.cotizaciones=e.datos.cotizaciones,e.pedidos=e.datos.pedidos}))},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},borrarFormulario:function(){this.datos.pedidos=[],this.pedidos=[],this.datos.cotizaciones=[],this.cotizaciones=[]},crearOrdenDesdeCotizacion:function(e){window.location.href="/ordenes/create?cotizacionId="+e.id},crearOrdenDesdePedido:function(e){window.location.href="/ordenes/create?pedidoId="+e.id},cerrar:function(){this.borrarFormulario()}},computed:{}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"generadorOrdenes",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(t){return e.cerrar()}}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),e.cotizaciones.length>0?t("h4",{staticClass:"modal-title"},[e._v("Cotizaciones Disponibles")]):e._e(),e._v(" "),0===e.cotizaciones.length?t("h4",{staticClass:"modal-title"},[e._v("Pedidos Disponibles")]):e._e()]),e._v(" "),t("div",{staticClass:"modal-body"},[e.cotizaciones.length>0?t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.cotizaciones,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.id))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.created_at)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.fecha_turno,"YYYY-MM-DD")))]),e._v(" "),t("td",{staticClass:"text-left"},[t("div",[t("small",[e._v("\n                      "+e._s(a.paciente.numero_identificacion)+"\n                    ")])]),e._v("\n                  "+e._s(a.paciente.nombre_paciente)+"\n                ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.$cliente.moneda)+e._s(a.valor_total.toFixed(2)))]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Generar Orden"},on:{click:function(t){return e.crearOrdenDesdeCotizacion(a)}}},[t("i",{staticClass:"fas fa-file-medical-alt fa-fw"})])])])])]}))],2)])]):e._e(),e._v(" "),e.cotizaciones.length>0&&e.pedidos.length>0?t("legend",[e._v("Pedidos Disponibles")]):e._e(),e._v(" "),e.pedidos.length>0?t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[e._l(e.pedidos,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.id))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.created_at)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.fecha_cita))]),e._v(" "),t("td",{staticClass:"text-left"},[t("div",[t("small",[e._v("\n                      "+e._s(a.paciente.numero_identificacion)+"\n                    ")])]),e._v("\n                  "+e._s(a.paciente.nombre_paciente)+"\n                ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Generar Orden"},on:{click:function(t){return e.crearOrdenDesdePedido(a)}}},[t("i",{staticClass:"fas fa-file-medical-alt fa-fw"})])])])])]}))],2)])]):e._e()])])])])}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha Creación")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha Turno")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha Creación")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha Cita")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])}],!1,null,null,null).exports},3128:(e,t,a)=>{"use strict";a.d(t,{Z:()=>Q});var r=a(4590),o=a(7974);const i={props:{orden:{type:Object,required:!0},configuraciones:{type:Object,required:!0},tamano:{type:String,default:"sm"},sistemasExternos:{type:Array,default:function(){return[]}}},methods:{abrirEditarOrden:function(e){var t=this.queryParams?"?".concat(this.queryParams):"";window.location.href="/ordenes/".concat(e.id,"/edit").concat(t)},abrirReportarOrden:function(e){var t=this.queryParams?"?".concat(this.queryParams):"";"1"===this.configuraciones.moduloResultadosOrdenes?window.location.href="/reportes/".concat(e.numero_orden).concat(t):window.location.href="/reportes2/".concat(e.numero_orden).concat(t)},abrirFacturarOrden:function(e){var t=this.queryParams?"&".concat(this.queryParams):"";window.location.href="/facturas/create?ordenId=".concat(e.id).concat(t)},abrirEntregarFisicamenteOrden:function(e){var t=this.queryParams?"?".concat(this.queryParams):"";window.location.href="entregas/".concat(e.id,"/edit").concat(t)},tituloWhatsApp:function(e){return e.entrega_deshabilitada?e.tiene_resultados_validados?e.subempresa.empresa.mostrar_ordenes_impagas||0===e.saldo?"":"Tiene saldo pendiente":"":"Entregar por WhatsApp"},tituloCorreo:function(e){return e.entrega_deshabilitada?e.tiene_resultados_validados?e.subempresa.empresa.mostrar_ordenes_impagas||0===e.saldo?"":"Tiene saldo pendiente":"":"Entregar por correo electrónico"},abrirModalGestionarImpresion:function(){var e=(0,o.MD)({orden:this.orden});$("#modalGestionarImpresion").modal({backdrop:"static"},e)},abrirModalImprimir:function(e){var t={registro:this.orden,tipoDocumento:e,tamanoPapel:this.configuraciones.tamanoPapelReporte};$("#modalImprimir").modal({backdrop:"static"},t)},abrirModalMuestras:function(e){this.$emit("abrir-modal-muestras",e)},abrirModalBuscarDocumentos:function(e){this.$emit("abrir-modal-buscar-documentos",e)},abrirModalAuditorias:function(e){this.$emit("abrir-modal-auditorias",e)},abrirModalResultados:function(e){this.$emit("abrir-modal-resultados",e)},abrirModalEntregarResultadosCorreo:function(e){if(e.paciente.correo){var t={orden:e,"forma-entrega":"CORREO",destinatario:e.paciente.correo},a=(0,o.MD)(t);$("#entregarResultadosModal").modal({backdrop:"static",keyboard:!1},a)}else this.$emit("error","El paciente no tiene correo registrado")},abrirModalEntregarResultadosPaciente:function(e){if(e.paciente.telefono_celular){var t={orden:e,"forma-entrega":"WHATSAPP",destinatario:e.paciente.telefono_celular},a=(0,o.MD)(t);$("#entregarResultadosModal").modal({backdrop:"static",keyboard:!1},a)}else this.$emit("error","El paciente no tiene teléfono celular registrado")},abrirModalEntregarResultadosMedico:function(e){if(_.get(e.medico,"telefono_celular")){var t={orden:e,"forma-entrega":"WHATSAPP",destinatario:e.medico.telefono_celular,"es-medico":!0},a=(0,o.MD)(t);$("#entregarResultadosModal").modal({backdrop:"static",keyboard:!1},a)}else this.$emit("error","El médico no tiene teléfono celular registrado")}},computed:{claseBoton:function(){return{"btn-sm":"sm"===this.tamano}},queryParams:function(){return this.$usuario.sucursalId!==this.orden.sucursal_id?"sucursalId=".concat(this.orden.sucursal_id):""}}};var s=a(1900);const n=(0,s.Z)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"btn-group fa-personalizado",attrs:{role:"group","aria-label":"..."}},["N"===e.orden.estado&&e.$can("ver-ordenes")?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",title:"Ver",rel:"tooltip"},on:{click:function(t){return e.abrirEditarOrden(e.orden)}}},[t("i",{staticClass:"fas fa-eye fa-fw"})]):e.$can("editar-ordenes")?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",title:"Editar",rel:"tooltip"},on:{click:function(t){return e.abrirEditarOrden(e.orden)}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]):e._e(),e._v(" "),"N"!==e.orden.estado&&e.$can("ver-reportes")?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",title:"N"!==e.orden.estado&&e.$can("ver-reportes")?"Reportar y validar resultados":"",rel:"tooltip"},on:{click:function(t){return e.abrirReportarOrden(e.orden)}}},[t("i",{staticClass:"fas fa-tasks fa-fw"})]):e._e(),e._v(" "),"N"!==e.orden.estado&&e.$can("crear-abonos")?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button","data-toggle":"modal",rel:"tooltip",title:"N"!==e.orden.estado&&e.$can("crear-abonos")?"Abonar":"","data-backdrop":"static","data-orden-id":e.orden.id,"data-factura-id":e.orden.facturas.length>0?e.orden.facturas[0].id:"","data-target":"#modalRegistrarAbono"}},[t("i",{staticClass:"fas fa-donate fa-fw"})]):e._e(),e._v(" "),"N"!==e.orden.estado&&e.$can("crear-facturas")?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",rel:"tooltip",title:e.orden.facturar_deshabilitado?"":"Facturar",disabled:e.orden.facturar_deshabilitado},on:{click:function(t){return e.abrirFacturarOrden(e.orden)}}},[t("i",{staticClass:"fas fa-file-invoice fa-fw"})]):e._e(),e._v(" "),"N"!==e.orden.estado&&e.$can("entregar-ordenes")?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",title:"N"!==e.orden.estado&&e.$can("entregar-ordenes")?"Entregar físicamente":"",rel:"tooltip"},on:{click:function(t){return e.abrirEntregarFisicamenteOrden(e.orden)}}},[t("i",{staticClass:"fas fa-clipboard-check fa-fw"})]):e._e(),e._v(" "),"N"!==e.orden.estado?t("button",{staticClass:"btn btn-default",class:{"btn-sm":"sm"===e.tamano},attrs:{type:"button",rel:"tooltip",title:e.tituloCorreo(e.orden),"data-html":"true",disabled:e.orden.entrega_deshabilitada},on:{click:function(t){return e.abrirModalEntregarResultadosCorreo(e.orden)}}},[t("i",{staticClass:"far fa-envelope fa-fw"})]):e._e(),e._v(" "),t("div",{staticClass:"btn-group"},["N"!==e.orden.estado?t("button",{staticClass:"btn btn-default dropdown-toggle",class:{"btn-sm":"sm"===e.tamano},attrs:{type:"button",rel:"tooltip",title:e.tituloWhatsApp(e.orden),"data-html":"true","data-toggle":"dropdown",disabled:e.orden.entrega_deshabilitada}},[t("i",{staticClass:"fab fa-whatsapp fa-fw"})]):e._e(),e._v(" "),t("ul",{staticClass:"dropdown-menu dropdown-menu-right"},[t("li",[t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirModalEntregarResultadosPaciente(e.orden)}}},[t("i",{staticClass:"fas fa-user fa-fw"}),e._v("  Entregar a paciente\n        ")])]),e._v(" "),t("li",[e.orden.medico&&e.orden.medico.telefono_celular?t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirModalEntregarResultadosMedico(e.orden)}}},[t("i",{staticClass:"fas fa-user-md fa-fw"}),e._v(" Entregar a médico\n        ")]):e._e()])])]),e._v(" "),t("div",{staticClass:"btn-group"},[t("button",{staticClass:"btn btn-default dropdown-toggle",class:e.claseBoton,attrs:{type:"button","data-toggle":"dropdown",rel:"tooltip",title:"Más opciones","aria-haspopup":"true"}},[t("i",{staticClass:"fas fa-ellipsis-v fa-fw"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu dropdown-menu-right"},["N"!==e.orden.estado&&(e.$can("crear-ordenes")||e.$can("editar-ordenes"))?t("li",[t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirModalImprimir("etiquetas")}}},[t("i",{staticClass:"fas fa-barcode fa-fw text-gris"}),e._v("  Imprimir etiquetas\n        ")])]):e._e(),e._v(" "),"N"!==e.orden.estado?t("li",[t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirModalImprimir("recibo")}}},[t("i",{staticClass:"fas fa-receipt fa-fw text-gris"}),e._v("  Imprimir recibo\n        ")])]):e._e(),e._v(" "),"N"!==e.orden.estado?[t("li",{staticClass:"divider",attrs:{role:"separator"}}),e._v(" "),t("li",[t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirModalBuscarDocumentos(e.orden)}}},[t("i",{staticClass:"fas fa-file fa-fw text-gris"}),e._v("  Documentos\n          ")])])]:e._e(),e._v(" "),"N"!==e.orden.estado?[t("li",{staticClass:"divider",attrs:{role:"separator"}}),e._v(" "),t("li",[t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirModalMuestras(e.orden.id)}}},[t("i",{staticClass:"fas fa-vial fa-fw text-gris"}),e._v("  Muestras\n          ")])])]:e._e(),e._v(" "),("N"!==e.orden.estado||e.$can("imprimir-reportes"))&&e.orden.tiene_resultados_reportados?[t("li",{staticClass:"divider",attrs:{role:"separator"}}),e._v(" "),t("li",[t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirModalImprimir("resultados")}}},[t("i",{staticClass:"fas fa-print fa-fw text-gris"}),e._v("  Imprimir resultados\n          ")])]),e._v(" "),"R"===e.orden.estado||"P"===e.orden.estado||"V"===e.orden.estado||"L"===e.orden.estado?t("li",[t("a",{staticClass:"puntero",attrs:{id:"verResultados"},on:{click:function(t){return e.abrirModalResultados(e.orden)}}},[t("i",{staticClass:"fas fa-eye fa-fw text-gris"}),e._v(" \n            Ver resultados\n          ")])]):e._e(),e._v(" "),e.orden.tiene_resultados_validados?t("li",[t("a",{staticClass:"puntero",on:{click:e.abrirModalGestionarImpresion}},[t("i",{staticClass:"fas fa-print fa-fw text-gris"}),e._v(" "),t("i",{staticClass:"fa fa-check fa-fw text-gris",staticStyle:{"font-size":"0.6em","vertical-align":"top",position:"absolute",left:"34px"}}),e._v(" \n            Registrar impresión\n          ")])]):e._e()]:e._e(),e._v(" "),e.$can("eliminar-ordenes")&&"N"!==e.orden.estado?t("li",{staticClass:"divider",attrs:{role:"separator"}}):e._e(),e._v(" "),t("li",[t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirModalAuditorias(e.orden)}}},[t("i",{staticClass:"fas fa-fingerprint"}),e._v(" \n          Auditoría\n        ")])]),e._v(" "),e.$can("eliminar-ordenes")&&"N"!==e.orden.estado?t("li",{staticClass:"divider",attrs:{role:"separator"}}):e._e(),e._v(" "),t("li",[e.$can("eliminar-ordenes")||"N"===e.orden.estado?t("a",{staticClass:"puntero",attrs:{"data-toggle":"modal","data-backdrop":"static","data-orden-id":e.orden.id,"data-target":"#anularOrden"}},[t("i",{staticClass:"fas fa-trash fa-fw text-danger"}),e._v(" \n          "),"N"!==e.orden.estado?[e._v("\n            Anular\n          ")]:[e._v("\n            Ver anulación\n          ")]],2):e._e()])],2)])])}),[],!1,null,null,null).exports;var c=a(7410),l=a(2703),d=a(9326),u=a(2534);const m={components:{SelectUsuario:u.Z},props:{filtros:{type:Object,required:!0}},methods:{buscar:function(){this.$emit("filtros-ordenes-buscar"),$("#modalFiltrosOrdenes").modal("hide")},adicionalesClick:function(e){this.filtros.adicionales===e.target.value&&(this.filtros.adicionales="")}}};const p=(0,s.Z)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalFiltrosOrdenes",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.buscar.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",[e._v("Usuario ingresa")]),e._v(" "),t("select-usuario",{attrs:{id:"usuari_id",catalogo:"USUARIOS",placeholder:"Seleccione...",etiqueta:"nombre_completo"},model:{value:e.filtros.usuarioId,callback:function(t){e.$set(e.filtros,"usuarioId",t)},expression:"filtros.usuarioId"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.adicionales,expression:"filtros.adicionales"}],attrs:{name:"adicionales",type:"radio",value:"entregasCorreoError"},domProps:{checked:e._q(e.filtros.adicionales,"entregasCorreoError")},on:{click:e.adicionalesClick,change:function(t){return e.$set(e.filtros,"adicionales","entregasCorreoError")}}}),e._v("\n                  Entrega con errores de resultados por correo\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.adicionales,expression:"filtros.adicionales"}],attrs:{name:"adicionales",type:"radio",value:"entregasCorreoPendientes"},domProps:{checked:e._q(e.filtros.adicionales,"entregasCorreoPendientes")},on:{click:e.adicionalesClick,change:function(t){return e.$set(e.filtros,"adicionales","entregasCorreoPendientes")}}}),e._v("\n                  Entrega pendiente de resultados por correo\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.adicionales,expression:"filtros.adicionales"}],attrs:{name:"adicionales",type:"radio",value:"entregasFisicasPendientes"},domProps:{checked:e._q(e.filtros.adicionales,"entregasFisicasPendientes")},on:{click:e.adicionalesClick,change:function(t){return e.$set(e.filtros,"adicionales","entregasFisicasPendientes")}}}),e._v("\n                  Entregas físicas pendientes de resulados\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.adicionales,expression:"filtros.adicionales"}],attrs:{name:"adicionales",type:"radio",value:"ordenesConExamenesSinDescargar"},domProps:{checked:e._q(e.filtros.adicionales,"ordenesConExamenesSinDescargar")},on:{click:e.adicionalesClick,change:function(t){return e.$set(e.filtros,"adicionales","ordenesConExamenesSinDescargar")}}}),e._v("\n                  Órdenes con exámenes sin descargar de sistema externo\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.adicionales,expression:"filtros.adicionales"}],attrs:{name:"adicionales",type:"radio",value:"ordenesConResultadosPendientesEnvio"},domProps:{checked:e._q(e.filtros.adicionales,"ordenesConResultadosPendientesEnvio")},on:{click:e.adicionalesClick,change:function(t){return e.$set(e.filtros,"adicionales","ordenesConResultadosPendientesEnvio")}}}),e._v("\n                  Órdenes con resultados pendientes de envío a sistema externo\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.todasSucursales,expression:"filtros.todasSucursales"}],attrs:{name:"adicionales",type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.todasSucursales)?e._i(e.filtros.todasSucursales,null)>-1:e.filtros.todasSucursales},on:{change:function(t){var a=e.filtros.todasSucursales,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"todasSucursales",a.concat([null])):i>-1&&e.$set(e.filtros,"todasSucursales",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"todasSucursales",o)}}}),e._v("\n                 Buscar en todas las sucursales\n                ")])])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.conRemision,expression:"filtros.conRemision"}],attrs:{name:"adicionales",type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.conRemision)?e._i(e.filtros.conRemision,null)>-1:e.filtros.conRemision},on:{change:function(t){var a=e.filtros.conRemision,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"conRemision",a.concat([null])):i>-1&&e.$set(e.filtros,"conRemision",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"conRemision",o)}}}),e._v("\n                 Buscar con remisión\n                ")])])])])]),e._v(" "),e._m(1)])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Más filtros")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-search fa-fw"}),e._v("\n             Buscar\n          ")])])}],!1,null,null,null).exports;var f=a(8728),v=a(5889),h=a(6354),g=a(5683),b=a(8259),x=a(5480),C=a(2446);const y={data:function(){return{existenActualizados:!1,cargando:!1,terminoProcesar:!1,nombreArchivo:"",validar:!1,resultado:{total:"",procesados:"",noProcesados:"",errores:[]}}},mounted:function(){var e=this;this.terminoProcesar=!1,$("#actualizarOrdenesPorArchivo").on("hide.bs.modal",(function(t){e.$refs.file.value="",e.cargando=!1,e.terminoProcesar=!1,e.existenActualizados=!1,e.nombreArchivo="",e.resultado.total="",e.resultado.procesados="",e.resultado.noProcesados="",e.resultado.errores=[]}))},methods:{cerrar:function(){this.$refs.file.value="",this.terminoProcesar=!1,this.nombreArchivo="",this.inicializar(),this.$emit("cerrar-ordenes-archivo",this.existenActualizados),$("#actualizarOrdenesPorArchivo").modal("toggle")},cambioArchivo:function(){this.terminoProcesar=!1;var e=this.$refs.file.files[0];e&&(this.nombreArchivo=e.name,this.inicializar())},procesarArchivo:function(){var e=this;this.cargando=!0,this.terminoProcesar=!1;var t=new FormData;t.append("_method","PATCH"),t.append("validar",this.validar),this.$refs.file.files[0]&&t.append("file",this.$refs.file.files[0]),axios.post("api/ordenes-por-archivo/actualizar",t).then((function(t){var a=t.data.data;e.resultado=a,e.existenActualizados=!0,e.terminoProcesar=!0,e.validar?0===e.resultado.noProcesados?e.mostrarExito("El archivo no contiene errores"):e.mostrarErrores("El archivo contiene errores. Revise el listado"):(e.nombreArchivo="",e.$refs.file.value="",e.resultado.procesados>0?0===e.resultado.noProcesados?e.mostrarExito("Éxito"):e.mostrarAdvertencia("Se procesaron únicamente "+e.resultado.procesados+" registro(s) del archivo exitosamente. Revisar el listado de errores"):e.mostrarErrores("El archivo contiene registro(s) con error. Por favor, revise el listado de errores."))})).catch((function(t){e.$refs.file.value="",e.nombreArchivo="",e.terminoProcesar=!1,e.inicializar();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al procesar archivo",a)})).then((function(){e.cargando=!1}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e){this.$refs.alerta.mostrarAlerta("success",e)},mostrarAdvertencia:function(e){this.$refs.alerta.mostrarAlerta("warning",e)},inicializar:function(){this.resultado.total="",this.resultado.procesados="",this.resultado.noProcesados="",this.resultado.errores=[]}}};const E=(0,s.Z)(y,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"actualizarOrdenesPorArchivo",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.procesarArchivo.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-4"},[t("label",{staticClass:"btn btn-default"},[e._v("\n                Seleccionar archivo...\n                "),t("input",{ref:"file",staticClass:"sfo",attrs:{type:"file",name:"file",id:"actualizar-ordenes-arhcivo",required:"",disabled:e.cargando,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:e.cambioArchivo}})])]),e._v(" "),t("div",{staticClass:"col-md-8",staticStyle:{"margin-top":"5px"}},[e._v(e._s(e.nombreArchivo))])]),e._v(" "),e.cargando?t("div",{staticClass:"panel-body text-center"},[e._m(1)]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.terminoProcesar&&!e.cargando,expression:"terminoProcesar && !cargando"}]},[t("h4",[e._v("Resultados")]),e._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-sm-4"},[t("label",{staticClass:"control-label"},[e._v("No. Total")]),e._v(" "),t("output",[e._v("\n                  "+e._s(e.resultado.total)+"\n                ")])]),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("label",{staticClass:"control-label"},[e._v("No. Procesados")]),e._v(" "),t("output",[e._v("\n                  "+e._s(e.resultado.procesados)+"\n                ")])]),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("label",{staticClass:"control-label"},[e._v("No. Errores")]),e._v(" "),t("output",[e._v("\n                  "+e._s(e.resultado.noProcesados)+"\n                ")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.resultado.errores.length>0,expression:"resultado.errores.length>0"}],staticClass:"col-sm-12"},[t("h4",[e._v("Listado de Errores")]),e._v(" "),t("div",{staticStyle:{height:"170px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(2),e._v(" "),t("tbody",[e._l(e.resultado.errores,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a[0]))]),e._v(" "),t("td",{staticClass:"text-left"},[t("div",{domProps:{innerHTML:e._s(a[1])}})])])]}))],2)])])])])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:e.cargando},on:{click:e.cerrar}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v("Cerrar\n          ")]),e._v(" "),e._m(3),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{id:"actualizarOrdenesPorArchivoValidar",type:"submit",disabled:e.cargando||""===e.nombreArchivo},on:{click:function(t){e.validar=!0}}},[e._v("\n            Validar\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{id:"actualizarOrdenesPorArchivoProcesar",type:"submit",disabled:e.cargando||""===e.nombreArchivo},on:{click:function(t){e.validar=!1}}},[e._v("\n            Procesar\n          ")])])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[e._v("\n            Actualizar órdenes desde archivo\n            "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])])},function(){var e=this,t=e._self._c;return t("h4",[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Cargando archivo. "),t("br"),t("br"),e._v("Por favor, durante\n              este\n              proceso "),t("strong",[e._v("no refresque")]),e._v(" la pantalla...\n            ")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Línea")]),e._v(" "),t("th",{staticClass:"col-sm-10 text-center"},[e._v("Error")])])])},function(){var e=this._self._c;return e("a",{staticClass:"btn btn-sm btn-default",attrs:{href:"/storage/plantillas/actualizar-ordenes.xlsx",download:"actualizar-ordenes.xlsx"}},[e("i",{staticClass:"fas fa-download fa-fw"}),this._v("\n            Plantilla")])}],!1,null,null,null).exports;const A={data:function(){return{cargando:!1,terminoProcesar:!1,existenActualizados:!1,nombreArchivo:"",validar:!1,resultado:{total:"",procesados:"",noProcesados:"",errores:[]}}},mounted:function(){var e=this;this.terminoProcesar=!1,$("#ordenesPorArchivo").on("hide.bs.modal",(function(t){e.$refs.archivo.value="",e.cargando=!1,e.existenActualizados=!1,e.terminoProcesar=!1,e.resultado.total="",e.resultado.procesados="",e.resultado.noProcesados="",e.resultado.errores=[]}))},methods:{cerrar:function(){this.$refs.archivo.value="",this.terminoProcesar=!1,this.nombreArchivo="",this.inicializar(),this.$emit("cerrar-ordenes-archivo",this.existenActualizados),$("#crearOrdenesPorArchivo").modal("toggle")},cambioArchivo:function(){this.terminoProcesar=!1;var e=this.$refs.archivo.files[0];e&&(this.nombreArchivo=e.name,this.inicializar())},procesarArchivo:function(){var e=this;this.cargando=!0,this.terminoProcesar=!1;var t=new FormData;t.append("validar",this.validar),this.$refs.archivo.files[0]&&t.append("file",this.$refs.archivo.files[0]),axios.post("/api/ordenes-por-archivo",t).then((function(t){e.resultado=t.data.data,e.terminoProcesar=!0,e.existenActualizados=!0,e.validar?0===e.resultado.noProcesados?e.mostrarExito("El archivo no contiene errores"):e.mostrarErrores("El archivo contiene errores. Revise el listado"):(e.nombreArchivo="",e.$refs.archivo.value="",e.resultado.procesados>0?0===e.resultado.noProcesados?e.mostrarExito("Archivo procesado"):e.mostrarAdvertencia("Se procesaron únicamente "+e.resultado.procesados+" registro(s) del archivo exitosamente. Revisar el listado de errores"):e.mostrarErrores("El archivo contiene registro(s) con error. Por favor, revise el listado de errores."))})).catch((function(t){e.nombreArchivo="",e.$refs.archivo.value="",e.terminoProcesar=!1,e.inicializar();var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){e.cargando=!1}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e){this.$refs.alerta.mostrarAlerta("success",e)},mostrarAdvertencia:function(e){this.$refs.alerta.mostrarAlerta("warning",e)},inicializar:function(){this.resultado.total="",this.resultado.procesados="",this.resultado.noProcesados="",this.resultado.errores=[]}}};const w=(0,s.Z)(A,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"crearOrdenesPorArchivo",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.procesarArchivo.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-4"},[t("label",{staticClass:"btn btn-default"},[e._v("\n                Seleccionar archivo...\n                "),t("input",{ref:"archivo",staticClass:"sfo",attrs:{id:"crear-ordenes-archivo",type:"file",name:"file",disabled:e.cargando,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",required:""},on:{change:e.cambioArchivo}})])]),e._v(" "),t("div",{staticClass:"col-md-8",staticStyle:{"margin-top":"5px"}},[e._v(e._s(e.nombreArchivo))])]),e._v(" "),e.cargando?t("div",{staticClass:"panel-body text-center"},[e._m(1)]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.terminoProcesar&&!e.cargando,expression:"terminoProcesar && !cargando"}]},[t("h4",[e._v("Resultados")]),e._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-sm-4"},[t("label",{staticClass:"control-label"},[e._v("No. Total")]),e._v(" "),t("output",[e._v("\n                  "+e._s(e.resultado.total)+"\n                ")])]),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("label",{staticClass:"control-label"},[e._v("No. Procesados")]),e._v(" "),t("output",[e._v("\n                  "+e._s(e.resultado.procesados)+"\n                ")])]),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("label",{staticClass:"control-label"},[e._v("No. Errores")]),e._v(" "),t("output",[e._v("\n                  "+e._s(e.resultado.noProcesados)+"\n                ")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.resultado.errores.length>0,expression:"resultado.errores.length>0"}],staticClass:"col-sm-12"},[t("h4",[e._v("Listado de Errores")]),e._v(" "),t("div",{staticStyle:{height:"170px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(2),e._v(" "),t("tbody",[e._l(e.resultado.errores,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a[0]))]),e._v(" "),t("td",{staticClass:"text-left"},[t("div",{domProps:{innerHTML:e._s(a[1])}})])])]}))],2)])])])])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:e.cargando},on:{click:e.cerrar}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v("Cerrar\n          ")]),e._v(" "),e._m(3),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{id:"crearOrdenesPorArchivoValidar",type:"submit",disabled:e.cargando||""===e.nombreArchivo},on:{click:function(t){e.validar=!0}}},[e._v("\n            Validar\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{id:"crearOrdenesPorArchivoProcesar",type:"submit",disabled:e.cargando||""===e.nombreArchivo},on:{click:function(t){e.validar=!1}}},[e._v("\n            Procesar\n          ")])])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[e._v("\n            Crear órdenes desde archivo\n            "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])])},function(){var e=this,t=e._self._c;return t("h4",[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Cargando archivo. "),t("br"),t("br"),e._v("Por favor, durante\n              este\n              proceso "),t("strong",[e._v("no refresque")]),e._v(" la pantalla...\n            ")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Línea")]),e._v(" "),t("th",{staticClass:"col-sm-10 text-center"},[e._v("Error")])])])},function(){var e=this._self._c;return e("a",{staticClass:"btn btn-sm btn-default",attrs:{href:"/storage/plantillas/crear-ordenes.xlsx",download:"crear-ordenes.xlsx"}},[e("i",{staticClass:"fas fa-download fa-fw"}),this._v("\n            Plantilla")])}],!1,null,null,null).exports;const P={components:{BuscarOrdenesModal:a(2047).Z},props:[],data:function(){return{procesando:!1,ordenes:[],sucursales:[],sucursalId:"",ordenesIds:[],existenActualizados:!1,cargandoOrdenes:!1,usuario:"",conteo:0,pagina:1}},mounted:function(){var e=this;$("#actualizarSucursalOrdenes").on("show.bs.modal",(function(t){e.existenActualizados=!1,e.usuario=$(t.relatedTarget).data("usuario"),e.cargarDatos()})),$("#actualizarSucursalOrdenes").on("hide.bs.modal",(function(t){e.existenActualizados=!1,e.procesando=!1,e.ordenes=[],e.sucursales=[],e.ordenesIds=[]}))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;axios.get("/api/catalogos",{params:{catalogo:r.oH.SUCURSALES}}).then((function(t){e.sucursales=t.data.data.filter((function(t){return t.id!==e.$usuario.sucursalId}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar sucursales",a)}))},actualizarSucursal:function(){var e=this,t=this.sucursales.find((function(t){return t.id===e.sucursalId}));if(confirm('¿Está seguro de actualizar a la sucursal "'.concat(t.nombre,'" a "').concat(this.ordenesIds.length,'" orden(es)?'))){this.procesando=!0;var a={ordenesIds:this.ordenesIds};axios.patch("/api/ordenes/actualizar-sucursales/".concat(this.sucursalId),a).then((function(t){e.ordenes=[],e.ordenesIds=[],e.sucursalId="",e.existenActualizados=!0,e.mostrarExito("Se actualizaron ".concat(t.data.data," orden(es)."))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar actualizar",a)})).then((function(){return e.procesando=!1}))}},buscarOrdenesExito:function(e){this.ordenesIds=e.ordenesIds,this.cargarOrdenes()},cargarOrdenes:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.cargandoOrdenes=!0;var a={ordenesIds:this.ordenesIds,incluir:"paciente,sucursal",page:t};axios.get("/api/ordenes/buscar",{params:a}).then((function(t){var a=t.data.data;e.conteo=a.last_page,e.ordenes=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al cargar órdenes"),e.mostrarErrores(a)})).then((function(){return e.cargandoOrdenes=!1}))},eliminarOrden:function(e){var t=this.ordenesIds.indexOf(e.id);this.ordenesIds.splice(t,1),_.isEmpty(this.ordenesIds)?(this.ordenes=[],this.ordenesIds=[]):this.cargarOrdenes(),this.mostrarInformativo('Orden No. "'+e.numero_orden+'" eliminada.')},eliminarOrdenes:function(){this.ordenes=[],this.ordenesIds=[],this.mostrarInformativo("Se han eliminado todas las órdenes.")},cerrar:function(){this.ordenesIds=[],this.ordenes=[],this.conteo=0,this.pagina=1,this.$emit("cerrar-ordenes-archivo",this.existenActualizados),$("#actualizarSucursalOrdenes").modal("hide")}},computed:{puedeActualizarSucursal:function(){return this.ordenes.length>0&&""!==this.sucursalId},ordenesSeleccionados:function(){return this.ordenesIds.length>1?"órdenes seleccionadas":" orden seleccionada"}}};const k=(0,s.Z)(P,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"actualizarSucursalOrdenes",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.actualizarSucursal.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),e._m(0)]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"form-group"},[e._m(1),e._v(" "),t("div",{staticClass:"col-md-9"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.ordenesIds.length>0,expression:"ordenesIds.length > 0"}],staticClass:"badge",staticStyle:{float:"right"}},[e._v("\n                  "+e._s(e.ordenesIds.length)+" "+e._s(e.ordenesSeleccionados)+"\n                ")])])]),e._v(" "),!e.cargandoOrdenes&&e.ordenes.length>0?t("div",{staticStyle:{height:"270px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-2 text-center"},[e._v("Sucursal")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar todo",disabled:0===e.ordenesIds.length},on:{click:e.eliminarOrdenes}},[t("i",{staticClass:"fas fa-trash"})])])])]),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",[t("td",{staticClass:"text-center centrado-vertical"},[e._v(e._s(a.sucursal.nombre))]),e._v(" "),t("td",{staticClass:"text-center centrado-vertical"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-left centrado-vertical"},[e._v(e._s(a.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center centrado-vertical"},[e._v("\n                      "+e._s(e._f("fecha")(a.fecha_orden,"YYYY-MM-DD"))+"\n                    ")]),e._v(" "),t("td",{staticClass:"text-center centrado-vertical"},[e._v(e._s(e._f("estadoOrden")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-center centrado-vertical"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarOrden(a)}}},[t("i",{staticClass:"fas fa-trash"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoOrdenes,cantidad:e.ordenes.length,tipo:"órdenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.ordenes.length>0,expression:"ordenes.length > 0"}],staticClass:"pull-left"},[e.conteo>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.conteo,"page-range":6,"container-class":"pagination","click-handler":e.cargarOrdenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.pagina,callback:function(t){e.pagina=t},expression:"pagina"}}):e._e()],1),e._v(" "),t("div",{staticClass:"col-sm-3 pull-right"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.sucursalId,expression:"sucursalId"}],staticClass:"form-control input-sm",attrs:{name:"sucursales",id:"actualizar-sucursal-sucursal"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.sucursalId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Seleccione Sucursal...")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:!e.puedeActualizarSucursal}},[e._v("\n              Actualizar sucursal\n            ")])])])])])]),e._v(" "),t("buscar-ordenes-modal",{attrs:{id:"buscarOrdenesActualizarSucursal","ordenes-ids":e.ordenesIds,top:11,"mostrar-filtros":["cliente","categoria","fechaDesde","fechaHasta","medico","paciente","numeroOrden","numeroOrdenFinal"]},on:{"ordenes-seleccionadas":e.buscarOrdenesExito}})],1)}),[function(){var e=this,t=e._self._c;return t("h4",{staticClass:"modal-title"},[e._v("Actualizar sucursal de órdenes\n              "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3"},[e("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarOrdenesActualizarSucursal"}},[e("i",{staticClass:"fas fa-search fa-fw"}),this._v(" Buscar órdenes\n                ")])])}],!1,null,null,null).exports;var O=a(6570),S=a(1769),I=a(1844);const D={props:{ordenId:{required:!0}},data:function(){return{procesando:!1,abono:{id:"",valor:0,motivo_anula:""}}},mounted:function(){var e=this;$("#modalAnularAbono").on("shown.bs.modal",(function(t){"modalAnularAbono"===t.target.id&&($("#motivo_anula").focus(),e.abono=$(t.relatedTarget).data("abono"))}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},anular:function(){var e=this;this.abono.motivo_anula||(this.abono.motivo_anula=""),this.procesando=!0,axios.delete("/api/ordenes/".concat(this.ordenId,"/abonos/").concat(this.abono.id,"?motivo=").concat(this.abono.motivo_anula)).then((function(){$("#modalAnularAbono").modal("hide"),e.$emit("abono-anulado",e.abono)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error",a),$("#motivo_anula").focus()})).then((function(){return e.procesando=!1}))}}};const R=(0,s.Z)(D,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalAnularAbono",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content top-11"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.anular.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"valor"}},[e._v("Valor")]),e._v(" "),t("output",{attrs:{id:"valor"}},[e._v(e._s(e._f("moneda")(e.abono.valor)))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label obligatorio"},[e._v("Motivo")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.abono.motivo_anula,expression:"abono.motivo_anula"}],staticClass:"form-control input-sm textarea",attrs:{id:"motivo_anula",name:"motivo_anula",rows:"3",required:""},domProps:{value:e.abono.motivo_anula},on:{input:function(t){t.target.composing||e.$set(e.abono,"motivo_anula",t.target.value)}}})])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("boton",{staticClass:"btn btn-danger btn-sm",attrs:{type:"submit",procesando:e.procesando}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Anular\n          ")])],1)])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Anular abono")])])}],!1,null,null,null).exports;var M=a(5959),N=a(1546);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(Object(a),!0).forEach((function(t){T(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const B={components:{DatosOrden:O.Z,AbonosRegistrados:I.Z,AbonosFormularioModal:S.Z,AnularAbonoModal:R,VerAbonoModal:M.Z,Abono:N.Z},data:function(){return{id:"",sistemaFactura:null,configs:{requeridos:{},mostrar:{},acciones:{}},existeCambio:!1,cargando:!1,enviarCobro:!1,cuentasBancarias:[],entidadesFinancieras:[],facturaId:"",abono:{id:"",fecha_abono:"",valor:null,valor_saldo_a_favor:"",estado:"",forma_pago:r.xe.EFECTIVO,numero_forma_pago:"",cuenta_bancaria_id:"",extras:null},orden:{id:"",paciente:{},abonos:[],subempresa:{empresa:{saldo:0}},valor_total:"",numero_orden:"",paciente_type:"",estado:"",saldo:""}}},mounted:function(){var e=this;$("#modalRegistrarAbono").on("show.bs.modal",(function(t){if("modalRegistrarAbono"===t.target.id){e.$refs.alerta.ocultarAlertas(),e.facturaId=$(t.relatedTarget).data("factura-id");var a=$(t.relatedTarget).data("orden-id");a&&""===e.id&&(e.limpiar(),e.existeCambio=!1,e.id=a,e.cargarDatos()),e.cargarEntidadesFinancieras()}})),$("#modalRegistrarAbono").on("hide.bs.modal",(function(t){"modalRegistrarAbono"===t.target.id&&(e.emitirResultado(),e.id="",e.facturaId="",e.limpiar(),e.orden={id:"",paciente:{},numero_orden:"",paciente_type:"",estado:"",valor_total:"",abonos:[],subempresa:{empresa:{saldo:0}}})}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},cerrar:function(){this.emitirResultado(),this.id="",this.facturaId="",this.limpiar(),$("#modalRegistrarAbono").modal("toggle")},emitirResultado:function(){if(this.existeCambio){var e={ordenId:this.id,totalAbonos:this.totalAbonos};this.$emit("abonos-actualizados",e)}},limpiar:function(){this.abono.fecha_abono="",this.abono.valor="",this.abono.valor_saldo_a_favor="",this.abono.estado="",this.abono.forma_pago="EF",this.abono.extras=null,this.abono.numero_forma_pago="",this.abono.cuenta_bancaria_id="",this.abono.referencia=""},cargarDatos:function(){var e=this;this.limpiar(),this.cargando=!0,axios.get("/api/ordenes/".concat(this.id,"/abonos/create")).then((function(t){var a=t.data.data,r=a.orden;e.sistemaFactura=a.sistemaFactura,e.configs.requeridos=a.requeridos?a.requeridos:{},e.configs.acciones=a.acciones?a.acciones:{},e.configs.mostrar=a.mostrar?a.mostrar:{},e.orden.id=r.id,e.orden.numero_orden=r.numero_orden,e.orden.paciente_type=r.paciente_type,e.orden.estado=r.estado,e.orden.valor_total=r.valor_total,e.orden.paciente=r.paciente,e.orden.abonos=r.abonos,e.orden.subempresa=r.subempresa,e.cargarCuentasBancarias()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar listado de abonos",a)})).then((function(){return e.cargando=!1}))},cargarEntidadesFinancieras:function(){var e=this;_.isEmpty(this.entidadesFinancieras)&&axios.get("/api/catalogos",{params:{catalogo:r.oH.ENTIDADES_FINANCIERAS}}).then((function(t){var a=t.data.data;e.entidadesFinancieras=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Entidades financieras",a)}))},cargarCuentasBancarias:function(){var e=this;this.configs.acciones.cargarCuentasBancarias&&_.isEmpty(this.cuentasBancarias)&&axios.get("/api/sistemas-externos/".concat(this.sistemaFactura.id,"/cuentas-bancarias")).then((function(t){var a=t.data.data;e.cuentasBancarias=a})).catch((function(){return e.mostrarErrores("Error al cargar cuentas bancarias")}))},registrarAbono:function(){var e=this;if(0!==this.totalSaldo)if(this.abono.valor>this.totalSaldo)this.mostrarErrores("El valor de abono es mayor que el saldo de la orden");else{this.cargando=!0;var t=q(q({},this.abono),{},{factura_id:this.enviarCobro?this.facturaId:"",empresa_id:this.orden.subempresa.empresa_id,valor:1*this.abono.valor+1*this.abono.valor_saldo_a_favor,valor_saldo_a_favor:this.abono.valor_saldo_a_favor?this.abono.valor_saldo_a_favor:0});axios.post("/api/ordenes/".concat(this.id,"/abonos"),t).then((function(t){var a=t.data.data;e.mostrarExito("Abono de <strong>".concat(cliente.moneda).concat(Number(e.abono.valor).toFixed(2),"</strong> registrado en <strong>Orión</strong>")),"EXITO"===a.envioAbonoSistemaExterno&&e.mostrarExito("Abono de <strong>".concat(cliente.moneda).concat(Number(e.abono.valor).toFixed(2),"</strong> registrado en <strong>").concat(e.sistemaFactura.nombre,"</strong>")),e.limpiarAbono(),e.cargarDatos(),e.existeCambio=!0})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a),e.cargando=!1})).then((function(){return e.enviarCobro=!1}))}else this.mostrarErrores("La orden no tiene saldo pendiente")},limpiarAbono:function(){this.abono.valor=""},abonoActualizado:function(e){this.existeCambio=!0,this.cargarDatos(),this.mostrarExito("Abono de <strong>".concat(cliente.moneda).concat(e.valor,"</strong> actualizado"))},abonoAnulado:function(e){this.existeCambio=!0,this.cargarDatos(),this.mostrarExito("Abono de <strong>".concat(cliente.moneda).concat(e.valor,"</strong> anulado"))}},computed:{totalAbonos:function(){var e=this.abonos.filter((function(e){return"V"===e.estado})).reduce((function(e,t){return 1*e+1*t.valor}),0);return this.redondear2Decimales(e)},totalSaldo:function(){if(this.orden.valor_total){var e=this.orden.valor_total-this.totalAbonos;return this.redondear2Decimales(e)}return 0},abonos:function(){return _.isEmpty(this.orden.abonos)?[]:this.orden.abonos},habilitarGuardar:function(){return!(this.abono.valor>0&&this.totalSaldo>0&&this.$can("crear-abonos"))},empresaSaldo:function(){return parseFloat(this.orden.subempresa.empresa.saldo)-this.abono.valor_saldo_a_favor}}};const F=(0,s.Z)(B,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"modalRegistrarAbono",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Abonos")]),e._v(" "),t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,"mostrar-cliente":!0,orden:e.orden}})],1),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.registrarAbono.apply(null,arguments)}}},[e.$can("crear-abonos")?t("div",{staticClass:"panel-group"},[t("div",{staticClass:"panel panel-gris"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-collapse collapse in",attrs:{id:"registrarAbono"}},[t("div",{staticClass:"panel-body"},[t("abono",{attrs:{"empresa-saldo":e.empresaSaldo,"sistema-factura":e.sistemaFactura,"cuentas-bancarias":e.cuentasBancarias,"entidades-financieras":e.entidadesFinancieras,"total-saldo":e.totalSaldo,abono:e.abono,configs:e.configs}}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 etiqueta-fila"},[t("h4",[t("span",{staticClass:"label label-default"},[e._v("\n                            Total: "+e._s(e._f("moneda")(e.orden.valor_total))+"\n                          ")])]),e._v(" "),t("h4",[t("span",{staticClass:"label",class:{"label-primary":e.totalSaldo>0,"label-success":0===e.totalSaldo}},[e._v("\n                            Abono: "+e._s(e._f("moneda")(e.totalAbonos))+"\n                          ")])]),e._v(" "),t("h4",[t("span",{staticClass:"label",class:{"label-danger":e.totalSaldo>0,"label-default":0===e.totalSaldo}},[e._v("\n                            Saldo: "+e._s(e._f("moneda")(e.totalSaldo))+"\n                          ")])])]),e._v(" "),t("div",{staticClass:"col-sm-4 text-right"},[e.configs.acciones.enviarCobros&&e.facturaId?t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.enviarCobro,expression:"enviarCobro"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.enviarCobro)?e._i(e.enviarCobro,null)>-1:e.enviarCobro},on:{change:function(t){var a=e.enviarCobro,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.enviarCobro=a.concat([null])):i>-1&&(e.enviarCobro=a.slice(0,i).concat(a.slice(i+1)))}else e.enviarCobro=o}}}),e._v("\n                            Enviar a "+e._s(e.sistemaFactura.nombre)+"\n                          ")])]):e._e()]),e._v(" "),t("div",{staticClass:"col-sm-2 text-right"},[t("boton",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",procesando:e.cargando,disabled:e.habilitarGuardar}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Abonar\n                        ")])],1)])],1)])])]):e._e()]),e._v(" "),t("legend",{staticClass:"etiqueta-fila"},[e._v("\n            Abonos registrados\n          ")]),e._v(" "),t("abonos-registrados",{attrs:{abonos:e.orden.abonos,cargando:e.cargando}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")])])])])]),e._v(" "),t("abonos-formulario-modal",{attrs:{"orden-id":e.orden.id,"sistema-factura":e.sistemaFactura,"cuentas-bancarias":e.cuentasBancarias,"entidades-financieras":e.entidadesFinancieras,configs:e.configs,top:11},on:{"abono-actualizado":e.abonoActualizado}}),e._v(" "),t("ver-abono-modal",{attrs:{"orden-id":e.orden.id,"sistema-factura":e.sistemaFactura,"cuentas-bancarias":e.cuentasBancarias,"entidades-financieras":e.entidadesFinancieras,configs:e.configs,top:11}}),e._v(" "),t("anular-abono-modal",{attrs:{"orden-id":e.orden.id},on:{"abono-anulado":e.abonoAnulado}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading puntero",attrs:{"data-toggle":"collapse","data-target":"#registrarAbono"}},[e("h4",{staticClass:"panel-title"},[e("a",{attrs:{href:"#"}},[this._v("\n                      Registrar abono\n                    ")])])])}],!1,null,null,null).exports;var z=a(2979),L=a(2893),V=a(1497),H=a(1758);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){Y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"==typeof e)return W(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const X={components:{OpcionesOrden:n,GestionarImpresionModal:b.Z,ImprimirModal:c.Z,MuestrasModal:l.Z,VerEntregasModal:d.Z,FiltrosOrdenesModal:p,SistemaExternoResultadosModal:f.Z,AdjuntosModal:v.Z,EstadoOrdenModal:h.Z,VerAuditoriasModal:g.Z,ResultadosModal:x.Z,EntregarResultadosModal:C.Z,CrearOrdenesPorArchivoModal:w,ActualizarOrdenesPorArchivoModal:E,ActualizarSucursalOrdenesModal:k,SelectMedico:u.Z,RegistrarAbonoModal:F,GestionarPacienteModal:z.Z,BuscarDocumentosModal:L.Z,PdfCertificadoModal:V.Z,VerCoberturaMspModal:H.Z},props:["datos"],data:function(){return{cargando:!1,cargandoRemision:{},procesando:{cargarClientes:!1,cargarTiposAtenciones:!1,cargarServicios:!1},paginaActual:1,totalPaginas:0,totalRegistros:0,filtros:{cadenaBusqueda:"",clienteId:"",categoriaId:"",tipoAtencionId:"",servicioId:"",medicoId:"",usuarioId:"",fechaDesde:"",fechaHasta:"",estado:"",adicionales:"",todasSucursales:!1,conRemision:!1},configuraciones:[],clientes:[],tiposAtenciones:[],servicios:[],ordenes:[],orden:{paciente:{}},detallesOrden:[]}},mounted:function(){$("body").tooltip({selector:'[rel="tooltip"]',container:"body",trigger:"hover"}),this.cargarMensajeImpresionDirecta(),this.cargarDatos(),this.mostrarMensajes(),this.atajoTecladoCadenaBusqueda()},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarMensajes:function(){this.procesarMensajes("mostrarExito",this.datos.mensajes.exito),this.procesarMensajes("mostrarError",this.datos.mensajes.error),this.procesarMensajes("mostrarAdvertencia",this.datos.mensajes.advertencia),this.procesarMensajes("mostrarInformativo",this.datos.mensajes.informativo)},procesarMensajes:function(e,t){var a=this;_.isEmpty(t)||(t.forEach((function(t){return a[e](t)})),t=[])},cargarMensajeImpresionDirecta:function(){var e=new URLSearchParams(window.location.search);"1"!==e.get("etiquetas")||_.isEmpty(this.datos.mensajes.exito)||this.datos.mensajes.exito.push("Etiquetas enviadas a imprimir"),"1"!==e.get("recibo")||_.isEmpty(this.datos.mensajes.exito)||this.datos.mensajes.exito.push("Recibo enviado a imprimir")},cargarDatos:function(){this.configuraciones=this.datos.configuraciones?this.datos.configuraciones:{};var e=this.cargarFiltros();this.cargarOrdenes(e)},borrarFiltros:function(){this.filtros.cadenaBusqueda="",this.filtros.clienteId="",this.filtros.categoriaId="",this.filtros.tipoAtencionId="",this.filtros.servicioId="",this.filtros.medicoId="",this.filtros.usuarioId="",this.filtros.fechaDesde="",this.filtros.fechaHasta="",this.filtros.estado="",this.filtros.adicionales="",this.filtros.todasSucursales=!1,this.filtros.conRemision=!1,this.ordenes=[],this.buscarOrdenes()},cargarClientes:function(e,t){var a=this;if(_.isEmpty(this.clientes)){this.procesando.cargarClientes=!0;var o={catalogo:r.oH.CLIENTES};axios.get("/api/catalogos",{params:o}).then((function(r){var o=r.data;a.clientes=o.data,e&&(a.filtros.clienteId=e),t&&(a.filtros.categoriaId=t),a.$can("cambiar-empresas")||(a.filtros.clienteId=a.$usuario.empresaId,a.clientes=a.clientes.filter((function(e){return e.id===a.$usuario.empresaId})))})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarError("Error al cargar Clientes",t)})).then((function(){return a.procesando.cargarClientes=!1}))}},cargarFiltros:function(){var e=this.datos.parametros;this.filtros.cadenaBusqueda=e.cadenaBusqueda?e.cadenaBusqueda:"",this.filtros.fechaDesde=e.fechaDesde?e.fechaDesde:"",this.filtros.fechaHasta=e.fechaHasta?e.fechaHasta:"",this.filtros.estado=e.estado?e.estado:"",this.filtros.adicionales=e.adicionales?e.adicionales:"",this.filtros.todasSucursales=!!e.todasSucursales&&e.todasSucursales,this.filtros.conRemision=!!e.conRemision&&e.conRemision,this.paginaActual=e.page?Number(e.page):1;var t=e.clienteId?parseInt(e.clienteId):"",a=e.categoriaId?parseInt(e.categoriaId):"",r=e.tipoAtencionId?parseInt(e.tipoAtencionId):"",o=e.servicioId?parseInt(e.servicioId):"";return this.filtros.medicoId=e.medicoId?parseInt(e.medicoId):"",this.filtros.usuarioId=e.usuarioId?parseInt(e.usuarioId):"",t&&this.cargarClientes(t,a),r&&this.cargarTiposAtenciones(r),o&&this.cargarServicios(o),{clienteId:t,categoriaId:a,tipoAtencionId:r,servicioId:o}},buscarOrdenes:function(){this.paginaActual=1,this.cargarOrdenes()},cargarOrdenes:function(e){var t=this;this.cargando=!0,this.filtros.cadenaBusqueda=this.sanitizarNumeroOrden(this.filtros.cadenaBusqueda);var a={cadenaBusqueda:this.filtros.cadenaBusqueda?this.filtros.cadenaBusqueda:null,clienteId:this.filtros.clienteId?this.filtros.clienteId:_.get(e,"clienteId"),categoriaId:this.filtros.categoriaId?this.filtros.categoriaId:_.get(e,"categoriaId"),tipoAtencionId:this.filtros.tipoAtencionId?this.filtros.tipoAtencionId:_.get(e,"tipoAtencionId"),servicioId:this.filtros.servicioId?this.filtros.servicioId:_.get(e,"servicioId"),medicoId:this.filtros.medicoId?this.filtros.medicoId:null,usuarioId:this.filtros.usuarioId?this.filtros.usuarioId:null,fechaDesde:this.filtros.fechaDesde?this.filtros.fechaDesde:null,fechaHasta:this.filtros.fechaHasta?this.filtros.fechaHasta:null,estado:this.filtros.estado?this.filtros.estado:null,adicionales:this.filtros.adicionales?this.filtros.adicionales:null,todasSucursales:this.filtros.todasSucursales?"1":null,conRemision:this.filtros.conRemision?"1":null,page:this.paginaActual};this.actualizarUrl(a),axios.get("/api/ordenes",{params:a}).then((function(e){var a=e.data;t.totalPaginas=a.last_page,t.totalRegistros=a.total;var r=a.data;r.forEach((function(e){e.paciente.numero_historia_clinica=t.obtenerNumeroHistoriaClinica(e,e.sistema_externo_id);var a=t.definirCamposAdicionalesPorDetallesOrden(e);Vue.set(e,"procesando",!1),Vue.set(e,"saldo",t.calcularSaldo(e)),Vue.set(e,"key",0),Vue.set(e,"entrega_deshabilitada",t.definirDeshabilitado(e)),Vue.set(e,"facturar_deshabilitado",t.definirFacturarDeshabilitado(e)),Vue.set(e,"dueno_responsable",t.obtenerNombreDuenoResponsable(e.paciente_type,e.paciente)),Vue.set(e,"cantidad_enviados_externo",a.cantidadEnviadosSistemaExterno),Vue.set(e,"cantidad_descargados_externo",a.cantidadDescargadosSistemaExterno)})),t.ordenes=r})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarError("Error al listar órdenes",a)})).then((function(){return t.cargando=!1}))},definirFacturarDeshabilitado:function(e){var t=this;return e.facturas.filter((function(e){return e.sistema_factura_id&&!t.datos.sistemasExternos.find((function(t){return t.id===e.sistema_factura_id}))})).length>0},definirDeshabilitado:function(e){return!(["P","L","V"].includes(e.estado)&&e.tiene_resultados_validados&&(0===e.saldo||e.subempresa.empresa.mostrar_ordenes_impagas))},calcularSaldo:function(e){var t=e.valor_total-e.valor_total_abonos;return Math.round(100*(t+Number.EPSILON))/100},ordenAnulada:function(e){var t=this.ordenes.find((function(t){return t.id===e.id}));t&&(t.estado=e.estado,"N"===t.estado&&(t.entrega_deshabilitada=this.definirDeshabilitado(t),this.mostrarExito("Orden <strong>".concat(t.numero_orden,"</strong> anulada"))))},ordenRevertida:function(e){var t=this.ordenes.find((function(t){return t.id===e.id}));t&&(t.estado=e.estado,this.mostrarExito("Orden <strong>".concat(t.numero_orden,"</strong> se ha revertido")))},abonosActualizados:function(e){var t=this.ordenes.find((function(t){return t.id===e.ordenId}));t&&(t.valor_total_abonos=e.totalAbonos,t.saldo=this.calcularSaldo(t),t.entrega_deshabilitada=this.definirDeshabilitado(t),t.key+=1)},correoElectronicoEnviado:function(e){if(e){var t=this.ordenes.find((function(t){return t.id===e.id}));t&&(t.entrega_correo=e.entrega_correo,t.ultima_entrega_correo=e.ultima_entrega_correo,t.entrega_whatsapp=e.entrega_whatsapp,t.key+=1,this.mostrarExito("Correo electrónico de orden <strong>".concat(t.numero_orden,"</strong> enviado")))}else{this.mostrarExito(["Correo electrónico enviado","Actualice la pantalla para ver las entregas"])}},whatsappEnviado:function(e){if(e){var t=this.ordenes.find((function(t){return t.id===e.id}));t&&(t.entrega_correo=e.entrega_correo,t.entrega_whatsapp=e.entrega_whatsapp,t.key+=1,this.mostrarExito("Mensaje de orden <strong>".concat(t.numero_orden,"</strong> generado para envío desde WhatsApp")))}else{this.mostrarExito(["WhatsApp despachado","Actualice la pantalla para ver las entregas"])}},impresionRegistrada:function(e){if(e){var t=this.ordenes.find((function(t){return t.id===Number(e.ordenId)}));t&&(t.cantidad_impresos=e.cantidadDetallesOrdenImpresos,t.key+=1,this.mostrarExito("Impresión de orden <strong>".concat(t.numero_orden,"</strong> registrada")))}else{this.mostrarExito(["Impresión registrada","Actualice la pantalla"])}},cerrarOrdenesArchivo:function(e){e&&this.cargarOrdenes()},claseEnvio:function(e){return{"fas fa-exchange-alt text-gris":"REINTENTO"===e.estado,"fa fa-check text-gris":"ENTREGADO"===e.estado&&!e.fecha_apertura,"fa fa-check-double text-gris":"ENTREGADO"===e.estado&&e.fecha_apertura,"fas fa-times text-danger":"ERROR"===e.estado}},cambiaClienteId:function(){this.filtros.categoriaId=""},tooltipEntrega:function(e,t){var a="".concat(e.entregados," de ").concat(t," exámenes enviados");return e.noVigentes>0&&0===e.entregados&&(a="Existen cambios sin enviar"),a},tooltipEstadoEnvio:function(e){if(e&&"ERROR"===e.estado){var t=this.procesarMotivo(e.motivo);return e.intentos&&(t+="<br><strong>Intentos:</strong> ".concat(e.intentos)),"master"===this.$usuario.nombreUsuario&&e.ip_envia&&(t+="<br><strong>IP:</strong> ".concat(e.ip_envia)),t}if(e&&"GENERADO"===e.estado)return"En proceso de envío";if(e&&"REINTENTO"===e.estado){var a=this.procesarMotivo(e.motivo),r="<strong>Reintentando enviar correo</strong>";return r+="<br><strong>Intentos:</strong> ".concat(e.intentos),r+="<br>".concat(a),"master"===this.$usuario.nombreUsuario&&e.ip_envia&&(r+="<br><strong>IP:</strong> ".concat(e.ip_envia)),r}if(e&&"ENTREGADO"===e.estado&&!e.fecha_apertura){var o=this.fechaALocal(e.fecha_entrega),i="<strong>Fecha entrega:</strong> ".concat(o);return e.intentos&&(i+="<br><strong>Intentos:</strong> ".concat(e.intentos)),i}if(e&&"ENTREGADO"===e.estado&&e.fecha_apertura){var s=this.fechaALocal(e.fecha_entrega),n=this.fechaALocal(e.fecha_apertura),c="<strong>Fecha entrega:</strong> ".concat(s);return c+="<br><strong>Fecha apertura:</strong> ".concat(n),e.intentos&&(c+="<br><strong>Intentos:</strong> ".concat(e.intentos)),c}return""},procesarMotivo:function(e){var t=Object.entries(r.CW).find((function(t){var a=Z(t,2),r=a[0];a[1];return e&&e.toLowerCase().includes(r)})),a="No se pudo enviar";return t&&t.length>1?a=t[1]:console.warn(e),a},obtenerCategoriaId:function(e){return e.id},obtenerNombreDuenoResponsable:function(e,t){var a="";return e===r.sM.ANIMAL&&(a=this.obtenerNombreCompletoPaciente(t.nombres_dueno,t.apellidos_dueno)),e===r.sM.OBJETO&&(a=this.obtenerNombreCompletoPaciente(t.nombres_responsable,t.apellidos_responsable)),a},obtenerNombreCompletoPaciente:function(e,t){var a="";if(e||t){var r=[e,t].filter(Boolean).join(" ");a="(".concat(r,")")}return a},abrirModalGestionarImpresion:function(e){var t=(0,o.MD)({orden:e});$("#modalGestionarImpresion").modal({backdrop:"static"},t)},abrirModalMuestras:function(e){var t=this;this.orden=this.ordenes.find((function(t){return t.id===e})),this.detallesOrden=[],$("#muestrasModal").modal({backdrop:"static"});axios.get("/api/ordenes/".concat(e,"/detalles"),{params:{incluir:"examen,detalleOrdenMuestras"}}).then((function(e){var a=e.data.data;t.detallesOrden=a.map((function(e){var t=e.detalle_orden_muestras.map((function(e){return{id:e.id,muestra_id:e.muestra_id,flebotomista_id:e.flebotomista_id,estado:e.estado,estado_original:e.estado,fecha:e.fecha,externa:e.externa,pendiente:e.estado===r.zm.PENDIENTE,rechazada:e.rechazada}}));return G(G({},e),{},{muestras:t,tiempo_proceso:e.examen.tiempo_proceso})}))})).catch((function(e){var a=t.procesarErrorResponse(e);a.unshift("Error al cargar exámenes"),t.mostrarError(a)}))},abrirModalAuditorias:function(e){this.orden=e,$("#verAuditoriasModal").modal({backdrop:"static"})},abrirModalBuscarDocumentos:function(e){this.orden=e;var t={orden:e};$("#buscarDocumentosModal").modal({backdrop:"static"},t)},abrirModalResultados:function(e){var t=(0,o.MD)({orden:e});$("#modalResultados").modal({backdrop:"static"},t)},documentoImpreso:function(e){if(e)if(e.actualizar){var t=this.ordenes.find((function(t){return t.id===Number(e.orden.ordenId)}));t&&(t.cantidad_impresos=e.orden.cantidadDetallesOrdenImpresos,t.key+=1),this.mostrarExito(e.mensajes)}else this.mostrarExito(e.mensajes);else{this.mostrarExito(["Impresión enviada"])}},muestrasGuardadas:function(e){if(e.idsMuestrasRecibidas.length>0){var t={registro:this.ordenes.find((function(t){return t.id===e.idOrden})),tipoDocumento:"etiquetas",muestrasIds:e.idsMuestrasRecibidas};$("#modalImprimir").modal({backdrop:"static"},t)}this.mostrarExito("Muestras guardadas")},filtrosOrdenesBuscar:function(){this.buscarOrdenes()},definirCamposAdicionalesPorDetallesOrden:function(e){var t,a=0,r=null,o=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=K(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}(e.detalles_ordenes);try{for(o.s();!(t=o.n()).done;){var i=t.value;a=this.definirCantidadEnviadosSistemaExterno(i,a),r=this.definirCantidadDescargadosSistemaExterno(i,r)}}catch(e){o.e(e)}finally{o.f()}return{cantidadEnviadosSistemaExterno:a,cantidadDescargadosSistemaExterno:r}},definirCantidadEnviadosSistemaExterno:function(e,t){return e.enviado_sistema_externo&&t++,t},definirCantidadDescargadosSistemaExterno:function(e,t){return null===t&&"boolean"==typeof e.descargado_sistema_externo&&(t=0),e.descargado_sistema_externo&&t++,t},titleSistemaExterno:function(e){return null===e.cantidad_descargados_externo?"Sistema externo":"<strong>Descargado:</strong> ".concat(e.cantidad_descargados_externo,"/").concat(e.total_detalles_orden," <br> <strong>Enviado:</strong> ").concat(e.cantidad_enviados_externo,"/").concat(e.total_detalles_orden)},estiloSistemaExterno:function(e){return null===e.cantidad_descargados_externo||e.cantidad_descargados_externo!==e.total_detalles_orden?"":"-webkit-text-stroke: 0.5px"},estadoSistemaExternoActualizado:function(e){var t=this.ordenes.find((function(t){return t.id===e.id}));if(t){var a=this.definirCamposAdicionalesPorDetallesOrden(e);t.cantidad_enviados_externo=a.cantidadEnviadosSistemaExterno,t.cantidad_descargados_externo=a.cantidadDescargadosSistemaExterno,t.key+=1}},verAdjuntos:function(e){this.orden=e,$("#modalAdjuntos").modal("show")},abrirModalEstadoOrden:function(e){var t=(0,o.MD)({"id-orden":e});$("#modalEstadoOrden").modal({},t)},tituloUrgente:function(e){var t="";return e.tipo_atencion&&e.tipo_atencion.urgente&&(t+="<strong>Tipo atención:</strong> ".concat(e.tipo_atencion.nombre)),e.sala&&e.sala.urgente&&(""!==t&&(t+="</br>"),t+="<strong>Servicio:</strong> ".concat(e.sala.nombre)),t},copiar:function(e){this.copiarAPortaPapeles(e),this.mostrarExito("Copiado")},abrirRemision:function(e){var t=this;Vue.set(this.cargandoRemision,e.id,!0),axios.get("/api/ordenes/".concat(e.id,"/remision")).then((function(e){var a=e.data.data;a?window.location.href="/remisiones/".concat(a):t.mostrarInformativo("Remisión aún no generada")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarError(a)})).then((function(){return t.cargandoRemision[e.id]=!1}))},copiarFecha:function(){this.filtros.fechaDesde&&(this.filtros.fechaHasta=this.filtros.fechaDesde)},cargarTiposAtenciones:function(e){var t=this;_.isEmpty(this.tiposAtenciones)&&(this.procesando.cargarTiposAtenciones=!0,axios.get("/api/catalogos",{params:{catalogo:r.oH.TIPO_ATENCION}}).then((function(a){var r=a.data.data;t.tiposAtenciones=r,e&&(t.filtros.tipoAtencionId=e)})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar Tipos atenciones",a)})).then((function(){return t.procesando.cargarTiposAtenciones=!1})))},cargarServicios:function(e){var t=this;_.isEmpty(this.servicios)&&(this.procesando.cargarServicios=!0,axios.get("/api/catalogos",{params:{catalogo:r.oH.SERVICIO}}).then((function(a){var r=a.data.data;t.servicios=r,e&&(t.filtros.servicioId=e)})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar Servicios",a)})).then((function(){return t.procesando.cargarServicios=!1})))},abrirModalEditarPaciente:function(e){var t={pacienteType:this.obtenerPacienteType(e.paciente_type),esCrearPaciente:!1,numeroIdentificacion:e.paciente.numero_identificacion,pacienteId:e.paciente_id};$("#gestionarPacienteModal").modal({backdrop:"static"},t)},obtenerPacienteType:function(e){var t="";switch(e){case r.sM.HUMANO:t="humano";break;case r.sM.ANIMAL:t="animal";break;case r.sM.OBJETO:t="objeto"}return t},pacienteHumanoGuardado:function(e){this.ordenes.filter((function(t){var a=t.paciente_id,o=t.paciente_type;return a===e.id&&o===r.sM.HUMANO})).forEach((function(t){t.paciente.numero_identificacion=e.numero_identificacion,t.paciente.nombre_paciente=e.nombre_paciente,t.paciente.edad_abreviado=e.edad_abreviado,t.paciente.sexo=e.sexo,t.paciente.numero_historia_clinica=e.numero_historia_clinica})),this.mostrarExito("Paciente guardado")},pacienteAnimalGuardado:function(e){var t=this;this.ordenes.filter((function(t){var a=t.paciente_id,o=t.paciente_type;return a===e.id&&o===r.sM.ANIMAL})).forEach((function(a){a.paciente.numero_identificacion=e.numero_identificacion,a.paciente.nombre_paciente=e.nombre_paciente,a.paciente.edad_abreviado=e.edad_abreviado,a.paciente.sexo=e.sexo,a.paciente.numero_historia_clinica=e.numero_historia_clinica,a.paciente.nombres_dueno=e.nombres_dueno,a.paciente.apellidos_dueno=e.apellidos_dueno,a.dueno_responsable=t.obtenerNombreDuenoResponsable(a.paciente_type,a.paciente)})),this.mostrarExito("Paciente guardado")},sujetoObjetoGuardado:function(e){var t=this;this.ordenes.filter((function(t){var a=t.paciente_id,o=t.paciente_type;return a===e.id&&o===r.sM.OBJETO})).forEach((function(a){a.paciente.numero_identificacion=e.numero_identificacion,a.paciente.nombre_paciente=e.nombre_paciente,a.paciente.edad_abreviado=e.edad_abreviado,a.paciente.sexo=e.sexo,a.paciente.numero_historia_clinica=e.numero_historia_clinica,a.paciente.nombres_responsable=e.nombres_responsable,a.paciente.apellidos_responsable=e.apellidos_responsable,a.dueno_responsable=t.obtenerNombreDuenoResponsable(a.paciente_type,a.paciente)})),this.mostrarExito("Objeto guardado")},correoElectronicoCertificadoEnviado:function(e){this.$refs.alerta.mostrarAlerta("success","Correo electrónico con certificado enviado")},abrirCoberturaMspPaciente:function(e){this.orden=e,$("#modalCoberturaMsp").modal({backdrop:"static"})}},computed:{categorias:function(){var e=this,t=this.clientes.find((function(t){return t.id===e.filtros.clienteId}));return t?t.subempresas:[]},nombreFiltroCliente:function(){var e=this,t=this.clientes.find((function(t){return t.id===e.filtros.clienteId}));return t?t.nombre:""},nombreFiltroCategoria:function(){var e=this,t=this.categorias.find((function(t){return t.id===e.filtros.categoriaId}));return t?t.nombre:""},puedeActualizarSucursal:function(){return["1","4","5"].includes(this.configuraciones.tipoNumeracion)}}},J=X;const Q=(0,s.Z)(J,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{attrs:{"mostrar-servidor-local":!0},scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Órdenes\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",[e.$can("crear-ordenes")?t("a",{staticClass:"btn btn-primary",attrs:{href:"/ordenes/create",title:"Nuevo"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" "),t("span",[e._v("Nuevo")])]):e._e()])]),e._v(" "),t("li",[t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[e._v("\n              Más opciones\n              "),t("span",{staticClass:"caret"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu",staticStyle:{"margin-top":"-3px","margin-left":"0"}},[e.$can("crear-ordenes")?t("li",[t("a",{staticClass:"puntero",attrs:{"data-toggle":"modal","data-backdrop":"static","data-target":"#crearOrdenesPorArchivo"}},[e._v("\n                  Crear órdenes desde archivo\n                  "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])]):e._e(),e._v(" "),e.$can("editar-ordenes")?t("li",[t("a",{staticClass:"puntero",attrs:{"data-toggle":"modal","data-backdrop":"static","data-target":"#actualizarOrdenesPorArchivo"}},[e._v("\n                  Actualizar órdenes desde archivo\n                  "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])]):e._e(),e._v(" "),e.$can("editar-ordenes")&&e.puedeActualizarSucursal?t("li",[t("a",{staticClass:"puntero",attrs:{"data-toggle":"modal","data-backdrop":"static","data-target":"#actualizarSucursalOrdenes"}},[e._v("\n                  Actualizar sucursal de órdenes\n                  "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])]):e._e(),e._v(" "),t("li",[t("a",{staticClass:"puntero",attrs:{"data-toggle":"modal","data-backdrop":"static","data-target":"#etiquetas"}},[e._v("\n                  Generar etiquetas\n                  "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])]),e._v(" "),t("li",[e.$can("ver-ordenes")?t("a",{attrs:{href:"/tareas",title:"Generar PDF's resultados"}},[e._v("\n                  Generar PDF's de Resultados\n                  "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])]):e._e()])])])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-default",attrs:{id:"filtros"}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"cliente_id",placeholder:"Clientes",rel:"tooltip",label:"nombre",title:e.nombreFiltroCliente,options:e.clientes,reduce:function(e){return e.id},loading:e.procesando.cargarClientes},on:{input:e.cambiaClienteId,open:e.cargarClientes},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.filtros.clienteId,callback:function(t){e.$set(e.filtros,"clienteId",t)},expression:"filtros.clienteId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"categoria_id",placeholder:"Categorías",rel:"tooltip",title:e.nombreFiltroCategoria,options:e.categorias,label:"nombre",reduce:e.obtenerCategoriaId},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.categoriaId,callback:function(t){e.$set(e.filtros,"categoriaId",t)},expression:"filtros.categoriaId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control input-sm",attrs:{id:"estado",name:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Estado")]),e._v(" "),t("option",{attrs:{value:"G"}},[e._v("Generado")]),e._v(" "),t("option",{attrs:{value:"P"}},[e._v("En Proceso")]),e._v(" "),t("option",{attrs:{value:"R"}},[e._v("Reportado")]),e._v(" "),t("option",{attrs:{value:"L"}},[e._v("Preliminar")]),e._v(" "),t("option",{attrs:{value:"V"}},[e._v("Validado")]),e._v(" "),t("option",{attrs:{value:"N"}},[e._v("Anulado")])])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaDesde,expression:"filtros.fechaDesde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",autocomplete:"off"}}),e._v(" "),t("span",{staticClass:"input-group-addon puntero",on:{click:e.copiarFecha}},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaHasta,expression:"filtros.fechaHasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-orientation":"bottom","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}})])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",placeholder:"Tipos atención",options:e.tiposAtenciones,label:"nombre",reduce:function(e){return e.id},loading:e.procesando.cargarTiposAtenciones},on:{open:e.cargarTiposAtenciones},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n              "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px","margin-top":"-3px"}}):e._e()]}},{key:"option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n              "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px"}}):e._e()]}},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.filtros.tipoAtencionId,callback:function(t){e.$set(e.filtros,"tipoAtencionId",t)},expression:"filtros.tipoAtencionId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"servicio_id",placeholder:"Servicios",options:e.servicios,label:"nombre",reduce:function(e){return e.id},loading:e.procesando.cargarServicios},on:{open:e.cargarServicios},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n              "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px","margin-top":"-3px"}}):e._e()]}},{key:"option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n              "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px"}}):e._e()]}},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.filtros.servicioId,callback:function(t){e.$set(e.filtros,"servicioId",t)},expression:"filtros.servicioId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"cadena_busqueda",type:"text",placeholder:"Buscar por número de orden, identificación, nombres o apellidos del paciente",name:"cadenaBusqueda",autocomplete:"off"},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarOrdenes.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("select-medico",{attrs:{id:"medico_id",catalogo:"MEDICOS",placeholder:"Médico",etiqueta:"nombre_completo"},model:{value:e.filtros.medicoId,callback:function(t){e.$set(e.filtros,"medicoId",t)},expression:"filtros.medicoId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 text-right"},[t("button",{staticClass:"btn btn-default btn-sm",class:{"btn-primary":e.filtros.adicionales||e.filtros.todasSucursales||e.filtros.conRemision||e.filtros.usuarioId},staticStyle:{"margin-bottom":"15px"},attrs:{type:"button","data-toggle":"modal","data-target":"#modalFiltrosOrdenes"}},[t("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}}),e._v("\n            Más filtros\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{"margin-bottom":"15px"},attrs:{type:"button"},on:{click:e.borrarFiltros}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}}),e._v("\n            Borrar\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",staticStyle:{"margin-bottom":"15px"},attrs:{type:"button"},on:{click:e.buscarOrdenes}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}}),e._v("\n            Buscar\n          ")])])])])]),e._v(" "),!e.cargando&&e.ordenes.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed",attrs:{id:"listado"}},[t("thead",[t("tr",[e.configuraciones.mostrarServicioTipoAtencion?t("th",{staticClass:"col-sm-1 text-center hidden-xs"},[e._v("\n          Servicio/Atención\n        ")]):e._e(),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),e.configuraciones.clienteEnOrdenes?t("th",{staticClass:"col-sm-2 text-left hidden-xs"},[e._v("\n          Cliente/Médico\n        ")]):e._e(),e._v(" "),t("th",{staticClass:"text-left"},[e._v("\n          Paciente\n        ")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor ("+e._s(e.$cliente.moneda)+")")])])]),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",[e.configuraciones.mostrarServicioTipoAtencion?t("td",{staticClass:"text-center hidden-xs"},[t("small",{attrs:{title:"Servicio",rel:"tooltip"}},[e._v(e._s(a.sala?a.sala.nombre:""))]),e._v(" "),a.tipo_atencion?t("div",{attrs:{title:"Tipo atención",rel:"tooltip"}},[e._v("\n              "+e._s(a.tipo_atencion.nombre)+"\n            ")]):e._e(),e._v(" "),t("div",[a.tipo_atencion&&a.tipo_atencion.urgente||a.sala&&a.sala.urgente?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",attrs:{rel:"tooltip","data-html":"true",title:e.tituloUrgente(a)}}):e._e(),e._v(" "),a.observaciones_orden?t("i",{staticClass:"fas fa-info-circle",staticStyle:{"margin-left":"3px"},attrs:{rel:"tooltip","data-placement":"right",title:a.observaciones_orden}}):e._e(),e._v(" "),a.observaciones_hoja_trabajo?t("i",{staticClass:"fas fa-notes-medical",attrs:{rel:"tooltip","data-placement":"right",title:a.observaciones_hoja_trabajo}}):e._e(),e._v(" "),a.laboratorio_id?t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirRemision(a)}}},[t("i",{staticClass:"fas fa-shipping-fast text-gris",class:{"fa-shipping-fast":!e.cargandoRemision[a.id],"fa fa-spinner fa-spin":e.cargandoRemision[a.id]},attrs:{rel:"tooltip","data-placement":"right",title:"Remisión"}})]):e._e()])]):e._e(),e._v(" "),t("td",{staticClass:"text-center",staticStyle:{position:"relative"}},[t("div",{staticClass:"visible-xs",staticStyle:{position:"absolute",top:"7px",left:"-14px",width:"400px"}},[e.$root.movil?t("opciones-orden",{key:a.key,attrs:{orden:a,configuraciones:e.configuraciones,tamano:"md"},on:{"abrir-modal-muestras":e.abrirModalMuestras,"abrir-modal-auditorias":e.abrirModalAuditorias,"abrir-modal-resultados":e.abrirModalResultados,"abrir-modal-buscar-documentos":e.abrirModalBuscarDocumentos,error:e.mostrarError}}):e._e()],1),e._v(" "),e.configuraciones.mostrarOrdenExterna&&a.numero_orden_externa?t("div",{staticClass:"no-salto-linea"},[t("small",{staticClass:"text-muted",attrs:{rel:"tooltip",title:"Referencia"},on:{dblclick:function(t){return e.copiar(a.numero_orden_externa)}}},[e._v("\n                "+e._s(a.numero_orden_externa)+"\n              ")])]):e._e(),e._v(" "),t("div",{domProps:{innerHTML:e._s(e.$options.filters.numeroOrden(a.numero_orden,e.$configs))},on:{dblclick:function(t){return e.copiar(a.numero_orden)}}}),e._v(" "),e.configuraciones.mostrarServicioTipoAtencion?e._e():t("div",[a.tipo_atencion&&a.tipo_atencion.urgente?t("span",{staticClass:"label label-danger",attrs:{rel:"tooltip","data-html":"true",title:"<strong>Tipo atención urgente:</strong> ".concat(a.tipo_atencion.nombre)}},[e._v("\n                "+e._s(a.tipo_atencion.nombre.substring(0,1))+"\n              ")]):e._e(),e._v(" "),a.sala&&a.sala.urgente?t("span",{staticClass:"label label-danger",staticStyle:{"margin-left":"3px"},attrs:{rel:"tooltip","data-html":"true",title:"<strong>Servicio urgente:</strong> ".concat(a.sala.nombre)}},[e._v("\n                "+e._s(a.sala.nombre.substring(0,1))+"\n              ")]):e._e(),e._v(" "),a.observaciones_orden?t("i",{staticClass:"fas fa-info-circle",staticStyle:{"margin-left":"2px"},attrs:{rel:"tooltip","data-placement":"right",title:a.observaciones_orden}}):e._e(),e._v(" "),a.observaciones_hoja_trabajo?t("i",{staticClass:"fas fa-notes-medical",attrs:{rel:"tooltip","data-placement":"right",title:a.observaciones_hoja_trabajo}}):e._e()])]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea",attrs:{title:e.$usuario.zonaHoraria},domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_orden,"YYYY-MM-DD </br> HH:mm:ss"))}})]),e._v(" "),e.configuraciones.clienteEnOrdenes?t("td",{staticClass:"text-left hidden-xs"},[t("small",{attrs:{title:"Cliente",rel:"tooltip"}},[e._v("\n              "+e._s(a.subempresa.empresa.nombre)+"\n              "+e._s(a.subempresa.empresa.nombre!==a.subempresa.nombre?"(".concat(a.subempresa.nombre,")"):"")+"\n            ")]),e._v(" "),t("div",{attrs:{title:"Médico",rel:"tooltip"}},[e._v("\n              "+e._s(a.medico?a.medico.nombre_completo:"")+"\n            ")])]):e._e(),e._v(" "),t("td",{staticClass:"text-left contenedor-menu-oculto"},[t("div",[t("small",[e._v(e._s(a.paciente.numero_identificacion))]),e._v(" "),e.$can("editar-ordenes")&&"N"!==a.estado?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",rel:"tooltip",title:"Editar datos de paciente seleccionado"},on:{click:function(t){return e.abrirModalEditarPaciente(a)}}},[t("i",{staticClass:"fas fa-pencil-alt fa-fw"})]):e._e(),e._v(" "),"App\\Models\\PacienteHumano"===a.paciente_type&&"EC"===e.$cliente.pais?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Cobertura MSP",rel:"tooltip"},on:{click:function(t){return e.abrirCoberturaMspPaciente(a)}}},[t("img",{attrs:{id:"logo_msp",src:"/img/msp.ico"}})]):e._e(),e._v(" "),e.configuraciones.mostrarHistoriaClinica&&a.paciente.numero_historia_clinica?t("span",{staticClass:"text-muted",attrs:{title:"Número de historia clínica"}},[t("small",{on:{dblclick:function(t){return e.copiar(a.paciente.numero_historia_clinica)}}},[t("strong",[e._v("HC:")]),e._v(" "+e._s(a.paciente.numero_historia_clinica)+"\n                ")])]):e._e(),e._v(" "),t("span",{staticClass:"text-muted",attrs:{title:"Edad"}},[t("small",[t("strong",[e._v("E:")]),e._v(e._s(a.paciente.edad_abreviado)+"\n                ")])]),e._v(" "),t("span",{staticClass:"text-muted",attrs:{title:"Sexo"}},[t("small",[t("strong",[e._v("S:")]),e._v(e._s(a.paciente.sexo)+"\n                ")])])]),e._v("\n\n            "+e._s(a.paciente.nombre_paciente)+"\n            "),a.dueno_responsable?t("small",[e._v(e._s(a.dueno_responsable))]):e._e(),e._v(" "),t("div",{staticClass:"menu-oculto"},[e.$root.movil?e._e():t("opciones-orden",{key:a.key,attrs:{orden:a,configuraciones:e.configuraciones},on:{"abrir-modal-muestras":e.abrirModalMuestras,"abrir-modal-auditorias":e.abrirModalAuditorias,"abrir-modal-resultados":e.abrirModalResultados,"abrir-modal-buscar-documentos":e.abrirModalBuscarDocumentos,error:e.mostrarError}})],1)]),e._v(" "),t("td",{staticClass:"text-center estado-orden"},[t("orden-estado",{attrs:{"id-orden":a.id,estado:a.estado},on:{click:e.abrirModalEstadoOrden}}),e._v(" "),t("div",{staticClass:"no-salto-linea",staticStyle:{"padding-top":"5px"}},[a.sistema_externo_id?t("a",{staticClass:"puntero",attrs:{"data-toggle":"modal","data-target":"#sistemaExternoResultadosModal","data-orden-id":a.id}},[t("i",{key:a.key,staticClass:"fas fa-external-link-alt text-gris",style:e.estiloSistemaExterno(a),attrs:{rel:"tooltip","data-placement":"right","data-html":"true",title:e.titleSistemaExterno(a)}})]):e._e(),e._v(" "),0!==a.cantidad_enviados_externo&&a.cantidad_enviados_externo===a.total_detalles_orden||null===a.cantidad_descargados_externo||a.cantidad_descargados_externo!==a.total_detalles_orden?a.cantidad_enviados_externo===a.total_detalles_orden&&null!==a.cantidad_descargados_externo&&a.cantidad_descargados_externo===a.total_detalles_orden?t("i",{key:a.key,staticClass:"icon-stack-2x fa fa-check-double text-gris"}):a.cantidad_enviados_externo===a.total_detalles_orden&&null===a.cantidad_descargados_externo?t("i",{key:a.key,staticClass:"icon-stack-2x fa fa-check text-gris",attrs:{rel:"tooltip",title:"Todos los resultados han sido enviados"}}):null!==a.cantidad_descargados_externo&&a.cantidad_descargados_externo!==a.total_detalles_orden?t("i",{key:"no-descargado-".concat(a.key),staticClass:"icon-stack-2x fa fa-times text-danger",attrs:{rel:"tooltip",title:"Existen exámenes que no han sido descargados del sistema externo"}}):e._e():t("i",{key:a.key,staticClass:"icon-stack-2x fa fa-check text-gris"}),e._v(" "),t("a",{staticClass:"no-salto-linea puntero",attrs:{"data-toggle":"modal","data-target":"#modalVerEntregas","data-forma":"WHATSAPP","data-orden":JSON.stringify(a)}},[0===a.entrega_whatsapp.pendientes?t("i",{key:a.key,staticClass:"fab fa-whatsapp text-gris fa-personalizado",staticStyle:{"-webkit-text-stroke":"0.7px"},attrs:{rel:"tooltip",title:e.tooltipEntrega(a.entrega_whatsapp,a.total_detalles_orden)}}):a.entrega_whatsapp.entregados>0||a.entrega_whatsapp.noVigentes>0?t("i",{key:a.key,staticClass:"fab fa-whatsapp text-gris fa-personalizado",attrs:{rel:"tooltip",title:e.tooltipEntrega(a.entrega_whatsapp,a.total_detalles_orden)}}):e._e()]),e._v(" "),a.ultima_entrega_whatsapp&&a.ultima_entrega_whatsapp.envio_notificacion?t("i",{staticClass:"icon-stack-2x",class:e.claseEnvio(a.ultima_entrega_whatsapp.envio_notificacion),attrs:{rel:"tooltip","data-html":"true",title:e.tooltipEstadoEnvio(a.ultima_entrega_whatsapp.envio_notificacion)}}):e._e(),e._v(" "),t("a",{staticClass:"no-salto-linea puntero",attrs:{"data-toggle":"modal","data-target":"#modalVerEntregas","data-forma":"CORREO","data-orden":JSON.stringify(a)}},[0===a.entrega_correo.pendientes?t("i",{key:a.key,staticClass:"fas fa-envelope text-gris fa-personalizado",attrs:{rel:"tooltip",title:e.tooltipEntrega(a.entrega_correo,a.total_detalles_orden)}}):a.entrega_correo.entregados>0||a.entrega_correo.noVigentes>0?t("i",{key:a.key,staticClass:"far fa-envelope text-gris fa-personalizado",attrs:{rel:"tooltip",title:e.tooltipEntrega(a.entrega_correo,a.total_detalles_orden)}}):e._e()]),e._v(" "),a.ultima_entrega_correo&&a.ultima_entrega_correo.envio_notificacion?t("i",{key:a.key,staticClass:"icon-stack-2x",class:e.claseEnvio(a.ultima_entrega_correo.envio_notificacion),attrs:{rel:"tooltip","data-html":"true",title:e.tooltipEstadoEnvio(a.ultima_entrega_correo.envio_notificacion)}}):e._e(),e._v(" "),t("a",{staticClass:"no-salto-linea puntero",on:{click:function(t){return e.abrirModalGestionarImpresion(a)}}},[a.cantidad_impresos?t("i",{key:a.key,staticClass:"fas fa-print text-gris fa-personalizado",style:a.cantidad_impresos===a.total_detalles_orden?"-webkit-text-stroke: 0.5px":"",attrs:{rel:"tooltip",title:"".concat(a.cantidad_impresos," de ").concat(a.total_detalles_orden," exámenes impresos")}}):e._e(),e._v(" "),a.cantidad_impresos===a.total_detalles_orden?t("i",{staticClass:"icon-stack-2x fa fa-check text-gris",attrs:{rel:"tooltip",title:"Todos los exámenes han sido impresos"}}):e._e()]),e._v(" "),a.cantidad_entregados?t("i",{staticClass:"fas fa-clipboard-check text-gris fa-personalizado",style:a.cantidad_entregados===a.total_detalles_orden?"-webkit-text-stroke: 0.5px":"",attrs:{rel:"tooltip",title:"".concat(a.cantidad_entregados," de ").concat(a.total_detalles_orden," exámenes entregados")}}):e._e(),e._v(" "),a.cantidad_entregados===a.total_detalles_orden?t("i",{staticClass:"icon-stack-2x fa fa-check text-gris",attrs:{rel:"tooltip",title:"Todos los exámenes han sido entregados"}}):e._e(),e._v(" "),a.tiene_resultados_adjuntos?t("a",{staticClass:"puntero",on:{click:function(t){return e.verAdjuntos(a)}}},[t("i",{staticClass:"fas fa-paperclip text-gris fa-personalizado",attrs:{rel:"tooltip",title:"Tiene adjuntos"}})]):e._e()])],1),e._v(" "),t("td",{staticClass:"text-right"},[t("div",[1===a.facturas.length?t("a",{staticStyle:{"padding-right":"2px"},attrs:{href:"FACTURA"===a.facturas[0].tipo?"/facturas?numeroFactura=".concat(a.facturas[0].numero_completo):"/facturas?numeroFactura=".concat(a.facturas[0].numero)}},[t("i",{staticClass:"fas fa-file-invoice text-gris",attrs:{"aria-hidden":"true","data-placement":"left",rel:"tooltip",title:"FACTURA"===a.facturas[0].tipo?"Factura No. ".concat(a.facturas[0].numero_completo):"Proforma No. ".concat(a.facturas[0].numero)}})]):e._e(),e._v(" "),a.facturas.length>1?t("a",{staticStyle:{"padding-right":"2px"},attrs:{href:"/facturas?numeroOrden=".concat(a.numero_orden)}},[t("i",{staticClass:"fas fa-file-invoice text-gris",attrs:{"aria-hidden":"true","data-placement":"left",rel:"tooltip",title:"Existe más de un documento"}})]):e._e(),e._v(" "),a.facturas.length>1?t("span",{staticClass:"icon-stack-2x text-gris"},[e._v(e._s(a.facturas.length)+"\n              ")]):e._e(),e._v(" "),0===a.saldo?t("i",{staticClass:"far fa-check-circle text-success",attrs:{"aria-hidden":"true"}}):t("i",{key:a.key,staticClass:"far fa-times-circle text-danger",attrs:{"aria-hidden":"true",rel:"tooltip",title:"Paciente debe ".concat(e.$cliente.moneda).concat(a.saldo.toFixed(2))}})]),e._v(" "),t("div",[e._v("\n              "+e._s(a.valor_total.toFixed(2))+"\n            ")])])])]}))],2)])]):e._e(),e._v(" "),!e.cargando&&e.ordenes.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"page-range":7,"container-class":"pagination","click-handler":e.cargarOrdenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.ordenes.length,tipo:"órdenes"}}),e._v(" "),t("clientes-anular-orden-formulario",{on:{"orden-anulada":e.ordenAnulada,"orden-revertida":e.ordenRevertida}}),e._v(" "),t("registrar-abono-modal",{on:{"abonos-actualizados":e.abonosActualizados}}),e._v(" "),t("entregar-resultados-modal",{attrs:{"actualizar-datos":!0},on:{"whatsapp-enviado":e.whatsappEnviado,"correo-electronico-enviado":e.correoElectronicoEnviado}}),e._v(" "),t("crear-ordenes-por-archivo-modal",{on:{"cerrar-ordenes-archivo":e.cerrarOrdenesArchivo}}),e._v(" "),t("actualizar-ordenes-por-archivo-modal",{on:{"cerrar-ordenes-archivo":e.cerrarOrdenesArchivo}}),e._v(" "),t("actualizar-sucursal-ordenes-modal",{on:{"cerrar-ordenes-archivo":e.cerrarOrdenesArchivo}}),e._v(" "),t("ver-entregas-modal"),e._v(" "),t("clientes-etiquetas-modal"),e._v(" "),t("gestionar-impresion-modal",{on:{"impresion-registrada":e.impresionRegistrada}}),e._v(" "),t("imprimir-modal",{attrs:{"url-api-local":e.configuraciones.urlApiLocal,"mostrar-incluir-membrete":e.configuraciones.resultadoConMembrete,"mostrar-incluir-firma":!e.configuraciones.imprimirFirmaResultados},on:{"documento-impreso":e.documentoImpreso}}),e._v(" "),t("muestras-modal",{attrs:{"guardar-muestras":!0,orden:e.orden,"detalles-orden":e.detallesOrden},on:{"muestras-guardadas":e.muestrasGuardadas}}),e._v(" "),t("filtros-ordenes-modal",{attrs:{filtros:e.filtros},on:{"filtros-ordenes-buscar":e.filtrosOrdenesBuscar}}),e._v(" "),t("sistema-externo-resultados-modal",{on:{"estado-sistema-externo-actualizado":e.estadoSistemaExternoActualizado}}),e._v(" "),t("adjuntos-modal",{attrs:{orden:e.orden}}),e._v(" "),t("estado-orden-modal"),e._v(" "),t("ver-auditorias-modal",{attrs:{"orden-id":e.orden.id,tipo:"ordenes"}}),e._v(" "),t("buscar-documentos-modal",{attrs:{"orden-id":e.orden.id,"tamano-papel-reporte":e.configuraciones.tamanoPapelReporte}}),e._v(" "),t("resultados-modal"),e._v(" "),t("gestionar-paciente-modal",{attrs:{"id-sistema-externo":e.$usuario.sistemaHisId},on:{"paciente-humano-guardado":e.pacienteHumanoGuardado,"paciente-animal-guardado":e.pacienteAnimalGuardado,"sujeto-objeto-guardado":e.sujetoObjetoGuardado}}),e._v(" "),t("pdf-certificado-modal",{attrs:{"permiso-imprimir":e.$can("imprimir-reportes"),"resultado-con-membrete":e.configuraciones.resultadoConMembrete},on:{"correo-electronico-certificado-enviado":e.correoElectronicoCertificadoEnviado}}),e._v(" "),t("ver-cobertura-msp-modal",{attrs:{"identificacion-paciente":e.orden.paciente.numero_identificacion,"fecha-nacimiento":e.orden.paciente.fecha_nacimiento,"fecha-orden":e.$options.filters.fecha(e.orden.fecha_orden,"DD-MM-YYYY")}})],1)}),[],!1,null,null,null).exports},2200:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{existeCambio:!1,registro:{puntoVenta:"",numeroFactura:""},puntosVenta:["01","02","03","04"]}},mounted:function(){var e=this;$("#jmFacturaOrden").on("hide.bs.modal",(function(t){"jmFacturaOrden"===t.target.id&&e.borrarFormulario()})),$("#jmFacturaOrden").on("show.bs.modal",(function(e){e.target.id}))},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},borrarFormulario:function(){this.registro.puntoVenta="",this.registro.numeroFactura=""},guardar:function(){var e=this;this.alternarBotonesSubmit(),axios.get("/api/jm-factura-orden",{params:this.registro}).then((function(t){e.existeCambio=!0,e.datos.orden=t.data.data,e.datos.orden.numeroFactura=e.registro.puntoVenta+"-"+e.registro.numeroFactura,e.borrarFormulario(),$("#jmFacturaOrden").modal("toggle")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al descargar factura!",a)})).then((function(){return e.alternarBotonesSubmit()}))},cerrar:function(){this.borrarFormulario()}},computed:{}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"jmFacturaOrden",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Descargar factura")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"punto_venta"}},[e._v("Punto de venta")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.puntoVenta,expression:"registro.puntoVenta"}],staticClass:"form-control input-sm",attrs:{id:"punto_venta",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"puntoVenta",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.puntosVenta,(function(a){return t("option",{domProps:{value:a}},[e._v(e._s(a))])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"numero_factura"}},[e._v("Número de factura")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.numeroFactura,expression:"registro.numeroFactura"}],staticClass:"form-control input-sm",attrs:{id:"numero_factura",required:""},domProps:{value:e.registro.numeroFactura},on:{input:function(t){t.target.composing||e.$set(e.registro,"numeroFactura",t.target.value)}}})])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:!e.registro.puntoVenta||!e.registro.numeroFactura}},[t("i",{staticClass:"fas fa-download fa-fw"}),e._v(" Descargar\n          ")])])])])])])}),[],!1,null,null,null).exports},6732:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:{paciente:{type:Object,required:!0}},data:function(){return{historiasClinicas:[],sistemasExternos:[]}},mounted:function(){var e=this;$("#modalHistoriasClinicas").on("show.bs.modal",(function(t){"modalHistoriasClinicas"===t.target.id&&(e.cargarDatos(),e.historiasClinicas=_.cloneDeep(e.paciente.historia_clinica))})),$("#modalHistoriasClinicas").on("hide.bs.modal",(function(t){"modalHistoriasClinicas"===t.target.id&&(e.historiasClinicas=[])}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},guardar:function(){this.paciente.historia_clinica=this.historiasClinicas;var e=this.paciente.historia_clinica.filter((function(e){return e.numero})).map((function(e){return e.numero}));this.paciente.numero_historia_clinica=e.join(", "),$("#modalHistoriasClinicas").modal("hide")},cargarDatos:function(){var e=this;if(_.isEmpty(this.sistemasExternos)){var t={catalogo:r.oH.SISTEMAS_EXTERNOS,soloActivos:!0,tipo:"HIS"};axios.get("/api/catalogos",{params:t}).then((function(t){var a=t.data;e.sistemasExternos=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar Sistemas externos"),e.mostrarErrores(a)}))}},agregar:function(){var e={id:null,numero:null};1===this.sistemasExternos.length&&(e.id=this.sistemasExternos[0].id),this.historiasClinicas.push(e)},eliminar:function(e){this.historiasClinicas.splice(e,1)},sistemaExternoSeleccionado:function(e){if(e.id&&this.historiasClinicas.filter((function(t){return t.id===e.id})).length>1){var t=this.sistemasExternos.find((function(t){return t.id===e.id})).nombre;e.id=null,this.mostrarAdvertencia("Sistema externo <strong>".concat(t,"</strong> ya está seleccionado"))}}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalHistoriasClinicas",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content top-11"},[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-8"},[e._v("\n                Sistema\n              ")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Número")]),e._v(" "),t("th",{staticClass:"col-sm-1"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Agregar sistema externo",disabled:e.historiasClinicas.length-1===e.sistemasExternos.length},on:{click:e.agregar}},[t("i",{staticClass:"fas fa-plus fa-fw"})])])])]),e._v(" "),t("tbody",[e._l(e.historiasClinicas,(function(a,r){return[t("tr",[t("td",[null===a.id&&0===r?[e._v("\n                    Orión\n                  ")]:[t("select",{directives:[{name:"model",rawName:"v-model",value:a.id,expression:"historiaClinica.id"}],staticClass:"form-control input-sm",attrs:{required:a.numero},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(a,"id",t.target.multiple?r:r[0])},function(t){return e.sistemaExternoSeleccionado(a)}]}},[t("option",{domProps:{value:null}},[e._v("Seleccione...")]),e._v(" "),e._l(e.sistemasExternos,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                        "+e._s(a.nombre)+"\n                      ")])}))],2)]],2),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.numero,expression:"historiaClinica.numero"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"20",required:a.id},domProps:{value:a.numero},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(a,"numero",t.target.value)}}})]),e._v(" "),t("td",[t("button",{directives:[{name:"show",rawName:"v-show",value:r>0,expression:"indice>0"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Anular"},on:{click:function(t){return e.eliminar(r)}}},[t("i",{staticClass:"fas fa-fw fa-trash"})])])])]}))],2)])],1),e._v(" "),e._m(1)])])])])}),[function(){var e=this._self._c;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("Historias clínicas")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cancelar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[e._v("Guardar")])])}],!1,null,null,null).exports},6295:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id","permisos"],data:function(){return{key:0,pacienteAnimal:{id:"",tipo_identificacion:"",numero_identificacion:"",sexo:"",nombre:"",especie_id:"",raza_id:"",fecha_nacimiento:"",edad_calculado:"",correo_dueno:"",residencia_dueno_id:"",telefono_convencional_dueno:"",telefono_celular_dueno:"",direccion_dueno:"",numero_historia_clinica:"",nivel1:"",nivel2:"",nivel3:"",nivel4:"",esterilizado:!1},paises:[]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarInformativo:function(e,t){this.$refs.alerta.mostrarAlerta("info",e,t)},cargarDatos:function(){var e=this;axios.get("/api/ubicaciones",{params:{nivel:1}}).then((function(t){var a=t.data.data;e.paises=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar paises!",a)})),"0"===this.id?this.cargarUbicacionDesdeCookie(this.pacienteAnimal):(this.$refs.cargando.alternar(),axios.get("/api/pacientes/animales/".concat(this.id,"/edit")).then((function(t){var a=t.data.data.pacienteAnimal;e.pacienteAnimal.id=a.id,e.pacienteAnimal.numero_identificacion=a.numero_identificacion,e.pacienteAnimal.sexo=a.sexo,e.pacienteAnimal.esterilizado=a.esterilizado,e.pacienteAnimal.nombre=a.nombre,e.pacienteAnimal.nombres_dueno=a.nombres_dueno,e.pacienteAnimal.apellidos_dueno=a.apellidos_dueno,e.pacienteAnimal.raza_id=a.raza_id,e.pacienteAnimal.fecha_nacimiento=a.fecha_nacimiento,e.pacienteAnimal.correo_dueno=a.correo_dueno,e.pacienteAnimal.telefono_convencional_dueno=a.telefono_convencional_dueno,e.pacienteAnimal.telefono_celular_dueno=a.telefono_celular_dueno,e.pacienteAnimal.direccion_dueno=a.direccion_dueno,e.pacienteAnimal.numero_historia_clinica=a.numero_historia_clinica,e.pacienteAnimal.residencia_dueno_id=a.residencia_dueno_id?a.residencia_dueno_id:"",e.pacienteAnimal.especie_id=a.raza.padre_id,e.cargarUbicacionResponsable(e.pacienteAnimal,a.residencia_dueno)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar paciente!",a)})).then((function(){return e.$refs.cargando.alternar()})))},cargarUbicacionDesdeCookie:function(e){e.nivel2=localStorage.getItem("nivel2"),e.nivel3=localStorage.getItem("nivel3"),e.nivel2=e.nivel2?parseInt(e.nivel2):"",e.nivel3=e.nivel3?parseInt(e.nivel3):""},cargarUbicacionResponsable:function(e,t){t&&4===t.nivel&&(e.nivel4=t.id,e.nivel3=t.padre?t.padre.id:"",e.nivel2=t.padre.padre?t.padre.padre.id:"",e.nivel1=t.padre.padre?t.padre.padre.padre_id:""),t&&3===t.nivel&&(e.nivel3=t.id,e.nivel2=t.padre?t.padre.id:"",e.nivel1=t.padre.padre?t.padre.padre.id:""),t&&2===t.nivel&&(e.nivel2=t.id,e.nivel1=t.padre?t.padre.id:"")},redireccionar:function(){window.location.href="/pacientes/animales"},guardar:function(){var e=this;this.$refs.cargando.alternar(),this.alternarBotonesSubmit(),this.pacienteAnimal.id?axios.patch("/api/pacientes/animales/".concat(this.pacienteAnimal.id),this.pacienteAnimal).then((function(){e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al actualizar paciente",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})):axios.post("/api/pacientes/animales",this.pacienteAnimal).then((function(){e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar paciente",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()}))}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear":"Editar")+" Paciente\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[e.permisos.crearPacientes||e.permisos.editarPacientes?t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")]):e._e()]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{type:"button",href:"/pacientes/animales/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"javascript:history.back()"}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("clientes-paciente-animal",{attrs:{paises:e.paises,paciente:e.pacienteAnimal},on:{"update:paciente":function(t){e.pacienteAnimal=t},error:e.mostrarErrores}})],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},4358:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{HistoriasClinicasModal:a(6732).Z},props:["id","datos"],data:function(){return{pacienteHumano:{id:"",tipo_identificacion:"CED",numero_identificacion:"",sexo:"",nombres:"",apellidos:"",fecha_nacimiento:"",edad_calculado:"",correo:"",ubicacion_residencia_id:"",ubicacion_nacionalidad_id:"",autoidentificacion:"",condicion_sexual:"",telefono_convencional:"",telefono_celular:"",direccion:"",direccion_numeracion:"",historia_clinica:[],numero_historia_clinica:"",numero_poliza:"",datos_clinicos:"",ocupacion:"",barrio:"",instruccion:"",nivel1:"",nivel2:"",nivel3:"",nivel4:"",genero:""},urlPrevio:[],datosPacienteHumano:{cargandoPersona:!1,error:!1,exito:!1,advertencia:""}}},mounted:function(){$("body").tooltip({selector:'[data-toggle="tooltip"]',container:"body"}),this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.urlPrevio=this.datos.urlPrevio,this.definirHistoriaClinica(),"0"===this.id?this.cargarUbicacionDesdeStorage(this.pacienteHumano):this.buscarPacienteHumano()},definirHistoriaClinica:function(){var e=this;this.pacienteHumano.historia_clinica.find((function(t){return Number(t.id)===Number(e.$usuario.sistemaHisId)}))||this.pacienteHumano.historia_clinica.unshift({id:this.$usuario.sistemaHisId,numero:""})},buscarPacienteHumano:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/pacientes/humanos/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.pacienteHumano.id=a.id,e.pacienteHumano.tipo_identificacion=a.tipo_identificacion,e.pacienteHumano.numero_identificacion=a.numero_identificacion,e.pacienteHumano.sexo=a.sexo,e.pacienteHumano.nombres=a.nombres,e.pacienteHumano.apellidos=a.apellidos,e.pacienteHumano.correo=a.correo,e.pacienteHumano.fecha_nacimiento=a.fecha_nacimiento,e.pacienteHumano.direccion=a.direccion,e.pacienteHumano.direccion_numeracion=a.direccion_numeracion,e.pacienteHumano.barrio=a.barrio,e.pacienteHumano.telefono_convencional=a.telefono_convencional,e.pacienteHumano.telefono_celular=a.telefono_celular,e.pacienteHumano.datos_clinicos=a.datos_clinicos,e.pacienteHumano.numero_poliza=a.numero_poliza,e.pacienteHumano.ocupacion=a.ocupacion,e.pacienteHumano.ubicacion_nacionalidad_id=a.ubicacion_nacionalidad_id?a.ubicacion_nacionalidad_id:"",e.pacienteHumano.ubicacion_residencia_id=a.ubicacion_residencia_id?a.ubicacion_residencia_id:"",e.pacienteHumano.instruccion=a.instruccion?a.instruccion:"",e.pacienteHumano.autoidentificacion=a.autoidentificacion?a.autoidentificacion:"",e.pacienteHumano.condicion_sexual=a.condicion_sexual?a.condicion_sexual:"",e.pacienteHumano.historia_clinica=a.historia_clinica,e.pacienteHumano.numero_historia_clinica=a.numero_historia_clinica,e.pacienteHumano.historia_clinica||(e.pacienteHumano.historia_clinica=[]),e.definirHistoriaClinica(),e.cargarUbicacionResponsable(e.pacienteHumano,a.ubicacion_residencia)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar paciente",a)})).then((function(){return e.$refs.cargando.alternar()}))},cargarUbicacionDesdeStorage:function(e){e.nivel2=localStorage.getItem("nivel2"),e.nivel3=localStorage.getItem("nivel3"),e.nivel2=e.nivel2?parseInt(e.nivel2):"",e.nivel3=e.nivel3?parseInt(e.nivel3):""},cargarUbicacionResponsable:function(e,t){t&&4===t.nivel&&(e.nivel4=t.id,e.nivel3=t.padre?t.padre.id:"",e.nivel2=t.padre.padre?t.padre.padre.id:"",e.nivel1=t.padre.padre?t.padre.padre.padre_id:""),t&&3===t.nivel&&(e.nivel3=t.id,e.nivel2=t.padre?t.padre.id:"",e.nivel1=t.padre.padre?t.padre.padre.id:""),t&&2===t.nivel&&(e.nivel2=t.id,e.nivel1=t.padre?t.padre.id:"")},redireccionar:function(){this.urlPrevio&&this.urlPrevio.includes("/pacientes/humanos")&&!this.urlPrevio.includes("/pacientes/humanos/create")&&!this.urlPrevio.includes("edit")?window.location.href=this.urlPrevio:window.location.href="/pacientes/humanos"},guardar:function(){var e=this;this.$refs.cargando.alternar(),this.alternarBotonesSubmit(),this.pacienteHumano.id?axios.patch("/api/pacientes/humanos/".concat(this.pacienteHumano.id),this.pacienteHumano).then((function(){return e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al actualizar paciente",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})):axios.post("/api/pacientes/humanos",this.pacienteHumano).then((function(){return e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar paciente",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()}))}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear":"Editar")+" Paciente\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[e.datos.permisos.crearPacientes||e.datos.permisos.editarPacientes?t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")]):e._e()]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{type:"button",href:"/pacientes/humanos/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"javascript:history.back()"}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("clientes-paciente-humano",{attrs:{paciente:e.pacienteHumano,"id-sistema-externo":e.$usuario.sistemaHisId,"sistemas-externos":e.datos.sistemasExternos,datos:e.datosPacienteHumano},on:{"update:paciente":function(t){e.pacienteHumano=t},error:e.mostrarErrores}})],1),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("historias-clinicas-modal",{attrs:{paciente:e.pacienteHumano}})],1)}),[],!1,null,null,null).exports},3488:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(4590),o=a(8064),i=a(2387);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={components:{UbicacionGeograficaEC:o.Z,UbicacionGeograficaPE:i.Z},props:{paciente:{type:Object},ubicacionesNivel2:{type:Array,default:function(){return[]}}},data:function(){return{componente:"UbicacionGeografica".concat(this.$cliente.pais),cargandoEspecies:!1,cargandoRazas:!1,especieId:"",escala:"A",edadComplemento:"",especies:[],razas:[]}},mounted:function(){this.cargarDatos(),this.paciente.id&&this.calcularBasadoEnFechaNacimiento(this.paciente.fecha_nacimiento)},destroyed:function(){},activated:function(){this.paciente.id||this.inicializarVariables(),this.paciente.id&&this.especieId&&this.buscarRazas(this.especieId)},deactivated:function(){},methods:{inicializarVariables:function(){this.escala="A",this.edadComplemento="",this.especieId="",this.razas=[]},cargarDatos:function(){var e=this;this.cargandoEspecies=!0,this.especieId=this.paciente.especie_id,this.paciente.especie_id&&(this.paciente.especie_id="");var t={taxonomia:r.oH.ANIMAL,nivel:1};axios.get("/api/taxonomias",{params:t}).then((function(t){var a=t.data.data;e.especies=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.$emit("error",a)})).then((function(){e.especieId&&(e.paciente.especie_id=e.especieId),e.cargandoEspecies=!1,e.paciente.id&&e.paciente.especie_id&&e.buscarRazas(e.paciente.especie_id)}))},calcularBasadoEnFechaNacimiento:function(e){if(e&&10===e.length){var t=moment(),a=moment(e),r=t.diff(a,"days"),o=t.diff(a,"months"),i=t.diff(a,"years");this.edadComplemento=this.obtenerEdadComplemento(t,a),i>0?(this.paciente.edad_calculado=i,this.escala="A"):o>0?(this.paciente.edad_calculado=o,this.escala="M"):(this.paciente.edad_calculado=r,this.escala="D")}},calcularBasadoEnEdad:function(){var e=this.paciente.edad_calculado,t=this.escala;t="D"===t?"days":"M"===t?"months":"years",this.paciente.fecha_nacimiento=moment().subtract(e,t).format("Y-MM-DD"),$("#fecha_nacimiento_animal").datepicker("update",this.paciente.fecha_nacimiento)},cambiarEspecie:function(e){this.razas=[],this.paciente.raza_id="",this.buscarRazas(e,!0)},buscarRazas:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){this.cargandoRazas=!0;var r=this.paciente.raza_id;this.paciente.raza_id&&(this.paciente.raza_id="");var o={padreId:e};axios.get("/api/taxonomias",{params:o}).then((function(e){var r=e.data.data;t.razas=r,a&&$("#razaId").focus()})).catch((function(){t.$emit("error","Error al cargar razas")})).then((function(){r&&(t.paciente.raza_id=r),t.cargandoRazas=!1}))}},obtenerEdadComplemento:function(e,t){var a=e.diff(t,"year");t.add(a,"years");var r=e.diff(t,"months");t.add(r,"months");e.diff(t,"days");return 0===r?"":"".concat(r,1===r?" mes":" meses")}},computed:{propsComponente:function(){var e={ref:"ubicacionGeografica".concat(this.$cliente.pais)};switch(this.$cliente.pais){case"EC":e=n(n({},e),{},{provincias:this.ubicacionesNivel2,provinciaId:this.paciente.nivel2,cantonId:this.paciente.nivel3,parroquiaId:this.paciente.nivel4});break;case"PE":e=n(n({},e),{},{departamentos:this.ubicacionesNivel2,departamentoId:this.paciente.nivel2,provinciaId:this.paciente.nivel3,distritoId:this.paciente.nivel4})}return e},tamanoMinimoCelular:function(){return this.$cliente.pais===r.bG.PERU?9:10}},watch:{"paciente.fecha_nacimiento":function(e,t){this.calcularBasadoEnFechaNacimiento(e)}}};const d=(0,a(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_identificacion_animal"}},[e._v("Número")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.numero_identificacion,expression:"paciente.numero_identificacion"}],staticClass:"form-control input-sm",attrs:{name:"numero_identificacion_animal",id:"numero_identificacion_animal",type:"text",maxlength:"25"},domProps:{value:e.paciente.numero_identificacion},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"numero_identificacion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre_animal"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.nombre,expression:"paciente.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre_animal",name:"nombre_animal",type:"text",maxlength:"100",required:""},domProps:{value:e.paciente.nombre},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"nombre",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"sexo_animal"}},[e._v("Sexo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.paciente.sexo,expression:"paciente.sexo"}],staticClass:"form-control input-sm",attrs:{id:"sexo_animal",name:"sexo_animal",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.paciente,"sexo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"F"}},[e._v("Hembra")]),e._v(" "),t("option",{attrs:{value:"M"}},[e._v("Macho")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"especie_id"}},[e._v("\n        Especie\n      ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"especie_id",placeholder:"Seleccione...",options:e.especies,reduce:function(e){return e.id},label:"nombre",loading:e.cargandoEspecies},on:{input:function(t){return e.cambiarEspecie(e.paciente.especie_id)}},scopedSlots:e._u([{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.paciente.especie_id}},"input",r,!1),o))]}},{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.paciente.especie_id,callback:function(t){e.$set(e.paciente,"especie_id",t)},expression:"paciente.especie_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"raza_id"}},[e._v("\n        Raza\n      ")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"raza_id",inputId:"razaId",placeholder:"Seleccione...",options:e.razas,reduce:function(e){return e.id},loading:e.cargandoRazas,label:"nombre"},scopedSlots:e._u([{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.paciente.raza_id}},"input",r,!1),o))]}},{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.paciente.raza_id,callback:function(t){e.$set(e.paciente,"raza_id",t)},expression:"paciente.raza_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_historia_clinica"}},[e._v("Número historia clínica")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.numero_historia_clinica,expression:"paciente.numero_historia_clinica"}],staticClass:"form-control input-sm",attrs:{id:"numero_historia_clinica",name:"numero_historia_clinica",type:"text",maxlength:"20"},domProps:{value:e.paciente.numero_historia_clinica},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"numero_historia_clinica",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fecha_nacimiento_animal"}},[e._v("\n        Fecha de nacimiento\n      ")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.paciente.fecha_nacimiento,expression:"paciente.fecha_nacimiento"}],staticClass:"form-control input-sm cursor-menu",attrs:{id:"fecha_nacimiento_animal","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es",placeholder:"aaaa-mm-dd",autocomplete:"off",required:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})]),e._v(" "),t("div",{staticClass:"col-md-4 form-group"},[t("label",{attrs:{for:"edad_animal"}},[e._v("Edad")]),e._v(" "),t("div",{staticClass:"form-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.edad_calculado,expression:"paciente.edad_calculado"}],staticClass:"form-control input-sm",staticStyle:{width:"80px"},attrs:{id:"edad_animal",type:"number",min:"0"},domProps:{value:e.paciente.edad_calculado},on:{change:e.calcularBasadoEnEdad,keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"edad_calculado",t.target.value)}}}),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.escala,expression:"escala"}],staticClass:"form-control input-sm",attrs:{id:"escala_edad_animal"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.escala=t.target.multiple?a:a[0]},e.calcularBasadoEnEdad]}},[t("option",{attrs:{value:"A"}},[e._v("años")]),e._v(" "),t("option",{attrs:{value:"M"}},[e._v("meses")]),e._v(" "),t("option",{attrs:{value:"D"}},[e._v("días")])]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"A"===e.escala,expression:"escala==='A'"}],staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.edadComplemento))])])]),e._v(" "),t("div",{staticClass:"col-md-4 form-group"},[t("label",{attrs:{for:"esterilizado"}}),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.esterilizado,expression:"paciente.esterilizado"}],attrs:{id:"esterilizado",type:"checkbox"},domProps:{checked:Array.isArray(e.paciente.esterilizado)?e._i(e.paciente.esterilizado,null)>-1:e.paciente.esterilizado},on:{change:function(t){var a=e.paciente.esterilizado,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.paciente,"esterilizado",a.concat([null])):i>-1&&e.$set(e.paciente,"esterilizado",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.paciente,"esterilizado",o)}}}),e._v("\n          Esterilizado\n        ")])])])]),e._v(" "),t("fieldset",[t("legend",[e._v("Dueño")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"nombres_dueno"}},[e._v("Nombres")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.nombres_dueno,expression:"paciente.nombres_dueno"}],staticClass:"form-control input-sm",attrs:{id:"nombres_dueno",name:"nombres_dueno",type:"text",maxlength:"100"},domProps:{value:e.paciente.nombres_dueno},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"nombres_dueno",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"apellidos_dueno"}},[e._v("Apellidos")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.apellidos_dueno,expression:"paciente.apellidos_dueno"}],staticClass:"form-control input-sm",attrs:{id:"apellidos_dueno",name:"apellidos_dueno",type:"text",maxlength:"100"},domProps:{value:e.paciente.apellidos_dueno},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"apellidos_dueno",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"correo_dueno"}},[e._v("Correo electrónico")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.correo_dueno,expression:"paciente.correo_dueno"}],staticClass:"form-control input-sm",attrs:{id:"correo_dueno",name:"correo_dueno",type:"email",maxlength:"100",autocomplete:"off"},domProps:{value:e.paciente.correo_dueno},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"correo_dueno",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t(e.componente,e._b({tag:"component",model:{value:e.paciente.residencia_dueno_id,callback:function(t){e.$set(e.paciente,"residencia_dueno_id",t)},expression:"paciente.residencia_dueno_id"}},"component",e.propsComponente,!1))],1),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"direccion_dueno"}},[e._v("Dirección")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.direccion_dueno,expression:"paciente.direccion_dueno"}],staticClass:"form-control input-sm",attrs:{id:"direccion_dueno",name:"direccion_dueno",type:"text",maxlength:"300"},domProps:{value:e.paciente.direccion_dueno},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"direccion_dueno",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefono_celular_dueno"}},[e._v("Teléfono celular")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.telefono_celular_dueno,expression:"paciente.telefono_celular_dueno"}],staticClass:"form-control input-sm",attrs:{id:"telefono_celular_dueno",name:"telefono_celular_dueno",type:"tel",minlength:e.tamanoMinimoCelular,maxlength:"30",autocomplete:"off"},domProps:{value:e.paciente.telefono_celular_dueno},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"telefono_celular_dueno",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefono_convencional_dueno"}},[e._v("Teléfono convencional")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.telefono_convencional_dueno,expression:"paciente.telefono_convencional_dueno"}],staticClass:"form-control input-sm",attrs:{id:"telefono_convencional_dueno",name:"telefono_convencional_dueno",type:"tel",minlength:"7",maxlength:"30"},domProps:{value:e.paciente.telefono_convencional_dueno},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"telefono_convencional_dueno",t.target.value)}}})])])])])}),[],!1,null,null,null).exports},2174:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(8064),o=a(2387),i=a(4590);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={components:{UbicacionGeograficaEC:r.Z,UbicacionGeograficaPE:o.Z},props:{paciente:{type:Object},idSistemaExterno:{type:Number},datos:{type:Object},sistemasExternos:{type:Array},ubicacionesNivel2:{type:Array,default:function(){return[]}},bloquearDatos:{type:Boolean,default:!1}},data:function(){return{buscarIdentificacionCancelToken:null,procesando:{cargarPaises:!1},escala:"A",edadComplemento:"",identificacionBusqueda:"",pacientes:[],paises:[],tiposIdentificacion:["CED","PAS","OTRO"],autoidentificaciones:[{id:"Afrodescendiente",nombre:"Afrodescendiente"},{id:"Blanco",nombre:"Blanco"},{id:"Indígena",nombre:"Indígena"},{id:"Mestizo",nombre:"Mestizo"},{id:"Montubio",nombre:"Montubio"},{id:"Mulato",nombre:"Mulato"},{id:"Negro",nombre:"Negro"},{id:"Otros",nombre:"Otros"}],condicionesSexuales:[{id:"Heterosexual"},{id:"Homosexual"},{id:"Transexual"},{id:"Trabajadora Sexual"}],instrucciones:[{id:"INICIAL",nombre:"Inicial"},{id:"BASICA",nombre:"Básica"},{id:"BACHILLERATO",nombre:"Bachillerato"},{id:"SUPERIOR",nombre:"Superior"}],generos:[{id:"TRANS_MASCULINO",nombre:"Trans masculino"},{id:"TRANS_FEMENINO",nombre:"Trans femenino"}]}},mounted:function(){this.paciente.id?(this.paciente.ubicacion_nacionalidad_id&&this.cargarPaises(),this.paciente.fecha_nacimiento&&this.calcularBasadoEnFechaNacimiento(this.paciente.fecha_nacimiento)):(this.cargarNacionalidadDesdeStorage(),this.paciente.ubicacion_nacionalidad_id&&this.cargarPaises())},activated:function(){$('#gestionarPacienteModal [data-toggle="popover"]').popover({container:"#gestionarPacienteModal"}),this.paciente.id||(this.inicializarVariables(),this.buscarPersonaPorIdentificacion(),this.cargarNacionalidadDesdeStorage(),this.paciente.ubicacion_nacionalidad_id&&this.cargarPaises())},methods:{inicializarVariables:function(){this.escala="A",this.edadComplemento="",this.identificacionBusqueda="",this.buscarIdentificacionCancelToken=null,this.datos.exito=!1,this.datos.advertencia="",this.datos.error=!1},cargarNacionalidadDesdeStorage:function(){var e=localStorage.getItem("nacionalidad");e&&(this.paciente.ubicacion_nacionalidad_id=Number(e))},calcularBasadoEnFechaNacimiento:function(e){if(this.edadComplemento="",this.paciente.edad_calculado="",e&&10===e.length){var t=moment(),a=moment(e),r=t.diff(a,"days"),o=t.diff(a,"months"),i=t.diff(a,"years");this.edadComplemento=this.obtenerEdadComplemento(t,a),i>0?(this.paciente.edad_calculado=i,this.escala="A"):o>0?(this.paciente.edad_calculado=o,this.escala="M"):(this.paciente.edad_calculado=r,this.escala="D")}},calcularBasadoEnEdad:function(){var e=this.paciente.edad_calculado,t=this.escala;t="D"===t?"days":"M"===t?"months":"years",this.paciente.fecha_nacimiento=moment().subtract(e,t).format("Y-MM-DD"),$("#fecha_nacimiento").datepicker("update",this.paciente.fecha_nacimiento)},enterIdentificacion:function(){$("#sexoHumano").focus(),this.buscarPersonaPorIdentificacion()},buscarPersonaPorIdentificacion:function(){var e=this;if(this.paciente.numero_identificacion=this.paciente.numero_identificacion.trim(),"CED"===this.paciente.tipo_identificacion&&this.paciente.numero_identificacion&&(this.identificacionBusqueda!==this.paciente.numero_identificacion||!this.datos.cargandoPersona)){this.paciente.nombres="",this.paciente.apellidos="",this.paciente.fecha_nacimiento="",this.datos.cargandoPersona=!0,this.datos.exito=!1,this.datos.advertencia="",this.datos.error=!1,$("#iconoAdvertencia").popover("hide"),$("#iconoExito").popover("hide"),$("#iconoError").popover("hide");var t=this.pacientes.find((function(t){return t.identificacion===e.paciente.numero_identificacion}));if(t)setTimeout((function(){e.paciente.nombres=t.nombres,e.paciente.apellidos=t.apellidos,e.paciente.fecha_nacimiento=t.fecha_nacimiento,e.datos.cargandoPersona=!1,e.datos.exito=!0,e.$nextTick((function(){return $("#iconoExito").popover("show")})),setTimeout((function(){return e.datos.exito=!1}),1e4),setTimeout((function(){return $("#iconoExito").popover("hide")}),5e3)}),100);else{this.buscarIdentificacionCancelToken&&this.datos.cargandoPersona&&this.buscarIdentificacionCancelToken.cancel(),this.identificacionBusqueda=this.paciente.numero_identificacion,this.buscarIdentificacionCancelToken=axios.CancelToken.source();var a={};"EC"===this.$cliente.pais&&(a.pdf=!0),axios.get("/api/identidad/".concat(this.paciente.numero_identificacion),{cancelToken:this.buscarIdentificacionCancelToken.token,params:a}).then((function(t){var a=t.data.data,r={identificacion:e.paciente.numero_identificacion,nombres:null,apellidos:null,fecha_nacimiento:null,sexo:null};a.nombres&&(e.paciente.nombres=a.nombres,r.nombres=a.nombres),a.apellidos&&(e.paciente.apellidos=a.apellidos,r.apellidos=a.apellidos),a.fechaNacimiento&&(e.paciente.fecha_nacimiento=a.fechaNacimiento,r.fecha_nacimiento=a.fechaNacimiento,e.pacientes.push(r)),a.sexo&&(e.paciente.sexo=a.sexo,r.sexo=a.sexo,e.pacientes.push(r)),""===a.nombres&&""===a.apellidos&&(e.datos.advertencia="No se encontraron datos para la identificación especificada",e.$nextTick((function(){return $("#iconoAdvertencia").popover("show")})),setTimeout((function(){return e.datos.advertencia=""}),15e3),setTimeout((function(){return $("#iconoAdvertencia").popover("hide")}),8e3)),e.datos.advertencia||(e.datos.exito=!0,e.$nextTick((function(){return $("#iconoExito").popover("show")})),setTimeout((function(){return e.datos.exito=!1}),1e4),setTimeout((function(){return $("#iconoExito").popover("hide")}),5e3))})).catch((function(t){return axios.isCancel(t)||(e.datos.error=e.procesarErrorResponse(t),e.$nextTick((function(){return $("#iconoError").popover("show")})),setTimeout((function(){return e.datos.advertencia=""}),15e3),setTimeout((function(){return $("#iconoError").popover("hide")}),8e3)),t})).then((function(t){axios.isCancel(t)||(e.datos.cargandoPersona=!1,e.buscarIdentificacionCancelToken=null)}))}}},obtenerEdadComplemento:function(e,t){var a=e.diff(t,"year");t.add(a,"years");var r=e.diff(t,"months");t.add(r,"months");e.diff(t,"days");return 0===r?"":"".concat(r,1===r?" mes":" meses")},cambioNacionalidad:function(e){e?localStorage.setItem("nacionalidad",e):localStorage.removeItem("nacionalidad")},cargarPaises:function(){var e=this;_.isEmpty(this.paises)&&(this.procesando.cargarPaises||(this.procesando.cargarPaises=!0,axios.get("/api/ubicaciones",{params:{nivel:1}}).then((function(t){var a=t.data.data;e.paises=a})).catch((function(){e.$emit("error","Error al cargar paises")})).finally((function(){return e.procesando.cargarPaises=!1}))))}},computed:{propsComponente:function(){var e={ref:"ubicacionGeografica".concat(this.$cliente.pais)};switch(this.$cliente.pais){case"EC":e=n(n({},e),{},{provincias:this.ubicacionesNivel2,provinciaId:this.paciente.nivel2,cantonId:this.paciente.nivel3,parroquiaId:this.paciente.nivel4});break;case"PE":e=n(n({},e),{},{departamentos:this.ubicacionesNivel2,departamentoId:this.paciente.nivel2,provinciaId:this.paciente.nivel3,distritoId:this.paciente.nivel4})}return e},nombreSistemaExterno:function(){if(this.indiceHistoriaClinicaPorSistemaExterno<0)return"";var e=this.paciente.historia_clinica[this.indiceHistoriaClinicaPorSistemaExterno].id,t=this.sistemasExternos.find((function(t){return t.id===e}));return t?t.nombre:""},indiceHistoriaClinicaPorSistemaExterno:function(){var e=this.idSistemaExterno;return 1===this.sistemasExternos.length&&(e=this.sistemasExternos[0].id),this.paciente.historia_clinica.findIndex((function(t){return Number(t.id)===Number(e)}))},puedeRegistrarIdentificacion:function(){return!this.paciente.id||!this.bloquearDatos&&this.$can("editar-pacientes-identificacion")},tamanoMinimoCelular:function(){return this.$cliente.pais===i.bG.PERU?9:10},errores:function(){return Array.isArray(this.datos.error)?this.datos.error.join(". "):this.datos.error}},watch:{"paciente.id":function(e,t){e&&(this.paciente.ubicacion_nacionalidad_id&&this.cargarPaises(),this.paciente.fecha_nacimiento&&this.calcularBasadoEnFechaNacimiento(this.paciente.fecha_nacimiento))},"paciente.fecha_nacimiento":function(e,t){this.calcularBasadoEnFechaNacimiento(e)}}};const d=(0,a(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.puedeRegistrarIdentificacion},attrs:{for:"tipoIdentificacionHumano"}},[e._v("Tipo")]),e._v(" "),e.puedeRegistrarIdentificacion?t("select",{directives:[{name:"model",rawName:"v-model",value:e.paciente.tipo_identificacion,expression:"paciente.tipo_identificacion"}],staticClass:"form-control input-sm",attrs:{id:"tipoIdentificacionHumano",name:"tipoIdentificacionHumano",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.paciente,"tipo_identificacion",t.target.multiple?a:a[0])}}},e._l(e.tiposIdentificacion,(function(a){return t("option",{domProps:{value:a}},[e._v("\n          "+e._s(e._f("tipoIdentificacion")(a,e.$cliente.pais))+"\n        ")])})),0):t("div",[e._v("\n        "+e._s(e._f("tipoIdentificacion")(e.paciente.tipo_identificacion,e.$cliente.pais))+"\n      ")])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.puedeRegistrarIdentificacion},attrs:{for:"numeroIdentificacionHumano"}},[e._v("Número")]),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:""!==e.datos.advertencia,expression:"datos.advertencia!==''"}],staticClass:"fas fa-exclamation-triangle fa-fw",staticStyle:{color:"#f4bd00"},attrs:{id:"iconoAdvertencia","aria-hidden":"true","data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":e.datos.advertencia}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.datos.exito,expression:"datos.exito"}],staticClass:"fas fa-check-circle text-success",attrs:{id:"iconoExito","aria-hidden":"true","data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":"Datos obtenidos exitosamente"}}),e._v(" "),e.datos.error?t("i",{staticClass:"fas fa-times-circle fa-fw text-danger",attrs:{id:"iconoError","aria-hidden":"true","data-toggle":"popover","data-trigger":"hover","data-placement":"top","data-content":!0===e.datos.error?"Servicio externo no disponible":e.errores}}):e._e(),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.datos.cargandoPersona,expression:"datos.cargandoPersona"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true",title:"Obteniendo datos de persona"}}),e._v(" "),e.puedeRegistrarIdentificacion?t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.numero_identificacion,expression:"paciente.numero_identificacion"}],staticClass:"form-control input-sm",attrs:{id:"numeroIdentificacionHumano",name:"numeroIdentificacionHumano",type:"text",maxlength:"25",autocomplete:"off",required:""},domProps:{value:e.paciente.numero_identificacion},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.enterIdentificacion.apply(null,arguments))},blur:e.buscarPersonaPorIdentificacion,input:function(t){t.target.composing||e.$set(e.paciente,"numero_identificacion",t.target.value)}}}):t("div",[e._v("\n        "+e._s(e.paciente.numero_identificacion)+"\n      ")])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"sexoHumano"}},[e._v("Sexo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.paciente.sexo,expression:"paciente.sexo"}],staticClass:"form-control input-sm",attrs:{id:"sexoHumano",name:"sexoHumano",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.paciente,"sexo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"F"}},[e._v("Femenino")]),e._v(" "),t("option",{attrs:{value:"M"}},[e._v("Masculino")])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"generoHumano"}},[e._v("Género")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"generoHumano",placeholder:"Seleccione...",options:e.generos,reduce:function(e){return e.id},label:"nombre"},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.paciente.genero,callback:function(t){e.$set(e.paciente,"genero",t)},expression:"paciente.genero"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:!e.bloquearDatos},attrs:{for:"nombresHumano"}},[e._v("Nombres")]),e._v(" "),e.bloquearDatos?t("div",[e._v("\n        "+e._s(e.paciente.nombres)+"\n      ")]):t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.nombres,expression:"paciente.nombres"}],staticClass:"form-control input-sm",attrs:{id:"nombresHumano",name:"nombresHumano",type:"text",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.paciente.nombres},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"nombres",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:!e.bloquearDatos},attrs:{for:"apellidosHumano"}},[e._v("Apellidos")]),e._v(" "),e.bloquearDatos?t("div",[e._v("\n        "+e._s(e.paciente.apellidos)+"\n      ")]):t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.apellidos,expression:"paciente.apellidos"}],staticClass:"form-control input-sm",attrs:{id:"apellidosHumano",name:"apellidosHumano",type:"text",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.paciente.apellidos},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"apellidos",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"correoHumano"}},[e._v("Correo electrónico")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.correo,expression:"paciente.correo"}],staticClass:"form-control input-sm",attrs:{id:"correoHumano",name:"correoHumano",type:"email",maxlength:"100"},domProps:{value:e.paciente.correo},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"correo",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaNacimientoHumano"}},[e._v("\n        Fecha de nacimiento\n      ")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.paciente.fecha_nacimiento,expression:"paciente.fecha_nacimiento"}],staticClass:"form-control input-sm",attrs:{id:"fechaNacimientoHumano","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es",placeholder:"aaaa-mm-dd",autocomplete:"off",required:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{attrs:{for:"edadHumano"}},[e._v("Edad")]),e._v(" "),t("div",{staticClass:"form-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.edad_calculado,expression:"paciente.edad_calculado"}],staticClass:"form-control input-sm",staticStyle:{width:"80px"},attrs:{id:"edadHumano",type:"number",min:"0"},domProps:{value:e.paciente.edad_calculado},on:{change:e.calcularBasadoEnEdad,keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"edad_calculado",t.target.value)}}}),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.escala,expression:"escala"}],staticClass:"form-control input-sm",attrs:{id:"escala_edad"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.escala=t.target.multiple?a:a[0]},e.calcularBasadoEnEdad]}},[t("option",{attrs:{value:"A"}},[e._v("años")]),e._v(" "),t("option",{attrs:{value:"M"}},[e._v("meses")]),e._v(" "),t("option",{attrs:{value:"D"}},[e._v("días")])]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"A"===e.escala,expression:"escala==='A'"}],staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.edadComplemento))])])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{title:"Historia clínica","data-toggle":"tooltip"}},[e._v("\n        HC "+e._s(e.nombreSistemaExterno)+"\n      ")]),e._v(" "),e.indiceHistoriaClinicaPorSistemaExterno>=0&&(e.idSistemaExterno||0===e.sistemasExternos.length)?t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.historia_clinica[e.indiceHistoriaClinicaPorSistemaExterno].numero,expression:"paciente.historia_clinica[indiceHistoriaClinicaPorSistemaExterno].numero"}],staticClass:"form-control input-sm",attrs:{id:"numero_historia_clinica",name:"numero_historia_clinica",type:"text",maxlength:"20"},domProps:{value:e.paciente.historia_clinica[e.indiceHistoriaClinicaPorSistemaExterno].numero},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente.historia_clinica[e.indiceHistoriaClinicaPorSistemaExterno],"numero",t.target.value)}}}):t("output",[e._v("\n        "+e._s(e.paciente.numero_historia_clinica)+"\n        "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button","data-toggle":"modal","data-keyboard":"false","data-backdrop":"static","data-target":"#modalHistoriasClinicas"}},[t("i",{staticClass:"fas fa-fw",class:{"fa-pencil-alt":e.paciente.numero_historia_clinica,"fa-plus":!e.paciente.numero_historia_clinica}})])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-9 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"datos_clinicos"}},[e._v("Datos clínicos (Condiciones permanentes del paciente)")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.paciente.datos_clinicos,expression:"paciente.datos_clinicos"}],staticClass:"form-control input-sm",attrs:{id:"datos_clinicos",name:"datos_clinicos",rows:"1"},domProps:{value:e.paciente.datos_clinicos},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.stopPropagation()},input:function(t){t.target.composing||e.$set(e.paciente,"datos_clinicos",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"nacionalidadHumano"}},[e._v("Nacionalidad")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"nacionalidadHumano",placeholder:"Seleccione...",options:e.paises,reduce:function(e){return e.id},label:"nombre",loading:e.procesando.cargarPaises},on:{input:e.cambioNacionalidad,open:e.cargarPaises},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.paciente.ubicacion_nacionalidad_id,callback:function(t){e.$set(e.paciente,"ubicacion_nacionalidad_id",t)},expression:"paciente.ubicacion_nacionalidad_id"}})],1)]),e._v(" "),t("fieldset",[t("legend",[e._v("Teléfonos")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefonoCelularHumano"}},[e._v("Teléfono celular")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.telefono_celular,expression:"paciente.telefono_celular"}],staticClass:"form-control input-sm",attrs:{id:"telefonoCelularHumano",name:"telefonoCelularHumano",type:"tel",minlength:e.tamanoMinimoCelular,maxlength:"30",autocomplete:"off"},domProps:{value:e.paciente.telefono_celular},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"telefono_celular",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefonoConvencionalHumano"}},[e._v("Teléfono convencional")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.telefono_convencional,expression:"paciente.telefono_convencional"}],staticClass:"form-control input-sm",attrs:{id:"telefonoConvencionalHumano",name:"telefonoConvencionalHumano",type:"tel",minlength:"7",maxlength:"30"},domProps:{value:e.paciente.telefono_convencional},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"telefono_convencional",t.target.value)}}})])])]),e._v(" "),t("fieldset",[t("legend",[e._v("Dirección")]),e._v(" "),t("div",{staticClass:"row"},[t("UbicacionGeografica".concat(e.$cliente.pais),e._b({tag:"component",model:{value:e.paciente.ubicacion_residencia_id,callback:function(t){e.$set(e.paciente,"ubicacion_residencia_id",t)},expression:"paciente.ubicacion_residencia_id"}},"component",e.propsComponente,!1))],1),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"barrioHumano"}},[e._v("Barrio")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.barrio,expression:"paciente.barrio"}],staticClass:"form-control input-sm",attrs:{id:"barrioHumano",name:"barrioHumano",type:"text",maxlength:"150"},domProps:{value:e.paciente.barrio},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"barrio",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"direccionHumano"}},[e._v("Dirección")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.paciente.direccion,expression:"paciente.direccion"}],staticClass:"form-control input-sm resize-vertical",attrs:{id:"direccionHumano",name:"direccionHumano",maxlength:"300",rows:"1"},domProps:{value:e.paciente.direccion},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.stopPropagation()},input:function(t){t.target.composing||e.$set(e.paciente,"direccion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"direccionNumeracionHumano"}},[e._v("Numeración")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.direccion_numeracion,expression:"paciente.direccion_numeracion"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"direccionNumeracionHumano",name:"direccionNumeracionHumano",maxlength:"10"},domProps:{value:e.paciente.direccion_numeracion},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"direccion_numeracion",t.target.value)}}})])])]),e._v(" "),t("fieldset",[t("legend",[e._v("Otros")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero_poliza"}},[e._v("Número póliza")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.paciente.numero_poliza,expression:"paciente.numero_poliza"}],staticClass:"form-control input-sm",attrs:{id:"numero_poliza",name:"numero_poliza",type:"text",maxlength:"20"},domProps:{value:e.paciente.numero_poliza},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.paciente,"numero_poliza",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"autoidentificacion"}},[e._v("Autoidentificación")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.paciente.autoidentificacion,expression:"paciente.autoidentificacion"}],staticClass:"form-control input-sm",attrs:{id:"autoidentificacion",name:"autoidentificacion"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.paciente,"autoidentificacion",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.autoidentificaciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n            "+e._s(a.nombre)+"\n          ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"condicion_sexual"}},[e._v("Condición sexual")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.paciente.condicion_sexual,expression:"paciente.condicion_sexual"}],staticClass:"form-control input-sm",attrs:{id:"condicion_sexual",name:"condicion_sexual"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.paciente,"condicion_sexual",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.condicionesSexuales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.id)+"\n          ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"instruccionHumano"}},[e._v("Instrucción")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.paciente.instruccion,expression:"paciente.instruccion"}],staticClass:"form-control input-sm",attrs:{id:"instruccionHumano",name:"instruccionHumano"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.paciente,"instruccion",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.instrucciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n          ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"ocupacionHumano"}},[e._v("Ocupación")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.paciente.ocupacion,expression:"paciente.ocupacion"}],staticClass:"form-control input-sm resize-vertical",attrs:{id:"ocupacionHumano",name:"ocupacionHumano",rows:"2"},domProps:{value:e.paciente.ocupacion},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.stopPropagation()},input:function(t){t.target.composing||e.$set(e.paciente,"ocupacion",t.target.value)}}})])])])])}),[],!1,null,null,null).exports},3618:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var r=a(2328),o=a(8064),i=a(6714),s=a(7226),n=a(7974),c=a(9676),l=a(2979),d=a(1679);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const h={props:["id","portal","token","datos","medicoPedido","cliente"],components:{Liston:r.Z,UbicacionGeograficaEc:o.Z,BuscarMedicoModal:i.Z,GestionarMedicoModal:s.Z,BuscarPacienteModal:c.Z,GestionarPacienteModal:l.Z,ScrollInfinito:d.Z},data:function(){return{indiceExamen:null,primerClickEpi:!1,procesando:{cargarExamenes:!1},cargandoDiagnosticoEpi:!1,cargandoMedico:!1,cargandoPaciente:!1,cargandoExamenes:!1,cargandoPerfiles:!1,cadenaBusqueda:"",cadenaBusquedaExamenes:"",cadenaBusquedaDetalles:"",cantidadOtrosPedidos:null,grupoId:"",registro:{id:this.id,cliente_id:"",categoria_id:"",sucursal_id:"",paciente_id:"",paciente_identificacion:"",paciente_type:"",paciente_nombre:"",paciente_taxonomia:"",paciente_fecha_nacimiento:"",paciente_sexo:"",paciente_correo:"",paciente_direccion:"",paciente_telefono:"",paciente_numero_poliza:"",paciente_dueno_responsable:"",medico_id:"",medico_nombre:"",diagnostico_id:"",diagnostico_concepto:"",tipo_atencion_id:"",servicio_id:"",sistema_externo_id:null,fecha_cita:"",embarazada:!1,comentario:"",numero_pedido_externo:"",temperatura:"",semanas_gestacion:"",fecha_ultima_menstruacion:"",cama:"",variablesEpidemiologicas:{}},variablesEpidemiologicas:{id:"",cumple_definicion_caso:"",epi_1:"",fecha_inicio_sintomas:"",diagnostico_id:"",diagnostico_concepto:"",comorbilidad:"",antecedente_viaje:"",antecedente_infeccion:"",fecha_viaje:"",lugar_viaje:"",unidad_salud_notifica:"",unidad_salud_parroquia_id:"",semana_epidemiologica:""},detallesPedidos:[],clientes:[],categorias:[],sucursales:[],examenes:[],grupos:[],ubicacionesNivel2:[],key:0,tiposAtenciones:[],servicios:[],count:0,pagina:1,registroAuxiliar:{provinciaId:"",cantonId:"",nombreUsuarioIngresa:""},antecedentesInfeccion:[{id:"NUCLEO_FAMILIAR",nombre:"Núcleo familiar"},{id:"TRABAJO",nombre:"Trabajo"},{id:"TRANSPORTE",nombre:"Transporte"},{id:"OTRO_PAIS",nombre:"Otro país"},{id:"VIAJE_DOMESTICO",nombre:"Viaje doméstico"},{id:"CENTROS_CUIDADO",nombre:"Centros de cuidado"},{id:"CENTROS_PRIVACION_LIBERTAD",nombre:"Centros de privacion de libertad"},{id:"REUNION_MASIVA",nombre:"Reunión masiva"},{id:"REUNION_SOCIAL_CERRADA",nombre:"Reunión social cerrada"},{id:"INDETERMINADO",nombre:"Indeterminado"}],paginacion:{paginaActual:1,totalPaginas:1,totalRegistros:0}}},created:function(){this.configurarInterceptorParaPortal()},mounted:function(){$("body").popover({selector:'[data-toggle="popover"]',container:"body",trigger:"hover"}),this.cargarDatos()},methods:{limpiarFormulario:function(){this.cadenaBusqueda="",this.cadenaBusquedaExamenes="",this.cadenaBusquedaDetalles="",this.registro.id=this.id,this.registro.paciente_id="",this.registro.paciente_type="",this.registro.paciente_identificacion="",this.registro.paciente_nombre="",this.registro.paciente_taxonomia="",this.registro.paciente_fecha_nacimiento="",this.registro.paciente_sexo="",this.registro.paciente_correo="",this.registro.paciente_direccion="",this.registro.paciente_telefono="",this.registro.paciente_numero_poliza="",this.registro.paciente_dueno_responsable="",this.registro.medico_id="",this.registro.medico_nombre="",this.registro.diagnostico_id="",this.registro.diagnostico_concepto="",this.registro.embarazada=!1,this.registro.temperatura="",this.registro.semanas_gestacion="",this.registro.fecha_ultima_menstruacion="",this.registro.cama="",this.registro.detallesPedidos=[],this.detallesPedidos=[],this.examenes=[],this.cargarEmpresaPorDefecto()},limpiarCadenaBusqueda:function(){this.cadenaBusqueda=""},limpiarCadenaBusquedaExamenes:function(){this.cadenaBusquedaExamenes=""},limpiarCadenaBusquedaDetalles:function(){this.cadenaBusquedaDetalles=""},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e,t){this.$refs.alerta.mostrarAlerta("info",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},ocultarMensajes:function(){this.$refs.alerta.ocultarAlertas()},alternarCamposFormulario:function(){"disabled"===$("fieldset").attr("disabled")?$("fieldset").removeAttr("disabled"):$("fieldset").attr("disabled","disabled")},cargarDatos:function(){var e=this;this.$refs.cargando.alternar();var t={portal:this.portal};"0"===this.id?axios.get("/api/pedidos/create",{params:t}).then((function(t){var a=t.data;e.crear(a.data),e.alternarCamposFormulario()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar pedido!",a)})).then((function(){return e.$refs.cargando.alternar()})):axios.get("/api/pedidos/".concat(this.id,"/edit"),{params:t}).then((function(t){var a=t.data;e.editar(a.data),e.alternarCamposFormulario()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar pedido!",a)})).then((function(){return e.$refs.cargando.alternar()}))},crear:function(e){(this.esMedico||(this.clientes=e.clientes),this.sucursales=e.sucursales,this.grupos=e.grupos,this.examenes=e.examenes,this.servicios=e.servicios,this.tiposAtenciones=e.tiposAtenciones,e.cambiarSucursales||(this.datos.permisos.cambiarSucursales=e.cambiarSucursales),this.detallesPedidos=[],e.sucursalId&&(this.registro.sucursal_id=e.sucursalId),e.clientePorDefectoId&&!this.esMedico)&&(this.clientes.find((function(t){return t.id===parseInt(e.clientePorDefectoId)}))?(this.registro.cliente_id=e.clientePorDefectoId,this.cargarCategorias()):this.mostrarAdvertencia("¡Advertencia!",'El cliente por defecto está "Inactivo".'))},editar:function(e){this.clientes=e.clientes,this.grupos=e.grupos,this.examenes=e.examenes,this.sucursales=e.sucursales,this.examenes=e.examenes,this.servicios=e.servicios,this.tiposAtenciones=e.tiposAtenciones,e.cambiarSucursales||(this.datos.permisos.cambiarSucursales=e.cambiarSucursales);var t=e.pedido;if(this.registro.id=t.id,this.registro.cliente_id=t.categoria&&t.categoria.empresa?t.categoria.empresa.id:"",this.cargarCategorias(!1),this.registro.categoria_id=t.categoria_id?t.categoria_id:"",this.registro.sucursal_id=t.sucursal_id?t.sucursal_id:"",this.registro.paciente_id=t.paciente_id,this.registro.paciente_type=t.paciente_type,this.registro.paciente_identificacion=t.paciente.numero_identificacion,this.registro.paciente_sexo=t.paciente.sexo,this.registro.paciente_correo=t.paciente.correo,this.registro.paciente_direccion=t.paciente.direccion,this.registro.paciente_telefono=t.paciente.telefono_celular,t.es_humano&&(this.registro.paciente_tipo=t.paciente.tipo_identificacion,this.registro.paciente_nombre=t.paciente.nombre_paciente,this.registro.paciente_direccion=t.paciente.direccion_completa,this.registro.paciente_numero_poliza=t.paciente.numero_poliza,this.registro.paciente_fecha_nacimiento=t.paciente.fecha_nacimiento),t.es_animal){var a=t.paciente;this.registro.paciente_nombre=a.nombre_paciente,this.registro.paciente_taxonomia="".concat(a.raza.padre.nombre," - ").concat(a.raza.nombre),this.registro.paciente_fecha_nacimiento=a.fecha_nacimiento,this.cargarDuenoResponsable(t.paciente_type,a)}if(t.es_objeto&&(this.registro.paciente_nombre=t.paciente.descripcion,this.cargarDuenoResponsable(t.paciente_type,t.paciente)),this.registro.medico_id=t.medico_id,this.registro.medico_nombre=t.medico?t.medico.nombre_completo:"",this.registro.diagnostico_id=t.diagnostico_id,this.registro.diagnostico_concepto=t.diagnostico?t.diagnostico.concepto:"",this.registro.tipo_atencion_id=t.tipo_atencion_id?t.tipo_atencion_id:"",this.registro.servicio_id=t.servicio_id?t.servicio_id:"",this.registro.sistema_externo_id=t.sistema_externo_id,this.registro.comentario=t.comentario,this.registro.embarazada=t.embarazada,this.registro.fecha_cita=t.fecha_cita,this.registro.numero_pedido_externo=t.numero_pedido_externo,this.registro.temperatura=t.temperatura,this.registro.semanas_gestacion=t.semanas_gestacion,this.registro.fecha_ultima_menstruacion=t.fecha_ultima_menstruacion,this.registro.cama=t.cama,this.registroAuxiliar.nombreUsuarioIngresa=t.usuario_ingresa?t.usuario_ingresa.nombre_usuario:"",t.variable_epidemiologica){var r=t.variable_epidemiologica;this.variablesEpidemiologicas.id=r.id,this.variablesEpidemiologicas.cumple_definicion_caso=r.cumple_definicion_caso,this.variablesEpidemiologicas.fecha_inicio_sintomas=r.fecha_inicio_sintomas,this.variablesEpidemiologicas.epi_1=r.epi_1,this.variablesEpidemiologicas.diagnostico_id=r.diagnostico_id,this.variablesEpidemiologicas.diagnostico_concepto=r.diagnostico?r.diagnostico.concepto:"",this.variablesEpidemiologicas.comorbilidad=r.comorbilidad,this.variablesEpidemiologicas.antecedente_viaje=r.antecedente_viaje?r.antecedente_viaje:"",this.variablesEpidemiologicas.fecha_viaje=r.fecha_viaje,this.variablesEpidemiologicas.lugar_viaje=r.lugar_viaje,this.variablesEpidemiologicas.unidad_salud_notifica=r.unidad_salud_notifica,this.variablesEpidemiologicas.unidad_salud_parroquia_id=r.unidad_salud_parroquia_id?r.unidad_salud_parroquia_id:"",this.variablesEpidemiologicas.semana_epidemiologica=r.semana_epidemiologica,this.variablesEpidemiologicas.antecedente_infeccion=this.definirAntecedenteInfeccionEpi(r.antecedente_infeccion);var o=r.unidad_salud_parroquia;o&&(this.registroAuxiliar.provinciaId=o.padre?o.padre.padre_id:"",this.registroAuxiliar.cantonId=o.padre_id,this.key++)}this.cargarDetallesPedidoYExamenesConPrecio(t),this.detalles_pedidos=[]},definirAntecedenteInfeccionEpi:function(e){return e?(this.antecedentesInfeccion.find((function(t){return t.id===e}))||(this.antecedentesInfeccion.push({id:"OTRO",nombre:"(Obsoleto) ".concat(e)}),e="OTRO"),e):""},cargarUbicaciones:function(){var e=this;_.isEmpty(this.ubicacionesNivel2)&&axios.get("/api/ubicaciones",{params:{padreCodigo:this.$cliente.pais}}).then((function(t){var a=t.data.data;e.ubicacionesNivel2=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar ubicaciones",a)}))},cargarCategorias:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.registro.cliente_id&&!this.esMedico)return this.examenes=[],this.categorias=[],void(this.registro.categoria_id="");var a=this.clientes.find((function(t){return t.id===e.registro.cliente_id}));if(a){this.categorias=a.subempresas;var r=this.categorias.find((function(e){return e.predeterminada}));r&&(this.registro.categoria_id=r.id,t&&this.cargarExamenesConPrecio())}},cargarExamenesPorGrupo:function(e){var t=this;if(this.grupoId="",this.ocultarMensajes(),""!==e)if(0!==this.examenes.length){this.cargandoPerfiles=!0;var a={cadenaBusqueda:e};axios.get("/api/detalles-grupos",{params:a}).then((function(a){var r=a.data.data;if(0!==r.length){var o,i=0,s=f(t.examenes);try{var n=function(){var e,a=o.value,s=f(r);try{for(s.s();!(e=s.n()).done;){var n=e.value;if(a.id===n.examen_id)0===t.detallesPedidos.reduce((function(e,t){return t.examen_id===a.id?e+=1:e}),0)&&(t.agregarExamen(a),i++)}}catch(e){s.e(e)}finally{s.f()}};for(s.s();!(o=s.n()).done;)n()}catch(e){s.e(e)}finally{s.f()}if(i>0){var c=t.grupos.find((function(t){return t.id===e}));t.mostrarExito("Examenes de perfil <strong>".concat(c.nombre,"</strong> agregados"))}}else t.mostrarAdvertencia("¡Advertencia!","No existen exámenes definidos para este grupo.")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al cargar los exámenes por grupo!",a)})).then((function(){return t.cargandoPerfiles=!1}))}else this.mostrarAdvertencia("¡Advertencia!","No existen exámenes disponibles.")},autocompletarExamen:function(){1===this.examenesFiltrados.length&&this.agregarExamen(this.examenesFiltrados[0])},agregarExamen:function(e){if(this.ocultarMensajes(),!this.detallesPedidos.some((function(t){return t.examen_id===e.id}))){this.$refs.buscarExamen.focus(),this.$refs.buscarExamen.select(),this.indiceExamen=null;var t={examen_id:e.id,examen:e,valor:e.valor};this.detallesPedidos.push(t),setTimeout((function(){var e=document.getElementById("examenes-seleccioandos");e.scrollTop=e.scrollHeight}),100)}},eliminarDetalle:function(e){var t=this.detallesPedidos.indexOf(e);this.detallesPedidos.splice(t,1)},eliminarDetalles:function(){this.detallesPedidos=[]},posteriorAGuardar:function(e){var t=e.data;this.generarPDF(t.id),this.navegarAPedidos()},guardar:function(){var e=this,t=this.sucursales.find((function(t){return t.id===e.registro.sucursal_id}));if(this.registro.sucursal_id&&"N"===t.estado)this.mostrarErrores("¡Error!","No se puede escoger una sucursal inactiva.");else{if("OTRO"===this.variablesEpidemiologicas.antecedente_infeccion)return $('.nav a[href="#variablesEpidemilogicas"]').tab("show"),void this.mostrarErrores("¡Error!",'El campo "Lugar o antecedente probable de infección" está obsoleto.');this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var a={id:this.id,categoria_id:this.registro.categoria_id,sucursal_id:this.registro.sucursal_id,paciente_id:this.registro.paciente_id,paciente_type:this.registro.paciente_type,medico_id:this.esMedico?this.medicoPedido.id:this.registro.medico_id,diagnostico_id:this.registro.diagnostico_id,tipo_atencion_id:this.registro.tipo_atencion_id,servicio_id:this.registro.servicio_id,sistema_externo_id:this.registro.sistema_externo_id,comentario:this.registro.comentario,embarazada:this.registro.embarazada,fecha_cita:this.registro.fecha_cita,temperatura:this.registro.temperatura,semanas_gestacion:this.registro.semanas_gestacion,fecha_ultima_menstruacion:this.registro.fecha_ultima_menstruacion,cama:this.registro.cama,detallesPedidos:this.detallesPedidos,variablesEpidemiologicas:this.variablesEpidemiologicas};a.variablesEpidemiologicas.epi_1=a.variablesEpidemiologicas.epi_1?a.variablesEpidemiologicas.epi_1:"",a.variablesEpidemiologicas.cumple_definicion_caso=a.variablesEpidemiologicas.cumple_definicion_caso?a.variablesEpidemiologicas.cumple_definicion_caso:"";var r={portal:this.portal};"0"===this.id?axios.post("/api/pedidos",a,{params:r}).then((function(t){var a=t.data;return e.posteriorAGuardar(a)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al crear pedido",a)})).then((function(){e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})):axios.patch("/api/pedidos/".concat(this.id),a,{params:r}).then((function(t){var a=t.data;return e.posteriorAGuardar(a)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al crear pedido",a)})).then((function(){e.$refs.cargando.alternar(),e.alternarBotonesSubmit()}))}},generarPDF:function(e){var t="/pedidos/";this.esMedico&&(t="/consulta-resultados-medicos"+t),this.esCliente&&(t="/consulta-resultados-empresas"+t);var a={token:this.token,portal:this.portal,esCreacion:"0"===this.id};a=this.obtenerParametrosUrl(a),window.open("".concat(t).concat(e,"/pdf").concat(a),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},navegarAPedidos:function(){var e=document.referrer,t=window.location.hostname;e.includes(t)||(e="/pedidos",this.esMedico&&(e="/consulta-resultados-medicos/pedidos?token=".concat(this.token)),this.esCliente&&(e="/consulta-resultados-empresas/pedidos?token=".concat(this.token))),window.location.href=e},limpiarPaciente:function(){this.registro.paciente_id="",this.registro.paciente_type="",this.registro.paciente_nombre="",this.registro.paciente_taxonomia="",this.registro.paciente_fecha_nacimiento="",this.registro.paciente_sexo="",this.registro.paciente_correo="",this.registro.paciente_direccion="",this.registro.paciente_telefono="",this.registro.paciente_numero_poliza="",this.registro.paciente_dueno_responsable=""},autocompletarPaciente:function(){var e=this;if(this.ocultarMensajes(),this.limpiarPaciente(),this.registro.paciente_identificacion){this.registro.paciente_identificacion=this.registro.paciente_identificacion.trim();var t={identificacion:this.registro.paciente_identificacion};this.cargandoPaciente=!0,axios.get("/api/pacientes",{params:t}).then((function(t){var a=t.data.data;if(0!==a.length)return a.length>1?(e.cadenaBusqueda=e.registro.paciente_identificacion,void e.abrirPaciente(!0)):void e.pacienteSeleccionado(a[0]);e.abrirModalCrearPaciente()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al autocompletar paciente!",a)})).then((function(){return e.cargandoPaciente=!1}))}},abrirPacienteSinBusqueda:function(){this.abrirPaciente(!1)},abrirPaciente:function(e){var t=e?this.cadenaBusqueda:"",a=(0,n.MD)({"cadena-busqueda":t});$("#buscarPaciente").modal({},a)},pacienteSeleccionado:function(e){e&&(this.registro.paciente_id="",this.registro.paciente_nombre="",this.registro.paciente_id=e.id,this.registro.paciente_type=e.tipo,this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_fecha_nacimiento=e.fecha_nacimiento,this.registro.paciente_sexo=e.sexo,this.registro.paciente_correo=e.correo,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_direccion=[e.direccion,e.direccion_numeracion].filter(Boolean).join(" "),this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza=e.numero_poliza,this.cargarDuenoResponsableVista(e.tipo,e),this.cargarRaza(e.tipo,e.id))},cargarRaza:function(e,t){var a=this;"App\\Models\\PacienteAnimal"===e&&axios.get("/api/pacientes/animales/".concat(t)).then((function(e){var t=e.data.data;a.registro.paciente_taxonomia="".concat(t.raza.padre.nombre," - ").concat(t.raza.nombre)})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores("¡Error al buscar raza!",t)}))},cargarDuenoResponsableVista:function(e,t){"App\\Models\\PacienteHumano"!==e&&(this.registro.paciente_dueno_responsable=[t.apellidos,t.nombres].filter(Boolean).join(" "))},cargarDuenoResponsable:function(e,t){this.registro.paciente_dueno_responsable="","App\\Models\\PacienteAnimal"===e&&(this.registro.paciente_dueno_responsable=[t.apellidos_dueno,t.nombres_dueno].filter(Boolean).join(" ")),"App\\Models\\SujetoObjeto"===e&&(this.registro.paciente_dueno_responsable=[t.apellidos_responsable,t.nombres_responsable].filter(Boolean).join(" "))},seleccionarPacienteHumano:function(e){this.paciente_type="humano",this.registro.paciente_id=e.id,this.registro.paciente_type="App\\Models\\PacienteHumano",this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_fecha_nacimiento=e.fecha_nacimiento,this.registro.paciente_sexo=e.sexo,this.registro.paciente_correo=e.correo,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_direccion=[e.direccion,e.direccion_numeracion].filter(Boolean).join(" "),this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza=e.numero_poliza,this.registro.paciente_dueno_responsable="","M"===this.registro.paciente_sexo&&(this.registro.embarazada=!1,this.registro.semanas_gestacion="",this.registro.fecha_ultima_menstruacion="")},seleccionarPacienteAnimal:function(e){this.paciente_type="animal",this.registro.paciente_id=e.id,this.registro.paciente_type="App\\Models\\PacienteAnimal",this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_taxonomia="".concat(e.raza.padre.nombre," - ").concat(e.raza.nombre),this.registro.paciente_fecha_nacimiento=e.fecha_nacimiento,this.registro.paciente_sexo=e.sexo,this.registro.paciente_identificacion=e.numero_identificacion,this.registro.paciente_correo=e.correo,this.registro.paciente_direccion=e.direccion,this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza="",this.cargarDuenoResponsable(this.registro.paciente_type,e),"M"===this.registro.paciente_sexo&&(this.registro.embarazada=!1,this.registro.semanas_gestacion="")},seleccionarSujetoObjeto:function(e){this.paciente_type="objeto",this.registro.paciente_id=e.id,this.registro.paciente_type="App\\Models\\SujetoObjeto",this.registro.paciente_nombre=e.nombre_paciente,this.registro.paciente_fecha_nacimiento=null,this.registro.paciente_sexo=e.sexo,this.registro.paciente_correo=e.correo,this.registro.paciente_direccion=e.direccion,this.registro.paciente_telefono=e.telefono_celular,this.registro.paciente_numero_poliza="",this.registro.paciente_identificacion=e.numero_identificacion,this.cargarDuenoResponsable(this.registro.paciente_type,e),"M"===this.registro.paciente_sexo&&(this.registro.embarazada=!1,this.registro.semanas_gestacion="",this.registro.fecha_ultima_menstruacion="")},abrirModalCrearPaciente:function(){var e={pacienteType:"",esCrearPaciente:!0,numeroIdentificacion:this.registro.paciente_identificacion};$("#gestionarPacienteModal").modal({backdrop:"static"},e)},abrirModalEditarPaciente:function(){var e={pacienteType:this.obtenerPacienteType(this.registro.paciente_type),esCrearPaciente:!1,numeroIdentificacion:this.registro.paciente_identificacion,pacienteId:this.registro.paciente_id};$("#gestionarPacienteModal").modal({backdrop:"static"},e)},obtenerPacienteType:function(e){var t="";switch(e){case"App\\Models\\PacienteHumano":t="humano";break;case"App\\Models\\PacienteAnimal":t="animal";break;case"App\\Models\\SujetoObjeto":t="objeto"}return t},pacienteHumanoGuardado:function(e){var t=e.esCreado?"creado":"actualizado";this.mostrarExito('Paciente "'.concat(e.nombre_paciente,'" ').concat(t," y seleccionado.")),this.seleccionarPacienteHumano(e)},pacienteAnimalGuardado:function(e){var t=e.esCreado?"creado":"actualizado";this.mostrarExito('Paciente "'.concat(e.nombre_paciente,'" ').concat(t," y seleccionado.")),this.seleccionarPacienteAnimal(e)},sujetoObjetoGuardado:function(e){var t=e.esCreado?"creado":"actualizado";this.mostrarExito('Objeto "'.concat(e.descripcion,'" ').concat(t," y seleccionado.")),this.seleccionarSujetoObjeto(e)},autocompletarMedico:function(){var e=this;if(this.ocultarMensajes(),this.registro.medico_id="",this.registro.medico_nombre){this.registro.medico_nombre=this.registro.medico_nombre.trim(),this.cargandoMedico=!0;var t={cadenaBusqueda:this.registro.medico_nombre};axios.get("/api/medicos",{params:t}).then((function(t){var a=t.data.data;if(0===a.length)return e.abrirModalGestionarMedico(),e.cadenaBusqueda=e.registro.medico_nombre,void(e.registro.medico_nombre="");if(a.length>1){var r={cadenaBusqueda:e.registro.medico_nombre};return $("#modalBuscarMedico").modal({},r),void(e.registro.medico_nombre="")}e.registro.medico_id=a[0].id,e.registro.medico_nombre=a[0].nombre_completo,e.mostrarExito("Médico seleccionado")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar médico",a)})).then((function(){return e.cargandoMedico=!1}))}},verificarMedico:function(){""===this.registro.medico_nombre&&(this.registro.medico_id="")},abrirModalGestionarMedico:function(){this.cargandoMedico||$("#modalGestionarMedico").modal({backdrop:"static"})},buscarMedico:function(){$("#modalBuscarMedico").modal("show")},medicoCreado:function(e){this.registro.medico_id=e.id,this.registro.medico_nombre=e.nombre_completo,this.mostrarExito('Médico "'.concat(e.nombre_completo,'" creado y seleccionado'))},medicoSeleccionado:function(e){this.registro.medico_id=e.id,this.registro.medico_nombre=e.nombre_completo,this.mostrarExito("Médico seleccionado")},contarOtrosPedidos:function(e){var t=this;if(e&&!this.esPortal){var a={pedidoId:"0"!==this.registro.id?this.registro.id:"",sucursalId:this.registro.sucursal_id};axios.get("/api/pedidos/contar-por-fecha/".concat(e),{params:a}).then((function(e){var a=e.data.data;t.cantidadOtrosPedidos=a})).catch((function(e){t.cantidadOtrosPedidos=null;var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al contar pedidos!",a)}))}},cambioSucursal:function(){this.contarOtrosPedidos(this.registro.fecha_cita)},autocompletarDiagnostico:function(){this.ocultarMensajes(),_.isEmpty(this.registro.diagnostico_concepto)?this.registro.diagnostico_id="":this.procesarBuscarDiagnostico("buscarDiagnostico",this.registro)},verificarDiagnostico:function(){""===this.registro.diagnostico_concepto&&(this.registro.diagnostico_id="")},buscarDiagnostico:function(){this.ocultarMensajes(),$("#buscarDiagnostico").modal("show")},autocompletarDiagnosticoEpidemiologico:function(){this.ocultarMensajes(),_.isEmpty(this.variablesEpidemiologicas.diagnostico_concepto)?this.variablesEpidemiologicas.diagnostico_id="":this.procesarBuscarDiagnostico("buscarDiagnosticoEpidemiologico",this.registro)},verificarDiagnosticoEpidemiologico:function(){""===this.variablesEpidemiologicas.diagnostico_concepto&&(this.variablesEpidemiologicas.diagnostico_id="")},buscarDiagnosticoEpidemiologico:function(){this.ocultarMensajes(),$("#buscarDiagnosticoEpidemiologico").modal("show")},procesarBuscarDiagnostico:function(e,t){var a=this;t.diagnostico_id="",t.diagnostico_concepto=t.diagnostico_concepto.trim();var r={cadenaBusqueda:t.diagnostico_concepto};axios.get("/api/diagnosticos",{params:r}).then((function(o){var i=o.data;0===i.length||i.length>1?$("#".concat(e)).modal({},r):(t.diagnostico_id=i[0].id,t.diagnostico_concepto=i[0].concepto,a.mostrarExito("Diagnóstico seleccionado."))})).catch((function(e){var t=a.procesarErrorResponse(e);a.mostrarErrores("¡Error al buscar diagnósticos!",t)}))},diagnosticoSeleccionado:function(e){this.registro.diagnostico_id=e.id,this.registro.diagnostico_concepto=e.concepto},diagnosticoEpidemiologicoSeleccionado:function(e){this.variablesEpidemiologicas.diagnostico_id=e.id,this.variablesEpidemiologicas.diagnostico_concepto=e.concepto},cambioCumpleDefinicionCaso:function(){var e=this;if(this.variablesEpidemiologicas.cumple_definicion_caso){this.cargandoDiagnosticoEpi=!0;axios.get("/api/diagnosticos",{params:{codigo:"U071"}}).then((function(t){var a=t.data;1===a.length&&(e.variablesEpidemiologicas.diagnostico_id=a[0].id,e.variablesEpidemiologicas.diagnostico_concepto=a[0].concepto)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar diagnóstico!",a)})).then((function(){return e.cargandoDiagnosticoEpi=!1}))}},cambioEmbarazada:function(){this.registro.embarazada||(this.registro.semanas_gestacion="",this.registro.fecha_ultima_menstruacion="")},clickEpi1:function(){this.primerClickEpi||(this.cargarCookies(),this.cargarUbicaciones()),this.primerClickEpi=!0},cargarCookies:function(){var e=localStorage.getItem("unidadSaludNotifica");e&&!this.variablesEpidemiologicas.unidad_salud_notifica&&(this.variablesEpidemiologicas.unidad_salud_notifica=e);var t=localStorage.getItem("epi-nivel2");t&&!this.registroAuxiliar.provinciaId&&(this.registroAuxiliar.provinciaId=parseInt(t));var a=localStorage.getItem("epi-nivel3");a&&!this.registroAuxiliar.cantonId&&(this.registroAuxiliar.cantonId=parseInt(a)),this.key++},cambiarUnidadSaludNotifica:function(){this.variablesEpidemiologicas.unidad_salud_notifica&&localStorage.setItem("unidadSaludNotifica",this.variablesEpidemiologicas.unidad_salud_notifica)},provinciaIdEpiActualizada:function(e){this.registroAuxiliar.provinciaId=e},cantonIdEpiActualizado:function(e){this.registroAuxiliar.cantonId=e},elementosInvalidos:function(e){e.target.parentElement.classList.add("has-error"),$('.nav a[href="#datosGenerales"]').tab("show")},cargarExamenesConPrecio:function(){var e=this;if(this.esCliente){this.examenes=[];var t=this.categorias.find((function(t){return t.id===e.registro.categoria_id}));if(this.registro.categoria_id&&t){this.cargandoExamenes=!0;var a={portal:this.portal};axios.get("/api/examenes/tarifas/".concat(t.tarifa_venta_id),{params:a}).then((function(t){var a=t.data;e.examenes=a.data,e.detallesPedidos.forEach((function(t){var a=e.examenes.find((function(e){return e.id===t.examen_id}));t.valor=a?a.valor:""}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al obtener exámenes!",a)})).then((function(){return e.cargandoExamenes=!1}))}}},cargarDetallesPedidoYExamenesConPrecio:function(e){var t=this;if(this.esCliente){this.examenes=[];var a=this.categorias.find((function(e){return e.id===t.registro.categoria_id}));if(this.registro.categoria_id&&a){var r={portal:this.portal};axios.get("/api/examenes/tarifas/".concat(a.tarifa_venta_id),{params:r}).then((function(a){var r=a.data.data;t.examenes=r,t.detallesPedidos=e.detalles_pedidos.map((function(e){var a=t.examenes.find((function(t){return t.id===e.examen.id}));return{id:e.id,examen_id:e.examen.id,examen:e.examen,valor:a?a.valor:""}}))})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al obtener exámenes!",a)}))}}else this.detallesPedidos=e.detalles_pedidos.map((function(e){return{id:e.id,examen_id:e.examen.id,examen:e.examen}}))},configurarInterceptorParaPortal:function(){var e=this;this.esPortal&&axios.interceptors.request.use((function(t){return e.esMedico&&(t.url="/consulta-resultados-medicos".concat(t.url)),e.esCliente&&(t.url="/consulta-resultados-empresas".concat(t.url)),t.params=m(m({},t.params),{},{token:e.token}),t}))},tituloCondicionesPreanaliticas:function(e){return e.condiciones_preanaliticas?e.condiciones_preanaliticas.replace(/\n/g,"<br />"):""},siguienteExamen:function(e){this.indiceExamen=e+1,$("#examen-"+this.indiceExamen).focus()},anteriorExamen:function(e){this.indiceExamen=e-1,0!==e?$("#examen-"+this.indiceExamen).focus():$("#buscarExamen").focus()},mouseSobreExamen:function(){this.indiceExamen=null},focusSiguiente:function(e){$("#".concat(e)).focus()},cargarExamenes:function(){var e=this,t={cadenaBusqueda:this.cadenaBusquedaExamenes,page:this.paginacion.paginaActual,tamano:15};this.procesando.cargarExamenes=!0,axios.get("/api/examenes",{params:t}).then((function(t){e.paginacion.totalPaginas=t.data.data.last_page,e.paginacion.totalRegistros=t.data.data.total,e.paginacion.paginaActual++;var a=t.data.data.data;_.isEmpty(a)||a.forEach((function(t){e.examenes.find((function(e){return e.id===t.id}))||e.examenes.push(t)}))})).catch((function(e){console.error(e),alert("Lo sentimos, hubo un error al cargar las órdenes.")})).then((function(){return e.procesando.cargarExamenes=!1}))}},computed:{examenesFiltrados:function(){var e=this;if(0===this.examenes.length)return this.examenes;var t=(0,n.G5)(this.cadenaBusquedaExamenes),a=new RegExp(removeDiacritics(t),"i");return this.examenes.filter((function(t){var r=a.test(t.codigo+" ")||a.test(t.referencia_auxiliar)||a.test(t.referencia_auxiliar_2)||a.test(removeDiacritics(t.nombre)),o=e.detallesPedidos.some((function(e){return e.examen_id===t.id}));return r&&!o}))},detallesPedidosFiltrados:function(){if(this.detallesPedidos.length>0){var e=(0,n.G5)(this.cadenaBusquedaDetalles),t=new RegExp(removeDiacritics(e),"i");return this.detallesPedidos.filter((function(e){return t.test(e.examen.codigo)||t.test(removeDiacritics(e.examen.nombre))}))}return this.detallesPedidos},esPacienteHumano:function(){return"humano"===this.pacienteType},esPacienteAnimal:function(){return"animal"===this.pacienteType},etiquetaSeleccionados:function(){return this.detallesPedidos.length>1?"seleccionados":"seleccionado"},esPortal:function(){return void 0!==this.medicoPedido||void 0!==this.cliente},esMedico:function(){return void 0!==this.medicoPedido},esCliente:function(){return void 0!==this.cliente},claseDatosPaciente:function(){var e="";return"0"===this.id?(e="col-sm-9",null!==this.cantidadOtrosPedidos&&(e="col-sm-7")):(e="col-sm-10",this.registroAuxiliar.nombreUsuarioIngresa&&(e="col-sm-8")),this.esPortal&&(e="0"===this.id?"col-sm-8":"col-sm-12"),e},mensajeOtrosPedidos:function(){var e="";return 0===this.cantidadOtrosPedidos&&(e="No existen otros pedidos para la fecha especificada."),1===this.cantidadOtrosPedidos&&(e="Existe 1 pedido para la fecha especificada."),this.cantidadOtrosPedidos>1&&(e="Existen "+this.cantidadOtrosPedidos+" pedidos para la fecha especificada."),e},total:function(){var e="";return this.detallesPedidos.find((function(e){return""===e.valor}))?e="-":(e=this.detallesPedidos.reduce((function(e,t){return e+Number(t.valor)}),0),e=e.toFixed(2)),e},etiquetaDatosPaciente:function(){var e="";switch(this.registro.paciente_type){case"App\\Models\\PacienteHumano":default:e="Datos del paciente";break;case"App\\Models\\PacienteAnimal":e="Datos del paciente animal";break;case"App\\Models\\SujetoObjeto":e="Datos del objeto"}return e},esHumano:function(){return"App\\Models\\PacienteHumano"===this.registro.paciente_type},esAnimal:function(){return"App\\Models\\PacienteAnimal"===this.registro.paciente_type},esObjeto:function(){return"App\\Models\\SujetoObjeto"===this.registro.paciente_type},obtenerNombreCliente:function(){var e=this,t=this.clientes.find((function(t){return t.id===e.registro.cliente_id}));return t?t.nombre:""},sucursalNombre:function(){var e=this,t=this.sucursales.find((function(t){return t.id===e.registro.sucursal_id}));return t?t.nombre:""},titulo:function(){var e="";return"0"===this.id?this.esPortal||(e="Crear Pedido"):e=this.esPortal?"Pedido No. ":"Editar Pedido No. ",e},nombreId:function(){return this.esPortal?"0"===this.id?"portalCrearPedido":"portalActualizarPedido":"0"===this.id?"crearPedido":"actualizarPedido"}},watch:{"registro.fecha_cita":function(e,t){e!==t&&this.contarOtrosPedidos(e)}}};var g=a(3379),b=a.n(g),x=a(2730),C={insert:"head",singleton:!1};b()(x.Z,C);x.Z.locals;const y=(0,a(1900).Z)(h,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)},"!invalid":function(t){return e.elementosInvalidos.apply(null,arguments)}}},[e.esPortal?e._e():t("liston"),e._v(" "),e.esPortal?t("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center",gap:"5px","margin-bottom":"10px"}},["0"!==e.id?[e._v("\n        "+e._s(e.titulo)+" "),t("strong",[e._v(e._s(e.registro.id))])]:e._e(),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{id:e.nombreId,type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n      ")]),e._v(" "),t("a",{staticClass:"btn btn-default",on:{click:e.navegarAPedidos}},[e._v("Regresar")])],2):t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s(e.titulo)+" "),t("strong",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.id,expression:"id !== '0'"}]},[e._v(e._s(e.registro.id))])]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{id:e.nombreId,type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",["0"!==e.id?t("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:!e.datos.permisos.imprimirPedidos},on:{click:function(t){return e.generarPDF(e.id)}}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Imprimir\n            ")]):e._e()]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.navegarAPedidos}},[e._v("Regresar")])])])]},proxy:!0}],null,!1,2859124601)}),e._v(" "),t("ul",{staticClass:"nav nav-tabs"},[e._m(0),e._v(" "),"EC"===this.$cliente.pais?t("li",[t("a",{attrs:{"data-toggle":"tab",href:"#variablesEpidemilogicas"},on:{click:e.clickEpi1}},[e._v("\n          EPI 1\n        ")])]):e._e()]),e._v(" "),t("div",{staticClass:"tab-content"},[t("div",{staticClass:"tab-pane fade in active",attrs:{id:"datosGenerales"}},[t("fieldset",{attrs:{disabled:""}},[t("div",{staticClass:"row"},["0"===e.id?t("div",{staticClass:"form-group",class:[e.esPortal?"col-sm-4":"col-sm-3"]},[t("label",{staticClass:"control-label",class:{obligatorio:"App\\Models\\PacienteAnimal"!==e.registro.paciente_type},attrs:{for:"identificacion"}},[e._v("\n                Identificación paciente")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.paciente_identificacion,expression:"registro.paciente_identificacion"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"identificacion",maxlength:"25",autocomplete:"off",disabled:"0"!==e.id,required:"App\\Models\\PacienteAnimal"!==e.registro.paciente_type},domProps:{value:e.registro.paciente_identificacion},on:{blur:e.autocompletarPaciente,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("crearPaciente"))},input:function(t){t.target.composing||e.$set(e.registro,"paciente_identificacion",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default hidden-md hidden-lg",attrs:{type:"button","data-toggle":"tooltip",title:"Autocompletar",disabled:"0"!==e.id},on:{click:e.autocompletarPaciente}},[t("i",{staticClass:"fas fa-user-check fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{id:"crearPaciente",type:"button",title:"Crear Paciente",disabled:"0"!==e.id},on:{click:e.abrirModalCrearPaciente}},[t("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Editar Paciente",disabled:"0"!==e.id||!e.registro.paciente_id},on:{click:e.abrirModalEditarPaciente}},[t("i",{staticClass:"fas fa-pencil-alt",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar Paciente",disabled:"0"!==e.id},on:{click:e.abrirPacienteSinBusqueda}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]):e._e(),e._v(" "),t("div",{staticClass:"form-group",class:e.claseDatosPaciente},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_type,expression:"registro.paciente_type"}],staticClass:"control-label",attrs:{for:"paciente_nombre"}},[e._v("\n                "+e._s(e.etiquetaDatosPaciente)+"\n              ")]),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoPaciente,expression:"cargandoPaciente"}],staticClass:"fas fa-spinner fa-spin fa-fw",staticStyle:{"margin-top":"36px"},attrs:{"aria-hidden":"true",title:"Obteniendo datos de persona"}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_nombre,expression:"registro.paciente_nombre"}],attrs:{id:"paciente_nombre"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.esHumano,expression:"esHumano"}],staticClass:"fas fa-user fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.esAnimal,expression:"esAnimal"}],staticClass:"fas fa-paw fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.esObjeto,expression:"esObjeto"}],staticClass:"fas fa-flask fa-lg"}),e._v(" "),t("span",{staticClass:"paciente"},[e._v(e._s(e.registro.paciente_nombre))]),e._v("\n                 \n                "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.esAnimal&&e.registro.paciente_taxonomia,expression:"esAnimal && registro.paciente_taxonomia"}],staticClass:"no-salto-linea",attrs:{title:"Raza"}},[t("i",{staticClass:"fas fa-sitemap fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_taxonomia)+"\n                   \n                ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.id,expression:"id !== '0'"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"far fa-id-card fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_identificacion)+"\n                   \n                ")]),e._v(" "),e.esHumano||e.esAnimal?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-birthday-cake fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_fecha_nacimiento)+" ("+e._s(e.obtenerEdad(e.registro.paciente_fecha_nacimiento))+")\n                   \n                ")]):e._e(),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_sexo,expression:"registro.paciente_sexo"}],staticClass:"no-salto-linea"},[t("i",{directives:[{name:"show",rawName:"v-show",value:"M"===e.registro.paciente_sexo,expression:"registro.paciente_sexo === 'M'"}],staticClass:"fas fa-mars fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:"F"===e.registro.paciente_sexo,expression:"registro.paciente_sexo === 'F'"}],staticClass:"fas fa-venus fa-lg"}),e._v("\n                  "+e._s("M"===e.registro.paciente_sexo?"Masculino":"Femenino")+"\n                   \n                ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_numero_poliza,expression:"registro.paciente_numero_poliza"}],staticClass:"no-salto-linea",attrs:{title:"Número de poliza"}},[t("i",{staticClass:"fas fa-user-shield fa-lg",attrs:{title:"Número de poliza"}}),e._v("\n                  "+e._s(e.registro.paciente_numero_poliza)+"\n                   \n                ")]),e._v(" "),(e.esAnimal||e.esObjeto)&&e.registro.paciente_dueno_responsable?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-user-tie fa-lg",attrs:{title:"Dueño"}}),e._v("\n                  "+e._s(e.registro.paciente_dueno_responsable)+"\n                   \n                ")]):e._e(),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_telefono,expression:"registro.paciente_telefono"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-mobile-alt fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_telefono)+"\n                   \n                ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_correo,expression:"registro.paciente_correo"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-envelope fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_correo)+"\n                   \n                ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_direccion,expression:"registro.paciente_direccion"}],staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-map-marked-alt fa-lg"}),e._v("\n                  "+e._s(e.registro.paciente_direccion)+"\n                   \n                ")])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"0"!==this.id&&e.registroAuxiliar.nombreUsuarioIngresa,expression:"this.id !== '0' && registroAuxiliar.nombreUsuarioIngresa"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario_ingresa"}},[e._v("Usuario Ingresa")]),e._v(" "),t("div",{attrs:{id:"usuario_ingresa"}},[e._v("\n                "+e._s(e.registroAuxiliar.nombreUsuarioIngresa)+"\n              ")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.cantidadOtrosPedidos,expression:"cantidadOtrosPedidos!==null"}],staticClass:"col-sm-2 text-right"},[t("label",{staticClass:"control-label"},[e._v("Pedidos agendados")]),e._v(" "),t("div",[e._v(e._s(e.cantidadOtrosPedidos))])])]),e._v(" "),t("div",{staticClass:"row"},[e.esMedico?e._e():t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.datos.configuraciones.clienteCategoriaRequeridoPedidos},attrs:{for:"cliente_id"}},[e._v("\n                Cliente\n              ")]),e._v(" "),e.datos.permisos.cambiarEmpresas?t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.cliente_id,expression:"registro.cliente_id"}],staticClass:"form-control input-sm",attrs:{id:"cliente_id",name:"cliente_id",required:e.datos.configuraciones.clienteCategoriaRequeridoPedidos},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"cliente_id",t.target.multiple?a:a[0])},e.cargarCategorias]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.clientes,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                  "),"N"===a.estado?t("div",[e._v("\n                    (Inactiva)\n                  ")]):e._e()])}))],2):e._e(),e._v(" "),e.datos.permisos.cambiarEmpresas?e._e():t("div",[e._v("\n                "+e._s(e.obtenerNombreCliente)+"\n              ")])]),e._v(" "),e.esMedico?e._e():t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.datos.configuraciones.clienteCategoriaRequeridoPedidos},attrs:{for:"categoria_id"}},[e._v("\n                Categoría\n              ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.categoria_id,expression:"registro.categoria_id"}],staticClass:"form-control input-sm",attrs:{id:"categoria_id",name:"categoria_id",required:e.datos.configuraciones.clienteCategoriaRequeridoPedidos},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"categoria_id",t.target.multiple?a:a[0])},e.cargarExamenesConPrecio]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.categorias,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico"}},[e._v("\n                Médico\n                "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoMedico,expression:"cargandoMedico"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true",title:"Cargando médico"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.registro.medico_id,expression:"registro.medico_id"}],staticClass:"fas fa-check-circle",attrs:{"data-toggle":"tooltip",title:"Médico seleccionado"}})]),e._v(" "),e.esMedico?e._e():t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.medico_nombre,expression:"registro.medico_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"medico",maxlength:"15",placeholder:"Buscar médico",autocomplete:"off"},domProps:{value:e.registro.medico_nombre},on:{blur:e.autocompletarMedico,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.focusSiguiente("crearMedico"))},input:function(t){t.target.composing||e.$set(e.registro,"medico_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{id:"crearMedico",type:"button",title:"Crear"},on:{click:e.abrirModalGestionarMedico}},[t("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Búsqueda"},on:{click:e.buscarMedico}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),e.esMedico?t("div",[e._v(e._s(e.esMedico?e.medicoPedido.nombre_completo:""))]):e._e()]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.tipo_atencion_id,expression:"registro.tipo_atencion_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",name:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"tipo_atencion_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.tiposAtenciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio no-salto-linea",attrs:{for:"fecha_cita"}},[e._v("Fecha cita")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha_cita,expression:"registro.fecha_cita"}],staticClass:"form-control input-sm",attrs:{id:"fecha_cita","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-start-date":"0d","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",autocomplete:"off",required:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal"}},[e._v("Sucursal")]),e._v(" "),e.datos.permisos.cambiarSucursales?t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.sucursal_id,expression:"registro.sucursal_id"}],staticClass:"form-control input-sm",attrs:{id:"sucursal",name:"sucursal"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"sucursal_id",t.target.multiple?a:a[0])},e.cambioSucursal],keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.stopPropagation()}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                  "),"N"===a.estado?[e._v("(Inactiva)")]:e._e()],2)}))],2):e._e(),e._v(" "),e.datos.permisos.cambiarSucursales?e._e():t("div",[e._v("\n                "+e._s(e.sucursalNombre)+"\n              ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"servicio_id"}},[e._v("Servicio")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.servicio_id,expression:"registro.servicio_id"}],staticClass:"form-control input-sm",attrs:{id:"servicio_id",name:"servicio_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"servicio_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.servicios,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label"},[e._v("Temperatura")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.temperatura,expression:"registro.temperatura"}],staticClass:"form-control input-sm",attrs:{type:"number",step:"0.01",min:"30",max:"50",maxlength:"6"},domProps:{value:e.registro.temperatura},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"temperatura",t.target.value)}}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_nombre&&"F"===e.registro.paciente_sexo&&"App\\Models\\SujetoObjeto"!==e.registro.paciente_type,expression:"registro.paciente_nombre && registro.paciente_sexo === 'F' && registro.paciente_type !== 'App\\\\Models\\\\SujetoObjeto'"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("F.U.M.")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha_ultima_menstruacion,expression:"registro.fecha_ultima_menstruacion"}],staticClass:"form-control input-sm",attrs:{id:"fum","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_nombre&&"F"===e.registro.paciente_sexo&&"App\\Models\\SujetoObjeto"!==e.registro.paciente_type,expression:"registro.paciente_nombre && registro.paciente_sexo === 'F'  && registro.paciente_type !== 'App\\\\Models\\\\SujetoObjeto'"}],staticClass:"col-sm-2 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.embarazada,expression:"registro.embarazada"}],attrs:{type:"checkbox",value:"",disabled:"M"===e.registro.paciente_sexo},domProps:{checked:Array.isArray(e.registro.embarazada)?e._i(e.registro.embarazada,"")>-1:e.registro.embarazada},on:{change:[function(t){var a=e.registro.embarazada,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.registro,"embarazada",a.concat([""])):i>-1&&e.$set(e.registro,"embarazada",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"embarazada",o)},e.cambioEmbarazada]}}),e._v("\n                  Embarazada\n                ")])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente_nombre&&"F"===e.registro.paciente_sexo&&e.registro.embarazada&&"App\\Models\\SujetoObjeto"!==e.registro.paciente_type,expression:"registro.paciente_nombre && registro.paciente_sexo === 'F' && registro.embarazada  && registro.paciente_type !== 'App\\\\Models\\\\SujetoObjeto'"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Semanas gestación")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.semanas_gestacion,expression:"registro.semanas_gestacion"}],staticClass:"form-control input-sm",attrs:{type:"number",step:"1",min:"0",max:"50"},domProps:{value:e.registro.semanas_gestacion},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.registro,"semanas_gestacion",t.target.value)}}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.numero_pedido_externo,expression:"registro.numero_pedido_externo"}],staticClass:"col-sm-1 form-group no-salto-linea"},[t("label",{staticClass:"control-label"},[e._v("Referencia")]),e._v(" "),t("div",[e._v(e._s(e.registro.numero_pedido_externo))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"form-group col-sm-5"},[t("label",{staticClass:"control-label",attrs:{for:"diagnostico_concepto"}},[e._v("Diagnóstico")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.diagnostico_concepto,expression:"registro.diagnostico_concepto"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"diagnostico_concepto",maxlength:"255",autocomplete:"off",placeholder:"Concepto"},domProps:{value:e.registro.diagnostico_concepto},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.autocompletarDiagnostico.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.autocompletarDiagnostico.apply(null,arguments))}],blur:e.verificarDiagnostico,input:function(t){t.target.composing||e.$set(e.registro,"diagnostico_concepto",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar Diagnóstico"},on:{click:e.buscarDiagnostico}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"form-group col-sm-6"},[t("label",{staticClass:"control-label",attrs:{for:"comentario"}},[e._v("Comentario")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.comentario,expression:"registro.comentario"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",id:"comentario",name:"comentario"},domProps:{value:e.registro.comentario},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.stopPropagation()},input:function(t){t.target.composing||e.$set(e.registro,"comentario",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label"},[e._v("Cama")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.cama,expression:"registro.cama"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"8"},domProps:{value:e.registro.cama},on:{input:function(t){t.target.composing||e.$set(e.registro,"cama",t.target.value)}}})])])]),e._v(" "),t("fieldset",{staticStyle:{"margin-top":"10px"},attrs:{disabled:""}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("legend",{staticClass:"obligatorio"},[e._v("\n                Exámenes\n                "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.detallesPedidos.length>0,expression:"detallesPedidos.length > 0"}],staticClass:"badge",attrs:{id:"contadorExamenes"}},[e._v("\n                  "+e._s(e.detallesPedidos.length)+"\n                  "+e._s(e.etiquetaSeleccionados)+"\n                ")])])]),e._v(" "),e.cargandoExamenes?e._e():t("div",{staticClass:"col-md-6"},[t("div",{staticStyle:{height:"300px",overflow:"auto","margin-bottom":"12px"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("td",{staticClass:"text-left sticky-top",staticStyle:{"padding-left":"0"},attrs:{colspan:"2"}},[t("div",{staticClass:"col-xs-6",staticStyle:{"padding-left":"0"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusquedaExamenes,expression:"cadenaBusquedaExamenes"}],ref:"buscarExamen",staticClass:"form-control input-sm",attrs:{type:"text",id:"buscarExamen",placeholder:"Buscar examen",autocomplete:"off"},domProps:{value:e.cadenaBusquedaExamenes},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.siguienteExamen(-1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.autocompletarExamen.apply(null,arguments))}],input:function(t){t.target.composing||(e.cadenaBusquedaExamenes=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-xs-6 pull-right",staticStyle:{"padding-right":"0"}},[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"perfiles",tabindex:-1,disabled:0===this.grupos.length,placeholder:"Perfil",options:e.grupos,label:"nombre",clearable:!1,reduce:function(e){return e.id},loading:e.cargandoPerfiles},on:{input:e.cargarExamenesPorGrupo},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}],null,!1,2737643764),model:{value:e.grupoId,callback:function(t){e.grupoId=t},expression:"grupoId"}})],1)])])]),e._v(" "),t("tbody",[0===e.examenesFiltrados.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("No existen exámenes")])]):e._e(),e._v(" "),e._l(e.examenesFiltrados,(function(a,r){return[t("tr",{class:{"hover-examen":r===e.indiceExamen},on:{mouseover:e.mouseSobreExamen}},[t("td",{staticClass:"col-xs-11 col-sm-11 text-left cortar-texto"},[t("div",{attrs:{title:a.nombre}},[e._v("\n                          "+e._s(a.codigo)+" - "+e._s(a.nombre)+"\n                        ")])]),e._v(" "),t("td",{staticClass:"col-xs-1 col-sm-1 text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{id:"examen-"+r,type:"button",title:"Agregar examen"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.anteriorExamen(r))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.siguienteExamen(r))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.stopPropagation()}],click:function(t){return e.agregarExamen(a)}}},[t("i",{staticClass:"fas fa-plus"})])])])]}))],2)])])]),e._v(" "),e.cargandoExamenes?e._e():t("div",{staticClass:"col-md-6"},[t("div",{staticStyle:{height:"340px",overflow:"auto"},attrs:{id:"examenes-seleccioandos"}},[0===e.detallesPedidos.length?t("div",{staticClass:"text-center",staticStyle:{"padding-top":"30px"}},[e._v("\n                  No existen exámenes seleccionados\n                ")]):e._e(),e._v(" "),t("table",{directives:[{name:"show",rawName:"v-show",value:e.detallesPedidos.length>0,expression:"detallesPedidos.length > 0"}],staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("td",{staticClass:"sticky-top",staticStyle:{"padding-left":"0"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusquedaDetalles,expression:"cadenaBusquedaDetalles"}],staticClass:"form-control input-sm col-sm-3",attrs:{type:"text",placeholder:"Buscar examen seleccionado"},domProps:{value:e.cadenaBusquedaDetalles},on:{input:function(t){t.target.composing||(e.cadenaBusquedaDetalles=t.target.value)}}})]),e._v(" "),e.esCliente&&e.datos.permisos.mostrarPrecios?t("th",{staticClass:"col-sm-1 text-center sticky-top"},[e._v("\n                      Valor\n                    ")]):e._e(),e._v(" "),t("th",{staticClass:"col-sm-1 text-center sticky-top"},[t("button",{directives:[{name:"show",rawName:"v-show",value:e.detallesPedidos.length>0,expression:"detallesPedidos.length > 0"}],staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Eliminar todos los exámenes"},on:{click:e.eliminarDetalles}},[t("i",{staticClass:"fas fa-trash",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("tbody",e._l(e.detallesPedidosFiltrados,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v("\n                      "+e._s(a.examen.codigo)+" - "+e._s(a.examen.nombre)+"\n                      "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.examen.condiciones_preanaliticas,expression:"detalle.examen.condiciones_preanaliticas"}],staticClass:"fas fa-exclamation-circle fa-sm",staticStyle:{"padding-left":"4px"},attrs:{"data-toggle":"popover","data-html":"true","data-placement":"top",title:"Condiciones preanalíticas","data-content":e.tituloCondicionesPreanaliticas(a.examen)}})]),e._v(" "),e.esCliente&&e.datos.permisos.mostrarPrecios?t("td",{staticClass:"text-right"},[e._v("\n                      "+e._s(a.valor?Number(a.valor).toFixed(2):"Sin tarifa")+"\n                    ")]):e._e(),e._v(" "),t("td",{staticClass:"text-center centrado-vertical"},[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Eliminar examen"},on:{click:function(t){return e.eliminarDetalle(a)}}},[t("i",{staticClass:"fas fa-trash",attrs:{"aria-hidden":"true"}})])])])])})),0),e._v(" "),e.esCliente&&e.datos.permisos.mostrarPrecios?t("tfoot",{directives:[{name:"show",rawName:"v-show",value:e.detallesPedidos.length>0,expression:"detallesPedidos.length > 0"}]},[t("tr",[t("td",{staticClass:"control-label text-right",staticStyle:{"font-weight":"bold"}},[e._v("Total")]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e.total))]),e._v(" "),t("td")])]):e._e()])])]),e._v(" "),e.cargandoExamenes?t("div",{staticClass:"col-md-12",attrs:{id:"cargandoExamenes"}},[e._m(1)]):e._e()])]),e._v(" "),t("hr",{directives:[{name:"show",rawName:"v-show",value:e.examenes.length>0||e.cargandoExamenes,expression:"examenes.length > 0 || cargandoExamenes"}]})]),e._v(" "),t("div",{staticClass:"tab-pane fade",attrs:{id:"variablesEpidemilogicas"}},[t("fieldset",{attrs:{disabled:""}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.cumple_definicion_caso,expression:"variablesEpidemiologicas.cumple_definicion_caso"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.variablesEpidemiologicas.cumple_definicion_caso)?e._i(e.variablesEpidemiologicas.cumple_definicion_caso,"")>-1:e.variablesEpidemiologicas.cumple_definicion_caso},on:{change:[function(t){var a=e.variablesEpidemiologicas.cumple_definicion_caso,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.variablesEpidemiologicas,"cumple_definicion_caso",a.concat([""])):i>-1&&e.$set(e.variablesEpidemiologicas,"cumple_definicion_caso",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.variablesEpidemiologicas,"cumple_definicion_caso",o)},e.cambioCumpleDefinicionCaso]}}),e._v("\n                  Cumple definición de caso\n                ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("\n                Diagnóstico\n                "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoDiagnosticoEpi,expression:"cargandoDiagnosticoEpi"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{title:"Cargando"}})]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.diagnostico_concepto,expression:"variablesEpidemiologicas.diagnostico_concepto"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"255",autocomplete:"off",placeholder:"Concepto"},domProps:{value:e.variablesEpidemiologicas.diagnostico_concepto},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.autocompletarDiagnosticoEpidemiologico.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.autocompletarDiagnosticoEpidemiologico.apply(null,arguments))}],blur:e.verificarDiagnosticoEpidemiologico,input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"diagnostico_concepto",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarDiagnosticoEpidemiologico}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha inicio síntomas")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.variablesEpidemiologicas.fecha_inicio_sintomas,expression:"variablesEpidemiologicas.fecha_inicio_sintomas"}],staticClass:"form-control input-sm cursor-menu",attrs:{autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-end-date":"0d",placeholder:"aaaa-mm-dd"}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.epi_1,expression:"variablesEpidemiologicas.epi_1"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.variablesEpidemiologicas.epi_1)?e._i(e.variablesEpidemiologicas.epi_1,null)>-1:e.variablesEpidemiologicas.epi_1},on:{change:function(t){var a=e.variablesEpidemiologicas.epi_1,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.variablesEpidemiologicas,"epi_1",a.concat([null])):i>-1&&e.$set(e.variablesEpidemiologicas,"epi_1",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.variablesEpidemiologicas,"epi_1",o)}}}),e._v("\n                  EPI 1\n                ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Comorbilidad (Enfermedades preexistentes)")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.comorbilidad,expression:"variablesEpidemiologicas.comorbilidad"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",maxlength:"200"},domProps:{value:e.variablesEpidemiologicas.comorbilidad},on:{input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"comorbilidad",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label"},[e._v("Lugar o antecedente probable de infección")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.antecedente_infeccion,expression:"variablesEpidemiologicas.antecedente_infeccion"}],staticClass:"form-control input-sm",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.variablesEpidemiologicas,"antecedente_infeccion",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.antecedentesInfeccion,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Antecedente de viaje")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.antecedente_viaje,expression:"variablesEpidemiologicas.antecedente_viaje"}],staticClass:"form-control input-sm",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.variablesEpidemiologicas,"antecedente_viaje",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("option",{attrs:{value:"DENTRO_PAIS"}},[e._v("Dentro del país")]),e._v(" "),t("option",{attrs:{value:"FUERA_PAIS"}},[e._v("Fuera del país")])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha viaje")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.variablesEpidemiologicas.fecha_viaje,expression:"variablesEpidemiologicas.fecha_viaje"}],staticClass:"form-control input-sm cursor-menu",attrs:{autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-end-date":"0d",placeholder:"aaaa-mm-dd"}})]),e._v(" "),t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label"},[e._v("Lugar de viaje")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.lugar_viaje,expression:"variablesEpidemiologicas.lugar_viaje"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"100"},domProps:{value:e.variablesEpidemiologicas.lugar_viaje},on:{input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"lugar_viaje",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label"},[e._v("Unidad de salud que notifica")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.unidad_salud_notifica,expression:"variablesEpidemiologicas.unidad_salud_notifica"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"150"},domProps:{value:e.variablesEpidemiologicas.unidad_salud_notifica},on:{input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"unidad_salud_notifica",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Semana epidemiológica")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.variablesEpidemiologicas.semana_epidemiologica,expression:"variablesEpidemiologicas.semana_epidemiologica"}],staticClass:"form-control input-sm",attrs:{type:"number",step:"1",min:"0",maxlength:"6"},domProps:{value:e.variablesEpidemiologicas.semana_epidemiologica},on:{input:function(t){t.target.composing||e.$set(e.variablesEpidemiologicas,"semana_epidemiologica",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("ubicacion-geografica-ec",{key:e.key,attrs:{provincias:e.ubicacionesNivel2,"provincia-id":e.registroAuxiliar.provinciaId,"canton-id":e.registroAuxiliar.cantonId,"parroquia-id":e.variablesEpidemiologicas.unidad_salud_parroquia_id,cookie:"epi"},on:{"provincia-id-actualizada":e.provinciaIdEpiActualizada,"canton-id-actualizado":e.cantonIdEpiActualizado},model:{value:e.variablesEpidemiologicas.unidad_salud_parroquia_id,callback:function(t){e.$set(e.variablesEpidemiologicas,"unidad_salud_parroquia_id",t)},expression:"variablesEpidemiologicas.unidad_salud_parroquia_id"}})],1)])])])],1),e._v(" "),t("gestionar-paciente-modal",{attrs:{"id-sistema-externo":e.$usuario.sistemaHisId,"con-sistemas-externos":!e.esPortal},on:{"paciente-humano-guardado":e.pacienteHumanoGuardado,"paciente-animal-guardado":e.pacienteAnimalGuardado,"sujeto-objeto-guardado":e.sujetoObjetoGuardado}}),e._v(" "),t("buscar-paciente-modal",{on:{"paciente-seleccionado":e.pacienteSeleccionado}}),e._v(" "),t("gestionar-medico-modal",{on:{"medico-creado":e.medicoCreado}}),e._v(" "),t("buscar-medico-modal",{on:{"medico-seleccionado":e.medicoSeleccionado}}),e._v(" "),t("clientes-buscar-diagnostico-modal",{attrs:{id:"buscarDiagnostico"},on:{"diagnostico-seleccionado":e.diagnosticoSeleccionado}}),e._v(" "),t("clientes-buscar-diagnostico-modal",{attrs:{id:"buscarDiagnosticoEpidemiologico"},on:{"diagnostico-seleccionado":e.diagnosticoEpidemiologicoSeleccionado}}),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("li",{staticClass:"active"},[e("a",{attrs:{"data-toggle":"tab",href:"#datosGenerales"}},[this._v("Datos generales")])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-body text-center"},[e("h4",[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n                ")])])}],!1,null,"1f60d25e",null).exports},6006:(e,t,a)=>{"use strict";a.d(t,{Z:()=>P});var r=a(4590),o=a(2328),i=a(7543),s=a(7974);const n={props:{esPortal:{type:Boolean,required:!0},pedido:{type:Object,required:!0},permisos:{type:Object,required:!0},configuraciones:{type:Object,required:!0},tamano:{type:String,default:"sm"},token:{type:String,default:""}},methods:{editarPedido:function(e){this.esPortal?window.location.href="./pedidos/".concat(e.id,"/edit?token=").concat(this.token):window.location.href="/pedidos/".concat(e.id,"/edit")},crearOrden:function(e){"G"!==e.estado||this.esPortal||(e.sistema_externo&&"IESS"===e.sistema_externo.driver?window.location.href="/iess/ordenes/create?numeroOrdenIess=".concat(e.numero_pedido_externo):window.location.href="/ordenes/create?pedidoId=".concat(e.id))},guardarComoOrden:function(e){this.$emit("guardar-como-orden",e)},verPedido:function(e){this.$emit("ver-pedido",e)},abrirAnularPedido:function(e){var t=(0,s.MD)({"id-pedido":e.id});$("#anularPedido").modal("show",t)},generarPDF:function(e){this.$emit("generar-pdf",e)}},computed:{claseBoton:function(){return{"btn-sm":"sm"===this.tamano}}}};var c=a(1900);const l=(0,c.Z)(n,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:!e.pedido.procesando,expression:"!pedido.procesando"}],staticClass:"btn-group fa-personalizado",attrs:{role:"group","aria-label":"..."}},[e.permisos.editarPedidos&&"G"===e.pedido.estado?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",title:"Editar","data-toggle":"tooltip"},on:{click:function(t){return e.editarPedido(e.pedido)}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]):e._e(),e._v(" "),"G"!==e.pedido.estado?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",title:"Ver","data-toggle":"tooltip"},on:{click:function(t){return e.verPedido(e.pedido)}}},[t("i",{staticClass:"fas fa-eye fa-fw"})]):e._e(),e._v(" "),!e.esPortal&&"G"===e.pedido.estado&&e.permisos.crearOrdenes?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",title:"Ir a Crear orden","data-toggle":"tooltip"},on:{click:function(t){return e.crearOrden(e.pedido)}}},[t("i",{staticClass:"fas fa-file-medical-alt fa-fw"})]):e._e(),e._v(" "),e.esPortal||e.pedido.sistema_externo&&"IESS"===e.pedido.sistema_externo.driver||"G"!==e.pedido.estado||!e.permisos.crearOrdenes?e._e():t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",title:"Guardar Orden","data-toggle":"tooltip"},on:{click:function(t){return e.guardarComoOrden(e.pedido)}}},[t("i",{staticClass:"fas fa-save fa-fw"})]),e._v(" "),e.permisos.imprimirPedidos&&"N"!==e.pedido.estado?t("button",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{type:"button",title:"Imprimir pedido","data-toggle":"tooltip"},on:{click:function(t){return e.generarPDF(e.pedido.id)}}},[t("i",{staticClass:"fas fa-print fa-fw"})]):e._e(),e._v(" "),e.permisos.anularPedidos&&"N"!==e.pedido.estado&&"D"!==e.pedido.estado?t("button",{staticClass:"btn btn-danger",class:e.claseBoton,attrs:{type:"button",title:"Anular","data-toggle":"tooltip"},on:{click:function(t){return e.abrirAnularPedido(e.pedido)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})]):e._e()])}),[],!1,null,null,null).exports;const d={props:["medicoPedido","cliente"],data:function(){return{pedido:{}}},mounted:function(){var e=this;$("#anularPedido").on("shown.bs.modal",(function(){return $("#motivo_anula").focus()})),$("#anularPedido").on("show.bs.modal",(function(t){var a=$(t.relatedTarget).data("id-pedido");e.cargarPedido(a)}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarPedido:function(e){var t=this;axios.get("/api/pedidos/".concat(e)).then((function(e){t.pedido=e.data.data})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al cargar pedido!",a)})).then((function(){return t.cargando=!1}))},anular:function(){var e=this;this.alternarBotonesSubmit();var t={motivo:this.pedido.motivo_anula};axios.delete("/api/pedidos/".concat(this.pedido.id),{params:t}).then((function(){e.$emit("pedido-anulado",e.pedido.id),$("#anularPedido").modal("hide")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al anular pedido!",a)})).then((function(){return e.alternarBotonesSubmit()}))}},computed:{esPortal:function(){return void 0!==this.medicoPedido||void 0!==this.cliente},esMedico:function(){return void 0!==this.medicoPedido},esCliente:function(){return void 0!==this.cliente}}};const u=(0,c.Z)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"anularPedido",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.anular.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero"}},[e._v("Pedido No.")]),e._v(" "),t("output",{attrs:{id:"numero"}},[e._v(e._s(e.pedido.id))])]),e._v(" "),t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label obligatorio"},[e._v("Motivo de anulación")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.pedido.motivo_anula,expression:"pedido.motivo_anula"}],staticClass:"form-control input-sm textarea",attrs:{rows:"3",id:"motivo_anula",name:"motivo_anula",required:""},domProps:{value:e.pedido.motivo_anula},on:{input:function(t){t.target.composing||e.$set(e.pedido,"motivo_anula",t.target.value)}}})])])],1),e._v(" "),e._m(1)])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Anular pedido")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"submit"}},[e._v("Anular")])])}],!1,null,null,null).exports;const m={props:{pedido:{type:Object,default:function(){return{}}}},data:function(){return{cargando:!1,detallesPedido:[]}},mounted:function(){var e=this;$("#modalEstadoPedido").on("shown.bs.modal",(function(t){"modalEstadoPedido"===t.target.id&&e.cargarDetallesPedido()})),$("#modalEstadoPedido").on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDetallesPedido:function(){var e=this;this.cargando=!0;axios.get("/api/pedidos/".concat(this.pedido.id,"/detalles"),{params:{incluir:"examen"}}).then((function(t){var a=t.data.data;e.detallesPedido=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar exámenes",a)})).then((function(){return e.cargando=!1}))},limpiar:function(){this.detallesPedido=[]}}};const p=(0,c.Z)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalEstadoPedido",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("\n          Exámenes de pedido No. "+e._s(e.pedido.id)+"\n        ")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),!e.cargando&&e.detallesPedido.length>0?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[e._l(e.detallesPedido,(function(a){return[t("tr",[t("td",[e._v(e._s(a.examen.nombre))])])]}))],2)]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.detallesPedido.length,tipo:"exámenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{title:"Actualizar",disabled:e.cargando},on:{click:e.cargarDetallesPedido}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],staticClass:"fas fa-sync"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando,expression:"cargando"}],staticClass:"fas fa-spinner fa-spin"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")])])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this._self._c;return e("thead",[e("tr",[e("th",{staticClass:"text-left"},[this._v("Examen")])])])}],!1,null,null,null).exports;var f=a(2244);a(4197);function v(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,n=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){n=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(n)throw i}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const x={components:{AnularModal:u,Liston:o.Z,PedidoEstado:i.Z,OpcionesPedido:l,EstadoPedidoModal:p,CalendarView:f.CalendarView,CalendarViewHeader:f.CalendarViewHeader},props:["medico","cliente","datos","token"],data:function(){return{procesando:{busqueda:!1,calendario:!1},paginaActual:1,totalRegistros:0,totalPaginas:0,filtros:{cadenaBusqueda:"",medicoId:"",clienteId:"",categoriaId:"",fechaCita:"",estado:""},clientes:[],pedidos:[],pedido:{},permisos:"",configuraciones:{},pedidoAnular:{id:"",estado:"",usuario_anula_id:"",motivo_anula:"",fecha_anula:""},calendario:{fecha:new Date,eventos:[],key:0}}},created:function(){this.configurarInterceptorParaPortal(),this.cargarDatos()},mounted:function(){$("body").tooltip({selector:'[data-toggle="tooltip"]',container:"body",trigger:"hover"}),this.mostrarMensaje()},methods:{mostrarMensaje:function(){this.datos.mensaje&&(this.mostrarExito(this.datos.mensaje),this.datos.mensaje="")},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.permisos=this.datos.permisos,this.configuraciones=this.datos.configuraciones?this.datos.configuraciones:{},this.cargarFiltros(),this.cargarCatalogos(),this.cargarPedidos()},borrarFiltros:function(){this.filtros.cadenaBusqueda="",this.filtros.clienteId="",this.filtros.categoriaId="",this.filtros.fechaCita="",this.filtros.estado="",this.pedidos=[],this.buscarPedidos()},cargarFiltros:function(){var e=this.datos.parametros;this.filtros.cadenaBusqueda=e.cadenaBusqueda?e.cadenaBusqueda:"",this.filtros.clienteId=e.clienteId?parseInt(e.clienteId):"",this.filtros.categoriaId=e.categoriaId?parseInt(e.categoriaId):"",this.filtros.fechaCita=e.fechaCita?e.fechaCita:"",this.filtros.estado=e.estado?e.estado:"",this.paginaActual=e.page?Number(e.page):1},cargarCatalogos:function(){var e=this;if(!this.esPortal){var t={catalogo:r.oH.CLIENTES};axios.get("/api/catalogos",{params:t}).then((function(t){var a=t.data;e.clientes=a.data,e.datos.permisos.cambiarEmpresas||(e.clientes=e.clientes.filter((function(t){return t.id===e.datos.empresaPorDefectoId})))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Clientes",a)}))}},cargarPedidos:function(){var e=this;this.procesando.busqueda=!0;var t={portal:this.esPortal?this.esMedico?"medicos":"empresas":null,cadenaBusqueda:this.filtros.cadenaBusqueda?this.filtros.cadenaBusqueda:null,clienteId:this.filtros.clienteId?this.filtros.clienteId:null,categoriaId:this.filtros.categoriaId?this.filtros.categoriaId:null,fechaCita:this.filtros.fechaCita?this.filtros.fechaCita:null,estado:this.filtros.estado?this.filtros.estado:null,page:this.paginaActual};this.actualizarUrl(g(g({},t),{},{token:this.token})),axios.get("/api/pedidos",{params:t}).then((function(t){var a=t.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total;var r=a.data;r.forEach((function(t){t.paciente.numero_historia_clinica=e.obtenerNumeroHistoriaClinica(t,t.sistema_externo_id),Vue.set(t,"procesando",!1)})),e.pedidos=r})).catch((function(t){e.pedidos=[];var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar pedidos",a)})).then((function(){return e.procesando.busqueda=!1}))},pedidoAnulado:function(e){this.mostrarExito("Pedido <strong>".concat(e,"</strong> anulado")),this.cargarPedidos()},buscarPedidos:function(){this.paginaActual=1,this.filtros.cadenaBusqueda=this.filtros.cadenaBusqueda.trim(),this.cargarPedidos(),this.actualizarCalendario()},cambiaClienteId:function(){this.filtros.categoriaId=""},configurarInterceptorParaPortal:function(){var e=this;this.esPortal&&axios.interceptors.request.use((function(t){return e.esMedico&&(t.url="/consulta-resultados-medicos".concat(t.url)),e.esCliente&&(t.url="/consulta-resultados-empresas".concat(t.url)),t.params=g(g({},t.params),{},{token:e.token}),t}))},guardarComoOrden:function(e){var t=this;"G"!==e.estado||this.esPortal||(e.sistema_externo&&e.sistema_externo.driver===r.Q0.IESS?window.location.href="/iess/ordenes/create?numeroOrdenExterna=".concat(e.numero_pedido_externo):(e.procesando=!0,axios.post("/api/pedidos/".concat(e.id,"/orden")).then((function(a){var r=a.data;e.estado=r.estado,e.orden=r.orden,t.mostrarExito("Orden <strong>".concat(e.orden.numero_orden,"</strong> creada a partir del pedido <strong>").concat(r.id,"</strong>"))})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al crear pedido como orden!",a)})).then((function(){return e.procesando=!1}))))},verPedido:function(e){var t="/pedidos/";this.esMedico&&(t="/consulta-resultados-medicos"+t),this.esCliente&&(t="/consulta-resultados-empresas"+t);var a=this.obtenerParametrosUrl({token:this.token});window.location.href="".concat(t).concat(e.id).concat(a)},generarPDF:function(e){var t="/pedidos/";this.esMedico&&(t="/consulta-resultados-medicos"+t),this.esCliente&&(t="/consulta-resultados-empresas"+t);var a=this.obtenerParametrosUrl({token:this.token});window.open("".concat(t).concat(e,"/pdf").concat(a),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},abrirModalEstadoPedido:function(e){this.pedido=e,$("#modalEstadoPedido").modal("show")},seleccionaFecha:function(e){this.esPortal||(this.filtros.fechaCita=moment(e).format("YYYY-MM-DD"),this.filtros.estado="G",this.buscarPedidos())},actualizarCalendario:function(){this.calendario.key++},defineFechaCalendario:function(e){this.calendario.fecha=e},cambioPeriodo:function(e){var t=this;this.calendario.eventos=[];var a={fechaDesde:moment(e.displayFirstDate).format("YYYY-MM-DD"),fechaHasta:moment(e.displayLastDate).format("YYYY-MM-DD")};this.procesando.calendario=!0,axios.get("/api/pedidos-dia",{params:a}).then((function(e){var a,r=1,o=v(e.data.data);try{for(o.s();!(a=o.n()).done;){var i=a.value,s={id:r,startDate:i.fecha_cita,endDate:i.fecha_cita,title:i.cantidad,classes:["pedidos"]};t.calendario.eventos.push(s),r++}}catch(e){o.e(e)}finally{o.f()}})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al cargar pedidos en calendario!",a)})).then((function(){return t.procesando.calendario=!1}))}},computed:{esPortal:function(){return void 0!==this.medico||void 0!==this.cliente},esMedico:function(){return void 0!==this.medico},esCliente:function(){return void 0!==this.cliente},urlNuevo:function(){var e="./pedidos/create";return this.esPortal&&(e+="/?token="+this.token),e},categorias:function(){var e=this,t=this.clientes.find((function(t){return t.id===e.filtros.clienteId}));return t?t.subempresas:[]},nombreFiltroCliente:function(){var e=this,t=this.clientes.find((function(t){return t.id===e.filtros.clienteId}));return t?t.nombre:""},nombreFiltroCategoria:function(){var e=this,t=this.categorias.find((function(t){return t.id===e.filtros.categoriaId}));return t?t.nombre:""}}},C=x;var y=a(3379),E=a.n(y),A=a(7163),w={insert:"head",singleton:!1};E()(A.Z,w);A.Z.locals;const P=(0,c.Z)(C,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),e.esPortal?e._e():t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Pedidos\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",[t("a",{staticClass:"btn btn-primary",class:{disabled:!e.permisos.crearPedidos},attrs:{href:e.urlNuevo}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")])])])])]},proxy:!0}],null,!1,4158076561)}),e._v(" "),e.esPortal?t("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center",gap:"5px","margin-bottom":"10px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control",staticStyle:{width:"unset"},attrs:{type:"text",placeholder:"Buscar...",name:"cadenaBusqueda"},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarPedidos.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}}),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarPedidos}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Borrar filtros"},on:{click:e.borrarFiltros}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("div",[t("a",{staticClass:"btn btn-primary",class:{disabled:!e.permisos.crearPedidos},attrs:{href:e.urlNuevo}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n      ")])])]):t("div",{staticClass:"panel panel-default",attrs:{id:"filtros"}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.clienteId,expression:"filtros.clienteId"}],staticClass:"form-control input-sm",attrs:{id:"cliente_id",name:"cliente_id",title:e.nombreFiltroCliente},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"clienteId",t.target.multiple?a:a[0])},e.cambiaClienteId]}},[t("option",{attrs:{value:""}},[e._v("Clientes")]),e._v(" "),e._l(e.clientes,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n              "+e._s(a.nombre)+"\n            ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.categoriaId,expression:"filtros.categoriaId"}],staticClass:"form-control input-sm",attrs:{id:"categoria_id",name:"categoria_id",title:e.nombreFiltroCategoria},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"categoriaId",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Categorías")]),e._v(" "),e._l(e.categorias,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n              "+e._s(a.nombre)+"\n            ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control input-sm",attrs:{id:"estado",name:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Estado")]),e._v(" "),t("option",{attrs:{value:"G"}},[e._v("Generado")]),e._v(" "),t("option",{attrs:{value:"D"}},[e._v("Descargado")]),e._v(" "),t("option",{attrs:{value:"N"}},[e._v("Anulado")])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaCita,expression:"filtros.fechaCita"}],staticClass:"form-control input-sm",attrs:{id:"fecha_cita",name:"fecha_cita","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es",placeholder:"aaaa-mm-dd",autocomplete:"off"}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-10 form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar por número de pedido, identificación, nombres o apellidos del paciente...",name:"cadenaBusqueda"},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarPedidos.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group text-right"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Borrar"},on:{click:e.borrarFiltros}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}}),e._v(" Borrar\n          ")])]),e._v(" "),t("div",{staticClass:"col-sm-1 form-group text-right"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarPedidos}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}}),e._v(" Buscar\n          ")])])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-8 col-sm-offset-2 form-group"},[t("calendar-view",{key:e.calendario.key,staticClass:"calendario",attrs:{"show-date":e.calendario.fecha,items:e.calendario.eventos,"starting-day-of-week":1,locale:"es-EC","month-name-format":"long","weekday-name-format":"narrow","current-period-label":"Hoy","time-format-options":{hour:"numeric",minute:"numeric",hour12:!1},"period-changed-callback":e.cambioPeriodo},on:{"click-date":e.seleccionaFecha},scopedSlots:e._u([{key:"header",fn:function(a){return t("calendar-view-header",{attrs:{"header-props":a.headerProps},on:{input:e.defineFechaCalendario}})}}])})],1)]),e._v(" "),!e.procesando.busqueda&&e.pedidos.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed",attrs:{id:"listado"}},[t("thead",[t("tr",[e.configuraciones.mostrarServicioTipoAtencion?t("th",{staticClass:"col-sm-1 text-center hidden-xs"},[e._v("\n          Servicio/Atención\n        ")]):e._e(),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha cita")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-left hidden-xs"},[e.configuraciones.clienteEnOrdenes?[e._v("\n            Cliente/Médico\n          ")]:e.esMedico?e._e():[e._v("\n            Médico\n          ")]],2),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),e.esPortal?e._e():t("th",{staticClass:"col-sm-1 text-center"},[e._v("Orden")])])]),e._v(" "),t("tbody",[e._l(e.pedidos,(function(a){return[t("tr",[e.configuraciones.mostrarServicioTipoAtencion?t("td",{staticClass:"text-center hidden-xs"},[t("small",{attrs:{title:"Servicio","data-toggle":"tooltip"}},[e._v(e._s(a.servicio?a.servicio.nombre:""))]),e._v(" "),a.tipo_atencion?t("div",{attrs:{title:"Tipo atención","data-toggle":"tooltip"}},[e._v("\n              "+e._s(a.tipo_atencion.nombre)+"\n            ")]):e._e()]):e._e(),e._v(" "),t("td",{staticClass:"text-center",staticStyle:{position:"relative"}},[t("div",{staticClass:"visible-xs",staticStyle:{position:"absolute",top:"7px",left:"-14px",width:"400px"}},[e.$root.movil?t("opciones-pedido",{attrs:{"es-portal":e.esPortal,configuraciones:e.configuraciones,permisos:e.permisos,pedido:a,token:e.token,tamano:"md"},on:{"guardar-como-orden":e.guardarComoOrden,"ver-pedido":e.verPedido,"generar-pdf":e.generarPDF}}):e._e()],1),e._v(" "),t("small",{attrs:{title:"Referencia","data-toggle":"tooltip"}},[e._v(e._s(a.numero_pedido_externo))]),e._v(" "),t("div",[e._v("\n              "+e._s(a.id)+"\n            ")])]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(a.fecha_cita))]),e._v(" "),t("td",{staticClass:"text-left hidden-xs"},[e.configuraciones.clienteEnOrdenes?t("div",[t("small",{attrs:{title:"Cliente","data-toggle":"tooltip"}},[e._v("\n                "+e._s(a.categoria?a.categoria.empresa.nombre:"")+"\n                "),a.categoria?[e._v("\n                  "+e._s(a.categoria.empresa.nombre!==a.categoria.nombre?"(".concat(a.categoria.nombre,")"):"")+"\n                ")]:e._e()],2)]):e._e(),e._v(" "),!e.esMedico&&a.medico?t("div",{attrs:{title:"Médico","data-toggle":"tooltip"}},[e._v("\n              "+e._s(a.medico.nombre_completo)+"\n            ")]):e._e()]),e._v(" "),t("td",{staticClass:"text-left contenedor-menu-oculto"},[t("small",[e._v("\n              "+e._s(a.paciente.numero_identificacion)+"\n              "),e.configuraciones.mostrarHistoriaClinica&&a.paciente.numero_historia_clinica?t("span",{staticClass:"text-muted",attrs:{title:"Número de historia clínica","data-toggle":"tooltip"}},[t("small",[e._v("("+e._s(a.paciente.numero_historia_clinica)+")")])]):e._e()]),e._v(" "),t("div",[e._v("\n              "+e._s(a.paciente.nombre_paciente)+"\n            ")]),e._v(" "),t("div",{staticClass:"menu-oculto"},[t("opciones-pedido",{attrs:{"es-portal":e.esPortal,configuraciones:e.configuraciones,permisos:e.permisos,pedido:a,token:e.token},on:{"guardar-como-orden":e.guardarComoOrden,"ver-pedido":e.verPedido,"generar-pdf":e.generarPDF}})],1)]),e._v(" "),t("td",{staticClass:"text-center"},[t("pedido-estado",{staticClass:"puntero",attrs:{estado:a.estado},on:{click:function(t){return e.abrirModalEstadoPedido(a)}}}),e._v(" "),t("div",{staticStyle:{"padding-top":"5px"}},[a.sistema_externo?t("i",{staticClass:"fas fa-external-link-alt text-gris",attrs:{"data-toggle":"tooltip","data-placement":"right","data-html":"true",title:"Sistema externo ".concat(a.sistema_externo.nombre)}}):e._e()])],1),e._v(" "),e.esPortal?e._e():t("td",{staticClass:"text-center"},[a.orden?t("a",{attrs:{href:"/ordenes?cadenaBusqueda=".concat(a.orden.numero_orden)}},[e._v("\n              "+e._s(a.orden.numero_orden)+"\n            ")]):e._e()])])]}))],2)])]):e._e(),e._v(" "),!e.procesando.busqueda&&e.pedidos.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"page-range":7,"container-class":"pagination","click-handler":e.cargarPedidos,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.busqueda,cantidad:e.pedidos.length,tipo:"pedidos"}}),e._v(" "),t("anular-modal",{attrs:{"medico-pedido":e.medico,cliente:e.cliente},on:{"pedido-anulado":e.pedidoAnulado}}),e._v(" "),t("estado-pedido-modal",{attrs:{pedido:e.pedido}})],1)}),[],!1,null,"8e73253e",null).exports},1906:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s={components:{PedidoEstado:a(7543).Z},props:["id","medicoPedido","cliente","datos","token"],data:function(){return{cargandoExamenes:!1,registro:{},detallesPedidos:[]}},created:function(){this.configurarInterceptorParaPortal()},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},alternarCamposFormulario:function(){"disabled"===$("fieldset").attr("disabled")?$("fieldset").removeAttr("disabled"):$("fieldset").attr("disabled","disabled")},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/pedidos/".concat(this.id)).then((function(t){var a=t.data.data;e.cargarPedido(a),e.alternarCamposFormulario()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar pedido!",a)})).then((function(){return e.$refs.cargando.alternar()}))},cargarPedido:function(e){var t=this;this.registro=e,this.esCliente?this.registro.categoria_id&&this.registro.categoria&&axios.get("/api/examenes/tarifas/".concat(this.registro.categoria.tarifa_venta_id)).then((function(a){var r=a.data.data;t.detallesPedidos=e.detalles_pedidos.map((function(e){var t=r.find((function(t){return t.id===e.examen.id}));return{id:e.id,examen_id:e.examen.id,examen_codigo:e.examen.codigo,examen_nombre:e.examen.nombre,valor:t?t.valor:""}}))})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al obtener exámenes",a)})):this.detallesPedidos=e.detalles_pedidos.map((function(e){return{id:e.id,examen_id:e.examen.id,examen_codigo:e.examen.codigo,examen_nombre:e.examen.nombre}}))},navegarAPedidos:function(){var e=document.referrer,t=window.location.hostname;e.includes(t)||(e="/pedidos",this.esMedico&&(e="/consulta-resultados-medicos/pedidos?token=".concat(this.token)),this.esCliente&&(e="/consulta-resultados-empresas/pedidos?token=".concat(this.token))),window.location.href=e},configurarInterceptorParaPortal:function(){var e=this;this.esPortal&&axios.interceptors.request.use((function(t){return e.esMedico&&(t.url="/consulta-resultados-medicos".concat(t.url)),e.esCliente&&(t.url="/consulta-resultados-empresas".concat(t.url)),t.params=o(o({},t.params),{},{token:e.token}),t}))}},computed:{etiquetaSeleccionados:function(){return this.detallesPedidos.length>1?"seleccionados":"seleccionado"},esPortal:function(){return void 0!==this.medicoPedido||void 0!==this.cliente},esMedico:function(){return void 0!==this.medicoPedido},esCliente:function(){return void 0!==this.cliente},total:function(){var e="";return this.detallesPedidos.find((function(e){return""===e.valor}))?e="-":(e=this.detallesPedidos.reduce((function(e,t){return e+Number(t.valor)}),0),e=e.toFixed(2)),e},esHumano:function(){return"App\\Models\\PacienteHumano"===this.registro.paciente_type},esAnimal:function(){return"App\\Models\\PacienteAnimal"===this.registro.paciente_type},esObjeto:function(){return"App\\Models\\SujetoObjeto"===this.registro.paciente_type}}};var n=a(3379),c=a.n(n),l=a(4529),d={insert:"head",singleton:!1};c()(l.Z,d);l.Z.locals;const u=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"}},[e.esPortal?t("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center",gap:"5px","margin-bottom":"10px"}},[e._v("\n      Pedido No. "),t("strong",[e._v(e._s(e.registro.id))]),e._v(" "),t("a",{staticClass:"btn btn-default",on:{click:e.navegarAPedidos}},[e._v("Regresar")])]):t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Pedido No. "),t("strong",[e._v(e._s(e.registro.id))])]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",[t("a",{staticClass:"btn btn-default",on:{click:e.navegarAPedidos}},[e._v("Regresar")])])])])]},proxy:!0}],null,!1,885789753)}),e._v(" "),t("fieldset",{attrs:{disabled:""}},[t("legend",{staticClass:"legend"},[e._v("Datos generales")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"paciente_nombre"}},[e._v("\n            Datos del Paciente\n          ")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente,expression:"registro.paciente"}],attrs:{id:"paciente_nombre"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.esHumano,expression:"esHumano"}],staticClass:"fas fa-user fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.esAnimal,expression:"esAnimal"}],staticClass:"fas fa-paw fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.esObjeto,expression:"esObjeto"}],staticClass:"fas fa-flask fa-lg"}),e._v(" "),t("span",{staticClass:"paciente"},[e._v(e._s(e.registro.paciente?e.registro.paciente.nombre_paciente:""))]),e._v("\n             \n            "),t("i",{staticClass:"far fa-id-card fa-lg"}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.id,expression:"id !== '0'"}]},[e._v(e._s(e.registro.paciente?e.registro.paciente.numero_identificacion:""))]),e._v(" "),"App\\Models\\PacienteHumano"===e.registro.paciente_type||"App\\Models\\PacienteAnimal"===e.registro.paciente_type?t("span",[e._v("\n               \n              "),t("i",{staticClass:"fas fa-birthday-cake fa-lg"}),e._v("\n              "+e._s(e.registro.paciente?e.registro.paciente.fecha_nacimiento:"")+" ("+e._s(e.registro.paciente?e.obtenerEdad(e.registro.paciente.fecha_nacimiento):"")+")\n            ")]):e._e(),e._v(" "),"App\\Models\\PacienteHumano"===e.registro.paciente_type||"App\\Models\\PacienteAnimal"===e.registro.paciente_type?t("span",[e._v("\n               \n              "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente&&"M"===e.registro.paciente.sexo,expression:"registro.paciente && registro.paciente.sexo === 'M'"}],staticClass:"fas fa-mars fa-lg"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.registro.paciente&&"F"===e.registro.paciente.sexo,expression:"registro.paciente && registro.paciente.sexo === 'F'"}],staticClass:"fas fa-venus fa-lg"}),e._v("\n              "+e._s(e.registro.paciente&&"M"===e.registro.paciente.sexo?"Masculino":"Femenino")+"\n            ")]):e._e(),e._v(" "),"App\\Models\\PacienteHumano"===e.registro.paciente_type||"App\\Models\\PacienteAnimal"===e.registro.paciente_type?t("span",[e._v("\n               \n              "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.registro.embarazada,expression:"registro.embarazada"}],staticClass:"fas fa-check fa-lg"}),e._v("\n              "+e._s(e.registro.embarazada?"Embarazada":"")+"\n            ")]):e._e()])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-1 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("div",[t("pedido-estado",{attrs:{estado:e.registro.estado}})],1)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal"}},[e._v("Sucursal")]),e._v(" "),t("div",{attrs:{id:"sucursal"}},[e._v(e._s(e.registro.sucursal_id?e.registro.sucursal.nombre:"-"))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico"}},[e._v("Médico")]),e._v(" "),t("div",{attrs:{id:"medico"}},[e._v(e._s(e.registro.medico_id?e.registro.medico.nombre_completo:"-"))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_cita"}},[e._v("Fecha de Cita")]),e._v(" "),t("div",{attrs:{id:"fecha_cita"}},[e._v(e._s(e.registro.fecha_cita))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"medico"}},[e._v("Orden No.")]),e._v(" "),e.registro.orden&&!e.esPortal?t("div",[t("a",{attrs:{href:"/ordenes/"+e.registro.orden.id+"/edit"}},[e._v(e._s(e.registro.orden?e.registro.orden.numero_orden:""))])]):e._e(),e._v(" "),e.registro.orden&&e.esPortal?t("div",[e._v("\n            "+e._s(e.registro.orden?e.registro.orden.numero_orden:"")+"\n          ")]):e._e(),e._v(" "),e.registro.orden?e._e():t("div",[e._v("-")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.numero_pedido_externo,expression:"registro.numero_pedido_externo"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Referencia")]),e._v(" "),t("i",{staticClass:"fas fa-info-circle",attrs:{title:"Otros sistemas pueden depender de esta referencia","data-toggle":"tooltip"}}),e._v(" "),t("div",[e._v(e._s(e.registro.numero_pedido_externo))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"diagnostico"}},[e._v("Diagnóstico")]),e._v(" "),t("div",{attrs:{id:"diagnostico"}},[e._v(e._s(e.registro.diagnostico_id?e.registro.diagnostico.concepto:"-")+"\n          ")])]),e._v(" "),t("div",{staticClass:"col-md-6 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"comentario"}},[e._v("Comentario")]),e._v(" "),t("div",{attrs:{id:"comentario"}},[e._v(e._s(e.registro.comentario?e.registro.comentario:"-"))])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha creación")]),e._v(" "),t("div",[e._v(e._s(e._f("fecha")(e.registro.created_at)))])])])]),e._v(" "),"N"===e.registro.estado?t("fieldset",{attrs:{disabled:""}},[t("legend",{staticClass:"legend"},[e._v("Datos de anulación")]),e._v(" "),t("div",{staticClass:"form-group"},[e.registro.usuario_anula?t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label",attrs:{for:"usuario_anula"}},[e._v("Usuario")]),e._v(" "),t("div",{attrs:{id:"usuario_anula"}},[e._v(e._s(e.registro.usuario_anula?e.registro.usuario_anula.nombre_usuario:"")+"\n          ")])]):e._e(),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_anula"}},[e._v("Fecha")]),e._v(" "),t("div",{attrs:{id:"fecha_anula"}},[e._v(e._s(e._f("fecha")(e.registro.fecha_anula)))])]),e._v(" "),t("div",{staticClass:"col-sm-12"},[t("label",{staticClass:"control-label"},[e._v("Motivo")]),e._v(" "),t("div",[e._v(e._s(e.registro.motivo_anula))])])])]):e._e(),e._v(" "),t("fieldset",{staticStyle:{"margin-top":"10px"},attrs:{disabled:""}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("legend",[e._v("\n            Exámenes\n            "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.detallesPedidos.length>0,expression:"detallesPedidos.length > 0"}],staticClass:"badge",attrs:{id:"contadorExamenes"}},[e._v(e._s(e.detallesPedidos.length)+"\n              "+e._s(e.etiquetaSeleccionados)+"\n            ")])])]),e._v(" "),t("div",{staticClass:"col-md-12"},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",[e._v("Examen")]),e._v(" "),e.esCliente&&e.datos.permisos.mostrarPrecios?t("th",{staticClass:"text-right"},[e._v("Valor")]):e._e()])]),e._v(" "),t("tbody",[0===e.detallesPedidos.length?t("tr",[t("td",{staticClass:"text-center"},[e._v("No existen exámenes seleccionados")])]):e._e(),e._v(" "),e._l(e.detallesPedidos,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.examen_codigo)+" - "+e._s(a.examen_nombre))]),e._v(" "),e.esCliente&&e.datos.permisos.mostrarPrecios?t("td",{staticClass:"text-right"},[e._v("\n                "+e._s(a.valor?Number(a.valor).toFixed(2):"Sin tarifa")+"\n              ")]):e._e()])}))],2),e._v(" "),e.esCliente&&e.datos.permisos.mostrarPrecios?t("tfoot",{directives:[{name:"show",rawName:"v-show",value:e.detallesPedidos.length>0,expression:"detallesPedidos.length > 0"}]},[t("tr",[t("td",{staticClass:"control-label text-right",staticStyle:{"font-weight":"bold"}},[e._v("Total")]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e.total))])])]):e._e()])])])])],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,"dcb31686",null).exports},2195:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={data:function(){return{cadenaBusqueda:"",examenSeleccionado:null,nombreExamenSeleccionado:"",nombreNuevaPlantilla:"",plantillaId:"",trabajando:!1}},props:["examenes","examenDestino","plantillas"],mounted:function(){var e=this;$("#duplicacionPlantilla").on("hide.bs.modal",(function(t){e.limpiarFormulario()}))},methods:{cerrar:function(){this.limpiarFormulario(),$("#duplicacionPlantilla").modal("toggle")},duplicar:function(){var e=this;confirm('¿Está seguro que desear duplicar la plantilla "'.concat(this.nombrePlantillaSeleccionada,'" dentro del examen "').concat(this.examenDestino.nombre,'"'))&&(this.trabajando=!0,axios.post("/api/plantillas/duplicar",{examen_id_destino:this.examenDestino.id,plantilla_id:this.plantillaId,nombre_nueva_plantilla:this.nombreNuevaPlantilla}).then((function(e){window.location.reload(!0)})).catch((function(t){e.$refs.alerta.mostrarAlerta("danger","¡Error!",t.response.data.errors),e.trabajando=!1})))},limpiarCadenaBusqueda:function(){this.cadenaBusqueda=""},limpiarFormulario:function(){this.cadenaBusqueda="",this.examenSeleccionado=null,this.nombreExamenSeleccionado="",this.plantillaId=""},seleccionarExamen:function(e){this.examenSeleccionado=e,this.nombreExamenSeleccionado=e.nombre,this.plantillaId=""}},computed:{examenesFiltrados:function(){var e=this;return this.cadenaBusqueda.length>0?this.examenes.filter((function(t){var a=new RegExp(removeDiacritics(e.cadenaBusqueda),"i");return a.test(t.codigo)||a.test(removeDiacritics(t.nombre))})):this.examenes},plantillasFiltradas:function(){var e=this;return this.examenSeleccionado?this.plantillas.filter((function(t){return t.examen_id===e.examenSeleccionado.id})):[]},nombrePlantillaSeleccionada:function(){var e=this;return""!==this.plantillaId?this.plantillas.find((function(t){return t.id===e.plantillaId})).nombre:""}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.duplicar.apply(null,arguments)}}},[t("fieldset",{attrs:{disabled:e.trabajando}},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"examen"}},[e._v("Examen seleccionado")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nombreExamenSeleccionado,expression:"nombreExamenSeleccionado"}],staticClass:"form-control",attrs:{id:"examen",type:"text",placeholder:"Seleccione un examen",readonly:""},domProps:{value:e.nombreExamenSeleccionado},on:{input:function(t){t.target.composing||(e.nombreExamenSeleccionado=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("div",{staticStyle:{height:"200px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.examenesFiltrados,(function(a){return[t("tr",[t("td",[e._v(e._s(a.codigo))]),e._v(" "),t("td",[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:function(t){return e.seleccionarExamen(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"})])])])]}))],2)])])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"plantilla"}},[e._v('Plantilla a copiar dentro del examen "'+e._s(e.examenDestino.nombre)+'"')]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.plantillaId,expression:"plantillaId"}],staticClass:"form-control",attrs:{id:"plantilla"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.plantillaId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Ninguna")]),e._v(" "),e._l(e.plantillasFiltradas,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v("\n            "+e._s(a.nombre)+"\n          ")])}))],2)]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"nombre"}},[e._v("Nombre de la nueva plantilla")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nombreNuevaPlantilla,expression:"nombreNuevaPlantilla"}],staticClass:"form-control",attrs:{id:"nombre",type:"text",placeholder:"Escriba el nombre de la nueva plantilla",maxlength:"60"},domProps:{value:e.nombreNuevaPlantilla},on:{input:function(t){t.target.composing||(e.nombreNuevaPlantilla=t.target.value)}}})]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:""===e.plantillaId||""===e.nombreNuevaPlantilla}},[e._v("\n        Duplicar\n      ")]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")])])])],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-3 text-center"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"col-sm-7 text-center"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Seleccionar")])])])}],!1,null,null,null).exports},737:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});const r={data:function(){return{codigosParametros:{},guardando:!1,idColumnaEditable:0,codigoEditable:!1}},props:["permisos","plantilla","sistemasExternos"],created:function(){this.mapearCodigos()},methods:{cancelarEdicion:function(){this.mapearCodigos(),this.idColumnaEditable=0},guardar:function(){var e=this,t=Object.keys(this.codigosParametros[this.idColumnaEditable]).map((function(t){return{id:Number(t),codigo_parametro:e.codigosParametros[e.idColumnaEditable][t]}}));this.guardando=!0,axios.patch("/api/sistemas-externos/".concat(this.idColumnaEditable,"/homologaciones-parametros"),{parametros:t}).then((function(t){e.idColumnaEditable=0,e.$refs.alerta.mostrarAlerta("success","Homologaciones guardadas")})).catch((function(t){var a=e.procesarErrorResponse(t);e.$refs.alerta.mostrarAlerta("danger","Error al guardar",a)})).then((function(t){return e.guardando=!1}))},guardarCodigos:function(){var e=this,t=Object.keys(this.codigosParametros.codigos).map((function(t){return{id:Number(t),codigo:e.codigosParametros.codigos[t]}}));this.guardando=!0,axios.patch("/api/examenes/".concat(this.plantilla.examen_id,"/plantillas/").concat(this.plantilla.id,"/codigos"),{parametros:t}).then((function(t){e.idColumnaEditable=0,e.$refs.alerta.mostrarAlerta("success","Códigos guardados")})).catch((function(t){var a=e.procesarErrorResponse(t);e.$refs.alerta.mostrarAlerta("danger","Error al guardar",a)})).then((function(t){return e.guardando=!1}))},mapearCodigos:function(){var e=this;this.codigosParametros.codigos={},this.plantilla.parametros.forEach((function(t){e.codigosParametros.codigos[t.id]=t.codigo})),this.sistemasExternos.forEach((function(t){e.codigosParametros[t.id]={},e.plantilla.parametros.forEach((function(a){var r=a.sistemas_externos.find((function(e){return e.id===t.id}));e.codigosParametros[t.id][a.id]=r?r.pivot.codigo_parametro:""}))}))}},computed:{},watch:{}};var o=a(3379),i=a.n(o),s=a(4138),n={insert:"head",singleton:!1};i()(s.Z,n);s.Z.locals;const c=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Homologaciones\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"javascript:history.back()"}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed",staticStyle:{width:"auto"}},[t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticStyle:{width:"100px"}},[e._v("Parámetros")]),e._v(" "),"master"===e.$usuario.nombreUsuario?t("th",{staticClass:"text-center",staticStyle:{width:"200px"}},[t("span",{staticStyle:{"padding-right":"5px"}},[e._v("Código")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:"codigos"!==e.idColumnaEditable,expression:"idColumnaEditable !== 'codigos'"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Editar códigos",disabled:0!==e.idColumnaEditable},on:{click:function(t){e.idColumnaEditable="codigos"}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:"codigos"===e.idColumnaEditable,expression:"idColumnaEditable === 'codigos'"}],staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Guardar códigos",disabled:e.guardando},on:{click:e.guardarCodigos}},[e.guardando?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-save fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:"codigos"===e.idColumnaEditable,expression:"idColumnaEditable === 'codigos'"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Cancelar edición",disabled:e.guardando},on:{click:e.cancelarEdicion}},[t("i",{staticClass:"fas fa-times fa-fw"})])]):e._e(),e._v(" "),e._l(e.sistemasExternos,(function(a){return t("th",{staticClass:"text-center",staticStyle:{width:"200px"}},[t("span",{staticStyle:{"padding-right":"5px"}},[e._v(e._s(a.nombre))]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.idColumnaEditable!==a.id,expression:"idColumnaEditable !== sistemaExterno.id"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Editar columna",disabled:0!==e.idColumnaEditable||e.codigoEditable},on:{click:function(t){e.idColumnaEditable=a.id}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.idColumnaEditable===a.id,expression:"idColumnaEditable === sistemaExterno.id"}],staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Guardar columna",disabled:e.guardando},on:{click:e.guardar}},[e.guardando?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-save fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.idColumnaEditable===a.id,expression:"idColumnaEditable === sistemaExterno.id"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Cancelar edición",disabled:e.guardando},on:{click:e.cancelarEdicion}},[t("i",{staticClass:"fas fa-times fa-fw"})])])}))],2)]),e._v(" "),t("tbody",e._l(e.plantilla.parametros,(function(a,r){return t("tr",[t("td",[e._v("\n        "+e._s(a.nombre)+" ["),t("abbr",{attrs:{title:"Sexo"}},[e._v(e._s(a.sexo))]),e._v("]\n      ")]),e._v(" "),"master"===e.$usuario.nombreUsuario?t("td",{staticClass:"text-center"},["codigos"!==e.idColumnaEditable?t("span",[e._v("\n          "+e._s(e.codigosParametros.codigos[a.id])+"\n        ")]):t("input",{directives:[{name:"model",rawName:"v-model",value:e.codigosParametros.codigos[a.id],expression:"codigosParametros['codigos'][parametro.id]"}],staticClass:"form-control input-xs text-center",attrs:{type:"text",maxlength:"10",tabindex:r,disabled:e.guardando},domProps:{value:e.codigosParametros.codigos[a.id]},on:{input:function(t){t.target.composing||e.$set(e.codigosParametros.codigos,a.id,t.target.value)}}})]):e._e(),e._v(" "),e._l(e.sistemasExternos,(function(o,i){return t("td",{staticClass:"text-center"},[e.idColumnaEditable!==o.id?t("span",[e._v("\n          "+e._s(e.codigosParametros[o.id][a.id])+"\n        ")]):t("input",{directives:[{name:"model",rawName:"v-model",value:e.codigosParametros[o.id][a.id],expression:"codigosParametros[sistemaExterno.id][parametro.id]"}],staticClass:"form-control input-xs text-center",attrs:{type:"text",maxlength:"15",tabindex:r+i*e.plantilla.parametros.length+100,disabled:e.guardando},domProps:{value:e.codigosParametros[o.id][a.id]},on:{input:function(t){t.target.composing||e.$set(e.codigosParametros[o.id],a.id,t.target.value)}}})])}))],2)})),0)])],1)}),[],!1,null,"403bae1e",null).exports},4992:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r=a(8393).Z;const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.registro.id?"Crear":"Editar")+" Plantilla\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{directives:[{name:"show",rawName:"v-show",value:"0"===e.registro.id&&e.permisos.crear||"0"!==e.registro.id&&e.permisos.editar,expression:"(registro.id === '0' && permisos.crear) || (registro.id !== '0' && permisos.editar)"}],staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.cargando||e.procesando}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-save fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n               Guardar\n            ")])]),e._v(" "),"0"!==e.registro.id&&e.permisos.editar?t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"/examenes/".concat(e.examen.id,"/plantillas/").concat(e.registro.id,"/homologaciones"),disabled:e.cargando||e.procesando}},[t("i",{staticClass:"fas fa-external-link-alt fa-fw"}),e._v(" Homologaciones\n            ")])]):e._e(),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"/examenes/".concat(e.examen.id,"/plantillas")}},[e._v("Regresar")])])])]},proxy:!0},{key:"ayuda",fn:function(){return[t("a",{attrs:{href:"#",target:"_blank",onClick:"window.open('/ayuda/examenes/editar_parametro.html','ventana_ayuda','width=438,height=700,location=no,menubar=no,resizable=0,status=no,top=0,right=0');"}},[t("i",{staticClass:"fas fa-book fa-fw text-gris"}),e._v(" Documentación\n        ")])]},proxy:!0}])}),e._v(" "),t("fieldset",{attrs:{disabled:""}},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-12"},[t("label",{staticClass:"control-label",attrs:{for:"examen_nombre"}},[e._v("Examen")]),e._v(" "),t("output",{attrs:{id:"examen_nombre"}},[e._v(e._s(e.examen.nombre))])])]),e._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombre",name:"nombre",maxlength:"60",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Seleccione...",options:e.secciones,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.registro.seccion_id}},"input",r,!1),o))]}},{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.registro.seccion_id,callback:function(t){e.$set(e.registro,"seccion_id",t)},expression:"registro.seccion_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"tecnica_id"}},[e._v("Técnica")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"tecnica_id",placeholder:"Seleccione...",options:e.tecnicas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.registro.tecnica_id,callback:function(t){e.$set(e.registro,"tecnica_id",t)},expression:"registro.tecnica_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"taxonomia_id"}},[e._v("Especie")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"taxonomia_id",placeholder:"Todas",options:e.taxonomias,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.registro.taxonomia_id,callback:function(t){e.$set(e.registro,"taxonomia_id",t)},expression:"registro.taxonomia_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label",attrs:{for:"imprimir_solo_parametros"}},[e._v(" ")]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_solo_parametros,expression:"registro.imprimir_solo_parametros"}],attrs:{type:"checkbox",id:"imprimir_solo_parametros",name:"imprimir_solo_parametros"},domProps:{checked:Array.isArray(e.registro.imprimir_solo_parametros)?e._i(e.registro.imprimir_solo_parametros,null)>-1:e.registro.imprimir_solo_parametros},on:{change:function(t){var a=e.registro.imprimir_solo_parametros,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_solo_parametros",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_solo_parametros",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_solo_parametros",o)}}}),e._v(" Imprimir sólo parámetros\n            ")])])])]),e._v(" "),t("div",{staticClass:"form-group"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row"},[e._m(0),e._v(" "),t("div",{staticClass:"col-sm-4 text-right",staticStyle:{"padding-top":"25px"}},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:e.abrirFormularioParametro}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v("Agregar\n              ")])])]),e._v(" "),!e.cargando&&e.parametrosOrdenados.length>0?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",e._l(e.parametrosOrdenados,(function(a){return t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.id))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n                "+e._s(a.orden)+"\n                "),t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[t("a",{staticClass:"btn btn-default btn-xs",attrs:{title:"Subir",disabled:1===a.orden},on:{click:function(t){return e.subirParametro(a)}}},[t("i",{staticClass:"fas fa-chevron-up fa-fw"})]),e._v(" "),t("a",{staticClass:"btn btn-default btn-xs",attrs:{title:"Bajar",disabled:a.orden===e.parametros.length},on:{click:function(t){return e.bajarParametro(a)}}},[t("i",{staticClass:"fas fa-chevron-down fa-fw"})]),e._v(" "),t("a",{staticClass:"btn btn-default btn-xs",attrs:{title:"Mover"},on:{click:function(t){return e.abrirModalMoverParametro(a)}}},[t("i",{staticClass:"fas fa-exchange-alt fa-fw"})])])]),e._v(" "),t("td",[e._v(e._s(a.nombre)+" "),a.abreviatura?t("i",[e._v("["+e._s(a.abreviatura)+"]")]):e._e()]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.buscarTipoParametro(a)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n                "+e._s(["N","F"].includes(a.tipo_parametro)?a.valor_minimo?a.valor_minimo+" - "+a.valor_maximo:"":"X"===a.tipo_parametro||"S"===a.tipo_parametro?a.valor_normal_texto:"")+"\n              ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.unidad_medida))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.sexo?a.sexo:""))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n                "+e._s(["N","X","S","F"].includes(a.tipo_parametro)?a.imprimir_valor_referencia?"Sí":"No":"")+"\n              ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"btn-group no-salto-linea",attrs:{role:"group","aria-label":"..."}},[t("a",{staticClass:"btn btn-default btn-xs",attrs:{title:"Editar"},on:{click:function(t){return e.editarParametro(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Agregar Valores de Referencia por Edad",disabled:!["N","F"].includes(a.tipo_parametro)},on:{click:function(t){return e.abrirFormularioValoresReferencia(a)}}},[t("i",{staticClass:"fas fa-sliders-h fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarParametro(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})])])])])})),0)]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.parametrosOrdenados.length,tipo:"parámetros"}})],1)])])],1),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"formularioParametro",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardarParametro.apply(null,arguments)}}},[e._m(2),e._v(" "),t("div",{staticClass:"modal-body",attrs:{id:"plantilla"}},[t("alerta",{ref:"alertaParametro"}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.id,expression:"parametro.id"}],attrs:{type:"hidden"},domProps:{value:e.parametro.id},on:{input:function(t){t.target.composing||e.$set(e.parametro,"id",t.target.value)}}}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"tipo_parametro"}},[e._v("Tipo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.parametro.tipo_parametro,expression:"parametro.tipo_parametro"}],staticClass:"form-control input-sm",attrs:{id:"tipo_parametro",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.parametro,"tipo_parametro",t.target.multiple?a:a[0])}}},e._l(e.tiposParametros,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                    "+e._s(a.nombre)+"\n                  ")])})),0)]),e._v(" "),["F","G","N","S","E","X","A","I"].includes(e.parametro.tipo_parametro)&&e.muestras.length>1?t("div",{staticClass:"col-sm-7 form-group"},[t("label",{staticClass:"control-label obligatorio"},[e._v("Muestra")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"muestras",placeholder:"Seleccione...",label:"nombre",options:e.muestras,reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.parametro.muestra_id}},"input",r,!1),o))]}}],null,!1,1107646278),model:{value:e.parametro.muestra_id,callback:function(t){e.$set(e.parametro,"muestra_id",t)},expression:"parametro.muestra_id"}})],1):e._e()]),e._v(" "),t("div",{staticClass:"row"},[["F","G","N","S","T","E","X","A","I","M"].includes(e.parametro.tipo_parametro)?t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:["F","G","N","S","T","E","X","A","I","M"].includes(e.parametro.tipo_parametro)},attrs:{for:"nombre_parametro"}},[e._v("\n                  Nombre\n                ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.nombre,expression:"parametro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre_parametro",type:"text",maxlength:"50",required:""},domProps:{value:e.parametro.nombre},on:{input:function(t){t.target.composing||e.$set(e.parametro,"nombre",t.target.value)}}})]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:["X","N","S","F","E","M"].includes(e.parametro.tipo_parametro),expression:"['X', 'N', 'S', 'F', 'E', 'M'].includes(parametro.tipo_parametro)"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"abreviatura_parametro"}},[e._v("Abreviatura")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.abreviatura,expression:"parametro.abreviatura"}],staticClass:"form-control input-sm",attrs:{id:"abreviatura_parametro",type:"text",maxlength:"10"},domProps:{value:e.parametro.abreviatura},on:{input:function(t){t.target.composing||e.$set(e.parametro,"abreviatura",t.target.value)}}})]),e._v(" "),["F","S","N","X"].includes(e.parametro.tipo_parametro)?t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:!["L","G","T","E",""].includes(e.parametro.tipo_parametro)},attrs:{for:"sexo_parametro"}},[e._v("Sexo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.parametro.sexo,expression:"parametro.sexo"}],staticClass:"form-control input-sm",attrs:{id:"sexo_parametro",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.parametro,"sexo",t.target.multiple?a:a[0])}}},e._l(e.sexos,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])})),0)]):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:["F","S","N","X"].includes(e.parametro.tipo_parametro),expression:"['F', 'S', 'N', 'X'].includes(parametro.tipo_parametro)"}],staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"unidad_medida_parametro"}},[e._v("Unidad")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.unidad_medida,expression:"parametro.unidad_medida"}],staticClass:"form-control input-sm",attrs:{id:"unidad_medida_parametro",type:"text",maxlength:"10",disabled:["L","G","T","E","A","I",""].includes(e.parametro.tipo_parametro)},domProps:{value:e.parametro.unidad_medida},on:{input:function(t){t.target.composing||e.$set(e.parametro,"unidad_medida",t.target.value)}}})])]),e._v(" "),"S"===e.parametro.tipo_parametro?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:"S"===e.parametro.tipo_parametro},attrs:{for:"tipo_dato_id_parametro"}},[e._v("Lista")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"tipo_dato_id_parametro",placeholder:"Seleccione...",options:e.tiposDatos,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.parametro.tipo_dato_id}},"input",r,!1),o))]}},{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!1,3074316),model:{value:e.parametro.tipo_dato_id,callback:function(t){e.$set(e.parametro,"tipo_dato_id",t)},expression:"parametro.tipo_dato_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"opcion_tipo_dato_id_parametro"}},[e._v("\n                  Valor por defecto\n                ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.parametro.opcion_tipo_dato_id,expression:"parametro.opcion_tipo_dato_id"}],staticClass:"form-control input-sm",attrs:{id:"opcion_tipo_dato_id_parametro"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.parametro,"opcion_tipo_dato_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.opcionesTipoDato,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n                  ")])}))],2)])]):e._e(),e._v(" "),["S","N","F","X"].includes(e.parametro.tipo_parametro)?t("div",{staticClass:"row"},[-1!==["N","F"].indexOf(e.parametro.tipo_parametro)?t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"valor_minimo_parametro"}},[e._v("\n                  V. mínimo\n                ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.valor_minimo,expression:"parametro.valor_minimo"}],staticClass:"form-control input-sm",attrs:{id:"valor_minimo_parametro",type:"number",step:"any"},domProps:{value:e.parametro.valor_minimo},on:{input:function(t){t.target.composing||e.$set(e.parametro,"valor_minimo",t.target.value)}}})]):e._e(),e._v(" "),-1!==["N","F"].indexOf(e.parametro.tipo_parametro)?t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label no-salto-linea",attrs:{for:"valor_maximo_parametro"}},[e._v("\n                  V. máximo\n                ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.valor_maximo,expression:"parametro.valor_maximo"}],staticClass:"form-control input-sm",attrs:{id:"valor_maximo_parametro",type:"number",step:"any"},domProps:{value:e.parametro.valor_maximo},on:{input:function(t){t.target.composing||e.$set(e.parametro,"valor_maximo",t.target.value)}}})]):e._e(),e._v(" "),-1!==["X","S"].indexOf(e.parametro.tipo_parametro)?t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"valor_normal_parametro"}},[e._v("Valor normal")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.valor_normal_texto,expression:"parametro.valor_normal_texto"}],staticClass:"form-control input-sm",attrs:{id:"valor_normal_parametro",type:"text",maxlength:"20",disabled:!["","S","X"].includes(e.parametro.tipo_parametro)},domProps:{value:e.parametro.valor_normal_texto},on:{input:function(t){t.target.composing||e.$set(e.parametro,"valor_normal_texto",t.target.value)}}})]):e._e(),e._v(" "),["S","N","F","X"].includes(e.parametro.tipo_parametro)?t("div",{staticClass:"col-sm-5 form-group"},[-1!==["S","N","F","X"].indexOf(e.parametro.tipo_parametro)?t("label",[e._v(" ")]):e._e(),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.imprimir_valor_referencia,expression:"parametro.imprimir_valor_referencia"}],attrs:{type:"checkbox",disabled:!["S","N","F","X"].includes(e.parametro.tipo_parametro)},domProps:{checked:Array.isArray(e.parametro.imprimir_valor_referencia)?e._i(e.parametro.imprimir_valor_referencia,null)>-1:e.parametro.imprimir_valor_referencia},on:{change:function(t){var a=e.parametro.imprimir_valor_referencia,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.parametro,"imprimir_valor_referencia",a.concat([null])):i>-1&&e.$set(e.parametro,"imprimir_valor_referencia",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.parametro,"imprimir_valor_referencia",o)}}}),e._v("\n                    Imprimir valor de referencia\n                  ")])])]):e._e()]):e._e(),e._v(" "),-1!==["N","F"].indexOf(e.parametro.tipo_parametro)?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"valor_minimo_critico_parametro"}},[e._v("V. mínimo\n                  crítico")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.valor_minimo_critico,expression:"parametro.valor_minimo_critico"}],staticClass:"form-control input-sm",attrs:{type:"number",id:"valor_minimo_critico_parametro",step:"any"},domProps:{value:e.parametro.valor_minimo_critico},on:{input:function(t){t.target.composing||e.$set(e.parametro,"valor_minimo_critico",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"valor_maximo_critico_parametro"}},[e._v("V. máximo\n                  crítico")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.valor_maximo_critico,expression:"parametro.valor_maximo_critico"}],staticClass:"form-control input-sm",attrs:{type:"number",id:"valor_maximo_critico_parametro",step:"any"},domProps:{value:e.parametro.valor_maximo_critico},on:{input:function(t){t.target.composing||e.$set(e.parametro,"valor_maximo_critico",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"delta_check_parametro"}},[e._v("% Delta check")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.delta_check,expression:"parametro.delta_check"}],staticClass:"form-control input-sm",attrs:{type:"number",id:"delta_check_parametro",step:"any"},domProps:{value:e.parametro.delta_check},on:{input:function(t){t.target.composing||e.$set(e.parametro,"delta_check",t.target.value)}}})])]):e._e(),e._v(" "),t("div",{staticClass:"row"},[["S","N","F","X"].includes(e.parametro.tipo_parametro)?t("div",{staticClass:"col-sm-3 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.ocultar_pdf,expression:"parametro.ocultar_pdf"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.parametro.ocultar_pdf)?e._i(e.parametro.ocultar_pdf,null)>-1:e.parametro.ocultar_pdf},on:{change:function(t){var a=e.parametro.ocultar_pdf,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.parametro,"ocultar_pdf",a.concat([null])):i>-1&&e.$set(e.parametro,"ocultar_pdf",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.parametro,"ocultar_pdf",o)}}}),e._v("\n                    Ocultar en PDF\n                  ")])])]):e._e(),e._v(" "),["S","N","F","X"].includes(e.parametro.tipo_parametro)?t("div",{staticClass:"col-sm-6 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.no_cambia_estado_muestra,expression:"parametro.no_cambia_estado_muestra"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.parametro.no_cambia_estado_muestra)?e._i(e.parametro.no_cambia_estado_muestra,null)>-1:e.parametro.no_cambia_estado_muestra},on:{change:function(t){var a=e.parametro.no_cambia_estado_muestra,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.parametro,"no_cambia_estado_muestra",a.concat([null])):i>-1&&e.$set(e.parametro,"no_cambia_estado_muestra",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.parametro,"no_cambia_estado_muestra",o)}}}),e._v("\n                    No cambia estado de muestra\n                  ")])])]):e._e()]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:["F","S","N","X"].includes(e.parametro.tipo_parametro),expression:"['F', 'S', 'N', 'X'].includes(parametro.tipo_parametro)"}],staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group editor"},[t("label",{staticClass:"control-label",attrs:{for:"interpretacion_parametro"}},[e._v("Interpretación")]),e._v(" "),t("ckeditor",{attrs:{id:"interpretacion_parametro",disabled:["L","G","T","E","A","I",""].includes(e.parametro.tipo_parametro),editor:e.editor,config:e.editorConfig},model:{value:e.parametro.interpretacion,callback:function(t){e.$set(e.parametro,"interpretacion",t)},expression:"parametro.interpretacion"}})],1)]),e._v(" "),["S","N","F","X"].includes(e.parametro.tipo_parametro)?t("div",{staticClass:"row"},[e._m(3),e._v(" "),t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"radio-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.interpretacion_valor_referencia,expression:"parametro.interpretacion_valor_referencia"}],attrs:{id:"ninguno",name:"tabla",type:"radio"},domProps:{value:null,checked:e._q(e.parametro.interpretacion_valor_referencia,null)},on:{change:function(t){return e.$set(e.parametro,"interpretacion_valor_referencia",null)}}}),e._v("\n                  Conf. global\n                ")]),e._v(" "),t("label",{staticClass:"radio-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.interpretacion_valor_referencia,expression:"parametro.interpretacion_valor_referencia"}],attrs:{id:"columnaExamen",name:"tabla",type:"radio"},domProps:{value:!1,checked:e._q(e.parametro.interpretacion_valor_referencia,!1)},on:{change:function(t){return e.$set(e.parametro,"interpretacion_valor_referencia",!1)}}}),e._v('\n                  Columna "Examen"\n                ')]),e._v(" "),t("label",{staticClass:"radio-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.interpretacion_valor_referencia,expression:"parametro.interpretacion_valor_referencia"}],attrs:{id:"columnaValorReferencia",name:"tabla",type:"radio"},domProps:{value:!0,checked:e._q(e.parametro.interpretacion_valor_referencia,!0)},on:{change:function(t){return e.$set(e.parametro,"interpretacion_valor_referencia",!0)}}}),e._v('\n                  Columna "Valor Referencia"\n                ')])])]):e._e(),e._v(" "),"F"===e.parametro.tipo_parametro?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label obligatorio"},[e._v("Fórmula")]),e._v(" "),t("textarea",{staticClass:"form-control input-sm",attrs:{type:"text",rows:"2",readonly:"",disabled:"F"!==e.parametro.tipo_parametro}},[e._v(e._s(e.parametro.formula.join(" ")))])])]):e._e(),e._v(" "),"F"===e.parametro.tipo_parametro?t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-9 form-group"},[t("div",{staticClass:"row",staticStyle:{"margin-bottom":"3px"}},[t("div",{staticClass:"col-xs-9"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.parametroIdNombre,expression:"parametroIdNombre"}],staticClass:"form-control input-sm",attrs:{disabled:"F"!==e.parametro.tipo_parametro},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.parametroIdNombre=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),t("optgroup",{attrs:{label:"PLANTILLA ACTUAL"}},e._l(e.filtrarParametrosDuplicados(e.parametrosNumericos),(function(a){return t("option",{domProps:{value:"".concat(e.examen.nombre," -|- ").concat(a.nombre)}},[e._v(e._s(a.nombre)+"\n                        ")])})),0),e._v(" "),e._l(e.plantillas,(function(a){return t("optgroup",{attrs:{label:a.nombre}},e._l(e.filtrarParametrosDuplicados(a.parametros),(function(r){return t("option",{domProps:{value:"".concat(a.examen.nombre," -|- ").concat(r.nombre)}},[e._v(e._s(r.nombre)+"\n                        ")])})),0)}))],2)]),e._v(" "),t("div",{staticClass:"col-xs-3"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:""===e.parametroIdNombre},on:{click:function(t){return e.agregarFormula("".concat(e.comillas).concat(e.parametroIdNombre).concat(e.comillas))}}},[e._v("\n                      Agregar\n                    ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.constante,expression:"constante"}],staticClass:"form-control input-sm",attrs:{type:"number",min:"0",step:"any",placeholder:"Constante",disabled:"F"!==e.parametro.tipo_parametro},domProps:{value:e.constante},on:{input:function(t){t.target.composing||(e.constante=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-xs-3"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:""===e.constante},on:{click:function(t){return e.agregarFormula(e.constante)}}},[e._v("\n                      Agregar\n                    ")])])])]),e._v(" "),t("div",{staticClass:"col-xs-3 text-center",staticStyle:{"border-left":"1px solid #ccc"}},[t("div",{staticStyle:{"margin-bottom":"3px"}},[t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{width:"30px"},attrs:{type:"button"},on:{click:function(t){return e.agregarFormula("(")}}},[e._v("(\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{width:"30px"},attrs:{type:"button"},on:{click:function(t){e.agregarFormula(")")}}},[e._v(")\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{width:"30px"},attrs:{type:"button"},on:{click:e.eliminarUltimoItemFormula}},[t("i",{staticClass:"fas fa-arrow-left",attrs:{"aria-hidden":"true"}})])]),e._v(" "),t("div",{staticStyle:{"margin-bottom":"3px"}},[t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{width:"30px"},attrs:{type:"button"},on:{click:function(t){return e.agregarFormula("+")}}},[e._v("+\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{width:"30px"},attrs:{type:"button"},on:{click:function(t){return e.agregarFormula("-")}}},[e._v("‐\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{width:"30px"},attrs:{type:"button"},on:{click:function(t){return e.eliminarTodoFormula("<")}}},[t("i",{staticClass:"fas fa-eraser",attrs:{"aria-hidden":"true"}})])]),e._v(" "),t("div",{staticStyle:{"margin-bottom":"3px"}},[t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{width:"30px"},attrs:{type:"button"},on:{click:function(t){return e.agregarFormula("*")}}},[e._v("*\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{width:"30px"},attrs:{type:"button"},on:{click:function(t){return e.agregarFormula("/")}}},[e._v("/\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",staticStyle:{width:"30px"},attrs:{type:"button"},on:{click:function(t){return e.agregarFormula("^")}}},[e._v("^\n                  ")])])])]):e._e()],1),e._v(" "),e._m(4)])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"formularioValoresReferencia",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.agregarValorReferencia.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(5),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("\n              "+e._s(e.parametroSeleccionado?e.parametroSeleccionado.nombre:"")+" ("+e._s(e.parametroSeleccionadoSexo)+")\n              - Valores de referencia por edad\n            ")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alertaValoresReferencia"}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.parametro.id,expression:"parametro.id"}],attrs:{type:"hidden"},domProps:{value:e.parametro.id},on:{input:function(t){t.target.composing||e.$set(e.parametro,"id",t.target.value)}}}),e._v(" "),t("div"),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label col-sm-3 obligatorio",attrs:{for:"escala_edad_valor_referencia"}},[e._v("\n                Escala edad")]),e._v(" "),t("div",{staticClass:"col-sm-4"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.valorReferencia.escala_edad,expression:"valorReferencia.escala_edad"}],staticClass:"form-control input-sm",attrs:{id:"escala_edad_valor_referencia",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.valorReferencia,"escala_edad",t.target.multiple?a:a[0])}}},e._l(e.escalasEdad,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                    "+e._s(a.nombre)+"\n                  ")])})),0)])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label col-sm-3 obligatorio",attrs:{for:"edad_desde_valor_referencia"}},[e._v("Desde")]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.valorReferencia.edad_desde,expression:"valorReferencia.edad_desde",modifiers:{number:!0}}],staticClass:"form-control input-sm",attrs:{type:"number",id:"edad_desde_valor_referencia",min:"D"===e.valorReferencia.escala_edad?0:1,max:"D"===e.valorReferencia.escala_edad?30:"M"===e.valorReferencia.escala_edad?12:120,required:""},domProps:{value:e.valorReferencia.edad_desde},on:{input:function(t){t.target.composing||e.$set(e.valorReferencia,"edad_desde",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),t("label",{staticClass:"control-label col-sm-3 obligatorio",attrs:{for:"edad_hasta_valor_referencia"}},[e._v("Hasta")]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.valorReferencia.edad_hasta,expression:"valorReferencia.edad_hasta",modifiers:{number:!0}}],staticClass:"form-control input-sm",attrs:{type:"number",id:"edad_hasta_valor_referencia",min:"1",max:"D"===e.valorReferencia.escala_edad?30:"M"===e.valorReferencia.escala_edad?12:120,required:""},domProps:{value:e.valorReferencia.edad_hasta},on:{input:function(t){t.target.composing||e.$set(e.valorReferencia,"edad_hasta",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label col-sm-3 obligatorio",attrs:{for:"valor_minimo_valor_referencia"}},[e._v("\n                Valor mínimo\n              ")]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.valorReferencia.valor_minimo,expression:"valorReferencia.valor_minimo",modifiers:{number:!0}}],staticClass:"form-control input-sm",attrs:{type:"number",id:"valor_minimo_valor_referencia",step:"any",required:""},domProps:{value:e.valorReferencia.valor_minimo},on:{input:function(t){t.target.composing||e.$set(e.valorReferencia,"valor_minimo",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),t("label",{staticClass:"control-label col-sm-3 obligatorio",attrs:{for:"valor_maximo_valor_referencia"}},[e._v("\n                Valor máximo\n              ")]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.valorReferencia.valor_maximo,expression:"valorReferencia.valor_maximo",modifiers:{number:!0}}],staticClass:"form-control input-sm",attrs:{type:"number",id:"valor_maximo_valor_referencia",step:"any",required:""},domProps:{value:e.valorReferencia.valor_maximo},on:{input:function(t){t.target.composing||e.$set(e.valorReferencia,"valor_maximo",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label col-sm-3",attrs:{for:"valor_minimo_critico_valor_referencia"}},[e._v("\n                Valor mínimo crítico\n              ")]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.valorReferencia.valor_minimo_critico,expression:"valorReferencia.valor_minimo_critico",modifiers:{number:!0}}],staticClass:"form-control input-sm",attrs:{type:"number",id:"valor_minimo_critico_valor_referencia",step:"any"},domProps:{value:e.valorReferencia.valor_minimo_critico},on:{input:function(t){t.target.composing||e.$set(e.valorReferencia,"valor_minimo_critico",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),t("label",{staticClass:"control-label col-sm-3",attrs:{for:"valor_maximo_critico_valor_referencia"}},[e._v("\n                Valor máximo crítico\n              ")]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.valorReferencia.valor_maximo_critico,expression:"valorReferencia.valor_maximo_critico",modifiers:{number:!0}}],staticClass:"form-control input-sm",attrs:{type:"number",id:"valor_maximo_critico_valor_referencia",step:"any"},domProps:{value:e.valorReferencia.valor_maximo_critico},on:{input:function(t){t.target.composing||e.$set(e.valorReferencia,"valor_maximo_critico",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),e._m(6),e._v(" "),t("br"),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(7),e._v(" "),t("tbody",e._l(e.valoresReferenciaOrdenados,(function(a){return t("tr",[t("td",{staticClass:"text-center"},[e._v("\n                  "+e._s(a.edad_desde+" - "+a.edad_hasta)+"\n                ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.buscarEscalaEdad(a.escala_edad)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.valor_minimo))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.valor_maximo))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.valor_minimo_critico))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.valor_maximo_critico))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarValorReferencia(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})])])])})),0)])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:e.guardarValoresReferencia}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalMoverParametro",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardarMoverParametro.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(8),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Mover parámetro "+e._s(e.moverParametro.nombre))])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alertaMoverModalParametro"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6 form-group"},[t("label",{attrs:{for:"destino"}},[e._v("Posición origen")]),e._v(" "),t("div",[e._v(e._s(e.moverParametro.origen))])]),e._v(" "),t("div",{staticClass:"col-md-6 form-group"},[t("label",{attrs:{for:"destino"}},[e._v("Posición destino")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.moverParametro.destino,expression:"moverParametro.destino",modifiers:{number:!0}}],staticClass:"form-control input-sm",attrs:{id:"destino",type:"number",min:"1",max:e.parametros.length,step:"1",required:""},domProps:{value:e.moverParametro.destino},on:{input:function(t){t.target.composing||e.$set(e.moverParametro,"destino",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:e.moverParametro.origen===e.moverParametro.destino||!e.moverParametro.destino}},[t("i",{staticClass:"fas fa-exchange-alt"}),e._v(" Mover\n            ")])])])])])])],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-sm-8"},[e("h3",[this._v("Parámetros")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center"},[e._v("ID")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-left"},[e._v("Nombre "),t("i",[e._v("[Abrev.]")])]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Tipo")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("V. Referencia")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Unidad")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Sexo")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Imp. Ref")]),e._v(" "),t("th",{staticClass:"col-sm-1"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n              ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Parámetro")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-sm-12"},[e("label",{staticClass:"control-label"},[this._v("\n                  Posición de Interpretación en el Reporte de Resultados\n                ")])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-save fa-fw"}),this._v("\n               Guardar\n            ")])])},function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×\n              ")])])},function(){var e=this._self._c;return e("div",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-plus fa-fw"}),this._v("\n                Agregar\n              ")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-2 text-center",staticStyle:{"vertical-align":"middle"}},[e._v("Rango")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center",staticStyle:{"vertical-align":"middle"}},[e._v("Escala")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Valor mínimo")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Valor máximo")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("V. mínimo crítico")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("V. máximo crítico")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center",staticStyle:{"vertical-align":"middle"}},[e._v("Eliminar")])])])},function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×\n              ")])])}],!1,null,null,null).exports},3392:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(9107),o=a(9676),i=a(4590);const s={components:{BuscarPacienteModal:o.Z,BuscarExamenModal:r.Z},props:["laboratorioId","detallesOrdenesIds","resultado","incluir"],data:function(){return{empresas:[],sucursales:[],estadosDetalleOrden:["G","R","X","L","V"],cargando:!1,detalleOrdenesEncontrados:[],detallesOrdenesSeleccionadas:[],seleccionadoTodos:"",countDetallesOrdenes:0,totalDetallesOrdenes:0,cantidadDetallesOrdenes:0,filtros:{page:1,laboratorioId:"",empresaId:"",subempresaId:"",sucursalId:"",fechaDesde:moment().format("YYYY-MM-DD"),fechaHasta:moment().format("YYYY-MM-DD"),numeroOrden:"",estadoDetalleOrden:"",pacienteId:"",pacienteNombre:"",pacienteType:"",soloIds:!1,detallesOrdenesIds:[],examenId:"",examenCodigo:"",incluir:""}}},mounted:function(){var e=this;$("#buscarDetallesOrdenes").on("show.bs.modal",(function(t){e.incluir&&(e.filtros.incluir=e.incluir),e.cargarCatalogos()})),$("#buscarDetallesOrdenes").on("hide.bs.modal",(function(t){"buscarDetallesOrdenes"===t.target.id&&(e.limpiarFormulario(),e.filtros.incluir="")})),$("#buscarPacienteParaFiltro").on("hidden.bs.modal",(function(e){$(".modal:visible").length&&$("body").addClass("modal-open")})),this.filtros.laboratorioId=this.laboratorioId},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},ocultarMensajes:function(){this.$refs.alerta.ocultarAlertas()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},agregar:function(){var e=this,t=!1;this.detallesOrdenesSeleccionadas.forEach((function(a){t=!0,e.detallesOrdenesIds.push(a)})),t?(this.resultado.actualizar=!0,$("#buscarDetallesOrdenes").modal("hide")):this.mostrarAdvertencia("No ha seleccionado ningun registro")},cargarCatalogos:function(){var e=this;_.isEmpty(this.empresas)?axios.get("/api/catalogos",{params:{catalogo:i.oH.CLIENTES}}).then((function(t){e.empresas=t.data.data,e.$can("cambiar-empresas")||(e.filtros.empresaId=e.$usuario.empresaId)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Clientes!",a)})):this.$can("cambiar-empresas")||(this.filtros.empresaId=this.$usuario.empresaId),_.isEmpty(this.sucursales)?axios.get("/api/catalogos",{params:{catalogo:i.oH.SUCURSALES}}).then((function(t){e.sucursales=t.data.data,e.$can("cambiar-sucursal")||(e.filtros.sucursalId=e.$usuario.sucursalId)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar sucursales",a)})):this.$can("cambiar-sucursal")||(this.filtros.sucursalId=this.$usuario.sucursalId)},seleccionarTodos:function(){var e=this;if(0!==this.detalleOrdenesEncontrados.length)if(this.seleccionadoTodos)this.ocultarMensajes(),this.detalleOrdenesEncontrados.forEach((function(e){e.seleccionado=!1})),this.seleccionadoTodos=!1,this.detallesOrdenesSeleccionadas=[],this.cantidadDetallesOrdenes=this.detallesOrdenesSeleccionadas.length;else{var t=$.extend({},this.filtros);t.soloIds=!0,t.detallesOrdenesIds=this.detallesOrdenesIds,this.cargando=!0,axios.get("/api/detalles-ordenes/buscar",{params:t}).then((function(t){var a=t.data.data;e.detallesOrdenesSeleccionadas=a.map((function(e){return e.id})),e.cantidadDetallesOrdenes=e.detallesOrdenesSeleccionadas.length,e.detalleOrdenesEncontrados.forEach((function(e){e.seleccionado=!0})),e.seleccionadoTodos=!0,e.cargando=!1})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al seleccionar todos"),e.mostrarErrores(a)}))}},seleccionarDetalleOrden:function(e){if(e.seleccionado){var t=this.detallesOrdenesSeleccionadas.indexOf(e.id);this.detallesOrdenesSeleccionadas.splice(t,1),this.seleccionadoTodos=!1}else this.detallesOrdenesSeleccionadas.includes(e.id)||this.detallesOrdenesSeleccionadas.push(e.id);this.cantidadDetallesOrdenes=this.detallesOrdenesSeleccionadas.length,e.seleccionado=!e.seleccionado,this.cantidadDetallesOrdenes===this.totalDetallesOrdenes&&(this.seleccionadoTodos=!0)},buscar:function(){this.cantidadDetallesOrdenes=0,this.detallesOrdenesSeleccionadas=[],this.seleccionadoTodos=!1,this.cargarDetallesOrdenes()},cargarDetallesOrdenes:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.cargando=!0,this.filtros.page=t,this.filtros.laboratorioId=this.laboratorioId;var a=$.extend({},this.filtros);a.pacienteNombre="",a.soloIds=!1,a.detallesOrdenesIds=this.detallesOrdenesIds,axios.get("/api/detalles-ordenes/buscar",{params:a}).then((function(t){var a=t.data.data;e.countDetallesOrdenes=a.last_page,e.totalDetallesOrdenes=a.total;var r=e;if(e.detalleOrdenesEncontrados=a.data,e.detalleOrdenesEncontrados.forEach((function(e){e.seleccionado=r.detallesOrdenesSeleccionadas.includes(e.id)})),e.seleccionadoTodos){var o=e;e.detalleOrdenesEncontrados.forEach((function(e){e.seleccionado=o.seleccionadoTodos}))}e.cargando=!1})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al buscar"),e.mostrarErrores(a)}))},limpiarFormulario:function(){this.filtros.laboratorioId=this.laboratorioId,this.filtros.empresaId="",this.filtros.subempresaId="",this.filtros.sucursalId="",this.filtros.fechaDesde=moment().format("YYYY-MM-DD"),this.filtros.fechaHasta=moment().format("YYYY-MM-DD"),this.filtros.numeroOrden="",this.filtros.estadoDetalleOrden="",this.filtros.pacienteId="",this.filtros.pacienteNombre="",this.filtros.pacienteType="",this.filtros.examenId="",this.filtros.examenCodigo="",this.filtros.soloIds=!1,this.incluir||(this.filtros.incluir=""),this.detalleOrdenesEncontrados=[],this.seleccionadoTodos=!1,this.detallesOrdenesSeleccionadas=[],this.cantidadDetallesOrdenes=0,this.countDetallesOrdenes=0,this.totalDetallesOrdenes=0,this.ocultarMensajes()},pacienteSeleccionado:function(e){e&&(this.filtros.pacienteId=e.id,this.filtros.pacienteNombre=e.nombre_paciente,this.filtros.pacienteType=e.tipo)},limpiarPaciente:function(){this.filtros.pacienteId="",this.filtros.pacienteNombre="",this.filtros.pacienteType=""},borrarFiltroExamen:function(){this.filtros.examenId="",this.filtros.examenCodigo=""},incluirClick:function(e){this.filtros.incluir===e.target.value&&(this.filtros.incluir="")},examenSeleccionado:function(e){this.filtros.examenId=e.id,this.filtros.examenCodigo=e.codigo}},computed:{subempresas:function(){var e=this;if(this.filtros.empresaId){var t=this.empresas.find((function(t){return t.id===e.filtros.empresaId})).subempresas,a=t.find((function(e){return e.predeterminada}));return this.filtros.subempresaId=a?a.id:"",t}return this.filtros.subempresaId="",[]},puedeBuscar:function(){return this.filtros.empresaId||this.filtros.subempresaId||this.filtros.fechaDesde||this.filtros.fechaHasta||this.filtros.sucursalId||this.filtros.numeroOrden||this.filtros.pacienteId||this.filtros.examenId||this.filtros.incluir},etiquetaSeleccionados:function(){return this.detallesOrdenesSeleccionadas.length>1?"seleccionados":"seleccionado"},puedeAgregar:function(){return this.detallesOrdenesSeleccionadas.length>0}}};var n=a(1900);const c={props:["id"],components:{BuscarDetallesOrdenesModal:(0,n.Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"buscarDetallesOrdenes",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.agregar.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaDesde,expression:"filtros.fechaDesde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaHasta,expression:"filtros.fechaHasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}})])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"clienteId"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"clienteId",placeholder:"Seleccione...",label:"nombre",options:e.empresas,reduce:function(e){return e.id},disabled:!e.$can("cambiar-empresas")},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.empresaId,callback:function(t){e.$set(e.filtros,"empresaId",t)},expression:"filtros.empresaId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"categoriaId"}},[e._v("Categoría")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"categoriaId",placeholder:"Seleccione...",label:"nombre",options:e.subempresas,reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.subempresaId,callback:function(t){e.$set(e.filtros,"subempresaId",t)},expression:"filtros.subempresaId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursales"}},[e._v("Sucursal")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{placeholder:"Seleccione...",label:"nombre",options:e.sucursales,reduce:function(e){return e.id},disabled:!e.$can("cambiar-sucursal")},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.sucursalId,callback:function(t){e.$set(e.filtros,"sucursalId",t)},expression:"filtros.sucursalId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numeroOrden"}},[e._v("Orden No.")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numeroOrden,expression:"filtros.numeroOrden"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"numeroOrden"},domProps:{value:e.filtros.numeroOrden},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numeroOrden",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"estadoDetalleOrden"}},[e._v("Estado")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estadoDetalleOrden,expression:"filtros.estadoDetalleOrden"}],staticClass:"form-control input-sm",attrs:{id:"estadoDetalleOrden"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estadoDetalleOrden",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.estadosDetalleOrden,(function(a){return t("option",{domProps:{value:a}},[e._v("\n                    "+e._s(e._f("estadoDetalleOrden")(a))+"\n                  ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examenCodigo,expression:"filtros.examenCodigo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",maxlength:"15",readonly:""},domProps:{value:e.filtros.examenCodigo},on:{input:function(t){t.target.composing||e.$set(e.filtros,"examenCodigo",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[e._m(1),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"paciente"}},[e._v("Paciente")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.pacienteNombre,expression:"filtros.pacienteNombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"paciente",maxlength:"15",readonly:""},domProps:{value:e.filtros.pacienteNombre},on:{input:function(t){t.target.composing||e.$set(e.filtros,"pacienteNombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[e._m(2),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.limpiarPaciente}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-5 form-group"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.incluir,expression:"filtros.incluir"}],attrs:{type:"radio",name:"incluir",value:"examenesNoAsociados"},domProps:{checked:e._q(e.filtros.incluir,"examenesNoAsociados")},on:{click:e.incluirClick,change:function(t){return e.$set(e.filtros,"incluir","examenesNoAsociados")}}}),e._v("\n                    Incluir exámenes no asociados al laboratorio\n                  ")])])]),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.incluir,expression:"filtros.incluir"}],attrs:{type:"radio",name:"incluir",value:"soloLaboratorio"},domProps:{checked:e._q(e.filtros.incluir,"soloLaboratorio")},on:{click:e.incluirClick,change:function(t){return e.$set(e.filtros,"incluir","soloLaboratorio")}}}),e._v("\n                    Incluir exámenes solo laboratorio seleccionado\n                  ")])])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group pull-right text-right"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Borrar filtros"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times"})]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",disabled:!e.puedeBuscar},on:{click:e.buscar}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}}),e._v(" Buscar\n                ")])])]),e._v(" "),!e.cargando&&e.detalleOrdenesEncontrados.length>0?t("div",{staticStyle:{height:"270px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center",on:{click:e.seleccionarTodos}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.seleccionadoTodos,expression:"seleccionadoTodos"}],attrs:{type:"checkbox",disabled:0===e.detalleOrdenesEncontrados.length,title:"Seleccionar todos los exámenes"},domProps:{checked:Array.isArray(e.seleccionadoTodos)?e._i(e.seleccionadoTodos,null)>-1:e.seleccionadoTodos},on:{change:function(t){var a=e.seleccionadoTodos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.seleccionadoTodos=a.concat([null])):i>-1&&(e.seleccionadoTodos=a.slice(0,i).concat(a.slice(i+1)))}else e.seleccionadoTodos=o}}})]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Sucursal")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"col-sm-3"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-6"},[e._v("Examen")])])]),e._v(" "),t("tbody",[e._l(e.detalleOrdenesEncontrados,(function(a){return[t("tr",{staticClass:"puntero",on:{click:function(t){return e.seleccionarDetalleOrden(a)}}},[t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.seleccionado,expression:"detalleOrden.seleccionado"}],attrs:{type:"checkbox",title:"Seleccionar examen"},domProps:{checked:Array.isArray(a.seleccionado)?e._i(a.seleccionado,null)>-1:a.seleccionado},on:{change:function(t){var r=a.seleccionado,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"seleccionado",r.concat([null])):s>-1&&e.$set(a,"seleccionado",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"seleccionado",i)}}})]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.nombre_sucursal))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_orden,"YYYY-MM-DD </br> HH:mm"))}}),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n                      "+e._s(a.codigo_examen)+" - "+e._s(a.nombre_examen)+"\n                    ")])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.detalleOrdenesEncontrados.length,tipo:"exámenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.detalleOrdenesEncontrados.length>0,expression:"detalleOrdenesEncontrados.length > 0"}],staticClass:"pull-left"},[t("output",{staticClass:"pull-right",staticStyle:{"margin-left":"10px"}},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalDetallesOrdenes)+"\n              ")]),e._v(" "),t("paginate",{attrs:{"page-count":e.countDetallesOrdenes,"container-class":"pagination","click-handler":e.cargarDetallesOrdenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.filtros.page,callback:function(t){e.$set(e.filtros,"page",t)},expression:"filtros.page"}})],1),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrdenesSeleccionadas.length>0,expression:"detallesOrdenesSeleccionadas.length > 0"}],staticClass:"badge",attrs:{id:"contadorOrdenes"}},[e._v("\n              "+e._s(e.detallesOrdenesSeleccionadas.length)+" "+e._s(e.etiquetaSeleccionados)+"\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:!e.puedeAgregar}},[e._v("\n              Agregar\n            ")])])])])])]),e._v(" "),t("buscar-paciente-modal",{attrs:{id:"buscarPacienteParaFiltro",top:11},on:{"paciente-seleccionado":e.pacienteSeleccionado}}),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.examenSeleccionado}})],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Exámenes")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarPacienteParaFiltro",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null).exports},data:function(){return{cargandoDetallesRemisiones:!1,paginaActual:1,totalPaginas:0,totalRegistros:0,laboratorios:[],registro:{id:"",laboratorio_id:"",estado:"G",created_at:"",detalles_remisiones:[]},soloLaboratorio:!1,detallesOrdenesIds:[],detallesRemisiones:[],resultadoBuscarDetallesOrdenes:{actualizar:!1}}},mounted:function(){var e=this;this.cargarDatos(),this.cargarCookies(),$("#buscarDetallesOrdenes").on("hide.bs.modal",(function(){e.actualizarExamenes(),e.resultadoBuscarDetallesOrdenes.actualizar=!1}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e,t){this.$refs.alerta.mostrarAlerta("info",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cargarCookies:function(){var e=localStorage.getItem("remision-solo-laboratorio");this.soloLaboratorio="true"===e},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),"0"!==this.id?axios.get("/api/remisiones/"+this.id+"/edit").then((function(t){var a=t.data.data;e.laboratorios=a.laboratorios,e.registro=a.remision,e.detallesOrdenesIds=_.map(e.registro.detalles_remisiones,"detalle_orden_id"),e.cargarDetallesRemisiones()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.$refs.cargando.alternar()})):axios.get("/api/remisiones/create").then((function(t){var a=t.data.data;e.laboratorios=a.laboratorios,1!==e.laboratorios.length||e.registro.laboratorio_id||(e.registro.laboratorio_id=e.laboratorios[0].id)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.$refs.cargando.alternar()}))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),this.obtenerDetallesRemisiones(),"0"===this.id?axios.post("/api/remisiones",this.registro).then((function(){e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})):axios.patch("/api/remisiones/"+this.id,this.registro).then((function(){e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()}))},obtenerDetallesRemisiones:function(){if(_.isEmpty(this.detallesOrdenesIds))this.registro.detalles_remisiones=[];else{for(var e=[],t=0;t<this.detallesOrdenesIds.length;t++){var a=this.detallesOrdenesIds[t],r=_.find(this.registro.detalles_remisiones,{detalle_orden_id:a});if(r)e.push(r);else{var o={id:"",detalle_orden_id:a,remision_id:this.registro.id};e.push(o)}}this.registro.detalles_remisiones=e}},actualizarExamenes:function(){this.resultadoBuscarDetallesOrdenes.actualizar&&this.cargarDetallesRemisiones()},cargarDetallesRemisiones:function(){var e=this;if(_.isEmpty(this.detallesOrdenesIds))this.detallesRemisiones=[];else{this.cargandoDetallesRemisiones=!0;var t={remisionId:this.registro.id,detallesOrdenesIds:this.detallesOrdenesIds,page:this.paginaActual};axios.get("/api/detalles-ordenes/buscar-por-ids",{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.detallesRemisiones=a.data,e.detallesRemisiones.forEach((function(e){e.id||(e.estado="G")}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.cargandoDetallesRemisiones=!1}))}},redireccionar:function(){window.location.href="/remisiones"},regresar:function(){window.history.back()},eliminarTodos:function(){this.detallesRemisiones=this.detallesRemisiones.filter((function(e){return"E"===e.estado})),this.detallesOrdenesIds=this.detallesRemisiones.map((function(e){return e.detalle_orden_id}))},eliminarDetalleRemision:function(e){var t=this.detallesOrdenesIds.indexOf(e.detalle_orden_id);this.detallesOrdenesIds.splice(t,1),_.isEmpty(this.detallesOrdenesIds)?this.detallesRemisiones=[]:(this.resultadoBuscarDetallesOrdenes.actualizar=!0,this.actualizarExamenes())},cambiarLaboratorio:function(){this.count=0,this.detallesOrdenesIds=[],this.detallesRemisiones=[]},soloLaboratorioClick:function(e){localStorage.setItem("remision-solo-laboratorio",e.target.checked)}},computed:{etiquetaSeleccionados:function(){return this.detallesRemisiones.length>1?"seleccionados":"seleccionado"},puedeEliminarTodos:function(){return this.detallesRemisiones.filter((function(e){return"G"===e.estado||"R"===e.estado})).length>0},titulo:function(){return"0"===this.id?"Crear Remisión":"Editar Remisión No. "}}};const l=(0,n.Z)(c,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s(e.titulo)+" "),t("strong",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.id,expression:"id !== '0'"}]},[e._v(e._s(e.id))])]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",["N"!==e.registro.estado||"E"!==e.registro.estado||"R"!==e.registro.estado?t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")]):e._e()]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:"0"===e.id},attrs:{for:"laboratorio_id"}},[e._v("\n          Laboratorio\n        ")]),e._v(" "),"0"!==e.id?t("div",[e._v(e._s(e.registro.laboratorio&&e.registro.laboratorio.nombre))]):e._e(),e._v(" "),"0"===e.id?t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.laboratorio_id,expression:"registro.laboratorio_id"}],staticClass:"form-control input-sm",attrs:{id:"laboratorio_id",name:"laboratorio_id",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"laboratorio_id",t.target.multiple?a:a[0])},e.cambiarLaboratorio]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.laboratorios,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n            "+e._s(a.nombre)+"\n          ")])}))],2):e._e(),e._v(" "),t("label",{directives:[{name:"show",rawName:"v-show",value:e.registro.created_at,expression:"registro.created_at"}],staticClass:"control-label"},[e._v("Fecha de creación")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.created_at,expression:"registro.created_at"}]},[e._v("\n          "+e._s(e._f("fecha")(e.registro.created_at))+"\n        ")]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.soloLaboratorio,expression:"soloLaboratorio"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.soloLaboratorio)?e._i(e.soloLaboratorio,null)>-1:e.soloLaboratorio},on:{click:e.soloLaboratorioClick,change:function(t){var a=e.soloLaboratorio,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.soloLaboratorio=a.concat([null])):i>-1&&(e.soloLaboratorio=a.slice(0,i).concat(a.slice(i+1)))}else e.soloLaboratorio=o}}}),e._v("\n            Exámenes solo de este laboratorio\n          ")])])]),e._v(" "),t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"comentario"}},[e._v("Comentario")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.comentario,expression:"registro.comentario"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"4",id:"comentario",name:"comentario"},domProps:{value:e.registro.comentario},on:{input:function(t){t.target.composing||e.$set(e.registro,"comentario",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[e._m(0),e._v(" "),t("div",{staticClass:"col-sm-4 form-group text-right",staticStyle:{"padding-top":"25px"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrdenesIds.length>0,expression:"detallesOrdenesIds.length > 0"}],staticClass:"badge"},[e._v("\n          "+e._s(e.detallesOrdenesIds.length)+" "+e._s(e.etiquetaSeleccionados)+"\n        ")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",disabled:!e.registro.laboratorio_id,"data-toggle":"modal","data-target":"#buscarDetallesOrdenes"}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v(" Agregar\n        ")])])]),e._v(" "),!e.cargandoDetallesRemisiones&&e.detallesRemisiones.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Sucursal")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"col-sm-3"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-3"},[e._v("Examen")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado exámen")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado remisión")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e.puedeEliminarTodos?t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar todo"},on:{click:e.eliminarTodos}},[t("i",{staticClass:"fas fa-trash fa-fw"})]):e._e()])])]),e._v(" "),t("tbody",[0===e.detallesRemisiones.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"7"}},[e._v("\n            No existen registros\n          ")])]):e._e(),e._v(" "),e._l(e.detallesRemisiones,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.nombre_sucursal))]),e._v(" "),t("td",{staticClass:"text-center"},[a.numero_remision_externa?t("small",[e._v(e._s(a.numero_remision_externa))]):e._e(),e._v("\n              "+e._s(a.numero_orden)+"\n            ")]),e._v(" "),t("td",[e._v(e._s(a.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.fecha_orden)))]),e._v(" "),t("td",[e._v("\n              "+e._s(a.codigo_examen)+" - "+e._s(a.nombre_examen)+"\n            ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoDetalleOrden")(a.estado_examen)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoDetalleRemision")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},["E"!==a.estado?t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarDetalleRemision(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})]):e._e()])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoDetallesRemisiones,cantidad:e.detallesRemisiones.length,tipo:"exámenes"}}),e._v(" "),e.detallesRemisiones.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("div",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarDetallesRemisiones,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1),e._v(" "),t("buscar-detalles-ordenes-modal",{attrs:{resultado:e.resultadoBuscarDetallesOrdenes,laboratorioId:e.registro.laboratorio_id,detallesOrdenesIds:e.detallesOrdenesIds,incluir:e.soloLaboratorio?"soloLaboratorio":null},on:{"update:detallesOrdenesIds":function(t){e.detallesOrdenesIds=t},"update:detalles-ordenes-ids":function(t){e.detallesOrdenesIds=t}}}),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-sm-8 form-group"},[e("h3",[this._v("Exámenes")])])}],!1,null,null,null).exports},4980:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(7410);const o={props:[],data:function(){return{cargando:!1,existeActualizacion:!1,registro:{id:"",laboratorio:{id:"",nombre:""},laboratorio_id:"",estado:"G",created_at:""},resultado:null,estadoRemision:{cantidadOrdenes:0,cantidadExamenes:0,cantidadExamenesEnviados:0,cantidadExamenesNoEnviados:0}}},mounted:function(){var e=this;$("#modalEnviarRemision").on("show.bs.modal",(function(t){e.registro=t.relatedTarget,e.cargarDatos()})),$("#modalEnviarRemision").on("hide.bs.modal",(function(){e.resultado=null,e.existeActualizacion=!1}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e){this.$refs.alerta.mostrarAlerta("success",e)},mostrarAdvertencia:function(e){this.$refs.alerta.mostrarAlerta("warning",e)},cargarDatos:function(){var e=this;axios.get("/api/remisiones/".concat(this.registro.id,"/enviar/create")).then((function(t){e.estadoRemision=t.data.data.estadoRemision})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)}))},enviar:function(){var e=this;this.resultado=null,this.cargando=!0,axios.post("/api/remisiones/".concat(this.registro.id,"/enviar")).then((function(t){e.existeActualizacion=!0,e.registro=t.data.data,_.get(e.registro,"laboratorio.sistema_externo.driver")&&("E"===e.registro.estado&&(e.mostrarExito("Remisión enviada a "+e.registro.laboratorio.sistema_externo.nombre),e.mostrarExito("Remisión registrada como enviada")),_.isEmpty(e.registro.mensajes)||e.mostrarAdvertencia(e.registro.mensajes)),e.cargarDatos()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.cargando=!1}))},cerrar:function(){this.$emit("remision-actualizada",this.existeActualizacion),$("#modalEnviarRemision").modal("toggle")}},computed:{}};var i=a(1900);const s=(0,i.Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalEnviarRemision",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.enviar.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Enviar a "+e._s(e.registro.laboratorio.nombre))])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Remisión No.")]),e._v(" "),t("div",[e._v(e._s(e.registro.id))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("div",[e._v(e._s(e._f("estadoRemision")(e.registro.estado)))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{directives:[{name:"show",rawName:"v-show",value:e.registro.created_at,expression:"registro.created_at"}],staticClass:"control-label"},[e._v("Fecha de creación")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.registro.created_at,expression:"registro.created_at"}]},[e._v("\n                "+e._s(e._f("fecha")(e.registro.created_at))+"\n              ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"cantidadOrdenes"}},[e._v("Total órdenes")]),e._v(" "),t("div",{attrs:{id:"cantidadOrdenes"}},[e._v(e._s(e.estadoRemision.cantidadOrdenes))])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"cantidadExamenes"}},[e._v("Total exámenes")]),e._v(" "),t("div",{attrs:{id:"cantidadExamenes"}},[e._v(e._s(e.estadoRemision.cantidadExamenes))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Exámenes enviados")]),e._v(" "),t("div",[e._v(e._s(e.estadoRemision.cantidadExamenesEnviados))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Exámenes no enviados")]),e._v(" "),t("div",[e._v(e._s(e.estadoRemision.cantidadExamenesNoEnviados))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"comentario"}},[e._v("Comentario")]),e._v(" "),t("div",{attrs:{id:"comentario"}},[e._v(e._s(e.registro.comentario?e.registro.comentario:"-"))])])]),e._v(" "),e.resultado?t("legend",[e._v("Resultado de Envío")]):e._e(),e._v(" "),e.resultado?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Exámenes Procesados")]),e._v(" "),t("div",[e._v(e._s(e.resultado?e.resultado.cantidadExamenes:""))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Exámenes Enviados")]),e._v(" "),t("div",[e._v(e._s(e.resultado?e.resultado.cantidadExamenesEnviados:""))])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label"},[e._v("Exámenes con Error")]),e._v(" "),t("div",[e._v(e._s(e.resultado?e.resultado.cantidadExamenesError:""))])])]):e._e()],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")]),e._v(" "),"G"===e.registro.estado||e.estadoRemision.cantidadExamenesNoEnviados>0?t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:e.cargando}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}]},[t("i",{staticClass:"fas fa-paper-plane fa-fw"}),e._v(" Enviar")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.cargando,expression:"cargando"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" Procesando")])]):e._e()])])])])])}),[],!1,null,null,null).exports;const n={props:["remision"],data:function(){return{}},mounted:function(){$("#anularRemision").on("shown.bs.modal",(function(e){"anularRemision"===e.target.id&&$("#motivo_anula").focus()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},anular:function(){var e=this;this.alternarBotonesSubmit(),axios.delete("/api/remisiones/"+this.remision.id+"?motivo="+this.remision.motivo_anula).then((function(t){e.$emit("remision-anulada",!0),$("#anularRemision").modal("hide")}),(function(t){e.alternarBotonesSubmit(),e.mostrarErrores("¡Error!",t.response.data.errors)}))},claseEstado:function(e){return{"label-default":"G"===e,"label-danger":"N"===e}}}};const c=(0,i.Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"anularRemision",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.anular.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numero"}},[e._v("Remision No.")]),e._v(" "),t("div",{attrs:{id:"numero"}},[e._v(e._s(e.remision.id))])]),e._v(" "),t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"motivo_anula"}},[e._v("Motivo de anulación")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remision.motivo_anula,expression:"remision.motivo_anula"}],staticClass:"form-control input-sm textarea",attrs:{id:"motivo_anula",name:"motivo_anula",rows:"3",required:""},domProps:{value:e.remision.motivo_anula},on:{input:function(t){t.target.composing||e.$set(e.remision,"motivo_anula",t.target.value)}}})])])],1),e._v(" "),e._m(1)])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Anular remisión")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"submit"}},[e._v("Anular\n          ")])])}],!1,null,null,null).exports,l={props:["datos"],components:{ImprimirModal:r.Z,EnviarModal:s,AnularModal:c},data:function(){return{cargando:!1,count:0,filtros:{cadenaBusqueda:"",page:1},remisiones:[],remisionAnular:{id:"",nombre:"",estado:"",usuario_anula_id:"",motivo_anula:"",fecha_anula:""}}},created:function(){},mounted:function(){var e=this;this.cargarDatos(),$("#anularRemision").on("hide.bs.modal",(function(){e.remisionAnular.id="",e.remisionAnular.estado="",e.remisionAnular.motivo_anula="",e.remisionAnular.usuario_anula_id="",e.remisionAnular.fecha_anula=""}))},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.datos.cadenaBusqueda&&(this.filtros.cadenaBusqueda=this.datos.cadenaBusqueda),this.cargarRemisiones()},limpiarFormulario:function(){this.filtros.cadenaBusqueda=""},cargarRemisiones:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.cargando=!0,this.filtros.page=t,axios.get("/api/remisiones",{params:this.filtros}).then((function(t){var a=t.data.data;e.count=a.last_page,e.remisiones=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.cargando=!1}))},editarRemisiones:function(e){window.location.href="/remisiones/"+e.id+"/edit"},verRemisiones:function(e){window.location.href="/remisiones/"+e.id},enviarRemision:function(e){$("#modalEnviarRemision").modal({backdrop:"static"},e)},abrirAnulacionRemision:function(e){var t=this;axios.get("/api/remisiones/"+e.id).then((function(e){t.remisionAnular=e.data.data,$("#anularRemision").modal("show")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores(a)})).then((function(){return t.cargando=!1}))},buscarRemisiones:function(){this.cargarRemisiones()},generarPdf:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?"?resumido=1":"";window.open("/remisiones/"+e+"/pdf"+a,"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},abrirModalImprimir:function(e){var t={registro:e,tipoDocumento:"remision"};$("#modalImprimir").modal({backdrop:"static"},t)},remisionActualizada:function(e){e&&this.cargarRemisiones()},remisionAnulada:function(e){e&&this.cargarRemisiones()}}};const d=(0,i.Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("navbar",{attrs:{"mostrar-servidor-local":!0},scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Remisiones\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.filtros.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarRemisiones.apply(null,arguments))},input:function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarRemisiones}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[t("a",{class:"btn btn-primary"+(e.$can("crear-remisiones")?"":" disabled"),attrs:{href:"/remisiones/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n              ")])])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.remisiones.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.remisiones,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.id))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.laboratorio.nombre))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(e._f("fecha")(a.created_at)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n              "+e._s(e._f("estadoRemision")(a.estado))+"\n            ")]),e._v(" "),t("td",{staticClass:"text-right"},[e.$can("editar-remisiones")&&"N"!==a.estado&&"E"!==a.estado?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.editarRemisiones(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n              ")]):e._e(),e._v(" "),!e.$can("ver-remisiones")||"N"!==a.estado&&"E"!==a.estado?e._e():t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.verRemisiones(a)}}},[t("i",{staticClass:"fas fa-eye fa-fw"}),e._v("Ver\n              ")]),e._v(" "),e.$can("crear-remisiones")&&e.$can("editar-remisiones")&&"N"!==a.estado&&"E"!==a.estado?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.enviarRemision(a)}}},[t("i",{staticClass:"fas fa-paper-plane fa-fw"}),e._v(" Enviar\n              ")]):e._e(),e._v(" "),e.$can("imprimir-remisiones")&&"N"!==a.estado?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.abrirModalImprimir(a)}}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Imprimir\n              ")]):e._e(),e._v(" "),e.$can("eliminar-remisiones")&&"E"!==a.estado&&"N"!==a.estado?t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(t){return e.abrirAnulacionRemision(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Anular\n              ")]):e._e()])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.remisiones.length,tipo:"remisiones"}}),e._v(" "),!e.cargando&&e.remisiones.length>0?t("div",{staticClass:"alto-paginacion paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.count))]),e._v(" "),e.count>1?t("paginate",{attrs:{"page-count":e.count,"container-class":"pagination","click-handler":e.cargarRemisiones,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.filtros.page,callback:function(t){e.$set(e.filtros,"page",t)},expression:"filtros.page"}}):e._e()],1):e._e()],1),e._v(" "),t("anular-modal",{attrs:{remision:e.remisionAnular},on:{"remision-anulada":e.remisionAnulada}}),e._v(" "),t("enviar-modal",{on:{"remision-actualizada":e.remisionActualizada}}),e._v(" "),t("imprimir-modal",{attrs:{"url-api-local":e.datos.configs.urlApiLocal}})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-left"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Laboratorio")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-left"},[e._v("Fecha creación")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th")])])}],!1,null,null,null).exports},5123:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id"],data:function(){return{cargando:!1,registro:{id:"",laboratorio:{id:"",nombre:""},laboratorio_id:"",estado:"G",created_at:"",detalles_remisiones:[]}}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.cargando=!0,axios.get("/api/remisiones/"+this.id).then((function(t){e.registro=t.data.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error",a)})).finally((function(){return e.cargando=!1}))},regresar:function(){window.history.back()},claseEstado:function(e){return{"label label-default":"N"!==e,"label label-danger":"N"===e}}},computed:{cantidadOrdenes:function(){var e=this.registro.detalles_remisiones.map((function(e){return e.detalle_orden.orden_id}));return _.uniq(e).length}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Remisión No. "),t("strong",[e._v(e._s(e.id))])]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("fieldset",{attrs:{disabled:""}},[t("legend",{staticClass:"legend"},[e._v("Datos generales")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Laboratorio")]),e._v(" "),t("div",[e._v(e._s(e.registro.laboratorio.nombre))])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("div",{attrs:{id:"estado"}},[t("span",{class:e.claseEstado(e.registro.estado)},[e._v(e._s(e._f("estadoRemision")(e.registro.estado)))])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Órdenes")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.cantidadOrdenes)+"\n        ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Exámenes")]),e._v(" "),t("div",[e._v("\n          "+e._s(e.registro.detalles_remisiones.length)+"\n        ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha de creación")]),e._v(" "),t("div",[e._v("\n          "+e._s(e._f("fecha")(e.registro.created_at))+"\n        ")])]),e._v(" "),t("div",{staticClass:"col-sm-8 form-group"},[t("label",{staticClass:"control-label"},[e._v("Comentario")]),e._v(" "),t("div",[e._v(e._s(e.registro.comentario?e.registro.comentario:"-"))])])])]),e._v(" "),"N"===e.registro.estado?t("fieldset",{attrs:{disabled:""}},[t("legend",{staticClass:"legend"},[e._v("Datos de anulación")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario_anula"}},[e._v("Usuario")]),e._v(" "),t("div",{attrs:{id:"usuario_anula"}},[e._v(e._s(e.registro.usuario_anula?e.registro.usuario_anula.nombre_usuario:"")+"\n        ")])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fecha_anula"}},[e._v("Fecha")]),e._v(" "),t("div",{attrs:{id:"fecha_anula"}},[e._v(e._s(e._f("fecha")(e.registro.fecha_anula)))])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label"},[e._v("Motivo")]),e._v(" "),t("div",[e._v(e._s(e.registro.motivo_anula))])])])]):e._e(),e._v(" "),e._m(0),e._v(" "),e.cargando?e._e():t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[0===e.registro.detalles_remisiones.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"7"}},[e._v("\n          No existen registros\n        ")])]):e._e(),e._v(" "),e._l(e.registro.detalles_remisiones,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.detalle_orden.orden.sucursal.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.detalle_orden.orden.numero_orden))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.detalle_orden.orden.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v("\n            "+e._s(e._f("fecha")(a.detalle_orden.orden.fecha_orden,"YYYY-MM-DD"))+"\n          ")]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n            "+e._s(a.detalle_orden.examen.codigo)+" - "+e._s(a.detalle_orden.examen.nombre)+"\n          ")]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_remision_externa))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoDetalleOrden")(a.detalle_orden.estado)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoDetalleRemision")(a.estado)))])])]}))],2)])]),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.registro.detalles_remisiones.length,tipo:"exámenes"}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-8"},[e("h3",[this._v("Exámenes")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Sucursal")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"col-sm-3"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-3"},[e._v("Examen")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Orden externa")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado examen")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado remisión")])])])}],!1,null,null,null).exports},1497:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const n={props:{permisoImprimir:{type:Boolean,required:!0},resultadoConMembrete:{required:!0},actualizarDatos:{type:Boolean,default:!1}},data:function(){return{ciudad:"",destinatario:"",ordenId:"",detallesOrden:[],detalleOrdenSeleccionado:null,detallesReporteIdsSeleccionados:[],procesando:!1,procesandoExamen:!1}},mounted:function(){var e=this;$("#modalCertificado").on("show.bs.modal",(function(t){if("modalCertificado"===t.target.id&&(e.ciudad="",e.destinatario="",e.ordenId="",e.detallesOrden=[],e.detalleOrdenSeleccionado=null,e.detallesReporteIdsSeleccionados=[],!(t.relatedTarget instanceof HTMLElement)&&t.relatedTarget)){var a=t.relatedTarget;a.ordenId&&(e.ordenId=a.ordenId,e.destinatario=a.destinatario,e.detallesOrden=a.detallesOrden,e.inicializarVariables())}}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},inicializarVariables:function(){this.ciudad=localStorage.getItem("ciudadCertificado"),this.detalleOrdenSeleccionado="",1===this.detallesOrdenesParaImprimir.length&&(this.detalleOrdenSeleccionado=this.detallesOrdenesParaImprimir[0])},cambioCiudad:function(){localStorage.setItem("ciudadCertificado",this.ciudad)},cerrar:function(){$("#modalCertificado").modal("hide")},enviarCorreo:function(){var e=this;confirm("¿Está seguro de enviar el correo a ".concat(this.destinatario,"?"))&&(this.procesando=!0,axios.post("/api/entregas/certificado/".concat(this.ordenId,"/correo?actualizarDatos=").concat(this.actualizarDatos,"&").concat(this.queryString)).then((function(t){var a=t.data.data;e.$emit("correo-electronico-certificado-enviado",a),e.cerrar()})).catch((function(t){if(!t.response)return console.error("¡Error al enviar resultados!",t.response),void e.mostrarErrores("¡Error al enviar resultados!");var a=t.response.data;if("WARNING"===a.type)e.mostrarAdvertencia(a.messages);else{var r,o=[],s=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=i(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,n=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){c=!0,s=e},f:function(){try{n||null==a.return||a.return()}finally{if(c)throw s}}}}(e.procesarErrorResponse(t));try{for(s.s();!(r=s.n()).done;){var n=r.value,c=e.obtenerMotivo(n);n=c,c?o.push(c):o.push(n)}}catch(e){s.e(e)}finally{s.f()}o.unshift("Error al enviar correo electrónico"),e.mostrarErrores(o)}})).then((function(){return e.procesando=!1})))},obtenerMotivo:function(e){var t=Object.entries(r.CW).find((function(t){var a=o(t,2),r=a[0];a[1];return e&&e.toLowerCase().includes(r)}));return t&&t.length>1?t[1]:""},cambioDetalleOrdenSeleccionado:function(){this.detallesReporteIdsSeleccionados=[]}},computed:{detallesOrdenesParaImprimir:function(){return this.ordenId&&this.detallesOrden?this.detallesOrden.filter((function(e){var t=e.estado,a=e.examen;return r.Is.includes(a.codigo)&&["X","L","V"].includes(t)})):[]},detallesReportes:function(){if(this.detalleOrdenSeleccionado&&!_.isEmpty(this.detalleOrdenSeleccionado.reportes)){var e=this.detalleOrdenSeleccionado.reportes[0].detalles_reportes;return e=e.filter((function(e){return e.resultado||e.valor_adicional})),1===e.length&&this.detallesReporteIdsSeleccionados.push(e[0].id),e}return[]},queryString:function(){if(this.detalleOrdenSeleccionado&&this.detallesReporteIdsSeleccionados.length>0){var e=this.ciudad?this.ciudad:"";return"ciudad=".concat(e,"&examenId=").concat(this.detalleOrdenSeleccionado.id)+"&parametrosIds[]="+this.detallesReporteIdsSeleccionados.join("&parametrosIds[]=")}return""}}};const c=(0,a(1900).Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalCertificado",tabindex:"-1",role:"dialog","data-backdrop":"static"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body",staticStyle:{"max-height":"50vh"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("form",[t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-md-6"},[t("label",{attrs:{for:"ciudad"}},[e._v("Ciudad")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.ciudad,expression:"ciudad"}],staticClass:"form-control input-sm",attrs:{id:"ciudad",type:"text"},domProps:{value:e.ciudad},on:{blur:e.cambioCiudad,input:function(t){t.target.composing||(e.ciudad=t.target.value)}}})])]),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesandoExamen,expression:"procesandoExamen"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.procesandoExamen,expression:"!procesandoExamen"}],staticClass:"row"},[e._m(1),e._v(" "),e._m(2)]),e._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-md-6",staticStyle:{"max-height":"170px","overflow-y":"auto"}},[0===e.detallesOrdenesParaImprimir.length?t("div",[e._v("\n                No existen exámenes para imprimir\n              ")]):e._e(),e._v(" "),e._l(e.detallesOrdenesParaImprimir,(function(a){return t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.detalleOrdenSeleccionado,expression:"detalleOrdenSeleccionado"}],attrs:{type:"radio"},domProps:{value:a,checked:e._q(e.detalleOrdenSeleccionado,a)},on:{change:[function(t){e.detalleOrdenSeleccionado=a},e.cambioDetalleOrdenSeleccionado]}}),e._v("\n                  "+e._s(a.examen.nombre)+"\n                ")])])}))],2),e._v(" "),t("div",{staticClass:"col-md-6",staticStyle:{"max-height":"170px","overflow-y":"auto"}},e._l(e.detallesReportes,(function(a){return t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.detallesReporteIdsSeleccionados,expression:"detallesReporteIdsSeleccionados"}],attrs:{type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(e.detallesReporteIdsSeleccionados)?e._i(e.detallesReporteIdsSeleccionados,a.id)>-1:e.detallesReporteIdsSeleccionados},on:{change:function(t){var r=e.detallesReporteIdsSeleccionados,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.id,n=e._i(r,s);o.checked?n<0&&(e.detallesReporteIdsSeleccionados=r.concat([s])):n>-1&&(e.detallesReporteIdsSeleccionados=r.slice(0,n).concat(r.slice(n+1)))}else e.detallesReporteIdsSeleccionados=i}}}),e._v("\n                  "+e._s(a.nombre_parametro)+"\n                ")])])})),0)])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",on:{click:e.cerrar}},[e._v("\n          Cerrar\n        ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{id:"botonEnviar",type:"button",title:e.destinatario?"":"No tiene correo",disabled:e.procesando||0===this.detallesReporteIdsSeleccionados.length||!this.destinatario},on:{click:e.enviarCorreo}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fa-fw fas fa-envelope"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n          Enviar correo\n        ")]),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:e.permisoImprimir,expression:"permisoImprimir"}],staticClass:"btn btn-default btn-sm",class:{disabled:e.procesando||0===this.detallesReporteIdsSeleccionados.length},attrs:{href:"/ordenes/".concat(e.ordenId,"/documentos/certificado-pcr/pdf?")+e.queryString,target:"_blank"},on:{click:e.cerrar}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Imprimir\n        ")]),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:e.permisoImprimir&&e.resultadoConMembrete,expression:"permisoImprimir && resultadoConMembrete"}],staticClass:"btn btn-default btn-sm",class:{disabled:e.procesando||0===this.detallesReporteIdsSeleccionados.length},attrs:{href:"/ordenes/".concat(e.ordenId,"/documentos/certificado-pcr/pdf?membrete=1&")+e.queryString,target:"_blank"},on:{click:e.cerrar}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Imprimir con membrete\n        ")])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n          ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Certificado")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",[this._v("\n                Exámenes\n              ")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-6"},[e("label",[this._v("Parámetros")])])}],!1,null,null,null).exports},205:(e,t,a)=>{"use strict";a.d(t,{Z:()=>M});const r=a(3696).Z;var o=a(3379),i=a.n(o),s=a(9461),n={insert:"head",singleton:!1};i()(s.Z,n);s.Z.locals;var c=a(1900);const l=(0,c.Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"panel panel-gris"},[t("div",{staticClass:"panel-heading encabezado-examenes sticky-top"},[t("div",[e._v("\n          Exámenes\n          "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.examenesFiltrados.length>0&&!e.cargando,expression:"examenesFiltrados.length > 0 && !cargando"}],staticClass:"badge cursor-menu",attrs:{title:"Cantidad",rel:"tooltip","data-placement":"bottom"}},[e._v("\n            "+e._s(e.examenesFiltrados.length)+"\n          ")]),e._v(" "),e.guardandoReporte||e.validandoReportes||e.eliminandoReportes?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):e._e()]),e._v(" "),t("div",{staticClass:"form-inline"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.existenDetallesReportesModificados,expression:"existenDetallesReportesModificados"}],staticClass:"badge"},[e._v("\n            "+e._s(e.detallesReportesModificados.length)+" modificado"+e._s(e.detallesReportesModificados.length>1?"s":"")+"\n          ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.editar,expression:"datos.permisos.editar"}],staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Guardar resultados",disabled:!e.existenDetallesReportesModificados||e.guardandoReporte||e.validandoReportes},on:{click:e.guardarReportes}},[e.guardandoReporte?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n          ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.validar,expression:"datos.permisos.validar"}],staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Validar exámenes reportados",disabled:0===e.examenesReportados.length||e.existenDetallesReportesModificados||e.guardandoReporte||e.validandoReportes},on:{click:e.validarReportes}},[e.validandoReportes?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-check fa-fw"}),e._v(" Validar\n          ")]),e._v(" "),e.orden&&e.orden.sistema_externo&&e.orden.sistema_externo.extras&&e.orden.sistema_externo.extras.enviar_resultados?t("button",{staticClass:"btn btn-sm btn-default",attrs:{disabled:e.enviandoASistemaExterno||!e.existenExamenesParaEnviarASistemaExterno},on:{click:e.enviarTodoASistemaExterno}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.enviandoASistemaExterno,expression:"!enviandoASistemaExterno"}],staticClass:"fas fa-upload"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.enviandoASistemaExterno,expression:"enviandoASistemaExterno"}],staticClass:"fas fa-spinner fa-spin"}),e._v("\n            Enviar a "+e._s(e.orden.sistema_externo?e.orden.sistema_externo.nombre:"")+"\n          ")]):e._e(),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.eliminar,expression:"datos.permisos.eliminar"}],staticClass:"btn btn-danger btn-sm",attrs:{type:"button",title:"Eliminar resultados de todos los exámenes",disabled:0===e.examenesConResultados.length||e.guardandoReporte||e.validandoReportes},on:{click:e.eliminarTodosReportes}},[e.eliminandoReportes?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n          ")])])]),e._v(" "),e.orden&&!e.cargando?t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-condensed examenes"},[t("tbody",[e._l(e.examenesFiltrados,(function(a){return[t("tr",{staticClass:"examen"},[t("td",{class:{"valores-defecto":e.tieneValoresPorDefecto(a)},attrs:{colspan:"6"}},[t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("strong",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(a.nombre))]),e._v(" "),t("i",{staticClass:"fa fa-vial puntero",staticStyle:{"padding-left":"4px","padding-right":"2px"},on:{click:function(t){return e.abrirModalVerMuestras(a)}}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:a.muestras.length>1,expression:"examen.muestras.length>1"}],staticClass:"icon-stack-2x puntero",staticStyle:{"padding-left":"1px","font-size":"0.8em"},attrs:{title:a.tituloMuestras,"data-html":"true",rel:"tooltip"}},[e._v("\n                      "+e._s(a.muestras.length)+"\n                    ")]),e._v("\n\n                    "+e._s(a.muestras[0].nombre)+"\n                    "),t("detalle-orden-estado",{staticStyle:{"margin-left":"5px"},attrs:{estado:a.estado}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.fechaImprime,expression:"examen.fechaImprime"}],staticClass:"fas fa-print text-gris",staticStyle:{"margin-left":"5px"},attrs:{rel:"tooltip","data-html":"true",title:"<strong>Fecha:</strong> ".concat(a.fechaImprime)}}),e._v(" "),e.orden.sistema_externo&&a.descargado_sistema_externo?t("i",{staticClass:"fas fa-download",staticStyle:{"margin-left":"5px"},attrs:{"data-html":"true",title:"Examen descargado de ".concat(e.orden.sistema_externo.nombre," </br> ").concat(e.fechaALocal(a.createdAt)),rel:"tooltip"}}):e._e(),e._v(" "),e.orden.sistema_externo&&e.orden.sistema_externo.extras&&e.orden.sistema_externo.extras.descargar_resultados&&!a.descargado_sistema_externo?t("i",{staticClass:"fas fa-times text-danger",staticStyle:{"margin-left":"5px"},attrs:{"data-html":"true",title:"Examen no descargado de ".concat(e.orden.sistema_externo.nombre),rel:"tooltip"}}):e._e(),e._v(" "),e.orden.sistema_externo&&a.enviado_sistema_externo?t("i",{staticClass:"fas fa-upload",staticStyle:{"margin-left":"5px"},attrs:{"data-html":"true",title:"Resultado enviado a ".concat(e.orden.sistema_externo.nombre," </br> ").concat(e.fechaALocal(a.fechaEnvia)),rel:"tooltip"}}):e._e()],1),e._v(" "),t("div",{staticClass:"form-inline"},[t("div",{staticClass:"botones-acciones",staticStyle:{display:"inline-block"}},[t("button",{directives:[{name:"show",rawName:"v-show",value:e.tieneValoresPorDefecto(a)&&e.datos.permisos.editar&&"X"!==a.estado,expression:"tieneValoresPorDefecto(examen) && datos.permisos.editar && examen.estado !== 'X'"}],staticClass:"btn btn-xs btn-default",attrs:{type:"button",tabindex:"-1",title:"Cargar valores por defecto"},on:{click:function(t){return e.asignarValoresPorDefecto(a)}}},[t("i",{staticClass:"fas fa-arrow-circle-down fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.tieneParametrosParaRepeticiones(a)&&e.datos.permisos.editar&&"X"!==a.estado,expression:"tieneParametrosParaRepeticiones(examen) && datos.permisos.editar && examen.estado !== 'X'"}],staticClass:"btn btn-xs btn-default",attrs:{type:"button",tabindex:"-1",title:"Registrar repeticiones para todo el examen",disabled:"R"!==a.estado||e.existenCambiosPendientesExamen(a)},on:{click:function(t){return e.registrarRepeticionesExamen(a)}}},[t("i",{staticClass:"fas fa-redo-alt fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.puedeEditar(a)&&"G"===a.estado,expression:"puedeEditar(examen) && examen.estado === 'G'"}],staticClass:"btn btn-xs btn-default",attrs:{type:"button",tabindex:"-1",title:"Marcar como no procesado",disabled:e.guardandoReporte||"G"!==a.estado||!a.plantillaId},on:{click:function(t){return e.abrirComentarioExamen(a)}}},[t("i",{staticClass:"far fa-stop-circle fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.validar&&["L","V"].includes(a.estado),expression:"datos.permisos.validar && ['L', 'V'].includes(examen.estado)"}],staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Desvalidar examen",disabled:!["L","V"].includes(a.estado)||e.guardandoReporte||e.validandoReportes},on:{click:function(t){return e.desvalidarExamen(a)}}},[e.validandoReportes?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-times fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.validar&&"R"===a.estado,expression:"datos.permisos.validar && examen.estado === 'R'"}],staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Validar preliminarmente examen",disabled:"R"!==a.estado||e.existenCambiosPendientesExamen(a)||e.guardandoReporte||e.validandoReportes},on:{click:function(t){return e.validarPreliminarmenteExamen(a)}}},[e.validandoReportes?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fab fa-firstdraft fa-fw"})]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.validar&&["R","L"].includes(a.estado),expression:"datos.permisos.validar && ['R', 'L'].includes(examen.estado)"}],staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Validar examen",disabled:!["R","L"].includes(a.estado)||e.existenCambiosPendientesExamen(a)||e.guardandoReporte||e.validandoReportes},on:{click:function(t){return e.validarExamen(a)}}},[e.validandoReportes?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-check fa-fw"})]),e._v(" "),e.orden&&e.orden.sistema_externo&&e.orden.sistema_externo.extras&&e.orden.sistema_externo.extras.enviar_resultados?t("button",{staticClass:"btn btn-xs btn-default",attrs:{title:"Enviar a ".concat(e.orden.sistema_externo.nombre),disabled:e.enviandoASistemaExterno||!e.estadosDetallesOrdenParaEnvio.includes(a.estado)},on:{click:function(t){return e.enviarASistemaExterno(a)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.enviandoASistemaExterno,expression:"!enviandoASistemaExterno"}],staticClass:"fas fa-upload"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.enviandoASistemaExterno,expression:"enviandoASistemaExterno"}],staticClass:"fas fa-spinner fa-spin"})]):e._e(),e._v(" "),t("button",{staticClass:"btn btn-xs btn-danger",attrs:{type:"button",title:"Eliminar resultados de ".concat(a.nombre),disabled:"G"===a.estado||!e.puedeEliminar(a)||e.guardandoReporte||e.validandoReportes},on:{click:function(t){return e.eliminarReportesExamen(a)}}},[e.eliminandoReportes?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-trash fa-fw"})])]),e._v(" "),t("select",{directives:[{name:"show",rawName:"v-show",value:e.filtrarPlantillas(a.plantillas).length>1,expression:"filtrarPlantillas(examen.plantillas).length > 1"}],staticClass:"form-control input-sm",staticStyle:{width:"180px"},attrs:{disabled:!(e.datos.permisos.editar||e.datos.permisos.eliminar)||"X"===a.estado},domProps:{value:a.plantillaId},on:{input:function(t){return t.stopPropagation(),t.preventDefault(),e.cambiarPlantilla(a,t)}}},[t("option",{attrs:{value:""}},[e._v("Seleccione Plantilla...")]),e._v(" "),e._l(e.filtrarPlantillas(a.plantillas),(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                        "+e._s("A"===a.estado?a.nombre:a.nombre+"(Inactiva)")+"\n                      ")])}))],2)])])])]),e._v(" "),a.plantillaId?e._e():t("tr",[t("td",{staticClass:"text-center bg-warning",attrs:{colspan:"6"}},[e.filtrarPlantillas(a.plantillas).length?[e._v("\n                  Por favor seleccione una plantilla\n                ")]:[e._v("\n                  Por favor cree una plantilla\n                ")]],2)]),e._v(" "),a.plantillaId&&a.muestraPendiente?t("tr",[t("td",{staticClass:"text-center bg-warning",attrs:{colspan:"6"}},[e._v("\n                No es posible reportar los resultados porque la muestra está pendiente\n              ")])]):e._e(),e._v(" "),"X"===a.estado?t("tr",[t("td",{staticClass:"text-center bg-warning",attrs:{colspan:"6"}},[t("span",{domProps:{innerHTML:e._s(a.comentario)}})])]):e._e(),e._v(" "),a.plantillaId&&0===a.detallesReportes.length?t("tr",[e._m(0,!0)]):e._e(),e._v(" "),e._l(a.detallesReportes,(function(r){return[a.plantillaId&&!a.muestraPendiente&&"X"!==a.estado?t("tr",{key:r.id,attrs:{bgcolor:e.obtenerColorFondo(r)}},[t("td",{staticClass:"col-sm-4 parametro",class:{"parametro-titulo":"T"===r.tipo_parametro,"parametro-linea":"L"===r.tipo_parametro}},[e._v("\n                  "+e._s(r.nombre)+"\n                  "),r.comentario?t("i",{staticClass:"fas fa-comment-dots"}):e._e()]),e._v(" "),t("td",{staticClass:"col-sm-2 text-center resultado",class:{modificado:e.existenCambiosPendientes(r)},staticStyle:{"min-width":"60px"},attrs:{colspan:"E"===r.tipo_parametro?2:1}},["N"===r.tipo_parametro?t("div",{staticClass:"input-group"},[t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-xs btn-default",attrs:{tabindex:"-1",type:"button"},on:{click:function(t){return e.cambiarSimbolo(r)}}},[e._v("\n                        "+e._s(r.simbolo?r.simbolo:"")+"\n                      ")])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:r.resultado,expression:"detalleReporte.resultado"}],staticClass:"form-control input-xs text-center",attrs:{type:"number",step:"any",lang:"en",disabled:e.guardandoReporte||!e.puedeEditar(a)},domProps:{value:r.resultado},on:{input:[function(t){t.target.composing||e.$set(r,"resultado",t.target.value)},e.calcularFormulaConRetraso],keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault()},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault()}]}})]):e._e(),e._v(" "),"F"===r.tipo_parametro?t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-group-addon"},[t("i",{staticClass:"fas fa-calculator fa-fw puntero",on:{click:function(t){return e.calcularFormula(a,r)}}})]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:r.resultado,expression:"detalleReporte.resultado"}],staticClass:"form-control input-xs text-center",attrs:{type:"number",step:"any",lang:"en",disabled:e.guardandoReporte||!e.puedeEditar(a)},domProps:{value:r.resultado},on:{keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault()},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault()}],input:function(t){t.target.composing||e.$set(r,"resultado",t.target.value)}}})]):e._e(),e._v(" "),"S"===r.tipo_parametro?t("select",{directives:[{name:"model",rawName:"v-model",value:r.resultado,expression:"detalleReporte.resultado"}],staticClass:"form-control input-xs",attrs:{disabled:e.guardandoReporte||!e.puedeEditar(a)},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(r,"resultado",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(r.tipo_dato?r.tipo_dato.opciones:[],(function(a){return t("option",[e._v("\n                      "+e._s(a.nombre)+"\n                    ")])}))],2):e._e(),e._v(" "),"X"===r.tipo_parametro?t("input",{directives:[{name:"model",rawName:"v-model",value:r.resultado,expression:"detalleReporte.resultado"}],staticClass:"form-control input-xs text-center",attrs:{type:"text",maxlength:"80",disabled:e.guardandoReporte||!e.puedeEditar(a)},domProps:{value:r.resultado},on:{input:function(t){t.target.composing||e.$set(r,"resultado",t.target.value)}}}):e._e(),e._v(" "),"A"!==r.tipo_parametro||r.resultadoAnterior?e._e():t("label",{staticClass:"btn btn-default btn-xs",class:{disabled:e.guardandoReporte||!e.puedeEditar(a)},attrs:{title:"Seleccione un archivo .pdf"}},[t("i",{staticClass:"far fa-file-pdf fa-fw"}),e._v(" Buscar archivo\n                    "),t("input",{staticClass:"sfo",attrs:{name:r.detalleReporteId,type:"file",accept:"application/pdf"},on:{change:function(t){return e.cambioParametroArchivo(r,t)}}})]),e._v(" "),"A"===r.tipo_parametro&&r.resultadoAnterior?t("div",[t("a",{class:{disabled:e.guardandoReporte},attrs:{target:"_blank",href:"/detalles-reportes/".concat(r.detalleReporteId,"/archivo")}},[t("i",{staticClass:"far fa-file-pdf fa-fw"}),e._v(" Ver adjunto\n                    ")])]):e._e(),e._v(" "),"I"!==r.tipo_parametro||r.resultadoAnterior?e._e():t("label",{staticClass:"btn btn-default btn-xs",class:{disabled:e.guardandoReporte||!e.puedeEditar(a)},attrs:{title:"Seleccione un archivo .jpg, .jpeg"}},[t("i",{staticClass:"far fa-file-image fa-fw"}),e._v(" Buscar imagen\n                    "),t("input",{staticClass:"sfo",attrs:{name:r.detalleReporteId,type:"file",accept:"image/jpeg"},on:{change:function(t){return e.cambioParametroArchivo(r,t)}}})]),e._v(" "),"I"===r.tipo_parametro&&r.resultadoAnterior?t("div",[t("a",{class:{disabled:e.guardandoReporte},attrs:{target:"_blank",href:"/detalles-reportes/".concat(r.detalleReporteId,"/archivo")}},[t("i",{staticClass:"far fa-file-image fa-fw"}),e._v(" Ver imagen\n                    ")])]):e._e(),e._v(" "),e.comentarios.length>0&&"E"===r.tipo_parametro?t("v-select",{staticClass:"form-control input-sm",attrs:{placeholder:"Comentario...",options:e.comentarios,label:"nombre",reduce:function(e){return e.contenido}},on:{input:function(t){return e.seleccionarParaTextoExtendido(r,e.comentarioSeleccionado)}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen comentarios")]},proxy:!0}],null,!0),model:{value:e.comentarioSeleccionado,callback:function(t){e.comentarioSeleccionado=t},expression:"comentarioSeleccionado"}}):e._e(),e._v(" "),t("div",{staticClass:"editor"},["E"===r.tipo_parametro?t("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig,disabled:e.guardandoReporte||!e.puedeEditar(a)},model:{value:r.resultado,callback:function(t){e.$set(r,"resultado",t)},expression:"detalleReporte.resultado"}}):e._e()],1),e._v(" "),"G"===r.tipo_parametro&&r.detalleReporteId?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.abrirGrafico(r.detalleReporteId)}}},[t("i",{staticClass:"fas fa-poll fa-fw"}),e._v(" Ver Gráfico\n                  ")]):e._e()],1),e._v(" "),"E"!==r.tipo_parametro?t("td",{staticClass:"col-sm-3 text-center valor-referencia"},[e._v("\n                  "+e._s(e.construirValoresReferencia(r))+"\n                  "),r.interpretacion?t("div",{staticClass:"con-interpretacion"},[t("i",{staticClass:"fas fa-info-circle",attrs:{"aria-hidden":"true"}}),e._v(" "),t("div",{staticClass:"interpretacion"},[t("div",{staticStyle:{overflow:"auto","max-height":"80px"}},[t("span",{attrs:{id:"interpretacion-tooltip"},domProps:{innerHTML:e._s(r.interpretacion)}})]),e._v(" "),t("i",{staticClass:"flecha"})])]):e._e()]):e._e(),e._v(" "),t("td",{staticClass:"col-sm-1 text-center"},[e.cargandoUltimosResultados&&!["T","L","A","I","G"].includes(r.tipo_parametro)?t("span",[t("i",{staticClass:"fas fa-spinner fa-spin",attrs:{"aria-hidden":"true"}})]):t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[e.deltaCheckFueraRango(r)?t("div",{attrs:{title:"Alarma Delta Check"}},[t("i",{staticClass:"fas fa-exclamation-triangle",staticStyle:{color:"#ff9505"},attrs:{"aria-hidden":"true"}})]):e._e(),e._v(" "),t("div",{staticClass:"text-center",staticStyle:{flex:"1"},attrs:{title:"Último Resultado"}},["M"===r.tipo_parametro&&r.ultimoResultado?[t("i",{staticClass:"fas fa-eye fa-fw puntero",on:{click:function(t){return e.abrirUltimoResultadoMicrobiologia(r)}}})]:[e._v("\n                        "+e._s(r.ultimoResultado)+"\n                      ")]],2)])]),e._v(" "),t("td",{staticClass:"col-sm-2 acciones"},[t("div",{staticClass:"form-inline text-right botones-acciones"},["M"===r.tipo_parametro?t("button",{staticClass:"btn btn-xs btn-primary",attrs:{type:"button",tabindex:"-1",title:"Agregar muestra",disabled:e.guardandoReporte||!e.puedeEditar(a)},on:{click:function(t){return e.abrirMicrobiologia(a,r)}}},[t("i",{staticClass:"fas fa-plus fa-fw"})]):e._e(),e._v(" "),["N","S","X"].includes(r.tipo_parametro)&&e.datos.permisos.editar?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",tabindex:"-1",title:"Registrar repetición",disabled:!r.resultado||!r.detalleReporteId||"R"!==a.estado},on:{click:function(t){return e.registrarRepeticion(a,r)}}},[t("i",{staticClass:"fas fa-redo-alt fa-fw"})]):e._e(),e._v(" "),["N","S","X"].includes(r.tipo_parametro)?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",tabindex:"-1",title:"Ver repeticiones",disabled:0===r.repeticiones.length},on:{click:function(t){return e.abrirRepeticiones(a,r)}}},[t("i",{staticClass:"fas fa-history fa-fw"})]):e._e(),e._v(" "),["N","S","X","F"].includes(r.tipo_parametro)?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",tabindex:"-1",title:"Historial"},on:{click:function(t){return e.abrirHistorial(a,r)}}},[t("i",{staticClass:"fas fa-poll fa-fw"})]):e._e(),e._v(" "),["N","S","X","E","F"].includes(r.tipo_parametro)?t("button",{class:"btn btn-xs"+(r.comentario?" btn-info":" btn-default"),attrs:{type:"button",tabindex:"-1",title:"Comentarios",disabled:e.guardandoReporte},on:{click:function(t){return e.abrirComentario(a,r)}}},[t("i",{staticClass:"fas fa-comment-dots fa-fw"})]):e._e(),e._v(" "),["A","I"].includes(r.tipo_parametro)&&r.resultadoAnterior?t("button",{staticClass:"btn btn-xs btn-danger",attrs:{type:"button",title:"Eliminar adjunto",disabled:!e.puedeEliminar(a)||e.guardandoReporte||e.validandoReportes},on:{click:function(t){return e.eliminarArchivo(r)}}},[e.guardandoReporte?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-trash fa-fw"})]):e._e(),e._v(" "),"G"===r.tipo_parametro&&r.resultadoAnterior?t("button",{staticClass:"btn btn-xs btn-danger",attrs:{type:"button",title:"Eliminar gráfico",disabled:!e.puedeEliminar(a)||e.guardandoReporte||e.validandoReportes},on:{click:function(t){return e.eliminarGrafico(r)}}},[e.guardandoReporte?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-trash fa-fw"})]):e._e()])])]):e._e(),e._v(" "),"M"===r.tipo_parametro?e._l(r.resultado,(function(o,i){return t("tr",[t("td",{staticClass:"muestra"},[e._v(e._s(o.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("resultadoMicrobiologia")(o.resultado)))]),e._v(" "),t("td"),e._v(" "),t("td",[t("div",{staticClass:"text-center",attrs:{title:"Último Resultado"}},[e._v("\n                      "+e._s(e._f("resultadoMicrobiologia")(e.obtenerUltimoResultadoMuestra(r,o)))+"\n                    ")])]),e._v(" "),t("td",{staticClass:"col-md-2 acciones"},[t("div",{staticClass:"form-inline text-right botones-acciones"},[t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",tabindex:"-1",title:"Editar muestra",disabled:e.guardandoReporte||!e.puedeEditar(a)},on:{click:function(t){return e.editarMuestra(a,r,i)}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-xs btn-danger",attrs:{type:"button",title:"Eliminar muestra",disabled:!e.puedeEliminar(a)||e.guardandoReporte||e.validandoReportes},on:{click:function(t){return e.eliminarMuestra(r)}}},[e.guardandoReporte?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-trash fa-fw"})])])])])})):e._e()]})),e._v(" "),a.plantillaId&&a.detallesReportesFueraPlantilla.length>0?t("tr",[t("td",{staticClass:"bg-info parametro-fuera-plantilla",attrs:{colspan:"6"}},[e._v("\n                Parámetros reportados de "+e._s(a.nombre)+" no presentes en plantilla actual\n              ")])]):e._e(),e._v(" "),e._l(a.detallesReportesFueraPlantilla,(function(r){return[a.plantillaId&&!a.muestraPendiente&&"X"!==a.estado?t("tr",{key:r.id},[t("td",{staticClass:"col-sm-4 bg-info parametro",class:{"parametro-titulo":"T"===r.tipo_parametro,"parametro-linea":"L"===r.tipo_parametro}},[e._v("\n                  "+e._s(r.nombre)+"\n                  "),r.comentario?t("i",{staticClass:"fas fa-comment-dots"}):e._e()]),e._v(" "),t("td",{staticClass:"col-sm-2 text-center bg-info resultado",staticStyle:{"min-width":"60px"},attrs:{colspan:"E"===r.tipo_parametro?2:1}},[e._v("\n                  "+e._s(r.resultado)+"\n                ")]),e._v(" "),"E"!==r.tipo_parametro?t("td",{staticClass:"col-sm-3 text-center bg-info valor-referencia"},[e._v("\n                  "+e._s(e.construirValoresReferencia(r))+"\n                  "),r.interpretacion?t("div",{staticClass:"con-interpretacion"},[t("i",{staticClass:"fas fa-info-circle",attrs:{"aria-hidden":"true"}}),e._v(" "),t("div",{staticClass:"interpretacion"},[t("div",{staticStyle:{overflow:"auto","max-height":"80px"}},[t("span",{attrs:{id:"interpretacion-tooltip"},domProps:{innerHTML:e._s(r.interpretacion)}})]),e._v(" "),t("i",{staticClass:"flecha"})])]):e._e()]):e._e(),e._v(" "),t("td",{staticClass:"bg-info"},[e._v(" ")]),e._v(" "),t("td",{staticClass:"bg-info"},[e._v(" ")])]):e._e()]}))]}))],2)])]):e._e(),e._v(" "),e.orden?e._e():t("div",{staticClass:"panel-body"},[e._v("\n        Por favor seleccione una orden\n      ")]),e._v(" "),e.orden&&0===e.detallesOrden.length&&!e.cargando?t("div",{staticClass:"panel-body"},[e._v("\n        No existen detalles para la orden seleccionada\n      ")]):e._e(),e._v(" "),e.cargando?t("div",{staticClass:"panel-body"},[e._m(1)]):e._e()])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalComentario",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(2),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.manejadorGuardadoComentario.apply(null,arguments)}}},[t("div",{staticClass:"modal-body"},[e.comentarios.length>0?t("div",{staticClass:"form-group"},[e.puedeEditar(e.examenSeleccionado)?t("v-select",{staticClass:"form-control input-sm",attrs:{id:"catalogoComentario",placeholder:"Seleccione un comentario...",options:e.comentarios,label:"nombre",reduce:function(e){return e.contenido}},on:{input:e.seleccionarComentario},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen comentarios")]},proxy:!0}],null,!1,1909277024),model:{value:e.comentarioSeleccionado,callback:function(t){e.comentarioSeleccionado=t},expression:"comentarioSeleccionado"}}):e._e()],1):e._e(),e._v(" "),e.comentarioAbierto&&e.puedeEditar(e.examenSeleccionado)?t("div",{staticClass:"editor alto-400"},[t("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},on:{ready:e.editorCargado},model:{value:e.comentario,callback:function(t){e.comentario=t},expression:"comentario"}})],1):e._e(),e._v(" "),e.puedeEditar(e.examenSeleccionado)?e._e():t("div",{domProps:{innerHTML:e._s(e.comentario?e.comentario:"No tiene comentario registrado")}})]),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrarComentario}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v("Cancelar\n            ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.puedeEditar(e.examenSeleccionado),expression:"puedeEditar(examenSeleccionado)"}],staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v("Guardar\n            ")])])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalHistorial",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",class:["N","F"].includes(e.parametroSeleccionado.tipo_parametro)?"modal-lg":"",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(3),e._v(" "),t("div",{staticClass:"modal-title"},[t("h6",{staticStyle:{padding:"0"}},[e._v("\n              "+e._s(e.nombrePaciente)+"\n            ")]),e._v(" "),t("h4",[e._v("\n              Historial de "+e._s(e.parametroSeleccionado.nombre)+"\n            ")])])]),e._v(" "),t("div",{staticClass:"modal-body"},[e.cargandoHistorial?e._e():t("div",{staticClass:"row"},[t("div",{class:["N","F"].includes(e.parametroSeleccionado.tipo_parametro)?"col-md-6":"col-md-8 col-md-offset-2"},[t("div",{staticStyle:{height:"280px",overflow:"auto"}},[t("table",{staticClass:"table table-hover table-condensed"},[e._m(4),e._v(" "),t("tbody",e._l(e.historial,(function(a){return t("tr",[t("td",[e._v("\n                      "+e._s(a.numero)+"\n                      "),a.comentario?t("i",{staticClass:"fas fa-comment-dots fa-fw",attrs:{rel:"tooltip",title:a.comentario,"data-html":"true"}}):e._e()]),e._v(" "),t("td",[e._v(e._s(a.fecha))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n                      "+e._s(a.resultado)+" "+e._s(a.unidadMedida)+"\n                    ")])])})),0)])])]),e._v(" "),["N","F"].includes(e.parametroSeleccionado.tipo_parametro)?t("div",{staticClass:"col-md-6"},[e.cargandoHistorial?e._e():t("grafico-historial",{staticStyle:{height:"280px"},attrs:{datos:e.datosGraficoHistorial}})],1):e._e()]),e._v(" "),e.cargandoHistorial?t("div",{staticStyle:{height:"280px"}},[e._m(5)]):e._e()]),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrarHistorial}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v("Cerrar\n          ")])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalRepeticiones",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(6),e._v(" "),t("div",{staticClass:"modal-title"},[t("h4",[e._v("\n              Repeticiones de "+e._s(e.parametroSeleccionado.nombre)+"\n            ")])])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-10 col-md-offset-1"},[t("div",{staticStyle:{height:"280px",overflow:"auto"}},[t("table",{staticClass:"table table-hover table-condensed"},[e._m(7),e._v(" "),t("tbody",e._l(e.parametroSeleccionado.repeticiones,(function(a){return t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.resultado))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.parametroSeleccionado.unidad_medida))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.created_at,"YYYY-MM-DD")))])])})),0)])])])])]),e._v(" "),t("div",{staticClass:"panel-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrarRepeticiones}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v("Cerrar\n          ")])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalMicrobiologia",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.alterarMuestra.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.cerrarMicrobiologia}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Microbiología")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4 form-group"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"muestra_id"}},[e._v("Muestra")]),e._v(" "),t("v-select",{staticClass:"form-control input-xs",attrs:{id:"muestra_id",placeholder:"Seleccione...",options:e.muestras,label:"nombre",reduce:function(e){return e.id},clearable:!1},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.formularioMuestra.muestraId}},"input",r,!1),o))]}}]),model:{value:e.formularioMuestra.muestraId,callback:function(t){e.$set(e.formularioMuestra,"muestraId",t)},expression:"formularioMuestra.muestraId"}})],1),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"resultado"}},[e._v("Resultado")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.formularioMuestra.resultado,expression:"formularioMuestra.resultado"}],staticClass:"form-control input-sm",attrs:{id:"resultado",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.formularioMuestra,"resultado",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"POSITIVO"}},[e._v("Positivo")]),e._v(" "),t("option",{attrs:{value:"NEGATIVO"}},[e._v("Negativo")]),e._v(" "),t("option",{attrs:{value:"MICROBIOTA_MIXTA"}},[e._v("Microbiota mixta")])])])]),e._v(" "),t("div",{staticClass:"col-md-8 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"comentario"}},[e._v("Comentario")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{placeholder:"Comentario...",options:e.comentarios,label:"nombre",reduce:function(e){return e.contenido}},on:{input:function(t){return e.seleccionarComentarioMuestra(e.formularioMuestra.comentarioSeleccionado)}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen comentarios")]},proxy:!0}]),model:{value:e.formularioMuestra.comentarioSeleccionado,callback:function(t){e.$set(e.formularioMuestra,"comentarioSeleccionado",t)},expression:"formularioMuestra.comentarioSeleccionado"}}),e._v(" "),t("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.formularioMuestra.comentario,callback:function(t){e.$set(e.formularioMuestra,"comentario",t)},expression:"formularioMuestra.comentario"}})],1)]),e._v(" "),t("div",{staticClass:"row"},["POSITIVO"===e.formularioMuestra.resultado?t("h4",{staticClass:"page-header",staticStyle:{margin:"10px 10px"}},[e._v("\n                Microorganismos\n                "),t("a",{staticClass:"btn btn-xs btn-primary",on:{click:e.agregarMicroorganismo}},[t("i",{staticClass:"fas fa-plus fa-fw"})])]):e._e()]),e._v(" "),"POSITIVO"===e.formularioMuestra.resultado&&0===e.formularioMuestra.microorganismos.length?t("div",{staticClass:"text-center text-muted"},[e._v("\n              Agregue microorganismos\n            ")]):e._e(),e._v(" "),e.formularioMuestra.microorganismos.length>0?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("table",{staticClass:"table table-condensed"},[e._m(8),e._v(" "),t("tbody",e._l(e.formularioMuestra.microorganismos,(function(a,r){return t("tr",{class:{"bg-danger":a.alertaResistencia}},[t("td",{staticClass:"text-center"},[e._v(e._s(r+1))]),e._v(" "),t("td",[t("v-select",{staticClass:"form-control input-xs",attrs:{placeholder:"Todos",options:e.tiposMicroorganismos,label:"nombre",reduce:function(e){return e.id}},on:{input:function(e){a.id=null}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!0),model:{value:a.tipoMicroorganismoId,callback:function(t){e.$set(a,"tipoMicroorganismoId",t)},expression:"microorganismoMuestra.tipoMicroorganismoId"}})],1),e._v(" "),t("td",[t("v-select",{staticClass:"form-control input-xs",attrs:{placeholder:"Seleccione...",options:e.obtenerMicroorganismos(a),label:"nombre",value:a.id,reduce:function(e){return e.id},clearable:!1},on:{input:function(t){return e.actualizarMicroorganismos(a,t)}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"search",fn:function(r){var o=r.attributes,i=r.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!a.id}},"input",o,!1),i))]}}],null,!0)})],1),e._v(" "),t("td",{staticClass:"text-center"},[a.editar?t("input",{directives:[{name:"model",rawName:"v-model",value:a.colonias,expression:"microorganismoMuestra.colonias"}],staticClass:"form-control input-xs",attrs:{id:"microorganismo-".concat(r)},domProps:{value:a.colonias},on:{blur:function(t){return e.ocultarColonia(a)},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.ocultarColonia(a)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.ocultarColonia(a)}],input:function(t){t.target.composing||e.$set(a,"colonias",t.target.value)}}}):t("div",{on:{click:function(t){return e.editarColonia(a,r)}}},[t("span",[e._v("\n                          "+e._s(a.colonias?a.colonias:"-")+"\n                        ")])])]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticStyle:{display:"flex",gap:"5px","justify-content":"center"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.alertaResistencia,expression:"microorganismoMuestra.alertaResistencia"}],attrs:{type:"checkbox",title:"Alerta de resistencia"},domProps:{checked:Array.isArray(a.alertaResistencia)?e._i(a.alertaResistencia,null)>-1:a.alertaResistencia},on:{change:function(t){var r=a.alertaResistencia,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"alertaResistencia",r.concat([null])):s>-1&&e.$set(a,"alertaResistencia",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"alertaResistencia",i)}}}),e._v(" "),t("v-select",{staticClass:"form-control input-xs",attrs:{placeholder:"Agregar",clearable:!1,options:e.alertasResistencia,disabled:!a.alertaResistencia,label:"nombre"},on:{input:function(t){return e.agregarAlerta(a,t)}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!0),model:{value:e.formularioMuestra.alertasResistencia,callback:function(t){e.$set(e.formularioMuestra,"alertasResistencia",t)},expression:"formularioMuestra.alertasResistencia"}})],1),e._v(" "),a.alertaResistencia?t("div",{staticClass:"alertas-resistencia"},e._l(a.alertasResistencia,(function(r,o){return t("div",{key:r,staticClass:"label label-default alerta-resistencia"},[t("span",[e._v(e._s(r))]),e._v(" "),t("span",{staticClass:"puntero alerta-resistencia__cerrar",on:{click:function(t){return e.eliminarAlerta(a,o)}}},[e._v("\n                            ×\n                          ")])])})),0):e._e()]),e._v(" "),t("td",{staticClass:"text-center"},[t("a",{staticClass:"text-danger punto",attrs:{title:"Eliminar microorganismo"},on:{click:function(t){return e.eliminarMicroorganismo(a)}}},[t("i",{staticClass:"fas fa-trash-alt fa-fw"})])])])})),0)])])]):e._e(),e._v(" "),t("div",{staticClass:"row"},[e.formularioMuestra.microorganismos.length>0?t("h4",{staticClass:"page-header",staticStyle:{margin:"10px 10px"}},[e._v("\n                Antibióticos\n                "),t("a",{staticClass:"btn btn-xs btn-primary",on:{click:function(t){return e.agregarAntibiotico("")}}},[t("i",{staticClass:"fas fa-plus fa-fw"})]),e._v(" "),t("div",{staticStyle:{display:"inline-block",width:"200px"}},[t("v-select",{staticClass:"form-control input-xs",attrs:{placeholder:"Seleccione...",options:e.antibiogramas,label:"nombre",reduce:function(e){return e.id}},on:{input:function(t){return e.agregarAntibiograma(e.formularioMuestra.antibiogramaId)}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!1,2639475694),model:{value:e.formularioMuestra.antibiogramaId,callback:function(t){e.$set(e.formularioMuestra,"antibiogramaId",t)},expression:"formularioMuestra.antibiogramaId"}})],1)]):e._e()]),e._v(" "),e.formularioMuestra.microorganismos.length>0&&0===e.formularioMuestra.antibioticos.length?t("div",{staticClass:"text-center text-muted"},[e._v("\n              Agregue antibióticos\n            ")]):e._e(),e._v(" "),e.formularioMuestra.antibioticos.length>0?t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("table",{staticClass:"table table-condensed",staticStyle:{width:"auto"}},[t("thead",[t("tr",[t("th",{staticStyle:{width:"300px"}},[e._v("\n                      Nombre\n                    ")]),e._v(" "),e._l(e.formularioMuestra.microorganismos,(function(a,r){return t("th",{staticClass:"text-center",staticStyle:{width:"100px"}},[t("div",[e._v("\n                        "+e._s(r+1)+"\n                      ")]),e._v(" "),t("div",{staticClass:"bg-info"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.tecnica,expression:"microorganismo.tecnica"}],attrs:{type:"radio",value:"CIM",name:"".concat(a.id)},domProps:{checked:e._q(a.tecnica,"CIM")},on:{change:function(t){return e.$set(a,"tecnica","CIM")}}}),e._v(" "),t("span",{attrs:{title:"Concentración Inhibitoria Mínima"}},[e._v("CIM")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.tecnica,expression:"microorganismo.tecnica"}],attrs:{type:"radio",value:"DD",name:"".concat(a.id)},domProps:{checked:e._q(a.tecnica,"DD")},on:{change:function(t){return e.$set(a,"tecnica","DD")}}}),e._v(" "),t("span",{attrs:{title:"Difusión de Disco"}},[e._v("DD")])])])})),e._v(" "),t("th",{staticStyle:{width:"60px"}})],2)]),e._v(" "),t("tbody",e._l(e.formularioMuestra.antibioticos,(function(a){return t("tr",[t("td",[t("v-select",{staticClass:"form-control input-xs",attrs:{placeholder:"Seleccione...",options:e.obtenerAntibioticos(a),label:"nombre",reduce:function(e){return e.id},clearable:!1},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"search",fn:function(r){var o=r.attributes,i=r.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!a.id}},"input",o,!1),i))]}}],null,!0),model:{value:a.id,callback:function(t){e.$set(a,"id",t)},expression:"antibioticoMuestra.id"}})],1),e._v(" "),e._l(e.formularioMuestra.microorganismos,(function(r,o){return t("td",{style:{backgroundColor:o%2==0?"#f5f5f5":"white"}},[t("div",{staticStyle:{width:"100px"}},[r.id?t("table",{staticClass:"table table-condensed",staticStyle:{"margin-bottom":"0"},style:{backgroundColor:o%2==0?"#f5f5f5":"white"}},[e._m(9,!0),e._v(" "),t("tr",[t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.microorganismoAntibiotico(r,a).sensibilidad,expression:"microorganismoAntibiotico(microorganismoMuestra, antibioticoMuestra).sensibilidad"}],attrs:{type:"radio",value:"SENSIBLE",name:"".concat(a.id,"-").concat(r.id)},domProps:{checked:e._q(e.microorganismoAntibiotico(r,a).sensibilidad,"SENSIBLE")},on:{change:function(t){e.$set(e.microorganismoAntibiotico(r,a),"sensibilidad","SENSIBLE")}}})]),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.microorganismoAntibiotico(r,a).sensibilidad,expression:"microorganismoAntibiotico(microorganismoMuestra, antibioticoMuestra).sensibilidad"}],attrs:{type:"radio",value:"INTERMEDIO",name:"".concat(a.id,"-").concat(r.id)},domProps:{checked:e._q(e.microorganismoAntibiotico(r,a).sensibilidad,"INTERMEDIO")},on:{change:function(t){e.$set(e.microorganismoAntibiotico(r,a),"sensibilidad","INTERMEDIO")}}})]),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.microorganismoAntibiotico(r,a).sensibilidad,expression:"microorganismoAntibiotico(microorganismoMuestra, antibioticoMuestra).sensibilidad"}],attrs:{type:"radio",value:"RESISTENTE",name:"".concat(a.id,"-").concat(r.id)},domProps:{checked:e._q(e.microorganismoAntibiotico(r,a).sensibilidad,"RESISTENTE")},on:{change:function(t){e.$set(e.microorganismoAntibiotico(r,a),"sensibilidad","RESISTENTE")}}})])]),e._v(" "),t("tr",[t("td",{attrs:{colspan:"3"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.microorganismoAntibiotico(r,a).resultado,expression:"microorganismoAntibiotico(microorganismoMuestra, antibioticoMuestra).resultado"}],staticClass:"form-control input-xs",attrs:{placeholder:r.tecnica},domProps:{value:e.microorganismoAntibiotico(r,a).resultado},on:{input:function(t){t.target.composing||e.$set(e.microorganismoAntibiotico(r,a),"resultado",t.target.value)}}})])]),e._v(" "),t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"3"}},[t("a",{staticClass:"puntero",staticStyle:{display:"inline-block","padding-top":"5px"},on:{click:function(t){e.alternarImpresionMicroorganismoAntibiotico(e.microorganismoAntibiotico(r,a))}}},[t("i",{staticClass:"fas fa-print text-gris",attrs:{title:e.microorganismoAntibiotico(r,a).ocultarPdf?"No se imprime en PDF":"Se imprime en PDF"}}),e._v(" "),e.microorganismoAntibiotico(r,a).ocultarPdf?t("i",{staticClass:"icon-stack-2x fa fa-times text-gris"}):t("i",{staticClass:"icon-stack-2x fa fa-check text-gris"})])])])]):e._e()])])})),e._v(" "),t("td",{staticClass:"text-center"},[t("a",{staticClass:"text-danger puntero",attrs:{title:"Eliminar antibiótico"},on:{click:function(t){return e.eliminarAntibiotico(a)}}},[t("i",{staticClass:"fas fa-trash-alt fa-fw"})])])],2)})),0)])])]):e._e()],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrarMicrobiologia}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v("Cancelar\n            ")]),e._v(" "),e.formularioMuestra.editar?e._e():t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v(" Agregar\n            ")]),e._v(" "),e.formularioMuestra.editar?t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Modificar\n            ")]):e._e()])])])])]),e._v(" "),t("ultimo-resultado-microbiologia-modal",{attrs:{"detalle-id":e.parametroSeleccionado.ultimoResultadoId},model:{value:e.mostrarUltimoResultadoMicrobiologiaModal,callback:function(t){e.mostrarUltimoResultadoMicrobiologiaModal=t},expression:"mostrarUltimoResultadoMicrobiologiaModal"}}),e._v(" "),t("ver-muestras-modal")],1)}),[function(){var e=this._self._c;return e("td",{staticClass:"text-center bg-warning",staticStyle:{"white-space":"pre"},attrs:{colspan:"6"}},[e("span",{staticStyle:{display:"block","white-space":"pre"}},[this._v("Plantilla no existe o está desactivada")])])},function(){var e=this._self._c;return e("div",{staticClass:"cargando"},[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n        ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Comentario")])])},function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×\n            ")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-4"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"col-sm-4"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-4 text-center"},[e._v("Valor")])])])},function(){var e=this._self._c;return e("table",{staticClass:"table"},[e("tr",[e("td",{staticClass:"text-center",staticStyle:{height:"220px","vertical-align":"middle"}},[e("div",{staticClass:"cargando"},[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n                  ")])])])])},function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×\n            ")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-4 text-center"},[e._v("Resultado")]),e._v(" "),t("th",{staticClass:"col-sm-4 text-center"},[e._v("Unidad")]),e._v(" "),t("th",{staticClass:"col-sm-4 text-center"},[e._v("Fecha")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Tipo")]),e._v(" "),t("th",{staticClass:"col-sm-4"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2"},[e._v("Conteo colonias")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[t("i",{staticClass:"fas fa-bell fa-fw",attrs:{title:"Alerta de resistencia"}})]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this,t=e._self._c;return t("tr",[t("th",{staticClass:"text-center"},[e._v("S")]),e._v(" "),t("th",{staticClass:"text-center"},[e._v("I")]),e._v(" "),t("th",{staticClass:"text-center"},[e._v("R")])])}],!1,null,"7e245f57",null).exports;var d=a(6570),u=a(9326),m=a(7974),p=a(8259);const f={components:{DatosOrden:d.Z,VerEntregasModal:u.Z,GestionarImpresionModal:p.Z},props:["configuracion","orden"],methods:{cambiarEstadoBoton:function(e,t){e.classList.contains("disabled")?(e.classList.remove("disabled"),t.classList.add("fa-save"),t.classList.remove("fa-spinner","fa-spin")):(e.classList.add("disabled"),t.classList.remove("fa-save"),t.classList.add("fa-spinner","fa-spin"))},guardarObservacionesRecibo:function(e){var t=null,a=null;"i"===e.target.localName&&(a=e.target.parentNode,t=e.target),"button"===e.target.localName&&(a=e.target,t=e.target.childNodes[0]),this.cambiarEstadoBoton(a,t);var r={observaciones:this.orden.observaciones_orden};this.guardarObservaciones("recibo",r,a,t)},guardarObservacionesLaboratorista:function(e){var t=null,a=null;"i"===e.target.localName&&(a=e.target.parentNode,t=e.target),"button"===e.target.localName&&(a=e.target,t=e.target.childNodes[0]),this.cambiarEstadoBoton(a,t);var r={observaciones:this.orden.observaciones_hoja_trabajo};this.guardarObservaciones("laboratorista",r,a,t)},guardarObservaciones:function(e,t,a,r){var o=this;axios.patch("/api/ordenes/".concat(this.orden.id,"/observaciones/").concat(e),t).then((function(){return o.$emit("exito","Observación guardada")})).catch((function(e){var t=o.procesarErrorResponse(e);console.error(t),o.$emit("error","Error al actualizar observación")})).then((function(){return o.cambiarEstadoBoton(a,r)}))},abrirModalVerEntregas:function(){var e=(0,m.MD)({forma:"CORREO",orden:this.orden});$("#modalVerEntregas").modal({backdrop:"static"},e)},abrirModalGestionarImpresion:function(e){var t=(0,m.MD)({forma:"CORREO",orden:e});$("#modalGestionarImpresion").modal({backdrop:"static"},t)},impresionRegistrada:function(e){this.$emit("exito","Impresión de orden registrada")}},computed:{empresa:function(){return _.isEmpty(this.subempresa)?{}:this.subempresa.empresa},esHumano:function(){return!!_.isEmpty(this.orden)||this.orden.es_humano},esAnimal:function(){return!!_.isEmpty(this.orden)||this.orden.es_animal},esObjeto:function(){return!!_.isEmpty(this.orden)||this.orden.es_objeto},nombreCliente:function(){return _.isEmpty(this.subempresa)?"-":this.empresa.nombre+(this.empresa.nombre!==this.subempresa.nombre?"("+this.subempresa.nombre+")":"")},nombreSala:function(){return _.isEmpty(this.sala)?"-":this.sala.nombre},nombreTipoAtencion:function(){return _.isEmpty(this.tipoAtencion)?"-":this.tipoAtencion.nombre},nombrePlanSalud:function(){return _.isEmpty(this.planSalud)?"-":this.planSalud.nombre},nombreMedico:function(){return _.isEmpty(this.medico)?"-":this.medico.nombre_completo},embarazada:function(){return this.orden.embarazada?1===this.orden.semanas_gestacion?this.orden.semanas_gestacion+" semana":this.orden.semanas_gestacion>1?this.orden.semanas_gestacion+" semanas":"Si":"No"},paciente:function(){return _.isEmpty(this.orden)?{}:this.orden.paciente},sala:function(){return _.isEmpty(this.orden)?{}:this.orden.sala},tipoAtencion:function(){return _.isEmpty(this.orden)?{}:this.orden.tipo_atencion},planSalud:function(){return _.isEmpty(this.orden)?{}:this.orden.plan_salud},medico:function(){return _.isEmpty(this.orden)?{}:this.orden.medico},sexoPaciente:function(){return _.isEmpty(this.paciente)?"":this.paciente.sexo&&(this.esHumano||this.esObjeto)?"M"===this.paciente.sexo?"Masculino":"Femenino":this.esAnimal?"M"===this.paciente.sexo?"Macho":"Hembra":""},subempresa:function(){return _.isEmpty(this.orden)?{}:this.orden.subempresa},existeOrden:function(){return!_.isEmpty(this.orden)},sucursal:function(){return this.orden.sucursal.nombre}}};var v=a(8147),h={insert:"head",singleton:!1};i()(v.Z,h);v.Z.locals;const g=(0,c.Z)(f,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"panel panel-gris"},[t("div",{staticClass:"panel-heading sticky-top"},[e.orden.numero_orden?e._e():[e._v("\n          Paciente\n        ")],e._v(" "),t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-numero-orden-externa":e.configuracion.mostrarOrdenExterna,"mostrar-fecha-orden":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!0,"mostrar-edad":!0,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,"mostrar-historia-clinica":!0,"mostrar-saldo":e.orden&&e.orden.subempresa&&e.orden.subempresa.empresa&&e.orden.subempresa.empresa.mostrar_valores_orden_en_reportes,orden:e.orden}}),e._v("\n         \n        "),e.orden.numero_orden?t("a",{staticClass:"puntero",attrs:{title:"Ver entregas por correo electrónico",rel:"tooltip"},on:{click:e.abrirModalVerEntregas}},[t("i",{staticClass:"fas fa-envelope text-gris"})]):e._e(),e._v("\n         \n        "),e.orden.numero_orden?t("a",{staticClass:"puntero",attrs:{title:"Ver impresiones",rel:"tooltip"},on:{click:function(t){return e.abrirModalGestionarImpresion(e.orden)}}},[t("i",{staticClass:"fas fa-print text-gris"})]):e._e()],2),e._v(" "),e.existeOrden?t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Sucursal")]),e._v(" "),t("p",[e._v(e._s(e.sucursal))])]),e._v(" "),e.$can("ver-cliente-reportes")?t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Cliente")]),e._v(" "),t("p",[e._v("\n              "+e._s(e.nombreCliente)+"\n            ")])]):e._e(),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Tipo atención")]),e._v(" "),t("p",[e._v(e._s(e.nombreTipoAtencion))])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Servicio")]),e._v(" "),t("p",[e._v(e._s(e.nombreSala))])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Plan salud")]),e._v(" "),t("p",[e._v(e._s(e.nombrePlanSalud))])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Médico")]),e._v(" "),t("p",[e._v(e._s(e.nombreMedico))])])]),e._v(" "),t("div",{staticClass:"row"},[e.orden.embarazada?t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Embarazada")]),e._v(" "),t("p",{staticClass:"no-salto-linea"},[e._v(e._s(e.embarazada))])]):e._e(),e._v(" "),e.orden.fecha_ultima_menstruacion?t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("F.U.M.")]),e._v(" "),t("p",{staticClass:"no-salto-linea"},[e._v(e._s(e.orden.fecha_ultima_menstruacion))])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[e.esHumano?t("div",{staticClass:"col-md-3 form-group"},[t("label",[e._v("Datos clínicos")]),e._v(" "),t("textarea",{staticClass:"form-control resize-vertical",attrs:{rows:"2",disabled:""}},[e._v(e._s(e.paciente.datos_clinicos))])]):e._e(),e._v(" "),t("div",{staticClass:"col-md-3 form-group"},[t("label",[e._v("Diagnóstico")]),e._v(" "),t("textarea",{staticClass:"form-control resize-vertical",attrs:{rows:"2",disabled:""},domProps:{value:e.orden.diagnostico?"".concat(e.orden.diagnostico.codigo," - ").concat(e.orden.diagnostico.concepto):""}})]),e._v(" "),t("div",{staticClass:"col-md-3 form-group"},[t("label",[e._v("Observaciones recibo")]),e._v(" "),t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",disabled:!e.existeOrden,title:"Guardar Observación"},on:{click:e.guardarObservacionesRecibo}},[t("i",{staticClass:"fas fa-save"})]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.orden.observaciones_orden,expression:"orden.observaciones_orden"}],staticClass:"form-control resize-vertical",attrs:{rows:"2"},domProps:{value:e.orden.observaciones_orden},on:{input:function(t){t.target.composing||e.$set(e.orden,"observaciones_orden",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-3 form-group"},[t("label",[e._v("Observaciones laboratorista")]),e._v(" "),t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Guardar Observación",disabled:!e.existeOrden},on:{click:e.guardarObservacionesLaboratorista}},[t("i",{staticClass:"fas fa-save"})]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.orden.observaciones_hoja_trabajo,expression:"orden.observaciones_hoja_trabajo"}],staticClass:"form-control resize-vertical",attrs:{rows:"2"},domProps:{value:e.orden.observaciones_hoja_trabajo},on:{input:function(t){t.target.composing||e.$set(e.orden,"observaciones_hoja_trabajo",t.target.value)}}})])])]):t("div",{staticClass:"panel-body"},[e._v("\n        Por favor seleccione una orden\n      ")])])]),e._v(" "),t("ver-entregas-modal"),e._v(" "),t("gestionar-impresion-modal",{on:{"impresion-registrada":e.impresionRegistrada}})],1)}),[],!1,null,"7b5ab49a",null).exports;var b=a(5683),x=a(1497),C=a(2534),y=a(7410),E=a(4590),A=a(2446),w=a(1679),P=a(5480),k=a(2893);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const I={components:{ExamenesOrden:l,PacienteOrden:g,VerAuditoriasModal:b.Z,SelectExamenes:C.Z,PdfCertificadoModal:x.Z,ImprimirModal:y.Z,EntregarResultadosModal:A.Z,ResultadosModal:P.Z,ScrollInfinito:w.Z,BuscarDocumentosModal:k.Z},data:function(){return{cargandoOrdenes:!1,detallesOrdenSeleccionada:[],filtrosBuscarOrdenes:{numerosOrdenes:"",pacienteBusqueda:"",fechaDesde:"",fechaHasta:"",sucursalId:"",seccionId:"",estadosDetalles:"",empresaId:"",subempresaId:"",tipoAtencionId:"",examenId:"",grupoId:"",incluir:"paciente.raza.padre,subempresa.empresa,sala,tipoAtencion,diagnostico:id|codigo|concepto,planSalud:id|nombre,medico,sistemaExterno,sucursal:id|nombre|extras",paginacion:"cursor",tamano:15,orden:""},estado:"",estados:[{id:"G",nombre:"Generado"},{id:"R",nombre:"Reportado"},{id:"L",nombre:"Preliminar"},{id:"P",nombre:"Pendiente"},{id:"V",nombre:"Validado"}],empresaId:"",filtrosDetallesOrden:{},subempresaId:"",fechaDesde:moment().format("YYYY-MM-DD"),fechaHasta:moment().format("YYYY-MM-DD"),numeroOrden:"",ordenes:[],ordenSeleccionada:null,pacienteBusqueda:"",seccionId:"",sucursalId:this.datos.sucursalDefectoId,tipoAtencionId:"",grupoId:"",examenId:"",validandoReporte:!1,urlPrevio:"",subempresas:[],paginacion:{url:"",totalRegistros:0},procesandoOrden:!1}},props:["datos"],mounted:function(){$("body").tooltip({selector:'[rel="tooltip"]',container:"body",trigger:"hover"}),this.numeroOrden=0!==this.datos.numeroOrden?this.datos.numeroOrden:"",this.datos.urlPrevio&&this.datos.urlPrevio.includes("/ordenes")&&(this.urlPrevio=this.datos.urlPrevio),this.datos.empresaDefectoId&&!this.$can("cambiar-empresas")&&(this.empresaId=this.datos.empresaDefectoId),this.numeroOrden&&(this.fechaDesde="",this.fechaHasta="",this.buscarOrdenes())},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},abrirEnviarCorreo:function(e){if(this.ordenSeleccionada.paciente.correo)if(0===this.ordenSeleccionada.saldo||this.ordenSeleccionada.subempresa.empresa.mostrar_ordenes_impagas){var t={"forma-entrega":"CORREO",orden:this.ordenSeleccionada,destinatario:this.ordenSeleccionada?this.ordenSeleccionada.paciente.correo:"","detalles-ordenes":[]};"POR_EXAMEN"===e&&(t["detalles-ordenes"]=this.detallesOrdenSeleccionada.filter((function(e){var t=e.estado;return["X","L","V"].includes(t)})).map((function(e){return{id:e.id,examen:e.examen.nombre}})));var a=(0,m.MD)(t);$("#entregarResultadosModal").modal({backdrop:"static",keyboard:!1},a)}else this.mostrarErrores("La orden tiene saldo pendiente");else this.mostrarErrores("El paciente no tiene correo registrado")},abrirEnviarWhatsapp:function(){if(this.ordenSeleccionada.paciente.telefono_celular)if(0===this.ordenSeleccionada.saldo||this.ordenSeleccionada.subempresa.empresa.mostrar_ordenes_impagas){var e={"forma-entrega":"WHATSAPP",orden:this.ordenSeleccionada,destinatario:this.ordenSeleccionada?this.ordenSeleccionada.paciente.telefono_celular:""},t=(0,m.MD)(e);$("#entregarResultadosModal").modal({backdrop:"static",keyboard:!1},t)}else this.mostrarErrores("La orden tiene saldo pendiente");else this.mostrarErrores("El paciente no tiene teléfono celular registrado")},correoElectronicoEnviado:function(e){e&&this.$refs.alerta.mostrarAlerta("success","Correo electrónico enviado")},whatsappEnviado:function(e){e&&this.$refs.alerta.mostrarAlerta("success","Mensaje generado para envío desde WhatsApp")},actualizarDetallesOrdenSeleccionada:function(e){var t=this;this.detallesOrdenSeleccionada=e,0===e.length&&this.ordenSeleccionada&&(this.ordenes=this.ordenes.filter((function(e){return e.id!==t.ordenSeleccionada.id})),this.ordenSeleccionada=null)},actualizarOrden:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Resultados guardados";this.ordenSeleccionada&&axios.get("/api/ordenes/".concat(this.ordenSeleccionada.id)).then((function(a){var r=a.data.data,o=e.ordenes.findIndex((function(e){return e.id===r.id}));-1!==o&&(e.ordenes[o].estado=r.estado,e.$refs.alerta.mostrarAlerta("success",t))}))},resultadoEnviado:function(e){if(e.erroresHomologacion.length>0&&this.mostrarAdvertencia(e.erroresHomologacion),e.examenesProcesados>0&&e.examenesProcesados>=e.totalExamenes){var t=["Resultados enviados a ".concat(this.ordenSeleccionada.sistema_externo.nombre),"Exámenes enviados: ".concat(e.examenesProcesados,"/").concat(e.totalExamenes)];this.mostrarExito(t)}if(e.examenesProcesados>=0&&e.examenesProcesados<e.totalExamenes){var a=["No se enviaron algunos resultados a ".concat(this.ordenSeleccionada.sistema_externo.nombre),"Exámenes enviados: ".concat(e.examenesProcesados,"/").concat(e.totalExamenes)];this.mostrarAdvertencia(a)}e.errores>0&&this.mostrarErrores("Error al enviar resultados a ".concat(this.ordenSeleccionada.sistema_externo.nombre),e.mensajes),_.isEmpty(e.mensajesInformativos)||this.mostrarInformativo(e.mensajesInformativos),e.examenesProcesados<1&&this.mostrarInformativo("No se envio ningun resultado")},bloquearOrdenes:function(){this.procesandoOrden=!0},desbloquearOrdenes:function(){this.procesandoOrden=!1},buscarOrdenes:function(){this.ordenes=[],this.ordenSeleccionada=null,this.detallesOrdenSeleccionada=[],this.filtrosDetallesOrden=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.filtros),this.numeroOrden=this.sanitizarNumeroOrden(this.numeroOrden),this.filtrosBuscarOrdenes.numerosOrdenes=this.numeroOrden,this.filtrosBuscarOrdenes.pacienteBusqueda=this.pacienteBusqueda,this.filtrosBuscarOrdenes.fechaDesde=this.numeroOrden?"":this.fechaDesde,this.filtrosBuscarOrdenes.fechaHasta=this.numeroOrden?"":this.fechaHasta,this.filtrosBuscarOrdenes.sucursalId=this.sucursalId,this.filtrosBuscarOrdenes.seccionId=this.seccionId,this.filtrosBuscarOrdenes.estadosDetalles=[],this.filtrosBuscarOrdenes.empresaId=this.empresaId,this.filtrosBuscarOrdenes.subempresaId=this.subempresaId,this.filtrosBuscarOrdenes.tipoAtencionId=this.tipoAtencionId,this.filtrosBuscarOrdenes.examenId=this.examenId,this.filtrosBuscarOrdenes.grupoId=this.grupoId,this.filtrosBuscarOrdenes.orden="desc",this.estado&&"P"!==this.estado&&this.filtrosBuscarOrdenes.estadosDetalles.push(this.estado),"P"===this.estado&&(this.filtrosBuscarOrdenes.estadosDetalles=[E.RI.GENERADO,E.RI.REPORTADO,E.RI.PRELIMINAR]),this.paginacion.url="/api/ordenes/buscar",this.cargarOrdenes()},cargarOrdenes:function(){var e=this;if(this.paginacion.url){this.cargandoOrdenes=!0;var t=null;"/api/ordenes/buscar"===this.paginacion.url&&((t=this.filtrosBuscarOrdenes).soloSeccionesPermitidas=1),axios.get(this.paginacion.url,{params:t}).then((function(t){e.paginacion.url=t.data.data.next_page_url,t.data.total_registros&&(e.paginacion.totalRegistros=t.data.total_registros),t.data.data.data.forEach((function(t){Vue.set(t,"cargando",!1),Vue.set(t,"key",0),e.ordenes.push(t)})),e.paginacion.url||(e.paginacion.totalRegistros=e.ordenes.length),1===e.ordenes.length&&e.seleccionarOrden(e.ordenes[0])})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar órdenes",a)})).then((function(){return e.cargandoOrdenes=!1}))}},borrarFiltros:function(){this.numeroOrden="",this.pacienteBusqueda="",this.estado="",this.$can("cambiar-sucursal")&&(this.sucursalId=""),this.$can("cambiar-empresas")&&(this.empresaId=""),this.subempresaId=[],this.subempresas=[],this.seccionId="",this.tipoAtencionId="",this.examenId="",this.grupoId="",this.fechaDesde=moment().format("YYYY-MM-DD"),this.fechaHasta=moment().format("YYYY-MM-DD")},copiarFecha:function(){this.fechaDesde&&(this.fechaHasta=this.fechaDesde)},mostrarErroresPeticiones:function(e){e?401!==e.status?404!==e.status?this.$refs.alerta.mostrarAlerta("danger","Error",e.data.errors):this.$refs.alerta.mostrarAlerta("danger","Es posible que el examen ya no exista en la orden"):this.redireccionar():this.$refs.alerta.mostrarAlerta("danger","Error no determinado")},nombrePacienteOrden:function(e){var t="";return e.es_humano&&(t=_.toUpper(e.paciente.apellidos)+", "+_.startCase(_.toLower(e.paciente.nombres))),e.es_animal&&(t=_.startCase(_.toLower(e.paciente.nombre))+(e.paciente.raza?"("+e.paciente.raza.padre.nombre+" - "+e.paciente.raza.nombre+")":"")),e.es_objeto&&(t=_.startCase(_.toLower(e.paciente.descripcion))),t},redireccionar:function(){window.location.href="/ordenes"},seleccionarOrden:function(e){this.detallesOrdenSeleccionada=[],this.ordenSeleccionada=e,this.ordenSeleccionada.key++},cargarOrden:function(e){var t=this;if(e){e.cargando=!0,axios.get("/api/ordenes/".concat(e.id),{params:{incluir:["paciente","subempresa.empresa","sala","tipoAtencion","sistemaExterno","medico","planSalud:id,nombre","sucursal:id,extras"]}}).then((function(a){var r=a.data.data;r.key++,t.ordenSeleccionada=r;var o=t.ordenes.findIndex((function(t){return t.id===e.id}));Vue.set(t.ordenes,o,r)})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar orden",a)})).then((function(){return e.cargando=!1}))}},correoElectronicoCertificadoEnviado:function(e){this.$refs.alerta.mostrarAlerta("success","Correo electrónico con certificado enviado")},abrirModalImprimir:function(e){var t={registro:this.ordenSeleccionada,tipoDocumento:e,tamanoPapel:this.datos.tamanoPapelReporte,existenExamenesValidados:this.existenExamenesValidados()};$("#modalImprimir").modal({backdrop:"static"},t)},documentoImpreso:function(e){if(e)this.mostrarExito(e.mensajes);else{this.mostrarExito(["Impresión enviada"])}},existenExamenesValidados:function(){return!(!this.ordenSeleccionada||!this.detallesOrdenSeleccionada)&&this.detallesOrdenSeleccionada.reduce((function(e,t){var a=t.estado;return["X","L","V"].includes(a)?e+=1:e}),0)>0},regresar:function(){this.urlPrevio&&this.urlPrevio.includes("/ordenes")?window.location.href=this.urlPrevio:window.history.back()},alternarOrden:function(){this.ordenes=[],this.ordenSeleccionada=null,this.detallesOrdenSeleccionada=[],this.filtrosBuscarOrdenes.orden="asc"===this.filtrosBuscarOrdenes.orden?"desc":"asc",this.paginacion.url="/api/ordenes/buscar",this.cargarOrdenes()},cambioEmpresa:function(){var e=this;this.subempresaId="",this.empresaId?axios.get("/api/empresas/".concat(this.empresaId,"/subempresas")).then((function(t){var a=t.data.data;return e.subempresas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar categorías",a)})):this.subempresas=[]},abrirModalResultados:function(){var e=(0,m.MD)({orden:this.ordenSeleccionada});$("#modalResultados").modal({backdrop:"static"},e)},abrirModalBuscarDocumentos:function(){var e={orden:this.ordenSeleccionada};$("#buscarDocumentosModal").modal({backdrop:"static"},e)}},computed:{existenExamenesParaImprimir:function(){return!(!this.ordenSeleccionada||!this.detallesOrdenSeleccionada)&&this.detallesOrdenSeleccionada.reduce((function(e,t){var a=t.estado;return["X","L","V","R"].includes(a)?e+=1:e}),0)>0},existenExamenesParaEnvio:function(){return!(!this.ordenSeleccionada||!this.detallesOrdenSeleccionada)&&this.detallesOrdenSeleccionada.reduce((function(e,t){var a=t.estado;return["X","L","V"].includes(a)?e+=1:e}),0)>0},filtros:function(){return{estado:this.estado,examenId:this.examenId,grupoId:this.grupoId,seccionId:this.seccionId}},existeFiltro:function(){return""!==this.estado||""!==this.seccionId||""!==this.empresaId||""!==this.tipoAtencionId||this.examenId||""!==this.grupoId}}};var D=a(7222),R={insert:"head",singleton:!1};i()(D.Z,R);D.Z.locals;const M=(0,c.Z)(I,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta",attrs:{top:20}}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Resultados y validación\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.imprimir,expression:"datos.permisos.imprimir"}]},[t("button",{staticClass:"btn btn-default",attrs:{disabled:!e.existenExamenesParaImprimir||e.cargandoOrdenes,type:"button"},on:{click:function(t){return e.abrirModalImprimir("resultados")}}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Imprimir\n          ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{disabled:!e.existenExamenesParaImprimir||e.cargandoOrdenes,id:"verResultados",type:"button"},on:{click:e.abrirModalResultados}},[t("i",{staticClass:"fas fa-eye fa-fw"}),e._v(" \n            Ver\n          ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.imprimir,expression:"datos.permisos.imprimir"}]},[t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:!(e.ordenSeleccionada&&e.existenExamenesParaEnvio)}},[t("i",{staticClass:"far fa-envelope fa-fw"}),e._v(" Correo "),t("span",{staticClass:"caret"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu",staticStyle:{"margin-top":"-4px"}},[t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return e.abrirEnviarCorreo("TODOS")}}},[e._v("Todos")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){return e.abrirEnviarCorreo("POR_EXAMEN")}}},[e._v("Por Selección")])])])])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.imprimir,expression:"datos.permisos.imprimir"}]},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",rel:"tooltip",title:"WhatsApp","data-placement":"bottom","data-toggle":"modal",disabled:!(e.ordenSeleccionada&&e.existenExamenesParaEnvio)},on:{click:e.abrirEnviarWhatsapp}},[t("i",{staticClass:"fab fa-whatsapp fa-fw"}),e._v(" \n          ")])]),e._v(" "),t("li",[t("div",{staticClass:"btn-group"},[t("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","data-placement":"bottom",rel:"tooltip",title:"Más opciones",disabled:e.cargandoOrdenes||!e.ordenSeleccionada,"aria-haspopup":"true"}},[t("i",{staticClass:"fas fa-ellipsis-v fa-fw"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu dropdown-menu-right",staticStyle:{"margin-top":"-4px"}},[t("li",[t("a",{staticClass:"puntero",on:{click:function(t){return e.abrirModalImprimir("etiquetas")}}},[t("i",{staticClass:"fas fa-barcode fa-fw text-gris"}),e._v("  Imprimir etiquetas\n                ")])]),e._v(" "),t("li",[t("a",{staticClass:"puntero",on:{click:e.abrirModalBuscarDocumentos}},[t("i",{staticClass:"fas fa-file fa-fw text-gris"}),e._v("  Documentos\n                ")])]),e._v(" "),t("li",[t("a",{staticClass:"puntero",attrs:{"data-toggle":"modal","data-target":"#verAuditoriasModal"}},[t("i",{staticClass:"fas fa-fingerprint fa-fw text-gris"}),e._v("  Auditoría\n                ")])])])])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{title:"Regresar"},on:{click:e.regresar}},[t("i",{staticClass:"fas fa-arrow-left"})])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("scroll-infinito",{staticClass:"col-md-3 scroll-vertical",attrs:{"nombre-lista":"órdenes","existen-mas-registros":null!=e.paginacion.url,"cantidad-registros":e.ordenes.length,cargando:e.cargandoOrdenes},on:{"cargar-datos":e.cargarOrdenes}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"panel panel-oscuro"},[t("div",{staticClass:"panel-heading sticky-top"},[e._v("Búsqueda")]),e._v(" "),t("div",{staticClass:"panel-body"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.buscarOrdenes.apply(null,arguments)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.numeroOrden,expression:"numeroOrden"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"numeroOrden",placeholder:"Número de orden"},domProps:{value:e.numeroOrden},on:{input:function(t){t.target.composing||(e.numeroOrden=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row",staticStyle:{"padding-top":"10px"}},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.pacienteBusqueda,expression:"pacienteBusqueda"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"pacienteOrden",placeholder:"Nombre o identificación del paciente"},domProps:{value:e.pacienteBusqueda},on:{input:function(t){t.target.composing||(e.pacienteBusqueda=t.target.value)}}})])]),e._v(" "),t("legend",{staticClass:"separador-flecha"},[t("h4",{staticClass:"collapsed",attrs:{role:"button","data-toggle":"collapse","data-target":"#collapseFiltros","aria-expanded":"false","aria-controls":"collapseFiltros"}},[e._v("\n                    Filtros\n                    "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.existeFiltro,expression:"existeFiltro"}],staticClass:"fas fa-filter fa-xs",attrs:{"aria-hidden":"true",rel:"tooltip",title:"Existe filtro"}})])]),e._v(" "),t("div",{staticClass:"collapse",attrs:{id:"collapseFiltros"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12"},[t("label",{staticClass:"control-label",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.fechaDesde,expression:"fechaDesde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-orientation":"bottom","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd"}}),e._v(" "),t("span",{staticClass:"input-group-addon puntero",on:{click:e.copiarFecha}},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.fechaHasta,expression:"fechaHasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-orientation":"bottom","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}})])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6",staticStyle:{"padding-top":"10px"}},[t("label",{attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"sucursal_id",placeholder:"Todos",disabled:!e.$can("cambiar-sucursal"),options:e.datos.sucursales,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.sucursalId,callback:function(t){e.sucursalId=t},expression:"sucursalId"}})],1),e._v(" "),t("div",{staticClass:"col-md-6",staticStyle:{"padding-top":"10px"}},[t("label",{attrs:{for:"estado"}},[e._v("Estado")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.estado,expression:"estado"}],staticClass:"form-control input-sm",attrs:{id:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.estado=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.estados,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                          "+e._s(a.nombre)+"\n                        ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6 vs-personalizado",staticStyle:{"padding-top":"10px"}},[t("label",{attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",placeholder:"Todos",label:"nombre",disabled:!e.$can("cambiar-empresas"),clearable:e.$can("cambiar-empresas"),autoscroll:!0,options:e.datos.empresas,reduce:function(e){return e.id}},on:{input:e.cambioEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresaId,callback:function(t){e.empresaId=t},expression:"empresaId"}})],1),e._v(" "),t("div",{staticClass:"col-md-6",staticStyle:{"padding-top":"10px"}},[t("label",{attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"subempresa_id",placeholder:"Todos",label:"nombre",autoscroll:!0,options:e.subempresas,reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.subempresaId,callback:function(t){e.subempresaId=t},expression:"subempresaId"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6 vs-personalizado",staticStyle:{"padding-top":"10px"}},[t("label",{attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:e.datos.secciones.length>0?"Todas":"Ninguna",options:e.datos.secciones,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.seccionId,callback:function(t){e.seccionId=t},expression:"seccionId"}})],1),e._v(" "),t("div",{staticClass:"col-md-6",staticStyle:{"padding-top":"10px"}},[t("label",{attrs:{for:"tipo_atencion_id"}},[e._v("Atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.tipoAtencionId,expression:"tipoAtencionId"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.tipoAtencionId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.datos.tiposAtencion,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                          "+e._s(a.nombre)+"\n                        ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6 vs-personalizado",staticStyle:{"padding-top":"10px"}},[t("label",{attrs:{for:"examen_id"}},[e._v("Examen")]),e._v(" "),t("select-examenes",{attrs:{id:"examen_id",catalogo:"EXAMENES","tamano-busqueda":2,etiqueta:"nombre"},model:{value:e.examenId,callback:function(t){e.examenId=t},expression:"examenId"}})],1),e._v(" "),t("div",{staticClass:"col-md-6",staticStyle:{"padding-top":"10px"}},[t("label",{attrs:{for:"grupo_id"}},[e._v("Grupo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.grupoId,expression:"grupoId"}],staticClass:"form-control input-sm",attrs:{id:"grupo_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.grupoId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.datos.grupos,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                          "+e._s(a.nombre)+"\n                        ")])}))],2)])])]),e._v(" "),t("div",{staticClass:"row",staticStyle:{"padding-top":"10px"}},[t("div",{staticClass:"col-md-12"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit",disabled:e.cargandoOrdenes||e.procesandoOrden}},[t("i",{staticClass:"fas fa-search fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Buscar\n                    ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[e._v("\n                      Borrar filtros\n                    ")])])])])])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"panel panel-oscuro",staticStyle:{"margin-bottom":"0","border-bottom":"none"}},[t("div",{staticClass:"panel-heading sticky-top"},[e._v("\n              Órdenes\n\n              "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.ordenes.length>1,expression:"ordenes.length > 1"}],staticClass:"badge cursor-menu"},[e._v("\n                "+e._s(e.paginacion.totalRegistros)+"\n              ")]),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.ordenes.length>1,expression:"ordenes.length > 1"}],staticClass:"fas fa-sm puntero",class:{"fa-sort-up":"asc"===e.filtrosBuscarOrdenes.orden,"fa-sort-down":"desc"===e.filtrosBuscarOrdenes.orden},staticStyle:{color:"white"},attrs:{title:"Ordenamiento ".concat(e.filtrosBuscarOrdenes.orden)},on:{click:e.alternarOrden}})]),e._v(" "),e.ordenes.length>0?t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-hover table-condensed",staticStyle:{overflow:"hidden"}},[t("tbody",e._l(e.ordenes,(function(a){return t("tr",{staticClass:"cursor-menu",class:{seleccionada:a.id===(e.ordenSeleccionada?e.ordenSeleccionada.id:null)}},[t("td",{staticClass:"text-truncate",class:{bloqueada:e.procesandoOrden}},[t("div",{on:{click:function(t){return e.seleccionarOrden(a)}}},[t("div",{staticClass:"flex justify-between items-center"},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"text-muted",staticStyle:{"font-size":"13px"},domProps:{innerHTML:e._s(e.$options.filters.numeroOrden(a.numero_orden,e.$configs))}}),e._v(" "),a.numero_orden_externa?t("small",[e._v(" ("+e._s(a.numero_orden_externa)+")")]):e._e(),e._v(" "),a.tipo_atencion&&a.tipo_atencion.urgente?t("span",{staticClass:"label label-danger",staticStyle:{"margin-left":"3px"},attrs:{rel:"tooltip","data-html":"true",title:"<strong>Tipo atención urgente:</strong> ".concat(a.tipo_atencion.nombre)}},[e._v("\n                            "+e._s(a.tipo_atencion.nombre.substring(0,1))+"\n                          ")]):e._e(),e._v(" "),a.sala&&a.sala.urgente?t("span",{staticClass:"label label-danger",staticStyle:{"margin-left":"3px"},attrs:{rel:"tooltip","data-html":"true",title:"<strong>Servicio urgente:</strong> ".concat(a.sala.nombre)}},[e._v("\n                            "+e._s(a.sala.nombre.substring(0,1))+"\n                          ")]):e._e(),e._v(" "),a.laboratorio_id?t("i",{staticClass:"fas fa-shipping-fast",staticStyle:{"padding-left":"4px"},attrs:{rel:"tooltip","data-placement":"right",title:"Remisión"}}):e._e(),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:e.ordenSeleccionada&&e.ordenSeleccionada.id===a.id,expression:"ordenSeleccionada && ordenSeleccionada.id === orden.id"}],staticClass:"no-salto-linea puntero",staticStyle:{"padding-left":"4px"},attrs:{rel:"tooltip",title:"Volver a cargar datos de orden"},on:{click:function(t){return e.cargarOrden(a)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!a.cargando,expression:"!orden.cargando"}],staticClass:"fas fa-sync-alt fa-xs text-gris"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.cargando,expression:"orden.cargando"}],staticClass:"fas fa-spinner fa-xs fa-spin fa-fw text-gris",attrs:{"aria-hidden":"true",title:"Cargando orden"}})])]),e._v(" "),t("orden-estado",{attrs:{estado:a.estado}})],1),e._v(" "),t("div",{attrs:{title:e.nombrePacienteOrden(a)}},[e._v("\n                        "+e._s(e.nombrePacienteOrden(a))+"\n                      ")])])])])})),0)])]):e._e()])])])]),e._v(" "),t("div",{staticClass:"col-md-9 scroll-vertical"},[t("PacienteOrden",{attrs:{orden:e.ordenSeleccionada?e.ordenSeleccionada:{},configuracion:e.datos?e.datos:{}},on:{exito:e.mostrarExito,error:e.mostrarErrores}}),e._v(" "),t("ExamenesOrden",{attrs:{filtros:e.filtrosDetallesOrden,orden:e.ordenSeleccionada,datos:e.datos},on:{"resultado-guardado":e.actualizarOrden,"resultado-enviado":e.resultadoEnviado,"examenes-validados":e.actualizarOrden,"detalles-orden-modificado":e.actualizarDetallesOrdenSeleccionada,"inicio-procesamiento":e.bloquearOrdenes,"fin-procesamiento":e.desbloquearOrdenes,"error-guardar-resultado":e.mostrarErroresPeticiones,error:e.mostrarErrores}})],1)],1),e._v(" "),t("entregar-resultados-modal",{on:{"whatsapp-enviado":e.whatsappEnviado,"correo-electronico-enviado":e.correoElectronicoEnviado}}),e._v(" "),t("ver-auditorias-modal",{attrs:{"orden-id":e.ordenSeleccionada?e.ordenSeleccionada.id:"",tipo:"resultados"}}),e._v(" "),t("pdf-certificado-modal",{attrs:{"permiso-imprimir":e.datos.permisos.imprimir,"resultado-con-membrete":e.datos.resultadoConMembrete},on:{"correo-electronico-certificado-enviado":e.correoElectronicoCertificadoEnviado}}),e._v(" "),t("imprimir-modal",{attrs:{"url-api-local":e.datos.urlApiLocal,"mostrar-incluir-membrete":e.datos.resultadoConMembrete},on:{"documento-impreso":e.documentoImpreso}}),e._v(" "),t("resultados-modal"),e._v(" "),t("buscar-documentos-modal",{attrs:{"orden-id":e.ordenSeleccionada?e.ordenSeleccionada.id:"","tamano-papel-reporte":e.datos.tamanoPapelReporte}})],1)}),[],!1,null,"284f2633",null).exports},5158:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});const r=a(5897).Z;var o=a(3379),i=a.n(o),s=a(6580),n={insert:"head",singleton:!1};i()(s.Z,n);s.Z.locals;const c=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta",attrs:{top:20}}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Resultados y validación\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.imprimir,expression:"datos.permisos.imprimir"}]},[t("button",{staticClass:"btn btn-default",attrs:{disabled:!e.existenExamenesParaImprimir,type:"button"},on:{click:e.abrirModalImprimir}},[t("i",{staticClass:"fas fa-print fa-fw"}),e._v("\n             Imprimir\n          ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{disabled:!e.existenExamenesParaImprimir||e.cargandoOrdenes,id:"verResultados",type:"button"},on:{click:e.abrirModalResultados}},[t("i",{staticClass:"fas fa-eye fa-fw"}),e._v(" \n            Ver\n          ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.imprimir,expression:"datos.permisos.imprimir"}]},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:!(e.ordenSeleccionada&&e.existenExamenesParaCorreo),"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},on:{click:e.abrirEnviarCorreo}},[t("i",{staticClass:"far fa-envelope fa-fw"}),e._v(" Enviar correo\n          ")])]),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.imprimir,expression:"datos.permisos.imprimir"}]},[t("button",{staticClass:"btn btn-default",attrs:{disabled:e.cargandoOrdenes,type:"button"},on:{click:e.abrirModalBuscarDocumentos}},[t("i",{staticClass:"fas fa-file fa-fw"})])]),e._v(" "),t("li",[e.ordenSeleccionada?t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#verAuditoriasModal"}},[t("i",{staticClass:"fas fa-fingerprint"}),e._v("\n            Auditoría\n          ")]):e._e()]),e._v(" "),t("li",[t("a",{directives:[{name:"show",rawName:"v-show",value:e.urlPrevio,expression:"urlPrevio"}],staticClass:"btn btn-default",attrs:{title:"Regresar"},on:{click:e.regresar}},[t("i",{staticClass:"fas fa-arrow-left"})])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 scroll-vertical"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"panel panel-oscuro"},[t("div",{staticClass:"panel-heading"},[e._v("Búsqueda")]),e._v(" "),t("div",{staticClass:"panel-body"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.buscarOrdenes.apply(null,arguments)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.numeroOrden,expression:"numeroOrden"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"numeroOrden",placeholder:"Número de orden"},domProps:{value:e.numeroOrden},on:{input:function(t){t.target.composing||(e.numeroOrden=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row",staticStyle:{"padding-top":"10px"}},[t("div",{staticClass:"col-md-12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.pacienteBusqueda,expression:"pacienteBusqueda"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"pacienteOrden",placeholder:"Nombre o Identificación del paciente"},domProps:{value:e.pacienteBusqueda},on:{input:function(t){t.target.composing||(e.pacienteBusqueda=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row",staticStyle:{"padding-top":"10px"}},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"panel-group",staticStyle:{"margin-bottom":"10px"},attrs:{id:"accordion",role:"tablist","aria-multiselectable":"true"}},[t("div",{staticClass:"panel panel-default"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-collapse collapse",attrs:{id:"collapseOne",role:"tabpanel","aria-labelledby":"headingOne"}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6"},[t("label",{attrs:{for:"fecha_desde"}},[e._v("Fecha desde")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.fechaDesde,expression:"fechaDesde"}],staticClass:"form-control input-sm cursor-menu",attrs:{id:"fecha_desde","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-orientation":"bottom","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",readonly:""}})]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("label",{attrs:{for:"fecha_hasta"}},[e._v("Fecha hasta")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.fechaHasta,expression:"fechaHasta"}],staticClass:"form-control input-sm cursor-menu",attrs:{id:"fecha_hasta","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-orientation":"bottom","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",readonly:""}})])]),e._v(" "),t("div",{staticClass:"row",staticStyle:{"padding-top":"10px"}},[t("div",{staticClass:"col-md-12"},[t("label",{attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Todas",options:e.datos.secciones,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.seccionId,callback:function(t){e.seccionId=t},expression:"seccionId"}})],1)]),e._v(" "),t("div",{staticClass:"row",staticStyle:{"padding-top":"10px"}},[t("div",{staticClass:"col-md-6"},[t("label",{attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.sucursalId,expression:"sucursalId"}],staticClass:"form-control input-sm",attrs:{id:"sucursal_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.sucursalId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Todas")]),e._v(" "),e._l(e.datos.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                                    "+e._s(a.nombre)+"\n                                  ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("label",{attrs:{for:"estado"}},[e._v("Estado")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.estado,expression:"estado"}],staticClass:"form-control input-sm",attrs:{id:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.estado=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.estados,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                                    "+e._s(a.nombre)+"\n                                  ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row",staticStyle:{"padding-top":"10px"}},[t("div",{staticClass:"col-md-6"},[t("label",{attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.empresaId,expression:"empresaId"}],staticClass:"form-control input-sm",attrs:{id:"empresa_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.empresaId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Todas")]),e._v(" "),e._l(e.datos.empresas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                                    "+e._s(a.nombre)+"\n                                  ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("label",{attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.tipoAtencionId,expression:"tipoAtencionId"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.tipoAtencionId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.datos.tiposAtencion,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                                    "+e._s(a.nombre)+"\n                                  ")])}))],2)])])])])])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[e._m(1),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[e._v("\n                      Borrar filtros\n                    ")])])])])])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"panel panel-oscuro"},[t("div",{staticClass:"panel-heading"},[e._v("Órdenes")]),e._v(" "),e.ordenes.length>0?t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-hover table-condensed",staticStyle:{overflow:"hidden"}},[t("tbody",e._l(e.ordenes,(function(a){return t("tr",{staticClass:"cursor-menu",class:{seleccionada:a.id===(e.ordenSeleccionada?e.ordenSeleccionada.id:null)},on:{click:function(t){return e.seleccionarOrden(a)}}},[t("td",{staticClass:"text-truncate"},[t("div",{staticClass:"estado-orden-no-auto",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("small",{staticClass:"text-muted",attrs:{title:a.numero_orden}},[e._v(e._s(a.numero_orden))]),e._v(" "),a.tipo_atencion&&a.tipo_atencion.urgente?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"padding-left":"10px"},attrs:{title:"Orden urgente"}}):e._e()]),e._v(" "),t("orden-estado",{attrs:{estado:a.estado}})],1),e._v(" "),t("div",{attrs:{title:e.nombrePacienteOrden(a)}},[e._v("\n                      "+e._s(e.nombrePacienteOrden(a))+"\n                    ")])])])})),0)])]):e._e(),e._v(" "),0!==e.ordenes.length||e.cargandoOrdenes?e._e():t("div",{staticClass:"panel-body"},[e._v("\n              No existen órdenes con los filtros especificados\n            ")]),e._v(" "),e.cargandoOrdenes?t("div",{staticClass:"panel-body"},[e._m(2)]):e._e()])])])]),e._v(" "),t("div",{staticClass:"col-md-9 scroll-vertical"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"panel panel-gris"},[t("div",{staticClass:"panel-heading"},[e.ordenSeleccionada?e._e():[e._v("\n                Paciente\n              ")],e._v(" "),e.ordenSeleccionada?t("datos-orden",{attrs:{"mostrar-numero-orden":!1,"mostrar-numero-orden-externa":e.datos.mostrarOrdenExterna,"mostrar-fecha-orden":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!0,"mostrar-edad":!0,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,"mostrar-historia-clinica":!0,"mostrar-saldo":e.ordenSeleccionada&&e.ordenSeleccionada.subempresa&&e.ordenSeleccionada.subempresa.empresa&&e.ordenSeleccionada.subempresa.empresa.mostrar_valores_orden_en_reportes,orden:e.ordenSeleccionada}}):e._e()],2),e._v(" "),e.ordenSeleccionada?t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 form-group"},[t("label",[e._v("Cliente")]),e._v(" "),t("p",[e._v("\n                    "+e._s(e.subempresa.empresa.nombre+(e.subempresa.empresa.nombre!==e.subempresa.nombre?" ("+e.subempresa.nombre+")":""))+"\n                  ")])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Servicio")]),e._v(" "),t("p",[e._v(e._s(e.tipoAtencion?e.tipoAtencion.nombre:"-"))])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Servicio")]),e._v(" "),t("p",[e._v(e._s(e.sala?e.sala.nombre:"-"))])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Plan Salud")]),e._v(" "),t("p",[e._v(e._s(e.planSalud?e.planSalud.nombre:"-"))])]),e._v(" "),t("div",{staticClass:"col-md-2 form-group"},[t("label",[e._v("Médico")]),e._v(" "),t("p",[e._v(e._s(e.nombreMedico))])]),e._v(" "),e.ordenSeleccionada.embarazada?t("div",{staticClass:"col-md-1 form-group"},[t("label",[e._v("Embarazada")]),e._v(" "),t("p",{staticClass:"no-salto-linea"},[e._v(e._s(e.embarazada))])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"form-group"},[e.ordenSeleccionada.es_humano?t("div",{staticClass:"col-md-4"},[t("label",[e._v("Datos clínicos")]),e._v(" "),t("textarea",{staticClass:"form-control",attrs:{rows:"2",disabled:""}},[e._v(e._s(e.paciente.datos_clinicos))])]):e._e(),e._v(" "),t("div",{staticClass:"col-md-4"},[t("label",[e._v("Observaciones recibo")]),e._v(" "),t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Guardar Observación"},on:{click:e.guardarObservacionesRecibo}},[t("i",{staticClass:"fas fa-save"})]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ordenSeleccionada.observaciones_orden,expression:"ordenSeleccionada.observaciones_orden"}],staticClass:"form-control",attrs:{rows:"2"},domProps:{value:e.ordenSeleccionada.observaciones_orden},on:{input:function(t){t.target.composing||e.$set(e.ordenSeleccionada,"observaciones_orden",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-4"},[t("label",[e._v("Observaciones laboratorista")]),e._v(" "),t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Guardar Observación"},on:{click:e.guardarObservacionesLaboratorista}},[t("i",{staticClass:"fas fa-save"})]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ordenSeleccionada.observaciones_hoja_trabajo,expression:"ordenSeleccionada.observaciones_hoja_trabajo"}],staticClass:"form-control",attrs:{rows:"2"},domProps:{value:e.ordenSeleccionada.observaciones_hoja_trabajo},on:{input:function(t){t.target.composing||e.$set(e.ordenSeleccionada,"observaciones_hoja_trabajo",t.target.value)}}})])])])]):t("div",{staticClass:"panel-body"},[e._v("\n              Por favor seleccione una orden\n            ")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4"},[t("div",{staticClass:"panel panel-gris"},[t("div",{staticClass:"panel-heading",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("div",[e._v("Exámenes")]),e._v(" "),t("div",[t("button",{directives:[{name:"show",rawName:"v-show",value:e.datos.permisos.validar&&e.exameneReportados.length>0,expression:"datos.permisos.validar && exameneReportados.length > 0"}],staticClass:"btn btn-default btn-sm",attrs:{type:"button",title:"Valida exámenes reportados",disabled:e.validandoReporte},on:{click:e.validarTodosReportes}},[e.validandoReporte?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-check fa-fw"}),e._v(" Validar Todos\n                ")])])]),e._v(" "),e.ordenSeleccionada?t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-hover table-condensed"},[t("tbody",e._l(e.detallesOrdenSeleccionada,(function(a){return t("tr",{staticClass:"cursor-menu",class:{seleccionada:a.id===(e.detalleOrdenSeleccionado?e.detalleOrdenSeleccionado.id:null)},on:{click:function(t){return e.seleccionarDetalleOrden(a)}}},[t("td",{staticClass:"text-truncate"},[t("div",[t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("small",{staticClass:"text-muted"},[e._v("\n                          "+e._s(a.examen.codigo)+"\n                          "),a.muestraPendiente?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"padding-left":"10px"},attrs:{title:"Muestra pendiente"}}):e._e()]),e._v(" "),t("detalle-orden-estado",{attrs:{estado:a.estado}})],1),e._v(" "),t("div",{attrs:{title:a.examen.nombre}},[e._v(e._s(a.examen.nombre))])])])])})),0)])]):e._e(),e._v(" "),e.ordenSeleccionada?e._e():t("div",{staticClass:"panel-body"},[e._v("\n              Por favor seleccione una orden\n            ")]),e._v(" "),e.ordenSeleccionada&&0===e.detallesOrdenSeleccionada.length&&!e.cargandoDetallesOrden?t("div",{staticClass:"panel-body"},[e._v("\n              No existen detalles para la orden seleccionada\n            ")]):e._e(),e._v(" "),e.cargandoDetallesOrden?t("div",{staticClass:"panel-body"},[e._m(3)]):e._e()])]),e._v(" "),t("div",{staticClass:"col-md-8"},[t("div",{staticClass:"panel panel-gris"},[t("div",{staticClass:"panel-heading"},[e._v("Resultados")]),e._v(" "),e.detalleOrdenSeleccionado&&!e.detalleOrdenSeleccionado.muestraPendiente?t("form",{on:{submit:function(t){return t.preventDefault(),e.guardarReportes.apply(null,arguments)}}},[t("fieldset",{attrs:{disabled:e.guardandoReporte||e.validandoReporte}},[t("div",{staticClass:"panel-body"},[t("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("div",[t("div",{staticClass:"form-inline"},[t("div",{staticClass:"form-group form-group-sm",staticStyle:{"margin-bottom":"0px"}},[t("label",{attrs:{for:"plantilla_id"}},[e._v("Plantilla")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.plantillaId,expression:"plantillaId"}],staticClass:"form-control",staticStyle:{width:"180px"},attrs:{id:"plantilla_id",disabled:e.existenCambiosEnReporte()},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.plantillaId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.filtrarPlantillas(e.examenSeleccionado.plantillas),(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                              "+e._s("A"===a.estado?a.nombre:a.nombre+"(Inactiva)")+"\n                            ")])}))],2)])])]),e._v(" "),t("div",[t("button",{directives:[{name:"show",rawName:"v-show",value:!e.edicionActivada&&""!=e.plantillaId&&e.esPlantillaActiva&&-1==["L","V"].indexOf(e.detalleOrdenSeleccionado.estado)&&e.datos.permisos.validar,expression:"!edicionActivada && plantillaId != '' && esPlantillaActiva && ['L', 'V'].indexOf(detalleOrdenSeleccionado.estado) == -1 && datos.permisos.validar"}],staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.validarReportes}},[e.validandoReporte?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):e._e(),e._v(" "),e.validandoReporte?e._e():t("i",{staticClass:"fas fa-check fa-fw"}),e._v(" Validar\n                      ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:(e.existenReportes()&&""!=e.plantillaId||e.existenCambiosEnReporte())&&e.puedeEditarReportes&&e.esPlantillaActiva,expression:"((existenReportes() && plantillaId != '') || existenCambiosEnReporte()) && puedeEditarReportes && esPlantillaActiva"}],class:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.editarReporte}},[t("i",{class:"fas fa-fw"+(e.edicionActivada?" fa-times":" fa-pencil-alt")}),e._v(e._s(e.edicionActivada?"Cancelar":"Editar")+"\n                      ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:!e.edicionActivada&&""!=e.plantillaId&&e.existenReportes()&&e.puedeEliminarReportes,expression:"!edicionActivada && plantillaId != '' && existenReportes() && puedeEliminarReportes"}],staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:e.eliminarReportes}},[e.guardandoReporte?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n                      ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.edicionActivada&&""!=e.plantillaId&&(e.datos.permisos.crear||e.datos.permisos.editar)&&e.esPlantillaActiva,expression:"edicionActivada && plantillaId != '' && (datos.permisos.crear || datos.permisos.editar) && esPlantillaActiva"}],staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[e.guardandoReporte?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):e._e(),e._v(" "),e.guardandoReporte?e._e():t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n                      ")])])]),e._v(" "),t("div",{staticClass:"col-md-6"}),e._v(" "),t("div",{staticClass:"col-md-6 text-right"})]),e._v(" "),t("div",{staticClass:"table-responsive"},[t("table",{directives:[{name:"show",rawName:"v-show",value:""!==e.plantillaId,expression:"plantillaId !== ''"}],staticClass:"table table-condensed"},[e._m(4),e._v(" "),t("tbody",e._l(e.reportes,(function(a){return t("tr",{attrs:{bgcolor:e.obtenerColorValoresReferenciaTipoParametroNumerico(a)}},["T"===a.tipo_parametro?t("td",{attrs:{colspan:"5"}},[t("strong",[e._v(e._s(a.nombre_parametro))])]):[t("td",{staticClass:"text-truncate",attrs:{title:a.nombre_parametro}},[e._v(e._s(a.nombre_parametro)+"\n                        ")]),e._v(" "),t("td",{attrs:{colspan:"E"===a.tipo_parametro?3:1}},[e.edicionActivada?e._e():[["N","S","X","F"].includes(a.tipo_parametro)?t("input",{directives:[{name:"model",rawName:"v-model",value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado,expression:"reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado"}],staticClass:"form-control input-xs text-center",attrs:{type:"text",disabled:!0},domProps:{value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado},on:{input:function(t){t.target.composing||e.$set(e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)],"resultado",t.target.value)}}}):e._e(),e._v(" "),"E"===a.tipo_parametro?t("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig,disabled:""},model:{value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado,callback:function(t){e.$set(e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)],"resultado",t)},expression:"reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado"}}):e._e(),e._v(" "),"G"===a.tipo_parametro?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.abrirGrafico(a.id)}}},[t("i",{staticClass:"fas fa-poll fa-fw"}),e._v(" Ver Gráfico\n                            ")]):e._e()],e._v(" "),e.edicionActivada?["N"===a.tipo_parametro?t("input",{directives:[{name:"model",rawName:"v-model",value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado,expression:"reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado"}],staticClass:"form-control input-xs text-center",attrs:{type:"number",step:"any",lang:"en"},domProps:{value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado},on:{input:function(t){t.target.composing||e.$set(e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)],"resultado",t.target.value)}}}):e._e(),e._v(" "),"F"===a.tipo_parametro?t("div",{staticStyle:{display:"flex"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado,expression:"reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado"}],staticClass:"form-control input-xs text-center",attrs:{type:"number",step:"any",lang:"en"},domProps:{value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado},on:{input:function(t){t.target.composing||e.$set(e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)],"resultado",t.target.value)}}}),e._v(" "),"F"===a.tipo_parametro?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Calcular"},on:{click:function(t){return e.calcularFormula(a)}}},[t("i",{staticClass:"fas fa-calculator"})]):e._e()]):e._e(),e._v(" "),"S"===a.tipo_parametro?t("select",{directives:[{name:"model",rawName:"v-model",value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado,expression:"reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado"}],staticClass:"form-control input-xs",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)],"resultado",t.target.multiple?r:r[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.obtenerOpciones(a.parametro_id),(function(a){return t("option",[e._v("\n                                "+e._s(a.nombre)+"\n                              ")])}))],2):e._e(),e._v(" "),"X"===a.tipo_parametro?t("input",{directives:[{name:"model",rawName:"v-model",value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado,expression:"reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado"}],staticClass:"form-control input-xs text-center",attrs:{type:"text",maxlength:"80"},domProps:{value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado},on:{input:function(t){t.target.composing||e.$set(e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)],"resultado",t.target.value)}}}):e._e(),e._v(" "),"E"===a.tipo_parametro?t("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig},model:{value:e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)].resultado,callback:function(t){e.$set(e.reportes[e.obtenerIndiceParametro(a.nombre_parametro,a.orden)],"resultado",t)},expression:"reportes[obtenerIndiceParametro(parametro.nombre_parametro, parametro.orden)].resultado"}}):e._e(),e._v(" "),"G"===a.tipo_parametro?t("span",[e._v("---")]):e._e()]:e._e()],2),e._v(" "),"E"!==a.tipo_parametro?t("td",{staticClass:"text-center"},[e._v("\n                          "+e._s(e.obtenerValoresReferencia(a))+"\n                        ")]):e._e(),e._v(" "),"E"!==a.tipo_parametro?t("td",{staticClass:"text-center"},[-1!==["N","S","X","F"].indexOf(a.tipo_parametro)?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",tabindex:"-1"},on:{click:function(t){return e.abrirHistorial(a)}}},[t("i",{staticClass:"fas fa-history"})]):e._e()]):e._e(),e._v(" "),t("td",{staticClass:"text-center",style:"L"===a.tipo_parametro?"height: 22px":""},[["N","S","X","E","F"].includes(a.tipo_parametro)?t("button",{class:"btn btn-xs"+(a.comentario?" btn-info":" btn-default"),attrs:{type:"button",tabindex:"-1"},on:{click:function(t){return e.abrirComentario(a)}}},[t("i",{staticClass:"fas fa-align-justify"})]):e._e()])]],2)})),0)])])])]):e._e(),e._v(" "),e.detalleOrdenSeleccionado&&e.detalleOrdenSeleccionado.muestraPendiente?t("div",{staticClass:"panel-body"},[e._v("\n              No es posible reportar los resultados porque la muestra está pendiente\n            ")]):e._e(),e._v(" "),e.detalleOrdenSeleccionado?e._e():t("div",{staticClass:"panel-body"},[e._v("\n              Por favor seleccione un examen\n            ")])])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalComentario",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(5),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.guardarComentario.apply(null,arguments)}}},[t("div",{staticClass:"modal-body"},[e.comentarios.length>0?t("div",{staticClass:"form-group"},[t("v-select",{directives:[{name:"show",rawName:"v-show",value:e.edicionActivada,expression:"edicionActivada"}],staticClass:"form-control input-sm",attrs:{id:"catalogoComentario",placeholder:"Seleccione un comentario...",options:e.comentarios,label:"nombre",reduce:function(e){return e.contenido}},on:{input:e.seleccionarComentario},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen comentarios")]},proxy:!0}],null,!1,1909277024),model:{value:e.comentarioSelecionado,callback:function(t){e.comentarioSelecionado=t},expression:"comentarioSelecionado"}})],1):e._e(),e._v(" "),e.edicionActivada?t("div",{staticClass:"editor"},[t("ckeditor",{attrs:{editor:e.editor,config:e.editorConfig,disabled:!e.edicionActivada},model:{value:e.comentario,callback:function(t){e.comentario=t},expression:"comentario"}})],1):t("div",{domProps:{innerHTML:e._s(e.comentario?e.comentario:"No tiene comentario registrado")}})]),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrarComentario}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v("Cerrar\n            ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:e.edicionActivada,expression:"edicionActivada"}],staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v("Guardar\n            ")])])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalHistorial",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",class:-1!==["N","F"].indexOf(e.parametroSeleccionado.tipo_parametro)?"modal-lg":"",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(6),e._v(" "),e.ordenSeleccionada&&e.ordenSeleccionada.es_humano?t("h5",[e._v("\n            "+e._s(e.mayusculas(e.paciente.apellidos)+", "+e.primerasLetrasMayusculas(e.paciente.nombres))+" ("+e._s(e.paciente.sexo)+", "+e._s(e.paciente.edad)+")\n          ")]):e._e(),e._v(" "),e.ordenSeleccionada&&e.ordenSeleccionada.es_animal?t("h5",[e._v("\n            "+e._s(e.primerasLetrasMayusculas(e.paciente.nombre)+(e.paciente.raza?" ("+e.paciente.raza.padre.nombre+" - "+e.paciente.raza.nombre+")":""))+" ("+e._s(e.paciente.sexo)+", "+e._s(e.paciente.edad)+")\n          ")]):e._e(),e._v(" "),e.ordenSeleccionada&&e.ordenSeleccionada.es_objeto?t("h5",[e._v("\n            "+e._s(e.primerasLetrasMayusculas(e.paciente.descripcion))+" ("+e._s(e.paciente.sexo)+")\n          ")]):e._e(),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Historial de "+e._s(e.parametroSeleccionado.nombre_parametro))])]),e._v(" "),t("div",{staticClass:"modal-body"},[e.cargandoHistorial?e._e():t("div",{staticClass:"row"},[t("div",{class:-1!==["N","F"].indexOf(e.parametroSeleccionado.tipo_parametro)?"col-md-6":"col-md-8 col-md-offset-2"},[t("div",{staticStyle:{height:"280px",overflow:"auto"}},[t("table",{staticClass:"table table-hover table-condensed"},[e._m(7),e._v(" "),t("tbody",e._l(e.historial,(function(a){return t("tr",[t("td",[e._v(e._s(a.numero))]),e._v(" "),t("td",[e._v(e._s(a.fecha))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(a.resultado)+" "+e._s(a.unidadMedida)+"\n                    ")])])})),0)])])]),e._v(" "),-1!==["N","F"].indexOf(e.parametroSeleccionado.tipo_parametro)?t("div",{staticClass:"col-md-6"},[e.cargandoHistorial?e._e():t("grafico-historial",{staticStyle:{height:"280px"},attrs:{datos:e.datosGraficoHistorial}})],1):e._e()]),e._v(" "),e.cargandoHistorial?t("div",{staticStyle:{height:"280px"}},[e._m(8)]):e._e()]),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrarHistorial}},[t("i",{staticClass:"fas fa-times fa-fw"}),e._v("Cerrar\n          ")])])])])]),e._v(" "),t("entregar-resultados-modal",{on:{"correo-electronico-enviado":e.correoElectronicoEnviado}}),e._v(" "),t("ver-auditorias-modal",{attrs:{"orden-id":e.ordenSeleccionada?e.ordenSeleccionada.id:"",tipo:"resultados"}}),e._v(" "),t("pdf-certificado-modal",{attrs:{"permiso-imprimir":e.datos.permisos.imprimir,"resultado-con-membrete":e.datos.resultadoConMembrete},on:{"correo-electronico-certificado-enviado":e.correoElectronicoCertificadoEnviado}}),e._v(" "),t("imprimir-modal",{attrs:{"url-api-local":e.datos.urlApiLocal,"mostrar-incluir-membrete":e.datos.resultadoConMembrete,"habilitar-tooltip":!0},on:{"documento-impreso":e.documentoImpreso}}),e._v(" "),t("resultados-modal"),e._v(" "),t("buscar-documentos-modal",{attrs:{"orden-id":e.ordenSeleccionada?e.ordenSeleccionada.id:"","tamano-papel-reporte":e.datos.tamanoPapelReporte}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading collapsed",staticStyle:{padding:"6px 15px"},attrs:{role:"tab",id:"headingOne","data-toggle":"collapse","data-target":"#collapseOne"}},[e("h4",{staticClass:"panel-title",staticStyle:{"font-size":"14px"}},[e("a",{staticClass:"collapsed",staticStyle:{display:"flex","justify-content":"space-between"},attrs:{role:"button",href:"#","aria-expanded":"false","aria-controls":"collapseOne"}},[e("span",[this._v("Filtros")])])])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-search fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Buscar\n                    ")])},function(){var e=this._self._c;return e("div",{staticClass:"cargando"},[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n              ")])},function(){var e=this._self._c;return e("div",{staticClass:"cargando"},[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n              ")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-5 text-center"},[e._v("Parámetro")]),e._v(" "),t("th",{staticClass:"col-sm-4 text-center"},[e._v("Resultado")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("V. Referencia")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Historial")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Comentarios")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Comentario")])])},function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×\n            ")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-4"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"col-sm-4"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-4 text-center"},[e._v("Valor")])])])},function(){var e=this._self._c;return e("table",{staticClass:"table"},[e("tr",[e("td",{staticClass:"text-center",staticStyle:{height:"220px","vertical-align":"middle"}},[e("div",{staticClass:"cargando"},[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n                  ")])])])])}],!1,null,"41a342c9",null).exports},6293:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={extends:a(6663).x1,data:function(){return{opciones:{legend:{display:!1},layout:{padding:{left:30}},maintainAspectRatio:!1}}},props:["datos"],mounted:function(){this.renderChart(this.datos,this.opciones)},methods:{},computed:{},watch:{}};const o=(0,a(1900).Z)(r,undefined,undefined,!1,null,null,null).exports},2190:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var r=a(4590),o=a(2328),i=a(2534),s=a(9107),n=a(9676),c=a(9794);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m={components:{Liston:o.Z,SelectMedico:i.Z,BuscarExamenModal:s.Z,BuscarPacienteModal:n.Z,BuscarUsuarioModal:c.Z},props:["datos"],data:function(){return{tipoArchivo:"",generandoExcel:!1,generandoTexto:!1,filtros:{fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),usuario_id:"",usuario_nombre:"",sucursal_id:"",empresa_id:"",subempresa_id:"",medico_id:"",tipo_atencion_id:"",plan_salud_id:"",sala_id:"",examen_id:"",examen_codigo:"",paciente_id:"",paciente_type:"",paciente_nombre:"",tipo_paciente_id:"",fuera_rango:!1},opciones:{forma:"FILAS",mostrar_cliente_categoria:!1,mostrar_numero_orden:!1,para_dialisis:!1,separador_decimales:""},sucursales:[],empresas:[],empresa:"",subempresas:[],medicos:[],tiposAtenciones:[],tiposPacientes:[],planesSalud:[],salas:[]}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/catalogos",{params:{catalogo:r.oH.SUCURSALES}}).then((function(t){var a=t.data.data;e.sucursales=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Sucursales!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.CLIENTES}}).then((function(t){var a=t.data.data;e.empresas=a,e.datos.permisos.cambiarEmpresas||(e.filtros.empresa_id=e.datos.empresaPorDefectoId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id})),e.subempresas=e.empresa.subempresas)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Clientes!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.SERVICIO}}).then((function(t){var a=t.data.data;e.salas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Servicios!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.TIPO_ATENCION}}).then((function(t){var a=t.data.data;e.tiposAtenciones=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Tipos Atención!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.PLAN_SALUD}}).then((function(t){var a=t.data.data;e.planesSalud=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar Planes de Salud!",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.TIPOS_PACIENTES}}).then((function(t){var a=t.data.data;e.tiposPacientes=a}),(function(t){console.error(t.response.data.errors),e.mostrarErrores(r.im.ERROR,"Error al cargar Tipos Pacientes")})),this.datos.permisos.cambiarSucursal||(this.filtros.sucursal_id=this.datos.sucursalActivaId),this.$refs.cargando.alternar()},limpiarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.usuario_id="",this.filtros.usuario_nombre="",this.filtros.subempresa_id="",this.filtros.medico_id="",this.filtros.sala_id="",this.filtros.tipo_atencion_id="",this.filtros.plan_salud_id="",this.filtros.examen_id="",this.filtros.examen_codigo="",this.filtros.paciente_id="",this.filtros.paciente_type="",this.filtros.paciente_nombre="",this.datos.permisos.cambiarSucursal&&(this.filtros.sucursal_id=""),this.datos.permisos.cambiarEmpresas&&(this.empresa="",this.filtros.empresa_id=""),this.opciones.forma="FILAS",this.opciones.mostrar_cliente_categoria=!1,this.opciones.mostrar_numero_orden=!1,this.opciones.para_dialisis=!1},abrirBusquedaUsuario:function(){$("#buscarUsuario").modal()},usuarioSeleccionado:function(e){this.filtros.usuario_id=e.id,this.filtros.usuario_nombre=e.nombre_usuario},limpiarUsuario:function(){this.filtros.usuario_id="",this.filtros.usuario_nombre=""},generarArchivo:function(){"EXCEL"===this.tipoArchivo&&this.generarArchivoPorTipo(this.tipoArchivo.toLowerCase()),"TEXTO"===this.tipoArchivo&&this.generarArchivoPorTipo(this.tipoArchivo.toLowerCase())},generarArchivoPorTipo:function(e){var t=this,a=this.validarFechas(a);if(a=this.validarRangoFechas(a)){this.procesarGenerando(e);var r=d(d({},this.filtros),this.opciones);r.fuera_rango=r.fuera_rango?1:null,r.mostrar_cliente_categoria=r.mostrar_cliente_categoria?1:null,r.mostrar_numero_orden=r.mostrar_numero_orden?1:null,r.para_dialisis=r.para_dialisis?1:null,axios.get("/informes/resultados/".concat(e),{params:r,responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=decodeURIComponent(e.headers["content-type"]),r=t.split("filename=")[1],o=new Blob([e.data],{type:a}),i=document.getElementById("link-descargas");i.href=window.URL.createObjectURL(o),i.download=r,i.click()})).catch((function(e){var a=e.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=t.procesarErrorResponse(o);t.mostrarErrores("Error al generar archivo",i)})).then((function(){return t.procesarGenerando(e,!1)}))}},procesarGenerando:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"excel"===e&&(this.generandoExcel=t),"texto"===e&&(this.generandoTexto=t)},validarFechas:function(e){var t=new RegExp("([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))");return(e=t.test(this.filtros.fecha_desde))?(e=t.test(this.filtros.fecha_hasta))||(this.mostrarErrores("¡Error!",' La "Fecha Hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores("¡Error!",'La "Fecha Desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e)},validarRangoFechas:function(e){var t=moment(this.filtros.fecha_hasta,"YYYY-MM-DD"),a=moment(this.filtros.fecha_desde,"YYYY-MM-DD"),r=t.diff(a,"months",!0);return r>3&&(this.mostrarErrores("¡Error!",' El rango entre la "Fecha Desde" y "Fecha Hasta" supera los 3 meses.'),e=!1),r<0&&(this.mostrarErrores("¡Error!",' La "Fecha Desde" no debe ser mayor que la "Fecha Hasta".'),e=!1),e},borrarFiltroExamen:function(){this.filtros.examen_id="",this.filtros.examen_codigo=""},cambiarEmpresa:function(){this.filtros.subempresa_id="",this.empresa?(this.filtros.empresa_id=this.empresa.id,this.subempresas=this.empresa.subempresas):(this.filtros.empresa_id="",this.subempresas="")},borrarFiltroPaciente:function(){this.filtros.paciente_id="",this.filtros.paciente_type="",this.filtros.paciente_nombre=""},pacienteSeleccionado:function(e){this.filtros.paciente_id=e.id,this.filtros.paciente_type=e.tipo,this.filtros.paciente_nombre=e.nombre_paciente},examenSeleccionado:function(e){this.filtros.examen_id=e.id,this.filtros.examen_codigo=e.codigo},cambioMostrarClienteCategoria:function(){this.opciones.para_dialisis=!1},cambioParaDialisis:function(){this.opciones.mostrar_cliente_categoria=!1},definirNefromedic:function(){this.tipoArchivo="TEXTO",this.opciones.mostrar_numero_orden=!0,this.opciones.separador_decimales=","},definirNefrsys:function(){this.tipoArchivo="TEXTO",this.opciones.mostrar_numero_orden=!1,this.opciones.separador_decimales=""}}};const p=(0,a(1900).Z)(m,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generarArchivo.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Resultados\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[e.opciones.para_dialisis?e._e():t("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{id:"generarInformeResultados",type:"submit",disabled:e.generandoExcel||e.generandoTexto},on:{click:function(t){e.tipoArchivo="EXCEL"}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoExcel,expression:"!generandoExcel"}],staticClass:"fas fa-file-excel fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.generandoExcel,expression:"generandoExcel"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Generar Excel\n            ")])]),e._v(" "),t("li",[e.opciones.mostrar_cliente_categoria?e._e():t("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{id:"generarInformeResultadosTexto",type:"submit",disabled:e.generandoExcel||e.generandoTexto},on:{click:e.definirNefrsys}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoTexto,expression:"!generandoTexto"}],staticClass:"fas fa-file fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.generandoTexto,expression:"generandoTexto"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Generar texto Nefrosys\n            ")])]),e._v(" "),t("li",[e.opciones.mostrar_cliente_categoria?e._e():t("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{type:"submit",disabled:e.generandoExcel||e.generandoTexto},on:{click:e.definirNefromedic}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.generandoTexto,expression:"!generandoTexto"}],staticClass:"fas fa-file fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.generandoTexto,expression:"generandoTexto"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Generar texto Nefromedic\n            ")])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.limpiarFiltros}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}})])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",disabled:!e.datos.permisos.cambiarEmpresas,placeholder:"Todos",options:e.empresas,label:"nombre"},on:{input:e.cambiarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"subempresa_id"}},[e._v("Categoría")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"subempresa_id",placeholder:"Todos",options:e.subempresas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.subempresa_id,callback:function(t){e.$set(e.filtros,"subempresa_id",t)},expression:"filtros.subempresa_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sucursal_id"}},[e._v("Sucursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sucursal_id,expression:"filtros.sucursal_id"}],staticClass:"form-control input-sm",attrs:{name:"sucursal_id",id:"sucursal_id",disabled:!e.datos.permisos.cambiarSucursal},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n                ")])}))],2)])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sala_id"}},[e._v("Servicio")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sala_id,expression:"filtros.sala_id"}],staticClass:"form-control input-sm",attrs:{name:"sala_id",id:"sala_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sala_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.salas,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"plan_salud_id"}},[e._v("Plan Salud")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.plan_salud_id,expression:"filtros.plan_salud_id"}],staticClass:"form-control input-sm",attrs:{id:"plan_salud_id",name:"plan_salud_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"plan_salud_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.planesSalud,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_atencion_id,expression:"filtros.tipo_atencion_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",name:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_atencion_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposAtenciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_paciente_id"}},[e._v("\n                Tipo paciente\n              ")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipo_paciente_id,expression:"filtros.tipo_paciente_id"}],staticClass:"form-control input-sm",attrs:{id:"tipo_paciente_id",name:"tipo_paciente_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipo_paciente_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.tiposPacientes,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                  "+e._s(a.nombre)+"\n                ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label"},[e._v("Médico")]),e._v(" "),t("select-medico",{attrs:{id:"medico_id",catalogo:"MEDICOS",etiqueta:"nombre_completo"},model:{value:e.filtros.medico_id,callback:function(t){e.$set(e.filtros,"medico_id",t)},expression:"filtros.medico_id"}})],1)])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario"}},[e._v("Usuario")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.usuario_nombre,expression:"filtros.usuario_nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"usuario",disabled:""},domProps:{value:e.filtros.usuario_nombre},on:{input:function(t){t.target.composing||e.$set(e.filtros,"usuario_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarUsuario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar"},on:{click:e.abrirBusquedaUsuario}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examen_codigo,expression:"filtros.examen_codigo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",disabled:""},domProps:{value:e.filtros.examen_codigo},on:{input:function(t){t.target.composing||e.$set(e.filtros,"examen_codigo",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),e._m(1)])])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"paciente"}},[e._v("Paciente")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.paciente_nombre,expression:"filtros.paciente_nombre"}],staticClass:"form-control input-sm",attrs:{id:"paciente",type:"text",disabled:""},domProps:{value:e.filtros.paciente_nombre},on:{input:function(t){t.target.composing||e.$set(e.filtros,"paciente_nombre",t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroPaciente}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),e._m(2)])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.fuera_rango,expression:"filtros.fuera_rango"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.fuera_rango)?e._i(e.filtros.fuera_rango,"")>-1:e.filtros.fuera_rango},on:{change:function(t){var a=e.filtros.fuera_rango,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"fuera_rango",a.concat([""])):i>-1&&e.$set(e.filtros,"fuera_rango",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"fuera_rango",o)}}}),e._v("\n                  Fuera de rango\n                ")])])])])])])]),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(3),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",[e._v("Resultados en")]),e._v(" "),t("div",[t("label",{staticClass:"radio-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.forma,expression:"opciones.forma"}],attrs:{type:"radio",name:"forma",id:"forma1",value:"FILAS"},domProps:{checked:e._q(e.opciones.forma,"FILAS")},on:{change:function(t){return e.$set(e.opciones,"forma","FILAS")}}}),e._v("\n                  Filas\n                ")]),e._v(" "),t("label",{staticClass:"radio-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.forma,expression:"opciones.forma"}],attrs:{type:"radio",name:"forma",id:"forma2",value:"COLUMNAS"},domProps:{checked:e._q(e.opciones.forma,"COLUMNAS")},on:{change:function(t){return e.$set(e.opciones,"forma","COLUMNAS")}}}),e._v("\n                  Columnas\n                ")])]),e._v(" "),t("small",[e._v("(Aplica para archivo Excel)")])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.mostrar_cliente_categoria,expression:"opciones.mostrar_cliente_categoria"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.opciones.mostrar_cliente_categoria)?e._i(e.opciones.mostrar_cliente_categoria,"")>-1:e.opciones.mostrar_cliente_categoria},on:{click:e.cambioMostrarClienteCategoria,change:function(t){var a=e.opciones.mostrar_cliente_categoria,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.opciones,"mostrar_cliente_categoria",a.concat([""])):i>-1&&e.$set(e.opciones,"mostrar_cliente_categoria",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"mostrar_cliente_categoria",o)}}}),e._v("\n                  Mostrar Cliente y Categoría "),t("br"),t("small",[e._v("(Aplica para archivo Excel)")])])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.para_dialisis,expression:"opciones.para_dialisis"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.opciones.para_dialisis)?e._i(e.opciones.para_dialisis,"")>-1:e.opciones.para_dialisis},on:{click:e.cambioParaDialisis,change:function(t){var a=e.opciones.para_dialisis,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.opciones,"para_dialisis",a.concat([""])):i>-1&&e.$set(e.opciones,"para_dialisis",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"para_dialisis",o)}}}),e._v("\n                  Formato para diálisis "),t("br"),t("small",[e._v("(Aplica para archivo Texto)")])])])])])])])])],1),e._v(" "),t("buscar-usuario-modal",{on:{"usuario-seleccionado":e.usuarioSeleccionado}}),e._v(" "),t("buscar-paciente-modal",{on:{"paciente-seleccionado":e.pacienteSeleccionado}}),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.examenSeleccionado}}),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarPaciente",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Opciones")])])}],!1,null,null,null).exports},8946:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});const r={props:{id:{type:String,default:"modalBuscarDestinoTarea"},top:{type:Number,default:0},destino:{type:Object,default:function(){return{}}},destinosTareasIds:{type:Array,default:function(){return[]}}},data:function(){return{cargandoDestinosTareas:!1,cadenaBuscar:"",destinosTareas:[],destinosTareasIdsAExcluir:[],excluirDestinoTipo:!0,tareas:[]}},mounted:function(){var e=this;$("#".concat(this.id)).on("shown.bs.modal",(function(t){t.target.id===e.id&&(e.cadenaBuscar=$(t.relatedTarget).data("cadenaBuscar"),e.destinosTareas=[],e.tareas=[],e.destinosTareasIdsAExcluir=e.destinosTareasIds,e.cargarDestinosTareas())})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.destinosTareas=[],e.tareas=[])}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},buscarDestinosTareas:function(){this.cargarDestinosTareas()},cargarDestinosTareas:function(){var e=this;this.cargandoDestinosTareas=!0;var t={destinosTareasIdsAExcluir:this.destinosTareasIdsAExcluir,cadenaBusqueda:this.cadenaBuscar,excluirDestinoTipo:this.excluirDestinoTipo};axios.get("/api/destinos-tareas",{params:t}).then((function(t){var a=t.data.data;e.destinosTareas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar las tareas",a)})).then((function(){return e.cargandoDestinosTareas=!1}))},limpiarCadenaBuscar:function(){this.cadenaBuscar="",this.cargarDestinosTareas()},agregarDestinoTarea:function(){_.isEmpty(this.tareas)?this.mostrarAdvertencia("No se ha seleccionado ningún registro"):(this.$emit("tareas-seleccionadas",{tareas:this.tareas}),$("#".concat(this.id)).modal("hide"))},seleccionarDestinoTarea:function(e){if(e.seleccionado){var t=this.tareas.indexOf(e);this.tareas.splice(t,1)}else this.tareas.some((function(t){return t.destino_tarea_id===e.id}))||this.tareas.push({destino_tarea_id:e.id,nombre:e.nombre})}},computed:{estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""}}};var o=a(1900);const i=(0,o.Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("form",{on:{submit:function(t){return t.preventDefault(),e.agregarDestinoTarea.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Tareas de destino "+e._s(e.destino.nombre)+" ("+e._s(e.destino.direccion)+")")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBuscar,expression:"cadenaBuscar"}],staticClass:"form-control input-sm",attrs:{id:"".concat(e.id,"CadenaBuscarDestinoTarea"),type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBuscar},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarDestinosTareas.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBuscar=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.buscarDestinosTareas}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBuscar}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),!e.cargandoDestinosTareas&&e.destinosTareas.length>0?t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(1),e._v(" "),t("tbody",[e._l(e.destinosTareas,(function(a){return[t("tr",{staticClass:"puntero",on:{click:function(t){return e.seleccionarDestinoTarea(a)}}},[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"col-sm-1 text-center"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.seleccionado,expression:"destinoTarea.seleccionado"}],staticClass:"puntero",attrs:{type:"checkbox",title:"Seleccionar tarea"},domProps:{checked:Array.isArray(a.seleccionado)?e._i(a.seleccionado,null)>-1:a.seleccionado},on:{change:function(t){var r=a.seleccionado,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"seleccionado",r.concat([null])):s>-1&&e.$set(a,"seleccionado",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"seleccionado",i)}}})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoDestinosTareas,cantidad:e.destinosTareas.length,tipo:"tareas"}})],1),e._v(" "),e._m(2)])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-3 text-center"},[e._v("Nombre")]),e._v(" "),t("th")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Agregar")])])}],!1,null,null,null).exports;var s=a(2047);const n={props:{id:{type:String,default:"modalBuscarSolicitudesVisitas"},top:{type:Number,default:0},detalleSolicitudesVisitasIds:{type:Array,default:function(){return[]}},sectorId:{type:Number,default:void 0}},data:function(){return{cargandoDetalleSolicitudesVisitas:!1,cadenaBusqueda:"",detalleSolicitudesVisitas:[],detalleSolicitudesVisitasSeleccionados:[],detalleSolicitudesVisitasIdsAExcluir:[]}},mounted:function(){var e=this;$("#".concat(this.id)).on("shown.bs.modal",(function(t){t.target.id===e.id&&(e.cadenaBusqueda=$(t.relatedTarget).data("cadenaBusqueda"),e.detalleSolicitudesVisitas=[],e.detalleSolicitudesVisitasIdsAExcluir=e.detalleSolicitudesVisitasIds,e.cargarDetalleSolicitudesVisitas())})),$("#".concat(this.id)).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.detalleSolicitudesVisitas=[],e.detalleSolicitudesVisitasSeleccionados=[])}))},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},buscarDetalleSolicitudesVisitas:function(){this.cargarDetalleSolicitudesVisitas()},cargarDetalleSolicitudesVisitas:function(){var e=this;this.cargandoDetalleSolicitudesVisitas=!0,this.detalleSolicitudesVisitasSeleccionados=[];var t={detalleSolicitudesVisitasIdsAExcluir:this.detalleSolicitudesVisitasIdsAExcluir,cadenaBusqueda:this.cadenaBusqueda,sectorId:this.sectorId};axios.get("/api/solicitudes-visitas/detalles",{params:t}).then((function(t){var a=t.data.data;e.detalleSolicitudesVisitas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar las solictudes de visitas",a)})).then((function(){return e.cargandoDetalleSolicitudesVisitas=!1}))},limpiarCadenaBusqueda:function(){this.cadenaBusqueda="",this.cargarDetalleSolicitudesVisitas()},agregarSolicitudVisita:function(){_.isEmpty(this.detalleSolicitudesVisitasSeleccionados)?this.mostrarAdvertencia("No se ha seleccionado ningun registro"):(this.$emit("detalle-solicitudes-visitas-seleccionados",{detalleSolicitudesVisitas:this.detalleSolicitudesVisitasSeleccionados}),$("#".concat(this.id)).modal("hide"))},seleccionarSolicitudVisita:function(e){if(e.seleccionado){var t=this.detalleSolicitudesVisitasSeleccionados.indexOf(e);this.detalleSolicitudesVisitasSeleccionados.splice(t,1)}else this.detalleSolicitudesVisitasSeleccionados.some((function(t){return t.id===e.id}))||this.detalleSolicitudesVisitasSeleccionados.push(e)}},computed:{estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""}}};const c=(0,o.Z)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade modal-nivel-multiple",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("form",{on:{submit:function(t){return t.preventDefault(),e.agregarSolicitudVisita.apply(null,arguments)}}},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"".concat(e.id,"CadenaBusquedaSolicitudesVisita"),type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarDetalleSolicitudesVisitas.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.buscarDetalleSolicitudesVisitas}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBusqueda}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),!e.cargandoDetalleSolicitudesVisitas&&e.detalleSolicitudesVisitas.length>0?t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(1),e._v(" "),t("tbody",[e._l(e.detalleSolicitudesVisitas,(function(a){return[t("tr",{staticClass:"puntero",on:{click:function(t){return e.seleccionarSolicitudVisita(a)}}},[t("td",{staticClass:"col-sm-1 text-center"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.seleccionado,expression:"detalleSolicitudVisita.seleccionado"}],staticClass:"puntero",attrs:{type:"checkbox",title:"Seleccionar solicitud visita"},domProps:{checked:Array.isArray(a.seleccionado)?e._i(a.seleccionado,null)>-1:a.seleccionado},on:{change:function(t){var r=a.seleccionado,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"seleccionado",r.concat([null])):s>-1&&e.$set(a,"seleccionado",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"seleccionado",i)}}})])]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.solicitud_visita.destino.nombre))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.observacion))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.tarea.nombre))])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoDetalleSolicitudesVisitas,cantidad:e.detalleSolicitudesVisitas.length,tipo:"solicitudes de visitas"}})],1),e._v(" "),e._m(2)])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Solicitudes de visita")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th"),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Observación")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Tarea")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Guardar")])])}],!1,null,null,null).exports;var l=a(6354),d=a(4590);function u(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const h={components:{BuscarDestinoTareaModal:i,BuscarOrdenesModal:s.Z,BuscarSolicitudesVisitasModal:c,EstadoOrdenModal:l.Z},props:["id","datos"],data:function(){return{cadenaBuscarDestino:"",registro:{fecha:moment().format("YYYY-MM-DD"),jornada_id:"",mensajero_id:"",idsOrdenes:[],sector_id:null,estado:"",destinos:[]},idsDetalleSolicitudesVisitasExcluir:[],idsDestinosTareasExcluir:[],idsOrdenesExcluir:[],ordenes:[],destinos:[],mensajeros:[],sector:{},destinoSeleccionado:{},tareaEntregaResultado:[],procesando:{cargarOrdenes:!1,cargarDestinos:!1}}},mounted:function(){this.cargarDatos()},methods:{abrirBuscarDestinos:function(){this.cadenaBuscarDestino="",$("#modalBuscarDestino").modal({backdrop:"static"})},abrirBuscarDestinosTareas:function(e){this.registro.destinos.some((function(t){return t.destino_id===e.destino_id}))||this.registro.destinos.push(f(f({},e),{},{tareas:[]})),this.destinoSeleccionado=e;var t=this.registro.destinos.find((function(t){return t.destino_id===e.destino_id}));this.idsDestinosTareasExcluir=t.tareas.map((function(e){return e.destino_tarea_id})),$("#modalBuscarDestinoTarea").modal({backdrop:"static"}),$("#modalBuscarDestino").modal("hide")},cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/rutas/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro.jornada_id=a.ruta.jornada_id,e.registro.sector_id=a.ruta.sector_id,e.registro.fecha=a.ruta.fecha,e.sector=a.ruta.sector,e.registro.destinos=a.ruta.destinos,e.registro.idsOrdenes=a.idsOrdenes,e.registro.estado=a.ruta.estado,e.cargarOrdenes(),e.cargarMensajeros(a.ruta.mensajero_id)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar la ruta",a)})).then((function(){return e.$refs.cargando.alternar()}))),this.idsOrdenesExcluir=this.datos.idsOrdenesExcluir,this.cargarTareasDestino()},cargarMensajeros:function(e){var t=this;axios.get("/api/catalogos",{params:{catalogo:d.oH.MENSAJEROS}}).then((function(a){var r=a.data.data;t.mensajeros=r,e&&(t.registro.mensajero_id=e)})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al cargar Mensajeros",a)}))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/rutas",a="post";"0"!==this.id&&(t="/api/rutas/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar las rutas",a)}))},tareasSeleccionadas:function(e){var t,a=this;this.procesando.cargarDestinos=!0;var r=this.registro.destinos.find((function(e){return e.destino_id===a.destinoSeleccionado.destino_id})),o=e.tareas.map((function(e){return f(f({},e),{},{orden_id:"",estado:d.Qc.PENDIENTE,observacion_tarea:"",orden:[],destino_tarea:{nombre:e.nombre,tipo:""}})}));(t=r.tareas).push.apply(t,u(o)),this.procesando.cargarDestinos=!1},eliminarDestino:function(e,t,a){var r=this.registro.destinos.find((function(t){return t.destino_id===e.destino_id})),o=r.tareas.indexOf(t);if(r.tareas.splice(o,1),0===r.tareas.length){var i=this.registro.destinos.indexOf(e);this.registro.destinos.splice(i,1)}if(void 0!==a){var s=this.idsDetalleSolicitudesVisitasExcluir.indexOf(a);this.idsDetalleSolicitudesVisitasExcluir.splice(s,1)}if(t.orden_id){var n=this.registro.idsOrdenes.indexOf(t.orden_id);this.registro.idsOrdenes.splice(n,1),this.cargarOrdenes()}},ordenesSeleccionadas:function(e){this.registro.idsOrdenes=e.ordenesIds,this.cargarOrdenes()},cargarOrdenes:function(){var e=this;if(this.procesando.cargarOrdenes=!0,_.isEmpty(this.registro.idsOrdenes))return this.ordenes=[],void(this.procesando.cargarOrdenes=!1);var t={ordenesIds:this.registro.idsOrdenes,incluir:"paciente,sucursal,subempresa.empresa,subempresa.destino,subempresa.destino.sector",adicional:"valorTotalAbonos"};axios.get("/api/ordenes/buscar",{params:t}).then((function(t){var a=t.data.data;e.ordenes=a,e.ordenes.forEach((function(t){var a=t.subempresa.destino,r={destino_tarea_id:e.tareaEntregaResultado[0].id,orden_id:t.id,estado:d.Qc.PENDIENTE,observacion_tarea:"",orden:t,numero_orden:t.numero_orden,destino_tarea:e.tareaEntregaResultado[0]},o={destino_id:a.id,tareas:[],direccion:a.direccion,nombre:a.nombre,sector_id:a.sector_id,telefono:a.telefono,url_ubicacion:a.url_ubicacion,sector:a.sector},i=e.registro.destinos.find((function(e){return e.destino_id===o.destino_id}));i?i.tareas.find((function(e){return e.orden_id===r.orden_id&&e.destino_tarea_id===r.destino_tarea_id}))||i.tareas.push(r):(e.registro.destinos.push(o),o.tareas.push(r))}))})).catch((function(t){e.procesando.cargarOrdenes=!1;var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar órdenes",a)})).then((function(){return e.procesando.cargarOrdenes=!1}))},eliminarOrden:function(e,t){var a=this.registro.destinos.find((function(e){return e.destino_id===t})),r=a.tareas.find((function(t){return t.orden_id===e}));this.eliminarDestino(a,r)},cargarTareasDestino:function(){var e=this;axios.get("/api/destinos-tareas").then((function(t){var a=t.data.data;e.tareaEntregaResultado=a.filter((function(e){return e.tipo===d.fG.ENTREGA_RESULTADO}))})).catch((function(t){e.procesando.cargarOrdenes=!1;var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al buscar las tareas de los destinos",a)}))},limpiarCadenaBuscarDestino:function(){this.cadenaBuscarDestino=""},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/rutas"},regresar:function(){window.location.href="/rutas"},detalleSolicitudesVisitasSeleccionados:function(e){var t=this;e.detalleSolicitudesVisitas.forEach((function(e){var a=e.solicitud_visita.destino,r=e.tarea,o={destino_tarea_id:r.id,orden_id:"",estado:d.Qc.PENDIENTE,observacion_tarea:e.observacion,orden:[],detalle_solicitud:e.id,destino_tarea:{nombre:r.nombre,tipo:""},solicitud_visita_id:e.solicitud_visita_id},i={destino_id:a.id,tareas:[],direccion:a.direccion,nombre:a.nombre,sector_id:a.sector_id,telefono:a.telefono,url_ubicacion:a.url_ubicacion,sector:e.solicitud_visita.destino.sector},s=t.registro.destinos.find((function(e){return e.destino_id===i.destino_id}));s?s.tareas.find((function(e){return e.destino_tarea_id===i.tareas.destino_tarea_id}))||s.tareas.push(o):(t.registro.destinos.push(i),i.tareas.push(o))})),this.idsDetalleSolicitudesVisitasExcluir=_.flatten(this.registro.destinos.map((function(e){return e.tareas.filter((function(e){return e.detalle_solicitud})).map((function(e){return e.detalle_solicitud}))})))}},computed:{destinosFiltrados:function(){var e=new RegExp(removeDiacritics(this.cadenaBuscarDestino),"i"),t=_.map(this.destinos,"id");return this.datos.destinos.filter((function(a){return!t.includes(a.id)&&(e.test(removeDiacritics(a.nombre))||e.test(a.direccion))}))}}};const g=(0,o.Z)(h,(function(){var e=this,t=e._self._c;return t("div",[t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear ruta":"Editar ruta")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row form-group"},["0"!==e.id?t("div",{staticClass:"col-md-2"},[t("label",{staticClass:"control-label"},[e._v("Sector")]),e._v(" "),t("output",[e._v(e._s(e.sector.nombre))])]):e._e(),e._v(" "),t("div",{staticClass:"col-md-3"},[t("label",{staticClass:"control-label obligatorio no-salto-linea",attrs:{for:"fecha"}},[e._v("Fecha")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.registro.fecha,expression:"registro.fecha"}],staticClass:"form-control input-sm",attrs:{id:"fecha","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-start-date":"0d","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd",autocomplete:"off",required:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}})]),e._v(" "),t("div",{staticClass:"col-md-3"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"jornada_id"}},[e._v("Jornada")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.jornada_id,expression:"registro.jornada_id"}],staticClass:"form-control input-sm",attrs:{id:"jornada_id",name:"jornada_id",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"jornada_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.datos.jornadas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n            "+e._s(a.nombre)+"\n          ")])}))],2)]),e._v(" "),"0"!==e.id?t("div",{staticClass:"col-md-3"},[t("label",{staticClass:"control-label",attrs:{for:"mensajero_id"}},[e._v("Mensajero")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"mensajero_id",placeholder:"Seleccione...",options:e.mensajeros,"get-option-label":function(e){return e.usuario.nombre_completo},reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!1,2639475694),model:{value:e.registro.mensajero_id,callback:function(t){e.$set(e.registro,"mensajero_id",t)},expression:"registro.mensajero_id"}})],1):e._e(),e._v(" "),"0"!==e.id?t("div",{staticClass:"col-md-1"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("output",[e._v(e._s(e._f("estadoRuta")(e.registro.estado)))])]):e._e()]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("legend",[e._v("\n          Tareas de destino\n          "),t("div",{staticClass:"pull-right"},[e._m(0),e._v(" "),t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:e.abrirBuscarDestinos}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v("Agregar tareas de destino\n            ")]),e._v(" "),e._m(1)])]),e._v(" "),!e.procesando.cargarDestinos&&e.registro.destinos.length>0?t("div",{staticStyle:{height:"270px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(2),e._v(" "),t("tbody",[e._l(e.registro.destinos,(function(a){return[e._l(a.tareas,(function(r){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(r.destino_tarea.nombre)+"\n                    "),r.orden?t("strong",[e._v("\n                      "+e._s(r.orden.numero_orden)+"\n                    ")]):e._e()]),e._v(" "),t("td",[e._v("\n                    "+e._s(e._f("estadoDestinoRutaTarea")(r.estado))+"\n                  ")]),e._v(" "),t("td",{staticClass:"text-left"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:r.observacion_tarea,expression:"tarea.observacion_tarea"}],staticClass:"form-control input-sm resize-vertical",attrs:{rows:"1",name:"observacion_tarea"},domProps:{value:r.observacion_tarea},on:{input:function(t){t.target.composing||e.$set(r,"observacion_tarea",t.target.value)}}},[e._v(e._s(r.observacion_tarea)+"\n                      ")])]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(t){return e.eliminarDestino(a,r,r.detalle_solicitud)}}},[t("i",{staticClass:"fas fa-trash"})])])])]}))]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.cargarDestinos,cantidad:e.registro.destinos.length,alto:"120px",tipo:"destinos"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("legend",[e._v("\n          Entrega de resultados\n        ")]),e._v(" "),!e.procesando.cargarOrdenes&&e.ordenes.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(3),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(a.fecha_orden))]),e._v(" "),t("td",{staticClass:"text-left hidden-xs"},[t("small",{attrs:{title:"Cliente",rel:"tooltip"}},[e._v("\n                    "+e._s(a.subempresa.empresa.nombre)+"\n                    "+e._s(a.subempresa.empresa.nombre!==a.subempresa.nombre?"(".concat(a.subempresa.nombre,")"):"")+"\n                  ")])]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center"},[t("orden-estado",{attrs:{"id-orden":a.id,estado:a.estado}})],1),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.valor_total)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.valor_total_abonos)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n                  "+e._s(e._f("moneda")(a.valor_total-a.valor_total_abonos))+"\n                ")]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarOrden(a.id,a.subempresa.destino_id)}}},[t("i",{staticClass:"fas fa-trash"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.cargarOrdenes,cantidad:e.ordenes.length,alto:"270px",tipo:"órdenes"}})],1)])],1),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalBuscarDestino",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(4),e._v(" "),t("alerta",{ref:"alertaBuscarDestinos"}),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBuscarDestino,expression:"cadenaBuscarDestino"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBuscarDestino},on:{input:function(t){t.target.composing||(e.cadenaBuscarDestino=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBuscarDestino}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])])]),e._v(" "),t("br"),e._v(" "),t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(5),e._v(" "),t("tbody",[0===e.destinosFiltrados.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("\n                  No existen registros\n                ")])]):e._e(),e._v(" "),e._l(e.destinosFiltrados,(function(a){return[t("tr",[t("td",[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Agregar tareas"},on:{click:function(t){return e.abrirBuscarDestinosTareas(a)}}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v("\n                      Tareas\n                    ")])])])]}))],2)])])])],1)])]),e._v(" "),t("buscar-destino-tarea-modal",{attrs:{id:"modalBuscarDestinoTarea",top:0,destino:e.destinoSeleccionado,"destinos-tareas-ids":e.idsDestinosTareasExcluir},on:{"tareas-seleccionadas":e.tareasSeleccionadas}}),e._v(" "),t("buscar-solicitudes-visitas-modal",{attrs:{top:0,"detalle-solicitudes-visitas-ids":e.idsDetalleSolicitudesVisitasExcluir,"sector-id":e.registro.sector_id},on:{"detalle-solicitudes-visitas-seleccionados":e.detalleSolicitudesVisitasSeleccionados}}),e._v(" "),t("buscar-ordenes-modal",{attrs:{"ordenes-ids":e.registro.idsOrdenes,"sector-id":e.registro.sector_id,opcion:"rutas","estados-detalles":["V","L"],"ordenes-ids-excluir":e.idsOrdenesExcluir,"sucursal-seleccionada":!1,"mostrar-filtros":["sucursal","cliente","categoria","fechaDesde","fechaHasta","medico","paciente","numeroOrden","numeroOrdenFinal"]},on:{"ordenes-seleccionadas":e.ordenesSeleccionadas}}),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button","data-toggle":"modal","data-backdrop":"static","data-target":"#modalBuscarOrdenes"}},[e("i",{staticClass:"fas fa-plus fa-fw"}),this._v("Agregar entrega de resultados\n            ")])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button","data-toggle":"modal",title:"Agregar órdenes","data-backdrop":"static","data-target":"#modalBuscarSolicitudesVisitas"}},[e("i",{staticClass:"fas fa-plus fa-fw"}),this._v("Agregar solicitudes\n            ")])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-2 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-left"},[e._v("Tarea")]),e._v(" "),t("th",{staticClass:"col-sm-1"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Observación")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Cliente")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Abono")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Saldo")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Destinos")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-8 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2"})])])}],!1,null,null,null).exports},4978:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(2328),o=a(4590);const i={props:["datos"],components:{Liston:r.Z},data:function(){return{cargandoRutas:!1,rutas:[],count:0,filtros:{fechaDesde:"",fechaHasta:"",jornada_id:"",sector_id:"",ruta_id:"",estado:""},pagina:1,estadoRutas:o.rP}},mounted:function(){this.cargarDatos()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){this.cargarRutas(0,!1)},borrarFiltros:function(){this.filtros.fechaDesde="",this.filtros.fechaHasta="",this.filtros.jornada_id="",this.filtros.sector_id="",this.filtros.ruta_id="",this.filtros.estado="",this.rutas=[],this.count=0,this.cargarDatos()},buscar:function(){this.cargarRutas(0,!0)},editarRuta:function(e){window.location.href="/rutas/"+e.id+"/edit"},cumplimientoRuta:function(e){window.location.href="rutas/cumplimiento/"+e.id+"/edit"},verRuta:function(e){window.location.href="/rutas/"+e.id},cargarRutas:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.cargandoRutas=!0,this.filtros.page=e,this.pagina=e,this.rutas=[],this.$can("cumplir-rutas")&&(this.$can("crear-rutas")||(this.filtros.mensajero_id=!0)),axios.get("/api/rutas",{params:this.filtros}).then((function(e){var r=e.data;t.count=r.last_page;var o=r.data;if(0===o.length&&a)return t.mostrarInformativo("No existen registros con los criterios especificados"),void(t.cargandoRutas=!1);t.rutas=o,t.cargandoRutas=!1})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al listar las rutas",a),t.cargandoRutas=!1,t.rutas=[]}))},descargarRuta:function(e){window.open("rutas/".concat(e.id,"/pdf"),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},eliminarRuta:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/rutas/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("Ruta eliminada exitosamente")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al eliminar la ruta",a)}))}}},s=i;const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Rutas\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",[e.$can("crear-rutas")?t("a",{staticClass:"btn btn-primary",attrs:{href:"/rutas/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")]):e._e()])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel-group",attrs:{id:"accordion"}},[t("div",{staticClass:"panel panel-oscuro",attrs:{id:"panelFiltros"}},[e._m(0),e._v(" "),t("div",{staticClass:"panel-collapse collapse in",attrs:{id:"collapseFiltros"}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaDesde,expression:"filtros.fechaDesde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaHasta,expression:"filtros.fechaHasta"}],staticClass:"form-control input-sm",attrs:{type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd"}})])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sector_id"}},[e._v("Sector")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"sector_id",placeholder:"Todos",options:e.datos.sectores,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.sector_id,callback:function(t){e.$set(e.filtros,"sector_id",t)},expression:"filtros.sector_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"jornada_id"}},[e._v("Jornada")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"jornada_id",placeholder:"Todos",options:e.datos.jornadas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.jornada_id,callback:function(t){e.$set(e.filtros,"jornada_id",t)},expression:"filtros.jornada_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"ruta_id"}},[e._v("No. ruta")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.ruta_id,expression:"filtros.ruta_id"}],staticClass:"form-control input-sm",attrs:{id:"ruta_id",type:"text",placeholder:"Buscar por número de ruta",autocomplete:"off"},domProps:{value:e.filtros.ruta_id},on:{input:function(t){t.target.composing||e.$set(e.filtros,"ruta_id",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"estado"}},[e._v("Estado")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control input-sm",attrs:{id:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),e._l(e.estadoRutas,(function(a){return t("option",{domProps:{value:a}},[e._v("\n                  "+e._s(e._f("estadoRuta")(a))+"\n                ")])}))],2)])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 pull-right text-right"},[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.borrarFiltros}},[e._v("\n                Borrar filtros\n              ")]),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:e.buscar}},[t("i",{staticClass:"fas fa-search fa-fw"}),e._v(" Buscar\n              ")])])])])])])]),e._v(" "),e.cargandoRutas?e._e():t("div",[t("table",{directives:[{name:"show",rawName:"v-show",value:e.rutas.length>0,expression:"rutas.length > 0"}],staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Sector")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Jornada")]),e._v(" "),e.$can("cumplir-rutas")?e._e():t("th",{staticClass:"col-sm-1 text-center"},[e._v("Mensajero")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"})])]),e._v(" "),t("tbody",[e._l(e.rutas,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.id))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.sector.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.fecha))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.jornada.nombre))]),e._v(" "),e.$can("cumplir-rutas")?e._e():t("td",{staticClass:"text-center"},[e._v(e._s(a.mensajero.usuario.nombre_completo))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoRuta")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-right"},[["PROCESADA","ANULADA"].includes(a.estado)?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.verRuta(a)}}},[t("i",{staticClass:"fas fa-eye fa-fw"}),e._v(" Ver ruta\n            ")]):e._e(),e._v(" "),e.$can("cumplir-rutas")&&!["PROCESADA","ANULADA"].includes(a.estado)?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.cumplimientoRuta(a)}}},[t("i",{staticClass:"fas fa-check-circle fa-fw"}),e._v(" Cumplimiento de ruta\n            ")]):e._e(),e._v(" "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("ver-rutas")},on:{click:function(t){return e.descargarRuta(a)}}},[t("i",{staticClass:"far fa-file-pdf fa-fw"}),e._v(" Descargar\n            ")]),e._v(" "),e.$can("editar-rutas")&&!["PROCESADA","ANULADA"].includes(a.estado)?t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:function(t){return e.editarRuta(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]):e._e(),e._v(" "),e.$can("eliminar-rutas")&&!["PROCESADA","ANULADA","EN_PROCESO"].includes(a.estado)?t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(t){return e.eliminarRuta(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")]):e._e()])])]}))],2)]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.rutas.length>0,expression:"rutas.length > 0"}],staticClass:"clearfix text-center paginacion"},[t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.count,"container-class":"pagination","click-handler":e.cargarRutas,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.pagina,callback:function(t){e.pagina=t},expression:"pagina"}})],1),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoRutas,cantidad:e.rutas.length,tipo:"rutas"}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading puntero",attrs:{"data-toggle":"collapse","data-target":"#collapseFiltros"}},[e("div",{staticClass:"panel-title"},[e("a",{attrs:{href:"#"}},[this._v("\n            Filtros de búsqueda\n          ")])])])}],!1,null,null,null).exports},7349:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{EstadoOrdenModal:a(6354).Z},props:["id"],data:function(){return{cargandoExamenes:!1,registro:{fecha:"",jornada:{},sector:{},mensajero:{usuario:{}},destinos:[]}}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/rutas/".concat(this.id)).then((function(t){var a=t.data;e.registro=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar ruta",a)})).then((function(){return e.$refs.cargando.alternar()}))}},computed:{ordenes:function(){return this.registro.destinos.reduce((function(e,t){var a=t.tareas;return e.concat(a.filter((function(e){return e.orden_id})).map((function(e){return e.orden})))}),[])}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Ruta No. "),t("strong",[e._v(e._s(e.id))])]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",[t("a",{staticClass:"btn btn-default",attrs:{href:"/rutas"}},[e._v("Regresar")])])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Sector")]),e._v(" "),t("div",[e._v("\n        "+e._s(e.registro.sector.nombre)+"\n      ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Fecha")]),e._v(" "),t("div",[e._v("\n        "+e._s(e.registro.fecha)+"\n      ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Jornada")]),e._v(" "),t("div",[e._v("\n        "+e._s(e.registro.jornada.nombre)+"\n      ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Mensajero")]),e._v(" "),t("div",[e._v("\n        "+e._s(e.registro.mensajero.usuario.nombre_usuario)+"\n      ")])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("div",[e._v("\n        "+e._s(e._f("estadoRuta")(e.registro.estado))+"\n      ")])])]),e._v(" "),t("legend",[e._v("\n    Tareas de destino\n  ")]),e._v(" "),t("div",{staticStyle:{height:"210px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(0),e._v(" "),t("tbody",[e._l(e.registro.destinos,(function(a){return[e._l(a.tareas,(function(r){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(r.destino_tarea.nombre)+"\n              "),r.orden?t("strong",[e._v("\n                "+e._s(r.orden.numero_orden)+"\n              ")]):e._e()]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(e._f("estadoDestinoRutaTarea")(r.estado)))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(r.observacion_tarea))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(r.observacion_mensajero))])])]}))]}))],2)])]),e._v(" "),t("legend",[e._v("\n    Entrega de resultados\n  ")]),e._v(" "),t("div",{staticStyle:{height:"210px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[e._m(1),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(a.fecha_orden))]),e._v(" "),t("td",{staticClass:"text-left hidden-xs"},[t("small",{attrs:{title:"Cliente",rel:"tooltip"}},[e._v("\n              "+e._s(a.subempresa.empresa.nombre)+"\n              "+e._s(a.subempresa.empresa.nombre!==a.subempresa.nombre?"(".concat(a.subempresa.nombre,")"):"")+"\n            ")])]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center"},[t("orden-estado",{attrs:{"id-orden":a.id,estado:a.estado}})],1),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.valor_total)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(e._s(e._f("moneda")(a.valor_total_abonos)))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n            "+e._s(e._f("moneda")(a.valor_total-a.valor_total_abonos))+"\n          ")])])]}))],2)])]),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-2 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-left"},[e._v("Tarea")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-left"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-left"},[e._v("Observación")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-left"},[e._v("Observación mensajero")])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Cliente")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Valor")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Abono")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-right"},[e._v("Saldo")])])])}],!1,null,null,null).exports},3993:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});const r={data:function(){return{busqueda:"",cargando:!1,formulario:{secciones:[],firmas:[],seccion:{id:null,nombre:null,orden:null,firma_id:""}}}},props:["secciones","datos"],mounted:function(){var e=this;this.formulario.secciones=this.secciones,this.formulario.firmas=this.datos.firmas,$("#formularioSeccion").on("shown.bs.modal",(function(){$("#nombre").focus()})),$("#formularioSeccion").on("hide.bs.modal",(function(){e.limpiarSeccion()}))},methods:{abrirFormularioSeccion:function(){$("#formularioSeccion").modal({backdrop:"static"})},actualizarOrdenSecciones:function(e){var t=this;this.cargando=!0,axios.patch("/api/secciones/orden",e).then((function(){t.$refs.alerta.ocultarAlertas(),t.$refs.alerta.mostrarAlerta("success","Orden actualizado"),t.cargando=!1})).catch((function(e){t.cargando=!1}))},bajarSeccion:function(e){if(e.orden<this.formulario.secciones.length){var t=this.formulario.secciones.find((function(t){return t.orden===e.orden+1}));t.orden--,e.orden++,this.actualizarOrdenSecciones({secciones:[e,t]})}},cerrarFormularioSeccion:function(){$("#formularioSeccion").modal("toggle")},editarSeccion:function(e){var t=$.extend(!0,{},this.formulario.secciones.find((function(t){return t.id===e.id})));null!==t&&(this.formulario.seccion=t,this.abrirFormularioSeccion())},eliminarSeccion:function(e){var t=this;confirm("¿Está seguro?")&&(this.cargando=!0,axios.delete("/api/secciones/".concat(e.id)).then((function(a){var r=t.formulario.secciones.indexOf(e);t.formulario.secciones.forEach((function(t){t.orden>e.orden&&t.orden--})),t.formulario.secciones.splice(r,1),t.$refs.alerta.mostrarAlerta("success","Sección eliminada"),t.cargando=!1})).catch((function(e){t.$refs.alerta.mostrarAlerta("danger","¡No se pudo eliminar debido a que existen dependencias con otros registros!"),t.cargando=!1})))},guardarSeccion:function(){var e=this;null===this.formulario.seccion.id?(this.cargando=!0,axios.post("/api/secciones",this.formulario.seccion).then((function(t){var a=t.data.data;e.formulario.secciones.push(a),e.$refs.alerta.mostrarAlerta("success",'Sección "'.concat(a.nombre,'" creada'))})).catch((function(){})).then((function(){e.cargando=!1,e.cerrarFormularioSeccion()}))):(this.cargando=!0,axios.patch("/api/secciones/".concat(this.formulario.seccion.id),this.formulario.seccion).then((function(t){var a=t.data.data,r=e.formulario.secciones.find((function(t){return t.id===e.formulario.seccion.id}));r.nombre=a.nombre,r.firma_id=a.firma_id,r.firma=a.firma,e.$refs.alerta.mostrarAlerta("success",'Sección "'.concat(r.nombre,'" actualizada'))})).catch((function(){})).then((function(){e.cargando=!1,e.cerrarFormularioSeccion()})))},limpiarSeccion:function(){this.formulario.seccion={id:null,nombre:null,orden:null,firma_id:""}},subirSeccion:function(e){if(e.orden>1){var t=this.formulario.secciones.find((function(t){return t.orden===e.orden-1}));t.orden++,e.orden--,this.actualizarOrdenSecciones({secciones:[e,t]})}}},computed:{seccionesFiltradas:function(){var e=this;return _.orderBy(this.formulario.secciones,"orden").filter((function(t){return t.nombre.toLowerCase().indexOf(e.busqueda.toLowerCase())>=0}))}}},o=r;const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Secciones\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.busqueda,expression:"busqueda"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.busqueda},on:{input:function(t){t.target.composing||(e.busqueda=t.target.value)}}})]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-primary",class:{disabled:!e.datos.permisos.crear||e.cargando},attrs:{type:"button"},on:{click:e.abrirFormularioSeccion}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v("Nuevo\n          ")])])])]},proxy:!0}])}),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover"},[e._m(0),e._v(" "),t("tbody",e._l(e.seccionesFiltradas,(function(a){return t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.orden))]),e._v(" "),t("td",[e._v(e._s(a.nombre))]),e._v(" "),t("td",[e._v(e._s(a.firma?a.firma.nombre:""))]),e._v(" "),t("td",{staticClass:"text-center"},[t("form",{attrs:{method:"POST",action:"secciones/".concat(a.id)}},[t("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:e.datos.csrf}}),e._v(" "),t("input",{attrs:{type:"hidden",name:"_method",value:"DELETE"}}),e._v(" "),t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[t("a",{staticClass:"btn btn-default btn-xs",attrs:{title:"Subir",disabled:1===a.orden||e.cargando},on:{click:function(t){return e.subirSeccion(a)}}},[t("i",{staticClass:"fas fa-chevron-up fa-fw"})]),e._v(" "),t("a",{staticClass:"btn btn-default btn-xs",attrs:{title:"Bajar",disabled:a.orden===e.formulario.secciones.length||e.cargando},on:{click:function(t){return e.bajarSeccion(a)}}},[t("i",{staticClass:"fas fa-chevron-down fa-fw"})])]),e._v(" "),t("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"..."}},[t("button",{staticClass:"btn btn-default btn-xs",class:{disabled:!e.datos.permisos.editar||e.cargando},attrs:{type:"button",title:"Editar"},on:{click:function(t){return e.editarSeccion(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar",disabled:!e.datos.permisos.eliminar||e.cargando},on:{click:function(t){return e.eliminarSeccion(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"})])])])])])})),0)]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"formularioSeccion",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.guardarSeccion.apply(null,arguments)}}},[e._m(1),e._v(" "),t("div",{staticClass:"modal-body"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.formulario.seccion.id,expression:"formulario.seccion.id"}],attrs:{type:"hidden"},domProps:{value:e.formulario.seccion.id},on:{input:function(t){t.target.composing||e.$set(e.formulario.seccion,"id",t.target.value)}}}),e._v(" "),t("div",{staticClass:"row",staticStyle:{height:"180px"}},[t("div",{staticClass:"col-sm-12 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.formulario.seccion.nombre,expression:"formulario.seccion.nombre"}],staticClass:"form-control",attrs:{type:"text",id:"nombre",maxlength:"50",required:""},domProps:{value:e.formulario.seccion.nombre},on:{input:function(t){t.target.composing||e.$set(e.formulario.seccion,"nombre",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-12 form-group"},[t("label",{attrs:{for:"firma_id"}},[e._v("Firma validación")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"firma_id",placeholder:"Seleccione...",options:e.formulario.firmas,reduce:function(e){return e.id},label:"nombre"},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.formulario.seccion.firma_id,callback:function(t){e.$set(e.formulario.seccion,"firma_id",t)},expression:"formulario.seccion.firma_id"}})],1)])]),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-primary btn-sm",attrs:{disabled:e.cargando,type:"submit"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],staticClass:"fas fa-save fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando,expression:"cargando"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n               Guardar\n            ")])])])])])])],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-md-1 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"col-md-7 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-md-2 text-center"},[e._v("Firma")]),e._v(" "),t("th",{staticClass:"col-md-2 text-center"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n              ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Sección")])])}],!1,null,null,null).exports},2739:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={props:["id","destinos"],data:function(){return{cadenaBuscarDestino:"",registro:{nombre:"",descripcion:"",mensajero_id:"",destinos:[]},mensajeros:[]}},mounted:function(){this.cargarDatos()},methods:{abrirBuscarDestinos:function(){this.cadenaBuscarDestino="",$("#modalBuscarDestino").modal()},agregarDestino:function(e){this.registro.destinos.some((function(t){return t.id===e.id}))||this.registro.destinos.push(e)},eliminarDestino:function(e){var t=this.registro.destinos.indexOf(e);this.registro.destinos.splice(t,1)},cargarDatos:function(){var e=this;"0"!==this.id?(this.$refs.cargando.alternar(),axios.get("/api/sectores/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.registro.nombre=a.nombre,e.registro.descripcion=a.descripcion,e.registro.destinos=a.destinos,e.cargarMensajeros(a.mensajero_id)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar el sector",a)})).then((function(){return e.$refs.cargando.alternar()}))):this.cargarMensajeros()},cargarMensajeros:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";axios.get("/api/catalogos",{params:{catalogo:r.oH.MENSAJEROS}}).then((function(a){var r=a.data.data;e.mensajeros=r,t&&(e.registro.mensajero_id=t)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Mensajeros",a)}))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar();var t="/api/sectores",a="post";"0"!==this.id&&(t="/api/sectores/".concat(this.id),a="patch"),axios[a](t,this.registro).then((function(){return e.redireccionar()})).catch((function(t){e.$refs.cargando.alternar(),e.alternarBotonesSubmit();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar el sector",a)}))},limpiarCadenaBuscarDestino:function(){this.cadenaBuscarDestino=""},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},redireccionar:function(){window.location.href="/sectores"},regresar:function(){window.history.back()}},computed:{destinosFiltrados:function(){var e=new RegExp(removeDiacritics(this.cadenaBuscarDestino),"i"),t=_.map(this.registro.destinos,"id");return this.destinos.filter((function(a){return!t.includes(a.id)&&(e.test(removeDiacritics(a.nombre))||e.test(a.direccion))}))},destinosOrdenados:function(){return _.orderBy(this.registro.destinos,"nombre")}}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear sector":"Editar sector")+"\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",on:{click:e.regresar}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"100",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-md-6"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"mensajero_id"}},[e._v("Mensajero")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"mensajero_id",placeholder:"Seleccione...",options:e.mensajeros,"get-option-label":function(e){return e.usuario.nombre_completo},reduce:function(e){return e.id},required:""},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.registro.mensajero_id,callback:function(t){e.$set(e.registro,"mensajero_id",t)},expression:"registro.mensajero_id"}})],1)]),e._v(" "),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-sm-6"},[t("label",{staticClass:"control-label",attrs:{for:"descripcion"}},[e._v("Descripción")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.registro.descripcion,expression:"registro.descripcion"}],staticClass:"form-control input-sm input-sm",staticStyle:{resize:"none"},attrs:{name:"descripcion",rows:"2",autocomplete:"off"},domProps:{value:e.registro.descripcion},on:{input:function(t){t.target.composing||e.$set(e.registro,"descripcion",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row"},[e._m(0),e._v(" "),t("div",{staticClass:"col-sm-4 text-right",staticStyle:{"padding-top":"25px"}},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:e.abrirBuscarDestinos}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v("Agregar\n            ")])])]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[0===e.destinosOrdenados.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("\n              No existen registros\n            ")])]):e._e(),e._v(" "),e._l(e.destinosOrdenados,(function(a){return t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.direccion))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button"},on:{click:function(t){return e.eliminarDestino(a)}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Eliminar\n              ")])])])}))],2)])])])],1),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalBuscarDestino",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(2),e._v(" "),t("alerta",{ref:"alertaBuscarDestinos"}),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-12"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBuscarDestino,expression:"cadenaBuscarDestino"}],staticClass:"form-control input-sm",attrs:{type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBuscarDestino},on:{input:function(t){t.target.composing||(e.cadenaBuscarDestino=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.limpiarCadenaBuscarDestino}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])])]),e._v(" "),t("br"),e._v(" "),t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(3),e._v(" "),t("tbody",[0===e.destinosFiltrados.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("\n                  No existen registros\n                ")])]):e._e(),e._v(" "),e._l(e.destinosFiltrados,(function(a){return[t("tr",[t("td",[e._v(e._s(a.nombre))]),e._v(" "),t("td",[e._v(e._s(a.direccion))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Agregar"},on:{click:function(t){return e.agregarDestino(a)}}},[t("i",{staticClass:"fas fa-plus"})])])])]}))],2)])])])],1)])]),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-sm-8"},[e("h3",[this._v("Destinos")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-4 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-5 text-left"},[e._v("Dirección")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×\n            ")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Destinos")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-4 text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"col-sm-6 text-left"},[e._v("Dirección")]),e._v(" "),t("th",{staticClass:"col-sm-2"})])])}],!1,null,null,null).exports},2976:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["datos"],data:function(){return{permisos:{},cargando:!1,cadenaBusqueda:"",sectores:[],paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0}}},mounted:function(){this.cargarDatos()},methods:{buscarSectores:function(){this.paginacion.paginaActual=1,this.cargarSectores()},cargarSectores:function(){var e=this;this.cargando=!0,this.sectores=[];var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginacion.paginaActual};axios.get("/api/sectores",{params:t}).then((function(t){var a=t.data.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total,e.sectores=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al listar el sector",a)})).finally((function(){return e.cargando=!1}))},cargarDatos:function(){this.permisos=this.datos.permisos,this.datos.cadenaBusqueda&&(this.cadenaBusqueda=this.datos.cadenaBusqueda),this.paginacion.paginaActual=1,this.cargarSectores()},editarSector:function(e){window.location.href="/sectores/"+e.id+"/edit"},eliminarSector:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&axios.delete("/api/sectores/"+e.id).then((function(){t.cargarDatos(),t.mostrarExito("Sector eliminado exitosamente")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al eliminar el sector",a)}))},limpiarFormulario:function(){this.cadenaBusqueda="",this.paginacion.paginaActual=1,this.cargarSectores()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{staticClass:"form-inline",attrs:{method:"POST"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Sectores\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"input-buscar",type:"text",placeholder:"Buscar...",name:"cadenaBusqueda",autofocus:""},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarSectores.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Buscar"},on:{click:e.buscarSectores}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Limpiar"},on:{click:e.limpiarFormulario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("li",[t("div",[e.$can("crear-sectores")?t("a",{staticClass:"btn btn-primary",attrs:{href:"/sectores/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo\n            ")]):e._e()])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.sectores.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.sectores,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[e._v(e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.descripcion))]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",disabled:!e.$can("editar-sectores")},on:{click:function(t){return e.editarSector(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",disabled:!e.$can("eliminar-sectores")},on:{click:function(t){return e.eliminarSector(a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n            ")])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.sectores.length,tipo:"sectores"}}),e._v(" "),!e.cargando&&e.sectores.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarSectores,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Descripción")]),e._v(" "),t("th",{staticClass:"col-md-2 text-center"})])])}],!1,null,null,null).exports},8320:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var r=a(4590),o=a(7974),i=a(8728),s=a(9794),n=a(9676),c=a(9107);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m={components:{SistemaExternoResultadosModal:i.Z,BuscarUsuarioModal:s.Z,BuscarPacienteModal:n.Z,BuscarExamenModal:c.Z},props:["datos"],data:function(){return{cargando:!1,cargandoTodos:!1,enviandoASistemaExterno:!1,procesando:!1,paginaActual:1,totalPaginas:0,totalRegistros:0,seleccionadosTodos:!1,idsOrdenesSeleccionados:[],clientes:[],sistemasExternos:[],tiposAtenciones:[],secciones:[],ordenes:[],nombrePaciente:"",nombreUsuario:"",examenCodigo:"",filtros:{fechaDesde:moment().format("YYYY-MM-DD"),fechaHasta:moment().format("YYYY-MM-DD"),sistemaExternoId:null,clienteId:null,categoriaId:null,tipoAtencionId:null,seccionId:null,usuarioValidaId:null,examenId:null,pacienteId:null,pacienteType:null,numerosOrdenes:null,estado:null,ordenesEnviadas:!1}}},created:function(){this.$usuario.sistemaHisId&&(this.filtros.sistemaExternoId=parseInt(this.$usuario.sistemaHisId))},mounted:function(){$("body").tooltip({selector:'[rel="tooltip"]',container:"body",trigger:"hover"}),this.cargarCatalogos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},borrarFiltros:function(){this.filtros.fechaDesde="",this.filtros.fechaHasta="",this.filtros.numerosOrdenes="",this.filtros.clienteId=null,this.filtros.categoriaId=null,this.filtros.tipoAtencionId=null,this.filtros.usuarioValidaId=null,this.filtros.seccionId=null,this.filtros.pacienteId=null,this.filtros.pacienteType=null,this.filtros.examenId=null,this.examenCodigo=null,this.filtros.estado=null,this.filtros.ordenesEnviadas=!1,this.nombrePaciente=null,this.nombreUsuario=null},cargarCatalogos:function(){var e=this;axios.get("/api/catalogos",{params:{catalogo:r.oH.CLIENTES}}).then((function(t){var a=t.data;e.clientes=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar Clientes"),e.mostrarErrores(a)})),axios.get("/api/sistemas-externos",{params:{tipo:"HIS,LIS",enviarResultados:1}}).then((function(t){var a=t.data;e.sistemasExternos=[],a.data.forEach((function(t){if(e.$can("enviar-sistema-externo")&&(t.id_unico=t.id,t.es_adicional=!1,e.sistemasExternos.push(t)),e.$can("enviar-his-adicional")&&(e.$can("cambiar-sistema-externo")||e.$usuario.sistemaHisId===t.id)&&_.get(t.extras,"his_adicional.enviar_resultados")){var a=_.cloneDeep(t);a.es_adicional=!0,a.id_unico=t.id+"A",a.driver=t.extras.his_adicional.driver,a.nombre=t.extras.his_adicional.nombre,e.sistemasExternos.push(a),e.$can("enviar-sistema-externo")||e.$usuario.sistemaHisId!==t.id||(e.filtros.sistemaExternoId=a.id_unico)}})),e.sistemasExternos=_.orderBy(e.sistemasExternos,"nombre"),1===e.sistemasExternos.length&&(e.filtros.sistemaExternoId=e.sistemasExternos[0].id_unico),0===e.sistemasExternos.length&&(e.filtros.sistemaExternoId=null)})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar Sistemas externos"),e.mostrarErrores(a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.TIPO_ATENCION}}).then((function(t){var a=t.data;e.tiposAtenciones=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar Tipos de atenciones"),e.mostrarErrores(a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.SECCIONES}}).then((function(t){var a=t.data;e.secciones=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);a.push("Error al cargar Secciones"),e.mostrarErrores(a)}))},buscar:function(){this.paginaActual=1,this.cargarOrdenes()},cargarOrdenes:function(){var e=this;if(this.filtros.sistemaExternoId){this.cargando=!0,this.ordenes=[],this.idsOrdenesSeleccionados=[];var t=d(d({},this.filtros),{},{estadosDetalles:[r.RI.PRELIMINAR,r.RI.VALIDADO],enviarResultados:this.sistemaExterno.es_adicional?0:1,enviarResultadosAdicional:this.sistemaExterno.es_adicional?1:0,incluir:"sistemaExterno,paciente",tamano:20,page:this.paginaActual});this.datos.configs.iessEnviarNoProcesados&&t.estadosDetalles.push(r.RI.NO_PROCESADO),t.soloPendientesEnviar=t.ordenesEnviadas?0:1,t.sistemaExternoId=_.replace(t.sistemaExternoId,"A",""),axios.get("/api/ordenes/buscar",{params:t}).then((function(t){var a=t.data.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,a.data.forEach((function(t){t.paciente.numero_historia_clinica=e.obtenerNumeroHistoriaClinica(t,t.sistema_externo_id)})),e.ordenes=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al buscar órdenes"),e.mostrarErrores(a)})).then((function(){return e.cargando=!1}))}else this.mostrarErrores("Sistema externo sin definir")},enviar:function(){var e=this;this.enviandoASistemaExterno=!0;var t={soloPendientesEnviar:this.filtros.ordenesEnviadas?0:1,idsOrdenes:this.idsOrdenesSeleccionados,seccionId:this.filtros.seccionId,examenId:this.filtros.examenId,usuarioValidaId:this.filtros.usuarioValidaId,enviarAHisAdicional:this.sistemaExterno.es_adicional?1:0};this.mostrarInformativo("Enviando resultados, por favor espere"),axios.post("/api/sistemas-externos/".concat(this.sistemaExterno.id,"/enviar"),t).then((function(t){var a=t.data.data;if(e.$refs.alerta.ocultarAlertas(),a.examenesProcesados>0&&e.cargarOrdenes(),a.erroresHomologacion.length>0&&e.mostrarAdvertencia(a.erroresHomologacion),a.examenesProcesados>0&&a.examenesProcesados>=a.totalExamenes){var r=["Órdenes enviadas: ".concat(a.ordenesProcesadas,"/").concat(a.totalOrdenes),"Exámenes enviados: ".concat(a.examenesProcesados,"/").concat(a.totalExamenes)];e.mostrarExito(r)}if(a.examenesProcesados>0&&a.examenesProcesados<a.totalExamenes){var o=["No se enviaron algunos resultados","Órdenes enviadas: ".concat(a.ordenesProcesadas,"/").concat(a.totalOrdenes),"Exámenes enviados: ".concat(a.examenesProcesados,"/").concat(a.totalExamenes)];e.mostrarAdvertencia(o)}a.errores>0&&e.mostrarErrores(a.mensajes),a.examenesProcesados<1&&e.mostrarInformativo("No se envio ningun resultado")})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al enviar resultados"),e.mostrarErrores(a)})).then((function(){return e.enviandoASistemaExterno=!1}))},alternarSeleccion:function(){this.seleccionadosTodos?this.obtenerIdsOrdenesDeTodos():this.idsOrdenesSeleccionados=[]},obtenerIdsOrdenesDeTodos:function(){var e=this,t=d(d({},this.filtros),{},{estadosDetalles:[r.RI.PRELIMINAR,r.RI.VALIDADO],enviarResultados:this.sistemaExterno.es_adicional?0:1,enviarResultadosAdicional:this.sistemaExterno.es_adicional?1:0,soloIds:1});t.soloPendientesEnviar=t.ordenesEnviadas?0:1,t.sistemaExternoId=_.replace(t.sistemaExternoId,"A",""),this.cargandoTodos=!0,axios.get("/api/ordenes/buscar",{params:t}).then((function(t){var a=t.data.data;e.idsOrdenesSeleccionados=a.map((function(e){return e.id}))})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al seleccionar todos"),e.mostrarErrores(a)})).then((function(){return e.cargandoTodos=!1}))},seleccionarOrden:function(e){if(this.idsOrdenesSeleccionados.includes(e.id)){var t=this.idsOrdenesSeleccionados.indexOf(e.id);this.idsOrdenesSeleccionados.splice(t,1)}else this.idsOrdenesSeleccionados.push(e.id)},pacienteSeleccionado:function(e){this.filtros.pacienteId=e.id,this.filtros.pacienteType=e.tipo,this.nombrePaciente=e.nombre_paciente},borrarFiltroPaciente:function(){this.filtros.pacienteId="",this.filtros.pacienteType="",this.nombrePaciente=""},abrirModalOrdenSistemaExterno:function(e){var t=(0,o.MD)({"orden-id":e.id});$("#sistemaExternoResultadosModal").modal({},t)},usuarioSeleccionado:function(e){this.filtros.usuarioValidaId=e.id,this.nombreUsuario=e.nombre_usuario},borrarFiltroUsuario:function(){this.filtros.usuarioValidaId="",this.nombreUsuario=""},cambioSistemaExterno:function(){this.cargando=!1,this.ordenes=[],this.totalRegistros=0,this.totalPaginas=0,this.paginaActual=1,this.idsOrdenesSeleccionados=[]},examenSeleccionado:function(e){this.filtros.examenId=e.id,this.examenCodigo=e.codigo,this.filtros.seccionId=""},cambioSeccion:function(e){e&&(this.examenCodigo="",this.filtros.examenId="")},borrarFiltroExamen:function(){this.filtros.examenId="",this.examenCodigo=""}},computed:{categorias:function(){var e=this;if(this.filtros.categoriaId="",this.filtros.clienteId){var t=this.clientes.find((function(t){return t.id===e.filtros.clienteId})).subempresas,a=t.find((function(e){return e.predeterminada}));return this.filtros.categoriaId=a?a.id:null,t}return[]},seleccionados:function(){return 1===this.totalRegistros?"".concat(this.idsOrdenesSeleccionados.length,"/").concat(this.totalRegistros," orden"):"".concat(this.idsOrdenesSeleccionados.length,"/").concat(this.totalRegistros," órdenes")},sistemaExterno:function(){var e=this;return this.filtros.sistemaExternoId?this.sistemasExternos.find((function(t){return t.id_unico===e.filtros.sistemaExternoId})):null},nombreSistemaExterno:function(){return _.get(this.sistemaExterno,"es_adicional")?this.sistemaExterno.nombre:_.get(this.sistemaExterno,"extras.codigo_unidad_medica")?"".concat(this.sistemaExterno.nombre," - ").concat(this.sistemaExterno.extras.codigo_unidad_medica):this.sistemaExterno?this.sistemaExterno.nombre:"Sin definir"}},watch:{idsOrdenesSeleccionados:function(e){this.seleccionadosTodos=e.length>0&&e.length===this.totalRegistros}}};const p=(0,a(1900).Z)(m,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta",attrs:{timeout:2e4}}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.buscar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Enviar resultados\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",disabled:e.enviandoASistemaExterno||0===e.idsOrdenesSeleccionados.length},on:{click:e.enviar}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.enviandoASistemaExterno,expression:"!enviandoASistemaExterno"}],staticClass:"fas fa-upload"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.enviandoASistemaExterno,expression:"enviandoASistemaExterno"}],staticClass:"fas fa-spinner fa-spin"}),e._v("\n               \n              Enviar a "+e._s(e.nombreSistemaExterno)+"\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel-group",attrs:{id:"accordion"}},[t("div",{staticClass:"panel panel-gris",attrs:{id:"panelNuevo"}},[e._m(0),e._v(" "),t("div",{staticClass:"panel-collapse collapse in",attrs:{id:"collapseNuevo"}},[t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.buscar.apply(null,arguments)}}},[t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",class:{obligatorio:e.$can("cambiar-sistema-externo")},attrs:{for:"sistemaExterno"}},[e._v("Sistema externo")]),e._v(" "),e.$can("cambiar-sistema-externo")?t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.sistemaExternoId,expression:"filtros.sistemaExternoId"}],staticClass:"form-control input-sm",attrs:{id:"sistemaExterno",name:"sistemaExterno",required:"",disabled:e.enviandoASistemaExterno},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"sistemaExternoId",t.target.multiple?a:a[0])},e.cambioSistemaExterno]}},[t("option",{domProps:{value:null}},[e._v("Seleccione...")]),e._v(" "),e._l(e.sistemasExternos,(function(a){return t("option",{domProps:{value:a.id_unico}},[e._v("\n                      "+e._s(a.nombre)+"\n                      "),a.es_adicional?e._e():[e._v("\n                        "+e._s(a.extras&&a.extras.codigo_unidad_medica?" - "+a.extras.codigo_unidad_medica:"")+"\n                      ")]],2)}))],2):e._e(),e._v(" "),e.$can("cambiar-sistema-externo")?e._e():t("div",[e._v("\n                    "+e._s(e.nombreSistemaExterno)+"\n                  ")])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"fechaDesde"}},[e._v("Fechas")]),e._v(" "),t("div",{staticClass:"input-daterange input-group",attrs:{id:"datepicker"}},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaDesde,expression:"filtros.fechaDesde"}],staticClass:"form-control input-sm",attrs:{id:"fechaDesde",name:"start",type:"text","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}}),e._v(" "),t("span",{staticClass:"input-group-addon"},[e._v("a")]),e._v(" "),t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaHasta,expression:"filtros.fechaHasta"}],staticClass:"form-control input-sm",attrs:{name:"end",type:"text",autocomplete:"off","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked",placeholder:"aaaa-mm-dd"}})])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"clienteId"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"clienteId",placeholder:"Todos",label:"nombre",options:e.clientes,reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.clienteId,callback:function(t){e.$set(e.filtros,"clienteId",t)},expression:"filtros.clienteId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"categoriaId"}},[e._v("Categoría")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"categoriaId",placeholder:"Todos",label:"nombre",options:e.categorias,reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.categoriaId,callback:function(t){e.$set(e.filtros,"categoriaId",t)},expression:"filtros.categoriaId"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.tipoAtencionId,expression:"filtros.tipoAtencionId"}],staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",name:"tipo_atencion_id"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"tipoAtencionId",t.target.multiple?a:a[0])}}},[t("option",{domProps:{value:null}},[e._v("Todos")]),e._v(" "),e._l(e.tiposAtenciones,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                      "+e._s(a.nombre)+"\n                    ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numeroOrden"}},[e._v("Orden No.")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numerosOrdenes,expression:"filtros.numerosOrdenes"}],staticClass:"form-control input-sm",attrs:{id:"numeroOrden",type:"text"},domProps:{value:e.filtros.numerosOrdenes},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numerosOrdenes",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"estado"}},[e._v("Estado")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control input-sm",attrs:{id:"estado",name:"estado"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])}}},[t("option",{domProps:{value:null}},[e._v("Todos")]),e._v(" "),t("option",{attrs:{value:"P"}},[e._v("En Proceso")]),e._v(" "),t("option",{attrs:{value:"L"}},[e._v("Preliminar")]),e._v(" "),t("option",{attrs:{value:"V"}},[e._v("Validado")])])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"paciente"}},[e._v("Paciente")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.nombrePaciente,expression:"nombrePaciente"}],staticClass:"form-control input-sm",attrs:{id:"paciente",type:"text",readonly:""},domProps:{value:e.nombrePaciente},on:{input:function(t){t.target.composing||(e.nombrePaciente=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroPaciente}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})]),e._v(" "),e._m(1)])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"examen_codigo"}},[e._v("Examen")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.examenCodigo,expression:"examenCodigo"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"examen_codigo",maxlength:"15",readonly:""},domProps:{value:e.examenCodigo},on:{input:function(t){t.target.composing||(e.examenCodigo=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[e._m(2),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroExamen}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Todos",options:e.secciones,label:"nombre",reduce:function(e){return e.id}},on:{input:e.cambioSeccion},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.seccionId,callback:function(t){e.$set(e.filtros,"seccionId",t)},expression:"filtros.seccionId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"usuario"}},[e._v("Usuario valida")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.nombreUsuario,expression:"nombreUsuario"}],staticClass:"form-control input-sm",attrs:{id:"usuario",type:"text",readonly:""},domProps:{value:e.nombreUsuario},on:{input:function(t){t.target.composing||(e.nombreUsuario=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[e._m(3),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Borrar filtro"},on:{click:e.borrarFiltroUsuario}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.ordenesEnviadas,expression:"filtros.ordenesEnviadas"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.filtros.ordenesEnviadas)?e._i(e.filtros.ordenesEnviadas,null)>-1:e.filtros.ordenesEnviadas},on:{change:function(t){var a=e.filtros.ordenesEnviadas,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.filtros,"ordenesEnviadas",a.concat([null])):i>-1&&e.$set(e.filtros,"ordenesEnviadas",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"ordenesEnviadas",o)}}}),e._v("\n                      Incluir órdenes enviadas\n                    ")])])])])]),e._v(" "),t("div",{staticClass:"panel-footer"},[t("button",{ref:"botonBuscar",staticClass:"btn btn-sm btn-primary",attrs:{disabled:e.cargando||e.enviandoASistemaExterno,type:"submit"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando,expression:"cargando"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],staticClass:"fas fa-search fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n                 Buscar\n              ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{disabled:e.enviandoASistemaExterno,type:"button"},on:{click:e.borrarFiltros}},[t("i",{attrs:{"aria-hidden":"true"}}),e._v("Borrar filtros\n              ")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.totalRegistros>0,expression:"totalRegistros > 0"}],staticClass:"badge cursor-menu pull-right",staticStyle:{"margin-top":"10px"}},[e._v("\n                "+e._s(e.seleccionados)+"\n              ")])])])])]),e._v(" "),!e.cargando&&e.ordenes.length>0?t("div",[t("br"),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed sticky-top"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center puntero"},[t("input",{directives:[{name:"show",rawName:"v-show",value:!e.cargandoTodos,expression:"!cargandoTodos"},{name:"model",rawName:"v-model",value:e.seleccionadosTodos,expression:"seleccionadosTodos"}],attrs:{type:"checkbox",disabled:e.enviandoASistemaExterno},domProps:{checked:Array.isArray(e.seleccionadosTodos)?e._i(e.seleccionadosTodos,null)>-1:e.seleccionadosTodos},on:{change:[function(t){var a=e.seleccionadosTodos,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.seleccionadosTodos=a.concat([null])):i>-1&&(e.seleccionadosTodos=a.slice(0,i).concat(a.slice(i+1)))}else e.seleccionadosTodos=o},e.alternarSeleccion]}}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargandoTodos,expression:"cargandoTodos"}],staticClass:"fa fa-spinner fa-spin"})]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Sistema externo")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1"})])]),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",{staticClass:"puntero"},[t("td",{staticClass:"text-center",on:{click:function(t){return e.seleccionarOrden(a)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.idsOrdenesSeleccionados,expression:"idsOrdenesSeleccionados"}],staticClass:"puntero",attrs:{type:"checkbox",disabled:e.enviandoASistemaExterno},domProps:{value:a.id,checked:Array.isArray(e.idsOrdenesSeleccionados)?e._i(e.idsOrdenesSeleccionados,a.id)>-1:e.idsOrdenesSeleccionados},on:{change:function(t){var r=e.idsOrdenesSeleccionados,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.id,n=e._i(r,s);o.checked?n<0&&(e.idsOrdenesSeleccionados=r.concat([s])):n>-1&&(e.idsOrdenesSeleccionados=r.slice(0,n).concat(r.slice(n+1)))}else e.idsOrdenesSeleccionados=i}}})]),e._v(" "),t("td",{staticClass:"text-center",on:{click:function(t){return e.seleccionarOrden(a)}}},[e._v(e._s(a.sistema_externo.nombre))]),e._v(" "),t("td",{staticClass:"text-center",on:{click:function(t){return e.seleccionarOrden(a)}}},[t("small",[e._v("\n                  "+e._s(a.numero_orden_externa)+"\n                ")]),e._v(" "),t("div",[e._v("\n                  "+e._s(a.numero_orden)+"\n                ")])]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea",on:{click:function(t){return e.seleccionarOrden(a)}}},[t("div",{staticClass:"no-salto-linea",attrs:{title:e.$usuario.zonaHoraria},domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_orden,"YYYY-MM-DD </br> HH:mm"))}})]),e._v(" "),t("td",{staticClass:"text-left",on:{click:function(t){return e.seleccionarOrden(a)}}},[t("small",[e._v("\n                  "+e._s(a.paciente.numero_identificacion)+" "+e._s(a.paciente.numero_historia_clinica?"(".concat(a.paciente.numero_historia_clinica,")"):"")+"\n                ")]),e._v(" "),t("div",[e._v("\n                  "+e._s(a.paciente.nombre_paciente)+"\n                ")])]),e._v(" "),t("td",{staticClass:"text-center"},[t("orden-estado",{attrs:{estado:a.estado}})],1),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:function(t){return e.abrirModalOrdenSistemaExterno(a)}}},[t("i",{staticClass:"fas fa-list-ul"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.ordenes.length},scopedSlots:e._u([{key:"no-resultado",fn:function(){return[e._v("No existen exámenes pendientes de enviar")]},proxy:!0}])}),e._v(" "),e.ordenes.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros)+"\n        ")]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"page-range":7,"container-class":"pagination","click-handler":e.cargarOrdenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e()],1)],1),e._v(" "),t("buscar-paciente-modal",{on:{"paciente-seleccionado":e.pacienteSeleccionado}}),e._v(" "),t("sistema-externo-resultados-modal",{attrs:{descargar:!1,enviar:!1,filtros:e.filtros,"es-adicional":e.sistemaExterno&&e.sistemaExterno.es_adicional}}),e._v(" "),t("buscar-usuario-modal",{on:{"usuario-seleccionado":e.usuarioSeleccionado}}),e._v(" "),t("buscar-examen-modal",{on:{"examen-seleccionado":e.examenSeleccionado}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading",attrs:{"data-toggle":"collapse","data-target":"#collapseNuevo"}},[e("div",{staticClass:"panel-title"},[e("a",[this._v("\n              Filtros\n            ")])])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarPaciente",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarExamen",title:"Buscar"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button",title:"Buscar","data-toggle":"modal","data-target":"#buscarUsuario"}},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])}],!1,null,null,null).exports},8118:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["nuevo","empresa","tarifas","listasubempresas","permisos"],data:function(){return{registro:{empresa_id:this.empresa.id,tarifa_venta_id:"",nombre:"",referencia_auxiliar:"",porcentaje_descuento:"",predeterminada:!1},subempresas:[]}},mounted:function(){var e=this;this.subempresas=this.listasubempresas.map((function(t){return e.crearSubemrpesa(t)})),this.nuevo&&(this.subempresas[0].editing=!0,this.mostrarInformativo('Complete el "Nombre" y "Tarifa venta" de la categoría generada'))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarExito:function(e){this.$refs.alerta.mostrarAlerta("success",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;axios.get("/api/empresas/"+this.empresa.id+"/subempresas").then((function(t){e.subempresas=t.data.data.map((function(t){return e.crearSubemrpesa(t)}))})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar categorías",a)})).then((function(){return e.$refs.cargando.alternar()}))},guardar:function(){var e=this;this.alternarBotonesSubmit(),this.$refs.cargando.alternar(),axios.post("/api/empresas/"+this.registro.empresa_id+"/subempresas",this.registro).then((function(){e.limpiarRegistro(),e.mostrarExito("Categoría creada"),e.cargarDatos()})).catch((function(t){e.$refs.cargando.alternar();var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al guardar exámenes",a)})).then((function(){return e.alternarBotonesSubmit()}))},crearSubemrpesa:function(e){return{id:e.id,nombre:e.nombre,tarifa_venta_id:e.tarifa_venta_id?e.tarifa_venta_id:"",empresa_id:e.empresa_id,predeterminada:e.predeterminada,referencia_auxiliar:e.referencia_auxiliar,porcentaje_descuento:e.porcentaje_descuento,editing:!1,temporal:null}},limpiarRegistro:function(){this.registro.referencia_auxiliar="",this.registro.porcentaje_descuento="",this.registro.tarifa_venta_id="",this.registro.nombre="",this.registro.predeterminada=!1},editar:function(e){e.temporal=$.extend({},e),e.editing=!0},actualizar:function(e){var t=this;this.$refs.cargando.alternar(),axios.patch("/api/empresas/"+e.empresa_id+"/subempresas/"+e.id,e).then((function(){t.mostrarExito("Categoría <strong>"+e.nombre+"</strong> actualizada"),e.editing=!1,t.cargarDatos()})).catch((function(e){t.$refs.cargando.alternar();var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al guardar",a)}))},eliminar:function(e){var t=this;confirm("¿Está seguro?")&&(this.$refs.cargando.alternar(),axios.delete("/api/empresas/"+e.empresa_id+"/subempresas/"+e.id,e).then((function(){var a=t.subempresas.indexOf(e);t.mostrarExito('Categoría "'+e.nombre+'" eliminada'),t.subempresas.splice(a,1)})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al guardar exámenes!",a)})).then((function(){return t.$refs.cargando.alternar()})))},cancelar:function(e){e.nombre=e.temporal.nombre,e.tarifa_venta_id=e.temporal.tarifa_venta_id,e.referencia_auxiliar=e.temporal.referencia_auxiliar,e.porcentaje_descuento=e.temporal.porcentaje_descuento,e.editing=!1,e.temporal=null},obtenerNombreTarifa:function(e){var t="";return e&&(t=this.tarifas.find((function(t){return t.id===e})).nombre),t},marcarPredeterminada:function(e){var t=this;this.$refs.cargando.alternar(),axios.patch("/api/empresas/"+e.empresa_id+"/subempresas/"+e.id+"/predeterminada").then((function(a){t.mostrarExito("Categoría <strong>"+e.nombre+"</strong> marcada como predeterminada"),t.cargarDatos()})).catch((function(e){t.$refs.cargando.alternar();var a=t.procesarErrorResponse(e);t.mostrarErrores("Error al guardar",a)}))},terminar:function(){var e=this,t=!1,a=0;this.subempresas.forEach((function(r){if(null==r.tarifa_venta_id||!r.tarifa_venta_id)return e.mostrarErrores("Es requerido definir una tarifa para la categoría <strong>"+r.nombre+"</strong>"),void(t=!0);r.predeterminada&&a++})),t||(0!==a?window.location.href="/clientes":this.mostrarErrores("Debe definir por lo menos una categoría como predeterminada"))}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Categorías\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("a",{directives:[{name:"show",rawName:"v-show",value:!e.nuevo,expression:"!nuevo"}],staticClass:"btn btn-default",attrs:{href:"javascript:history.back()"}},[e._v("Regresar")]),e._v(" "),t("a",{directives:[{name:"show",rawName:"v-show",value:e.nuevo,expression:"nuevo"}],staticClass:"btn btn-default",on:{click:e.terminar}},[e._v("Terminar")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[t("div",{staticClass:"panel-heading"},[e._v("Nueva categoría")]),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{id:"nombre",name:"nombre",type:"text",maxlength:"70",autocomplete:"off",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2"},[t("label",{staticClass:"control-label",attrs:{for:"referencia_auxiliar_nuevo"}},[e._v("Referencia auxiliar")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.referencia_auxiliar,expression:"registro.referencia_auxiliar"}],staticClass:"form-control input-sm",attrs:{id:"referencia_auxiliar_nuevo",name:"referencia_auxiliar_nuevo",type:"text",maxlength:"60",autocomplete:"off"},domProps:{value:e.registro.referencia_auxiliar},on:{input:function(t){t.target.composing||e.$set(e.registro,"referencia_auxiliar",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-1"},[t("label",{staticClass:"control-label",attrs:{for:"nombre"}},[e._v("Descuento")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.porcentaje_descuento,expression:"registro.porcentaje_descuento"}],staticClass:"form-control input-sm",attrs:{id:"porcentaje_descuento",name:"porcentaje_descuento",type:"number",min:"0",max:"100",step:"0.01",placeholder:"%",autocomplete:"off"},domProps:{value:e.registro.porcentaje_descuento},on:{input:function(t){t.target.composing||e.$set(e.registro,"porcentaje_descuento",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"tarifa_venta_id"}},[e._v("Tarifa venta")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",staticStyle:{"font-weight":"400 !important"},attrs:{id:"tarifa_venta_id",placeholder:"Seleccione...",options:e.tarifas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"search",fn:function(a){var r=a.attributes,o=a.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!e.registro.tarifa_venta_id}},"input",r,!1),o))]}},{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.registro.tarifa_venta_id,callback:function(t){e.$set(e.registro,"tarifa_venta_id",t)},expression:"registro.tarifa_venta_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-1"},[t("label",[e._v(" ")]),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.predeterminada,expression:"registro.predeterminada"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.registro.predeterminada)?e._i(e.registro.predeterminada,null)>-1:e.registro.predeterminada},on:{change:function(t){var a=e.registro.predeterminada,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"predeterminada",a.concat([null])):i>-1&&e.$set(e.registro,"predeterminada",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"predeterminada",o)}}}),e._v("Predeterminada\n              ")])])]),e._v(" "),t("div",{staticClass:"col-sm-12 col-md-2 col-lg-2 margen-superior-boton text-right"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit",disabled:!(e.permisos.editar||e.permisos.crear)}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v(" Agregar\n            ")])])])])])],1),e._v(" "),t("legend",[e._v("Categorías del cliente "),t("strong",[e._v(e._s(e.empresa.nombre))])]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover",attrs:{id:"categoria"}},[e._m(0),e._v(" "),t("tbody",e._l(e.subempresas,(function(a){return t("tr",[a.editing?[t("td",{staticClass:"text-center"},[e._v(" "+e._s(a.id))]),e._v(" "),t("td",{staticClass:"text-left"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.nombre,expression:"subempresa.nombre"}],staticClass:"form-control input-xs",attrs:{type:"text",id:"nombre_subempresa",maxlength:"70",required:""},domProps:{value:a.nombre},on:{input:function(t){t.target.composing||e.$set(a,"nombre",t.target.value)}}})]),e._v(" "),t("td",{staticClass:"text-left"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.referencia_auxiliar,expression:"subempresa.referencia_auxiliar"}],staticClass:"form-control input-xs",attrs:{id:"referencia_auxiliar",type:"text",maxlength:"60",autocomplete:"off"},domProps:{value:a.referencia_auxiliar},on:{input:function(t){t.target.composing||e.$set(a,"referencia_auxiliar",t.target.value)}}})]),e._v(" "),t("td",{staticClass:"text-left"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.porcentaje_descuento,expression:"subempresa.porcentaje_descuento"}],staticClass:"form-control input-xs",attrs:{type:"number",min:"0",max:"100",step:"0.01",autocomplete:"off"},domProps:{value:a.porcentaje_descuento},on:{input:function(t){t.target.composing||e.$set(a,"porcentaje_descuento",t.target.value)}}})]),e._v(" "),t("td",{staticClass:"text-left"},[t("v-select",{staticClass:"form-control input-xs",staticStyle:{"font-weight":"400 !important"},attrs:{id:"empresas",placeholder:"Seleccione...",options:e.tarifas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"search",fn:function(r){var o=r.attributes,i=r.events;return[t("input",e._g(e._b({staticClass:"vs__search",attrs:{required:!a.tarifa_venta_id}},"input",o,!1),i))]}},{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!0),model:{value:a.tarifa_venta_id,callback:function(t){e.$set(a,"tarifa_venta_id",t)},expression:"subempresa.tarifa_venta_id"}})],1),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.predeterminada,expression:"subempresa.predeterminada"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.predeterminada)?e._i(a.predeterminada,null)>-1:a.predeterminada},on:{change:function(t){var r=a.predeterminada,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"predeterminada",r.concat([null])):s>-1&&e.$set(a,"predeterminada",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"predeterminada",i)}}})])])]),e._v(" "),t("td",{staticClass:"text-center"},[t("a",{staticClass:"btn btn-primary btn-xs",on:{click:function(t){return e.actualizar(a)}}},[t("i",{staticClass:"fas fa-save"}),e._v(" Guardar")]),e._v(" "),t("a",{staticClass:"btn btn-default btn-xs",on:{click:function(t){return e.cancelar(a)}}},[e._v("Cancelar")])])]:[t("td",{staticClass:"text-center"},[e._v(" "+e._s(a.id))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(" "+e._s(a.nombre))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(" "+e._s(a.referencia_auxiliar))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v(" "+e._s(a.porcentaje_descuento))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(" "+e._s(e.obtenerNombreTarifa(a.tarifa_venta_id)))]),e._v(" "),t("td",{staticClass:"text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.predeterminada,expression:"subempresa.predeterminada"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.predeterminada)?e._i(a.predeterminada,null)>-1:a.predeterminada},on:{click:function(t){return e.marcarPredeterminada(a)},change:function(t){var r=a.predeterminada,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=e._i(r,null);o.checked?s<0&&e.$set(a,"predeterminada",r.concat([null])):s>-1&&e.$set(a,"predeterminada",r.slice(0,s).concat(r.slice(s+1)))}else e.$set(a,"predeterminada",i)}}})]),e._v(" "),t("td",{staticClass:"text-center"},[t("a",{class:"btn btn-default btn-xs"+(e.permisos.editar||e.permisos.crear?"":" disabled"),attrs:{href:"#"},on:{click:function(t){return e.editar(a)}}},[t("i",{staticClass:"fas fa-edit"}),e._v(" Editar")]),e._v(" "),t("a",{class:"btn btn-danger btn-xs"+(e.permisos.editar||e.permisos.crear?"":" disabled"),on:{click:function(t){return e.eliminar(a)}}},[t("i",{staticClass:"fas fa-trash"}),e._v(" Eliminar")])])]],2)})),0)]),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"text-center col-md-1"},[e._v("ID")]),e._v(" "),t("th",{staticClass:"text-left obligatorio"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"text-left col-sm-2"},[e._v("Referencia Auxiliar")]),e._v(" "),t("th",{staticClass:"text-left col-sm-1"},[e._v("Descuento")]),e._v(" "),t("th",{staticClass:"text-left col-md-2 obligatorio"},[e._v("Tarifa venta")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Predeterminada")]),e._v(" "),t("th",{staticClass:"col-sm-2 col-md-2 col-lg-2"})])])}],!1,null,null,null).exports},194:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id","permisos"],data:function(){return{sujetoObjeto:{id:"",taxonomia_id:"",residencia_responsable_id:"",numero_identificacion:"",descripcion:"",sexo:"",nombres_responsable:"",apellidos_responsable:"",telefono_convencional_responsable:"",telefono_celular_responsable:"",direccion_responsable:"",correo_responsable:"",nivel1:"",nivel2:"",nivel3:"",nivel4:""},taxonomia:{nivel2:"",nivel3:""}}},mounted:function(){this.cargarDatos()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},cargarDatos:function(){var e=this;"0"===this.id?this.cargarUbicacionDesdeCookie(this.sujetoObjeto):(this.$refs.cargando.alternar(),axios.get("/api/sujetos/objetos/".concat(this.id,"/edit")).then((function(t){var a=t.data.data;e.sujetoObjeto.id=a.id,e.sujetoObjeto.taxonomia_id=a.taxonomia_id,e.sujetoObjeto.residencia_responsable_id=a.residencia_responsable_id,e.sujetoObjeto.numero_identificacion=a.numero_identificacion,e.sujetoObjeto.descripcion=a.descripcion,e.sujetoObjeto.nombres_responsable=a.nombres_responsable,e.sujetoObjeto.apellidos_responsable=a.apellidos_responsable,e.sujetoObjeto.telefono_convencional_responsable=a.telefono_convencional_responsable,e.sujetoObjeto.telefono_celular_responsable=a.telefono_celular_responsable,e.sujetoObjeto.direccion_responsable=a.direccion_responsable,e.sujetoObjeto.correo_responsable=a.correo_responsable,e.sujetoObjeto.sexo=a.sexo?a.sexo:"",e.sujetoObjeto.residencia_responsable_id=a.residencia_responsable_id?a.residencia_responsable_id:"",e.cargarUbicacionResponsable(e.sujetoObjeto,a.residencia_responsable),e.cargarTaxonomia(a)})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar objeto!",a)})).then((function(){return e.$refs.cargando.alternar()})))},cargarUbicacionDesdeCookie:function(e){e.nivel2=localStorage.getItem("nivel2"),e.nivel3=localStorage.getItem("nivel3"),e.nivel2=e.nivel2?parseInt(e.nivel2):"",e.nivel3=e.nivel3?parseInt(e.nivel3):""},redireccionar:function(){window.location.href="/sujetos/objetos"},guardar:function(){var e=this;this.$refs.cargando.alternar(),this.alternarBotonesSubmit(),this.definirTaxonomia(),this.sujetoObjeto.id?axios.patch("/api/sujetos/objetos/".concat(this.sujetoObjeto.id),this.sujetoObjeto).then((function(){return e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al actualizar objeto!",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})):axios.post("/api/sujetos/objetos",this.sujetoObjeto).then((function(){return e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al guardar objeto!",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()}))},definirTaxonomia:function(){this.taxonomia.nivel2&&(this.sujetoObjeto.taxonomia_id=this.taxonomia.nivel2,this.taxonomia.nivel3&&(this.sujetoObjeto.taxonomia_id=this.taxonomia.nivel3))},cargarTaxonomia:function(e){var t=e.taxonomia;t&&2===t.nivel&&(this.taxonomia.nivel2=t.id),t&&3===t.nivel&&(this.taxonomia.nivel3=t.id,this.taxonomia.nivel2=t.padre.id)},cargarUbicacionResponsable:function(e,t){t&&4===t.nivel&&(e.nivel4=t.id,e.nivel3=t.padre?t.padre.id:"",e.nivel2=t.padre.padre?t.padre.padre.id:"",e.nivel1=t.padre.padre?t.padre.padre.padre_id:""),t&&3===t.nivel&&(e.nivel3=t.id,e.nivel2=t.padre?t.padre.id:"",e.nivel1=t.padre.padre?t.padre.padre.id:""),t&&2===t.nivel&&(e.nivel2=t.id,e.nivel1=t.padre?t.padre.id:"")}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear":"Editar")+" Objeto\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[e.permisos.crearPacientes||e.permisos.editarPacientes?t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")]):e._e()]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{type:"button",href:"/sujetos/objetos/create"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" Nuevo")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"javascript:history.back()"}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("clientes-sujeto-objeto",{attrs:{sujeto:e.sujetoObjeto,taxonomia:e.taxonomia},on:{"update:sujeto":function(t){e.sujetoObjeto=t},"update:taxonomia":function(t){e.taxonomia=t},error:e.mostrarErrores,advertencia:e.mostrarAdvertencia}})],1),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[],!1,null,null,null).exports},4308:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(4590),o=a(8064),i=a(2387);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={components:{UbicacionGeograficaEC:o.Z,UbicacionGeograficaPE:i.Z},props:{sujeto:{type:Object},taxonomia:{type:Object},ubicacionesNivel2:{type:Array,default:function(){return[]}}},data:function(){return{componente:"UbicacionGeografica".concat(this.$cliente.pais),escala:"A",taxonomias:{nivel2:[],nivel3:[]}}},mounted:function(){this.cargarDatos(),this.sujeto.id&&this.cambiarCategoria(this.taxonomia.nivel2,!1)},destroyed:function(){},activated:function(){this.sujeto.id&&this.cambiarCategoria(this.taxonomia.nivel2,!1)},deactivated:function(){},methods:{mostrarErrores:function(e,t){this.$refs.alertaSujetoObjeto.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this,t={taxonomia:r.oH.OBJETO,nivel:1};axios.get("/api/taxonomias",{params:t}).then((function(t){var a=t.data.data;e.taxonomias.nivel2=a,_.isEmpty(e.taxonomias.nivel2)&&e.$emit("advertencia",'No se han definido "Taxonomías"')})).catch((function(){e.$emit("error","Error al cargar taxonomías")}))},cambiarCategoria:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.taxonomias.nivel3=[],a&&(this.taxonomia.nivel3=""),e){var r={padreId:e};axios.get("/api/taxonomias",{params:r}).then((function(e){var a=e.data.data;t.taxonomias.nivel3=a})).catch((function(){t.$emit("error","Error al cargar taxonomías")}))}}},computed:{propsComponente:function(){var e={ref:"ubicacionGeografica".concat(this.$cliente.pais)};switch(this.$cliente.pais){case"EC":e=n(n({},e),{},{provincias:this.ubicacionesNivel2,provinciaId:this.sujeto.nivel2,cantonId:this.sujeto.nivel3,parroquiaId:this.sujeto.nivel4});break;case"PE":e=n(n({},e),{},{departamentos:this.ubicacionesNivel2,departamentoId:this.sujeto.nivel2,provinciaId:this.sujeto.nivel3,distritoId:this.sujeto.nivel4})}return e},tamanoMinimoCelular:function(){return this.$cliente.pais===r.bG.PERU?9:10}}};const d=(0,a(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"numero_identificacion_sujeto_objeto"}},[e._v("Número")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sujeto.numero_identificacion,expression:"sujeto.numero_identificacion"}],staticClass:"form-control input-sm",attrs:{id:"numero_identificacion_sujeto_objeto",name:"numero_identificacion_animal",type:"text",maxlength:"25",required:""},domProps:{value:e.sujeto.numero_identificacion},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.sujeto,"numero_identificacion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"descripcion_sujeto_objeto"}},[e._v("Descripción")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sujeto.descripcion,expression:"sujeto.descripcion"}],staticClass:"form-control input-sm",attrs:{id:"descripcion_sujeto_objeto",name:"descripcion_sujeto_objeto",type:"text",autocomplete:"off",maxlength:"100",required:""},domProps:{value:e.sujeto.descripcion},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.sujeto,"descripcion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"sexo_objeto"}},[e._v("Sexo")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.sujeto.sexo,expression:"sujeto.sexo"}],staticClass:"form-control input-sm",attrs:{id:"sexo_objeto",name:"sexo_objeto"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.sujeto,"sexo",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Ninguno")]),e._v(" "),t("option",{attrs:{value:"F"}},[e._v("Femenino")]),e._v(" "),t("option",{attrs:{value:"M"}},[e._v("Masculino")])])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"nivel_2"}},[e._v("Categoría")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.taxonomia.nivel2,expression:"taxonomia.nivel2"}],staticClass:"form-control input-sm",attrs:{id:"nivel_2",name:"nivel_2"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.taxonomia,"nivel2",t.target.multiple?a:a[0])},function(t){return e.cambiarCategoria(e.taxonomia.nivel2)}]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.taxonomias.nivel2,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n        ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.taxonomia.nivel3,expression:"taxonomia.nivel3"}],staticClass:"form-control input-sm",staticStyle:{"margin-top":"29px"},attrs:{id:"nivel_3",name:"nivel_3"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.taxonomia,"nivel3",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.taxonomias.nivel3,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre)+"\n        ")])}))],2)])]),e._v(" "),t("fieldset",[t("legend",[e._v("Responsable")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"nombres_responsable"}},[e._v("Nombres")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sujeto.nombres_responsable,expression:"sujeto.nombres_responsable"}],staticClass:"form-control input-sm",attrs:{id:"nombres_responsable",name:"nombres_responsable",type:"text",maxlength:"100",autocomplete:"off"},domProps:{value:e.sujeto.nombres_responsable},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.sujeto,"nombres_responsable",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"apellidos_responsable"}},[e._v("Apellidos")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sujeto.apellidos_responsable,expression:"sujeto.apellidos_responsable"}],staticClass:"form-control input-sm",attrs:{id:"apellidos_responsable",name:"apellidos_responsable",type:"text",maxlength:"100",autocomplete:"off"},domProps:{value:e.sujeto.apellidos_responsable},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.sujeto,"apellidos_responsable",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"correo_responsable"}},[e._v("Correo electrónico")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sujeto.correo_responsable,expression:"sujeto.correo_responsable"}],staticClass:"form-control input-sm",attrs:{id:"correo_responsable",name:"correo_responsable",type:"email",maxlength:"100",autocomplete:"off"},domProps:{value:e.sujeto.correo_responsable},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.sujeto,"correo_responsable",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t(e.componente,e._b({tag:"component",model:{value:e.sujeto.residencia_responsable_id,callback:function(t){e.$set(e.sujeto,"residencia_responsable_id",t)},expression:"sujeto.residencia_responsable_id"}},"component",e.propsComponente,!1))],1),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"direccion_responsable"}},[e._v("Dirección")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sujeto.direccion_responsable,expression:"sujeto.direccion_responsable"}],staticClass:"form-control input-sm",attrs:{id:"direccion_responsable",name:"direccion_responsable",type:"text",autocomplete:"off",maxlength:"100"},domProps:{value:e.sujeto.direccion_responsable},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.sujeto,"direccion_responsable",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefono_celular_responsable"}},[e._v("Teléfono celular")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sujeto.telefono_celular_responsable,expression:"sujeto.telefono_celular_responsable"}],staticClass:"form-control input-sm",attrs:{id:"telefono_celular_responsable",name:"telefono_celular_responsable",type:"tel",minlength:e.tamanoMinimoCelular,maxlength:"30",autocomplete:"off"},domProps:{value:e.sujeto.telefono_celular_responsable},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.sujeto,"telefono_celular_responsable",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"telefono_convencional_responsable"}},[e._v("Teléfono convencional")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.sujeto.telefono_convencional_responsable,expression:"sujeto.telefono_convencional_responsable"}],staticClass:"form-control input-sm",attrs:{id:"telefono_convencional_responsable",name:"telefono_convencional_responsable",type:"tel",minlength:"7",maxlength:"30",autocomplete:"off"},domProps:{value:e.sujeto.telefono_convencional_responsable},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},input:function(t){t.target.composing||e.$set(e.sujeto,"telefono_convencional_responsable",t.target.value)}}})])])])])}),[],!1,null,null,null).exports},8353:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const i={components:{BuscarOrdenesModal:a(2047).Z},data:function(){return{ordenes:[],muestras:[],muestraId:"",ordenesIds:[],seccionPorHoja:!1,cargandoOrdenes:!1,margen:!1,margenIzquierdo:"",conteo:0,pagina:1}},methods:{cargarOrdenes:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.cargandoOrdenes=!0;var a={ordenesIds:this.ordenesIds,incluir:"paciente,sucursal",page:t};axios.get("/api/ordenes/buscar",{params:a}).then((function(t){var a=t.data.data;e.conteo=a.last_page,e.ordenes=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);a.unshift("Error al cargar órdenes"),e.mostrarErrores(a)})).then((function(){return e.cargandoOrdenes=!1}))},cerrar:function(){this.ordenesIds=[],this.seccionPorHoja=!1,this.ordenes=[],this.conteo=0,this.pagina=1,$("#generar-reportes-resultados").modal("hide")},construirParametros:function(e){var t=Object.entries(e).filter((function(e){var t=r(e,2);t[0];return t[1]})).map((function(e){var t=r(e,2),a=t[0],o=t[1];return"".concat(a,"=").concat(o)})).join("&");return t?"?".concat(t):""},eliminarOrden:function(e){var t=this.ordenesIds.indexOf(e.id);this.ordenesIds.splice(t,1),_.isEmpty(this.ordenesIds)?(this.ordenes=[],this.ordenesIds=[]):this.cargarOrdenes(),this.mostrarInformativo('Orden No. "'+e.numero_orden+'" eliminada.')},eliminarOrdenes:function(){this.ordenes=[],this.ordenesIds=[]},generarReportesResultados:function(){var e=this,t={ordenesIds:this.ordenesIds,seccionPorHoja:this.seccionPorHoja?1:null};axios.post("/api/ordenes/reportes-resultados",t).then((function(){e.cerrar(),e.$emit("generado")})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al generar reportes de resultados",a)}))},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},ordenesSeleccionadas:function(e){this.ordenesIds=e.ordenesIds,this.cargarOrdenes()}},computed:{mensajeOrdenesSeleccionadas:function(){return this.ordenesIds.length>1?"órdenes seleccionadas":"orden seleccionada"}}};var s=a(1900);const n={components:{GenerarReportesResultadosModal:(0,s.Z)(i,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"generar-reportes-resultados",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",{on:{submit:function(t){return t.preventDefault(),e.generarReportesResultados.apply(null,arguments)}}},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),e._m(0)]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[e._m(1),e._v(" "),t("div",{staticClass:"col-md-3 col-md-offset-6 form-group"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.ordenesIds.length>0,expression:"ordenesIds.length > 0"}],staticClass:"badge pull-right"},[e._v("\n                  "+e._s(e.ordenesIds.length)+" "+e._s(e.mensajeOrdenesSeleccionadas)+"\n                ")])])]),e._v(" "),!e.cargandoOrdenes&&e.ordenes.length>0?t("div",{staticStyle:{height:"270px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-2 text-center"},[e._v("Sucursal")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar todo",disabled:0===e.ordenesIds.length},on:{click:e.eliminarOrdenes}},[t("i",{staticClass:"fas fa-trash"})])])])]),e._v(" "),t("tbody",[e._l(e.ordenes,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.sucursal.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v(e._s(a.paciente.nombre_paciente))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.fecha_orden)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoOrden")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarOrden(a)}}},[t("i",{staticClass:"fas fa-trash"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoOrdenes,cantidad:e.ordenes.length,tipo:"órdenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.ordenes.length>0,expression:"ordenes.length > 0"}],staticClass:"pull-left"},[e.conteo>1?t("paginate",{staticClass:"pull-left",attrs:{"page-count":e.conteo,"page-range":6,"container-class":"pagination","click-handler":e.cargarOrdenes,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.pagina,callback:function(t){e.pagina=t},expression:"pagina"}}):e._e(),e._v(" "),t("div",{staticClass:"checkbox pull-left",staticStyle:{"margin-left":"10px"}},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.seccionPorHoja,expression:"seccionPorHoja"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.seccionPorHoja)?e._i(e.seccionPorHoja,null)>-1:e.seccionPorHoja},on:{change:function(t){var a=e.seccionPorHoja,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&(e.seccionPorHoja=a.concat([null])):i>-1&&(e.seccionPorHoja=a.slice(0,i).concat(a.slice(i+1)))}else e.seccionPorHoja=o}}}),e._v("\n                  Una sección en cada hoja\n                ")])])],1),e._v(" "),t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit",disabled:0===e.ordenes.length||e.cargandoOrdenes}},[e.cargandoOrdenes?[t("i",{staticClass:"fas fa-cog fa-spinner fa-spin fa-fw"}),e._v(" \n                Procesando...\n              ")]:[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" \n                Generar\n              ")]],2)])])])])]),e._v(" "),t("buscar-ordenes-modal",{attrs:{id:"buscarOrdenesEtiquetas","ordenes-ids":e.ordenesIds,top:11,estado:"V","rango-dias":1,"mostrar-filtros":["sucursal","cliente","categoria","fechaDesde","fechaHasta"]},on:{"ordenes-seleccionadas":e.ordenesSeleccionadas}})],1)}),[function(){var e=this,t=e._self._c;return t("h4",{staticClass:"modal-title"},[e._v("Generar reportes de resultados\n              "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])])},function(){var e=this._self._c;return e("div",{staticClass:"col-md-3 form-group"},[e("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#buscarOrdenesEtiquetas"}},[e("i",{staticClass:"fas fa-search fa-fw"}),this._v(" Buscar órdenes\n                ")])])}],!1,null,null,null).exports},data:function(){return{cargando:!1,paginaActual:1,tareas:[],tiposTareas:{"App\\Jobs\\GenerarPdfs":"Reportes de resultados"},totalPaginas:0,totalRegistros:0}},created:function(){var e=this;this.cargarTareas(),this.intervalo=window.setInterval((function(t){return e.cargarTareas(!0)}),1e4)},methods:{calcularDuracion:function(e,t){if(!e||!t)return"";var a=moment(e),r=moment(t);return moment.duration(r.diff(a)).humanize()},cargarTareas:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.cargando=!0);var a={page:this.paginaActual};axios.get("/api/tareas",{params:a}).then((function(t){var a=t.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.tareas=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("¡Error al listar tareas!",a)})).finally((function(){return e.cargando=!1}))},mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)}}};const c=(0,s.Z)(n,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Tareas\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",[t("a",{staticClass:"btn btn-primary",attrs:{title:"Nuevo","data-toggle":"modal","data-backdrop":"static","data-target":"#generar-reportes-resultados"}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v(" "),t("span",{staticClass:"hidden-sm"},[e._v("Nuevo")])])])])])]},proxy:!0}])}),e._v(" "),!e.cargando&&e.tareas.length>0?t("div",[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed",attrs:{id:"listado"}},[e._m(0),e._v(" "),t("tbody",e._l(e.tareas,(function(a){return t("tr",[t("td",[e._v(e._s(e.tiposTareas[a.trackable_type]))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.created_at)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e.calcularDuracion(a.started_at,a.finished_at)))]),e._v(" "),t("td",{staticClass:"text-center"},["queued"===a.status?t("i",{staticClass:"fas fa-pause-circle fa-fw",attrs:{rel:"tooltip",title:"Pendiente"}}):e._e(),e._v(" "),"started"===a.status?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{rel:"tooltip",title:"Procesando"}}):e._e(),e._v(" "),"failed"===a.status?t("i",{staticClass:"fas fa-exclamation-triangle fa-fw text-danger",attrs:{rel:"tooltip",title:"Error"}}):e._e(),e._v(" "),"finished"===a.status?t("a",{staticClass:"text-gris puntero",attrs:{href:a.output}},[t("i",{staticClass:"fas fa-download fa-fw",attrs:{rel:"tooltip",title:"Descargar"}})]):e._e()])])})),0)])]):e._e(),e._v(" "),!e.cargando&&e.tareas.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),e.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"page-range":7,"container-class":"pagination","click-handler":e.cargarTareas,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}}):e._e()],1):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.tareas.length,tipo:"tareas"}}),e._v(" "),t("generar-reportes-resultados-modal",{on:{generado:function(t){return e.cargarTareas()}}})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-4"},[e._v("Tipo")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-3 text-center"},[e._v("Duración")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Descargar")])])])}],!1,null,null,null).exports},7006:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s={props:["datos"],data:function(){return{procesando:!1,filtros:{tarifaId:"",examenesValorCero:!1},opciones:{separadorLista:";"},tarifas:[],separadoresListas:[{id:";",nombre:"Punto y coma (;)"},{id:",",nombre:"Coma (,)"}]}},mounted:function(){this.cargarDatos(),this.cargarOpciones()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarOpciones:function(){this.opciones.separadorLista=localStorage.getItem("separador-lista")?localStorage.getItem("separador-lista"):this.opciones.separadorLista},cargarDatos:function(){var e=this;axios.get("/api/informes/tarifas").then((function(t){var a=t.data;e.tarifas=a.data.tarifas})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar tarifas",a)}))},borrarFiltros:function(){this.filtros.tarifaId="",this.filtros.examenesValorCero=!1},cambioSeparadorLista:function(e){e.target.value&&localStorage.setItem("separador-lista",e.target.value)},generarPdf:function(){var e=this.obtenerParametrosUrl(this.filtros);window.open("/informes/tarifas/pdf".concat(e),"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")},generarExcel:function(){var e=this;this.procesando=!0;var t=o(o({},this.filtros),this.opciones);t=this.obtenerParametrosUrl(t),axios.get("/informes/tarifas/csv".concat(t),{responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=new Blob([e.data],{type:"application/csv"}),r=document.getElementById("link-descargas");r.href=window.URL.createObjectURL(a),r.download=t.split("filename=")[1],r.click()})).catch((function(t){var a=t.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=e.procesarErrorResponse(o);i.push("Error al generar archivo"),e.mostrarErrores(i)})).then((function(){return e.procesando=!1}))}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Tarifas\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-primary dropdown-toggle",attrs:{type:"button",disabled:e.procesando,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando,expression:"!procesando"}],staticClass:"fas fa-print fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando,expression:"procesando"}],staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n               Generar informe "),t("span",{staticClass:"caret"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu",staticStyle:{"margin-top":"-4px","margin-right":"1px"}},[t("li",[t("a",{attrs:{href:"#"},on:{click:e.generarPdf}},[t("i",{staticClass:"far fa-file-pdf fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  PDF\n                ")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#"},on:{click:e.generarExcel}},[t("i",{staticClass:"far fa-file-excel fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n                  Excel\n                ")])])])])]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[e._v("\n            Borrar filtros\n          ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tarifa_id"}},[e._v("Tarifa")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"tarifa_id",placeholder:"Todas",options:e.tarifas,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.tarifaId,callback:function(t){e.$set(e.filtros,"tarifaId",t)},expression:"filtros.tarifaId"}})],1),e._v(" "),t("div",{staticClass:"col-xs-4 col-sm-4 form-group"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.examenesValorCero,expression:"filtros.examenesValorCero"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.filtros.examenesValorCero)?e._i(e.filtros.examenesValorCero,"")>-1:e.filtros.examenesValorCero},on:{change:function(t){var a=e.filtros.examenesValorCero,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.filtros,"examenesValorCero",a.concat([""])):i>-1&&e.$set(e.filtros,"examenesValorCero",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.filtros,"examenesValorCero",o)}}}),e._v("\n              Incluir exámenes con valor cero\n            ")])])])])])]),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(1),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-3 col-sm-3 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"separadorLista"}},[e._v("Separador de lista")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.opciones.separadorLista,expression:"opciones.separadorLista"}],staticClass:"form-control input-sm",attrs:{id:"separadorLista",name:"separadorLista",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.opciones,"separadorLista",t.target.multiple?a:a[0])},e.cambioSeparadorLista]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.separadoresListas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n              "+e._s(a.nombre)+"\n            ")])}))],2)])])])]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Opciones")])])}],!1,null,null,null).exports},5410:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(6486),o=a.n(r);const i={props:["examenes","tarifas"],data:function(){return{celdaActiva:null,tarifaIdDestino:"",tarifaIdOrigen:"",tipoTarifa:"VENTA",precios:{},variacion:""}},created:function(){this.mapearPrecios()},mounted:function(){$('[data-toggle="popover"]').popover(),$('[data-toggle="tooltip"]').tooltip({container:"body"})},methods:{cambiarCelda:function(e){var t=parseInt(e.target.tabIndex),a=e.shiftKey?--t:++t;this.celdaActiva.editar=!1,$("#".concat(a)).click()},copiarTarifa:function(){var e=this;if(this.tienePreciosTarifaOrigen)this.$refs.cargando.alternar(),axios.post("/api/examenes-tarifas",{tarifa_id_origen:this.tarifaIdOrigen,tarifa_id_destino:this.tarifaIdDestino,variacion:this.variacion}).then((function(e){location.reload()})).catch((function(t){e.$refs.cargando.alternar(),e.mostrarErrores("¡Error!",t.response.data.errors)}));else{var t=this.tarifasFiltradas.find((function(t){return t.id===e.tarifaIdOrigen}));this.mostrarErrores('¡Error! La tarifa <strong>"'.concat(t.nombre,'"</strong> no tiene precios definidos.'))}},editar:function(e,t,a){this.celdaActiva&&(this.celdaActiva.editar=!1),this.celdaActiva=this.precios[t][a],this.celdaActiva.editar=!0,this.$nextTick((function(t){var a=e.currentTarget?e.currentTarget:e.target;window.setTimeout((function(e){return $("#".concat(a.id," > :first-child")).focus()}),0)}))},guardarValor:function(e,t,a){var r=this,o=this.precios[t][a],i=o.valor;o.valor=e.target.value,axios.patch("/api/examenes-tarifas/".concat(t),{tarifa_id:a,valor:e.target.value}).then((function(){o.valor=e.target.value,r.$refs.alerta.ocultarAlertas(),r.mostrarMensaje("Precio guardado")})).catch((function(e){o.valor=i;var t=r.procesarErrorResponse(e);r.mostrarErrores("¡Error al guardar precio!",t)})).then((function(e){o.editar=!1}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarMensaje:function(e){this.$refs.alerta.mostrarAlerta("success",e)},mapearPrecios:function(){var e=this;this.examenes.forEach((function(t){var a={};e.tarifas.forEach((function(e){var r=t.tarifas.find((function(t){return t.id===e.id}));a[e.id]={editar:!1,valor:r?parseFloat(r.pivot.valor):""}})),e.$set(e.precios,t.id,a)}))}},computed:{puedeRealizarCopiado:function(){return""!==this.tarifaIdOrigen&&""!==this.tarifaIdDestino&&""!==this.variacion&&this.tarifaIdOrigen!==this.tarifaIdDestino},tarifasFiltradas:function(){var e=this;return this.tarifas.filter((function(t){return t.tipo===e.tipoTarifa}))},tienePreciosTarifaOrigen:function(){var e=this;return o().chain(this.precios).mapValues((function(t){return t[e.tarifaIdOrigen].valor})).values().compact().value().length>0}}},s=i;var n=a(3379),c=a.n(n),l=a(843),d={insert:"head",singleton:!1};c()(l.Z,d);l.Z.locals;const u=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("form",{staticClass:"form-inline"},[e._v("\n        Copiar de\n        "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.tarifaIdOrigen,expression:"tarifaIdOrigen"}],staticClass:"form-control input-sm",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.tarifaIdOrigen=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.tarifasFiltradas,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2),e._v("\n        a\n        "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.tarifaIdDestino,expression:"tarifaIdDestino"}],staticClass:"form-control input-sm",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.tarifaIdDestino=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.tarifasFiltradas,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2),e._v("\n        con variación de\n        "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.variacion,expression:"variacion"}],staticClass:"form-control input-sm text-right",staticStyle:{width:"80px"},attrs:{type:"number",placeholder:"0.00","data-toggle":"popover","data-trigger":"focus","data-placement":"bottom",title:"Variación","data-content":"Negativo para descuento o positivo para incremento"},domProps:{value:e.variacion},on:{input:function(t){t.target.composing||(e.variacion=t.target.value)}}}),e._v(" "),t("div",{staticClass:"input-group-addon"},[e._v("%")])]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button",disabled:!e.puedeRealizarCopiado},on:{click:e.copiarTarifa}},[e._v("\n          Copiar\n        ")])])])]),e._v(" "),t("div",{staticClass:"panel panel-gris"},[t("div",{staticClass:"panel-heading",staticStyle:{display:"flex","align-items":"center",gap:"20px"}},[t("h3",{staticClass:"panel-title"},[e._v("\n        Precios\n      ")]),e._v(" "),t("div",{staticStyle:{width:"150px"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.tipoTarifa,expression:"tipoTarifa"}],staticClass:"form-control input-sm",attrs:{id:"tipo",name:"tipo",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.tipoTarifa=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:"VENTA"}},[e._v("Venta")]),e._v(" "),t("option",{attrs:{value:"COSTO"}},[e._v("Costo")]),e._v(" "),t("option",{attrs:{value:"REMISION"}},[e._v("Remisión")])])])]),e._v(" "),t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-condensed",attrs:{id:"precios"}},[t("thead",[t("tr",[t("th",{staticClass:"encabezado-examenes",staticStyle:{"z-index":"500"}},[e._v("\n            Exámenes\n          ")]),e._v(" "),e._l(e.tarifasFiltradas,(function(a,r){return t("th",{key:a.id,staticClass:"colu",style:{"z-index":500-r}},[t("div",{staticClass:"rotacion"},[t("div",{staticClass:"contenido-rotacion",attrs:{"data-toggle":"tooltip","data-placement":"right",title:a.nombre}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])])])}))],2)]),e._v(" "),t("tbody",e._l(e.examenes,(function(a,r){return t("tr",{key:a.id},[t("th",{staticClass:"encabezado-examenes",attrs:{title:a.nombre}},[e._v(e._s(a.nombre))]),e._v(" "),e._l(e.tarifasFiltradas,(function(o,i){return t("td",{staticClass:"text-right colu"},[t("div",{attrs:{role:"button",id:"".concat(r+i*e.examenes.length+100)},on:{click:function(t){return e.editar(t,a.id,o.id)}}},[e.precios[a.id][o.id].editar?e._e():t("span",[e._v("\n                "+e._s(e.precios[a.id][o.id].valor||"-")+"\n              ")]),e._v(" "),e.precios[a.id][o.id].editar?t("input",{staticClass:"form-control input-xs text-right",attrs:{type:"number",min:"0",step:"0.01",tabindex:r+i*e.examenes.length+100},domProps:{value:e.precios[a.id][o.id].valor},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.cambiarCelda.apply(null,arguments)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.cambiarCelda.apply(null,arguments)},blur:function(t){return e.guardarValor(t,a.id,o.id)}}}):e._e()])])}))],2)})),0)])])]),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Copiar tarifas")])])}],!1,null,"20424c58",null).exports},4809:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(4590);const o={data:function(){return{registro:{id:0,nombre:"",nivel:"",taxonomias:[],taxonomiasEliminar:[]},taxonomia:{nombre:"",nivel:"",nombrePadre:"",taxonomias:[]}}},props:["id","permisos"],mounted:function(){$("#agregarTaxonomia").on("shown.bs.modal",(function(){return $("#nombreTaxonomia").focus()})),this.cargarDatos()},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarAdvertenciaTaxonomia:function(e,t){this.$refs.alertaAgregarTaxonomia.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cargarDatos:function(){var e=this;"0"!==this.id&&(this.$refs.cargando.alternar(),axios.get("/api/taxonomias/".concat(this.id,"/edit")).then((function(t){var a=t.data.data,r=a.taxonomias.map((function(t){var a=t.taxonomias.map((function(t){return e.crearTaxonomia(t,t.taxonomias)}));return e.crearTaxonomia(t,a)}));e.registro.id=a.id,e.registro.nombre=a.nombre,e.registro.nivel=a.nivel,e.registro.taxonomias=r,e.registro.taxonomiasEliminar=[]}),(function(t){e.mostrarErrores(t.response)})).finally((function(){return e.$refs.cargando.alternar()})))},crearTaxonomia:function(e,t){return{id:e.id,nivel:e.nivel,nombre:e.nombre,padre_id:e.padre_id,taxonomias:t,editar:!1}},abrirAgregarNivel2:function(){this.taxonomia.nombre="",this.taxonomia.nivel=2,this.taxonomia.nombrePadre=this.registro.nombre,this.taxonomia.taxonomias=this.registro.taxonomias,$("#agregarTaxonomia").modal()},abrirAgregarNivel3:function(e){this.taxonomia.nombre="",this.taxonomia.nivel=3,this.taxonomia.nombrePadre=e.nombre,this.taxonomia.taxonomias=e.taxonomias,$("#agregarTaxonomia").modal()},cerrarAgregar:function(){this.taxonomia.nombre="",this.taxonomia.nivel="",this.taxonomia.nombrePadre="",this.taxonomia.taxonomias=[],$("#agregarTaxonomia").modal("hide")},agregarTaxonomia:function(){var e=this;if(this.taxonomia.taxonomias.some((function(t){return t.nombre===e.taxonomia.nombre})))this.mostrarAdvertenciaTaxonomia("¡Este nombre ya existe en la lista!");else{var t={id:"",nivel:this.taxonomia.nivel,nombre:this.taxonomia.nombre,padre_id:"0"!==this.id?this.id:"",taxonomias:[],editar:!1,esNuevo:!0};this.taxonomia.taxonomias.push(t),this.cerrarAgregar()}},editarTaxonomia:function(e){e.editar=!0},guardarTaxonomia:function(e){_.isEmpty(e.nombre)?this.mostrarErrores(r.im.ERROR,"El nombre de la taxonomía no puede estar vacío."):e.editar=!1},eliminarTaxonomia:function(e,t){var a=e.indexOf(t);e.splice(a,1),t.esNuevo||this.registro.taxonomiasEliminar.push(t)},guardar:function(){var e=this;_.isEmpty(this.registro.taxonomias)?this.mostrarErrores(r.im.ERROR,"Debe definir por lo menos una taxonomía."):(this.$refs.cargando.alternar(),this.alternarBotonesSubmit(),"0"===this.id?(this.registro.nivel=1,axios.post("/api/taxonomias",this.registro).then((function(t){e.redireccionar()}),(function(t){e.mostrarErrores("¡Error!",t.response.data.errors),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()}))):axios.patch("/api/taxonomias/"+this.id,this.registro).then((function(t){e.redireccionar()}),(function(t){e.mostrarErrores("¡Error!",t.response.data.errors),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})))},redireccionar:function(){window.location.href="/taxonomias"}},computed:{taxonomiasOrdenadas:function(){return _.orderBy(this.registro.taxonomias,"orden")},esAnimaluObjeto:function(){return"0"===this.id||!("Animal"===this.registro.nombre||"Objeto"===this.registro.nombre)}},watch:{}};const i=(0,a(1900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("form",{staticClass:"form-horizontal",attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        "+e._s("0"===e.id?"Crear":"Editar")+" Taxonomía\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{directives:[{name:"show",rawName:"v-show",value:"0"===e.id&&e.permisos.crearTaxonomias||"0"!==e.id&&e.permisos.editarTaxonomias,expression:"(id === '0' && permisos.crearTaxonomias) || (id !== '0' && permisos.editarTaxonomias)"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n            ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"/taxonomias/"}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("fieldset",[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-4"},[t("label",{staticClass:"control-label",class:{obligatorio:e.esAnimaluObjeto},attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),e.esAnimaluObjeto?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre,expression:"registro.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombre",name:"nombre",maxlength:"70",required:""},domProps:{value:e.registro.nombre},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre",t.target.value)}}}):e._e(),e._v(" "),e.esAnimaluObjeto?e._e():t("output",[e._v("\n            "+e._s(e.registro.nombre)+"\n          ")])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row"},[e._m(0),e._v(" "),t("div",{staticClass:"col-sm-4 text-right",staticStyle:{"padding-top":"25px"}},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{disabled:!e.registro.nombre,type:"button"},on:{click:e.abrirAgregarNivel2}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v(" Agregar\n              ")])])]),e._v(" "),t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(1),e._v(" "),t("tbody",[0===e.taxonomiasOrdenadas.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("\n                No existen registros\n              ")])]):e._e(),e._v(" "),e._l(e.taxonomiasOrdenadas,(function(a){return[t("tr",[t("td",{staticClass:"text-left"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!a.editar,expression:"!nivel2.editar"}]},[e._v("\n                    "+e._s(a.nombre)+"\n                  ")]),e._v(" "),t("input",{directives:[{name:"show",rawName:"v-show",value:a.editar,expression:"nivel2.editar"},{name:"model",rawName:"v-model",value:a.nombre,expression:"nivel2.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"70",required:""},domProps:{value:a.nombre},on:{input:function(t){t.target.composing||e.$set(a,"nombre",t.target.value)}}})]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{directives:[{name:"show",rawName:"v-show",value:!a.editar,expression:"!nivel2.editar"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Editar"},on:{click:function(t){return e.editarTaxonomia(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n                  ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:a.editar,expression:"nivel2.editar"}],staticClass:"btn btn-primary btn-xs",attrs:{disabled:!a.nombre,type:"button",title:"Guardar"},on:{click:function(t){return e.guardarTaxonomia(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Guardar\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Agregar tercer nivel"},on:{click:function(t){return e.abrirAgregarNivel3(a)}}},[t("i",{staticClass:"fas fa-plus fa-fw"}),e._v(" Taxonomias\n                  ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarTaxonomia(e.registro.taxonomias,a)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n                  ")])])]),e._v(" "),e._l(a.taxonomias,(function(r){return[t("tr",[t("td",{staticClass:"text-left",staticStyle:{"padding-left":"20px"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!r.editar,expression:"!nivel3.editar"}]},[e._v("\n                      "+e._s(r.nombre)+"\n                    ")]),e._v(" "),t("input",{directives:[{name:"show",rawName:"v-show",value:r.editar,expression:"nivel3.editar"},{name:"model",rawName:"v-model",value:r.nombre,expression:"nivel3.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",maxlength:"70",required:""},domProps:{value:r.nombre},on:{input:function(t){t.target.composing||e.$set(r,"nombre",t.target.value)}}})]),e._v(" "),t("td",{staticClass:"text-right"},[t("button",{directives:[{name:"show",rawName:"v-show",value:!r.editar,expression:"!nivel3.editar"}],staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Editar"},on:{click:function(t){return e.editarTaxonomia(r)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Editar\n                    ")]),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:r.editar,expression:"nivel3.editar"}],staticClass:"btn btn-primary btn-xs",attrs:{disabled:!r.nombre,type:"button",title:"Guardar"},on:{click:function(t){return e.guardarTaxonomia(r)}}},[t("i",{staticClass:"fas fa-edit fa-fw"}),e._v(" Guardar\n                    ")]),e._v(" "),t("button",{staticClass:"btn btn-danger btn-xs",attrs:{type:"button",title:"Eliminar"},on:{click:function(t){return e.eliminarTaxonomia(a.taxonomias,r)}}},[t("i",{staticClass:"fas fa-trash fa-fw"}),e._v(" Eliminar\n                    ")])])])]}))]}))],2)])])])])],1),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"agregarTaxonomia",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.cerrarAgregar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v('Agregar taxonomía de "'+e._s(e.taxonomia.nombrePadre)+'"')])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alertaAgregarTaxonomia"}),e._v(" "),t("form",{staticClass:"form-horizontal",on:{submit:function(t){return t.preventDefault(),e.agregarTaxonomia.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-6"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"nombre"}},[e._v("Nombre")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.taxonomia.nombre,expression:"taxonomia.nombre"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombreTaxonomia",name:"nombreTaxonomia",maxlength:"70",required:""},domProps:{value:e.taxonomia.nombre},on:{input:function(t){t.target.composing||e.$set(e.taxonomia,"nombre",t.target.value)}}})])]),e._v(" "),e._m(2),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrarAgregar}},[e._v("Cerrar")])])],1)])])]),e._v(" "),t("cargando-modal",{ref:"cargando"})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"col-sm-8"},[e("h3",{staticClass:"obligatorio"},[this._v("Taxonomías")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",{staticClass:"bg-info"},[t("th",{staticClass:"col-sm-3 text-left"},[e._v("Nombre")]),e._v(" "),t("th")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-save fa-fw"}),this._v(" Guardar\n            ")])}],!1,null,null,null).exports},1397:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(4590),o=a(755),i=a(2534);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={components:{HoraModal:o.Z,SelectExamenes:i.Z},data:function(){return{procesando:!1,filtros:{fecha_desde:moment().format("YYYY-MM-DD"),fecha_hasta:moment().format("YYYY-MM-DD"),hora_desde:"00:00:00",hora_hasta:"23:59:59",seccion_id:"",servicio_id:"",empresa_id:"",tipo_atencion_id:"",examen_id:"",numero_orden:""},opciones:{separadorLista:";",mostrarEntregaCorreo:!1,mostrarEntregaWhatsApp:!1},secciones:[],empresas:[],servicios:[],empresa:"",tiposAtenciones:[],separadoresListas:[{id:";",nombre:"Punto y coma (;)"},{id:",",nombre:"Coma (,)"}]}},mounted:function(){this.cargarDatos(),this.cargarOpciones()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.$refs.cargando.alternar(),axios.get("/api/tiempos-respuestas").then((function(t){e.secciones=t.data.data.secciones,e.empresas=t.data.data.empresas,e.tiposAtenciones=t.data.data.tiposAtenciones,e.$can("cambiar-empresas")||(e.filtros.empresa_id=e.$usuario.empresaId,e.empresa=e.empresas.find((function(t){return t.id===e.filtros.empresa_id}))),e.$refs.cargando.alternar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Catálogos",a)})),axios.get("/api/catalogos",{params:{catalogo:r.oH.SERVICIO}}).then((function(t){var a=t.data.data;e.servicios=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar Servicios",a)}))},cargarOpciones:function(){this.opciones.separadorLista=localStorage.getItem("separador-lista")?localStorage.getItem("separador-lista"):this.opciones.separadorLista},borrarFiltros:function(){this.filtros.fecha_desde=moment().format("YYYY-MM-DD"),this.filtros.fecha_hasta=moment().format("YYYY-MM-DD"),this.filtros.hora_desde="00:00:00",this.filtros.hora_hasta="23:59:59",this.filtros.tipo_atencion_id="",this.filtros.examen_id="",this.filtros.seccion_id="",this.filtros.servicio_id="",this.filtros.numero_orden="",this.$can("cambiar-empresas")&&(this.empresa="",this.filtros.empresa_id=""),this.opciones.mostrarEntregaCorreo=!1,this.opciones.mostrarEntregaWhatsApp=!1},generar:function(){var e=this.validarFechas(e);if(e=this.validarRangoFechas(e)){var t=this.obtenerParametrosUrl(this.filtros);window.open("informes/tiempos-respuestas/pdf"+t,"_blank","height=500,width=800,left=10,top=10,,scrollbars=yes,menubar=no")}},validarFechas:function(e){var t=new RegExp("([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))");return(e=t.test(this.filtros.fecha_desde))?(e=t.test(this.filtros.fecha_hasta))||(this.mostrarErrores('La "Fecha Hasta" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e):(this.mostrarErrores('La "Fecha Desde" está vacía o no tiene el formato requerido "aaaa-mm-dd".'),e)},validarRangoFechas:function(e){var t=moment(this.filtros.fecha_hasta+" "+this.filtros.hora_hasta,"YYYY-MM-DD HH:mm:ss"),a=moment(this.filtros.fecha_desde+" "+this.filtros.hora_desde,"YYYY-MM-DD HH:mm:ss"),r=t.diff(a,"days",!0);return r<0&&(this.mostrarErrores('La "Fecha Desde" no debe ser mayor que la "Fecha Hasta"'),e=!1),(r=t.diff(a,"months",!0))>6&&(this.mostrarErrores("El rango de fechas no debe ser superior a 6 meses"),e=!1),e},cambiarEmpresa:function(){this.filtros.empresa_id=this.empresa?this.empresa.id:""},horaSeleccionada:function(e,t){this.filtros[t]=e},generarExcel:function(){var e=this,t=this.validarFechas(t);if(t=this.validarRangoFechas(t)){this.procesando=!0;var a=n(n({},this.filtros),this.opciones);a=this.obtenerParametrosUrl(a),axios.get("/informes/tiempos-respuestas/csv".concat(a),{responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=new Blob([e.data],{type:"application/csv"}),r=document.getElementById("link-descargas");r.href=window.URL.createObjectURL(a),r.download=t.split("filename=")[1],r.click()})).catch((function(t){var a=t.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=e.procesarErrorResponse(o);e.mostrarErrores("Error al generar archivo",i)})).then((function(){return e.procesando=!1}))}},cambioSeparadorLista:function(e){e.target.value&&localStorage.setItem("separador-lista",e.target.value)},cambioSeccion:function(){this.filtros.examen_id=""},cambioExamen:function(){this.filtros.seccion_id=""}}};const d=(0,a(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("form",{attrs:{method:"POST"},on:{submit:function(t){return t.preventDefault(),e.generarExcel.apply(null,arguments)}}},[t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n        Tiempos de respuesta\n      ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{staticClass:"btn btn-primary",attrs:{id:"generarInformeAuditorias",type:"submit",disabled:e.procesando}},[e.procesando?[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" Procesando...\n              ")]:[t("i",{staticClass:"fas fa-print fa-fw"}),e._v(" Generar informe\n              ")]],2)]),e._v(" "),t("li",[t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[e._v("\n              Borrar filtros\n            ")])])])]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(0),e._v(" "),t("div",{staticClass:"panel-body"},[t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fecha_desde"}},[e._v("Fecha desde")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_desde,expression:"filtros.fecha_desde"}],staticClass:"form-control input-sm",attrs:{id:"fecha_desde","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",autocomplete:"off",required:""}}),e._v(" "),e._m(1)])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label obligatorio",attrs:{for:"fecha_hasta"}},[e._v("Fecha hasta")]),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fecha_hasta,expression:"filtros.fecha_hasta"}],staticClass:"form-control input-sm",attrs:{id:"fecha_hasta","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-end-date":"0d","data-date-language":"es","data-date-clear-btn":"true","data-date-today-btn":"linked","data-date-keyboard-navigation":"true",placeholder:"aaaa-mm-dd",required:""}}),e._v(" "),e._m(2)])]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"empresa_id"}},[e._v("Cliente")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresa_id",disabled:!e.$can("cambiar-empresas"),placeholder:"Todos",options:e.empresas,label:"nombre"},on:{input:e.cambiarEmpresa},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.empresa,callback:function(t){e.empresa=t},expression:"empresa"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"tipo_atencion_id"}},[e._v("Tipo atención")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"tipo_atencion_id",placeholder:"Seleccione...",options:e.tiposAtenciones,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n                  "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px","margin-top":"-3px"}}):e._e()]}},{key:"option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n                  "+e._s(r)+"\n                  "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px"}}):e._e()]}}]),model:{value:e.filtros.tipo_atencion_id,callback:function(t){e.$set(e.filtros,"tipo_atencion_id",t)},expression:"filtros.tipo_atencion_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"numeroOrden"}},[e._v("Orden No.")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.numero_orden,expression:"filtros.numero_orden"}],staticClass:"form-control input-sm",attrs:{id:"numeroOrden",type:"text"},domProps:{value:e.filtros.numero_orden},on:{input:function(t){t.target.composing||e.$set(e.filtros,"numero_orden",t.target.value)}}})])])]),e._v(" "),t("fieldset",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{attrs:{for:"examen_id"}},[e._v("Examen")]),e._v(" "),t("select-examenes",{attrs:{id:"examen_id",catalogo:"EXAMENES","tamano-busqueda":2,etiqueta:"nombre"},on:{change:e.cambioExamen},model:{value:e.filtros.examen_id,callback:function(t){e.$set(e.filtros,"examen_id",t)},expression:"filtros.examen_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"seccion_id"}},[e._v("Sección")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"seccion_id",placeholder:"Todos",options:e.secciones,label:"nombre",reduce:function(e){return e.id}},on:{input:e.cambioSeccion},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.seccion_id,callback:function(t){e.$set(e.filtros,"seccion_id",t)},expression:"filtros.seccion_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-3 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"servicio_id"}},[e._v("Servicio")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"servicio_id",placeholder:"Seleccione...",options:e.servicios,label:"nombre",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"selected-option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n                  "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px","margin-top":"-3px"}}):e._e()]}},{key:"option",fn:function(a){var r=a.nombre,o=a.urgente;return[e._v("\n                  "+e._s(r)+" "),o?t("i",{staticClass:"fas fa-exclamation-triangle text-danger",staticStyle:{"margin-left":"2px"}}):e._e()]}}]),model:{value:e.filtros.servicio_id,callback:function(t){e.$set(e.filtros,"servicio_id",t)},expression:"filtros.servicio_id"}})],1)])])])]),e._v(" "),t("div",{staticClass:"panel panel-oscuro"},[e._m(3),e._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-3 col-sm-3 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"separadorLista"}},[e._v("Separador de lista")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.opciones.separadorLista,expression:"opciones.separadorLista"}],staticClass:"form-control input-sm",attrs:{id:"separadorLista",name:"separadorLista",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.opciones,"separadorLista",t.target.multiple?a:a[0])},e.cambioSeparadorLista]}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.separadoresListas,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n                "+e._s(a.nombre)+"\n              ")])}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.mostrarEntregaCorreo,expression:"opciones.mostrarEntregaCorreo"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.opciones.mostrarEntregaCorreo)?e._i(e.opciones.mostrarEntregaCorreo,"")>-1:e.opciones.mostrarEntregaCorreo},on:{change:function(t){var a=e.opciones.mostrarEntregaCorreo,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.opciones,"mostrarEntregaCorreo",a.concat([""])):i>-1&&e.$set(e.opciones,"mostrarEntregaCorreo",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"mostrarEntregaCorreo",o)}}}),e._v("\n                Mostrar entregas correo\n              ")])])]),e._v(" "),t("div",{staticClass:"col-sm-3"},[t("label"),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.mostrarEntregaWhatsApp,expression:"opciones.mostrarEntregaWhatsApp"}],attrs:{type:"checkbox",value:""},domProps:{checked:Array.isArray(e.opciones.mostrarEntregaWhatsApp)?e._i(e.opciones.mostrarEntregaWhatsApp,"")>-1:e.opciones.mostrarEntregaWhatsApp},on:{change:function(t){var a=e.opciones.mostrarEntregaWhatsApp,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,"");r.checked?i<0&&e.$set(e.opciones,"mostrarEntregaWhatsApp",a.concat([""])):i>-1&&e.$set(e.opciones,"mostrarEntregaWhatsApp",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.opciones,"mostrarEntregaWhatsApp",o)}}}),e._v("\n                Mostrar entregas WhatsApp\n              ")])])])])])]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}})],1),e._v(" "),t("hora-modal",{attrs:{id:"horaDesdeModal",hora:e.filtros.hora_desde},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"hora_desde")}}}),e._v(" "),t("hora-modal",{attrs:{id:"horaHastaModal",hora:e.filtros.hora_hasta},on:{"hora-seleccionada":function(t){return e.horaSeleccionada(t,"hora_hasta")}}})],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Filtros")])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaDesdeModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"modal","data-target":"#horaHastaModal",title:"Definir hora"}},[e("i",{staticClass:"far fa-clock",attrs:{"aria-hidden":"true"}})])])},function(){var e=this._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[this._v("Opciones")])])}],!1,null,null,null).exports},8376:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:["id","datos"],data:function(){return{registro:{id:0,sucursal_id:"",sumilla_validacion_id:"",firma_validacion_id:"",nombres:"",apellidos:"",nombre_usuario:"",correo:"",password:"",password_confirmation:"",estado:"",nombre_validacion:"",configuracion_etiqueta_id:"",imprimir_etiqueta_directo:!1,nombre_impresora_etiqueta:"",factura_punto_emision:"",referencia_auxiliar:"",telefono_celular:"",roles:[],secciones:[]},url:"",impresoras:[],estadoServidorLocal:""}},mounted:function(){$("body").tooltip({selector:'[data-toggle="tooltip"]',container:"body"}),this.cargarDatos()},methods:{mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarAdvertenciaRaza:function(e,t){this.$refs.alertaAgregarRaza.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cargarDatos:function(){this.url="https://"+this.datos.dominioServidorLocal+":"+this.datos.puertoServidorLocal,this.cargarImpresoras(),this.validarServidorLocal(!1),"0"!==this.id?(this.registro=this.datos.usuario,this.registro.roles=this.datos.usuario.roles.map((function(e){return e.id})),this.registro.secciones=this.datos.usuario.secciones.map((function(e){return e.id}))):this.marcarTodasLasSecciones()},cargarImpresoras:function(){var e=this;axios.get(this.url+"/api/impresoras").then((function(t){e.impresoras=t.data}),(function(e){console.error("No se pudo cargar impresoras",e)}))},validarImpresora:function(){var e=this;this.$refs.cargando.alternar();var t="/api/impresora/"+this.registro.nombre_impresora_etiqueta+"/estado";axios.get(this.url+t).then((function(t){e.$refs.cargando.alternar(),e.procesarExito(t)}),(function(a){e.$refs.cargando.alternar(),e.procesarErrores(e.url+t,"validar impresora",a,!0)}))},validarServidorLocal:function(e){var t=this;e&&this.$refs.cargando.alternar();var a="/api/estado";axios.get(this.url+a).then((function(a){e&&(t.$refs.cargando.alternar(),t.procesarExito(a)),t.estadoServidorLocal="EXITO"}),(function(r){t.procesarErrores(t.url+a,"validar servidor local",r,e)}))},guardar:function(){var e=this;if(_.isEmpty(this.registro.roles))this.mostrarAdvertencia("Debe definir por lo menos un rol");else if("N"!==this.datos.sucursales.find((function(t){return t.id===e.registro.sucursal_id})).estado){this.registro.estado="A";var t=new FormData;for(var a in this.registro){var r=this.registro[a];switch(a){case"roles":case"secciones":t.append(a,JSON.stringify(r));break;default:null!==r&&t.append(a,r)}}this.$refs.cargando.alternar(),this.alternarBotonesSubmit(),"0"===this.id?axios.post("/api/usuarios",t).then((function(){localStorage.setItem("imprimir-etiquetas",e.registro.imprimir_etiqueta_directo),localStorage.setItem("impresora-etiquetas",e.registro.nombre_impresora_etiqueta),e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})):(t.append("_method","PATCH"),axios.post("/api/usuarios/"+this.id,t).then((function(){localStorage.setItem("imprimir-etiquetas",e.registro.imprimir_etiqueta_directo),localStorage.setItem("impresora-etiquetas",e.registro.nombre_impresora_etiqueta),e.redireccionar()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error",a),e.$refs.cargando.alternar(),e.alternarBotonesSubmit()})))}else this.mostrarErrores("No se puede escoger una sucursal inactiva.")},procesarExito:function(e){var t=[];t.push("Conectado con "+this.url),t.push(e.data.mensaje),this.mostrarExito(t)},procesarErrores:function(e,t,a,r){if(r){var o=[];o.push("Conectado con "+e),void 0===a.response?o.push("El servidor se encuetra apagado"):o.push(a.response.data),this.$refs.cargando.alternar(),this.mostrarErrores("Error al "+t,o)}},validarEstado:function(e){void 0===e.response?this.estadoServidorLocal="":this.estadoServidorLocal="ERROR"},redireccionar:function(){window.location.href="/usuarios"},marcarTodasLasSecciones:function(){this.registro.secciones=this.datos.secciones.map((function(e){return e.id}))},ningunaSeccion:function(){this.registro.secciones=[]}},computed:{encendido:function(){return"EXITO"===this.estadoServidorLocal},error:function(){return"ERROR"===this.estadoServidorLocal},apagado:function(){return""===this.estadoServidorLocal}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("form",{attrs:{method:"POST",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.guardar.apply(null,arguments)}}},[t("alerta",{ref:"alerta"}),e._v(" "),t("cargando-modal",{ref:"cargando"}),e._v(" "),t("navbar",{scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      "+e._s("0"===e.id?"Crear":"Editar")+" Usuario\n    ")]},proxy:!0},{key:"opciones",fn:function(){return[t("ul",{staticClass:"nav navbar-nav"},[t("li",[t("button",{directives:[{name:"show",rawName:"v-show",value:"0"===e.id&&e.datos.permisos.crearUsuarios||0!==e.id&&e.datos.permisos.crearUsuarios,expression:"(id === '0' && datos.permisos.crearUsuarios) || (id !== 0 && datos.permisos.crearUsuarios)"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-save fa-fw"}),e._v(" Guardar\n          ")])]),e._v(" "),t("li",[t("a",{staticClass:"btn btn-default",attrs:{href:"javascript:history.back()"}},[e._v("Regresar")])])])]},proxy:!0}])}),e._v(" "),t("fieldset",[t("legend",[e._v("Datos generales")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"sucursal_id"}},[e._v("Surcursal")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.sucursal_id,expression:"registro.sucursal_id"}],staticClass:"form-control input-sm",attrs:{id:"sucursal_id",required:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"sucursal_id",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Seleccione...")]),e._v(" "),e._l(e.datos.sucursales,(function(a){return t("option",{domProps:{value:a.id}},[e._v("\n            "+e._s(a.nombre)+"\n            "),"N"===a.estado?[e._v("(Inactiva)")]:e._e()],2)}))],2)]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"nombres"}},[e._v("Nombres")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombres,expression:"registro.nombres"}],staticClass:"form-control input-sm",attrs:{id:"nombres",name:"nombres",type:"text",placeholder:"Ejemplo: Juan Luis",minlength:"2",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.registro.nombres},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombres",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"apellidos"}},[e._v("Apellidos")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.apellidos,expression:"registro.apellidos"}],staticClass:"form-control input-sm",attrs:{id:"apellidos",name:"apellidos",type:"text",placeholder:"Ejemplo: Pérez López",minlength:"2",maxlength:"100",autocomplete:"off",required:""},domProps:{value:e.registro.apellidos},on:{input:function(t){t.target.composing||e.$set(e.registro,"apellidos",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"nombre_usuario"}},[e._v("Nombre de usuario")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre_usuario,expression:"registro.nombre_usuario"}],staticClass:"form-control input-sm",attrs:{id:"nombre_usuario",name:"nombre_usuario",type:"text",placeholder:"Ejemplo: jperez",maxlength:"50",autocomplete:"off",required:""},domProps:{value:e.registro.nombre_usuario},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre_usuario",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"obligatorio",attrs:{for:"correo_electronico"}},[e._v("Correo electrónico")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.correo,expression:"registro.correo"}],staticClass:"form-control input-sm",attrs:{type:"email",id:"correo_electronico",name:"correo_electronico",maxlength:"50",autocomplete:"off",required:""},domProps:{value:e.registro.correo},on:{input:function(t){t.target.composing||e.$set(e.registro,"correo",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{attrs:{for:"telefono_celular"}},[e._v("Teléfono celular")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.telefono_celular,expression:"registro.telefono_celular"}],staticClass:"form-control input-sm",attrs:{id:"telefono_celular",name:"telefono_celular",maxlength:"15",autocomplete:"off"},domProps:{value:e.registro.telefono_celular},on:{input:function(t){t.target.composing||e.$set(e.registro,"telefono_celular",t.target.value)}}})])])]),e._v(" "),t("fieldset",[t("legend",[e._v("Contraseña")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 col-sm-6 form-group"},[t("label",{class:{obligatorio:"0"===e.id},attrs:{for:"contrasena"}},[e._v("Contraseña")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.password,expression:"registro.password"}],staticClass:"form-control input-sm",attrs:{id:"contrasena",name:"contrasena",type:"password",minlength:"8",autocomplete:"off"},domProps:{value:e.registro.password},on:{input:function(t){t.target.composing||e.$set(e.registro,"password",t.target.value)}}}),e._v(" "),t("p",{staticClass:"help-block"},[e._v("\n          * Debe contener al menos 8 caracteres\n        ")])]),e._v(" "),t("div",{staticClass:"col-md-3 col-sm-6 form-group"},[t("label",{class:{obligatorio:"0"===e.id},attrs:{for:"password_confirmation"}},[e._v("Confirmación de contraseña")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.password_confirmation,expression:"registro.password_confirmation"}],staticClass:"form-control input-sm",attrs:{id:"password_confirmation",name:"password_confirmation",type:"password",minlength:"8",autocomplete:"off"},domProps:{value:e.registro.password_confirmation},on:{input:function(t){t.target.composing||e.$set(e.registro,"password_confirmation",t.target.value)}}})])])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6 form-group"},[t("fieldset",[t("legend",{staticClass:"obligatorio"},[e._v("Roles")]),e._v(" "),t("div",{staticStyle:{height:"300px",overflow:"auto"}},e._l(e.datos.roles,(function(a){return t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.roles,expression:"registro.roles"}],attrs:{type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(e.registro.roles)?e._i(e.registro.roles,a.id)>-1:e.registro.roles},on:{change:function(t){var r=e.registro.roles,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.id,n=e._i(r,s);o.checked?n<0&&e.$set(e.registro,"roles",r.concat([s])):n>-1&&e.$set(e.registro,"roles",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.registro,"roles",i)}}}),e._v(" "+e._s(a.name)+"\n            ")])])})),0)])]),e._v(" "),t("div",{staticClass:"col-md-6 form-group"},[t("fieldset",[t("legend",[e._v("\n          Secciones\n          "),t("span",{staticClass:"badge"},[e._v("\n            "+e._s(e.registro.secciones.length)+" / "+e._s(e.datos.secciones.length)+"\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:e.marcarTodasLasSecciones}},[e._v("\n            Todas\n          ")]),e._v(" "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:e.ningunaSeccion}},[e._v("\n            Ninguna\n          ")])]),e._v(" "),t("div",{staticStyle:{height:"300px",overflow:"auto"}},e._l(e.datos.secciones,(function(a){return t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.secciones,expression:"registro.secciones"}],attrs:{type:"checkbox"},domProps:{value:a.id,checked:Array.isArray(e.registro.secciones)?e._i(e.registro.secciones,a.id)>-1:e.registro.secciones},on:{change:function(t){var r=e.registro.secciones,o=t.target,i=!!o.checked;if(Array.isArray(r)){var s=a.id,n=e._i(r,s);o.checked?n<0&&e.$set(e.registro,"secciones",r.concat([s])):n>-1&&e.$set(e.registro,"secciones",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.registro,"secciones",i)}}}),e._v(" "+e._s(a.nombre)+"\n            ")])])})),0)])])]),e._v(" "),t("fieldset",[t("legend",[e._v("Otros")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{attrs:{for:"nombre_validacion"}},[e._v("Nombre sumilla validación")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre_validacion,expression:"registro.nombre_validacion"}],staticClass:"form-control input-sm",attrs:{id:"nombre_validacion",name:"nombre_validacion",placeholder:"ejemplo: Dr. Juan Pérez",maxlength:"100",autocomplete:"off"},domProps:{value:e.registro.nombre_validacion},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre_validacion",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{attrs:{for:"sumilla_validacion_id"}},[e._v("Sumilla validación")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"sumilla_validacion_id",placeholder:"Seleccione...",options:e.datos.firmas,reduce:function(e){return e.id},label:"nombre"},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.registro.sumilla_validacion_id,callback:function(t){e.$set(e.registro,"sumilla_validacion_id",t)},expression:"registro.sumilla_validacion_id"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{attrs:{for:"firma_validacion_id"}},[e._v("Firma validación")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"firma_validacion_id",placeholder:"Seleccione...",options:e.datos.firmas,reduce:function(e){return e.id},label:"nombre"},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.registro.firma_validacion_id,callback:function(t){e.$set(e.registro,"firma_validacion_id",t)},expression:"registro.firma_validacion_id"}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("label",{attrs:{for:"factura_punto_emision"}},[e._v("Código de punto de emisión")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.factura_punto_emision,expression:"registro.factura_punto_emision"}],staticClass:"form-control input-sm",attrs:{id:"factura_punto_emision",name:"factura_punto_emision",maxlength:"3",autocomplete:"off"},domProps:{value:e.registro.factura_punto_emision},on:{input:function(t){t.target.composing||e.$set(e.registro,"factura_punto_emision",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[e._m(0),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.referencia_auxiliar,expression:"registro.referencia_auxiliar"}],staticClass:"form-control input-sm",attrs:{id:"referencia_auxiliar",name:"referencia_auxiliar",maxlength:"13",autocomplete:"off"},domProps:{value:e.registro.referencia_auxiliar},on:{input:function(t){t.target.composing||e.$set(e.registro,"referencia_auxiliar",t.target.value)}}})])])]),e._v(" "),t("fieldset",[t("legend",[e._v("Configuraciónes de etiqueta")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 col-sm-12 form-group"},[e._m(1),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"empresas",placeholder:"Seleccione...",options:e.datos.etiquetas,label:"id",reduce:function(e){return e.id}},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"option",fn:function(a){return[t("b",[e._v("Id: ")]),e._v(" "+e._s(a.id.toString().padStart(2,"0"))+"\n            "),t("b",[e._v("Alto: ")]),e._v(" "+e._s(a.alto)+"\n            "),t("b",[e._v("Ancho: ")]),e._v(e._s(a.ancho)+"\n            "),t("b",[e._v("Tamaño de letra: ")]),e._v(" "+e._s(a.tamano_letra)+"\n            "),t("b",[e._v("Alto código barras: ")]),e._v(" "+e._s(a.alto_codigo_barras)+"\n            "),t("b",[e._v("Ancho código barras: ")]),e._v(" "+e._s(a.ancho_codigo_barras)+"\n            "),t("b",{directives:[{name:"show",rawName:"v-show",value:a.alineacion_codigo_barras,expression:"etiqueta.alineacion_codigo_barras"}]},[e._v("Orientación: ")]),e._v(" "+e._s(a.alineacion_codigo_barras)+"\n          ")]}},{key:"selected-option",fn:function(a){return[t("b",[e._v("Id:")]),e._v(" "+e._s(a.id.toString().padStart(2,"0"))+" \n            "),t("b",[e._v("Alto:")]),e._v(" "+e._s(a.alto)+" \n            "),t("b",[e._v("Ancho:")]),e._v(" "+e._s(a.ancho)+" \n            "),t("b",[e._v("Tamaño de letra:")]),e._v(" "+e._s(a.tamano_letra)+" \n            "),t("b",[e._v("Alto código barras:")]),e._v(" "+e._s(a.alto_codigo_barras)+" \n            "),t("b",[e._v("Ancho código barras:")]),e._v(" "+e._s(a.ancho_codigo_barras)+" \n            "),t("b",{directives:[{name:"show",rawName:"v-show",value:a.alineacion_codigo_barras,expression:"etiqueta.alineacion_codigo_barras"}]},[e._v("Orientación:")]),e._v(" "+e._s(a.alineacion_codigo_barras)+"\n          ")]}}]),model:{value:e.registro.configuracion_etiqueta_id,callback:function(t){e.$set(e.registro,"configuracion_etiqueta_id",t)},expression:"registro.configuracion_etiqueta_id"}})],1)])]),e._v(" "),t("fieldset",[t("legend",[e._v("Servidor de impresión")]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3 form-group"},[t("label",{attrs:{for:"nombre_impresora_etiqueta"}},[e._v("Estado")]),e._v(" "),t("div",[e.encendido?t("span",{staticClass:"label label-success"},[e._v("Encendido")]):e._e(),e._v(" "),e.error?t("span",{staticClass:"label label-warning"},[e._v("Error")]):e._e(),e._v(" "),e.apagado?t("span",{staticClass:"label label-danger"},[e._v("Apagado")]):e._e()])]),e._v(" "),t("div",{staticClass:"col-md-4 form-group"},[t("label",{attrs:{for:"imprimir_etiqueta_directo"}}),e._v(" "),t("div",{staticClass:"checkbox"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.imprimir_etiqueta_directo,expression:"registro.imprimir_etiqueta_directo"}],attrs:{id:"imprimir_etiqueta_directo",type:"checkbox"},domProps:{checked:Array.isArray(e.registro.imprimir_etiqueta_directo)?e._i(e.registro.imprimir_etiqueta_directo,null)>-1:e.registro.imprimir_etiqueta_directo},on:{change:function(t){var a=e.registro.imprimir_etiqueta_directo,r=t.target,o=!!r.checked;if(Array.isArray(a)){var i=e._i(a,null);r.checked?i<0&&e.$set(e.registro,"imprimir_etiqueta_directo",a.concat([null])):i>-1&&e.$set(e.registro,"imprimir_etiqueta_directo",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.registro,"imprimir_etiqueta_directo",o)}}}),e._v("\n            Imprimir etiquetas de manera directa\n          ")])])]),e._v(" "),t("div",{staticClass:"col-md-5 form-group"},[t("label",{attrs:{for:"nombre_impresora_etiqueta"}},[e._v("\n          Impresora de etiquetas\n          "),t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button"},on:{click:e.validarImpresora}},[e._v("\n            Validar impresora\n          ")])]),e._v(" "),0===e.impresoras.length?t("input",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre_impresora_etiqueta,expression:"registro.nombre_impresora_etiqueta"}],staticClass:"form-control input-sm",attrs:{type:"text",id:"nombre_impresora_etiqueta"},domProps:{value:e.registro.nombre_impresora_etiqueta},on:{input:function(t){t.target.composing||e.$set(e.registro,"nombre_impresora_etiqueta",t.target.value)}}}):e._e(),e._v(" "),e.impresoras.length>0?t("select",{directives:[{name:"model",rawName:"v-model",value:e.registro.nombre_impresora_etiqueta,expression:"registro.nombre_impresora_etiqueta"}],staticClass:"form-control input-sm",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.registro,"nombre_impresora_etiqueta",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("Ninguno")]),e._v(" "),e._l(e.impresoras,(function(a){return t("option",{domProps:{value:a}},[e._v(e._s(a))])}))],2):e._e()])])])],1)}),[function(){var e=this._self._c;return e("label",{attrs:{for:"referencia_auxiliar"}},[this._v("\n          Referencia auxiliar\n          "),e("i",{staticClass:"fas fa-info-circle",attrs:{"data-toggle":"tooltip","data-placement":"right","data-html":"true",title:"<strong>Contífico</strong><br>Define identificación de usuario que emite factura<br><strong>IESS AS400</strong><br>Define usuario de IESS AS400"}})])},function(){var e=this._self._c;return e("div",{staticClass:"column"},[e("label",[this._v("Dimensiones de etiqueta")])])}],!1,null,null,null).exports},5889:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{DatosOrden:a(6570).Z},props:{orden:{type:Object,default:function(){return{}}},tipoConsulta:{type:String,default:null},token:{type:String,default:null}},data:function(){return{adjuntos:[],cargandoAdjuntos:!1}},mounted:function(){var e=this;$("#modalAdjuntos").on("shown.bs.modal",(function(t){"modalAdjuntos"===t.target.id&&e.cargarAdjuntos()})),$("#modalAdjuntos").on("hide.bs.modal",(function(){e.adjuntos=[]}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarAdjuntos:function(){var e=this;this.cargandoAdjuntos=!0,axios.get("/api/ordenes/".concat(this.orden.id,"/adjuntos"),{params:{token:this.token}}).then((function(t){if(e.adjuntos=t.data.data,1===e.adjuntos.length){var a=document.createElement("a");a.href=e.urlAdjunto(e.adjuntos[0]),a.setAttribute("target","_blank"),a.click(),$("#modalAdjuntos").modal("toggle")}})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores(a)})).then((function(){return e.cargandoAdjuntos=!1}))},urlAdjunto:function(e){var t="/".concat(this.url,"/").concat(this.orden.id,"/adjuntos/").concat(e.id);return this.token&&(t+="?token=".concat(this.token)),t}},computed:{url:function(){return"resultados"===this.tipoConsulta?"".concat(this.tipoConsulta):this.tipoConsulta?"".concat(this.tipoConsulta,"/ordenes"):"api/ordenes"}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"modalAdjuntos"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Adjuntos")]),e._v(" "),t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,orden:e.orden}})],1),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),!e.cargandoAdjuntos&&e.adjuntos.length>0?t("div",{staticStyle:{height:"280px",overflow:"auto"}},[t("table",{staticClass:"table table-hover table-condensed"},e._l(e.adjuntos,(function(a){return t("tr",[t("td",{staticClass:"col-md-8"},[e._v("\n                "+e._s(a.nombre_parametro)+"\n              ")]),e._v(" "),t("td",{staticClass:"col-md-4 text-center"},[t("a",{attrs:{target:"_blank",href:e.urlAdjunto(a)}},[e._v("\n                  Ver\n                ")])])])})),0)]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargandoAdjuntos,cantidad:e.adjuntos.length,alto:"120px",tipo:"adjuntos"},scopedSlots:e._u([{key:"no-resultado",fn:function(){return[e._v("No existen adjuntos registrados para esta orden")]},proxy:!0}])})],1),e._v(" "),e._m(1)])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×\n          ")])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e("i",{staticClass:"fas fa-times fa-fw"}),this._v("Cerrar\n        ")])])}],!1,null,"329b9720",null).exports},5142:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{procesando:{type:Boolean,default:!1},mostrarProcesando:{type:Boolean,default:!0},icono:{type:String,default:""}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("button",{staticClass:"btn",attrs:{disabled:e.procesando},on:{click:function(t){return e.$emit("click")}}},[e.procesando?[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v(" "),e.mostrarProcesando?t("span",{staticClass:"hidden-xs"},[e._v("Procesando")]):e._e()]:[e._t("default")]],2)}),[],!1,null,null,null).exports},9470:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{cargando:{type:Boolean,required:!0},cantidad:{type:Number|String,default:""},tipo:{type:String,default:"registros"},alto:{type:String,default:"280px"},mostrarEtiqueta:{type:Boolean,default:!0}},computed:{estilos:function(){return{height:this.alto}},etiqueta:function(){return this.mostrarEtiqueta?"Cargando...":""}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return e.cargando||0===e.cantidad?t("div",{staticClass:"text-center",staticStyle:{display:"flex"},style:e.estilos},[e.cargando?t("h4",{staticStyle:{margin:"auto"}},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v(" "),e._t("cargando",(function(){return[e._v(e._s(e.etiqueta))]}))],2):e._e(),e._v(" "),e.mostrarEtiqueta&&!e.cargando&&0===e.cantidad?t("p",{staticStyle:{margin:"auto"}},[e._t("no-resultado",(function(){return[e._v("No existen "+e._s(e.tipo)+" con los filtros especificados")]}))],2):e._e()]):e._e()}),[],!1,null,null,null).exports},1922:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});const r={methods:{alternar:function(){$("#modalCargando").modal("toggle")}}};var o=a(3379),i=a.n(o),s=a(8520),n={insert:"head",singleton:!1};i()(s.Z,n);s.Z.locals;const c=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",staticStyle:{"z-index":"1051"},attrs:{id:"modalCargando",tabindex:"-1",role:"dialog","data-keyboard":"false","data-backdrop":"static"}},[t("div",{staticClass:"modal-dialog modal-sm",staticStyle:{"padding-top":"60px"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-body"},[e._m(0),e._v(" "),t("div",{staticClass:"row",staticStyle:{"padding-top":"5px"}},[t("div",{staticClass:"col-sm-12"},[e._t("default",(function(){return[e._v("\n              Por favor espere..."),t("br"),e._v("La página está cargando.\n            ")]}))],2)])])])])])}),[function(){var e=this._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 text-center"},[e("i",{staticClass:"fas fa-circle-notch fa-spin fa-3x"})])])}],!1,null,"acea5eca",null).exports},6570:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{mostrarNumeroOrden:{type:Boolean,default:!1},mostrarNumeroOrdenExterna:{type:Boolean,default:!1},mostrarFechaOrden:{type:Boolean,default:!1},mostrarFechaPedido:{type:Boolean,default:!1},mostrarNombreUsuarioIngresa:{type:Boolean,default:!1},mostrarEstadoOrden:{type:Boolean,default:!1},mostrarIdentificacion:{type:Boolean,default:!0},mostrarFechaNacimiento:{type:Boolean,default:!0},mostrarEdad:{type:Boolean,default:!1},mostrarMedico:{type:Boolean,default:!1},mostrarSexo:{type:Boolean,default:!0},mostrarDireccion:{type:Boolean,default:!0},mostrarTelefono:{type:Boolean,default:!0},mostrarCorreo:{type:Boolean,default:!0},mostrarPoliza:{type:Boolean,default:!0},mostrarSaldo:{type:Boolean,default:!1},mostrarFechaCita:{type:Boolean,default:!1},mostrarCliente:{type:Boolean,default:!1},mostrarTipoAtencion:{type:Boolean,default:!1},mostrarServicio:{type:Boolean,default:!1},mostrarHistoriaClinica:{type:Boolean,default:!1},orden:{type:Object,default:function(){return{}}}},data:function(){return{key:0}},mounted:function(){this.buscarSaldo()},methods:{buscarSaldo:function(){var e=this;this.mostrarSaldo&&void 0===this.saldo&&this.idOrden&&axios.get("/api/ordenes/".concat(this.idOrden,"/saldo")).then((function(t){var a=t.data.data;return Vue.set(e.orden,"saldo",a)})).catch((function(t){var a=e.procesarErrorResponse(t);console.error("¡Error al cargar saldo!",a)}))}},computed:{esHumano:function(){return"App\\Models\\PacienteHumano"===this.tipoPaciente},esAnimal:function(){return"App\\Models\\PacienteAnimal"===this.tipoPaciente},esObjeto:function(){return"App\\Models\\SujetoObjeto"===this.tipoPaciente},nombrePaciente:function(){if(_.isEmpty(this.paciente))return"Paciente";var e="";return this.esHumano&&(e=_.toUpper(this.paciente.apellidos)+", "+_.startCase(_.toLower(this.paciente.nombres))),this.esAnimal&&(e=_.startCase(_.toLower(this.paciente.nombre))),this.esObjeto&&(e=_.startCase(_.toLower(this.paciente.descripcion))),e},idOrden:function(){return this.orden&&this.orden.id},tipoPaciente:function(){return this.orden&&this.orden.paciente_type},tipoAtencion:function(){return this.orden&&this.orden.tipo_atencion},servicio:function(){return this.orden&&this.orden.sala&&this.orden.sala},cliente:function(){return this.orden&&this.orden.subempresa?this.orden.subempresa.nombre===this.orden.subempresa.empresa.nombre?this.orden.subempresa.empresa.nombre:"".concat(this.orden.subempresa.empresa.nombre," (").concat(this.orden.subempresa.nombre,")"):""},numeroOrden:function(){return this.orden&&this.orden.numero_orden},numeroOrdenExterna:function(){return this.orden&&this.orden.numero_orden_externa},fechaOrden:function(){return this.orden&&this.orden.fecha_orden},fechaPedido:function(){return this.orden&&this.orden.fecha_pedido},fechaCita:function(){return this.orden&&this.orden.fecha_cita},estadoOrden:function(){return this.orden&&this.orden.estado},nombreUsuarioIngresa:function(){return this.orden&&this.orden.usuario_ingresa&&this.orden.usuario_ingresa.nombre_usuario},paciente:function(){return this.orden&&this.orden.paciente?this.orden.paciente:{}},medico:function(){return _.get(this.orden.medico,"nombre_completo","")},valorTotal:function(){return this.orden&&this.orden.valor_total},saldo:function(){return this.orden&&this.orden.saldo},numeroHistoriaClinica:function(){return this.orden?this.obtenerNumeroHistoriaClinica(this.orden,this.orden.sistema_externo_id):""},sexoPaciente:function(){if(this.esHumano){if("M"===this.paciente.sexo)return"Masculino";if("F"===this.paciente.sexo)return"Femenino"}if(this.esAnimal){if("M"===this.paciente.sexo)return"Macho";if("F"===this.paciente.sexo)return"Hembra"}return""}},watch:{idOrden:function(){this.buscarSaldo()},saldo:function(){this.key++}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("span",{directives:[{name:"show",rawName:"v-show",value:e.paciente.nombre_paciente,expression:"paciente.nombre_paciente"}]},[e.mostrarNumeroOrden&&e.numeroOrden?[t("i",{staticClass:"fas fa-file-medical-alt fa-lg"}),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.$options.filters.numeroOrden(e.numeroOrden,e.$configs))}}),e._v("\n     \n  ")]:e._e(),e._v(" "),e.mostrarNumeroOrdenExterna&&e.numeroOrdenExterna?t("span",{staticClass:"no-salto-linea",attrs:{title:"Número de orden externa","data-placement":"bottom",rel:"tooltip"}},[t("i",{staticClass:"fas fa-external-link-alt fa-lg"}),e._v("\n    "+e._s(e.numeroOrdenExterna)+"\n     \n  ")]):e._e(),e._v(" "),e.esHumano?t("i",{staticClass:"fas fa-user fa-lg"}):e._e(),e._v(" "),e.esAnimal?t("i",{staticClass:"fas fa-paw fa-lg"}):e._e(),e._v(" "),e.esObjeto?t("i",{staticClass:"fas fa-flask fa-lg"}):e._e(),e._v(" "),t("span",{staticClass:"paciente"},[e._v("\n    "+e._s(e.nombrePaciente)+"\n    "),e.esAnimal&&e.paciente.esterilizado?[e._m(0)]:e._e(),e._v("\n     \n  ")],2),e._v(" "),e.mostrarIdentificacion&&e.paciente.numero_identificacion?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"far fa-id-card fa-lg"}),e._v("\n    "+e._s(e.paciente.numero_identificacion)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarHistoriaClinica&&e.numeroHistoriaClinica?t("span",{staticClass:"no-salto-linea"},[t("strong",[e._v("HC")]),e._v("\n    "+e._s(e.numeroHistoriaClinica)+"\n     \n  ")]):e._e(),e._v(" "),e.esAnimal&&e.paciente.raza&&e.paciente.raza.nombre?t("span",{staticClass:"no-salto-linea",attrs:{title:"Raza","data-placement":"bottom",rel:"tooltip"}},[t("i",{staticClass:"fas fa-sitemap fa-lg"}),e._v("\n    "+e._s(e.paciente.raza.padre.nombre)+" - "+e._s(e.paciente.raza.nombre)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarFechaNacimiento&&(e.esHumano||e.esAnimal)?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-birthday-cake fa-lg"}),e._v("\n    "+e._s(e.paciente.fecha_nacimiento)+" ("+e._s(e.obtenerEdad(e.paciente.fecha_nacimiento))+")\n     \n  ")]):e._e(),e._v(" "),e.mostrarEdad&&(e.esHumano||e.esAnimal)?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-birthday-cake fa-lg"}),e._v("\n    "+e._s(e.obtenerEdad(e.paciente.fecha_nacimiento))+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarSexo&&e.paciente.sexo?t("span",{staticClass:"no-salto-linea",attrs:{title:e.sexoPaciente,rel:"tooltip","data-placement":"bottom"}},["M"===e.paciente.sexo?t("i",{staticClass:"fas fa-mars fa-lg"}):e._e(),e._v(" "),"F"===e.paciente.sexo?t("i",{staticClass:"fas fa-venus fa-lg"}):e._e(),e._v(" "),e.esHumano?[e._v("\n      "+e._s(e.paciente.sexo)+"\n    ")]:e._e(),e._v(" "),e.esAnimal?[e._v("\n      "+e._s("M"===e.paciente.sexo?"M":"H")+"\n    ")]:e._e(),e._v("\n     \n  ")],2):e._e(),e._v(" "),e.mostrarFechaOrden&&e.fechaOrden?t("span",{staticClass:"no-salto-linea",attrs:{title:"Fecha orden",rel:"tooltip","data-placement":"bottom"}},[t("i",{staticClass:"fas fa-calendar-alt fa-lg"}),e._v("\n    "+e._s(e._f("fecha")(e.fechaOrden,"YYYY-MM-DD HH:mm"))+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarFechaPedido&&e.fechaPedido?t("span",{staticClass:"no-salto-linea",attrs:{title:"Fecha pedido",rel:"tooltip","data-placement":"bottom"}},[t("i",{staticClass:"fas fa-calendar-day fa-lg"}),e._v("\n    "+e._s(e.fechaPedido)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarNombreUsuarioIngresa&&e.nombreUsuarioIngresa?t("span",{staticClass:"no-salto-linea",attrs:{"data-placement":"bottom",title:"Usuario ingresa",rel:"tooltip"}},[t("i",{staticClass:"fas fa-user-nurse fa-lg"}),e._v("\n    "+e._s(e.nombreUsuarioIngresa)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarPoliza&&e.paciente.numero_poliza?t("span",{staticClass:"no-salto-linea",attrs:{title:"Número de poliza",rel:"tooltip","data-placement":"bottom"}},[t("i",{staticClass:"fas fa-user-shield fa-lg",attrs:{title:"Número de poliza"}}),e._v("\n    "+e._s(e.paciente.numero_poliza)+"\n     \n  ")]):e._e(),e._v(" "),(e.esAnimal||e.esObjeto)&&e.paciente.dueno_responsable?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-user-tie fa-lg",attrs:{title:"Dueño"}}),e._v("\n    "+e._s(e.paciente.dueno_responsable)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarTelefono&&e.paciente.telefono_celular?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-mobile-alt fa-lg"}),e._v("\n    "+e._s(e.paciente.telefono_celular)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarCorreo&&e.paciente.correo?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-envelope fa-lg"}),e._v("\n    "+e._s(e.paciente.correo)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarDireccion&&e.paciente.direccion?t("span",{staticClass:"no-salto-linea"},[t("i",{staticClass:"fas fa-map-marked-alt fa-lg"}),e._v("\n    "+e._s(e.paciente.direccion)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarFechaCita&&e.fechaCita?t("span",{staticClass:"no-salto-linea",attrs:{title:"Fecha cita","data-placement":"bottom",rel:"tooltip"}},[t("i",{staticClass:"fas fa-calendar-alt fa-lg"}),e._v("\n    "+e._s(e.fechaCita)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarCliente&&e.cliente?t("span",{staticClass:"no-salto-linea",attrs:{title:"Cliente",rel:"tooltip","data-placement":"bottom"}},[t("i",{staticClass:"fas fa-user-tie fa-lg"}),e._v("\n    "+e._s(e.cliente)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarTipoAtencion&&e.tipoAtencion?t("span",{staticClass:"no-salto-linea",attrs:{title:"Tipo atención",rel:"tooltip","data-placement":"bottom"}},[t("i",{staticClass:"fas fa-concierge-bell fa-lg"}),e._v("\n    "+e._s(e.tipoAtencion.nombre)+"\n    "),e.tipoAtencion.urgente?t("i",{staticClass:"fas fa-exclamation-triangle text-danger"}):e._e(),e._v("\n     \n  ")]):e._e(),e._v(" "),e.mostrarServicio&&e.servicio?t("span",{staticClass:"no-salto-linea",attrs:{title:"Servicio",rel:"tooltip","data-placement":"bottom"}},[t("i",{staticClass:"fab fa-servicestack fa-lg"}),e._v("\n    "+e._s(e.servicio.nombre)+"\n    "),e.servicio.urgente?t("i",{staticClass:"fas fa-exclamation-triangle text-danger"}):e._e(),e._v("\n     \n  ")]):e._e(),e._v(" "),e.mostrarMedico&&e.medico?t("span",{staticClass:"no-salto-linea",attrs:{title:"Médico",rel:"tooltip","data-placement":"bottom"}},[t("i",{staticClass:"fas fa-user-md fa-lg"}),e._v("\n    "+e._s(e.medico)+"\n     \n  ")]):e._e(),e._v(" "),e.mostrarEstadoOrden?[t("orden-estado",{attrs:{abreviado:!0,estado:e.estadoOrden}}),e._v("\n     \n  ")]:e._e(),e._v(" "),e.mostrarSaldo?[0===e.saldo?t("span",[t("i",{staticClass:"far fa-check-circle fa-lg text-success",attrs:{"aria-hidden":"true"}}),e._v("\n      "+e._s(e.$cliente.moneda)+e._s(e._f("numero")(e.valorTotal))+"\n    ")]):e.saldo>0?t("span",{key:e.key,staticClass:"text-danger",attrs:{rel:"tooltip",title:"Paciente debe ".concat(e.$cliente.moneda).concat(e.saldo.toFixed(2))}},[t("i",{staticClass:"far fa-times-circle fa-lg",attrs:{"aria-hidden":"true"}}),e._v("\n      "+e._s(e.$cliente.moneda)+e._s(e._f("numero")(e.valorTotal))+"\n    ")]):e._e()]:e._e()],2)}),[function(){var e=this._self._c;return e("small",[e("strong",[this._v("Esterilizado")])])}],!1,null,null,null).exports},6235:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{estado:{type:String,default:"G"},abreviado:{type:Boolean,default:!1}},computed:{claseEstado:function(){return{"label-default":"G"===this.estado,"label-en-proceso":"P"===this.estado,"label-primary":"R"===this.estado,"label-turquoise":"L"===this.estado,"label-warning":"X"===this.estado,"label-success":"V"===this.estado}}}};const o=(0,a(1900).Z)(r,(function(){var e=this;return(0,e._self._c)("span",{staticClass:"label cursor-menu",class:e.claseEstado,attrs:{rel:"tooltip",title:e.abreviado?e.$options.filters.estadoDetalleOrden(e.estado):""}},[e.abreviado?[e._v(e._s(e.estado.toUpperCase()))]:[e._v(e._s(e._f("estadoDetalleOrden")(e.estado)))]],2)}),[],!1,null,null,null).exports},6354:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(6570),o=a(6235),i=a(4590);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={components:{DatosOrden:r.Z,DetalleOrdenEstado:o.Z},props:{portal:{type:Boolean,default:!1}},data:function(){return{cargando:!1,idOrden:null,orden:{}}},mounted:function(){var e=this;$("#modalEstadoOrden").on("shown.bs.modal",(function(t){"modalEstadoOrden"===t.target.id&&(e.idOrden=$(t.relatedTarget).data("id-orden"),e.cargarOrden())})),$("#modalEstadoOrden").on("hide.bs.modal",(function(){return e.limpiar()}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarOrden:function(){var e=this;this.cargando=!0;var t={incluir:["paciente","medico","subempresa.empresa","tipoAtencion","sala","usuarioIngresa","detallesOrdenes.examen","detallesOrdenes.reportadoPor","detallesOrdenes.reportadoPorEquipo","detallesOrdenes.validadoPor","detallesOrdenes.detalleOrdenMuestras","detallesOrdenes.detallesRemisiones.remision.laboratorio"]};this.portal&&(t.incluir=["paciente","detallesOrdenes.examen"]),axios.get("/api/ordenes/".concat(this.idOrden),{params:t}).then((function(t){var a=t.data.data;a.detalles_ordenes=a.detalles_ordenes.map((function(e){var t=e.detalle_orden_muestras?e.detalle_orden_muestras.find((function(e){return"PENDIENTE"!==e.estado})):null;return n(n({},e),{},{fecha_recepcion_muestra:t&&t.fecha})})),e.orden=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar orden",a)})).then((function(){return e.cargando=!1}))},limpiar:function(){this.orden={}},obtenerDetalleRemision:function(e){var t;return null===(t=e.detalles_remisiones)||void 0===t?void 0:t.filter((function(e){return e.estado!==i.P0.ANULADO}))[0]},obtenerEtiquetaRemision:function(e){var t=this.obtenerDetalleRemision(e);return t?"".concat(t.remision.laboratorio.nombre," #").concat(t.remision.id):""}},computed:{detallesOrden:function(){return this.orden.detalles_ordenes?this.orden.detalles_ordenes:[]}}};const d=(0,a(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"modalEstadoOrden",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),e.orden?t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-numero-orden-externa":!0,"mostrar-historia-clinica":!0,"mostrar-estado-orden":!0,"mostrar-fecha-orden":!0,"mostrar-fecha-pedido":!0,"mostrar-nombre-usuario-ingresa":!0,"mostrar-identificacion":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-edad":!0,"mostrar-poliza":!1,"mostrar-telefono":!0,"mostrar-correo":!0,"mostrar-direccion":!1,"mostrar-cliente":!0,"mostrar-tipo-atencion":!0,"mostrar-servicio":!0,"mostrar-medico":!0,orden:e.orden}}):e._e()],1),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),!e.cargando&&e.detallesOrden.length>0?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"text-left col-sm-3",attrs:{rowspan:"2"}},[e._v("\n              Examen\n              "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.detallesOrden.length>0,expression:"detallesOrden.length > 0"}],staticClass:"badge cursor-menu",attrs:{title:"Total",rel:"tooltip","data-placement":"bottom"}},[e._v("\n                "+e._s(e.detallesOrden.length)+"\n              ")])]),e._v(" "),t("th",{staticClass:"text-center col-sm-1",attrs:{rowspan:"2"}},[e._v("Estado")]),e._v(" "),e.portal?e._e():t("th",{staticClass:"text-center col-sm-2",attrs:{rowspan:"2"}},[e._v("Fecha recepción muestra")]),e._v(" "),e.portal?e._e():t("th",{staticClass:"text-center",attrs:{colspan:"3"}},[e._v("Reporte")]),e._v(" "),e.portal?e._e():t("th",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("Validación")]),e._v(" "),!e.portal&&e.orden.sistema_externo_id?t("th",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("Envío")]):e._e()]),e._v(" "),e.portal?e._e():t("tr",[t("th",{staticClass:"text-center col-sm-1"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Usuario")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Equipo")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-center col-sm-1"},[e._v("Usuario")]),e._v(" "),!e.portal&&e.orden.sistema_externo_id?t("th",{staticClass:"text-center col-sm-1"},[e._v("Fecha")]):e._e()])]),e._v(" "),t("tbody",[e._l(e.detallesOrden,(function(a){return[t("tr",[t("td",[e._v("\n                "+e._s(a.examen.nombre)+"\n                "),e.obtenerDetalleRemision(a)?t("i",{staticClass:"fas fa-shipping-fast text-gris cursor-menu",attrs:{title:e.obtenerEtiquetaRemision(a),rel:"tooltip"}}):e._e()]),e._v(" "),t("td",{staticClass:"text-center"},[t("detalle-orden-estado",{attrs:{estado:a.estado}})],1),e._v(" "),e.portal?e._e():t("td",{staticClass:"text-center",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_recepcion_muestra,"YYYY-MM-DD </br> HH:mm","-"))}}),e._v(" "),e.portal?e._e():t("td",{staticClass:"text-center no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_reporta,"YYYY-MM-DD </br> HH:mm","-"))}}),e._v(" "),e.portal?e._e():t("td",{staticClass:"text-center"},[e._v("\n                "+e._s(a.reportado_por?a.reportado_por.nombre_usuario:"-")+"\n              ")]),e._v(" "),e.portal?e._e():t("td",{staticClass:"text-center"},[a.reportado_por_equipo?[e._v("\n                  "+e._s(a.reportado_por_equipo.nombre)+"\n                ")]:a.extras&&a.extras.sistema_externo&&a.extras.sistema_externo.nombre_equipo_reporta?[e._v("\n                  "+e._s(a.extras.sistema_externo.nombre_equipo_reporta)+"\n                ")]:[e._v("-")]],2),e._v(" "),e.portal?e._e():t("td",{staticClass:"text-center no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_valida,"YYYY-MM-DD </br> HH:mm","-"))}}),e._v(" "),e.portal?e._e():t("td",{staticClass:"text-center"},[e._v(e._s(a.validado_por?a.validado_por.nombre_usuario:"-")+"\n              ")]),e._v(" "),!e.portal&&e.orden.sistema_externo_id?t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea",domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_envia,"YYYY-MM-DD </br> HH:mm","-"))}})]):e._e()])]}))],2)]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.detallesOrden.length,tipo:"exámenes"}})],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{title:"Actualizar",disabled:e.cargando},on:{click:e.cargarOrden}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],staticClass:"fas fa-sync"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando,expression:"cargando"}],staticClass:"fas fa-spinner fa-spin"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")])])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports},8177:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={components:{DatosOrden:a(6570).Z},props:{portal:{type:String,required:!0,validator:function(e){return-1!==["empresas","medicos","pacientes"].indexOf(e)}},token:{type:String,default:null}},data:function(){return{procesando:!1,orden:{},opciones:{lang:""}}},mounted:function(){var e=this;$("#modalImprimirResultados").on("show.bs.modal",(function(t){e.orden=$(t.relatedTarget).data("orden")})),$("#modalImprimirResultados").on("hide.bs.modal",(function(){e.opciones.lang=""}))},methods:{langClick:function(e){this.opciones.lang===e.target.value&&(this.opciones.lang="")},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)}},computed:{url:function(){var e={lang:this.opciones.lang,token:this.token};return e=this.obtenerParametrosUrl(e),"pacientes"===this.portal?"consulta-resultados/".concat(this.orden.id,"/pdf").concat(e):"/consulta-resultados-".concat(this.portal,"/").concat(this.orden.id,"/pdf").concat(e)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"modalImprimirResultados"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("form",[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Imprimir resultados")]),e._v(" "),t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!1,"mostrar-direccion":!1,orden:e.orden}})],1),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.lang,expression:"opciones.lang"}],attrs:{name:"lang",type:"radio",value:"esEn"},domProps:{checked:e._q(e.opciones.lang,"esEn")},on:{click:e.langClick,change:function(t){return e.$set(e.opciones,"lang","esEn")}}}),e._v("\n                  Etiquetas en Español/Inglés\n                ")])])]),e._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.opciones.lang,expression:"opciones.lang"}],attrs:{name:"lang",type:"radio",value:"en"},domProps:{checked:e._q(e.opciones.lang,"en")},on:{click:e.langClick,change:function(t){return e.$set(e.opciones,"lang","en")}}}),e._v("\n                  Etiquetas en Inglés\n                ")])])])])],1),e._v(" "),t("div",{staticClass:"modal-footer"},[e._m(1),e._v(" "),t("a",{staticClass:"btn btn-sm btn-primary",attrs:{id:"portalPdfResultados",href:this.url,target:"_blank"}},[e._v("\n            Imprimir\n          ")])])])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×\n            ")])])},function(){var e=this._self._c;return e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e("i",{staticClass:"fas fa-times fa-fw"}),this._v("Cerrar\n          ")])}],!1,null,null,null).exports},2328:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});const r={props:{texto:{type:String,default:"PRO"}}};var o=a(3379),i=a.n(o),s=a(6774),n={insert:"head",singleton:!1};i()(s.Z,n);s.Z.locals;const c=(0,a(1900).Z)(r,(function(){var e=this;return(0,e._self._c)("div",{staticClass:"corner-ribbon right hidden-xs"},[e._v(e._s(e.texto))])}),[],!1,null,"bac58d58",null).exports},1430:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{id:{type:String,required:!0},fondo:{type:[Boolean,String],default:!0,validator:function(e){return[!0,!1,"static"]}},tamano:{type:String,default:"",validator:function(e){return["","sm","lg"].includes(e)}},teclado:{type:Boolean,default:!0},value:{type:Boolean,default:!1},top:{type:Number,default:0}},mounted:function(){var e=this,t=$("#".concat(this.id));$(t).on("show.bs.modal",(function(){e.$emit("abierto"),e.$emit("input",!0)})),$(t).on("hide.bs.modal",(function(){e.$emit("cerrado"),e.$emit("input",!1)}))},computed:{estiloTop:function(){return this.top?"top:".concat(this.top,"px"):""}},watch:{value:function(){var e=$("#".concat(this.id));this.value?e.modal({backdrop:this.fondo,keyboard:this.teclado}):e.modal("hide")}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",class:{"modal-lg":"lg"===e.tamano,"modal-sm":"sm"===e.tamano},attrs:{role:"document"}},[t("div",{staticClass:"modal-content",style:e.estiloTop},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._t("titulo")],2)]),e._v(" "),t("div",{staticClass:"modal-body"},[e._t("cuerpo")],2),e._v(" "),e.$slots.pie?t("div",{staticClass:"modal-footer"},[e._t("pie")],2):e._e()])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Cerrar"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports},5390:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});const r={props:{id:{type:String,default:"modalVerAlertas"},sonido:{type:Boolean,default:!1}},data:function(){return{cargando:!1,cadenaBusqueda:"",alertas:[],paginacion:{paginaActual:1,totalPaginas:0,totalRegistros:0}}},mounted:function(){var e=this;$("#"+this.id).on("hide.bs.modal",(function(t){t.target.id===e.id&&(e.alertas=[],e.cadenaBusqueda="")})),$("#"+this.id).on("show.bs.modal",(function(t){t.target.id===e.id&&(e.alertas=[],e.cadenaBusqueda="",e.buscarAlertas())})),$("#"+this.id).on("shown.bs.modal",(function(){return $("#cadenaBusqueda").focus()}))},methods:{mostrarError:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.cargando=!0;var t={cadenaBusqueda:this.cadenaBusqueda,page:this.paginacion.paginaActual};axios.get("/api/alertas",{params:t}).then((function(t){var a=t.data;e.paginacion.totalPaginas=a.last_page,e.paginacion.totalRegistros=a.total,e.alertas=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("Error al cargar alertas",a)})).then((function(){return e.cargando=!1}))},buscarAlertas:function(){this.paginacion.paginaActual=1,this.cargarDatos()},borrarFiltros:function(){this.cadenaBusqueda="",this.buscarAlertas()},marcarLeido:function(e){this.buscarAlertas()},marcarTodasComoLeido:function(){this.buscarAlertas()}}};var o=a(1900);const i={components:{VerAlertasModal:(0,o.Z)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:e.id,tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("\n          Alertas\n          "),t("i",{staticClass:"fas fa-1x puntero",class:{"fa-volume-up":e.sonido,"fa-volume-mute":!e.sonido},on:{click:function(t){return e.$emit("sonido-cambio",!e.sonido)}}})])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.cadenaBusqueda,expression:"cadenaBusqueda"}],staticClass:"form-control input-sm",attrs:{id:"cadenaBusqueda",type:"text",placeholder:"Buscar..."},domProps:{value:e.cadenaBusqueda},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.buscarAlertas.apply(null,arguments))},input:function(t){t.target.composing||(e.cadenaBusqueda=t.target.value)}}}),e._v(" "),t("span",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:e.buscarAlertas}},[t("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:e.borrarFiltros}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("br"),e._v(" "),!e.cargando&&e.alertas.length>0?t("div",{staticStyle:{height:"300px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"col-sm-10"},[e._v("Descripción")]),e._v(" "),t("th",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button",title:"Leer todas las alertas"},on:{click:function(t){return e.marcarTodasComoLeido(e.alerta)}}},[t("i",{staticClass:"fas fa-check fa-fw"})])])])]),e._v(" "),t("tbody",[e._l(e.alertas,(function(a){return[t("tr",[t("td",[e._v(e._s(a.descripcion))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"},on:{click:function(t){return e.marcarLeido(a)}}},[t("i",{staticClass:"fas fa-check fa-fw"})])])])]}))],2)])]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.alertas.length,tipo:"alertas"}}),e._v(" "),e.alertas.length>0?t("div",{staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.paginacion.totalRegistros))]),e._v(" "),e.paginacion.totalPaginas>1?t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.paginacion.totalPaginas,"container-class":"pagination","click-handler":e.cargarDatos,prevText:"<i class='fas fa-chevron-left'></i>",nextText:"<i class='fas fa-chevron-right'></i>"},model:{value:e.paginacion.paginaActual,callback:function(t){e.$set(e.paginacion,"paginaActual",t)},expression:"paginacion.paginaActual"}}):e._e()],1):e._e()],1)])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports},props:{id:{type:String,default:"navVue"},esVue:{type:Boolean,default:!0},mostrarConfiguraciones:{type:Boolean,default:!1},mostrarServidorLocal:{type:Boolean,default:!1}},data:function(){return{procesando:{verificarAlertas:!1,cargarSucursales:!1,servidorLocal:!1},mostrar:!0,alertas:0,sucursales:[],intervalo:null,sonido:!0,printServer:{urlApiLocal:"",encendido:!1}}},created:function(){var e=this;this.cargarSonidoDeCookie(),this.cargarUrlServidorLocal(),this.mostrarServidorLocal&&window.setInterval((function(t){return e.verificarServidorLocal()}),2e4)},methods:{abrirAyuda:function(){FreshworksWidget("open")},abrirChat:function(){window.fcWidget.open()},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarSonidoDeCookie:function(){var e=localStorage.getItem("alerta-sonido");null!==e&&(this.sonido="true"===e)},cerrarSesion:function(){var e=this;axios.post("/logout").then((function(){window.location="/"})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cerrar sesión",a)}))},cargarSucursales:function(){var e=this;this.$can("cambiar-sucursal")&&_.isEmpty(this.sucursales)&&(this.procesando.cargarSucursales=!0,axios.get("/api/sucursales").then((function(t){var a=t.data;e.sucursales=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar sucursales",a)})).then((function(){return e.procesando.cargarSucursales=!1})))},verificarAlertas:function(){var e=this;this.procesando.verificarAlertas||(this.procesando.verificarAlertas=!0,axios.get("/api/alertas?verificar=1").then((function(t){var a=t.data;e.alertas=a,e.alertas>0&&e.reproducirSonido()})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al verificar alertas",a)})).then((function(){return e.procesando.verificarAlertas=!1})))},reproducirSonido:function(){this.sonido&&new Audio("/storage/beep.mp3").play()},sonidoCambio:function(e){this.sonido=e,localStorage.setItem("alerta-sonido",this.sonido)},cargarUrlServidorLocal:function(){var e=this;this.mostrarServidorLocal&&(this.procesando.servidorLocal=!0,this.printServer.encendido=!1,axios.get("/api/servidor/local").then((function(t){var a=t.data;e.printServer.urlApiLocal="https://".concat(a.dominioServidorLocal,":").concat(a.puertoServidorLocal),e.verificarServidorLocal()})).catch((function(){e.printServer.encendido=!1})).then((function(){return e.procesando.servidorLocal=!1})))},verificarServidorLocal:function(){var e=this;this.procesando.servidorLocal=!0,this.printServer.encendido=!1,this.printServer.urlApiLocal||console.info("URL Servidor local no definido"),axios.get("".concat(this.printServer.urlApiLocal,"/api/estado")).then((function(){e.printServer.encendido=!0,e.$root.$emit("servidor-local-estado",!0)})).catch((function(t){e.$root.$emit("servidor-local-estado",!1),console.info("Error al conectar con Orión Print Server",t),e.printServer.encendido=!1})).then((function(){return e.procesando.servidorLocal=!1}))}},computed:{inicialesUsuario:function(){var e,t;return(null===(e=this.$usuario.nombres)||void 0===e?void 0:e.substring(0,1))+(null===(t=this.$usuario.apellidos)||void 0===t?void 0:t.substring(0,1))},nombreCompletoUsuario:function(){return"".concat(this.$usuario.nombres," ").concat(this.$usuario.apellidos)},nombreSucursal:function(){return this.$usuario.sucursal?this.$usuario.sucursal.nombre.length>8?this.$usuario.sucursal.nombre.substring(0,7).trim()+"...":this.$usuario.sucursal.nombre:""},etiquetaServidorLocal:function(){return this.procesando.servidorLocal?"Verificando servidor de impresión":this.printServer.encendido?"Servidor de impresión encendido":this.printServer.encendido?"":"Servidor de impresión apagado"}}};var s=a(3379),n=a.n(s),c=a(6590),l={insert:"head",singleton:!1};n()(c.Z,l);c.Z.locals;const d=(0,o.Z)(i,(function(){var e=this,t=e._self._c;return e.mostrar?t("nav",{staticClass:"navbar navbar-fixed-top",class:{"nav-vue":this.esVue}},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"contenedor"},[t("div",[t("div",{staticClass:"navbar-header"},[t("span",{staticClass:"navbar-brand"},[e._t("titulo",(function(){return[e._v("Título")]})),e._v(" "),t("i",{staticClass:"fas fa-chevron-right fa-fw",attrs:{"aria-hidden":"true"}})],2)]),e._v(" "),e._t("opciones")],2),e._v(" "),t("div",{staticClass:"opciones"},[e.mostrarServidorLocal?t("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button",title:e.etiquetaServidorLocal},on:{click:e.verificarServidorLocal}},[t("i",{staticClass:"fas fa-print fa-2x fa-fw"}),e._v(" "),!e.procesando.servidorLocal&&e.printServer.encendido?t("i",{staticClass:"icon-stack-1x fas fa-circle text-success"}):e._e(),e._v(" "),e.procesando.servidorLocal||e.printServer.encendido?e._e():t("i",{staticClass:"icon-stack-1x fas fa-circle text-danger"}),e._v(" "),e.procesando.servidorLocal?t("i",{staticClass:"icon-stack-1x fas fa-spinner fa-spin"}):e._e()]):e._e(),e._v(" "),t("div",{staticClass:"dropdown"},[e.$usuario.id&&e.$canAny(["crear-ordenes","crear-pedidos","crear-cotizaciones","descargar-sistema-externo","agendar-sistema-externo"])?t("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button",title:"Nuevo","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[t("i",{staticClass:"fas fa-plus-square fa-2x fa-fw"}),e._v(" "),t("span",{staticClass:"caret"})]):e._e(),e._v(" "),t("ul",{staticClass:"dropdown-menu dropdown-menu-right menu"},[e.$can("crear-ordenes")?t("li",[t("a",{attrs:{href:"/ordenes/create"}},[e._v("\n              Nueva orden\n            ")])]):e._e(),e._v(" "),e.$can("crear-pedidos")?t("li",[t("a",{attrs:{href:"/pedidos/create"}},[e._v("\n              Nuevo pedido\n            ")])]):e._e(),e._v(" "),e.$can("crear-cotizaciones")?t("li",[t("a",{attrs:{href:"/cotizaciones/create"}},[e._v("\n              Nueva cotización\n            ")])]):e._e(),e._v(" "),e.$canAny(["crear-ordenes","crear-pedidos","crear-cotizaciones"])&&e.$canAny(["agendar-sistema-externo","descargar-sistema-externo"])?t("li",{staticClass:"divider",attrs:{role:"separator"}}):e._e(),e._v(" "),e.$can("descargar-sistema-externo")?t("li",[t("a",{attrs:{href:"/iess/ordenes/create"}},[e._v("\n              Nueva orden IESS AS400\n            ")])]):e._e(),e._v(" "),e.$can("agendar-sistema-externo")?t("li",[t("a",{attrs:{href:"/iess/citas/create"}},[e._v("\n              Nueva cita IESS AS400\n            ")])]):e._e()])]),e._v(" "),e.alertas>0?t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-toggle":"modal","data-backdrop":"static","data-target":"#modalVerAlertas",title:e.alertas+" alertas sin leer"}},[t("i",{staticClass:"fas fa-bell fa-2x fa-fw"}),e._v(" "),t("span",{staticClass:"icon-stack-2x text-gris"},[e._v(e._s(e.alertas)+"\n        ")])]):e._e(),e._v(" "),e._t("configuraciones",(function(){return[e.mostrarConfiguraciones?t("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(t){return e.$emit("click-configuraciones")}}},[t("i",{staticClass:"fas fa-cog fa-2x fa-fw"})]):e._e()]})),e._v(" "),t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",title:e.$usuario.sucursal&&e.$usuario.sucursal.nombre},on:{click:e.cargarSucursales}},[t("i",{staticClass:"fas fa-building fa-2x fa-fw"}),e._v(" "),t("span",[e._v(e._s(e.nombreSucursal))]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.$can("cambiar-sucursal"),expression:"$can('cambiar-sucursal')"}],staticClass:"caret"})]),e._v(" "),e.$can("cambiar-sucursal")?t("ul",{staticClass:"dropdown-menu dropdown-menu-right menu"},[e.procesando.cargarSucursales?t("li",{staticClass:"text-center"},[t("i",{staticClass:"fa fa-spinner fa-spin fa-fw"}),e._v(" Cargando...\n          ")]):e._e(),e._v(" "),e._l(e.sucursales,(function(a){return t("li",{class:{disabled:e.$usuario.sucursalId===a.id}},[t("a",{attrs:{href:"/sucursales/".concat(a.id,"/cambiar")}},[e._v("\n              "+e._s(a.nombre)+"\n              "),e.$usuario.sucursalId===a.id?t("i",{staticClass:"text-success fas fa-check fa-fw"}):e._e()])])}))],2):e._e()]),e._v(" "),t("div",{staticClass:"dropdown"},[e._m(0),e._v(" "),t("ul",{staticClass:"dropdown-menu dropdown-menu-right menu"},[t("li",[t("a",{attrs:{href:"#"},on:{click:e.abrirChat}},[t("i",{staticClass:"far fa-comments fa-fw text-gris"}),e._v("\n              Chat de soporte\n            ")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#"},on:{click:e.abrirAyuda}},[t("i",{staticClass:"fas fa-ticket-alt fa-fw text-gris"}),e._v("\n              Ticket de soporte\n            ")])]),e._v(" "),t("li",[e._t("ayuda")],2),e._v(" "),e._m(1)])]),e._v(" "),e.$usuario.id?t("div",{staticClass:"dropdown"},[t("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",title:e.nombreCompletoUsuario}},[t("i",{attrs:{"data-iniciales":e.inicialesUsuario}}),e._v(" "),t("span",{staticClass:"caret"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu dropdown-menu-right menu"},[t("li",{staticStyle:{padding:"5px 20px 0"}},[t("strong",[e._v(e._s(e.nombreCompletoUsuario))]),e._v(" "),t("div",[t("small",[e._v("\n                "+e._s(e.$usuario.nombreUsuario)+"\n                "),e.$usuario.referenciaAuxiliar?[e._v("\n                  ("+e._s(e.$usuario.referenciaAuxiliar)+")\n                ")]:e._e()],2)]),e._v(" "),t("div",[t("small",[e._v(e._s(e.$usuario.correo))])])]),e._v(" "),t("li",{staticClass:"divider",attrs:{role:"separator"}}),e._v(" "),t("li",[t("a",{staticStyle:{color:"#a94442"},attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.cerrarSesion.apply(null,arguments)}}},[e._v("\n              Cerrar sesión\n            ")])])])]):e._e()],2)]),e._v(" "),t("ver-alertas-modal",{attrs:{sonido:e.sonido},on:{"sonido-cambio":e.sonidoCambio}})],1):e._e()}),[function(){var e=this._self._c;return e("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true",title:"Ayuda"}},[e("i",{staticClass:"fas fa-question-circle fa-2x fa-fw"}),this._v(" "),e("span",{staticClass:"caret"})])},function(){var e=this._self._c;return e("li",[e("a",{attrs:{href:"https://www.youtube.com/playlist?list=PLOwFKKdWz5lhhCqAdmlnjr6mtm4H6P2oo",target:"_blank"}},[e("i",{staticClass:"fab fa-youtube fa-fw text-gris"}),this._v("\n              Videos\n            ")])])}],!1,null,"18c5766e",null).exports},8071:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{estado:{type:String,default:"G"},abreviado:{type:Boolean,default:!1},idOrden:{type:Number,default:null}},methods:{clickModalEstadoOrden:function(){this.$emit("click",this.idOrden)}},computed:{claseEstado:function(){return{"label-default":"G"===this.estado,"label-en-proceso":"P"===this.estado,"label-primary":"R"===this.estado,"label-turquoise":"L"===this.estado,"label-success":"V"===this.estado,"label-danger":"N"===this.estado,"cursor-menu":!this.idOrden,puntero:this.idOrden}}}};const o=(0,a(1900).Z)(r,(function(){var e=this;return(0,e._self._c)("span",{staticClass:"label",class:e.claseEstado,attrs:{rel:"tooltip","data-html":"true",title:e.abreviado?e.$options.filters.estadoOrden(e.estado):""},on:{click:e.clickModalEstadoOrden}},[e.abreviado?[e._v(e._s(e.estado))]:[e._v(e._s(e._f("estadoOrden")(e.estado)))]],2)}),[],!1,null,null,null).exports},7543:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{estado:{type:String,default:"G"}},computed:{claseEstado:function(){return{"label-default":"G"===this.estado,"label-success":"D"===this.estado,"label-danger":"N"===this.estado}}}};const o=(0,a(1900).Z)(r,(function(){var e=this;return(0,e._self._c)("span",{staticClass:"label",class:e.claseEstado,on:{click:function(t){return e.$emit("click")}}},[[e._v(e._s(e._f("estadoPedido")(e.estado)))]],2)}),[],!1,null,null,null).exports},1679:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});const r={props:{existenMasRegistros:{type:Boolean},cantidadRegistros:{type:Number,default:null},cargando:{type:Boolean,required:!0},mostrarCargando:{type:Boolean,default:!0},nombreLista:{type:String,default:"registros"}},mounted:function(){this.inicializarScrollInfinito()},methods:{inicializarScrollInfinito:function(){var e=this,t=document.querySelector("#lista-infinita");t.addEventListener("scroll",(function(){t.scrollTop+t.clientHeight+1>=t.scrollHeight&&e.cargarDatos()}))},cargarDatos:function(){this.existenMasRegistros&&(this.cargando||this.$emit("cargar-datos"))}},computed:{existenRegistros:function(){return this.existenMasRegistros&&this.cantidadRegistros>0&&!this.cargando}}};var o=a(3379),i=a.n(o),s=a(9222),n={insert:"head",singleton:!1};i()(s.Z,n);s.Z.locals;const c=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"lista-infinita"}},[e._t("default",(function(){return[e._v("\n    Listado\n  ")]})),e._v(" "),e.existenRegistros?t("div",{staticClass:"panel-scroll text-center puntero cargar-mas",on:{click:e.cargarDatos}},[e._v("\n    Cargar más\n  ")]):e._e(),e._v(" "),0!==e.cantidadRegistros||e.cargando?e._e():t("div",{staticClass:"panel-scroll"},[e._v("\n    No existen "+e._s(e.nombreLista)+" con los filtros especificados\n  ")]),e._v(" "),e.mostrarCargando&&e.cargando?t("div",{staticClass:"panel-scroll text-center",staticStyle:{"font-size":"18px"}},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Cargando...\n  ")]):e._e()],2)}),[],!1,null,"1e58e5ae",null).exports},8064:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{provincias:{type:Array,default:function(){return[]}},paisId:{type:String|Number,default:""},provinciaId:{type:String|Number,default:""},cantonId:{type:String|Number,default:""},parroquiaId:{type:String|Number,default:""},cookie:{type:String|Boolean,default:!0},value:{required:!0}},data:function(){return{provinciasObtenidas:[],cantones:[],parroquias:[],cargandoProvincias:!1,cargandoCantones:!1,cargandoParroquias:!1,registro:{provinciaId:"",cantonId:"",parroquiaId:""}}},created:function(){this.registro.provinciaId="",this.registro.cantonId="",this.registro.parroquiaId=""},mounted:function(){this.cargarTodo(this.provinciaId)},methods:{guardarCookie:function(e,t){if(this.cookie&&t){var a=this.obtenerClaveCookie(e);localStorage.setItem(a,t),a===this.obtenerClaveCookie("nivel2")&&(a=this.obtenerClaveCookie("nivel3"),localStorage.removeItem(a)),a=this.obtenerClaveCookie("nivel4"),localStorage.removeItem(a)}},obtenerClaveCookie:function(e){return"boolean"==typeof this.cookie?e:"".concat(this.cookie,"-").concat(e)},cambiarProvincia:function(){this.limpiarVariablesProvincia(),this.buscarCantones(this.registro.provinciaId,!0),this.guardarCookie("nivel2",this.registro.provinciaId),this.$emit("input",this.registro.parroquiaId),this.$emit("provincia-id-actualizada",this.registro.provinciaId)},cambiarCanton:function(){this.limpiarVariablesCanton(),this.buscarParroquias(this.registro.cantonId,!0),this.guardarCookie("nivel3",this.registro.cantonId),this.$emit("input",this.registro.parroquiaId),this.$emit("canton-id-actualizado",this.registro.cantonId)},cambiarParroquia:function(){this.$emit("input",this.registro.parroquiaId)},cargarProvincias:function(){_.isEmpty(this.provinciasTodo)&&this.buscarProvincias()},cargarTodo:function(e){var t=this;if(e){_.isEmpty(this.provinciasTodo)?this.buscarProvincias().then((function(){return t.registro.provinciaId=e})):this.registro.provinciaId=e;var a=this.buscarCantones(e);a&&a.then((function(){return t.registro.cantonId=t.cantonId}));var r=this.buscarParroquias(this.cantonId);r&&r.then((function(){return t.registro.parroquiaId=t.parroquiaId}))}},buscarProvincias:function(){var e=this,t={padreCodigo:this.$cliente.pais};return this.cargandoProvincias=!0,axios.get("/api/ubicaciones",{params:t}).then((function(t){var a=t.data.data;e.provinciasObtenidas=a})).catch((function(t){var a=e.procesarErrorResponse(t);console.error("Error al cargar ubicaciones",a)})).then((function(){return e.cargandoProvincias=!1}))},buscarCantones:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var r={padreId:e};return this.cargandoCantones=!0,axios.get("/api/ubicaciones",{params:r}).then((function(e){var r=e.data.data;t.cantones=r,a&&$("#cantonId.vs__search").focus()})).catch((function(e){var a=t.procesarErrorResponse(e);console.error("Error al cargar ubicaciones",a)})).then((function(){return t.cargandoCantones=!1}))}},buscarParroquias:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var r={padreId:e};return this.cargandoParroquias=!0,axios.get("/api/ubicaciones",{params:r}).then((function(e){var r=e.data.data;t.parroquias=r,a&&$("#parroquiaId.vs__search").focus()})).catch((function(e){var a=t.procesarErrorResponse(e);console.error("¡Error al cargar ubicaciones!",a)})).then((function(){return t.cargandoParroquias=!1}))}},limpiarVariablesProvincia:function(){this.cantones=[],this.parroquias=[],this.registro.cantonId="",this.registro.parroquiaId=""},limpiarVariablesCanton:function(){this.parroquias=[],this.registro.parroquiaId=""}},computed:{provinciasTodo:function(){return this.provincias.concat(this.provinciasObtenidas)}},watch:{provinciaId:function(e){this.cargarTodo(e)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"provinciaId"}},[e._v("Provincia")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"provinciaId",placeholder:"Seleccione...",options:e.provinciasTodo,reduce:function(e){return e.id},loading:e.cargandoProvincias,label:"nombre"},on:{input:e.cambiarProvincia,open:e.cargarProvincias},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.registro.provinciaId,callback:function(t){e.$set(e.registro,"provinciaId",t)},expression:"registro.provinciaId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"selectCantonId"}},[e._v("Cantón")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"selectCantonId",inputId:"cantonId",placeholder:"Seleccione...",options:e.cantones,reduce:function(e){return e.id},loading:e.cargandoCantones,label:"nombre"},on:{input:e.cambiarCanton},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.registro.cantonId,callback:function(t){e.$set(e.registro,"cantonId",t)},expression:"registro.cantonId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"selectParroquiaId"}},[e._v("Parroquia")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"selectParroquiaId",inputId:"parroquiaId",placeholder:"Seleccione...",options:e.parroquias,reduce:function(e){return e.id},loading:e.cargandoParroquias,label:"nombre"},on:{input:e.cambiarParroquia},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.registro.parroquiaId,callback:function(t){e.$set(e.registro,"parroquiaId",t)},expression:"registro.parroquiaId"}})],1)])}),[],!1,null,null,null).exports},2387:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={props:{departamentos:{type:Array,default:function(){return[]}},paisId:{type:String|Number,default:""},departamentoId:{type:String|Number,default:""},provinciaId:{type:String|Number,default:""},distritoId:{type:String|Number,default:""},value:{required:!0}},data:function(){return{departamentosObtenidos:[],provincias:[],distritos:[],cargandoDepartamentos:!1,cargandoProvincias:!1,cargandoDistritos:!1,registro:{departamentoId:"",provinciaId:"",distritoId:""}}},created:function(){this.registro.departamentoId="",this.registro.provinciaId="",this.registro.distritoId=""},mounted:function(){this.cargarTodo(this.departamentoId)},methods:{guardarCookie:function(e,t){t&&(localStorage.setItem(e,t),"nivel2"===e&&localStorage.removeItem("nivel3"),localStorage.removeItem("nivel4"))},cambiarDepartamento:function(){this.limpiarVariablesDepartamento(),this.buscarProvincias(this.registro.departamentoId,!0),this.guardarCookie("nivel2",this.registro.departamentoId),this.$emit("input",this.registro.distritoId)},cambiarProvincia:function(){this.limpiarVariablesProvincia(),this.buscarDistritos(this.registro.provinciaId,!0),this.guardarCookie("nivel3",this.registro.provinciaId),this.$emit("input",this.registro.distritoId)},cambiarDistrito:function(){this.$emit("input",this.registro.distritoId)},cargarDepartamentos:function(){_.isEmpty(this.departamentosTodo)&&this.buscarDepartamentos()},cargarTodo:function(e){var t=this;if(e){_.isEmpty(this.departamentosTodo)?this.buscarDepartamentos().then((function(){return t.registro.departamentoId=t.departamentoId})):this.registro.departamentoId=this.departamentoId;var a=this.buscarProvincias(this.departamentoId);a&&a.then((function(){return t.registro.provinciaId=t.provinciaId}));var r=this.buscarDistritos(this.provinciaId);r&&r.then((function(){return t.registro.distritoId=t.distritoId}))}},buscarDepartamentos:function(){var e=this,t={padreCodigo:this.$cliente.pais};return this.cargandoDepartamentos=!0,axios.get("/api/ubicaciones",{params:t}).then((function(t){var a=t.data.data;e.departamentosObtenidos=a})).catch((function(t){var a=e.procesarErrorResponse(t);console.error("¡Error al cargar ubicaciones!",a)})).then((function(){return e.cargandoDepartamentos=!1}))},buscarProvincias:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var r={padreId:e};return this.cargandoProvincias=!0,axios.get("/api/ubicaciones",{params:r}).then((function(e){var r=e.data.data;t.provincias=r,a&&$("#provinciaId.vs__search").focus()})).catch((function(e){var a=t.procesarErrorResponse(e);console.error("¡Error al cargar ubicaciones!",a)})).then((function(){return t.cargandoProvincias=!1}))}},buscarDistritos:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var r={padreId:e};return this.cargandoDistritos=!0,axios.get("/api/ubicaciones",{params:r}).then((function(e){var r=e.data.data;t.distritos=r,a&&$("#distritoId.vs__search").focus()})).catch((function(e){var a=t.procesarErrorResponse(e);console.error("¡Error al cargar ubicaciones!",a)})).then((function(){return t.cargandoDistritos=!1}))}},limpiarVariablesDepartamento:function(){this.provincias=[],this.distritos=[],this.registro.provinciaId="",this.registro.distritoId=""},limpiarVariablesProvincia:function(){this.distritos=[],this.registro.distritoId=""}},computed:{departamentosTodo:function(){return this.departamentos.concat(this.departamentosObtenidos)}},watch:{departamentoId:function(e){this.cargarTodo(e)}}};const o=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"departamentoId"}},[e._v("Departamento")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"departamentoId",placeholder:"Seleccione...",options:e.departamentosTodo,reduce:function(e){return e.id},loading:e.cargandoDepartamentos,label:"nombre"},on:{input:e.cambiarDepartamento,open:e.cargarDepartamentos},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.registro.departamentoId,callback:function(t){e.$set(e.registro,"departamentoId",t)},expression:"registro.departamentoId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"selectProvinciaId"}},[e._v("Provincia")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"selectProvinciaId",inputId:"provinciaId",placeholder:"Seleccione...",options:e.provincias,reduce:function(e){return e.id},loading:e.cargandoProvincias,label:"nombre"},on:{input:e.cambiarProvincia},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.registro.provinciaId,callback:function(t){e.$set(e.registro,"provinciaId",t)},expression:"registro.provinciaId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-4 form-group"},[t("label",{staticClass:"control-label",attrs:{for:"selectDistritoId"}},[e._v("Distrito")]),e._v(" "),t("v-select",{staticClass:"form-control input-sm",attrs:{id:"selectDistritoId",inputId:"distritoId",placeholder:"Seleccione...",options:e.distritos,reduce:function(e){return e.id},loading:e.cargandoDistritos,label:"nombre"},on:{input:e.cambiarDistrito},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0},{key:"spinner",fn:function(e){var a=e.loading;return[t("div",{directives:[{name:"show",rawName:"v-show",value:a,expression:"loading"}]},[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"})])]}}]),model:{value:e.registro.distritoId,callback:function(t){e.$set(e.registro,"distritoId",t)},expression:"registro.distritoId"}})],1)])}),[],!1,null,null,null).exports},9326:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const s={components:{DatosOrden:a(6570).Z},props:{portal:{type:String,default:null,validator:function(e){return-1!==["empresas","medicos","pacientes"].indexOf(e)}}},data:function(){return{forma:null,orden:null,entregas:[],detallesEntregas:[],cargando:!1}},mounted:function(){var e=this;$("#modalVerEntregas").on("show.bs.modal",(function(t){e.forma=$(t.relatedTarget).data("forma"),e.orden=$(t.relatedTarget).data("orden"),e.cargarDatos()}))},methods:{mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarDatos:function(){var e=this;this.cargando=!0;var t={ordenId:this.orden.id,formaEntrega:this.forma,portal:this.portal};axios.get("/api/entregas",{params:t}).then((function(t){var a=t.data.data;a.forEach((function(t){t.envio_notificacion&&(t.envio_notificacion.fecha_entrega=e.fechaALocal(t.envio_notificacion.fecha_entrega),t.envio_notificacion.fecha_apertura=e.fechaALocal(t.envio_notificacion.fecha_apertura),t.envio_notificacion.fecha_error=e.fechaALocal(t.envio_notificacion.fecha_error))})),e.entregas=a})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar entregas",a)})).then((function(){return e.cargando=!1}))},verExamenesEntregados:function(e){this.detallesEntregas=e.detalles_entregas,$("#verDetallesEntregas").modal("show")},cerrar:function(){this.orden=null,this.entregas=[],$("#modalVerEntregas").modal("hide")},procesarMotivo:function(e){var t=Object.entries(r.CW).find((function(t){var a=o(t,2),r=a[0];a[1];return e&&e.toLowerCase().includes(r)}));return t&&t.length>1?t[1]:"No se pudo enviar"},tooltipUsuarioEntrega:function(e){return e.es_empresa?"Portal Clientes":e.es_medico?"Portal Médicos":e.es_paciente?"Portal Pacientes":e.es_usuario?"Orión interno":void 0},claseUsuarioEntrega:function(e){return{"fas fa-building text-gris":e.es_empresa,"fas fa-user-md text-gris":e.es_medico,"fas fa-user-injured text-gris":e.es_paciente,"fas fa-user text-gris":e.es_usuario}},claseEnvio:function(e){return{"fas fa-exchange-alt text-gris":"REINTENTO"===e.estado,"fa fa-check text-gris":"ENTREGADO"===e.estado&&!e.fecha_apertura,"fa fa-check-double text-gris":"ENTREGADO"===e.estado&&e.fecha_apertura,"far fa-times-circle text-danger":"ERROR"===e.estado}},tooltipEstadoEnvio:function(e){if(!e)return"";if(e&&"ERROR"===e.estado){var t=this.procesarMotivo(e.motivo),a="<strong>Fecha error:</strong> ".concat(e.fecha_error);return a+="<br><strong>Motivo:</strong> ".concat(t),e.intentos&&(a+="<br><strong>Intentos:</strong> ".concat(e.intentos)),"master"===this.$usuario.nombreUsuario&&e.ip_envia&&(a+="<br><strong>IP:</strong> ".concat(e.ip_envia)),a}if(e&&"GENERADO"===e.estado)return"En proceso de envío";if(e&&"REINTENTO"===e.estado){var r=this.procesarMotivo(e.motivo),o="<strong>Reintentando enviar</strong>";return o+="<br><strong>Intentos:</strong> ".concat(e.intentos),o+="<br><strong>Fecha intento:</strong> ".concat(e.fecha_error),o+="<br><strong>Motivo:</strong> ".concat(r),"master"===this.$usuario.nombreUsuario&&e.ip_envia&&(o+="<br><strong>IP:</strong> ".concat(e.ip_envia)),o}if(e&&"ENTREGADO"===e.estado&&!e.fecha_apertura){var i="<strong>Fecha entrega:</strong> ".concat(e.fecha_entrega);return e.intentos&&(i+="<br><strong>Intentos:</strong> ".concat(e.intentos)),i}if(e&&"ENTREGADO"===e.estado&&e.fecha_apertura){var s="<strong>Fecha entrega:</strong> ".concat(e.fecha_entrega);return s+="<br><strong>Fecha apertura:</strong> ".concat(e.fecha_apertura),e.intentos&&(s+="<br><strong>Intentos:</strong> ".concat(e.intentos)),s}return""}},computed:{esCorreo:function(){return"CORREO"===this.forma},esWhatsApp:function(){return"WHATSAPP"===this.forma},titulo:function(){var e="Entregas";return this.esCorreo&&(e="Entregas por correo electrónico"),this.esWhatsApp&&(e="Entregas por WhatsApp"),e}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{id:"modalVerEntregas",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.cerrar}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title",staticStyle:{"margin-bottom":"4px"}},[t("i",{staticClass:"fa-lg",class:{"fab fa-whatsapp":e.esWhatsApp,"fas fa-envelope":e.esCorreo}}),e._v("\n            "+e._s(e.titulo)+"\n            "),t("span",{staticClass:"label label-danger"},[e._v("Pro")])]),e._v(" "),t("datos-orden",{attrs:{"mostrar-numero-orden":!0,"mostrar-identificacion":!1,"mostrar-fecha-nacimiento":!1,"mostrar-sexo":!1,"mostrar-poliza":!1,"mostrar-telefono":!1,"mostrar-correo":!0,"mostrar-direccion":!1,orden:e.orden}})],1),e._v(" "),t("div",{staticClass:"modal-body"},[t("alerta",{ref:"alerta"}),e._v(" "),e.cargando?e._e():t("div",{staticStyle:{height:"270px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[0===e.entregas.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"7"}},[e._v("\n                  No existen envíos registrados\n                ")])]):e._e(),e._v(" "),e._l(e.entregas,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(e._f("tipoEntregaCorreo")(a.tipo)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("fecha")(a.created_at)))]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n                    "+e._s(a.entregado_a)+"\n                    "),a.envio_notificacion?t("i",{class:e.claseEnvio(a.envio_notificacion),attrs:{rel:"tooltip","data-html":"true",title:e.tooltipEstadoEnvio(a.envio_notificacion)}}):e._e()]),e._v(" "),t("td",{staticClass:"text-left"},[a.es_paciente?[e._v("\n                      "+e._s(a.usuario_entrega.nombre_responsable)+"\n                    ")]:a.es_usuario?[e._v("\n                      "+e._s(a.usuario_entrega.nombre_usuario)+"\n                    ")]:[e._v("\n                      "+e._s(a.usuario_entrega.nombre_completo)+"\n                    ")],e._v(" "),t("i",{class:e.claseUsuarioEntrega(a),attrs:{rel:"tooltip","data-html":"true",title:e.tooltipUsuarioEntrega(a)}})],2),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(e._f("estadoEntrega")(a.estado)))]),e._v(" "),t("td",{staticClass:"text-center"},[e._v(e._s(a.cantidad))]),e._v(" "),t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-default btn-xs",attrs:{type:"button",title:"Ver"},on:{click:function(t){return e.verExamenesEntregados(a)}}},[t("i",{staticClass:"fas fa-eye fa-fw"})])])])]}))],2)])]),e._v(" "),e.cargando?t("div",{staticClass:"panel-body text-center"},[e._m(1)]):e._e()],1),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-sm btn-default",attrs:{title:"Actualizar",disabled:e.cargando},on:{click:e.cargarDatos}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.cargando,expression:"!cargando"}],staticClass:"fas fa-sync"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.cargando,expression:"cargando"}],staticClass:"fas fa-spinner fa-spin"})]),e._v(" "),t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:e.cerrar}},[e._v("Cerrar")])])])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"verDetallesEntregas",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content top-11"},[e._m(2),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticStyle:{height:"270px",overflow:"auto"}},[t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(3),e._v(" "),t("tbody",[0===e.entregas.length?t("tr",[t("td",{staticClass:"text-center",attrs:{colspan:"2"}},[e._v("\n                  No existen exámenes\n                ")])]):e._e(),e._v(" "),e._l(e.detallesEntregas,(function(a){return[t("tr",[t("td",{staticClass:"text-left centrado-vertical"},[e._v(e._s(a.codigo_examen))]),e._v(" "),t("td",{staticClass:"text-left centrado-vertical"},[e._v("\n                    "+e._s(a.nombre_examen)+"\n                    "),t("i",{directives:[{name:"show",rawName:"v-show",value:a.excluido,expression:"detalleEntrega.excluido"}],staticClass:"far fa-times-circle text-danger",attrs:{"aria-hidden":"true",rel:"tooltip",title:"Este exámen ya no existe en la órden"}})])])]}))],2)])])]),e._v(" "),e._m(4)])])])])}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-1 text-center"},[e._v("Tipo")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Fecha envío")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Enviado a")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Enviado por")]),e._v(" "),t("th",{staticClass:"col-sm-2 text-center"},[e._v("Resultados")]),e._v(" "),t("th",{staticClass:"col-sm-1 text-center centrado-vertical"},[e._v("Exámenes enviados\n                ")]),t("th",{staticClass:"text-center"})])])},function(){var e=this._self._c;return e("h4",[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n            ")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal-header"},[t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("\n            Exámenes enviados\n          ")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-left centrado-vertical"},[e._v("Código")]),e._v(" "),t("th",{staticClass:"text-left centrado-vertical"},[e._v("Examen")])])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n            Cerrar\n          ")])])}],!1,null,null,null).exports},4159:(e,t,a)=>{"use strict";a.d(t,{Z:()=>w});var r=a(5125),o=a(1010),i=a(5889),s=a(7902),n=a(7974),c=a(8177);const l={props:["paciente","token"],components:{EnviarCorreoResultados:s.Z,ImprimirResultadosModal:c.Z},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cantidadDetallesOrdenesValidadas:function(e){return e.detalles_ordenes.filter((function(e){return["X","L","V"].includes(e.estado)})).length},esOrdenValidada:function(e){var t=!0;return e.subempresa.empresa.descargar_resultados_con_validacion_completa&&(t=e.detalles_ordenes.length===this.cantidadDetallesOrdenesValidadas(e)),t},ordenPagada:function(e){var t=e.abonos.reduce((function(e,t){return 1*e+1*t.valor}),0);return t=Math.round(100*(t+Number.EPSILON))/100,e.subempresa.empresa.portal_mostrar_ordenes_impagas?e.subempresa.empresa.portal_mostrar_ordenes_impagas:t>=1*e.valor_total},verAdjuntos:function(e){this.$emit("ver-adjuntos",e)},tooltipCorreo:function(e){var t="Enviar por correo electrónico";return this.paciente.correo||(t="El paciente no tiene correo electrónico definido"),0===this.cantidadDetallesOrdenesValidadas(e)&&(t="No existen exámenes validados"),t},tooltipAdjuntos:function(e){var t="Ver adjuntos";return 0===this.cantidadDetallesOrdenesValidadas(e)&&(t="No existen exámenes validados"),e.tiene_adjuntos||(t="No tiene adjuntos"),t},correoElectronicoEnviado:function(){this.mostrarExito("Correo electrónico enviado")},abrirModalImprimirResultados:function(e){var t=(0,n.MD)({orden:e});$("#modalImprimirResultados").modal({backdrop:"static"},t)}}};var d=a(3379),u=a.n(d),m=a(2517),p={insert:"head",singleton:!1};u()(m.Z,p);m.Z.locals;var f=a(1900);const v=(0,f.Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel panel-gris"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"panel-heading"},[t("div",[t("strong",[e._v("\n        "+e._s("App\\Models\\SujetoObjeto"===e.paciente.tipo_paciente?e.paciente.descripcion:e.paciente.nombre)+"\n        ("+e._s(e.paciente.numero_identificacion)+")\n        "),e.paciente.numero_historia_clinica?[e._v("\n          HC: "+e._s(e.paciente.numero_historia_clinica)+"\n        ")]:e._e()],2)]),e._v(" "),t("div",[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Ver comparativo de resultados"},on:{click:function(t){return e.$emit("ver-comparativo-resultados",e.paciente)}}},[t("i",{staticClass:"fas fa-chart-line"})])])]),e._v(" "),t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered table-hover"},[e._m(0),e._v(" "),t("tbody",e._l(e.paciente.ordenes,(function(a){return t("tr",[t("td",{staticClass:"text-center"},[a.numero_orden_externa?t("small",[e._v(e._s(a.numero_orden_externa))]):e._e(),e._v("\n          "+e._s(a.numero_orden)+"\n        ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea",attrs:{title:e.$usuario.zonaHoraria},domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_orden,"YYYY-MM-DD </br> HH:mm"))}})]),e._v(" "),t("td",[e._v(e._s(a.medico?a.medico.nombre_completo:"-"))]),e._v(" "),t("td",[e._v(e._s(a.subempresa.nombre))]),e._v(" "),t("td",{staticClass:"text-center"},[t("orden-estado",{attrs:{estado:a.estado}}),e._v(" "),t("div",[t("small",[e._v("\n              "+e._s(e.cantidadDetallesOrdenesValidadas(a))+"/"+e._s(a.detalles_ordenes.length)+"\n            ")])])],1),e._v(" "),t("td",{staticClass:"text-center"},[e.ordenPagada(a)&&e.esOrdenValidada(a)?[t("a",{class:"btn btn-sm btn-default"+(0===e.cantidadDetallesOrdenesValidadas(a)?" disabled":""),attrs:{title:"Imprimir resultados"},on:{click:function(t){return e.abrirModalImprimirResultados(a)}}},[t("i",{staticClass:"fas fa-print"})]),e._v(" "),t("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.tooltipCorreo(a)}},[t("a",{staticClass:"btn btn-sm btn-default",class:{disabled:0===e.cantidadDetallesOrdenesValidadas(a)||!e.paciente.correo},attrs:{"data-toggle":"modal","data-target":"#envioCorreo","data-orden-id":a.id,"data-orden-numero":a.numero_orden,"data-correo":e.paciente.correo}},[t("i",{staticClass:"fas fa-envelope"})])]),e._v(" "),t("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.tooltipAdjuntos(a)}},[t("a",{staticClass:"btn btn-sm btn-default",class:{disabled:0===e.cantidadDetallesOrdenesValidadas(a)||!a.tiene_adjuntos},on:{click:function(t){return e.verAdjuntos(a)}}},[t("i",{staticClass:"fas fa-paperclip"})])])]:[e.ordenPagada(a)?e._e():t("div",[t("i",{staticClass:"fas fa-exclamation-triangle fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Pago incompleto\n            ")]),e._v(" "),e.esOrdenValidada(a)?e._e():t("div",[t("i",{staticClass:"fas fa-exclamation-triangle fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n              Resultado(s) incompleto(s)\n            ")])]],2)])})),0)])]),e._v(" "),t("enviar-correo-resultados",{on:{"correo-electronico-enviado":e.correoElectronicoEnviado}}),e._v(" "),t("imprimir-resultados-modal",{attrs:{portal:"empresas",token:e.token}})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-md-1 text-center"},[e._v("Orden No.")]),e._v(" "),t("th",{staticClass:"col-md-1 text-center"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-md-3"},[e._v("Médico")]),e._v(" "),t("th",{staticClass:"col-md-3"},[e._v("Categoría")]),e._v(" "),t("th",{staticClass:"col-md-1 text-center"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-md-2"})])])}],!1,null,"329943f6",null).exports,h={components:{AdjuntosModal:i.Z,Paciente:v,ComparativoResultados:o.Z},props:["empresa","token","filtros"],data:function(){return{cargando:!1,comparativoResultadosVisible:!1,ordenSeleccionada:{},pacientes:[],pacienteSeleccionado:{},paginaActual:1,totalPaginas:0}},mounted:function(){$("body").tooltip({selector:'[data-toggle="tooltip"]',container:"body"})},activated:function(){this.cargarPacientes()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cambiarPagina:function(e){this.paginaActual=e,this.cargarPacientes()},cambioFiltro:_.debounce((function(){this.paginaActual=1,this.cargarPacientes()}),800),cambiarTipoPaciente:function(){this.paginaActual=1,this.cargarPacientes()},cargarPacientes:function(){var e=this;if(this.filtros.cadenaBusqueda=this.filtros.cadenaBusqueda.trim(),this.filtros.cadenaBusqueda&&this.filtros.cadenaBusqueda.length<3)return $("#busqueda").popover("show"),void setTimeout((function(){return $("#busqueda").popover("hide")}),1e4);this.filtros.cadenaBusqueda.length>=3&&$("#busqueda").popover("hide"),this.cargando=!0;var t={busqueda:this.filtros.cadenaBusqueda?this.filtros.cadenaBusqueda:null,subempresaId:this.filtros.subempresaId?this.filtros.subempresaId:null,fechaOrden:this.filtros.fechaOrden?this.filtros.fechaOrden:null,estado:this.filtros.estado?this.filtros.estado:null,tipoPaciente:this.filtros.tipoPaciente,page:this.paginaActual};axios.get("/api/ordenes/pacientes",{params:t}).then((function(t){var a=t.data;e.totalPaginas=a.last_page,e.pacientes=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar pacientes",a)})).then((function(){return e.cargando=!1}))},limpiarDatos:function(){this.pacientes=[],this.paginaActual=1,this.totalPaginas=0},verAdjuntos:function(e){this.ordenSeleccionada=e,$("#modalAdjuntos").modal("show")},verComparativoResultados:function(e){this.pacienteSeleccionado=e,this.comparativoResultadosVisible=!0}}};const g=(0,f.Z)(h,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),e._l(e.pacientes,(function(a){return!e.cargando&&e.pacientes.length>0?[t("paciente",{attrs:{paciente:a,token:e.token},on:{"ver-adjuntos":e.verAdjuntos,"ver-comparativo-resultados":e.verComparativoResultados}})]:e._e()})),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.pacientes.length},scopedSlots:e._u([{key:"no-resultado",fn:function(){return["o"===e.filtros.tipoPaciente?[e._v("\n        No se han encontrado objetos\n      ")]:[e._v("\n        No se han encontrado pacientes\n      ")]]},proxy:!0}])}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.cargando&&e.pacientes.length>0,expression:"!cargando && pacientes.length > 0"}],staticClass:"text-center"},[t("paginate",{attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarPacientes,prevText:"Anterior",nextText:"Siguiente"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}})],1),e._v(" "),t("adjuntos-modal",{attrs:{orden:e.ordenSeleccionada,token:e.token,"tipo-consulta":"consulta-resultados-empresas"}}),e._v(" "),t("comparativo-resultados",{attrs:{paciente:e.pacienteSeleccionado,"tipo-paciente":e.pacienteSeleccionado.tipo_paciente,visible:e.comparativoResultadosVisible},on:{cerrado:function(t){e.comparativoResultadosVisible=!1},error:e.mostrarErrores}})],2)}),[],!1,null,null,null).exports;function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){C(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const y={components:{ResultadosPorOrden:r.Z,ResultadosPorPaciente:g},props:["empresa","token"],data:function(){return{filtros:{cadenaBusqueda:"",fechaOrden:"",subempresaId:"",tipoPaciente:"h",estado:""},componente:"ResultadosPorOrden"}},created:function(){1===this.empresa.subempresas.length&&(this.filtros.subempresaId=this.empresa.subempresas[0].id)},methods:{cambioFiltro:function(){var e,t;this.porOrden&&(null===(e=this.$refs.resultadosPorOrden)||void 0===e||e.cambioFiltro());this.porPaciente&&(null===(t=this.$refs.resultadosPorPaciente)||void 0===t||t.cambioFiltro())},cambiarComponente:function(e){this.componente=e},cambiarTipoPaciente:function(e){var t,a;(this.filtros.tipoPaciente=e,this.porOrden)&&(null===(t=this.$refs.resultadosPorOrden)||void 0===t||t.cambiarTipoPaciente());this.porPaciente&&(null===(a=this.$refs.resultadosPorPaciente)||void 0===a||a.cambiarTipoPaciente())}},computed:{porOrden:function(){return"ResultadosPorOrden"===this.componente},porPaciente:function(){return"ResultadosPorPaciente"===this.componente},nombreFiltroCategoria:function(){var e=this,t=this.empresa.subempresas.find((function(t){return t.id===e.filtros.subempresaId}));return t?t.nombre:""},propsComponente:function(){var e={token:this.token,empresa:this.empresa,filtros:this.filtros};return this.porOrden?x(x({},e),{},{ref:"resultadosPorOrden",portal:"empresas"}):this.porPaciente?x(x({},e),{},{ref:"resultadosPorPaciente"}):void 0}},watch:{"filtros.fechaOrden":function(e,t){e!==t&&this.cambioFiltro()}}};var E=a(5891),A={insert:"head",singleton:!1};u()(E.Z,A);E.Z.locals;const w=(0,f.Z)(y,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-2"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"btn-group btn-group-justified",attrs:{role:"group"}},[t("a",{staticClass:"btn btn-default",class:{"btn-primary":e.porOrden},on:{click:function(t){return e.cambiarComponente("ResultadosPorOrden")}}},[e._v("\n            Orden\n          ")]),e._v(" "),t("a",{staticClass:"btn btn-default",class:{"btn-primary":e.porPaciente},on:{click:function(t){return e.cambiarComponente("ResultadosPorPaciente")}}},[e._v("\n            Paciente\n          ")])])])]),e._v(" "),t("div",{staticClass:"col-sm-12 col-md-2"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"btn-group btn-group-justified",attrs:{role:"group"}},[t("a",{staticClass:"btn btn-default",class:{"btn-primary":"h"===e.filtros.tipoPaciente},attrs:{type:"button",title:"Humanos"},on:{click:function(t){return e.cambiarTipoPaciente("h")}}},[t("i",{staticClass:"fas fa-user"})]),e._v(" "),t("a",{staticClass:"btn btn-default",class:{"btn-primary":"a"===e.filtros.tipoPaciente},attrs:{type:"button",title:"Animales"},on:{click:function(t){return e.cambiarTipoPaciente("a")}}},[t("i",{staticClass:"fas fa-paw"})]),e._v(" "),t("a",{staticClass:"btn btn-default",class:{"btn-primary":"o"===e.filtros.tipoPaciente},attrs:{type:"button",title:"Objetos"},on:{click:function(t){return e.cambiarTipoPaciente("o")}}},[t("i",{staticClass:"fas fa-flask"})])])])]),e._v(" "),t("div",{staticClass:"col-sm-12 col-md-2 form-group"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaOrden,expression:"filtros.fechaOrden"}],staticClass:"form-control cursor-menu",attrs:{id:"fechaOrden","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es",placeholder:"aaaa-mm-dd",autocomplete:"off",readonly:""}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Borrar"},on:{click:function(t){e.filtros.fechaOrden=""}}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control",attrs:{id:"estado",name:"estado"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])},e.cambioFiltro]}},[t("option",{attrs:{value:""}},[e._v("Estado")]),e._v(" "),t("option",{attrs:{value:"G"}},[e._v("Generado")]),e._v(" "),t("option",{attrs:{value:"P"}},[e._v("En Proceso")]),e._v(" "),t("option",{attrs:{value:"R"}},[e._v("Reportado")]),e._v(" "),t("option",{attrs:{value:"L"}},[e._v("Preliminar")]),e._v(" "),t("option",{attrs:{value:"V"}},[e._v("Validado")])])]),e._v(" "),t("div",{staticClass:"col-sm-12 col-md-2 form-group"},[t("v-select",{staticClass:"form-control",attrs:{id:"subempresas",placeholder:"Categoría...",options:e.empresa.subempresas,label:"nombre",reduce:function(e){return e.id}},on:{input:e.cambioFiltro},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}]),model:{value:e.filtros.subempresaId,callback:function(t){e.$set(e.filtros,"subempresaId",t)},expression:"filtros.subempresaId"}})],1),e._v(" "),t("div",{staticClass:"col-sm-12 col-md-2 form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"busqueda",placeholder:"Nombre o Identificación","data-toggle":"popover","data-trigger":"manual","data-placement":"bottom",title:"Advertencia","data-content":"Debe ingresar al menos 3 caracteres"},domProps:{value:e.filtros.cadenaBusqueda},on:{input:[function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)},e.cambioFiltro]}})])]),e._v(" "),t("br"),e._v(" "),t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("keep-alive",[t(e.componente,e._b({tag:"component"},"component",e.propsComponente,!1))],1)],1)],1)}),[],!1,null,"1e8be5b1",null).exports},1088:(e,t,a)=>{"use strict";a.d(t,{Z:()=>C});var r=a(6486),o=a.n(r),i=a(1953),s=a(9470),n=a(4590);const c={props:{estado:{type:String,default:"PENDIENTE"}},computed:{clase:function(){return{"label-default":"PENDIENTE"===this.estado,"label-success":"PLANIFICADA"===this.estado}}}};var l=a(1900);const d=(0,l.Z)(c,(function(){var e=this;return(0,e._self._c)("span",{staticClass:"label",class:e.clase,attrs:{rel:"tooltip","data-html":"true",title:e.$options.filters.estadoSolicitudVisita(e.estado)}},[e._v("\n  "+e._s(e._f("estadoSolicitudVisita")(e.estado))+"\n")])}),[],!1,null,null,null).exports;var u=a(1430),m=a(582),p=a.n(m);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const _={components:{Alerta:i.Z,Cargando:s.Z,EstadoSolicitudVisita:d,Modal:u.Z,Paginate:p()},props:["empresa","datos","token"],data:function(){return{cargando:!1,destinos:[],edicion:!1,guardando:!1,mostrarModalSolicitudVisita:!1,paginaActual:1,solicitudesVisitas:[],solicitudVisitaSeleccionada:{destino:{},detalles:[]},tareas:[],totalPaginas:0,totalRegistros:0}},mounted:function(){this.cargarCatalogos(),this.cargarSolicitudesVisitas()},methods:{abrirModalEditarSolicitudVisita:function(e){this.edicion=!0,this.abrirModalSolicitudVisita(e)},abrirModalNuevaSolicitudVisita:function(){this.edicion=!0,this.abrirModalSolicitudVisita({id:null,destino_tarea_id:null,detalles:[]})},abrirModalVerSolicitudVisita:function(e){this.edicion=!1,this.abrirModalSolicitudVisita(e)},abrirModalSolicitudVisita:function(e){this.seleccionarSolicitudVisita(e),this.mostrarModalSolicitudVisita=!0},agregarTarea:function(e){e.detalles.push({id:null,destino_tarea_id:null,observacion:""})},cargarCatalogos:function(){var e=this;axios.all([axios.get("api/catalogos",{params:{token:this.token,catalogo:n.oH.TAREAS}}),axios.get("api/catalogos",{params:{token:this.token,catalogo:n.oH.DESTINOS}})]).then((function(t){var a=f(t,2),r=a[0],o=a[1];e.tareas=r.data.data,e.destinos=o.data.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarError("¡Error al cargar catálogos!",a)}))},cargarSolicitudesVisitas:function(){var e=this;this.cargando=!0;var t={page:this.paginaActual,token:this.token};axios.get("api/solicitudes-visitas",{params:t}).then((function(t){var a=t.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,e.solicitudesVisitas=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar solicitudes de visitas",a)})).finally((function(){return e.cargando=!1}))},eliminarDetalle:function(e){if(confirm("¿Está seguro que desea eliminar?")){var t=this.solicitudVisitaSeleccionada.detalles.indexOf(e);this.solicitudVisitaSeleccionada.detalles.splice(t,1)}},eliminarSolicitudVisita:function(e){var t=this;confirm("¿Está seguro que desea eliminar?")&&(this.guardando=!0,axios.delete("api/solicitudes-visitas/".concat(e.id),{params:{token:this.token}}).then((function(){t.cargarSolicitudesVisitas(),t.mostrarExito("¡Solicitud de visita eliminada exitosamente!")})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar solicitud de visita!",a)})).finally((function(){return t.guardando=!1})))},esPlanificada:function(e){return e.estado===n.k4.PLANIFICADA},guardarSolicitudVisita:function(e){var t=this,a="api/solicitudes-visitas",r="post",o="creada";e.id&&(a="api/solicitudes-visitas/".concat(e.id),r="patch",o="actualizada");var i={destino_id:e.destino_id,detalles:e.detalles.map((function(e){return{id:e.id,destino_tarea_id:e.destino_tarea_id,observacion:e.observacion}}))};this.guardando=!0,axios[r](a,i,{params:{token:this.token}}).then((function(){t.mostrarModalSolicitudVisita=!1,t.cargarSolicitudesVisitas(),t.mostrarExito("¡Solicitud de visita ".concat(o," exitosamente!"))})).catch((function(e){var a=t.procesarErrorResponse(e);t.mostrarErrores("¡Error al eliminar solicitud de visita!",a)})).finally((function(){return t.guardando=!1}))},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},obtenerNombresTareas:function(e){return e.map((function(e){return e.tarea.nombre})).join(", ")},seleccionarSolicitudVisita:function(e){this.solicitudVisitaSeleccionada=o().cloneDeep(e)}},computed:{tareasFiltradas:function(){var e=this;return function(t){var a=o().map(e.solicitudVisitaSeleccionada.detalles,"destino_tarea_id").filter((function(e){return e!==t}));return e.tareas.filter((function(e){return!a.includes(e.id)}))}}}};var h=a(3379),g=a.n(h),b=a(9442),x={insert:"head",singleton:!1};g()(b.Z,x);b.Z.locals;const C=(0,l.Z)(_,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"barra row"},[t("div",{staticClass:"col-md-12"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"button",title:"Nueva solicitud",disabled:e.guardando},on:{click:function(t){return e.abrirModalNuevaSolicitudVisita()}}},[t("i",{staticClass:"fas fa-file fa-fw"}),e._v("\n        Nueva\n      ")])])]),e._v(" "),!e.cargando&&e.solicitudesVisitas.length>0?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[e._m(0),e._v(" "),t("tbody",[e._l(e.solicitudesVisitas,(function(a){return[t("tr",[t("td",{staticClass:"text-center"},[e._v("\n          "+e._s(a.id)+"\n        ")]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n          "+e._s(a.destino.nombre)+"\n        ")]),e._v(" "),t("td",{staticClass:"text-left"},[e._v("\n          "+e._s(e.obtenerNombresTareas(a.detalles))+"\n        ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("estado-solicitud-visita",{attrs:{estado:a.estado}})],1),e._v(" "),t("td",{staticClass:"text-center"},[e.esPlanificada(a)?t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Ver solicitud",disabled:e.guardando},on:{click:function(t){return e.abrirModalVerSolicitudVisita(a)}}},[t("i",{staticClass:"fas fa-eye fa-fw"})]):e._e(),e._v(" "),e.esPlanificada(a)?e._e():t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Editar solicitud",disabled:e.esPlanificada(a)||e.guardando},on:{click:function(t){return e.abrirModalEditarSolicitudVisita(a)}}},[t("i",{staticClass:"fas fa-edit fa-fw"})]),e._v(" "),t("button",{staticClass:"btn btn-xs btn-danger",attrs:{type:"button",title:"Eliminar solicitud",disabled:e.esPlanificada(a)||e.guardando},on:{click:function(t){return e.eliminarSolicitudVisita(a)}}},[t("i",{staticClass:"fas fa-trash-alt fa-fw"})])])])]}))],2)]):e._e(),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.solicitudesVisitas.length},scopedSlots:e._u([{key:"no-resultado",fn:function(){return[e._v("No se han encontrado solicitudes de visitas")]},proxy:!0}])}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.cargando&&e.solicitudesVisitas.length>0,expression:"cargando && solicitudesVisitas.length > 0"}],staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarSolicitudesVisitas,prevText:"Anterior",nextText:"Siguiente"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}})],1),e._v(" "),t("modal",{attrs:{id:"modalSolicitudeVisita",tamano:"lg"},scopedSlots:e._u([{key:"titulo",fn:function(){return[e._v("\n      Solicitud\n    ")]},proxy:!0},{key:"cuerpo",fn:function(){return[t("div",{staticClass:"row"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-md-7"},[t("label",{staticClass:"obligatorio"},[e._v("Destino")]),e._v(" "),t("div",[e.edicion?[t("v-select",{staticClass:"form-control input-sm",attrs:{id:"destino_id",placeholder:"Seleccione...",label:"nombre",options:e.destinos,reduce:function(e){return e.id},required:""},scopedSlots:e._u([{key:"no-options",fn:function(){return[e._v("No existen coincidencias")]},proxy:!0}],null,!1,2639475694),model:{value:e.solicitudVisitaSeleccionada.destino_id,callback:function(t){e.$set(e.solicitudVisitaSeleccionada,"destino_id",t)},expression:"solicitudVisitaSeleccionada.destino_id"}})]:[e._v(e._s(e.solicitudVisitaSeleccionada.destino.nombre))]],2)]),e._v(" "),e.solicitudVisitaSeleccionada.id?t("div",{staticClass:"col-md-5"},[t("label",[e._v("Estado")]),e._v(" "),t("div",[t("estado-solicitud-visita",{attrs:{estado:e.solicitudVisitaSeleccionada.estado}})],1)]):e._e()])]),e._v(" "),t("div",{staticClass:"row"},[t("h4",{staticClass:"page-header"},[e._v("\n          Tareas\n          "),e.edicion?t("button",{staticClass:"btn btn-xs btn-primary",attrs:{type:"button",title:"Agregar tarea",rel:"tooltip",disabled:e.solicitudVisitaSeleccionada.detalles.length>=e.tareas.length},on:{click:function(t){return e.agregarTarea(e.solicitudVisitaSeleccionada)}}},[t("i",{staticClass:"fas fa-plus fa-fw"})]):e._e()])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[0===e.solicitudVisitaSeleccionada.detalles.length?t("div",{staticClass:"flex items-center justify-center",staticStyle:{height:"120px"}},[e._v("\n            Agregue tareas para la solicitud de visita\n          ")]):e._e(),e._v(" "),e.solicitudVisitaSeleccionada.detalles.length>0?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed"},[t("thead",[t("tr",[t("th",{staticClass:"text-left col-md-4"},[e._v("Nombre")]),e._v(" "),t("th",{staticClass:"text-left col-md-7"},[e._v("Observación")]),e._v(" "),e.edicion?t("th",{staticClass:"text-left col-md-1"}):e._e()])]),e._v(" "),t("tbody",e._l(e.solicitudVisitaSeleccionada.detalles,(function(a){return t("tr",[t("td",[e.edicion?[t("select",{directives:[{name:"model",rawName:"v-model",value:a.destino_tarea_id,expression:"detalle.destino_tarea_id"}],staticClass:"form-control input-sm",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(a,"destino_tarea_id",t.target.multiple?r:r[0])}}},[t("option",{domProps:{value:null}},[e._v("Seleccione...")]),e._v(" "),e._l(e.tareasFiltradas(a.destino_tarea_id),(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.nombre))])}))],2)]:[e._v(e._s(a.tarea.nombre))]],2),e._v(" "),t("td",[e.edicion?[t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.observacion,expression:"detalle.observacion"}],staticClass:"form-control input-sm textarea",attrs:{rows:"2"},domProps:{value:a.observacion},on:{input:function(t){t.target.composing||e.$set(a,"observacion",t.target.value)}}})]:t("div",{staticClass:"observacion"},[e._v(e._s(a.observacion))])],2),e._v(" "),e.edicion?t("td",{staticClass:"text-center"},[t("button",{staticClass:"btn btn-xs btn-danger",attrs:{type:"button",title:"Eliminar tarea",disabled:e.guardando},on:{click:function(t){return e.eliminarDetalle(a)}}},[t("i",{staticClass:"fas fa-trash-alt fa-fw"})])]):e._e()])})),0)]):e._e()])])]},proxy:!0},{key:"pie",fn:function(){return[t("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cerrar")]),e._v(" "),e.edicion?t("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button",disabled:e.guardando},on:{click:function(t){return e.guardarSolicitudVisita(e.solicitudVisitaSeleccionada)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.guardando,expression:"!guardando"}],staticClass:"fas fa-save fa-fw"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.guardando,expression:"guardando"}],staticClass:"fas fa-spinner fa-spin fa-fw"}),e._v("\n         Guardar\n      ")]):e._e()]},proxy:!0}]),model:{value:e.mostrarModalSolicitudVisita,callback:function(t){e.mostrarModalSolicitudVisita=t},expression:"mostrarModalSolicitudVisita"}})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-center col-md-1"},[e._v("No.")]),e._v(" "),t("th",{staticClass:"text-left col-md-4"},[e._v("Destino")]),e._v(" "),t("th",{staticClass:"text-left col-md-3"},[e._v("Tareas")]),e._v(" "),t("th",{staticClass:"text-center col-md-1"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-md-3"})])])}],!1,null,"3b2b4d5e",null).exports},1695:(e,t,a)=>{"use strict";a.d(t,{Z:()=>w});var r=a(5125),o=a(1010),i=a(5889),s=a(7902),n=a(7974),c=a(8177);const l={props:["paciente","token"],components:{EnviarCorreoResultados:s.Z,ImprimirResultadosModal:c.Z},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cantidadDetallesOrdenesValidadas:function(e){return e.detalles_ordenes.filter((function(e){return["X","L","V"].includes(e.estado)})).length},ordenPagada:function(e){var t=e.abonos.reduce((function(e,t){return 1*e+1*t.valor}),0);return t=Math.round(100*(t+Number.EPSILON))/100,e.subempresa.empresa.portal_mostrar_ordenes_impagas?e.subempresa.empresa.portal_mostrar_ordenes_impagas:t>=1*e.valor_total},verAdjuntos:function(e){this.$emit("ver-adjuntos",e)},tooltipCorreo:function(e){var t="Enviar por correo electrónico";return this.paciente.correo||(t="El paciente no tiene correo electrónico definido"),0===this.cantidadDetallesOrdenesValidadas(e)&&(t="No existen exámenes validados"),t},tooltipAdjuntos:function(e){var t="Ver adjuntos";return 0===this.cantidadDetallesOrdenesValidadas(e)&&(t="No existen exámenes validados"),e.tiene_adjuntos||(t="No tiene adjuntos"),t},correoElectronicoEnviado:function(){this.mostrarExito("Correo electrónico enviado")},abrirModalImprimirResultados:function(e){var t=(0,n.MD)({orden:e});$("#modalImprimirResultados").modal({backdrop:"static"},t)}}};var d=a(3379),u=a.n(d),m=a(512),p={insert:"head",singleton:!1};u()(m.Z,p);m.Z.locals;var f=a(1900);const v=(0,f.Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel panel-gris"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"panel-heading"},[t("div",[t("strong",[e._v(e._s("App\\Models\\SujetoObjeto"===e.paciente.tipo_paciente?e.paciente.descripcion:e.paciente.nombre_paciente)+" ("+e._s(e.paciente.numero_identificacion)+")")])]),e._v(" "),t("div",[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button",title:"Ver comparativo de resultados"},on:{click:function(t){return e.$emit("ver-comparativo-resultados",e.paciente)}}},[t("i",{staticClass:"fas fa-chart-line"})])])]),e._v(" "),t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered table-hover"},[e._m(0),e._v(" "),t("tbody",e._l(e.paciente.ordenes,(function(a){return t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(e._f("fecha")(a.fecha_orden,"YYYY-MM-DD")))]),e._v(" "),t("td",[e._v(e._s(a.medico?a.medico.nombre_completo:""))]),e._v(" "),t("td",{staticClass:"text-center"},[t("orden-estado",{attrs:{estado:a.estado}}),e._v(" "),t("div",[t("small",[e._v("\n              "+e._s(e.cantidadDetallesOrdenesValidadas(a))+"/"+e._s(a.detalles_ordenes.length)+"\n            ")])])],1),e._v(" "),t("td",{staticClass:"text-center"},[e.ordenPagada(a)?[t("a",{class:"btn btn-sm btn-default"+(0===e.cantidadDetallesOrdenesValidadas(a)?" disabled":""),attrs:{title:"Imprimir resultados"},on:{click:function(t){return e.abrirModalImprimirResultados(a)}}},[t("i",{staticClass:"fas fa-print"})]),e._v(" "),t("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.tooltipCorreo(a)}},[t("a",{staticClass:"btn btn-sm btn-default",class:{disabled:0===e.cantidadDetallesOrdenesValidadas(a)||!e.paciente.correo},attrs:{"data-toggle":"modal","data-target":"#envioCorreo","data-orden-id":a.id,"data-orden-numero":a.numero_orden,"data-correo":e.paciente.correo}},[t("i",{staticClass:"fas fa-envelope"})])]),e._v(" "),t("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.tooltipAdjuntos(a)}},[t("a",{staticClass:"btn btn-sm btn-default",class:{disabled:0===e.cantidadDetallesOrdenesValidadas(a)||!a.tiene_adjuntos},on:{click:function(t){return e.verAdjuntos(a)}}},[t("i",{staticClass:"fas fa-paperclip"})])])]:[t("i",{staticClass:"fas fa-exclamation-triangle fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Pago incompleto\n          ")]],2)])})),0)])]),e._v(" "),t("enviar-correo-resultados",{on:{"correo-electronico-enviado":e.correoElectronicoEnviado}}),e._v(" "),t("imprimir-resultados-modal",{attrs:{portal:"medicos",token:this.token}})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-center col-md-1"},[e._v("Número")]),e._v(" "),t("th",{staticClass:"text-center col-md-2"},[e._v("Fecha")]),e._v(" "),t("th",[e._v("Médico")]),e._v(" "),t("th",{staticClass:"text-center col-md-1"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"text-center col-md-2"})])])}],!1,null,"554b7444",null).exports,h={components:{AdjuntosModal:i.Z,ComparativoResultados:o.Z,Paciente:v},props:["token","filtros"],data:function(){return{cargando:!1,comparativoResultadosVisible:!1,ordenSeleccionada:{},pacientes:[],pacienteSeleccionado:{},paginaActual:1,totalPaginas:0}},mounted:function(){$("body").tooltip({selector:'[data-toggle="tooltip"]',container:"body"})},activated:function(){this.cargarPacientes()},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cambiarPagina:function(e){this.paginaActual=e,this.cargarPacientes()},cambioFiltro:_.debounce((function(){this.paginaActual=1,this.cargarPacientes()}),800),cargarPacientes:function(){var e=this;if(this.filtros.cadenaBusqueda=this.filtros.cadenaBusqueda.trim(),this.filtros.cadenaBusqueda&&this.filtros.cadenaBusqueda.length<3)return $("#busqueda").popover("show"),void setTimeout((function(){return $("#busqueda").popover("hide")}),1e4);this.filtros.cadenaBusqueda.length>=3&&$("#busqueda").popover("hide"),this.cargando=!0;var t={busqueda:this.filtros.cadenaBusqueda?this.filtros.cadenaBusqueda:null,fechaOrden:this.filtros.fechaOrden?this.filtros.fechaOrden:null,estado:this.filtros.estado?this.filtros.estado:null,page:this.paginaActual};axios.get("/api/ordenes/pacientes",{params:t}).then((function(t){var a=t.data;e.totalPaginas=a.last_page,e.pacientes=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al cargar pacientes!",a)})).then((function(){return e.cargando=!1}))},verAdjuntos:function(e){this.ordenSeleccionada=e,$("#modalAdjuntos").modal("show")},verComparativoResultados:function(e){this.pacienteSeleccionado=e,this.comparativoResultadosVisible=!0}}};const g=(0,f.Z)(h,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),e._l(e.pacientes,(function(a){return!e.cargando&&e.pacientes.length>0?[t("paciente",{attrs:{paciente:a,token:e.token},on:{"ver-adjuntos":e.verAdjuntos,"ver-comparativo-resultados":e.verComparativoResultados}})]:e._e()})),e._v(" "),t("cargando",{attrs:{cargando:e.cargando,cantidad:e.pacientes.length,tipo:"pacientes"}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.cargando&&e.pacientes.length>0,expression:"!cargando && pacientes.length > 0"}],staticClass:"text-center"},[t("paginate",{attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarPacientes,prevText:"Anterior",nextText:"Siguiente"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}})],1),e._v(" "),t("adjuntos-modal",{attrs:{orden:e.ordenSeleccionada,token:e.token,"tipo-consulta":"consulta-resultados-medicos"}}),e._v(" "),t("comparativo-resultados",{attrs:{paciente:e.pacienteSeleccionado,"tipo-paciente":e.pacienteSeleccionado.tipo_paciente,visible:e.comparativoResultadosVisible},on:{cerrado:function(t){e.comparativoResultadosVisible=!1},error:e.mostrarErrores}})],2)}),[],!1,null,null,null).exports;function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){C(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const y={components:{ResultadosPorOrden:r.Z,ResultadosPorPaciente:g},props:["token"],data:function(){return{filtros:{cadenaBusqueda:"",fechaOrden:"",estado:""},componente:"ResultadosPorOrden"}},methods:{cambioFiltro:function(){this.porOrden&&this.$refs.resultadosPorOrden.cambioFiltro(),this.porPaciente&&this.$refs.resultadosPorPaciente.cambioFiltro()},cambiarComponente:function(e){this.componente=e}},computed:{porOrden:function(){return"ResultadosPorOrden"===this.componente},porPaciente:function(){return"ResultadosPorPaciente"===this.componente},propsComponente:function(){var e={token:this.token,filtros:this.filtros};return this.porOrden?x(x({},e),{},{ref:"resultadosPorOrden",portal:"medicos"}):this.porPaciente?x(x({},e),{},{ref:"resultadosPorPaciente"}):void 0}},watch:{"filtros.fechaOrden":function(e,t){e!==t&&this.cambioFiltro()}}};var E=a(7592),A={insert:"head",singleton:!1};u()(E.Z,A);E.Z.locals;const w=(0,f.Z)(y,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-3 form-group"},[t("div",{staticClass:"btn-group btn-group-justified btn-toggle",attrs:{role:"group"}},[t("a",{staticClass:"btn btn-default",class:{"btn-primary":e.porOrden},on:{click:function(t){return e.cambiarComponente("ResultadosPorOrden")}}},[e._v("\n          Orden\n        ")]),e._v(" "),t("a",{staticClass:"btn btn-default",class:{"btn-primary":e.porPaciente},on:{click:function(t){return e.cambiarComponente("ResultadosPorPaciente")}}},[e._v("\n          Paciente\n        ")])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"date",rawName:"v-date",value:e.filtros.fechaOrden,expression:"filtros.fechaOrden"}],staticClass:"form-control cursor-menu",attrs:{id:"fechaOrden","data-provide":"datepicker","data-date-format":"yyyy-mm-dd","data-date-today-highlight":"true","data-date-autoclose":"true","data-date-language":"es",placeholder:"aaaa-mm-dd",autocomplete:"off",readonly:""}}),e._v(" "),t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Borrar"},on:{click:function(t){e.filtros.fechaOrden=""}}},[t("i",{staticClass:"fas fa-times",attrs:{"aria-hidden":"true"}})])])])]),e._v(" "),t("div",{staticClass:"col-sm-2 form-group"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.filtros.estado,expression:"filtros.estado"}],staticClass:"form-control",attrs:{id:"estado",name:"estado"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filtros,"estado",t.target.multiple?a:a[0])},e.cambioFiltro]}},[t("option",{attrs:{value:""}},[e._v("Estado")]),e._v(" "),t("option",{attrs:{value:"G"}},[e._v("Generado")]),e._v(" "),t("option",{attrs:{value:"P"}},[e._v("En Proceso")]),e._v(" "),t("option",{attrs:{value:"R"}},[e._v("Reportado")]),e._v(" "),t("option",{attrs:{value:"L"}},[e._v("Preliminar")]),e._v(" "),t("option",{attrs:{value:"V"}},[e._v("Validado")])])]),e._v(" "),t("div",{staticClass:"col-sm-5 form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.filtros.cadenaBusqueda,expression:"filtros.cadenaBusqueda"}],staticClass:"form-control",attrs:{id:"busqueda",placeholder:"Nombre, Apellidos o Identificación","data-toggle":"popover","data-trigger":"manual","data-placement":"bottom",title:"Advertencia","data-content":"Debe ingresar al menos 3 caracteres"},domProps:{value:e.filtros.cadenaBusqueda},on:{input:[function(t){t.target.composing||e.$set(e.filtros,"cadenaBusqueda",t.target.value)},e.cambioFiltro]}})])]),e._v(" "),t("br"),e._v(" "),t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("keep-alive",[t(e.componente,e._b({tag:"component"},"component",e.propsComponente,!1))],1)],1)],1)}),[],!1,null,"6af35d5e",null).exports},9906:(e,t,a)=>{"use strict";a.d(t,{Z:()=>x});var r=a(1010),o=a(5889),i=a(7902),s=a(7974),n=a(8177),c=a(5480);const l={props:["paciente","token"],components:{EnviarCorreoResultados:i.Z,ImprimirResultadosModal:n.Z,ResultadosModal:c.Z},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},cantidadDetallesOrdenesValidadas:function(e){return e.detalles_ordenes.filter((function(e){return["X","L","V"].includes(e.estado)})).length},ordenPagada:function(e){var t=e.abonos.reduce((function(e,t){return 1*e+1*t.valor}),0);return t=Math.round(100*(t+Number.EPSILON))/100,e.subempresa.empresa.portal_mostrar_ordenes_impagas?e.subempresa.empresa.portal_mostrar_ordenes_impagas:t>=1*e.valor_total},verAdjuntos:function(e){this.$emit("ver-adjuntos",e)},tooltipCorreo:function(e){var t="Enviar por correo electrónico";return this.paciente.correo||(t="El paciente no tiene correo electrónico definido"),0===this.cantidadDetallesOrdenesValidadas(e)&&(t="No existen exámenes validados"),t},tooltipAdjuntos:function(e){var t="Ver adjuntos";return 0===this.cantidadDetallesOrdenesValidadas(e)&&(t="No existen exámenes validados"),e.tiene_adjuntos||(t="No tiene adjuntos"),t},correoElectronicoEnviado:function(){this.mostrarExito("Correo electrónico enviado")},abrirModalImprimirResultados:function(e){var t=(0,s.MD)({orden:e});$("#modalImprimirResultados").modal({backdrop:"static"},t)},abrirModalVerResultados:function(e){var t=(0,s.MD)({orden:e});$("#modalResultados").modal({backdrop:"static"},t)}}};var d=a(3379),u=a.n(d),m=a(6508),p={insert:"head",singleton:!1};u()(m.Z,p);m.Z.locals;var f=a(1900);const v=(0,f.Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"panel panel-gris"},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"panel-heading"},[t("div",[t("strong",[e._v(e._s(e.paciente.nombre_paciente)+" ("+e._s(e.paciente.numero_identificacion)+")")])]),e._v(" "),t("div",[t("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button"},on:{click:function(t){return e.$emit("ver-comparativo-resultados",e.paciente)}}},[t("i",{staticClass:"fas fa-chart-line"})])])]),e._v(" "),e.paciente.ordenes.length>0?t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered table-hover"},[e._m(0),e._v(" "),t("tbody",e._l(e.paciente.ordenes,(function(a){return t("tr",[t("td",{staticClass:"text-center"},[e._v(e._s(a.numero_orden))]),e._v(" "),t("td",{staticClass:"text-center no-salto-linea"},[e._v(e._s(e._f("fecha")(a.fecha_orden,"YYYY-MM-DD")))]),e._v(" "),t("td",[e._v(e._s(a.medico?a.medico.nombre_completo:""))]),e._v(" "),t("td",{staticClass:"text-center"},[t("orden-estado",{attrs:{estado:a.estado}}),e._v(" "),t("div",[t("small",[e._v("\n              "+e._s(e.cantidadDetallesOrdenesValidadas(a))+"/"+e._s(a.detalles_ordenes.length)+"\n            ")])])],1),e._v(" "),t("td",{staticClass:"text-center"},[e.ordenPagada(a)?[t("a",{class:"btn btn-sm btn-default"+(0===e.cantidadDetallesOrdenesValidadas(a)?" disabled":""),attrs:{title:"ver resultados"},on:{click:function(t){return e.abrirModalVerResultados(a)}}},[t("i",{staticClass:"fas fa-eye"})]),e._v(" "),t("a",{class:"btn btn-sm btn-default"+(0===e.cantidadDetallesOrdenesValidadas(a)?" disabled":""),attrs:{title:"Imprimir resultados"},on:{click:function(t){return e.abrirModalImprimirResultados(a)}}},[t("i",{staticClass:"fas fa-print"})]),e._v(" "),t("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.tooltipCorreo(a)}},[t("a",{staticClass:"btn btn-sm btn-default",class:{disabled:0===e.cantidadDetallesOrdenesValidadas(a)||!e.paciente.correo},attrs:{"data-toggle":"modal","data-target":"#envioCorreo","data-orden-id":a.id,"data-orden-numero":a.numero_orden,"data-correo":e.paciente.correo}},[t("i",{staticClass:"fas fa-envelope"})])]),e._v(" "),t("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.tooltipAdjuntos(a)}},[t("a",{staticClass:"btn btn-sm btn-default",class:{disabled:0===e.cantidadDetallesOrdenesValidadas(a)||!a.tiene_adjuntos},on:{click:function(t){return e.verAdjuntos(a)}}},[t("i",{staticClass:"fas fa-paperclip"})])])]:[t("i",{staticClass:"fas fa-exclamation-triangle fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Pago incompleto\n          ")]],2)])})),0)])]):t("div",{staticStyle:{padding:"5px"}},[e._v("\n    No tiene resultados\n  ")]),e._v(" "),t("enviar-correo-resultados",{on:{"correo-electronico-enviado":e.correoElectronicoEnviado}}),e._v(" "),t("imprimir-resultados-modal",{attrs:{portal:"pacientes",token:this.token}}),e._v(" "),t("resultados-modal",{attrs:{portal:"pacientes",token:e.token}})],1)}),[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"text-center col-md-2"},[e._v("Número")]),e._v(" "),t("th",{staticClass:"text-center col-md-2"},[e._v("Fecha")]),e._v(" "),t("th",[e._v("Médico")]),e._v(" "),t("th",{staticClass:"text-center col-md-1"},[e._v("Estado")]),e._v(" "),t("th",{staticClass:"col-md-2"})])])}],!1,null,"3e5733b3",null).exports;function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b={components:{AdjuntosModal:o.Z,comparativoResultados:r.Z,Paciente:v},props:["pacientes","token"],created:function(){this.configurarInterceptorParaPortal()},mounted:function(){$("body").tooltip({selector:'[data-toggle="tooltip"]',container:"body"})},data:function(){return{busqueda:"",comparativoResultadosVisible:!1,ordenSeleccionada:{},pacienteSeleccionado:{}}},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},verAdjuntos:function(e){this.ordenSeleccionada=e,$("#modalAdjuntos").modal("show")},verComparativoResultados:function(e){this.pacienteSeleccionado=e,this.comparativoResultadosVisible=!0},configurarInterceptorParaPortal:function(){var e=this;axios.interceptors.request.use((function(t){return t.url="/consulta-resultados".concat(t.url),t.params=h(h({},t.params),{},{token:e.token}),t}))}},computed:{pacientesFiltrados:function(){if(this.busqueda){var e=new RegExp(this.busqueda,"i");return this.pacientes.filter((function(t){return e.test(t.nombre_paciente)||e.test(t.numero_identificacion)}))}return this.pacientes}}};const x=(0,f.Z)(b,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-4"},[t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.busqueda,expression:"busqueda"}],staticClass:"form-control",attrs:{id:"busqueda",placeholder:"Nombre o Identificación"},domProps:{value:e.busqueda},on:{input:function(t){t.target.composing||(e.busqueda=t.target.value)}}})])])]),e._v(" "),e._l(e.pacientesFiltrados,(function(a){return[t("paciente",{attrs:{paciente:a,token:e.token},on:{"ver-adjuntos":e.verAdjuntos,"ver-comparativo-resultados":e.verComparativoResultados}})]})),e._v(" "),0===e.pacientesFiltrados.length?[e._v("\n    No existen registros\n  ")]:e._e(),e._v(" "),t("adjuntos-modal",{attrs:{orden:e.ordenSeleccionada,token:e.token,"tipo-consulta":"consulta-resultados"}}),e._v(" "),t("comparativo-resultados",{attrs:{paciente:e.pacienteSeleccionado,"tipo-paciente":e.pacienteSeleccionado.tipo_paciente,visible:e.comparativoResultadosVisible},on:{cerrado:function(t){e.comparativoResultadosVisible=!1},error:e.mostrarErrores}})],2)}),[],!1,null,null,null).exports},1010:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});const r={components:{graficoHistorial:a(6293).Z},props:["paciente","tipoPaciente","visible"],data:function(){return{cargandoExamenes:!1,cargandoHistorial:!1,cargandoParametros:!1,examenes:[],examenSeleccionado:{},historial:[],parametros:[],parametroSeleccionado:{}}},mounted:function(){var e=this;$("#modalComparativoResultados").on("hide.bs.modal",(function(t){e.examenes=[],e.examenSeleccionado={},e.parametros=[],e.$emit("cerrado")})),$("#modalHistorialResultados").on("hide.bs.modal",(function(t){e.historial=[],e.parametroSeleccionado={}})),$("#modalHistorialResultados").on("hidden.bs.modal",(function(e){$("body").addClass("modal-open")}))},methods:{abrirComparativo:function(){var e=this;$("#modalComparativoResultados").modal(),this.cargandoExamenes=!0,axios.get("/examenes",{params:{pacienteId:this.paciente.id,tipoPaciente:this.tipoPaciente}}).then((function(t){var a=t.data.data;return e.examenes=a})).catch((function(t){var a=e.procesarErrorResponse(t);console.error(a),e.$emit("errpor","Error al cargar exámenes")})).then((function(){return e.cargandoExamenes=!1}))},abrirHistorial:function(e){var t=this;$("#modalHistorialResultados").modal(),this.cargandoHistorial=!0,this.parametroSeleccionado=e,axios.get("/historial",{params:{nombreParametro:e.nombre_parametro,ordenParametro:e.orden,nombreExamen:this.examenSeleccionado.nombre,pacienteId:this.paciente.id,tipoPaciente:this.tipoPaciente}}).then((function(a){t.historial=a.data.data.map((function(e){return{numero:e.numero_orden,fecha:t.fechaALocal(e.fecha_orden,"YYYY-MM-DD"),resultado:e.resultado,unidadMedida:e.unidad_medida}}));var r=_.orderBy(t.historial,["fecha"],["asc"]);t.datosGraficoHistorial={labels:r.map((function(e){return e.fecha})),datasets:[{label:e.nombre_parametro,backgroundColor:"#d9edf7",data:r.map((function(e){return e.resultado}))}]}})).catch((function(e){var a=t.procesarErrorResponse(e);console.error(a),t.$emit("errpor","Error al cargar historial")})).then((function(){return t.cargandoHistorial=!1}))},seleccionarExamen:function(e){var t=this;this.examenSeleccionado=e,this.cargandoParametros=!0,axios.get("/parametros",{params:{nombreExamen:this.examenSeleccionado.nombre,pacienteId:this.paciente.id,tipoPaciente:this.tipoPaciente}}).then((function(e){return t.parametros=e.data.data})).catch((function(e){var a=t.procesarErrorResponse(e);console.error(a),t.$emit("errpor","Error al cargar parámetros")})).then((function(){return t.cargandoParametros=!1}))}},watch:{visible:function(e,t){e&&this.abrirComparativo()}}};var o=a(3379),i=a.n(o),s=a(8607),n={insert:"head",singleton:!1};i()(s.Z,n);s.Z.locals;const c=(0,a(1900).Z)(r,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog",id:"modalComparativoResultados"}},[t("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(0),e._v(" "),t("h5",[e._v("\n            "+e._s(e.paciente.nombre_paciente)+"\n          ")]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Comparativo de Resultados")])]),e._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-5"},[t("div",{staticClass:"panel panel-default"},[t("div",{staticClass:"panel-heading"},[e._v("Exámenes")]),e._v(" "),t("div",{staticClass:"table-responsive",staticStyle:{height:"280px",overflow:"auto"}},[!e.cargandoExamenes&&e.examenes.length>0?t("table",{staticClass:"table table-hover table-condensed"},[t("tbody",e._l(e.examenes,(function(a,r){return t("tr",{key:r,class:{"bg-warning":a===e.examenSeleccionado},on:{click:function(t){return e.seleccionarExamen(a)}}},[t("td",{staticClass:"puntero"},[e._v(e._s(a.nombre))])])})),0)]):t("table",{staticClass:"table"},[t("tr",[t("td",{staticClass:"text-center",staticStyle:{height:"280px","vertical-align":"middle"}},[e.cargandoExamenes?t("h4",[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Cargando...\n                        ")]):e._e(),e._v(" "),e.cargandoExamenes||0!==e.examenes.length?e._e():t("p",[e._v("\n                          No se han encontrado exámenes para el paciente\n                        ")])])])])])])]),e._v(" "),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"panel panel-default"},[t("div",{staticClass:"panel-heading"},[e._v("Parámetros")]),e._v(" "),t("div",{staticClass:"table-responsive",staticStyle:{height:"280px",overflow:"auto"}},[!e.cargandoParametros&&e.examenSeleccionado&&e.parametros.length>0?t("table",{staticClass:"table table-hover table-condensed"},[t("tbody",e._l(e.parametros,(function(a,r){return t("tr",{key:r},[t("td",{staticClass:"col-md-10"},[e._v(e._s(a.nombre_parametro))]),e._v(" "),t("td",{staticClass:"col-md-2 text-center"},[t("button",{staticClass:"btn btn-xs btn-default",attrs:{type:"button",title:"Historial de Resultados"},on:{click:function(t){return e.abrirHistorial(a)}}},[t("i",{staticClass:"fas fa-history"})])])])})),0)]):t("table",{staticClass:"table"},[t("tr",[t("td",{staticClass:"text-center",staticStyle:{height:"280px","vertical-align":"middle"}},[e.cargandoParametros&&e.examenSeleccionado?t("h4",[t("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),e._v("Cargando...\n                        ")]):e._e(),e._v(" "),!e.cargandoParametros&&e.examenSeleccionado&&0===e.parametros.length?t("p",[e._v("\n                          No se han encontrado parámetros para el examen seleccionado\n                        ")]):e._e(),e._v(" "),e.cargandoParametros||e.examenSeleccionado?e._e():t("p",[e._v("\n                          Por favor seleccione un examen\n                        ")])])])])])])])])]),e._v(" "),e._m(1)])])]),e._v(" "),t("div",{staticClass:"modal fade",attrs:{id:"modalHistorialResultados",tabindex:"-1",role:"dialog"}},[t("div",{staticClass:"modal-dialog",class:{"modal-lg":"N"===e.parametroSeleccionado.tipo_parametro},attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._m(2),e._v(" "),t("h5",[e._v("\n            "+e._s(e.paciente.nombre_paciente)+"\n          ")]),e._v(" "),t("h4",{staticClass:"modal-title"},[e._v("Historial de "+e._s(e.parametroSeleccionado.nombre_parametro))])]),e._v(" "),t("div",{staticClass:"modal-body"},[e.cargandoHistorial?e._e():t("div",{staticClass:"row"},[t("div",{class:["N","F"].includes(e.parametroSeleccionado.tipo_parametro)?"col-md-6":"col-md-8 col-md-offset-2"},[t("div",{staticStyle:{height:"280px",overflow:"auto"}},[t("table",{staticClass:"table table-hover table-condensed"},[e._m(3),e._v(" "),t("tbody",e._l(e.historial,(function(a){return t("tr",[t("td",[e._v(e._s(a.numero))]),e._v(" "),t("td",[e._v(e._s(a.fecha))]),e._v(" "),t("td",{staticClass:"text-right"},[e._v("\n                      "+e._s(a.resultado)+" "+e._s(a.unidadMedida)+"\n                    ")])])})),0)])])]),e._v(" "),["N","F"].includes(e.parametroSeleccionado.tipo_parametro)?t("div",{staticClass:"col-md-6"},[e.cargandoHistorial?e._e():t("grafico-historial",{staticStyle:{height:"280px"},attrs:{datos:e.datosGraficoHistorial}})],1):e._e()]),e._v(" "),e.cargandoHistorial?t("div",{staticStyle:{height:"280px"}},[e._m(4)]):e._e()]),e._v(" "),e._m(5)])])])])}),[function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×\n            ")])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e("i",{staticClass:"fas fa-times fa-fw"}),this._v("Cerrar\n          ")])])},function(){var e=this._self._c;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{staticClass:"col-sm-4"},[e._v("Orden")]),e._v(" "),t("th",{staticClass:"col-sm-4"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"col-sm-4 text-center"},[e._v("Valor")])])])},function(){var e=this._self._c;return e("table",{staticClass:"table"},[e("tr",[e("td",{staticClass:"text-center",staticStyle:{height:"220px","vertical-align":"middle"}},[e("h4",[e("i",{staticClass:"fas fa-spinner fa-spin fa-fw",attrs:{"aria-hidden":"true"}}),this._v("Cargando...\n                  ")])])])])},function(){var e=this._self._c;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button","data-dismiss":"modal"}},[e("i",{staticClass:"fas fa-times fa-fw"}),this._v("Cerrar\n          ")])])}],!1,null,"29a0a555",null).exports},7902:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(4590);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const s={data:function(){return{ordenId:"",correo:"",lang:"",estadoEntrega:{destinatario:"",cantidad:0,minutos:0}}},mounted:function(){var e=this;$("#envioCorreo").on("show.bs.modal",(function(t){e.ordenId=$(t.relatedTarget).data("orden-id"),e.ordenNumero=$(t.relatedTarget).data("orden-numero"),e.correo=$(t.relatedTarget).data("correo"),e.verificarEntregaPorDestinatario()})),$("#envioCorreo").on("hide.bs.modal",(function(){e.lang="",e.correo="",e.ordenId="",e.estadoEntrega.destinatario="",e.estadoEntrega.cantidad=0,e.estadoEntrega.minutos=0}))},methods:{mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},mostrarAdvertencia:function(e,t){this.$refs.alerta.mostrarAlerta("warning",e,t)},enviar:function(e){var t=this;if(this.motivoDestinatarioInvalido)this.mostrarErrores("¡Error!",this.motivoDestinatarioInvalido);else{var a=null,r=null;"i"===e.target.localName&&(r=e.target.parentNode,a=e.target),"a"===e.target.localName&&(r=e.target,a=e.target.childNodes[0]),"button"===e.target.localName&&(r=e.target,a=e.target.childNodes[0]),this.cambiarEstadoBoton(r,a);var o={lang:this.lang};o=this.obtenerParametrosUrl(o),axios.get("/".concat(this.ordenId,"/correo").concat(o)).then((function(){t.$emit("correo-electronico-enviado"),$("#envioCorreo").modal("hide")})).catch((function(e){if(!e.response)return console.error("Error al enviar resultados",e.response),void t.mostrarErrores("Error al enviar resultados");var a=e.response.data;if("WARNING"===a.type)t.mostrarAdvertencia(a.messages);else{var r=t.procesarErrorResponse(e);t.mostrarErrores("Error al enviar resultados",r)}})).then((function(){return t.cambiarEstadoBoton(r,a)}))}},cambiarEstadoBoton:function(e,t){e.classList.contains("disabled")?(e.classList.remove("disabled"),t.classList.add("fa-envelope"),t.classList.remove("fa-spinner","fa-spin")):(e.classList.add("disabled"),t.classList.remove("fa-envelope"),t.classList.add("fa-spinner","fa-spin"))},verificarEntregaPorDestinatario:function(){var e=this,t={destinatario:this.correo,numeroOrden:this.ordenNumero};axios.get("/api/entregas/verificar",{params:t}).then((function(t){var a=t.data.data;e.estadoEntrega.destinatario=a.destinatario,e.estadoEntrega.cantidad=a.cantidad,e.estadoEntrega.minutos=a.minutos})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("¡Error al verificar entregas!",a)})).then((function(){}))},langClick:function(e){this.lang===e.target.value&&(this.lang="")}},computed:{motivoDestinatarioInvalido:function(){var e=this,t=Object.entries(r.CW).find((function(t){var a=o(t,2),r=a[0];a[1];return e.estadoEntrega.destinatario&&e.estadoEntrega.destinatario.toLowerCase().includes(r)}));return t&&t.length>1?t[1]:""}}};const n=(0,a(1900).Z)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal fade",attrs:{id:"envioCorreo",tabindex:"-1",role:"dialog"}},[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"modal-dialog modal-sm",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),t("div",{staticClass:"modal-body"},[e.correo?[e._v("\n          Va a enviar los resultados al correo:\n          "),t("br"),e._v(" "),t("strong",[e._v(e._s(e.correo))]),e._v(" "),e.motivoDestinatarioInvalido?t("div",{staticStyle:{color:"darkred","font-size":"15px"}},[t("strong",[e._v(e._s(e.motivoDestinatarioInvalido))])]):e._e(),e._v(" "),t("br"),t("br"),e._v(" "),t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],attrs:{name:"lang",type:"radio",value:"esEn"},domProps:{checked:e._q(e.lang,"esEn")},on:{click:e.langClick,change:function(t){e.lang="esEn"}}}),e._v("\n              Etiquetas en Español/Inglés\n            ")])]),e._v(" "),t("div",{staticClass:"radio"},[t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],attrs:{name:"lang",type:"radio",value:"en"},domProps:{checked:e._q(e.lang,"en")},on:{click:e.langClick,change:function(t){e.lang="en"}}}),e._v("\n              Etiquetas en Inglés\n            ")])]),e._v("\n\n          ¿Está seguro?\n        ")]:[e._v("\n          La orden no tiene un correo registrado\n        ")],e._v(" "),e.estadoEntrega.cantidad>0?t("div",{staticStyle:{color:"darkgoldenrod"}},[t("br"),e._v(" "),t("strong",[e._v("IMPORTANTE:")]),e._v(" "),t("p",[e._v("\n            Ha enviado "),t("strong",[e._v(e._s(e.estadoEntrega.cantidad)+" correos electrónicos")]),e._v(" a este mismo destinatario\n            en los últimos "),t("strong",[e._v(e._s(e.estadoEntrega.minutos)+" minutos")]),e._v("."),t("br"),e._v("\n            Esto puede ocasionar que sus correos sean incluidos en\n            "),t("strong",[e._v(" lista negra y sean bloqueados .")])])]):e._e()],2),e._v(" "),t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button",id:"botonCancelar","data-dismiss":"modal"}},[e._v("\n          Cancelar\n        ")]),e._v(" "),t("button",{staticClass:"btn btn-primary",attrs:{id:"portalEnviarCorreo",type:"button",disabled:e.motivoDestinatarioInvalido||!e.correo},on:{click:e.enviar}},[t("i",{staticClass:"fas fa-paper-plane fa-fw"}),e._v("\n          Enviar\n        ")])])])])],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("Entregar por correo electrónico")])])}],!1,null,null,null).exports},5125:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var r=a(1010),o=a(5889),i=a(7902),s=a(8177),n=a(7974),c=a(6354),l=a(9326),d=a(5480);const u={props:{portal:{type:String,required:!0,validator:function(e){return-1!==["empresas","medicos"].indexOf(e)}},orden:{type:Object,required:!0},token:{type:String,default:null},tamano:{type:String},empresa:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{tooltipCorreo:function(e){var t="Enviar por correo electrónico";return e.paciente.correo||(t="El paciente no tiene correo electrónico definido"),0===e.cantidadDetallesOrdenesValidadas&&(t="No existen exámenes validados"),t},tooltipAdjuntos:function(e){var t="Ver adjuntos";return 0===e.cantidadDetallesOrdenesValidadas&&(t="No existen exámenes validados"),e.tiene_adjuntos||(t="No tiene adjuntos"),t},abrirModalVerResultados:function(e){this.$emit("abrir-modal-ver-resultados",e)},verAdjuntos:function(e){this.$emit("ver-adjuntos",e)},verComparativoResultados:function(e){this.$emit("ver-comparativo-resultados",e)},abrirModalImprimirResultados:function(e){this.$emit("abrir-modal-imprimir-resultados",e)},abrirModalEstadoOrden:function(e){this.$emit("abrir-modal-estado-orden",e)}},computed:{claseBoton:function(){return{"btn-sm":"sm"===this.tamano,disabled:0===this.orden.cantidadDetallesOrdenesValidadas}},url:function(){var e={token:this.token};return e=this.obtenerParametrosUrl(e),"/consulta-resultados-".concat(this.portal,"/ordenes/").concat(this.orden.id,"/recibo").concat(e)}}};var m=a(1900);const p=(0,m.Z)(u,(function(){var e=this,t=e._self._c;return t("div",[e.orden.pagada&&e.orden.validada?[t("a",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{id:"portalVerResultados","data-toggle":"tooltip","data-placement":"top",title:"Ver resultados"},on:{click:function(t){return e.abrirModalVerResultados(e.orden)}}},[t("i",{staticClass:"fas fa-eye fa-fw"})]),e._v(" "),t("a",{staticClass:"btn btn-default",class:e.claseBoton,attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Imprimir resultados"},on:{click:function(t){return e.abrirModalImprimirResultados(e.orden)}}},[t("i",{staticClass:"fas fa-print fa-fw"})]),e._v(" "),t("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.tooltipCorreo(e.orden)}},[t("a",{staticClass:"btn btn-default",class:{disabled:0===e.orden.cantidadDetallesOrdenesValidadas||!e.orden.paciente.correo,"btn-sm":"sm"===this.tamano},attrs:{"data-toggle":"modal","data-target":"#envioCorreo","data-orden-id":e.orden.id,"data-orden-numero":e.orden.numero_orden,"data-correo":e.orden.paciente.correo}},[t("i",{staticClass:"fas fa-envelope fa-fw"})])]),e._v(" "),t("span",{attrs:{"data-toggle":"tooltip","data-placement":"top",title:e.tooltipAdjuntos(e.orden)}},[t("a",{staticClass:"btn btn-default",class:{disabled:0===e.orden.cantidadDetallesOrdenesValidadas||!e.orden.tiene_adjuntos,"btn-sm":"sm"===this.tamano},on:{click:function(t){return e.verAdjuntos(e.orden)}}},[t("i",{staticClass:"fas fa-paperclip fa-fw"})])]),e._v(" "),t("div",{staticClass:"btn-group"},[t("button",{staticClass:"btn btn-default dropdown-toggle",class:e.claseBoton,attrs:{type:"button","data-toggle":"dropdown",rel:"tooltip",title:"Más opciones","aria-haspopup":"true"}},[t("i",{staticClass:"fas fa-ellipsis-v fa-fw"})]),e._v(" "),t("ul",{staticClass:"dropdown-menu dropdown-menu-right"},["empresas"===e.portal&&e.empresa.portal_estado_cuenta?t("li",[t("a",{staticClass:"puntero",attrs:{target:"_blank",href:e.url}},[t("i",{staticClass:"fas fa-receipt fa-fw text-gris"}),e._v("\n              Imprimir recibo\n          ")])]):e._e(),e._v(" "),t("li",[t("a",{staticClass:"puntero",attrs:{"data-toggle":"modal","data-target":"#modalVerEntregas","data-forma":"CORREO","data-orden":JSON.stringify(e.orden)}},[t("i",{staticClass:"fas fa-mail-bulk fa-fw text-gris fa-personalizado"}),e._v("\n              Entregas por correo electrónico\n          ")])]),e._v(" "),t("li",[t("a",{staticClass:"puntero",on:{click:function(t){return e.verComparativoResultados(e.orden)}}},[t("i",{staticClass:"fas fa-chart-line fa-fw"}),e._v("  Comparativo de resultados\n          ")])])])])]:[e.orden.pagada?e._e():t("div",[t("i",{staticClass:"fas fa-exclamation-triangle fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n      Pago incompleto\n    ")]),e._v(" "),e.orden.validada?e._e():t("div",[t("i",{staticClass:"fas fa-fw fa-exclamation-triangle fa-fw",attrs:{"aria-hidden":"true"}}),e._v("\n      Resultado(s) incompleto(s)\n    ")])]],2)}),[],!1,null,null,null).exports;function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g={components:{AdjuntosModal:o.Z,ComparativoResultados:r.Z,EnviarCorreoResultados:i.Z,ImprimirResultadosModal:s.Z,EstadoOrdenModal:c.Z,VerEntregasModal:l.Z,ResultadosModal:d.Z,OpcionesOrden:p},props:{portal:{type:String,required:!0,validator:function(e){return-1!==["empresas","medicos"].indexOf(e)}},token:{type:String,required:!0},filtros:{type:Object,required:!0},mostrarValor:{type:Boolean,default:!1},empresa:{type:Object,default:function(){return{}}}},data:function(){return{procesando:{exportarExcel:!1,cargarOrdenes:!1},comparativoResultadosVisible:!1,ordenes:[],ordenSeleccionada:{},pacienteSeleccionado:{},paginaActual:1,totalPaginas:0,totalRegistros:0}},activated:function(){this.cargarOrdenes()},created:function(){this.configurarInterceptorParaPortal()},mounted:function(){$("body").tooltip({selector:'[data-toggle="tooltip"]',container:"body"})},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},mostrarInformativo:function(e){this.$refs.alerta.mostrarAlerta("info",e)},mostrarErrores:function(e,t){this.$refs.alerta.mostrarAlerta("danger",e,t)},cargarOrdenes:function(){var e=this;if(this.filtros.cadenaBusqueda=this.filtros.cadenaBusqueda.trim(),this.filtros.cadenaBusqueda&&this.filtros.cadenaBusqueda.length<3)return $("#busqueda").popover("show"),void setTimeout((function(){return $("#busqueda").popover("hide")}),1e4);this.filtros.cadenaBusqueda.length>=3&&$("#busqueda").popover("hide"),this.procesando.cargarOrdenes=!0;var t={cadenaBusqueda:this.filtros.cadenaBusqueda?this.filtros.cadenaBusqueda:null,fechaOrden:this.filtros.fechaOrden?this.filtros.fechaOrden:null,subempresaId:this.filtros.subempresaId?this.filtros.subempresaId:null,tipoPaciente:this.filtros.tipoPaciente?this.filtros.tipoPaciente:null,estado:this.filtros.estado?this.filtros.estado:null,conAdjuntos:!0,zonaHoraria:this.$usuario.zonaHoraria,page:this.paginaActual};axios.get("/api/ordenes",{params:t}).then((function(t){var a=t.data;e.totalPaginas=a.last_page,e.totalRegistros=a.total,a.data.forEach((function(t){t.paciente.numero_historia_clinica=e.obtenerNumeroHistoriaClinica(t,t.sistema_externo_id)})),e.ordenes=a.data})).catch((function(t){var a=e.procesarErrorResponse(t);e.mostrarErrores("Error al cargar órdenes",a)})).then((function(){return e.procesando.cargarOrdenes=!1}))},cambioFiltro:_.debounce((function(){this.paginaActual=1,this.cargarOrdenes()}),800),cambiarTipoPaciente:function(){this.paginaActual=1,this.cargarOrdenes()},cantidadDetallesOrdenesValidadas:function(e){return e.detalles_ordenes.filter((function(e){return"L"===e.estado||"V"===e.estado||"X"===e.estado})).length},ordenPagada:function(e,t){return e.subempresa.empresa.portal_mostrar_ordenes_impagas?e.subempresa.empresa.portal_mostrar_ordenes_impagas:t>=1*e.valor_total},verAdjuntos:function(e){this.ordenSeleccionada=e,$("#modalAdjuntos").modal("show")},verComparativoResultados:function(e){this.pacienteSeleccionado=e.paciente,this.pacienteSeleccionado.tipo_paciente=e.paciente_type,this.comparativoResultadosVisible=!0},esOrdenValidada:function(e){var t=!0;return"empresas"===this.portal&&e.subempresa.empresa.descargar_resultados_con_validacion_completa&&(t=e.detalles_ordenes.length===this.cantidadDetallesOrdenesValidadas(e)),t},calcularSaldo:function(e,t){var a=e-t;return Math.round(100*(a+Number.EPSILON))/100},correoElectronicoEnviado:function(){this.mostrarExito("Correo electrónico enviado")},abrirModalImprimirResultados:function(e){var t=(0,n.MD)({orden:e});$("#modalImprimirResultados").modal({backdrop:"static"},t)},abrirModalVerResultados:function(e){var t=(0,n.MD)({orden:e});$("#modalResultados").modal({backdrop:"static"},t)},abrirModalEstadoOrden:function(e){var t=(0,n.MD)({"id-orden":e});$("#modalEstadoOrden").modal({},t)},configurarInterceptorParaPortal:function(){var e=this;axios.interceptors.request.use((function(t){return t.url="/".concat(e.urlPortal).concat(t.url),t.params=v(v({},t.params),{},{token:e.token}),t}))},exportarAExcel:function(){var e=this;if(this.procesando.exportarExcel=!0,this.filtros.fechaOrden||this.filtros.cadenaBusqueda){var t={fechaOrden:this.filtros.fechaOrden,estado:this.filtros.estado,subempresaId:this.filtros.subempresaId,cadenaBusqueda:this.filtros.cadenaBusqueda,zonaHoraria:this.$usuario.zonaHoraria};t=this.obtenerParametrosUrl(t),axios.get("/informes/resultados/csv".concat(t),{responseType:"arraybuffer"}).then((function(e){var t=decodeURIComponent(e.headers["content-disposition"]),a=new Blob([e.data],{type:"application/csv"}),r=document.getElementById("link-descargas");r.href=window.URL.createObjectURL(a),r.download=t.split("filename=")[1],r.click()})).catch((function(t){var a=t.response.data,r=String.fromCharCode.apply(null,new Uint8Array(a)),o={response:{data:JSON.parse(r)}},i=e.procesarErrorResponse(o);i.push("Error al generar archivo"),e.mostrarErrores(i)})).then((function(){e.procesando.exportarExcel=!1}))}else this.mostrarErrores("Se requiere el filtro Fecha")}},computed:{urlPortal:function(){return"consulta-resultados-".concat(this.portal)},ordenesProcesadas:function(){var e=this;return this.ordenes.map((function(t){var a=e.calcularSaldo(t.valor_total,t.valor_total_abonos);return v(v({},t),{},{saldo:a,pagada:e.ordenPagada(t,t.valor_total_abonos),validada:e.esOrdenValidada(t),cantidadDetallesOrdenesValidadas:e.cantidadDetallesOrdenesValidadas(t)})}))}}};const b=(0,m.Z)(g,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),!e.procesando.cargarOrdenes&&e.ordenes.length>0?t("table",{staticClass:"table table-striped table-bordered table-hover table-condensed",attrs:{id:"listado"}},[t("thead",[t("tr",[t("th",{staticClass:"text-center col-md-1"},[e._v("Orden No.")]),e._v(" "),t("th",{staticClass:"text-center col-md-2"},[e._v("Fecha")]),e._v(" "),t("th",{staticClass:"text-left"},[e._v("Paciente")]),e._v(" "),t("th",{staticClass:"text-left col-md-2"},[e._v("Médico")]),e._v(" "),t("th",{staticClass:"text-center col-md-1"},[e._v("Estado")]),e._v(" "),e.empresa.portal_estado_cuenta?t("th",{staticClass:"text-right col-md-1"},[e._v("Valor")]):e._e(),e._v(" "),t("th",{staticClass:"col-md-3 hidden-xs text-right"},["empresas"===e.portal?t("button",{staticClass:"btn btn-default",attrs:{type:"button",title:"Exportar a Excel",disabled:!(e.filtros.fechaOrden||e.filtros.cadenaBusqueda)||this.procesando.exportarExcel},on:{click:e.exportarAExcel}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.exportarExcel,expression:"!procesando.exportarExcel"}],staticClass:"fas fa-file-excel"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.procesando.exportarExcel,expression:"procesando.exportarExcel"}],staticClass:"fas fa-spinner fa-spin"})]):e._e()])])]),e._v(" "),t("tbody",[e._l(e.ordenesProcesadas,(function(a){return[t("tr",[t("td",{staticClass:"text-center",staticStyle:{position:"relative"}},[t("div",{staticClass:"visible-xs",staticStyle:{position:"absolute",top:"7px",left:"-14px",width:"400px"}},[t("opciones-orden",{attrs:{portal:e.portal,token:e.token,empresa:e.empresa,orden:a},on:{"abrir-modal-ver-resultados":e.abrirModalVerResultados,"ver-adjuntos":e.verAdjuntos,"ver-comparativo-resultados":e.verComparativoResultados,"abrir-modal-imprimir-resultados":e.abrirModalImprimirResultados,"abrir-modal-estado-orden":e.abrirModalEstadoOrden}})],1),e._v(" "),a.numero_orden_externa?t("small",[e._v(e._s(a.numero_orden_externa))]):e._e(),e._v("\n          "+e._s(a.numero_orden)+"\n        ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("div",{staticClass:"no-salto-linea",attrs:{title:e.$usuario.zonaHoraria},domProps:{innerHTML:e._s(e.$options.filters.fecha(a.fecha_orden,"YYYY-MM-DD </br> HH:mm"))}})]),e._v(" "),t("td",{staticClass:"text-left"},[t("small",[e._v("\n            "+e._s(a.paciente.numero_identificacion)+"\n            "),a.paciente.numero_historia_clinica?[t("strong",[e._v("HC:")]),e._v(" "+e._s(a.paciente.numero_historia_clinica)+"\n            ")]:e._e()],2),e._v(" "),t("div",[e._v("\n            "+e._s(a.paciente.nombre_paciente)+"\n          ")])]),e._v(" "),t("td",{staticClass:"text-left"},[a.medico?t("small",[e._v(e._s(a.medico.nombres))]):e._e(),e._v(" "),a.medico?t("div",[e._v(e._s(a.medico.apellidos))]):[e._v("-")]],2),e._v(" "),t("td",{staticClass:"text-center"},[t("orden-estado",{attrs:{"id-orden":a.id,estado:a.estado},on:{click:e.abrirModalEstadoOrden}}),e._v(" "),t("div",[t("small",[e._v("\n              "+e._s(a.cantidadDetallesOrdenesValidadas)+"/"+e._s(a.detalles_ordenes.length)+"\n            ")])])],1),e._v(" "),e.empresa.portal_estado_cuenta?t("td",{staticClass:"text-right"},[t("div",[0===a.saldo?t("i",{staticClass:"far fa-check-circle text-success",attrs:{"aria-hidden":"true"}}):t("i",{staticClass:"far fa-times-circle text-danger",attrs:{"aria-hidden":"true","data-toggle":"tooltip",title:"Saldo ".concat(e.$cliente.moneda).concat(a.saldo.toFixed(2))}})]),e._v(" "),t("div",[e._v("\n            "+e._s(e.$cliente.moneda)+e._s(a.valor_total.toFixed(2))+"\n          ")])]):e._e(),e._v(" "),t("td",{staticClass:"text-center hidden-xs"},[t("opciones-orden",{attrs:{portal:e.portal,token:e.token,empresa:e.empresa,orden:a,tamano:"sm"},on:{"abrir-modal-ver-resultados":e.abrirModalVerResultados,"ver-adjuntos":e.verAdjuntos,"ver-comparativo-resultados":e.verComparativoResultados,"abrir-modal-imprimir-resultados":e.abrirModalImprimirResultados,"abrir-modal-estado-orden":e.abrirModalEstadoOrden}})],1)])]}))],2)]):e._e(),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{id:"link-descargas"}}),e._v(" "),t("cargando",{attrs:{cargando:e.procesando.cargarOrdenes,cantidad:e.ordenes.length},scopedSlots:e._u([{key:"no-resultado",fn:function(){return["o"===e.filtros.tipoPaciente?[e._v("\n        No se han encontrado objetos\n      ")]:[e._v("\n        No se han encontrado pacientes\n      ")]]},proxy:!0}])}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.procesando.cargarOrdenes&&e.ordenes.length>0,expression:"!procesando.cargarOrdenes && ordenes.length > 0"}],staticClass:"paginacion alto-paginacion"},[t("output",{staticClass:"pull-left"},[t("strong",[e._v("Total:")]),e._v(" "+e._s(e.totalRegistros))]),e._v(" "),t("paginate",{staticClass:"pull-right",attrs:{"page-count":e.totalPaginas,"container-class":"pagination","click-handler":e.cargarOrdenes,prevText:"Anterior",nextText:"Siguiente"},model:{value:e.paginaActual,callback:function(t){e.paginaActual=t},expression:"paginaActual"}})],1),e._v(" "),t("adjuntos-modal",{attrs:{orden:e.ordenSeleccionada,token:e.token,"tipo-consulta":e.urlPortal}}),e._v(" "),t("comparativo-resultados",{attrs:{paciente:e.pacienteSeleccionado,"tipo-paciente":e.pacienteSeleccionado.tipo_paciente,visible:e.comparativoResultadosVisible},on:{cerrado:function(t){e.comparativoResultadosVisible=!1},error:e.mostrarErrores}}),e._v(" "),t("enviar-correo-resultados",{on:{"correo-electronico-enviado":e.correoElectronicoEnviado}}),e._v(" "),t("imprimir-resultados-modal",{attrs:{portal:e.portal,token:e.token}}),e._v(" "),t("estado-orden-modal",{attrs:{portal:!0}}),e._v(" "),t("ver-entregas-modal",{attrs:{portal:e.portal}}),e._v(" "),t("resultados-modal",{attrs:{portal:e.portal,token:e.token}})],1)}),[],!1,null,null,null).exports},7063:(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var r=a(5889),o=a(5480),i=a(7974);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l={components:{AdjuntosModal:r.Z,ResultadosModal:o.Z},props:{token:{type:String,required:!0},datos:{type:Object,required:!0,default:function(){return{}}},orden:{type:Object,required:!0}},data:function(){return{cargando:!1,procesando:!1}},created:function(){this.configurarInterceptor()},methods:{mostrarExito:function(e,t){this.$refs.alerta.mostrarAlerta("success",e,t)},descargarPdfResultadosRetardado:_.debounce((function(){this.descargarPdfResultados()}),200),descargarPdfResultados:function(){var e=this;this.procesando=!0,setTimeout((function(){e.procesando=!1,e.mostrarExito(["El PDF ha sido descargado.","Revise su carpeta de descargas."])}),400)},configurarInterceptor:function(){var e=this;axios.interceptors.request.use((function(t){return t.url="/resultados".concat(t.url),t.params=n(n({},t.params),{},{token:e.token}),t}))},abrirModalResultados:function(){var e=(0,i.MD)({orden:this.orden,lang:this.datos.lang});$("#modalResultados").modal({backdrop:"static"},e)}},computed:{estado:function(){return"V"===this.orden.estado||"L"===this.orden.estado||"N"===this.orden.estado?this.orden.estado:"P"},parametros:function(){var e={token:this.token,lang:this.datos.lang,seccionPorHoja:this.datos.seccionPorHoja?1:""};return this.obtenerParametrosUrl(e)},parametrosCertificado:function(){var e={token:this.token,examenId:this.datos.examenId,parametrosIds:this.datos.parametrosIds,ciudad:this.datos.ciudad};return e=this.obtenerParametrosUrl(e)}}};var d=a(3379),u=a.n(d),m=a(8283),p={insert:"head",singleton:!1};u()(m.Z,p);m.Z.locals;const f=(0,a(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",[t("alerta",{ref:"alerta"}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-12 col-sm-5 form-group"},[t("label",{staticClass:"control-label"},[e._v("Paciente")]),e._v(" "),t("div",[e._v(e._s(e.orden.paciente?e.orden.paciente.nombre_paciente:""))])]),e._v(" "),t("div",{staticClass:"col-xs-12 col-sm-2 form-group"},[t("label",{staticClass:"control-label"},[e._v("Orden No.")]),e._v(" "),t("div",[e._v(e._s(e.orden.numero_orden))])]),e._v(" "),t("div",{staticClass:"col-xs-1 form-group"},[t("label",{staticClass:"control-label"},[e._v("Estado")]),e._v(" "),t("div",[t("orden-estado",{attrs:{estado:e.estado}})],1)])]),e._v(" "),t("div",{staticClass:"row nav"},["P"===e.estado||"V"===e.estado||"L"===e.estado?t("div",{staticClass:"col-xs-12 col-sm-3 form-group"},[t("a",{staticClass:"btn btn-primary btn-sm",class:{disabled:e.procesando},attrs:{id:"portalPdfResultados",href:"/resultados/".concat(this.orden.id,"/resultados.pdf").concat(this.parametros),target:"_blank"},on:{click:e.descargarPdfResultadosRetardado}},[e.procesando?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):e._e(),e._v(" "),e.procesando?e._e():t("i",{staticClass:"fas fa-cloud-download-alt fa-fw"}),e._v("\n        Descargar PDF resultados\n      ")])]):e._e(),e._v(" "),"P"===e.estado||"V"===e.estado||"L"===e.estado?t("div",{staticClass:"col-xs-12 col-sm-2 form-group"},[t("a",{staticClass:"btn btn-primary btn-sm",attrs:{id:"portalQrVerResultados"},on:{click:e.abrirModalResultados}},[t("i",{staticClass:"fas fa-eye fa-fw"}),e._v("\n        Ver resultados\n      ")])]):e._e(),e._v(" "),!e.datos.certificado||"P"!==e.estado&&"V"!==e.estado&&"L"!==e.estado?e._e():t("div",{staticClass:"col-xs-12 col-sm-3 form-group"},[t("a",{staticClass:"btn btn-primary btn-sm",class:{disabled:e.procesando},attrs:{id:"portalPdfCertificado",href:"/resultados/".concat(this.orden.id,"/certificado").concat(this.parametrosCertificado),target:"_blank"},on:{click:e.descargarPdfResultadosRetardado}},[e.procesando?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):e._e(),e._v(" "),e.procesando?e._e():t("i",{staticClass:"fas fa-cloud-download-alt fa-fw"}),e._v("\n        Descargar certificado\n      ")])]),e._v(" "),"P"===e.estado||"V"===e.estado||"L"===e.estado?t("div",{staticClass:"col-xs-12 col-sm-2 form-group"},[t("a",{staticClass:"btn btn-primary btn-sm",attrs:{"data-toggle":"modal","data-target":"#modalAdjuntos"}},[e.procesando?t("i",{staticClass:"fas fa-spinner fa-spin fa-fw"}):e._e(),e._v(" "),e.procesando?e._e():t("i",{staticClass:"fas fa-paperclip fa-fw"}),e._v("\n        Adjuntos\n      ")])]):e._e()]),e._v(" "),t("adjuntos-modal",{attrs:{orden:e.orden,token:e.token,"tipo-consulta":"resultados"}}),e._v(" "),t("resultados-modal",{attrs:{token:e.token}})],1)}),[],!1,null,"9bbd19b0",null).exports},7776:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});const r={bind:function(e,t,a){$(e).val(t.value),$(e).change((function(){var e="",r="";if(t.expression.indexOf(".")>-1){var o=t.expression.split(".");e=a.context[o[0]],r=o[1]}else e=a.context,r=t.expression;Vue.set(e,r,$(this).val())}))},componentUpdated:function(e,t,a){$(e).val(t.value)}};const o=(0,a(1900).Z)(r,undefined,undefined,!1,null,null,null).exports},8911:(e,t,a)=>{"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,o,i=[],s=!0,n=!1;try{for(a=a.call(e);!(s=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){n=!0,o=e}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,{Z:()=>s});const i={methods:{alternarBotonesSubmit:function(){"disabled"==$('button[type="submit"]').attr("disabled")?$('button[type="submit"]').removeAttr("disabled"):$('button[type="submit"]').attr("disabled","disabled")},actualizarUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.obtenerParametrosUrl(e);t=t||window.location.pathname,history.replaceState(null,null,t)},obtenerParametrosUrl:function(e){var t=new URLSearchParams;Object.entries(e).filter((function(e){var t=r(e,2),a=(t[0],t[1]);return![null,void 0,""].includes(a)})).forEach((function(e){var a=r(e,2),o=a[0],i=a[1];Array.isArray(i)?i.forEach((function(e){return t.append("".concat(o,"[]"),e.toString())})):t.set(o,i)}));var a=decodeURIComponent(t.toString());return a?"?".concat(a):""},fechaALocal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return e?(this.$usuario.zonaHoraria||(this.$usuario.zonaHoraria=moment.tz.guess()),moment.utc(e).tz(this.$usuario.zonaHoraria).format(t)):""},fechaAUTC:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return e?(this.$usuario.zonaHoraria||(this.$usuario.zonaHoraria=moment.tz.guess()),moment.tz(e,this.$usuario.zonaHoraria).utc().format(t)):""},obtenerNumeroHistoriaClinica:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return a;if(e.es_objeto)return a;if(!e.paciente)return a;if(e.es_animal)return e.paciente.numero_historia_clinica?e.paciente.numero_historia_clinica:a;if(_.isEmpty(e.paciente.historia_clinica))return a;var r=e.paciente.historia_clinica.find((function(e){return Number(e.id)===Number(t)}));return r?r.numero:a},procesarErrorResponse:function(e){var t;if(e.message&&e.message.includes("timeout"))return console.error(e.message),["Tiempo de espera agotado"];if(null!=e&&null!==(t=e.message)&&void 0!==t&&t.includes("Network Error"))return console.error(e.message),["Error de comunicación. Por favor, revise su Internet."];if(!e||!e.response)return console.error(e),["Error inesperado. Por favor, vuelva a intentar."];var a=e.response.data;if(401===e.response.status){var r=_.get(e.response,"request.responseURL","");if(r.includes("orion-labs.com")||r.includes("orion.test")){var o=window.location.pathname;if(o.includes("consulta-"))return window.location.href=o,[];window.location.href="/"}}if(403===e.response.status)return["El usuario no tiene los permisos necesarios para ejecutar esta acción."];var i=["Error indetermidado. Por favor, vuelva a intentar."];return(a.message||a.mensaje)&&(console.error(a),a.message&&(i=[a.message]),a.mensaje&&(i=[a.mensaje])),a.message||a.errors||console.error(a),a.errors&&"string"==typeof a.errors?[a.errors]:i=a.errors?a.errors:i},obtenerEdad:function(e){var t=moment(),a=moment(e),r=t.diff(a,"year");a.add(r,"years");var o=t.diff(a,"months");a.add(o,"months");var i=t.diff(a,"days");return 0===r&&0===o?"".concat(i,"d"):0===r&&o>0?"".concat(o,"m"):r>0&&0===o?"".concat(r,"a"):"".concat(r,"a ").concat(o,"m")},copiarAPortaPapeles:function(e){var t=document.createElement("textarea");t.style.height=0,t.style.width=0,t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()},copiarAPortaPapelesPorRef:function(e){if(window.getSelection){var t=document.createRange();t.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().empty()}},sanitizarNumeroOrden:function(e){return e.trim().replace(/\b([-'])(0?[1-9]|[1-9][0-9])\b/g,"")},redondear2Decimales:function(e){return Math.round(100*(+e+Number.EPSILON))/100},atajoTecladoCadenaBusqueda:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cadena_busqueda";document.addEventListener("keyup",(function(t){/\//g.test(t.key)&&$("#".concat(e)).focus()}))}}};const s=(0,a(1900).Z)(i,undefined,undefined,!1,null,null,null).exports}},e=>{var t=t=>e(e.s=t);e.O(0,[213,719,374,170,191,895,724,592,830,889,562,947,957,537,613,222,71,111,239,628,309,732,158,862,8,812,491,671,552,299,445,325,499,65,898],(()=>(t(7745),t(6609),t(3846),t(3499),t(417),t(1057),t(2982),t(1039),t(2577),t(336),t(3299),t(3834),t(1846),t(5182),t(5391),t(1632),t(2296),t(8952),t(1346),t(9055),t(3199),t(6462),t(5899),t(1537),t(9988),t(1682),t(5062),t(8477),t(3487),t(1664),t(171),t(4736),t(9642),t(2261),t(5510))));e.O()}]);
//# sourceMappingURL=app.js.map